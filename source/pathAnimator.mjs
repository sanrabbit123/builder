/*! For license information please see pathAnimator.mjs.LICENSE.txt */
var __webpack_modules__={631:module=>{module.exports=function e(){var i=function(){var hl=Object.create,Tt=Object.defineProperty,dl=Object.getOwnPropertyDescriptor,ml=Object.getOwnPropertyNames,yl=Object.getPrototypeOf,gl=Object.prototype.hasOwnProperty,g=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Zs=(t,e)=>{for(var s in e)Tt(t,s,{get:e[s],enumerable:!0})},en=(t,e,s,r)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let n of ml(e))!gl.call(t,n)&&n!==s&&Tt(t,n,{get:()=>e[n],enumerable:!(r=dl(e,n))||r.enumerable});return t},xe=(t,e,s)=>(s=null!=t?hl(yl(t)):{},en(!e&&t&&t.__esModule?s:Tt(s,"default",{value:t,enumerable:!0}),t)),wl=t=>en(Tt({},"__esModule",{value:!0}),t),bi=g((bv,ss)=>{var _=String,xi=function(){return{isColorSupported:!1,reset:_,bold:_,dim:_,italic:_,underline:_,inverse:_,hidden:_,strikethrough:_,black:_,red:_,green:_,yellow:_,blue:_,magenta:_,cyan:_,white:_,gray:_,bgBlack:_,bgRed:_,bgGreen:_,bgYellow:_,bgBlue:_,bgMagenta:_,bgCyan:_,bgWhite:_,blackBright:_,redBright:_,greenBright:_,yellowBright:_,blueBright:_,magentaBright:_,cyanBright:_,whiteBright:_,bgBlackBright:_,bgRedBright:_,bgGreenBright:_,bgYellowBright:_,bgBlueBright:_,bgMagentaBright:_,bgCyanBright:_,bgWhiteBright:_}};ss.exports=xi(),ss.exports.createColors=xi}),ns=g(()=>{}),Yt=g((kv,ki)=>{var _i=bi(),Ei=ns(),ot=class t extends Error{constructor(e,s,r,n,i,o){super(e),this.name="CssSyntaxError",this.reason=e,i&&(this.file=i),n&&(this.source=n),o&&(this.plugin=o),typeof s<"u"&&typeof r<"u"&&("number"==typeof s?(this.line=s,this.column=r):(this.line=s.line,this.column=s.column,this.endLine=r.line,this.endColumn=r.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,t)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let s=this.source;null==e&&(e=_i.isColorSupported);let r=f=>f,n=f=>f,i=f=>f;if(e){let{bold:f,gray:p,red:l}=_i.createColors(!0);n=y=>f(l(y)),r=y=>p(y),Ei&&(i=y=>Ei(y))}let o=s.split(/\r?\n/),u=Math.max(this.line-3,0),a=Math.min(this.line+2,o.length),c=String(a).length;return o.slice(u,a).map((f,p)=>{let l=u+1+p,y=" "+(" "+l).slice(-c)+" | ";if(l===this.line){if(f.length>160){let h=20,d=Math.max(0,this.column-h),m=Math.max(this.column+h,this.endColumn+h),b=f.slice(d,m),w=r(y.replace(/\d/g," "))+f.slice(0,Math.min(this.column-1,h-1)).replace(/[^\t]/g," ");return n(">")+r(y)+i(b)+"\n "+w+n("^")}let x=r(y.replace(/\d/g," "))+f.slice(0,this.column-1).replace(/[^\t]/g," ");return n(">")+r(y)+i(f)+"\n "+x+n("^")}return" "+r(y)+i(f)}).join("\n")}toString(){let e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}};ki.exports=ot,ot.default=ot}),Vt=g((Sv,Ti)=>{var Si={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function wc(t){return t[0].toUpperCase()+t.slice(1)}var at=class{constructor(e){this.builder=e}atrule(e,s){let r="@"+e.name,n=e.params?this.rawValue(e,"params"):"";if(typeof e.raws.afterName<"u"?r+=e.raws.afterName:n&&(r+=" "),e.nodes)this.block(e,r+n);else{let i=(e.raws.between||"")+(s?";":"");this.builder(r+n+i,e)}}beforeAfter(e,s){let r;r="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===s?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let n=e.parent,i=0;for(;n&&"root"!==n.type;)i+=1,n=n.parent;if(r.includes("\n")){let o=this.raw(e,null,"indent");if(o.length)for(let u=0;u<i;u++)r+=o}return r}block(e,s){let n,r=this.raw(e,"between","beforeOpen");this.builder(s+r+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),n=this.raw(e,"after")):n=this.raw(e,"after","emptyBody"),n&&this.builder(n),this.builder("}",e,"end")}body(e){let s=e.nodes.length-1;for(;s>0&&"comment"===e.nodes[s].type;)s-=1;let r=this.raw(e,"semicolon");for(let n=0;n<e.nodes.length;n++){let i=e.nodes[n],o=this.raw(i,"before");o&&this.builder(o),this.stringify(i,s!==n||r)}}comment(e){let s=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder("/*"+s+e.text+r+"*/",e)}decl(e,s){let r=this.raw(e,"between","colon"),n=e.prop+r+this.rawValue(e,"value");e.important&&(n+=e.raws.important||" !important"),s&&(n+=";"),this.builder(n,e)}document(e){this.body(e)}raw(e,s,r){let n;if(r||(r=s),s&&(n=e.raws[s],typeof n<"u"))return n;let i=e.parent;if("before"===r&&(!i||"root"===i.type&&i.first===e||i&&"document"===i.type))return"";if(!i)return Si[r];let o=e.root();if(o.rawCache||(o.rawCache={}),typeof o.rawCache[r]<"u")return o.rawCache[r];if("before"===r||"after"===r)return this.beforeAfter(e,r);{let u="raw"+wc(r);this[u]?n=this[u](o,e):o.walk(a=>{if(n=a.raws[s],typeof n<"u")return!1})}return typeof n>"u"&&(n=Si[r]),o.rawCache[r]=n,n}rawBeforeClose(e){let s;return e.walk(r=>{if(r.nodes&&r.nodes.length>0&&typeof r.raws.after<"u")return s=r.raws.after,s.includes("\n")&&(s=s.replace(/[^\n]+$/,"")),!1}),s&&(s=s.replace(/\S/g,"")),s}rawBeforeComment(e,s){let r;return e.walkComments(n=>{if(typeof n.raws.before<"u")return r=n.raws.before,r.includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(s,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeDecl(e,s){let r;return e.walkDecls(n=>{if(typeof n.raws.before<"u")return r=n.raws.before,r.includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(s,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeOpen(e){let s;return e.walk(r=>{if("decl"!==r.type&&(s=r.raws.between,typeof s<"u"))return!1}),s}rawBeforeRule(e){let s;return e.walk(r=>{if(r.nodes&&(r.parent!==e||e.first!==r)&&typeof r.raws.before<"u")return s=r.raws.before,s.includes("\n")&&(s=s.replace(/[^\n]+$/,"")),!1}),s&&(s=s.replace(/\S/g,"")),s}rawColon(e){let s;return e.walkDecls(r=>{if(typeof r.raws.between<"u")return s=r.raws.between.replace(/[^\s:]/g,""),!1}),s}rawEmptyBody(e){let s;return e.walk(r=>{if(r.nodes&&0===r.nodes.length&&(s=r.raws.after,typeof s<"u"))return!1}),s}rawIndent(e){if(e.raws.indent)return e.raws.indent;let s;return e.walk(r=>{let n=r.parent;if(n&&n!==e&&n.parent&&n.parent===e&&typeof r.raws.before<"u"){let i=r.raws.before.split("\n");return s=i[i.length-1],s=s.replace(/\S/g,""),!1}}),s}rawSemicolon(e){let s;return e.walk(r=>{if(r.nodes&&r.nodes.length&&"decl"===r.last.type&&(s=r.raws.semicolon,typeof s<"u"))return!1}),s}rawValue(e,s){let r=e[s],n=e.raws[s];return n&&n.value===r?n.raw:r}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,s){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,s)}};Ti.exports=at,at.default=at}),ut=g((Tv,Ci)=>{var vc=Vt();function is(t,e){new vc(e).stringify(t)}Ci.exports=is,is.default=is}),zt=g((Cv,os)=>{os.exports.isClean=Symbol("isClean"),os.exports.my=Symbol("my")}),pt=g((Ov,Oi)=>{var xc=Yt(),bc=Vt(),_c=ut(),{isClean:lt,my:Ec}=zt();function as(t,e){let s=new t.constructor;for(let r in t){if(!Object.prototype.hasOwnProperty.call(t,r)||"proxyCache"===r)continue;let n=t[r],i=typeof n;"parent"===r&&"object"===i?e&&(s[r]=e):"source"===r?s[r]=n:Array.isArray(n)?s[r]=n.map(o=>as(o,s)):("object"===i&&null!==n&&(n=as(n)),s[r]=n)}return s}function ct(t,e){if(e&&typeof e.offset<"u")return e.offset;let s=1,r=1,n=0;for(let i=0;i<t.length;i++){if(r===e.line&&s===e.column){n=i;break}"\n"===t[i]?(s=1,r+=1):s+=1}return n}var ft=class{get proxyOf(){return this}constructor(e={}){this.raws={},this[lt]=!1,this[Ec]=!0;for(let s in e)if("nodes"===s){this.nodes=[];for(let r of e[s])"function"==typeof r.clone?this.append(r.clone()):this.append(r)}else this[s]=e[s]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let s=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${s.input.from}:${s.start.line}:${s.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let s in e)this[s]=e[s];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let s=as(this);for(let r in e)s[r]=e[r];return s}cloneAfter(e={}){let s=this.clone(e);return this.parent.insertAfter(this,s),s}cloneBefore(e={}){let s=this.clone(e);return this.parent.insertBefore(this,s),s}error(e,s={}){if(this.source){let{end:r,start:n}=this.rangeBy(s);return this.source.input.error(e,{column:n.column,line:n.line},{column:r.column,line:r.line},s)}return new xc(e)}getProxyProcessor(){return{get:(e,s)=>"proxyOf"===s?e:"root"===s?()=>e.root().toProxy():e[s],set:(e,s,r)=>(e[s]===r||(e[s]=r,("prop"===s||"value"===s||"name"===s||"params"===s||"important"===s||"text"===s)&&e.markDirty()),!0)}}markClean(){this[lt]=!0}markDirty(){if(this[lt]){this[lt]=!1;let e=this;for(;e=e.parent;)e[lt]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e){let s=this.source.start;if(e.index)s=this.positionInside(e.index);else if(e.word){let r="document"in this.source.input?this.source.input.document:this.source.input.css,i=r.slice(ct(r,this.source.start),ct(r,this.source.end)).indexOf(e.word);-1!==i&&(s=this.positionInside(i))}return s}positionInside(e){let s=this.source.start.column,r=this.source.start.line,n="document"in this.source.input?this.source.input.document:this.source.input.css,i=ct(n,this.source.start),o=i+e;for(let u=i;u<o;u++)"\n"===n[u]?(s=1,r+=1):s+=1;return{column:s,line:r}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let s={column:this.source.start.column,line:this.source.start.line},r=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:s.column+1,line:s.line};if(e.word){let n="document"in this.source.input?this.source.input.document:this.source.input.css,o=n.slice(ct(n,this.source.start),ct(n,this.source.end)).indexOf(e.word);-1!==o&&(s=this.positionInside(o),r=this.positionInside(o+e.word.length))}else e.start?s={column:e.start.column,line:e.start.line}:e.index&&(s=this.positionInside(e.index)),e.end?r={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?r=this.positionInside(e.endIndex):e.index&&(r=this.positionInside(e.index+1));return(r.line<s.line||r.line===s.line&&r.column<=s.column)&&(r={column:s.column+1,line:s.line}),{end:r,start:s}}raw(e,s){return(new bc).raw(this,e,s)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let s=this,r=!1;for(let n of e)n===this?r=!0:r?(this.parent.insertAfter(s,n),s=n):this.parent.insertBefore(s,n);r||this.remove()}return this}root(){let e=this;for(;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}toJSON(e,s){let r={},n=null==s;s=s||new Map;let i=0;for(let o in this){if(!Object.prototype.hasOwnProperty.call(this,o)||"parent"===o||"proxyCache"===o)continue;let u=this[o];if(Array.isArray(u))r[o]=u.map(a=>"object"==typeof a&&a.toJSON?a.toJSON(null,s):a);else if("object"==typeof u&&u.toJSON)r[o]=u.toJSON(null,s);else if("source"===o){let a=s.get(u.input);null==a&&(a=i,s.set(u.input,i),i++),r[o]={end:u.end,inputId:a,start:u.start}}else r[o]=u}return n&&(r.inputs=[...s.keys()].map(o=>o.toJSON())),r}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=_c){e.stringify&&(e=e.stringify);let s="";return e(this,r=>{s+=r}),s}warn(e,s,r){let n={node:this};for(let i in r)n[i]=r[i];return e.warn(s,n)}};Oi.exports=ft,ft.default=ft}),Re=g((Av,Ai)=>{var kc=pt(),ht=class extends kc{constructor(e){super(e),this.type="comment"}};Ai.exports=ht,ht.default=ht}),mt=g((Nv,Ni)=>{var Sc=pt(),dt=class extends Sc{get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}constructor(e){e&&typeof e.value<"u"&&"string"!=typeof e.value&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}};Ni.exports=dt,dt.default=dt}),le=g((Pv,Ui)=>{var us,Li,Di,ls,Pi=Re(),Ri=mt(),Tc=pt(),{isClean:Ii,my:qi}=zt();function Bi(t){return t.map(e=>(e.nodes&&(e.nodes=Bi(e.nodes)),delete e.source,e))}function Mi(t){if(t[Ii]=!1,t.proxyOf.nodes)for(let e of t.proxyOf.nodes)Mi(e)}var z=class t extends Tc{get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}append(...e){for(let s of e){let r=this.normalize(s,this.last);for(let n of r)this.proxyOf.nodes.push(n)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let s of this.nodes)s.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let r,n,s=this.getIterator();for(;this.indexes[s]<this.proxyOf.nodes.length&&(r=this.indexes[s],n=e(this.proxyOf.nodes[r],r),!1!==n);)this.indexes[s]+=1;return delete this.indexes[s],n}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get:(e,s)=>"proxyOf"===s?e:e[s]?"each"===s||"string"==typeof s&&s.startsWith("walk")?(...r)=>e[s](...r.map(n=>"function"==typeof n?(i,o)=>n(i.toProxy(),o):n)):"every"===s||"some"===s?r=>e[s]((n,...i)=>r(n.toProxy(),...i)):"root"===s?()=>e.root().toProxy():"nodes"===s?e.nodes.map(r=>r.toProxy()):"first"===s||"last"===s?e[s].toProxy():e[s]:e[s],set:(e,s,r)=>(e[s]===r||(e[s]=r,("name"===s||"params"===s||"selector"===s)&&e.markDirty()),!0)}}index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,s){let i,r=this.index(e),n=this.normalize(s,this.proxyOf.nodes[r]).reverse();r=this.index(e);for(let o of n)this.proxyOf.nodes.splice(r+1,0,o);for(let o in this.indexes)i=this.indexes[o],r<i&&(this.indexes[o]=i+n.length);return this.markDirty(),this}insertBefore(e,s){let o,r=this.index(e),n=0===r&&"prepend",i=this.normalize(s,this.proxyOf.nodes[r],n).reverse();r=this.index(e);for(let u of i)this.proxyOf.nodes.splice(r,0,u);for(let u in this.indexes)o=this.indexes[u],r<=o&&(this.indexes[u]=o+i.length);return this.markDirty(),this}normalize(e,s){if("string"==typeof e)e=Bi(Li(e).nodes);else if(typeof e>"u")e=[];else if(Array.isArray(e)){e=e.slice(0);for(let n of e)n.parent&&n.parent.removeChild(n,"ignore")}else if("root"===e.type&&"document"!==this.type){e=e.nodes.slice(0);for(let n of e)n.parent&&n.parent.removeChild(n,"ignore")}else if(e.type)e=[e];else if(e.prop){if(typeof e.value>"u")throw new Error("Value field is missed in node creation");"string"!=typeof e.value&&(e.value=String(e.value)),e=[new Ri(e)]}else if(e.selector||e.selectors)e=[new ls(e)];else if(e.name)e=[new us(e)];else{if(!e.text)throw new Error("Unknown node type in node creation");e=[new Pi(e)]}return e.map(n=>(n[qi]||t.rebuild(n),(n=n.proxyOf).parent&&n.parent.removeChild(n),n[Ii]&&Mi(n),n.raws||(n.raws={}),typeof n.raws.before>"u"&&s&&typeof s.raws.before<"u"&&(n.raws.before=s.raws.before.replace(/\S/g,"")),n.parent=this.proxyOf,n))}prepend(...e){e=e.reverse();for(let s of e){let r=this.normalize(s,this.first,"prepend").reverse();for(let n of r)this.proxyOf.nodes.unshift(n);for(let n in this.indexes)this.indexes[n]=this.indexes[n]+r.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){let s;e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);for(let r in this.indexes)s=this.indexes[r],s>=e&&(this.indexes[r]=s-1);return this.markDirty(),this}replaceValues(e,s,r){return r||(r=s,s={}),this.walkDecls(n=>{s.props&&!s.props.includes(n.prop)||s.fast&&!n.value.includes(s.fast)||(n.value=n.value.replace(e,r))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((s,r)=>{let n;try{n=e(s,r)}catch(i){throw s.addToError(i)}return!1!==n&&s.walk&&(n=s.walk(e)),n})}walkAtRules(e,s){return s?e instanceof RegExp?this.walk((r,n)=>{if("atrule"===r.type&&e.test(r.name))return s(r,n)}):this.walk((r,n)=>{if("atrule"===r.type&&r.name===e)return s(r,n)}):(s=e,this.walk((r,n)=>{if("atrule"===r.type)return s(r,n)}))}walkComments(e){return this.walk((s,r)=>{if("comment"===s.type)return e(s,r)})}walkDecls(e,s){return s?e instanceof RegExp?this.walk((r,n)=>{if("decl"===r.type&&e.test(r.prop))return s(r,n)}):this.walk((r,n)=>{if("decl"===r.type&&r.prop===e)return s(r,n)}):(s=e,this.walk((r,n)=>{if("decl"===r.type)return s(r,n)}))}walkRules(e,s){return s?e instanceof RegExp?this.walk((r,n)=>{if("rule"===r.type&&e.test(r.selector))return s(r,n)}):this.walk((r,n)=>{if("rule"===r.type&&r.selector===e)return s(r,n)}):(s=e,this.walk((r,n)=>{if("rule"===r.type)return s(r,n)}))}};z.registerParse=t=>{Li=t},z.registerRule=t=>{ls=t},z.registerAtRule=t=>{us=t},z.registerRoot=t=>{Di=t},Ui.exports=z,z.default=z,z.rebuild=t=>{"atrule"===t.type?Object.setPrototypeOf(t,us.prototype):"rule"===t.type?Object.setPrototypeOf(t,ls.prototype):"decl"===t.type?Object.setPrototypeOf(t,Ri.prototype):"comment"===t.type?Object.setPrototypeOf(t,Pi.prototype):"root"===t.type&&Object.setPrototypeOf(t,Di.prototype),t[qi]=!0,t.nodes&&t.nodes.forEach(e=>{z.rebuild(e)})}}),$i=g((Rv,Fi)=>{var Cc="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Oc=(t,e=21)=>(s=e)=>{let r="",n=0|s;for(;n--;)r+=t[Math.random()*t.length|0];return r},Ac=(t=21)=>{let e="",s=0|t;for(;s--;)e+=Cc[64*Math.random()|0];return e};Fi.exports={nanoid:Ac,customAlphabet:Oc}}),Wi=g(()=>{}),cs=g((Lv,Yi)=>{Yi.exports=class{}}),qe=g((Bv,ji)=>{var{nanoid:Nc}=$i(),{isAbsolute:hs,resolve:ds}={},{SourceMapConsumer:Pc,SourceMapGenerator:Rc}=Wi(),{fileURLToPath:Vi,pathToFileURL:Gt}={},zi=Yt(),Ic=cs(),fs=ns(),ps=Symbol("fromOffsetCache"),qc=!(!Pc||!Rc),Gi=!(!ds||!hs),Ie=class{get from(){return this.file||this.id}constructor(e,s={}){if(null===e||typeof e>"u"||"object"==typeof e&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),"\ufeff"===this.css[0]||"￾"===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,this.document=this.css,s.document&&(this.document=s.document.toString()),s.from&&(!Gi||/^\w+:\/\//.test(s.from)||hs(s.from)?this.file=s.from:this.file=ds(s.from)),Gi&&qc){let r=new Ic(this.css,s);if(r.text){this.map=r;let n=r.consumer().file;!this.file&&n&&(this.file=this.mapResolve(n))}}this.file||(this.id="<input css "+Nc(6)+">"),this.map&&(this.map.file=this.from)}error(e,s,r,n={}){let i,o,u;if(s&&"object"==typeof s){let c=s,f=r;if("number"==typeof c.offset){let p=this.fromOffset(c.offset);s=p.line,r=p.col}else s=c.line,r=c.column;if("number"==typeof f.offset){let p=this.fromOffset(f.offset);o=p.line,i=p.col}else o=f.line,i=f.column}else if(!r){let c=this.fromOffset(s);s=c.line,r=c.col}let a=this.origin(s,r,o,i);return u=a?new zi(e,void 0===a.endLine?a.line:{column:a.column,line:a.line},void 0===a.endLine?a.column:{column:a.endColumn,line:a.endLine},a.source,a.file,n.plugin):new zi(e,void 0===o?s:{column:r,line:s},void 0===o?r:{column:i,line:o},this.css,this.file,n.plugin),u.input={column:r,endColumn:i,endLine:o,line:s,source:this.css},this.file&&(Gt&&(u.input.url=Gt(this.file).toString()),u.input.file=this.file),u}fromOffset(e){let s,r;if(this[ps])r=this[ps];else{let i=this.css.split("\n");r=new Array(i.length);let o=0;for(let u=0,a=i.length;u<a;u++)r[u]=o,o+=i[u].length+1;this[ps]=r}s=r[r.length-1];let n=0;if(e>=s)n=r.length-1;else{let o,i=r.length-2;for(;n<i;)if(o=n+(i-n>>1),e<r[o])i=o-1;else{if(!(e>=r[o+1])){n=o;break}n=o+1}}return{col:e-r[n]+1,line:n+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:ds(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,s,r,n){if(!this.map)return!1;let u,a,i=this.map.consumer(),o=i.originalPositionFor({column:s,line:e});if(!o.source)return!1;"number"==typeof r&&(u=i.originalPositionFor({column:n,line:r})),a=hs(o.source)?Gt(o.source):new URL(o.source,this.map.consumer().sourceRoot||Gt(this.map.mapFile));let c={column:o.column,endColumn:u&&u.column,endLine:u&&u.line,line:o.line,url:a.toString()};if("file:"===a.protocol){if(!Vi)throw new Error("file: protocol is not available in this PostCSS build");c.file=Vi(a)}let f=i.sourceContentFor(o.source);return f&&(c.source=f),c}toJSON(){let e={};for(let s of["hasBOM","css","file","id"])null!=this[s]&&(e[s]=this[s]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}};ji.exports=Ie,Ie.default=Ie,fs&&fs.registerInput&&fs.registerInput(Ie)}),jt=g((Mv,Ki)=>{var Hi=le(),Le=class extends Hi{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};Ki.exports=Le,Le.default=Le,Hi.registerAtRule(Le)}),De=g((Uv,Zi)=>{var Ji,Xi,Qi=le(),ce=class extends Qi{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,s,r){let n=super.normalize(e);if(s)if("prepend"===r)this.nodes.length>1?s.raws.before=this.nodes[1].raws.before:delete s.raws.before;else if(this.first!==s)for(let i of n)i.raws.before=s.raws.before;return n}removeChild(e,s){let r=this.index(e);return!s&&0===r&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(e)}toResult(e={}){return new Ji(new Xi,this,e).stringify()}};ce.registerLazyResult=t=>{Ji=t},ce.registerProcessor=t=>{Xi=t},Zi.exports=ce,ce.default=ce,Qi.registerRoot(ce)}),ms=g((Fv,eo)=>{var yt={comma:t=>yt.split(t,[","],!0),space(t){let e=[" ","\n","\t"];return yt.split(t,e)},split(t,e,s){let r=[],n="",i=!1,o=0,u=!1,a="",c=!1;for(let f of t)c?c=!1:"\\"===f?c=!0:u?f===a&&(u=!1):'"'===f||"'"===f?(u=!0,a=f):"("===f?o+=1:")"===f?o>0&&(o-=1):0===o&&e.includes(f)&&(i=!0),i?(""!==n&&r.push(n.trim()),n="",i=!1):n+=f;return(s||""!==n)&&r.push(n.trim()),r}};eo.exports=yt,yt.default=yt}),Ht=g(($v,ro)=>{var to=le(),Lc=ms(),Be=class extends to{get selectors(){return Lc.comma(this.selector)}set selectors(e){let s=this.selector?this.selector.match(/,\s*/):null,r=s?s[0]:","+this.raw("between","beforeOpen");this.selector=e.join(r)}constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}};ro.exports=Be,Be.default=Be,to.registerRule(Be)}),Jt=g((Wv,no)=>{var Kt=/[\t\n\f\r "#'()/;[\\\]{}]/g,Qt=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,Dc=/.[\r\n"'(/\\]/,so=/[\da-f]/i;no.exports=function(e,s={}){let i,o,u,a,c,f,p,l,y,x,r=e.css.valueOf(),n=s.ignoreErrors,h=r.length,d=0,m=[],b=[];function w(){return d}function v(W){throw e.error("Unclosed "+W,d)}function N(){return 0===b.length&&d>=h}function F(W){if(b.length)return b.pop();if(d>=h)return;let T=!!W&&W.ignoreUnclosed;switch(i=r.charCodeAt(d),i){case 10:case 32:case 9:case 13:case 12:a=d;do{a+=1,i=r.charCodeAt(a)}while(32===i||10===i||9===i||13===i||12===i);f=["space",r.slice(d,a)],d=a-1;break;case 91:case 93:case 123:case 125:case 58:case 59:case 41:{let C=String.fromCharCode(i);f=[C,C,d];break}case 40:if(x=m.length?m.pop()[1]:"",y=r.charCodeAt(d+1),"url"===x&&39!==y&&34!==y&&32!==y&&10!==y&&9!==y&&12!==y&&13!==y){a=d;do{if(p=!1,a=r.indexOf(")",a+1),-1===a){if(n||T){a=d;break}v("bracket")}for(l=a;92===r.charCodeAt(l-1);)l-=1,p=!p}while(p);f=["brackets",r.slice(d,a+1),d,a],d=a}else a=r.indexOf(")",d+1),o=r.slice(d,a+1),-1===a||Dc.test(o)?f=["(","(",d]:(f=["brackets",o,d,a],d=a);break;case 39:case 34:c=39===i?"'":'"',a=d;do{if(p=!1,a=r.indexOf(c,a+1),-1===a){if(n||T){a=d+1;break}v("string")}for(l=a;92===r.charCodeAt(l-1);)l-=1,p=!p}while(p);f=["string",r.slice(d,a+1),d,a],d=a;break;case 64:Kt.lastIndex=d+1,Kt.test(r),a=0===Kt.lastIndex?r.length-1:Kt.lastIndex-2,f=["at-word",r.slice(d,a+1),d,a],d=a;break;case 92:for(a=d,u=!0;92===r.charCodeAt(a+1);)a+=1,u=!u;if(i=r.charCodeAt(a+1),u&&47!==i&&32!==i&&10!==i&&9!==i&&13!==i&&12!==i&&(a+=1,so.test(r.charAt(a)))){for(;so.test(r.charAt(a+1));)a+=1;32===r.charCodeAt(a+1)&&(a+=1)}f=["word",r.slice(d,a+1),d,a],d=a;break;default:47===i&&42===r.charCodeAt(d+1)?(a=r.indexOf("*/",d+2)+1,0===a&&(n||T?a=r.length:v("comment")),f=["comment",r.slice(d,a+1),d,a],d=a):(Qt.lastIndex=d+1,Qt.test(r),a=0===Qt.lastIndex?r.length-1:Qt.lastIndex-2,f=["word",r.slice(d,a+1),d,a],m.push(f),d=a)}return d++,f}function Q(W){b.push(W)}return{back:Q,endOfFile:N,nextToken:F,position:w}}}),Xt=g((Yv,ao)=>{var Bc=jt(),Mc=Re(),Uc=mt(),Fc=De(),io=Ht(),$c=Jt(),oo={empty:!0,space:!0};function Wc(t){for(let e=t.length-1;e>=0;e--){let s=t[e],r=s[3]||s[2];if(r)return r}}var ys=class{constructor(e){this.input=e,this.root=new Fc,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let s=new Bc;s.name=e[1].slice(1),""===s.name&&this.unnamedAtrule(s,e),this.init(s,e[2]);let r,n,i,o=!1,u=!1,a=[],c=[];for(;!this.tokenizer.endOfFile();){if(r=(e=this.tokenizer.nextToken())[0],"("===r||"["===r?c.push("("===r?")":"]"):"{"===r&&c.length>0?c.push("}"):r===c[c.length-1]&&c.pop(),0===c.length){if(";"===r){s.source.end=this.getPosition(e[2]),s.source.end.offset++,this.semicolon=!0;break}if("{"===r){u=!0;break}if("}"===r){if(a.length>0){for(i=a.length-1,n=a[i];n&&"space"===n[0];)n=a[--i];n&&(s.source.end=this.getPosition(n[3]||n[2]),s.source.end.offset++)}this.end(e);break}a.push(e)}else a.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}s.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(s.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(s,"params",a),o&&(e=a[a.length-1],s.source.end=this.getPosition(e[3]||e[2]),s.source.end.offset++,this.spaces=s.raws.between,s.raws.between="")):(s.raws.afterName="",s.params=""),u&&(s.nodes=[],this.current=s)}checkMissedSemicolon(e){let s=this.colon(e);if(!1===s)return;let n,r=0;for(let i=s-1;i>=0&&(n=e[i],"space"===n[0]||(r+=1,2!==r));i--);throw this.input.error("Missed semicolon","word"===n[0]?n[3]+1:n[2])}colon(e){let r,n,i,s=0;for(let[o,u]of e.entries()){if(n=u,i=n[0],"("===i&&(s+=1),")"===i&&(s-=1),0===s&&":"===i){if(r){if("word"===r[0]&&"progid"===r[1])continue;return o}this.doubleColon(n)}r=n}return!1}comment(e){let s=new Mc;this.init(s,e[2]),s.source.end=this.getPosition(e[3]||e[2]),s.source.end.offset++;let r=e[1].slice(2,-2);if(/^\s*$/.test(r))s.text="",s.raws.left=r,s.raws.right="";else{let n=r.match(/^(\s*)([^]*\S)(\s*)$/);s.text=n[2],s.raws.left=n[1],s.raws.right=n[3]}}createTokenizer(){this.tokenizer=$c(this.input)}decl(e,s){let r=new Uc;this.init(r,e[0][2]);let i,n=e[e.length-1];for(";"===n[0]&&(this.semicolon=!0,e.pop()),r.source.end=this.getPosition(n[3]||n[2]||Wc(e)),r.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),r.raws.before+=e.shift()[1];for(r.source.start=this.getPosition(e[0][2]),r.prop="";e.length;){let c=e[0][0];if(":"===c||"space"===c||"comment"===c)break;r.prop+=e.shift()[1]}for(r.raws.between="";e.length;){if(i=e.shift(),":"===i[0]){r.raws.between+=i[1];break}"word"===i[0]&&/\w/.test(i[1])&&this.unknownWord([i]),r.raws.between+=i[1]}("_"===r.prop[0]||"*"===r.prop[0])&&(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));let u,o=[];for(;e.length&&(u=e[0][0],"space"===u||"comment"===u);)o.push(e.shift());this.precheckMissedSemicolon(e);for(let c=e.length-1;c>=0;c--){if(i=e[c],"!important"===i[1].toLowerCase()){r.important=!0;let f=this.stringFrom(e,c);f=this.spacesFromEnd(e)+f," !important"!==f&&(r.raws.important=f);break}if("important"===i[1].toLowerCase()){let f=e.slice(0),p="";for(let l=c;l>0;l--){let y=f[l][0];if(p.trim().startsWith("!")&&"space"!==y)break;p=f.pop()[1]+p}p.trim().startsWith("!")&&(r.important=!0,r.raws.important=p,e=f)}if("space"!==i[0]&&"comment"!==i[0])break}e.some(c=>"space"!==c[0]&&"comment"!==c[0])&&(r.raws.between+=o.map(c=>c[1]).join(""),o=[]),this.raw(r,"value",o.concat(e),s),r.value.includes(":")&&!s&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let s=new io;this.init(s,e[2]),s.selector="",s.raws.between="",this.current=s}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let s=this.current.nodes[this.current.nodes.length-1];s&&"rule"===s.type&&!s.raws.ownSemicolon&&(s.raws.ownSemicolon=this.spaces,this.spaces="",s.source.end=this.getPosition(e[2]),s.source.end.offset+=s.raws.ownSemicolon.length)}}getPosition(e){let s=this.input.fromOffset(e);return{column:s.col,line:s.line,offset:e}}init(e,s){this.current.push(e),e.source={input:this.input,start:this.getPosition(s)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}other(e){let s=!1,r=null,n=!1,i=null,o=[],u=e[1].startsWith("--"),a=[],c=e;for(;c;){if(r=c[0],a.push(c),"("===r||"["===r)i||(i=c),o.push("("===r?")":"]");else if(u&&n&&"{"===r)i||(i=c),o.push("}");else if(0===o.length){if(";"===r){if(n)return void this.decl(a,u);break}if("{"===r)return void this.rule(a);if("}"===r){this.tokenizer.back(a.pop()),s=!0;break}":"===r&&(n=!0)}else r===o[o.length-1]&&(o.pop(),0===o.length&&(i=null));c=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(s=!0),o.length>0&&this.unclosedBracket(i),s&&n){if(!u)for(;a.length&&(c=a[a.length-1][0],"space"===c||"comment"===c);)this.tokenizer.back(a.pop());this.decl(a,u)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}precheckMissedSemicolon(){}raw(e,s,r,n){let i,o,f,p,u=r.length,a="",c=!0;for(let l=0;l<u;l+=1)i=r[l],o=i[0],"space"!==o||l!==u-1||n?"comment"===o?(p=r[l-1]?r[l-1][0]:"empty",f=r[l+1]?r[l+1][0]:"empty",oo[p]||oo[f]||","===a.slice(-1)?c=!1:a+=i[1]):a+=i[1]:c=!1;if(!c){let l=r.reduce((y,x)=>y+x[1],"");e.raws[s]={raw:l,value:a}}e[s]=a}rule(e){e.pop();let s=new io;this.init(s,e[0][2]),s.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(s,"selector",e),this.current=s}spacesAndCommentsFromEnd(e){let s,r="";for(;e.length&&(s=e[e.length-1][0],"space"===s||"comment"===s);)r=e.pop()[1]+r;return r}spacesAndCommentsFromStart(e){let s,r="";for(;e.length&&(s=e[0][0],"space"===s||"comment"===s);)r+=e.shift()[1];return r}spacesFromEnd(e){let s,r="";for(;e.length&&(s=e[e.length-1][0],"space"===s);)r=e.pop()[1]+r;return r}stringFrom(e,s){let r="";for(let n=s;n<e.length;n++)r+=e[n][1];return e.splice(s,e.length-s),r}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word "+e[0][1],{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,s){throw this.input.error("At-rule without name",{offset:s[2]},{offset:s[2]+s[1].length})}};ao.exports=ys}),gt=g((Vv,uo)=>{var Yc=le(),Vc=qe(),zc=Xt();function Zt(t,e){let s=new Vc(t,e),r=new zc(s);try{r.parse()}catch(n){throw n}return r.root}uo.exports=Zt,Zt.default=Zt,Yc.registerParse(Zt)}),lo=g((zv,gs)=>{var Gc=Jt(),jc=qe();gs.exports={isInlineComment(t){if("word"===t[0]&&"//"===t[1].slice(0,2)){let r,n,e=t,s=[];for(;t;){if(/\r?\n/.test(t[1])){if(/['"].*\r?\n/.test(t[1])){s.push(t[1].substring(0,t[1].indexOf("\n"))),n=t[1].substring(t[1].indexOf("\n"));let o=this.input.css.valueOf().substring(this.tokenizer.position());n+=o,r=t[3]+o.length-n.length}else this.tokenizer.back(t);break}s.push(t[1]),r=t[2],t=this.tokenizer.nextToken({ignoreUnclosed:!0})}let i=["comment",s.join(""),e[2],r];return this.inlineComment(i),n&&(this.input=new jc(n),this.tokenizer=Gc(this.input)),!0}if("/"===t[1]){let e=this.tokenizer.nextToken({ignoreUnclosed:!0});if("comment"===e[0]&&/^\/\*/.test(e[1]))return e[0]="word",e[1]=e[1].slice(1),t[1]="//",this.tokenizer.back(e),gs.exports.isInlineComment.bind(this)(t)}return!1}}}),fo=g((Gv,co)=>{co.exports={interpolation(t){let e=[t,this.tokenizer.nextToken()],s=["word","}"];if(e[0][1].length>1||"{"!==e[1][0])return this.tokenizer.back(e[1]),!1;for(t=this.tokenizer.nextToken();t&&s.includes(t[0]);)e.push(t),t=this.tokenizer.nextToken();let r=e.map(u=>u[1]),[n]=e,i=e.pop(),o=["word",r.join(""),n[2],i[2]];return this.tokenizer.back(t),this.tokenizer.back(o),!0}}}),ho=g((jv,po)=>{var Hc=/^#[0-9a-fA-F]{6}$|^#[0-9a-fA-F]{3}$/,Kc=/\.[0-9]/,Qc=t=>{let[,e]=t,[s]=e;return("."===s||"#"===s)&&!1===Hc.test(e)&&!1===Kc.test(e)};po.exports={isMixinToken:Qc}}),yo=g((Hv,mo)=>{var Jc=Jt(),Xc=/^url\((.+)\)/;mo.exports=t=>{let{name:e,params:s=""}=t;if("import"===e&&s.length){t.import=!0;let r=Jc({css:s});for(t.filename=s.replace(Xc,"$1");!r.endOfFile();){let[n,i]=r.nextToken();if("word"===n&&"url"===i)return;if("brackets"===n){t.options=i,t.filename=s.replace(i,"").trim();break}}}}}),xo=g((Kv,vo)=>{var go=/:$/,wo=/^:(\s+)?/;vo.exports=t=>{let{name:e,params:s=""}=t;if(":"===t.name.slice(-1)){if(go.test(e)){let[r]=e.match(go);t.name=e.replace(r,""),t.raws.afterName=r+(t.raws.afterName||""),t.variable=!0,t.value=t.params}if(wo.test(s)){let[r]=s.match(wo);t.value=s.replace(r,""),t.raws.afterName=(t.raws.afterName||"")+r,t.variable=!0}}}}),Eo=g((Jv,_o)=>{var Zc=Re(),ef=Xt(),{isInlineComment:tf}=lo(),{interpolation:bo}=fo(),{isMixinToken:rf}=ho(),sf=yo(),nf=xo(),of=/(!\s*important)$/i;_o.exports=class extends ef{constructor(...e){super(...e),this.lastNode=null}atrule(e){bo.bind(this)(e)||(super.atrule(e),sf(this.lastNode),nf(this.lastNode))}decl(...e){super.decl(...e),/extend\(.+\)/i.test(this.lastNode.value)&&(this.lastNode.extend=!0)}each(e){e[0][1]=` ${e[0][1]}`;let s=e.findIndex(u=>"("===u[0]),r=e.reverse().find(u=>")"===u[0]),n=e.reverse().indexOf(r),o=e.splice(s,n).map(u=>u[1]).join("");for(let u of e.reverse())this.tokenizer.back(u);this.atrule(this.tokenizer.nextToken()),this.lastNode.function=!0,this.lastNode.params=o}init(e,s,r){super.init(e,s,r),this.lastNode=e}inlineComment(e){let s=new Zc,r=e[1].slice(2);if(this.init(s,e[2]),s.source.end=this.getPosition(e[3]||e[2]),s.inline=!0,s.raws.begin="//",/^\s*$/.test(r))s.text="",s.raws.left=r,s.raws.right="";else{let n=r.match(/^(\s*)([^]*[^\s])(\s*)$/);[,s.raws.left,s.text,s.raws.right]=n}}mixin(e){let[s]=e,r=s[1].slice(0,1),n=e.findIndex(c=>"brackets"===c[0]),i=e.findIndex(c=>"("===c[0]),o="";if((n<0||n>3)&&i>0){let c=e.reduce((w,v,N)=>")"===v[0]?N:w),p=e.slice(i,c+i).map(w=>w[1]).join(""),[l]=e.slice(i),y=[l[2],l[3]],[x]=e.slice(c,c+1),h=[x[2],x[3]],d=["brackets",p].concat(y,h),m=e.slice(0,i),b=e.slice(c+1);(e=m).push(d),e=e.concat(b)}let u=[];for(let c of e)if(("!"===c[1]||u.length)&&u.push(c),"important"===c[1])break;if(u.length){let[c]=u,f=e.indexOf(c),p=u[u.length-1],l=[c[2],c[3]],y=[p[4],p[5]],h=["word",u.map(d=>d[1]).join("")].concat(l,y);e.splice(f,u.length,h)}let a=e.findIndex(c=>of.test(c[1]));a>0&&([,o]=e[a],e.splice(a,1));for(let c of e.reverse())this.tokenizer.back(c);this.atrule(this.tokenizer.nextToken()),this.lastNode.mixin=!0,this.lastNode.raws.identifier=r,o&&(this.lastNode.important=!0,this.lastNode.raws.important=o)}other(e){tf.bind(this)(e)||super.other(e)}rule(e){let s=e[e.length-1],r=e[e.length-2];if("at-word"===r[0]&&"{"===s[0]&&(this.tokenizer.back(s),bo.bind(this)(r))){let i=this.tokenizer.nextToken();e=e.slice(0,e.length-2).concat([i]);for(let o of e.reverse())this.tokenizer.back(o);return}super.rule(e),/:extend\(.+\)/i.test(this.lastNode.selector)&&(this.lastNode.extend=!0)}unknownWord(e){let[s]=e;"each"!==e[0][1]||"("!==e[1][0]?rf(s)?this.mixin(e):super.unknownWord(e):this.each(e)}}}),So=g((Zv,ko)=>{var af=Vt();ko.exports=class extends af{atrule(e,s){if(!e.mixin&&!e.variable&&!e.function)return void super.atrule(e,s);let n=`${e.function?"":e.raws.identifier||"@"}${e.name}`,i=e.params?this.rawValue(e,"params"):"",o=e.raws.important||"";if(e.variable&&(i=e.value),typeof e.raws.afterName<"u"?n+=e.raws.afterName:i&&(n+=" "),e.nodes)this.block(e,n+i+o);else{let u=(e.raws.between||"")+o+(s?";":"");this.builder(n+i+u,e)}}comment(e){if(e.inline){let s=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder(`//${s}${e.text}${r}`,e)}else super.comment(e)}}}),To=g((ex,ws)=>{var uf=qe(),lf=Eo(),cf=So();ws.exports={parse(t,e){let s=new uf(t,e),r=new lf(s);return r.parse(),r.root.walk(n=>{let i=s.css.lastIndexOf(n.source.input.css);if(0===i)return;if(i+n.source.input.css.length!==s.css.length)throw new Error("Invalid state detected in postcss-less");let o=i+n.source.start.offset,u=s.fromOffset(i+n.source.start.offset);if(n.source.start={offset:o,line:u.line,column:u.col},n.source.end){let a=i+n.source.end.offset,c=s.fromOffset(i+n.source.end.offset);n.source.end={offset:a,line:c.line,column:c.col}}}),r.root},stringify(t,e){new cf(e).stringify(t)},nodeToString(t){let e="";return ws.exports.stringify(t,s=>{e+=s}),e}}}),er=g((tx,Ao)=>{var Co,Oo,ff=le(),ye=class extends ff{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new Co(new Oo,this,e).stringify()}};ye.registerLazyResult=t=>{Co=t},ye.registerProcessor=t=>{Oo=t},Ao.exports=ye,ye.default=ye}),Po=g((rx,No)=>{var pf=jt(),hf=Re(),df=mt(),mf=qe(),yf=cs(),gf=De(),wf=Ht();function wt(t,e){if(Array.isArray(t))return t.map(n=>wt(n));let{inputs:s,...r}=t;if(s){e=[];for(let n of s){let i={...n,__proto__:mf.prototype};i.map&&(i.map={...i.map,__proto__:yf.prototype}),e.push(i)}}if(r.nodes&&(r.nodes=t.nodes.map(n=>wt(n,e))),r.source){let{inputId:n,...i}=r.source;r.source=i,null!=n&&(r.source.input=e[n])}if("root"===r.type)return new gf(r);if("decl"===r.type)return new df(r);if("rule"===r.type)return new wf(r);if("comment"===r.type)return new hf(r);if("atrule"===r.type)return new pf(r);throw new Error("Unknown node type: "+t.type)}No.exports=wt,wt.default=wt}),vs=g((sx,Ro)=>{Ro.exports=class{generate(){}}}),xs=g((ix,Io)=>{var vt=class{constructor(e,s={}){if(this.type="warning",this.text=e,s.node&&s.node.source){let r=s.node.rangeBy(s);this.line=r.start.line,this.column=r.start.column,this.endLine=r.end.line,this.endColumn=r.end.column}for(let r in s)this[r]=s[r]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};Io.exports=vt,vt.default=vt}),tr=g((ox,qo)=>{var vf=xs(),xt=class{get content(){return this.css}constructor(e,s,r){this.processor=e,this.messages=[],this.root=s,this.opts=r,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,s={}){s.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(s.plugin=this.lastPlugin.postcssPlugin);let r=new vf(e,s);return this.messages.push(r),r}warnings(){return this.messages.filter(e=>"warning"===e.type)}};qo.exports=xt,xt.default=xt}),bs=g((ax,Do)=>{var Lo={};Do.exports=function(e){Lo[e]||(Lo[e]=!0,typeof console<"u"&&console.warn&&console.warn(e))}}),ks=g((lx,Fo)=>{var xf=le(),bf=er(),_f=vs(),Ef=gt(),Bo=tr(),kf=De(),Sf=ut(),{isClean:K,my:Tf}=zt(),Cf=(bs(),{atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"}),Of={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},Af={Once:!0,postcssPlugin:!0,prepare:!0},Me=0;function bt(t){return"object"==typeof t&&"function"==typeof t.then}function Uo(t){let e=!1,s=Cf[t.type];return"decl"===t.type?e=t.prop.toLowerCase():"atrule"===t.type&&(e=t.name.toLowerCase()),e&&t.append?[s,s+"-"+e,Me,s+"Exit",s+"Exit-"+e]:e?[s,s+"-"+e,s+"Exit",s+"Exit-"+e]:t.append?[s,Me,s+"Exit"]:[s,s+"Exit"]}function Mo(t){let e;return e="document"===t.type?["Document",Me,"DocumentExit"]:"root"===t.type?["Root",Me,"RootExit"]:Uo(t),{eventIndex:0,events:e,iterator:0,node:t,visitorIndex:0,visitors:[]}}function _s(t){return t[K]=!1,t.nodes&&t.nodes.forEach(e=>_s(e)),t}var Es={},fe=class t{get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}constructor(e,s,r){let n;if(this.stringified=!1,this.processed=!1,"object"!=typeof s||null===s||"root"!==s.type&&"document"!==s.type)if(s instanceof t||s instanceof Bo)n=_s(s.root),s.map&&(typeof r.map>"u"&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=s.map);else{let i=Ef;r.syntax&&(i=r.syntax.parse),r.parser&&(i=r.parser),i.parse&&(i=i.parse);try{n=i(s,r)}catch(o){this.processed=!0,this.error=o}n&&!n[Tf]&&xf.rebuild(n)}else n=_s(s);this.result=new Bo(e,n,r),this.helpers={...Es,postcss:Es,result:this.result},this.plugins=this.processor.plugins.map(i=>"object"==typeof i&&i.prepare?{...i,...i.prepare(this.result)}:i)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,s){let r=this.result.lastPlugin;try{s&&s.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin?r.postcssVersion:(e.plugin=r.postcssPlugin,e.setMessage())}catch(n){console&&console.error&&console.error(n)}return e}prepareVisitors(){this.listeners={};let e=(s,r,n)=>{this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push([s,n])};for(let s of this.plugins)if("object"==typeof s)for(let r in s){if(!Of[r]&&/^[A-Z]/.test(r))throw new Error(`Unknown event ${r} in ${s.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!Af[r])if("object"==typeof s[r])for(let n in s[r])e(s,"*"===n?r:r+"-"+n.toLowerCase(),s[r][n]);else"function"==typeof s[r]&&e(s,r,s[r])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let s=this.plugins[e],r=this.runOnRoot(s);if(bt(r))try{await r}catch(n){throw this.handleError(n)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[K];){e[K]=!0;let s=[Mo(e)];for(;s.length>0;){let r=this.visitTick(s);if(bt(r))try{await r}catch(n){let i=s[s.length-1].node;throw this.handleError(n,i)}}}if(this.listeners.OnceExit)for(let[s,r]of this.listeners.OnceExit){this.result.lastPlugin=s;try{if("document"===e.type){let n=e.nodes.map(i=>r(i,this.helpers));await Promise.all(n)}else await r(e,this.helpers)}catch(n){throw this.handleError(n)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if("object"==typeof e&&e.Once){if("document"===this.result.root.type){let s=this.result.root.nodes.map(r=>e.Once(r,this.helpers));return bt(s[0])?Promise.all(s):s}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(s){throw this.handleError(s)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,s=Sf;e.syntax&&(s=e.syntax.stringify),e.stringifier&&(s=e.stringifier),s.stringify&&(s=s.stringify);let n=new _f(s,this.result.root,this.result.opts).generate();return this.result.css=n[0],this.result.map=n[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins)if(bt(this.runOnRoot(e)))throw this.getAsyncError();if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[K];)e[K]=!0,this.walkSync(e);if(this.listeners.OnceExit)if("document"===e.type)for(let s of e.nodes)this.visitSync(this.listeners.OnceExit,s);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,s){return this.async().then(e,s)}toString(){return this.css}visitSync(e,s){for(let[r,n]of e){let i;this.result.lastPlugin=r;try{i=n(s,this.helpers)}catch(o){throw this.handleError(o,s.proxyOf)}if("root"!==s.type&&"document"!==s.type&&!s.parent)return!0;if(bt(i))throw this.getAsyncError()}}visitTick(e){let s=e[e.length-1],{node:r,visitors:n}=s;if("root"!==r.type&&"document"!==r.type&&!r.parent)return void e.pop();if(n.length>0&&s.visitorIndex<n.length){let[o,u]=n[s.visitorIndex];s.visitorIndex+=1,s.visitorIndex===n.length&&(s.visitors=[],s.visitorIndex=0),this.result.lastPlugin=o;try{return u(r.toProxy(),this.helpers)}catch(a){throw this.handleError(a,r)}}if(0!==s.iterator){let u,o=s.iterator;for(;u=r.nodes[r.indexes[o]];)if(r.indexes[o]+=1,!u[K])return u[K]=!0,void e.push(Mo(u));s.iterator=0,delete r.indexes[o]}let i=s.events;for(;s.eventIndex<i.length;){let o=i[s.eventIndex];if(s.eventIndex+=1,o===Me)return void(r.nodes&&r.nodes.length&&(r[K]=!0,s.iterator=r.getIterator()));if(this.listeners[o])return void(s.visitors=this.listeners[o])}e.pop()}walkSync(e){e[K]=!0;let s=Uo(e);for(let r of s)if(r===Me)e.nodes&&e.each(n=>{n[K]||this.walkSync(n)});else{let n=this.listeners[r];if(n&&this.visitSync(n,e.toProxy()))return}}warnings(){return this.sync().warnings()}};fe.registerPostcss=t=>{Es=t},Fo.exports=fe,fe.default=fe,kf.registerLazyResult(fe),bf.registerLazyResult(fe)}),Wo=g((fx,$o)=>{var Nf=vs(),Pf=gt(),Rf=tr(),If=ut(),_t=(bs(),class{get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,s=Pf;try{e=s(this._css,this._opts)}catch(r){this.error=r}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}constructor(e,s,r){s=s.toString(),this.stringified=!1,this._processor=e,this._css=s,this._opts=r,this._map=void 0;let n,i=If;this.result=new Rf(this._processor,n,this._opts),this.result.css=s;let o=this;Object.defineProperty(this.result,"root",{get:()=>o.root});let u=new Nf(i,n,this._opts,s);if(u.isMap()){let[a,c]=u.generate();a&&(this.result.css=a),c&&(this.result.map=c)}else u.clearAnnotation(),this.result.css=u.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,s){return this.async().then(e,s)}toString(){return this._css}warnings(){return[]}});$o.exports=_t,_t.default=_t}),Vo=g((px,Yo)=>{var qf=er(),Lf=ks(),Df=Wo(),Bf=De(),ge=class{constructor(e=[]){this.version="8.5.3",this.plugins=this.normalize(e)}normalize(e){let s=[];for(let r of e)if(!0===r.postcss?r=r():r.postcss&&(r=r.postcss),"object"==typeof r&&Array.isArray(r.plugins))s=s.concat(r.plugins);else if("object"==typeof r&&r.postcssPlugin)s.push(r);else if("function"==typeof r)s.push(r);else if("object"!=typeof r||!r.parse&&!r.stringify)throw new Error(r+" is not a PostCSS plugin");return s}process(e,s={}){return this.plugins.length||s.parser||s.stringifier||s.syntax?new Lf(this,e,s):new Df(this,e,s)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};Yo.exports=ge,ge.default=ge,Bf.registerProcessor(ge),qf.registerProcessor(ge)}),rr=g((hx,Jo)=>{var zo=jt(),Go=Re(),Mf=le(),Uf=Yt(),jo=mt(),Ho=er(),Ff=Po(),$f=qe(),Wf=ks(),Yf=ms(),Vf=pt(),zf=gt(),Ss=Vo(),Gf=tr(),Ko=De(),Qo=Ht(),jf=ut(),Hf=xs();function k(...t){return 1===t.length&&Array.isArray(t[0])&&(t=t[0]),new Ss(t)}k.plugin=function(e,s){let i,r=!1;function n(...o){console&&console.warn&&!r&&(r=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"));let u=s(...o);return u.postcssPlugin=e,u.postcssVersion=(new Ss).version,u}return Object.defineProperty(n,"postcss",{get:()=>(i||(i=n()),i)}),n.process=function(o,u,a){return k([n(a)]).process(o,u)},n},k.stringify=jf,k.parse=zf,k.fromJSON=Ff,k.list=Yf,k.comment=t=>new Go(t),k.atRule=t=>new zo(t),k.decl=t=>new jo(t),k.rule=t=>new Qo(t),k.root=t=>new Ko(t),k.document=t=>new Ho(t),k.CssSyntaxError=Uf,k.Declaration=jo,k.Container=Mf,k.Processor=Ss,k.Document=Ho,k.Comment=Go,k.Warning=Hf,k.AtRule=zo,k.Result=Gf,k.Input=$f,k.Rule=Qo,k.Root=Ko,k.Node=Vf,Wf.registerPostcss(k),Jo.exports=k,k.default=k}),Zo=g((dx,Xo)=>{var{Container:Kf}=rr(),Ts=class extends Kf{constructor(e){super(e),this.type="decl",this.isNested=!0,this.nodes||(this.nodes=[])}};Xo.exports=Ts}),ra=g((mx,ta)=>{var sr=/[\t\n\f\r "#'()/;[\\\]{}]/g,nr=/[,\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,Qf=/.[\r\n"'(/\\]/,ea=/[\da-f]/i,ir=/[\n\f\r]/g;ta.exports=function(e,s={}){let i,o,u,a,c,f,p,l,y,b,r=e.css.valueOf(),n=s.ignoreErrors,x=r.length,h=0,d=[],m=[];function w(){return h}function v(T){throw e.error("Unclosed "+T,h)}function N(){return 0===m.length&&h>=x}function F(){let T=1,C=!1,O=!1;for(;T>0;)o+=1,r.length<=o&&v("interpolation"),i=r.charCodeAt(o),l=r.charCodeAt(o+1),C?O||i!==C?92===i?O=!O:O&&(O=!1):(C=!1,O=!1):39===i||34===i?C=i:125===i?T-=1:35===i&&123===l&&(T+=1)}function Q(T){if(m.length)return m.pop();if(h>=x)return;let C=!!T&&T.ignoreUnclosed;switch(i=r.charCodeAt(h),i){case 10:case 32:case 9:case 13:case 12:o=h;do{o+=1,i=r.charCodeAt(o)}while(32===i||10===i||9===i||13===i||12===i);y=["space",r.slice(h,o)],h=o-1;break;case 91:case 93:case 123:case 125:case 58:case 59:case 41:{let O=String.fromCharCode(i);y=[O,O,h];break}case 44:y=["word",",",h,h+1];break;case 40:if(p=d.length?d.pop()[1]:"",l=r.charCodeAt(h+1),"url"===p&&39!==l&&34!==l){for(b=1,f=!1,o=h+1;o<=r.length-1;){if(l=r.charCodeAt(o),92===l)f=!f;else if(40===l)b+=1;else if(41===l&&(b-=1,0===b))break;o+=1}a=r.slice(h,o+1),y=["brackets",a,h,o],h=o}else o=r.indexOf(")",h+1),a=r.slice(h,o+1),-1===o||Qf.test(a)?y=["(","(",h]:(y=["brackets",a,h,o],h=o);break;case 39:case 34:for(u=i,o=h,f=!1;o<x&&(o++,o===x&&v("string"),i=r.charCodeAt(o),l=r.charCodeAt(o+1),f||i!==u);)92===i?f=!f:f?f=!1:35===i&&123===l&&F();y=["string",r.slice(h,o+1),h,o],h=o;break;case 64:sr.lastIndex=h+1,sr.test(r),o=0===sr.lastIndex?r.length-1:sr.lastIndex-2,y=["at-word",r.slice(h,o+1),h,o],h=o;break;case 92:for(o=h,c=!0;92===r.charCodeAt(o+1);)o+=1,c=!c;if(i=r.charCodeAt(o+1),c&&47!==i&&32!==i&&10!==i&&9!==i&&13!==i&&12!==i&&(o+=1,ea.test(r.charAt(o)))){for(;ea.test(r.charAt(o+1));)o+=1;32===r.charCodeAt(o+1)&&(o+=1)}y=["word",r.slice(h,o+1),h,o],h=o;break;default:l=r.charCodeAt(h+1),35===i&&123===l?(o=h,F(),a=r.slice(h,o+1),y=["word",a,h,o],h=o):47===i&&42===l?(o=r.indexOf("*/",h+2)+1,0===o&&(n||C?o=r.length:v("comment")),y=["comment",r.slice(h,o+1),h,o],h=o):47===i&&47===l?(ir.lastIndex=h+1,ir.test(r),o=0===ir.lastIndex?r.length-1:ir.lastIndex-2,a=r.slice(h,o+1),y=["comment",a,h,o,"inline"],h=o):(nr.lastIndex=h+1,nr.test(r),o=0===nr.lastIndex?r.length-1:nr.lastIndex-2,y=["word",r.slice(h,o+1),h,o],d.push(y),h=o)}return h++,y}function W(T){m.push(T)}return{back:W,endOfFile:N,nextToken:Q,position:w}}}),na=g((yx,sa)=>{var{Comment:Jf}=rr(),Xf=Xt(),Zf=Zo(),ep=ra(),Cs=class extends Xf{atrule(e){let s=e[1],r=e;for(;!this.tokenizer.endOfFile();){let n=this.tokenizer.nextToken();if("word"!==n[0]||n[2]!==r[3]+1){this.tokenizer.back(n);break}s+=n[1],r=n}super.atrule(["at-word",s,e[2],r[3]])}comment(e){if("inline"===e[4]){let s=new Jf;this.init(s,e[2]),s.raws.inline=!0;let r=this.input.fromOffset(e[3]);s.source.end={column:r.col,line:r.line,offset:e[3]+1};let n=e[1].slice(2);if(/^\s*$/.test(n))s.text="",s.raws.left=n,s.raws.right="";else{let i=n.match(/^(\s*)([^]*\S)(\s*)$/),o=i[2].replace(/(\*\/|\/\*)/g,"*//*");s.text=o,s.raws.left=i[1],s.raws.right=i[3],s.raws.text=i[2]}}else super.comment(e)}createTokenizer(){this.tokenizer=ep(this.input)}raw(e,s,r,n){if(super.raw(e,s,r,n),e.raws[s]){let i=e.raws[s].raw;e.raws[s].raw=r.reduce((o,u)=>"comment"===u[0]&&"inline"===u[4]?o+"/*"+u[1].slice(2).replace(/(\*\/|\/\*)/g,"*//*")+"*/":o+u[1],""),i!==e.raws[s].raw&&(e.raws[s].scss=i)}}rule(e){let s=!1,r=0,n="";for(let i of e)if(s)"comment"!==i[0]&&"{"!==i[0]&&(n+=i[1]);else{if("space"===i[0]&&i[1].includes("\n"))break;"("===i[0]?r+=1:")"===i[0]?r-=1:0===r&&":"===i[0]&&(s=!0)}if(!s||""===n.trim()||/^[#:A-Za-z-]/.test(n))super.rule(e);else{e.pop();let o,u,i=new Zf;this.init(i,e[0][2]);for(let a=e.length-1;a>=0;a--)if("space"!==e[a][0]){o=e[a];break}if(o[3]){let a=this.input.fromOffset(o[3]);i.source.end={column:a.col,line:a.line,offset:o[3]+1}}else{let a=this.input.fromOffset(o[2]);i.source.end={column:a.col,line:a.line,offset:o[2]+1}}for(;"word"!==e[0][0];)i.raws.before+=e.shift()[1];if(e[0][2]){let a=this.input.fromOffset(e[0][2]);i.source.start={column:a.col,line:a.line,offset:e[0][2]}}for(i.prop="";e.length;){let a=e[0][0];if(":"===a||"space"===a||"comment"===a)break;i.prop+=e.shift()[1]}for(i.raws.between="";e.length;){if(u=e.shift(),":"===u[0]){i.raws.between+=u[1];break}i.raws.between+=u[1]}("_"===i.prop[0]||"*"===i.prop[0])&&(i.raws.before+=i.prop[0],i.prop=i.prop.slice(1)),i.raws.between+=this.spacesAndCommentsFromStart(e),this.precheckMissedSemicolon(e);for(let a=e.length-1;a>0;a--){if(u=e[a],"!important"===u[1]){i.important=!0;let c=this.stringFrom(e,a);c=this.spacesFromEnd(e)+c," !important"!==c&&(i.raws.important=c);break}if("important"===u[1]){let c=e.slice(0),f="";for(let p=a;p>0;p--){let l=c[p][0];if(0===f.trim().indexOf("!")&&"space"!==l)break;f=c.pop()[1]+f}0===f.trim().indexOf("!")&&(i.important=!0,i.raws.important=f,e=c)}if("space"!==u[0]&&"comment"!==u[0])break}this.raw(i,"value",e),i.value.includes(":")&&this.checkMissedSemicolon(e),this.current=i}}};sa.exports=Cs}),oa=g((gx,ia)=>{var{Input:tp}=rr(),rp=na();ia.exports=function(e,s){let r=new tp(e,s),n=new rp(r);return n.parse(),n.root}}),As=g(Os=>{function np(t){this.after=t.after,this.before=t.before,this.type=t.type,this.value=t.value,this.sourceIndex=t.sourceIndex}Object.defineProperty(Os,"__esModule",{value:!0}),Os.default=np}),Ps=g(Ns=>{Object.defineProperty(Ns,"__esModule",{value:!0});var ua=op(As());function op(t){return t&&t.__esModule?t:{default:t}}function Et(t){var e=this;this.constructor(t),this.nodes=t.nodes,void 0===this.after&&(this.after=this.nodes.length>0?this.nodes[this.nodes.length-1].after:""),void 0===this.before&&(this.before=this.nodes.length>0?this.nodes[0].before:""),void 0===this.sourceIndex&&(this.sourceIndex=this.before.length),this.nodes.forEach(function(s){s.parent=e})}Et.prototype=Object.create(ua.default.prototype),Et.constructor=ua.default,Et.prototype.walk=function(e,s){for(var r="string"==typeof e||e instanceof RegExp,n=r?s:e,i="string"==typeof e?new RegExp(e):e,o=0;o<this.nodes.length;o++){var u=this.nodes[o];if((!r||i.test(u.type))&&n&&!1===n(u,o,this.nodes)||u.nodes&&!1===u.walk(e,s))return!1}return!0},Et.prototype.each=function(){for(var e=arguments.length<=0||void 0===arguments[0]?function(){}:arguments[0],s=0;s<this.nodes.length;s++)if(!1===e(this.nodes[s],s,this.nodes))return!1;return!0},Ns.default=Et}),pa=g(kt=>{Object.defineProperty(kt,"__esModule",{value:!0}),kt.parseMediaFeature=fa,kt.parseMediaQuery=Is,kt.parseMediaList=lp;var la=ca(As()),Rs=ca(Ps());function ca(t){return t&&t.__esModule?t:{default:t}}function fa(t){var s=[{mode:"normal",character:null}],r=[],n=0,i="",o=null,u=null,a=arguments.length<=1||void 0===arguments[1]?0:arguments[1],c=t;"("===t[0]&&")"===t[t.length-1]&&(c=t.substring(1,t.length-1),a++);for(var f=0;f<c.length;f++){var p=c[f];if(("'"===p||'"'===p)&&(!0===s[n].isCalculationEnabled?(s.push({mode:"string",isCalculationEnabled:!1,character:p}),n++):"string"===s[n].mode&&s[n].character===p&&"\\"!==c[f-1]&&(s.pop(),n--)),"{"===p?(s.push({mode:"interpolation",isCalculationEnabled:!0}),n++):"}"===p&&(s.pop(),n--),"normal"===s[n].mode&&":"===p){var l=c.substring(f+1);(u={type:"value",before:/^(\s*)/.exec(l)[1],after:/(\s*)$/.exec(l)[1],value:l.trim()}).sourceIndex=u.before.length+f+1+a,o={type:"colon",sourceIndex:f+a,after:u.before,value:":"};break}i+=p}return(i={type:"media-feature",before:/^(\s*)/.exec(i)[1],after:/(\s*)$/.exec(i)[1],value:i.trim()}).sourceIndex=i.before.length+a,r.push(i),null!==o&&(o.before=i.after,r.push(o)),null!==u&&r.push(u),r}function Is(t){var e=arguments.length<=1||void 0===arguments[1]?0:arguments[1],s=[],r=0,n=!1,i=void 0;function o(){return{before:"",after:"",value:""}}i=o();for(var u=0;u<t.length;u++){var a=t[u];n?(i.value+=a,("{"===a||"("===a)&&r++,(")"===a||"}"===a)&&r--):-1!==a.search(/\s/)?i.before+=a:("("===a&&(i.type="media-feature-expression",r++),i.value=a,i.sourceIndex=e+u,n=!0),n&&0===r&&(")"===a||u===t.length-1||-1!==t[u+1].search(/\s/))&&(-1!==["not","only","and"].indexOf(i.value)&&(i.type="keyword"),"media-feature-expression"===i.type&&(i.nodes=fa(i.value,i.sourceIndex)),s.push(Array.isArray(i.nodes)?new Rs.default(i):new la.default(i)),i=o(),n=!1)}for(var c=0;c<s.length;c++)if(i=s[c],c>0&&(s[c-1].after=i.before),void 0===i.type){if(c>0){if("media-feature-expression"===s[c-1].type){i.type="keyword";continue}if("not"===s[c-1].value||"only"===s[c-1].value){i.type="media-type";continue}if("and"===s[c-1].value){i.type="media-feature-expression";continue}"media-type"===s[c-1].type&&(s[c+1]?i.type="media-feature-expression"===s[c+1].type?"keyword":"media-feature-expression":i.type="media-feature-expression")}if(0===c){if(!s[c+1]){i.type="media-type";continue}if(s[c+1]&&("media-feature-expression"===s[c+1].type||"keyword"===s[c+1].type)){i.type="media-type";continue}if(s[c+2]){if("media-feature-expression"===s[c+2].type){i.type="media-type",s[c+1].type="keyword";continue}if("keyword"===s[c+2].type){i.type="keyword",s[c+1].type="media-type";continue}}if(s[c+3]&&"media-feature-expression"===s[c+3].type){i.type="keyword",s[c+1].type="media-type",s[c+2].type="keyword";continue}}}return s}function lp(t){var e=[],s=0,r=0,n=/^(\s*)url\s*\(/.exec(t);if(null!==n){for(var i=n[0].length,o=1;o>0;){var u=t[i];"("===u&&o++,")"===u&&o--,i++}e.unshift(new la.default({type:"url",value:t.substring(0,i).trim(),sourceIndex:n[1].length,before:n[1],after:/^(\s*)/.exec(t.substring(i))[1]})),s=i}for(var a=s;a<t.length;a++){var c=t[a];if("("===c&&r++,")"===c&&r--,0===r&&","===c){var f=t.substring(s,a),p=/^(\s*)/.exec(f)[1];e.push(new Rs.default({type:"media-query",value:f.trim(),sourceIndex:s+p.length,nodes:Is(f,s),before:p,after:/(\s*)$/.exec(f)[1]})),s=a+1}}var l=t.substring(s),y=/^(\s*)/.exec(l)[1];return e.push(new Rs.default({type:"media-query",value:l.trim(),sourceIndex:s+y.length,nodes:Is(l,s),before:y,after:/(\s*)$/.exec(l)[1]})),e}}),ha=g(qs=>{Object.defineProperty(qs,"__esModule",{value:!0}),qs.default=dp;var fp=hp(Ps()),pp=pa();function hp(t){return t&&t.__esModule?t:{default:t}}function dp(t){return new fp.default({nodes:(0,pp.parseMediaList)(t),type:"media-query-list",value:t.trim()})}}),Ds=g((Tx,ya)=>{ya.exports=function(e,s){return(s="number"==typeof s?s:1/0)?r(e,1):Array.isArray(e)?e.map(function(n){return n}):e;function r(n,i){return n.reduce(function(o,u){return Array.isArray(u)&&i<s?o.concat(r(u,i+1)):o.concat(u)},[])}}}),Bs=g((Cx,ga)=>{ga.exports=function(t,e){for(var s=-1,r=[];-1!==(s=t.indexOf(e,s+1));)r.push(s);return r}}),Ms=g((Ox,wa)=>{function gp(t,e){for(var s=1,r=t.length,n=t[0],i=t[0],o=1;o<r;++o)if(i=n,e(n=t[o],i)){if(o===s){s++;continue}t[s++]=n}return t.length=s,t}function wp(t){for(var e=1,s=t.length,r=t[0],n=t[0],i=1;i<s;++i,n=r)if(n=r,(r=t[i])!==n){if(i===e){e++;continue}t[e++]=r}return t.length=e,t}function vp(t,e,s){return 0===t.length?t:e?(s||t.sort(e),gp(t,e)):(s||t.sort(),wp(t))}wa.exports=vp}),we=g((or,xa)=>{or.__esModule=!0;var va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function xp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var bp=function t(e,s){if("object"!==(typeof e>"u"?"undefined":va(e)))return e;var r=new e.constructor;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n],o=typeof i>"u"?"undefined":va(i);"parent"===n&&"object"===o?s&&(r[n]=s):r[n]=i instanceof Array?i.map(function(u){return t(u,r)}):t(i,r)}return r},_p=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var s in xp(this,t),e)this[s]=e[s];var r=e.spaces,n=(r=void 0===r?{}:r).before,i=void 0===n?"":n,o=r.after,u=void 0===o?"":o;this.spaces={before:i,after:u}}return t.prototype.remove=function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this},t.prototype.replaceWith=function(){if(this.parent){for(var s in arguments)this.parent.insertBefore(this,arguments[s]);this.remove()}return this},t.prototype.next=function(){return this.parent.at(this.parent.index(this)+1)},t.prototype.prev=function(){return this.parent.at(this.parent.index(this)-1)},t.prototype.clone=function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=bp(this);for(var n in s)r[n]=s[n];return r},t.prototype.toString=function(){return[this.spaces.before,String(this.value),this.spaces.after].join("")},t}();or.default=_p,xa.exports=or.default}),B=g(M=>{M.__esModule=!0,M.TAG="tag",M.STRING="string",M.SELECTOR="selector",M.ROOT="root",M.PSEUDO="pseudo",M.NESTING="nesting",M.ID="id",M.COMMENT="comment",M.COMBINATOR="combinator",M.CLASS="class",M.ATTRIBUTE="attribute",M.UNIVERSAL="universal"}),ur=g((ar,ba)=>{ar.__esModule=!0;var Ep=function(){function t(e,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,s,r){return s&&t(e.prototype,s),r&&t(e,r),e}}(),Sp=Op(we()),Z=Cp(B());function Cp(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}function Op(t){return t&&t.__esModule?t:{default:t}}function Ap(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Np(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Pp(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Rp=function(t){function e(s){Ap(this,e);var r=Np(this,t.call(this,s));return r.nodes||(r.nodes=[]),r}return Pp(e,t),e.prototype.append=function(r){return r.parent=this,this.nodes.push(r),this},e.prototype.prepend=function(r){return r.parent=this,this.nodes.unshift(r),this},e.prototype.at=function(r){return this.nodes[r]},e.prototype.index=function(r){return"number"==typeof r?r:this.nodes.indexOf(r)},e.prototype.removeChild=function(r){r=this.index(r),this.at(r).parent=void 0,this.nodes.splice(r,1);var n=void 0;for(var i in this.indexes)(n=this.indexes[i])>=r&&(this.indexes[i]=n-1);return this},e.prototype.removeAll=function(){var i=this.nodes,r=Array.isArray(i),n=0;for(i=r?i:i[Symbol.iterator]();;){var o;if(r){if(n>=i.length)break;o=i[n++]}else{if((n=i.next()).done)break;o=n.value}o.parent=void 0}return this.nodes=[],this},e.prototype.empty=function(){return this.removeAll()},e.prototype.insertAfter=function(r,n){var i=this.index(r);this.nodes.splice(i+1,0,n);var o=void 0;for(var u in this.indexes)i<=(o=this.indexes[u])&&(this.indexes[u]=o+this.nodes.length);return this},e.prototype.insertBefore=function(r,n){var i=this.index(r);this.nodes.splice(i,0,n);var o=void 0;for(var u in this.indexes)i<=(o=this.indexes[u])&&(this.indexes[u]=o+this.nodes.length);return this},e.prototype.each=function(r){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach++;var n=this.lastEach;if(this.indexes[n]=0,this.length){for(var i=void 0,o=void 0;this.indexes[n]<this.length&&(i=this.indexes[n],!1!==(o=r(this.at(i),i)));)this.indexes[n]+=1;if(delete this.indexes[n],!1===o)return!1}},e.prototype.walk=function(r){return this.each(function(n,i){var o=r(n,i);if(!1!==o&&n.length&&(o=n.walk(r)),!1===o)return!1})},e.prototype.walkAttributes=function(r){var n=this;return this.walk(function(i){if(i.type===Z.ATTRIBUTE)return r.call(n,i)})},e.prototype.walkClasses=function(r){var n=this;return this.walk(function(i){if(i.type===Z.CLASS)return r.call(n,i)})},e.prototype.walkCombinators=function(r){var n=this;return this.walk(function(i){if(i.type===Z.COMBINATOR)return r.call(n,i)})},e.prototype.walkComments=function(r){var n=this;return this.walk(function(i){if(i.type===Z.COMMENT)return r.call(n,i)})},e.prototype.walkIds=function(r){var n=this;return this.walk(function(i){if(i.type===Z.ID)return r.call(n,i)})},e.prototype.walkNesting=function(r){var n=this;return this.walk(function(i){if(i.type===Z.NESTING)return r.call(n,i)})},e.prototype.walkPseudos=function(r){var n=this;return this.walk(function(i){if(i.type===Z.PSEUDO)return r.call(n,i)})},e.prototype.walkTags=function(r){var n=this;return this.walk(function(i){if(i.type===Z.TAG)return r.call(n,i)})},e.prototype.walkUniversals=function(r){var n=this;return this.walk(function(i){if(i.type===Z.UNIVERSAL)return r.call(n,i)})},e.prototype.split=function(r){var n=this,i=[];return this.reduce(function(o,u,a){var c=r.call(n,u);return i.push(u),c?(o.push(i),i=[]):a===n.length-1&&o.push(i),o},[])},e.prototype.map=function(r){return this.nodes.map(r)},e.prototype.reduce=function(r,n){return this.nodes.reduce(r,n)},e.prototype.every=function(r){return this.nodes.every(r)},e.prototype.some=function(r){return this.nodes.some(r)},e.prototype.filter=function(r){return this.nodes.filter(r)},e.prototype.sort=function(r){return this.nodes.sort(r)},e.prototype.toString=function(){return this.map(String).join("")},Ep(e,[{key:"first",get:function(){return this.at(0)}},{key:"last",get:function(){return this.at(this.length-1)}},{key:"length",get:function(){return this.nodes.length}}]),e}(Sp.default);ar.default=Rp,ba.exports=ar.default}),Ea=g((lr,_a)=>{lr.__esModule=!0;var qp=Dp(ur()),Lp=B();function Dp(t){return t&&t.__esModule?t:{default:t}}function Bp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mp(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Up(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Fp=function(t){function e(s){Bp(this,e);var r=Mp(this,t.call(this,s));return r.type=Lp.ROOT,r}return Up(e,t),e.prototype.toString=function(){var r=this.reduce(function(n,i){var o=String(i);return o?n+o+",":""},"").slice(0,-1);return this.trailingComma?r+",":r},e}(qp.default);lr.default=Fp,_a.exports=lr.default}),Sa=g((cr,ka)=>{cr.__esModule=!0;var Wp=Vp(ur()),Yp=B();function Vp(t){return t&&t.__esModule?t:{default:t}}function zp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gp(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function jp(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Hp=function(t){function e(s){zp(this,e);var r=Gp(this,t.call(this,s));return r.type=Yp.SELECTOR,r}return jp(e,t),e}(Wp.default);cr.default=Hp,ka.exports=cr.default}),Ue=g((fr,Ta)=>{fr.__esModule=!0;var Kp=function(){function t(e,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,s,r){return s&&t(e.prototype,s),r&&t(e,r),e}}();function Xp(t){return t&&t.__esModule?t:{default:t}}function Zp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eh(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function th(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var rh=function(t){function e(){return Zp(this,e),eh(this,t.apply(this,arguments))}return th(e,t),e.prototype.toString=function(){return[this.spaces.before,this.ns,String(this.value),this.spaces.after].join("")},Kp(e,[{key:"ns",get:function(){var r=this.namespace;return r?("string"==typeof r?r:"")+"|":""}}]),e}(Xp(we()).default);fr.default=rh,Ta.exports=fr.default}),Oa=g((pr,Ca)=>{pr.__esModule=!0;var nh=oh(Ue()),ih=B();function oh(t){return t&&t.__esModule?t:{default:t}}function ah(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uh(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function lh(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ch=function(t){function e(s){ah(this,e);var r=uh(this,t.call(this,s));return r.type=ih.CLASS,r}return lh(e,t),e.prototype.toString=function(){return[this.spaces.before,this.ns,"."+this.value,this.spaces.after].join("")},e}(nh.default);pr.default=ch,Ca.exports=pr.default}),Na=g((hr,Aa)=>{hr.__esModule=!0;var ph=dh(we()),hh=B();function dh(t){return t&&t.__esModule?t:{default:t}}function mh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yh(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function gh(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var wh=function(t){function e(s){mh(this,e);var r=yh(this,t.call(this,s));return r.type=hh.COMMENT,r}return gh(e,t),e}(ph.default);hr.default=wh,Aa.exports=hr.default}),Ra=g((dr,Pa)=>{dr.__esModule=!0;var xh=_h(Ue()),bh=B();function _h(t){return t&&t.__esModule?t:{default:t}}function Eh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kh(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Sh(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Th=function(t){function e(s){Eh(this,e);var r=kh(this,t.call(this,s));return r.type=bh.ID,r}return Sh(e,t),e.prototype.toString=function(){return[this.spaces.before,this.ns,"#"+this.value,this.spaces.after].join("")},e}(xh.default);dr.default=Th,Pa.exports=dr.default}),qa=g((mr,Ia)=>{mr.__esModule=!0;var Oh=Nh(Ue()),Ah=B();function Nh(t){return t&&t.__esModule?t:{default:t}}function Ph(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rh(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Ih(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var qh=function(t){function e(s){Ph(this,e);var r=Rh(this,t.call(this,s));return r.type=Ah.TAG,r}return Ih(e,t),e}(Oh.default);mr.default=qh,Ia.exports=mr.default}),Da=g((yr,La)=>{yr.__esModule=!0;var Dh=Mh(we()),Bh=B();function Mh(t){return t&&t.__esModule?t:{default:t}}function Uh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fh(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function $h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Wh=function(t){function e(s){Uh(this,e);var r=Fh(this,t.call(this,s));return r.type=Bh.STRING,r}return $h(e,t),e}(Dh.default);yr.default=Wh,La.exports=yr.default}),Ma=g((gr,Ba)=>{gr.__esModule=!0;var Vh=Gh(ur()),zh=B();function Gh(t){return t&&t.__esModule?t:{default:t}}function jh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hh(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Kh(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Qh=function(t){function e(s){jh(this,e);var r=Hh(this,t.call(this,s));return r.type=zh.PSEUDO,r}return Kh(e,t),e.prototype.toString=function(){var r=this.length?"("+this.map(String).join(",")+")":"";return[this.spaces.before,String(this.value),r,this.spaces.after].join("")},e}(Vh.default);gr.default=Qh,Ba.exports=gr.default}),Fa=g((wr,Ua)=>{wr.__esModule=!0;var Xh=ed(Ue()),Zh=B();function ed(t){return t&&t.__esModule?t:{default:t}}function td(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rd(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function sd(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var nd=function(t){function e(s){td(this,e);var r=rd(this,t.call(this,s));return r.type=Zh.ATTRIBUTE,r.raws={},r}return sd(e,t),e.prototype.toString=function(){var r=[this.spaces.before,"[",this.ns,this.attribute];return this.operator&&r.push(this.operator),this.value&&r.push(this.value),this.raws.insensitive?r.push(this.raws.insensitive):this.insensitive&&r.push(" i"),r.push("]"),r.concat(this.spaces.after).join("")},e}(Xh.default);wr.default=nd,Ua.exports=wr.default}),Wa=g((vr,$a)=>{vr.__esModule=!0;var od=ud(Ue()),ad=B();function ud(t){return t&&t.__esModule?t:{default:t}}function ld(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cd(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function fd(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var pd=function(t){function e(s){ld(this,e);var r=cd(this,t.call(this,s));return r.type=ad.UNIVERSAL,r.value="*",r}return fd(e,t),e}(od.default);vr.default=pd,$a.exports=vr.default}),Va=g((xr,Ya)=>{xr.__esModule=!0;var dd=yd(we()),md=B();function yd(t){return t&&t.__esModule?t:{default:t}}function gd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wd(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function vd(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var xd=function(t){function e(s){gd(this,e);var r=wd(this,t.call(this,s));return r.type=md.COMBINATOR,r}return vd(e,t),e}(dd.default);xr.default=xd,Ya.exports=xr.default}),Ga=g((br,za)=>{br.__esModule=!0;var _d=kd(we()),Ed=B();function kd(t){return t&&t.__esModule?t:{default:t}}function Sd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Td(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Cd(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Od=function(t){function e(s){Sd(this,e);var r=Td(this,t.call(this,s));return r.type=Ed.NESTING,r.value="&",r}return Cd(e,t),e}(_d.default);br.default=Od,za.exports=br.default}),Ha=g((_r,ja)=>{function Ad(t){return t.sort(function(e,s){return e-s})}_r.__esModule=!0,_r.default=Ad,ja.exports=_r.default}),su=g((Sr,ru)=>{Sr.__esModule=!0,Sr.default=Fd;var Ka=39,Nd=34,Us=92,Qa=47,St=10,Fs=32,$s=12,Ws=9,Ys=13,Ja=43,Xa=62,Za=126,eu=124,Pd=44,Rd=40,Id=41,qd=91,Ld=93,Dd=59,tu=42,Bd=58,Md=38,Ud=64,Er=/[ \n\t\r\{\(\)'"\\;/]/g,kr=/[ \n\t\r\(\)\*:;@!&'"\+\|~>,\[\]\\]|\/(?=\*)/g;function Fd(t){for(var e=[],s=t.css.valueOf(),r=void 0,n=void 0,i=void 0,o=void 0,u=void 0,a=void 0,c=void 0,f=void 0,p=void 0,l=void 0,y=void 0,x=s.length,h=-1,d=1,m=0,b=function(v,N){if(!t.safe)throw t.error("Unclosed "+v,d,m-h,m);n=(s+=N).length-1};m<x;){switch((r=s.charCodeAt(m))===St&&(h=m,d+=1),r){case St:case Fs:case Ws:case Ys:case $s:n=m;do{n+=1,(r=s.charCodeAt(n))===St&&(h=n,d+=1)}while(r===Fs||r===St||r===Ws||r===Ys||r===$s);e.push(["space",s.slice(m,n),d,m-h,m]),m=n-1;break;case Ja:case Xa:case Za:case eu:n=m;do{n+=1,r=s.charCodeAt(n)}while(r===Ja||r===Xa||r===Za||r===eu);e.push(["combinator",s.slice(m,n),d,m-h,m]),m=n-1;break;case tu:e.push(["*","*",d,m-h,m]);break;case Md:e.push(["&","&",d,m-h,m]);break;case Pd:e.push([",",",",d,m-h,m]);break;case qd:e.push(["[","[",d,m-h,m]);break;case Ld:e.push(["]","]",d,m-h,m]);break;case Bd:e.push([":",":",d,m-h,m]);break;case Dd:e.push([";",";",d,m-h,m]);break;case Rd:e.push(["(","(",d,m-h,m]);break;case Id:e.push([")",")",d,m-h,m]);break;case Ka:case Nd:i=r===Ka?"'":'"',n=m;do{for(l=!1,-1===(n=s.indexOf(i,n+1))&&b("quote",i),y=n;s.charCodeAt(y-1)===Us;)y-=1,l=!l}while(l);e.push(["string",s.slice(m,n+1),d,m-h,d,n-h,m]),m=n;break;case Ud:Er.lastIndex=m+1,Er.test(s),n=0===Er.lastIndex?s.length-1:Er.lastIndex-2,e.push(["at-word",s.slice(m,n+1),d,m-h,d,n-h,m]),m=n;break;case Us:for(n=m,c=!0;s.charCodeAt(n+1)===Us;)n+=1,c=!c;r=s.charCodeAt(n+1),c&&r!==Qa&&r!==Fs&&r!==St&&r!==Ws&&r!==Ys&&r!==$s&&(n+=1),e.push(["word",s.slice(m,n+1),d,m-h,d,n-h,m]),m=n;break;default:r===Qa&&s.charCodeAt(m+1)===tu?(0===(n=s.indexOf("*/",m+2)+1)&&b("comment","*/"),(u=(o=(a=s.slice(m,n+1)).split("\n")).length-1)>0?(f=d+u,p=n-o[u].length):(f=d,p=h),e.push(["comment",a,d,m-h,f,n-p,m]),h=p,d=f,m=n):(kr.lastIndex=m+1,kr.test(s),n=0===kr.lastIndex?s.length-1:kr.lastIndex-2,e.push(["word",s.slice(m,n+1),d,m-h,d,n-h,m]),m=n)}m++}return e}ru.exports=Sr.default}),ou=g((Tr,iu)=>{Tr.__esModule=!0;var $d=function(){function t(e,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,s,r){return s&&t(e.prototype,s),r&&t(e,r),e}}(),Yd=I(Ds()),Vs=I(Bs()),Gd=I(Ms()),Hd=I(Ea()),zs=I(Sa()),Jd=I(Oa()),Zd=I(Na()),tm=I(Ra()),sm=I(qa()),im=I(Da()),am=I(Ma()),lm=I(Fa()),fm=I(Wa()),hm=I(Va()),mm=I(Ga()),gm=I(Ha()),nu=I(su()),xm=bm(B());function bm(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}function I(t){return t&&t.__esModule?t:{default:t}}function _m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Em=function(){function t(e){_m(this,t),this.input=e,this.lossy=!1===e.options.lossless,this.position=0,this.root=new Hd.default;var s=new zs.default;return this.root.append(s),this.current=s,this.lossy?this.tokens=(0,nu.default)({safe:e.safe,css:e.css.trim()}):this.tokens=(0,nu.default)(e),this.loop()}return t.prototype.attribute=function(){var s="",r=void 0,n=this.currToken;for(this.position++;this.position<this.tokens.length&&"]"!==this.currToken[0];)s+=this.tokens[this.position][1],this.position++;this.position===this.tokens.length&&!~s.indexOf("]")&&this.error("Expected a closing square bracket.");var i=s.split(/((?:[*~^$|]?=))([^]*)/),o=i[0].split(/(\|)/g),u={operator:i[1],value:i[2],source:{start:{line:n[2],column:n[3]},end:{line:this.currToken[2],column:this.currToken[3]}},sourceIndex:n[4]};if(o.length>1?(""===o[0]&&(o[0]=!0),u.attribute=this.parseValue(o[2]),u.namespace=this.parseNamespace(o[0])):u.attribute=this.parseValue(i[0]),r=new lm.default(u),i[2]){var a=i[2].split(/(\s+i\s*?)$/),c=a[0].trim();r.value=this.lossy?c:a[0],a[1]&&(r.insensitive=!0,this.lossy||(r.raws.insensitive=a[1])),r.quoted="'"===c[0]||'"'===c[0],r.raws.unquoted=r.quoted?c.slice(1,-1):c}this.newNode(r),this.position++},t.prototype.combinator=function(){if("|"===this.currToken[1])return this.namespace();for(var s=new hm.default({value:"",source:{start:{line:this.currToken[2],column:this.currToken[3]},end:{line:this.currToken[2],column:this.currToken[3]}},sourceIndex:this.currToken[4]});this.position<this.tokens.length&&this.currToken&&("space"===this.currToken[0]||"combinator"===this.currToken[0]);)this.nextToken&&"combinator"===this.nextToken[0]?(s.spaces.before=this.parseSpace(this.currToken[1]),s.source.start.line=this.nextToken[2],s.source.start.column=this.nextToken[3],s.source.end.column=this.nextToken[3],s.source.end.line=this.nextToken[2],s.sourceIndex=this.nextToken[4]):this.prevToken&&"combinator"===this.prevToken[0]?s.spaces.after=this.parseSpace(this.currToken[1]):"combinator"===this.currToken[0]?s.value=this.currToken[1]:"space"===this.currToken[0]&&(s.value=this.parseSpace(this.currToken[1]," ")),this.position++;return this.newNode(s)},t.prototype.comma=function(){if(this.position===this.tokens.length-1)return this.root.trailingComma=!0,void this.position++;var s=new zs.default;this.current.parent.append(s),this.current=s,this.position++},t.prototype.comment=function(){var s=new Zd.default({value:this.currToken[1],source:{start:{line:this.currToken[2],column:this.currToken[3]},end:{line:this.currToken[4],column:this.currToken[5]}},sourceIndex:this.currToken[6]});this.newNode(s),this.position++},t.prototype.error=function(s){throw new this.input.error(s)},t.prototype.missingBackslash=function(){return this.error("Expected a backslash preceding the semicolon.")},t.prototype.missingParenthesis=function(){return this.error("Expected opening parenthesis.")},t.prototype.missingSquareBracket=function(){return this.error("Expected opening square bracket.")},t.prototype.namespace=function(){var s=this.prevToken&&this.prevToken[1]||!0;return"word"===this.nextToken[0]?(this.position++,this.word(s)):"*"===this.nextToken[0]?(this.position++,this.universal(s)):void 0},t.prototype.nesting=function(){this.newNode(new mm.default({value:this.currToken[1],source:{start:{line:this.currToken[2],column:this.currToken[3]},end:{line:this.currToken[2],column:this.currToken[3]}},sourceIndex:this.currToken[4]})),this.position++},t.prototype.parentheses=function(){var s=this.current.last;if(s&&s.type===xm.PSEUDO){var r=new zs.default,n=this.current;s.append(r),this.current=r;var i=1;for(this.position++;this.position<this.tokens.length&&i;)"("===this.currToken[0]&&i++,")"===this.currToken[0]&&i--,i?this.parse():(r.parent.source.end.line=this.currToken[2],r.parent.source.end.column=this.currToken[3],this.position++);i&&this.error("Expected closing parenthesis."),this.current=n}else{var o=1;for(this.position++,s.value+="(";this.position<this.tokens.length&&o;)"("===this.currToken[0]&&o++,")"===this.currToken[0]&&o--,s.value+=this.parseParenthesisToken(this.currToken),this.position++;o&&this.error("Expected closing parenthesis.")}},t.prototype.pseudo=function(){for(var s=this,r="",n=this.currToken;this.currToken&&":"===this.currToken[0];)r+=this.currToken[1],this.position++;if(!this.currToken)return this.error("Expected pseudo-class or pseudo-element");if("word"===this.currToken[0]){var i=void 0;this.splitWord(!1,function(o,u){r+=o,i=new am.default({value:r,source:{start:{line:n[2],column:n[3]},end:{line:s.currToken[4],column:s.currToken[5]}},sourceIndex:n[4]}),s.newNode(i),u>1&&s.nextToken&&"("===s.nextToken[0]&&s.error("Misplaced parenthesis.")})}else this.error('Unexpected "'+this.currToken[0]+'" found.')},t.prototype.space=function(){var s=this.currToken;0===this.position||","===this.prevToken[0]||"("===this.prevToken[0]?(this.spaces=this.parseSpace(s[1]),this.position++):this.position===this.tokens.length-1||","===this.nextToken[0]||")"===this.nextToken[0]?(this.current.last.spaces.after=this.parseSpace(s[1]),this.position++):this.combinator()},t.prototype.string=function(){var s=this.currToken;this.newNode(new im.default({value:this.currToken[1],source:{start:{line:s[2],column:s[3]},end:{line:s[4],column:s[5]}},sourceIndex:s[6]})),this.position++},t.prototype.universal=function(s){var r=this.nextToken;if(r&&"|"===r[1])return this.position++,this.namespace();this.newNode(new fm.default({value:this.currToken[1],source:{start:{line:this.currToken[2],column:this.currToken[3]},end:{line:this.currToken[2],column:this.currToken[3]}},sourceIndex:this.currToken[4]}),s),this.position++},t.prototype.splitWord=function(s,r){for(var n=this,i=this.nextToken,o=this.currToken[1];i&&"word"===i[0];){this.position++;var u=this.currToken[1];if(o+=u,u.lastIndexOf("\\")===u.length-1){var a=this.nextToken;a&&"space"===a[0]&&(o+=this.parseSpace(a[1]," "),this.position++)}i=this.nextToken}var c=(0,Vs.default)(o,"."),f=(0,Vs.default)(o,"#"),p=(0,Vs.default)(o,"#{");p.length&&(f=f.filter(function(y){return!~p.indexOf(y)}));var l=(0,gm.default)((0,Gd.default)((0,Yd.default)([[0],c,f])));l.forEach(function(y,x){var h=l[x+1]||o.length,d=o.slice(y,h);if(0===x&&r)return r.call(n,d,l.length);var m=void 0;m=~c.indexOf(y)?new Jd.default({value:d.slice(1),source:{start:{line:n.currToken[2],column:n.currToken[3]+y},end:{line:n.currToken[4],column:n.currToken[3]+(h-1)}},sourceIndex:n.currToken[6]+l[x]}):~f.indexOf(y)?new tm.default({value:d.slice(1),source:{start:{line:n.currToken[2],column:n.currToken[3]+y},end:{line:n.currToken[4],column:n.currToken[3]+(h-1)}},sourceIndex:n.currToken[6]+l[x]}):new sm.default({value:d,source:{start:{line:n.currToken[2],column:n.currToken[3]+y},end:{line:n.currToken[4],column:n.currToken[3]+(h-1)}},sourceIndex:n.currToken[6]+l[x]}),n.newNode(m,s)}),this.position++},t.prototype.word=function(s){var r=this.nextToken;return r&&"|"===r[1]?(this.position++,this.namespace()):this.splitWord(s)},t.prototype.loop=function(){for(;this.position<this.tokens.length;)this.parse(!0);return this.root},t.prototype.parse=function(s){switch(this.currToken[0]){case"space":this.space();break;case"comment":this.comment();break;case"(":this.parentheses();break;case")":s&&this.missingParenthesis();break;case"[":this.attribute();break;case"]":this.missingSquareBracket();break;case"at-word":case"word":this.word();break;case":":this.pseudo();break;case";":this.missingBackslash();break;case",":this.comma();break;case"*":this.universal();break;case"&":this.nesting();break;case"combinator":this.combinator();break;case"string":this.string()}},t.prototype.parseNamespace=function(s){if(this.lossy&&"string"==typeof s){var r=s.trim();return!r.length||r}return s},t.prototype.parseSpace=function(s,r){return this.lossy?r||"":s},t.prototype.parseValue=function(s){return this.lossy&&s&&"string"==typeof s?s.trim():s},t.prototype.parseParenthesisToken=function(s){return this.lossy?"space"===s[0]?this.parseSpace(s[1]," "):this.parseValue(s[1]):s[1]},t.prototype.newNode=function(s,r){return r&&(s.namespace=this.parseNamespace(r)),this.spaces&&(s.spaces.before=this.spaces,this.spaces=""),this.current.append(s)},$d(t,[{key:"currToken",get:function(){return this.tokens[this.position]}},{key:"nextToken",get:function(){return this.tokens[this.position+1]}},{key:"prevToken",get:function(){return this.tokens[this.position-1]}}]),t}();Tr.default=Em,iu.exports=Tr.default}),uu=g((Cr,au)=>{Cr.__esModule=!0;var km=function(){function t(e,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,s,r){return s&&t(e.prototype,s),r&&t(e,r),e}}(),Tm=Cm(ou());function Cm(t){return t&&t.__esModule?t:{default:t}}function Om(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Am=function(){function t(e){return Om(this,t),this.func=e||function(){},this}return t.prototype.process=function(s){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Tm.default({css:s,error:function(o){throw new Error(o)},options:r});return this.res=n,this.func(n),this},km(t,[{key:"result",get:function(){return String(this.res)}}]),t}();Cr.default=Am,au.exports=Cr.default}),G=g((zx,cu)=>{var Gs=function(t,e){let s=new t.constructor;for(let r in t){if(!t.hasOwnProperty(r))continue;let n=t[r],i=typeof n;"parent"===r&&"object"===i?e&&(s[r]=e):"source"===r?s[r]=n:n instanceof Array?s[r]=n.map(o=>Gs(o,s)):"before"!==r&&"after"!==r&&"between"!==r&&"semicolon"!==r&&("object"===i&&null!==n&&(n=Gs(n)),s[r]=n)}return s};cu.exports=class{constructor(e){e=e||{},this.raws={before:"",after:""};for(let s in e)this[s]=e[s]}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}toString(){return[this.raws.before,String(this.value),this.raws.after].join("")}clone(e){e=e||{};let s=Gs(this);for(let r in e)s[r]=e[r];return s}cloneBefore(e){e=e||{};let s=this.clone(e);return this.parent.insertBefore(this,s),s}cloneAfter(e){e=e||{};let s=this.clone(e);return this.parent.insertAfter(this,s),s}replaceWith(){let e=Array.prototype.slice.call(arguments);if(this.parent){for(let s of e)this.parent.insertBefore(this,s);this.remove()}return this}moveTo(e){return this.cleanRaws(this.root()===e.root()),this.remove(),e.append(this),this}moveBefore(e){return this.cleanRaws(this.root()===e.root()),this.remove(),e.parent.insertBefore(e,this),this}moveAfter(e){return this.cleanRaws(this.root()===e.root()),this.remove(),e.parent.insertAfter(e,this),this}next(){let e=this.parent.index(this);return this.parent.nodes[e+1]}prev(){let e=this.parent.index(this);return this.parent.nodes[e-1]}toJSON(){let e={};for(let s in this){if(!this.hasOwnProperty(s)||"parent"===s)continue;let r=this[s];r instanceof Array?e[s]=r.map(n=>"object"==typeof n&&n.toJSON?n.toJSON():n):"object"==typeof r&&r.toJSON?e[s]=r.toJSON():e[s]=r}return e}root(){let e=this;for(;e.parent;)e=e.parent;return e}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}positionInside(e){let s=this.toString(),r=this.source.start.column,n=this.source.start.line;for(let i=0;i<e;i++)"\n"===s[i]?(r=1,n+=1):r+=1;return{line:n,column:r}}positionBy(e){let s=this.source.start;if(Object(e).index)s=this.positionInside(e.index);else if(Object(e).word){let r=this.toString().indexOf(e.word);-1!==r&&(s=this.positionInside(r))}return s}}}),U=g((Gx,fu)=>{var Pm=G(),Fe=class extends Pm{constructor(e){super(e),this.nodes||(this.nodes=[])}push(e){return e.parent=this,this.nodes.push(e),this}each(e){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let r,n,s=this.lastEach;if(this.indexes[s]=0,this.nodes){for(;this.indexes[s]<this.nodes.length&&(r=this.indexes[s],n=e(this.nodes[r],r),!1!==n);)this.indexes[s]+=1;return delete this.indexes[s],n}}walk(e){return this.each((s,r)=>{let n=e(s,r);return!1!==n&&s.walk&&(n=s.walk(e)),n})}walkType(e,s){if(!e||!s)throw new Error("Parameters {type} and {callback} are required.");let r="function"==typeof e;return this.walk((n,i)=>{if(r&&n instanceof e||!r&&n.type===e)return s.call(this,n,i)})}append(e){return e.parent=this,this.nodes.push(e),this}prepend(e){return e.parent=this,this.nodes.unshift(e),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let s of this.nodes)s.cleanRaws(e)}insertAfter(e,s){let n,r=this.index(e);this.nodes.splice(r+1,0,s);for(let i in this.indexes)n=this.indexes[i],r<=n&&(this.indexes[i]=n+this.nodes.length);return this}insertBefore(e,s){let n,r=this.index(e);this.nodes.splice(r,0,s);for(let i in this.indexes)n=this.indexes[i],r<=n&&(this.indexes[i]=n+this.nodes.length);return this}removeChild(e){let s;e=this.index(e),this.nodes[e].parent=void 0,this.nodes.splice(e,1);for(let r in this.indexes)s=this.indexes[r],s>=e&&(this.indexes[r]=s-1);return this}removeAll(){for(let e of this.nodes)e.parent=void 0;return this.nodes=[],this}every(e){return this.nodes.every(e)}some(e){return this.nodes.some(e)}index(e){return"number"==typeof e?e:this.nodes.indexOf(e)}get first(){if(this.nodes)return this.nodes[0]}get last(){if(this.nodes)return this.nodes[this.nodes.length-1]}toString(){let e=this.nodes.map(String).join("");return this.value&&(e=this.value+e),this.raws.before&&(e=this.raws.before+e),this.raws.after&&(e+=this.raws.after),e}};Fe.registerWalker=t=>{let e="walk"+t.name;e.lastIndexOf("s")!==e.length-1&&(e+="s"),!Fe.prototype[e]&&(Fe.prototype[e]=function(s){return this.walkType(t,s)})},fu.exports=Fe}),hu=g((Hx,pu)=>{var Rm=U();pu.exports=class extends Rm{constructor(e){super(e),this.type="root"}}}),mu=g((Qx,du)=>{var Im=U();du.exports=class extends Im{constructor(e){super(e),this.type="value",this.unbalanced=0}}}),wu=g((Jx,gu)=>{var yu=U(),Or=class extends yu{constructor(e){super(e),this.type="atword"}toString(){return this.quoted&&this.raws.quote,[this.raws.before,"@",String.prototype.toString.call(this.value),this.raws.after].join("")}};yu.registerWalker(Or),gu.exports=Or}),xu=g((Xx,vu)=>{var qm=U(),Lm=G(),Ar=class extends Lm{constructor(e){super(e),this.type="colon"}};qm.registerWalker(Ar),vu.exports=Ar}),_u=g((Zx,bu)=>{var Dm=U(),Bm=G(),Nr=class extends Bm{constructor(e){super(e),this.type="comma"}};Dm.registerWalker(Nr),bu.exports=Nr}),ku=g((eb,Eu)=>{var Mm=U(),Um=G(),Pr=class extends Um{constructor(e){super(e),this.type="comment",this.inline=Object(e).inline||!1}toString(){return[this.raws.before,this.inline?"//":"/*",String(this.value),this.inline?"":"*/",this.raws.after].join("")}};Mm.registerWalker(Pr),Eu.exports=Pr}),Cu=g((tb,Tu)=>{var Su=U(),Rr=class extends Su{constructor(e){super(e),this.type="func",this.unbalanced=-1}};Su.registerWalker(Rr),Tu.exports=Rr}),Au=g((rb,Ou)=>{var Fm=U(),$m=G(),Ir=class extends $m{constructor(e){super(e),this.type="number",this.unit=Object(e).unit||""}toString(){return[this.raws.before,String(this.value),this.unit,this.raws.after].join("")}};Fm.registerWalker(Ir),Ou.exports=Ir}),Pu=g((sb,Nu)=>{var Wm=U(),Ym=G(),qr=class extends Ym{constructor(e){super(e),this.type="operator"}};Wm.registerWalker(qr),Nu.exports=qr}),Iu=g((nb,Ru)=>{var Vm=U(),zm=G(),Lr=class extends zm{constructor(e){super(e),this.type="paren",this.parenType=""}};Vm.registerWalker(Lr),Ru.exports=Lr}),Lu=g((ib,qu)=>{var Gm=U(),jm=G(),Dr=class extends jm{constructor(e){super(e),this.type="string"}toString(){let e=this.quoted?this.raws.quote:"";return[this.raws.before,e,this.value+"",e,this.raws.after].join("")}};Gm.registerWalker(Dr),qu.exports=Dr}),Bu=g((ob,Du)=>{var Hm=U(),Km=G(),Br=class extends Km{constructor(e){super(e),this.type="word"}};Hm.registerWalker(Br),Du.exports=Br}),Uu=g((ab,Mu)=>{var Qm=U(),Jm=G(),Mr=class extends Jm{constructor(e){super(e),this.type="unicode-range"}};Qm.registerWalker(Mr),Mu.exports=Mr}),$u=g((ub,Fu)=>{var js=class extends Error{constructor(e){super(e),this.name=this.constructor.name,this.message=e||"An error ocurred while tokzenizing.","function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(e).stack}};Fu.exports=js}),Vu=g((lb,Yu)=>{var Ur=/[ \n\t\r\{\(\)'"\\;,/]/g,Xm=/[ \n\t\r\(\)\{\}\*:;@!&'"\+\|~>,\[\]\\]|\/(?=\*)/g,$e=/[ \n\t\r\(\)\{\}\*:;@!&'"\-\+\|~>,\[\]\\]|\//g,Zm=/^[a-z0-9]/i,ey=/^[a-f0-9?\-]/i,Wu=$u();Yu.exports=function(e,s){s=s||{};let p,l,y,x,h,d,m,b,w,v,N,F,r=[],n=e.valueOf(),i=n.length,o=-1,u=1,a=0,c=0,f=null;function Q(T){throw new Wu(`Unclosed ${T} at line: ${u}, column: ${a-o}, token: ${a}`)}for(;a<i;){switch(p=n.charCodeAt(a),10===p&&(o=a,u+=1),p){case 10:case 32:case 9:case 13:case 12:l=a;do{l+=1,p=n.charCodeAt(l),10===p&&(o=l,u+=1)}while(32===p||10===p||9===p||13===p||12===p);r.push(["space",n.slice(a,l),u,a-o,u,l-o,a]),a=l-1;break;case 58:l=a+1,r.push(["colon",n.slice(a,l),u,a-o,u,l-o,a]),a=l-1;break;case 44:l=a+1,r.push(["comma",n.slice(a,l),u,a-o,u,l-o,a]),a=l-1;break;case 123:r.push(["{","{",u,a-o,u,l-o,a]);break;case 125:r.push(["}","}",u,a-o,u,l-o,a]);break;case 40:c++,f=!f&&1===c&&r.length>0&&"word"===r[r.length-1][0]&&"url"===r[r.length-1][1],r.push(["(","(",u,a-o,u,l-o,a]);break;case 41:c--,f=f&&c>0,r.push([")",")",u,a-o,u,l-o,a]);break;case 39:case 34:y=39===p?"'":'"',l=a;do{for(v=!1,l=n.indexOf(y,l+1),-1===l&&Q("quote",y),N=l;92===n.charCodeAt(N-1);)N-=1,v=!v}while(v);r.push(["string",n.slice(a,l+1),u,a-o,u,l-o,a]),a=l;break;case 64:Ur.lastIndex=a+1,Ur.test(n),l=0===Ur.lastIndex?n.length-1:Ur.lastIndex-2,r.push(["atword",n.slice(a,l+1),u,a-o,u,l-o,a]),a=l;break;case 92:l=a,p=n.charCodeAt(l+1),m&&47!==p&&32!==p&&10!==p&&9!==p&&13!==p&&12!==p&&(l+=1),r.push(["word",n.slice(a,l+1),u,a-o,u,l-o,a]),a=l;break;case 43:case 45:case 42:if(l=a+1,F=n.slice(a+1,l+1),n.slice(a-1,a),45===p&&45===F.charCodeAt(0)){l++,r.push(["word",n.slice(a,l),u,a-o,u,l-o,a]),a=l-1;break}r.push(["operator",n.slice(a,l),u,a-o,u,l-o,a]),a=l-1;break;default:if(47===p&&(42===n.charCodeAt(a+1)||s.loose&&!f&&47===n.charCodeAt(a+1))){if(42===n.charCodeAt(a+1))l=n.indexOf("*/",a+2)+1,0===l&&Q("comment","*/");else{let O=n.indexOf("\n",a+2);l=-1!==O?O-1:i}d=n.slice(a,l+1),x=d.split("\n"),h=x.length-1,h>0?(b=u+h,w=l-x[h].length):(b=u,w=o),r.push(["comment",d,u,a-o,b,l-w,a]),o=w,u=b,a=l}else if(35!==p||Zm.test(n.slice(a+1,a+2)))if(117!==p&&85!==p||43!==n.charCodeAt(a+1))if(47===p)l=a+1,r.push(["operator",n.slice(a,l),u,a-o,u,l-o,a]),a=l-1;else{let C=Xm;if(p>=48&&p<=57&&(C=$e),C.lastIndex=a+1,C.test(n),l=0===C.lastIndex?n.length-1:C.lastIndex-2,C===$e||46===p){let O=n.charCodeAt(l),ve=n.charCodeAt(l+1),Xs=n.charCodeAt(l+2);(101===O||69===O)&&(45===ve||43===ve)&&Xs>=48&&Xs<=57&&($e.lastIndex=l+2,$e.test(n),l=0===$e.lastIndex?n.length-1:$e.lastIndex-2)}r.push(["word",n.slice(a,l+1),u,a-o,u,l-o,a]),a=l}else{l=a+2;do{l+=1,p=n.charCodeAt(l)}while(l<i&&ey.test(n.slice(l,l+1)));r.push(["unicoderange",n.slice(a,l),u,a-o,u,l-o,a]),a=l-1}else l=a+1,r.push(["#",n.slice(a,l),u,a-o,u,l-o,a]),a=l-1}a++}return r}}),Gu=g((cb,zu)=>{var Hs=class extends Error{constructor(e){super(e),this.name=this.constructor.name,this.message=e||"An error ocurred while parsing.","function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(e).stack}};zu.exports=Hs}),Qu=g((pb,Ku)=>{var ty=hu(),ry=mu(),sy=wu(),ny=xu(),iy=_u(),oy=ku(),ay=Cu(),uy=Au(),ly=Pu(),ju=Iu(),cy=Lu(),Hu=Bu(),fy=Uu(),py=Vu(),hy=Ds(),dy=Bs(),my=Ms(),yy=Gu();function gy(t){return t.sort((e,s)=>e-s)}Ku.exports=class{constructor(e,s){let r={loose:!1};this.cache=[],this.input=e,this.options=Object.assign({},r,s),this.position=0,this.unbalanced=0,this.root=new ty;let n=new ry;this.root.append(n),this.current=n,this.tokens=py(e,this.options)}parse(){return this.loop()}colon(){let e=this.currToken;this.newNode(new ny({value:e[1],source:{start:{line:e[2],column:e[3]},end:{line:e[4],column:e[5]}},sourceIndex:e[6]})),this.position++}comma(){let e=this.currToken;this.newNode(new iy({value:e[1],source:{start:{line:e[2],column:e[3]},end:{line:e[4],column:e[5]}},sourceIndex:e[6]})),this.position++}comment(){let r,e=!1,s=this.currToken[1].replace(/\/\*|\*\//g,"");this.options.loose&&s.startsWith("//")&&(s=s.substring(2),e=!0),r=new oy({value:s,inline:e,source:{start:{line:this.currToken[2],column:this.currToken[3]},end:{line:this.currToken[4],column:this.currToken[5]}},sourceIndex:this.currToken[6]}),this.newNode(r),this.position++}error(e,s){throw new yy(e+` at line: ${s[2]}, column ${s[3]}`)}loop(){for(;this.position<this.tokens.length;)this.parseTokens();return!this.current.last&&this.spaces?this.current.raws.before+=this.spaces:this.spaces&&(this.current.last.raws.after+=this.spaces),this.spaces="",this.root}operator(){let s,e=this.currToken[1];if("+"===e||"-"===e)if(this.options.loose||this.position>0&&("func"===this.current.type&&"calc"===this.current.value?("space"!==this.prevToken[0]&&"("!==this.prevToken[0]||"space"!==this.nextToken[0]&&"word"!==this.nextToken[0]||"word"===this.nextToken[0]&&"operator"!==this.current.last.type&&"("!==this.current.last.value)&&this.error("Syntax Error",this.currToken):("space"===this.nextToken[0]||"operator"===this.nextToken[0]||"operator"===this.prevToken[0])&&this.error("Syntax Error",this.currToken)),this.options.loose){if((!this.current.nodes.length||this.current.last&&"operator"===this.current.last.type)&&"word"===this.nextToken[0])return this.word()}else if("word"===this.nextToken[0])return this.word();return s=new ly({value:this.currToken[1],source:{start:{line:this.currToken[2],column:this.currToken[3]},end:{line:this.currToken[2],column:this.currToken[3]}},sourceIndex:this.currToken[4]}),this.position++,this.newNode(s)}parseTokens(){switch(this.currToken[0]){case"space":this.space();break;case"colon":this.colon();break;case"comma":this.comma();break;case"comment":this.comment();break;case"(":this.parenOpen();break;case")":this.parenClose();break;case"atword":case"word":default:this.word();break;case"operator":this.operator();break;case"string":this.string();break;case"unicoderange":this.unicodeRange()}}parenOpen(){let n,e=1,s=this.position+1,r=this.currToken;for(;s<this.tokens.length&&e;){let i=this.tokens[s];"("===i[0]&&e++,")"===i[0]&&e--,s++}if(e&&this.error("Expected closing parenthesis",r),n=this.current.last,n&&"func"===n.type&&n.unbalanced<0&&(n.unbalanced=0,this.current=n),this.current.unbalanced++,this.newNode(new ju({value:r[1],source:{start:{line:r[2],column:r[3]},end:{line:r[4],column:r[5]}},sourceIndex:r[6]})),this.position++,"func"===this.current.type&&this.current.unbalanced&&"url"===this.current.value&&"string"!==this.currToken[0]&&")"!==this.currToken[0]&&!this.options.loose){let i=this.nextToken,o=this.currToken[1],u={line:this.currToken[2],column:this.currToken[3]};for(;i&&")"!==i[0]&&this.current.unbalanced;)this.position++,o+=this.currToken[1],i=this.nextToken;this.position!==this.tokens.length-1&&(this.position++,this.newNode(new Hu({value:o,source:{start:u,end:{line:this.currToken[4],column:this.currToken[5]}},sourceIndex:this.currToken[6]})))}}parenClose(){let e=this.currToken;this.newNode(new ju({value:e[1],source:{start:{line:e[2],column:e[3]},end:{line:e[4],column:e[5]}},sourceIndex:e[6]})),this.position++,(!(this.position>=this.tokens.length-1)||this.current.unbalanced)&&(this.current.unbalanced--,this.current.unbalanced<0&&this.error("Expected opening parenthesis",e),!this.current.unbalanced&&this.cache.length&&(this.current=this.cache.pop()))}space(){let e=this.currToken;this.position===this.tokens.length-1||","===this.nextToken[0]||")"===this.nextToken[0]?(this.current.last.raws.after+=e[1],this.position++):(this.spaces=e[1],this.position++)}unicodeRange(){let e=this.currToken;this.newNode(new fy({value:e[1],source:{start:{line:e[2],column:e[3]},end:{line:e[4],column:e[5]}},sourceIndex:e[6]})),this.position++}splitWord(){let i,o,e=this.nextToken,s=this.currToken[1],r=/^[\+\-]?((\d+(\.\d*)?)|(\.\d+))([eE][\+\-]?\d+)?/;if(!/^(?!\#([a-z0-9]+))[\#\{\}]/gi.test(s))for(;e&&"word"===e[0];){this.position++;let u=this.currToken[1];s+=u,e=this.nextToken}i=dy(s,"@"),o=gy(my(hy([[0],i]))),o.forEach((u,a)=>{let p,c=o[a+1]||s.length,f=s.slice(u,c);if(~i.indexOf(u))p=new sy({value:f.slice(1),source:{start:{line:this.currToken[2],column:this.currToken[3]+u},end:{line:this.currToken[4],column:this.currToken[3]+(c-1)}},sourceIndex:this.currToken[6]+o[a]});else if(r.test(this.currToken[1])){let l=f.replace(r,"");p=new uy({value:f.replace(l,""),source:{start:{line:this.currToken[2],column:this.currToken[3]+u},end:{line:this.currToken[4],column:this.currToken[3]+(c-1)}},sourceIndex:this.currToken[6]+o[a],unit:l})}else p=new(e&&"("===e[0]?ay:Hu)({value:f,source:{start:{line:this.currToken[2],column:this.currToken[3]+u},end:{line:this.currToken[4],column:this.currToken[3]+(c-1)}},sourceIndex:this.currToken[6]+o[a]}),"word"===p.type?(p.isHex=/^#(.+)/.test(f),p.isColor=/^#([0-9a-f]{3}|[0-9a-f]{4}|[0-9a-f]{6}|[0-9a-f]{8})$/i.test(f)):this.cache.push(this.current);this.newNode(p)}),this.position++}string(){let o,e=this.currToken,s=this.currToken[1],r=/^(\"|\')/,n=r.test(s),i="";n&&(i=s.match(r)[0],s=s.slice(1,s.length-1)),o=new cy({value:s,source:{start:{line:e[2],column:e[3]},end:{line:e[4],column:e[5]}},sourceIndex:e[6],quoted:n}),o.raws.quote=i,this.newNode(o),this.position++}word(){return this.splitWord()}newNode(e){return this.spaces&&(e.raws.before+=this.spaces,this.spaces=""),this.current.append(e)}get currToken(){return this.tokens[this.position]}get nextToken(){return this.tokens[this.position+1]}get prevToken(){return this.tokens[this.position-1]}}}),qy={};Zs(qy,{languages:()=>gi,options:()=>vi,parsers:()=>Js,printers:()=>Iy});var vl=(t,e,s,r)=>{if(!t||null!=e)return e.replaceAll?e.replaceAll(s,r):s.global?e.replace(s,r):e.split(s).join(r)},E=vl,be="string",We="array",Ye="cursor",te="indent",_e="align",Ve="trim",re="group",se="fill",ne="if-break",ze="indent-if-break",Ee="line-suffix",Ge="line-suffix-boundary",j="line",je="label",ke="break-parent",Ct=new Set([Ye,te,_e,Ve,re,se,ne,ze,Ee,Ge,j,je,ke]),xl=(t,e,s)=>{if(!t||null!=e)return Array.isArray(e)||"string"==typeof e?e[s<0?e.length+s:s]:e.at(s)},$=xl;function bl(t){if("string"==typeof t)return be;if(Array.isArray(t))return We;if(!t)return;let{type:e}=t;return Ct.has(e)?e:void 0}var H=bl,_l=t=>new Intl.ListFormat("en-US",{type:"disjunction"}).format(t);function El(t){let e=null===t?"null":typeof t;if("string"!==e&&"object"!==e)return`Unexpected doc '${e}', \nExpected it to be 'string' or 'object'.`;if(H(t))throw new Error("doc is valid.");let s=Object.prototype.toString.call(t);if("[object Object]"!==s)return`Unexpected doc '${s}'.`;let r=_l([...Ct].map(n=>`'${n}'`));return`Unexpected doc.type '${t.type}'.\nExpected it to be ${r}.`}var Wr=class extends Error{name="InvalidDocError";constructor(e){super(El(e)),this.doc=e}},Yr=Wr;function Sl(t,e){if("string"==typeof t)return e(t);let s=new Map;return r(t);function r(i){if(s.has(i))return s.get(i);let o=n(i);return s.set(i,o),o}function n(i){switch(H(i)){case We:return e(i.map(r));case se:return e({...i,parts:i.parts.map(r)});case ne:return e({...i,breakContents:r(i.breakContents),flatContents:r(i.flatContents)});case re:{let{expandedStates:o,contents:u}=i;return o?(o=o.map(r),u=o[0]):u=r(u),e({...i,contents:u,expandedStates:o})}case _e:case te:case ze:case je:case Ee:return e({...i,contents:r(i.contents)});case be:case Ye:case Ve:case Ge:case j:case ke:return e(i);default:throw new Yr(i)}}}function Tl(t){return t.type!==j||t.hard?t.type===ne?t.flatContents:t:t.soft?"":" "}function tn(t){return Sl(t,Tl)}var Vr=()=>{},ie=Vr,He=Vr,rn=Vr;function q(t){return ie(t),{type:te,contents:t}}function sn(t,e){return ie(e),{type:_e,contents:e,n:t}}function L(t,e={}){return ie(t),He(e.expandedStates,!0),{type:re,id:e.id,contents:t,break:!!e.shouldBreak,expandedStates:e.expandedStates}}function nn(t){return sn({type:"root"},t)}function oe(t){return sn(-1,t)}function Se(t){return rn(t),{type:se,parts:t}}function Ot(t,e="",s={}){return ie(t),""!==e&&ie(e),{type:ne,breakContents:t,flatContents:e,groupId:s.groupId}}function on(t){return ie(t),{type:Ee,contents:t}}var Ke={type:ke},A={type:j},D={type:j,soft:!0},S=[{type:j,hard:!0},Ke];function Y(t,e){ie(t),He(e);let s=[];for(let r=0;r<e.length;r++)0!==r&&s.push(t),s.push(e[r]);return s}function Ol(t){return Array.isArray(t)&&t.length>0}var ae=Ol,an=new Proxy(()=>{},{get:()=>an}),un=an,At="'",ln='"';function Al(t,e){let s=!0===e||e===At?At:ln,r=s===At?ln:At,n=0,i=0;for(let o of t)o===s?n++:o===r&&i++;return n>i?r:s}var cn=Al;function Nl(t,e,s){let r='"'===e?"'":'"',i=E(!1,t,/\\(.)|(["'])/gsu,(o,u,a)=>u===r?u:a===e?"\\"+a:a||(s&&/^[^\n\r"'0-7\\bfnrt-vx\u2028\u2029]$/u.test(u)?u:"\\"+u));return e+i+e}var fn=Nl;function Pl(t,e){un.ok(/^(?<quote>["']).*\k<quote>$/su.test(t));let s=t.slice(1,-1),r="json"===e.parser||"jsonc"===e.parser||"json5"===e.parser&&"preserve"===e.quoteProps&&!e.singleQuote?'"':e.__isInHtmlAttribute?"'":cn(s,e.singleQuote);return t.charAt(0)===r?t:fn(s,r,!1)}var Nt=Pl,zr=class extends Error{name="UnexpectedNodeError";constructor(e,s,r="type"){super(`Unexpected ${s} node ${r}: ${JSON.stringify(e[r])}.`),this.node=e}},pn=zr;function Rl(t){return"front-matter"===(null==t?void 0:t.type)}var Te=Rl,Il=new Set(["raw","raws","sourceIndex","source","before","after","trailingComma","spaces"]);function hn(t,e,s){if(Te(t)&&"yaml"===t.language&&delete e.value,"css-comment"===t.type&&"css-root"===s.type&&s.nodes.length>0&&((s.nodes[0]===t||Te(s.nodes[0])&&s.nodes[1]===t)&&(delete e.text,/^\*\s*@(?:format|prettier)\s*$/u.test(t.text))||"css-root"===s.type&&$(!1,s.nodes,-1)===t))return null;if("value-root"===t.type&&delete e.text,("media-query"===t.type||"media-query-list"===t.type||"media-feature-expression"===t.type)&&delete e.value,"css-rule"===t.type&&delete e.params,("media-feature"===t.type||"media-keyword"===t.type||"media-type"===t.type||"media-unknown"===t.type||"media-url"===t.type||"media-value"===t.type||"selector-attribute"===t.type||"selector-string"===t.type||"selector-class"===t.type||"selector-combinator"===t.type||"value-string"===t.type)&&t.value&&(e.value=ql(t.value)),"selector-combinator"===t.type&&(e.value=E(!1,e.value,/\s+/gu," ")),"media-feature"===t.type&&(e.value=E(!1,e.value," ","")),("value-word"===t.type&&(t.isColor&&t.isHex||["initial","inherit","unset","revert"].includes(t.value.toLowerCase()))||"media-feature"===t.type||"selector-root-invalid"===t.type||"selector-pseudo"===t.type)&&(e.value=e.value.toLowerCase()),"css-decl"===t.type&&(e.prop=t.prop.toLowerCase()),("css-atrule"===t.type||"css-import"===t.type)&&(e.name=t.name.toLowerCase()),"value-number"===t.type&&(e.unit=t.unit.toLowerCase()),"value-unknown"===t.type&&(e.value=E(!1,e.value,/;$/gu,"")),"selector-attribute"===t.type&&(e.attribute=t.attribute.trim(),t.namespace&&"string"==typeof t.namespace&&(e.namespace=t.namespace.trim()||!0),t.value&&(e.value=E(!1,e.value.trim(),/^["']|["']$/gu,""),delete e.quoted)),("media-value"===t.type||"media-type"===t.type||"value-number"===t.type||"selector-root-invalid"===t.type||"selector-class"===t.type||"selector-combinator"===t.type||"selector-tag"===t.type)&&t.value&&(e.value=E(!1,e.value,/([\d+.e-]+)([a-z]*)/giu,(r,n,i)=>{let o=Number(n);return Number.isNaN(o)?r:o+i.toLowerCase()})),"selector-tag"===t.type){let r=e.value.toLowerCase();["from","to"].includes(r)&&(e.value=r)}if("css-atrule"===t.type&&"supports"===t.name.toLowerCase()&&delete e.value,"selector-unknown"===t.type&&delete e.value,"value-comma_group"===t.type){let r=t.groups.findIndex(n=>"value-number"===n.type&&"..."===n.unit);-1!==r&&(e.groups[r].unit="",e.groups.splice(r+1,0,{type:"value-word",value:"...",isColor:!1,isHex:!1}))}return"value-comma_group"===t.type&&t.groups.some(r=>"value-atword"===r.type&&r.value.endsWith("[")||"value-word"===r.type&&r.value.startsWith("]"))?{type:"value-atword",value:t.groups.map(r=>r.value).join(""),group:{open:null,close:null,groups:[],type:"value-paren_group"}}:void 0}function ql(t){return E(!1,E(!1,t,"'",'"'),/\\([^\da-f])/giu,"$1")}hn.ignoredProperties=Il;var dn=hn;async function Ll(t,e){if("yaml"===t.language){let s=t.value.trim(),r=s?await e(s,{parser:"yaml"}):"";return nn([t.startDelimiter,t.explicitLanguage,S,r,r?S:"",t.endDelimiter])}}var mn=Ll;function yn(t){let{node:e}=t;if("front-matter"===e.type)return async s=>{let r=await mn(e,s);return r?[r,S]:void 0}}yn.getVisitorKeys=t=>"css-root"===t.type?["frontMatter"]:[];var gn=yn,Qe=null;function Je(t){if(null!==Qe&&(Qe.property,1)){let e=Qe;return Qe=Je.prototype=null,e}return Qe=Je.prototype=t??Object.create(null),new Je}var Dl=10;for(let t=0;t<=Dl;t++)Je();function Gr(t){return Je(t)}function Bl(t,e="type"){function s(r){let n=r[e],i=t[n];if(!Array.isArray(i))throw Object.assign(new Error(`Missing visitor keys for '${n}'.`),{node:r});return i}return Gr(t),s}var wn=Bl,vn={"front-matter":[],"css-root":["frontMatter","nodes"],"css-comment":[],"css-rule":["selector","nodes"],"css-decl":["value","selector","nodes"],"css-atrule":["selector","params","value","nodes"],"media-query-list":["nodes"],"media-query":["nodes"],"media-type":[],"media-feature-expression":["nodes"],"media-feature":[],"media-colon":[],"media-value":[],"media-keyword":[],"media-url":[],"media-unknown":[],"selector-root":["nodes"],"selector-selector":["nodes"],"selector-comment":[],"selector-string":[],"selector-tag":[],"selector-id":[],"selector-class":[],"selector-attribute":[],"selector-combinator":["nodes"],"selector-universal":[],"selector-pseudo":["nodes"],"selector-nesting":[],"selector-unknown":[],"value-value":["group"],"value-root":["group"],"value-comment":[],"value-comma_group":["groups"],"value-paren_group":["open","groups","close"],"value-func":["group"],"value-paren":[],"value-number":[],"value-operator":[],"value-word":[],"value-colon":[],"value-comma":[],"value-string":[],"value-atword":[],"value-unicode-range":[],"value-unknown":[]},Ul=wn(vn),xn=Ul;function Fl(t,e){let s=0;for(let r=0;r<t.line-1;++r)s=e.indexOf("\n",s)+1;return s+t.column}var jr=Fl;function Pt(t){return(e,s,r)=>{let n=!(null==r||!r.backwards);if(!1===s)return!1;let{length:i}=e,o=s;for(;o>=0&&o<i;){let u=e.charAt(o);if(t instanceof RegExp){if(!t.test(u))return o}else if(!t.includes(u))return o;n?o--:o++}return(-1===o||o===i)&&o}}Pt(/\s/u);var Rt=Pt(" \t"),bn=Pt(",; \t"),It=Pt(/[^\n\r]/u);function _n(t,e){var s,r,n;if("number"==typeof(null==(r=null==(s=t.source)?void 0:s.start)?void 0:r.offset))return t.source.start.offset;if("number"==typeof t.sourceIndex)return t.sourceIndex;if(null!=(n=t.source)&&n.start)return jr(t.source.start,e);throw Object.assign(new Error("Can not locate node."),{node:t})}function Hr(t,e){var s,r;if("css-comment"===t.type&&t.inline)return It(e,t.source.startOffset);if("number"==typeof(null==(r=null==(s=t.source)?void 0:s.end)?void 0:r.offset))return t.source.end.offset;if(t.source){if(t.source.end)return jr(t.source.end,e);if(ae(t.nodes))return Hr($(!1,t.nodes,-1),e)}return null}function Kr(t,e){t.source&&(t.source.startOffset=_n(t,e),t.source.endOffset=Hr(t,e));for(let s in t){let r=t[s];"source"===s||!r||"object"!=typeof r||("value-root"===r.type||"value-unknown"===r.type?En(r,$l(t),r.text||r.value):Kr(r,e))}}function En(t,e,s){t.source&&(t.source.startOffset=_n(t,s)+e,t.source.endOffset=Hr(t,s)+e);for(let r in t){let n=t[r];"source"===r||!n||"object"!=typeof n||En(n,e,s)}}function $l(t){var s;let e=t.source.startOffset;return"string"==typeof t.prop&&(e+=t.prop.length),"css-atrule"===t.type&&"string"==typeof t.name&&(e+=1+t.name.length+t.raws.afterName.match(/^\s*:?\s*/u)[0].length),"css-atrule"!==t.type&&"string"==typeof(null==(s=t.raws)?void 0:s.between)&&(e+=t.raws.between.length),e}function kn(t){let r,e="initial",s="initial",n=!1,i=[];for(let o=0;o<t.length;o++){let u=t[o];switch(e){case"initial":if("'"===u){e="single-quotes";continue}if('"'===u){e="double-quotes";continue}if(("u"===u||"U"===u)&&"url("===t.slice(o,o+4).toLowerCase()){e="url",o+=3;continue}if("*"===u&&"/"===t[o-1]){e="comment-block";continue}if("/"===u&&"/"===t[o-1]){e="comment-inline",r=o-1;continue}continue;case"single-quotes":if("'"===u&&"\\"!==t[o-1]&&(e=s,s="initial"),"\n"===u||"\r"===u)return t;continue;case"double-quotes":if('"'===u&&"\\"!==t[o-1]&&(e=s,s="initial"),"\n"===u||"\r"===u)return t;continue;case"url":if(")"===u&&(e="initial"),"\n"===u||"\r"===u)return t;if("'"===u){e="single-quotes",s="url";continue}if('"'===u){e="double-quotes",s="url";continue}continue;case"comment-block":"/"===u&&"*"===t[o-1]&&(e="initial");continue;case"comment-inline":('"'===u||"'"===u||"*"===u)&&(n=!0),("\n"===u||"\r"===u)&&(n&&i.push([r,o]),e="initial",n=!1);continue}}for(let[o,u]of i)t=t.slice(0,o)+E(!1,t.slice(o,u),/["'*]/gu," ")+t.slice(u);return t}function P(t){var e;return null==(e=t.source)?void 0:e.startOffset}function R(t){var e;return null==(e=t.source)?void 0:e.endOffset}var Wl=/\*\/$/,Yl=/^\/\*\*?/,On=/^\s*(\/\*\*?(.|\r?\n)*?\*\/)/,Vl=/(^|\s+)\/\/([^\n\r]*)/g,Sn=/^(\r?\n)+/,zl=/(?:^|\r?\n) *(@[^\n\r]*?) *\r?\n *(?![^\n\r@]*\/\/[^]*)([^\s@][^\n\r@]+?) *\r?\n/g,Tn=/(?:^|\r?\n) *@(\S+) *([^\n\r]*)/g,Gl=/(\r?\n|^) *\* ?/g,An=[];function Nn(t){let e=t.match(On);return e?e[0].trimStart():""}function Pn(t){let e=t.match(On),s=null==e?void 0:e[0];return null==s?t:t.slice(s.length)}function Rn(t){let e="\n";t=E(!1,t.replace(Yl,"").replace(Wl,""),Gl,"$1");let s="";for(;s!==t;)s=t,t=E(!1,t,zl,`${e}$1 $2${e}`);t=t.replace(Sn,"").trimEnd();let i,r=Object.create(null),n=E(!1,t,Tn,"").replace(Sn,"").trimEnd();for(;i=Tn.exec(t);){let o=E(!1,i[2],Vl,"");if("string"==typeof r[i[1]]||Array.isArray(r[i[1]])){let u=r[i[1]];r[i[1]]=[...An,...Array.isArray(u)?u:[u],o]}else r[i[1]]=o}return{comments:n,pragmas:r}}function In({comments:t="",pragmas:e={}}){let s="\n",r="/**",n=" *",i=" */",o=Object.keys(e),u=o.flatMap(c=>Cn(c,e[c])).map(c=>`${n} ${c}${s}`).join("");if(!t){if(0===o.length)return"";if(1===o.length&&!Array.isArray(e[o[0]])){let c=e[o[0]];return`${r} ${Cn(o[0],c)[0]}${i}`}}let a=t.split(s).map(c=>`${n} ${c}`).join(s)+s;return r+s+(t?a:"")+(t&&o.length>0?n+s:"")+u+i}function Cn(t,e){return[...An,...Array.isArray(e)?e:[e]].map(s=>`@${t} ${s}`.trim())}function jl(t){if(!t.startsWith("#!"))return"";let e=t.indexOf("\n");return-1===e?t:t.slice(0,e)}var qn=jl;function Ln(t){let e=qn(t);e&&(t=t.slice(e.length+1));let s=Nn(t),{pragmas:r,comments:n}=Rn(s);return{shebang:e,text:t,pragmas:r,comments:n}}function Dn(t){let{pragmas:e}=Ln(t);return Object.prototype.hasOwnProperty.call(e,"prettier")||Object.prototype.hasOwnProperty.call(e,"format")}function Bn(t){let{shebang:e,text:s,pragmas:r,comments:n}=Ln(t),i=Pn(s);return(e?`${e}\n`:"")+In({pragmas:{format:"",...r},comments:n.trimStart()})+(i.startsWith("\n")?"\n":"\n\n")+i}var Xe=3;function Hl(t){let e=t.slice(0,Xe);if("---"!==e&&"+++"!==e)return;let s=t.indexOf("\n",Xe);if(-1===s)return;let r=t.slice(Xe,s).trim(),n=t.indexOf(`\n${e}`,s),i=r;if(i||(i="+++"===e?"toml":"yaml"),-1===n&&"---"===e&&"yaml"===i&&(n=t.indexOf("\n...",s)),-1===n)return;let o=n+1+Xe,u=t.charAt(o+1);if(!/\s?/u.test(u))return;let a=t.slice(0,o);return{type:"front-matter",language:i,explicitLanguage:r,value:t.slice(s+1,n),startDelimiter:e,endDelimiter:a.slice(-Xe),raw:a}}function Kl(t){let e=Hl(t);if(!e)return{content:t};let{raw:s}=e;return{frontMatter:e,content:E(!1,s,/[^\n]/gu," ")+t.slice(s.length)}}var Ze=Kl;function Mn(t){return Dn(Ze(t).content)}function Un(t){let{frontMatter:e,content:s}=Ze(t);return(e?e.raw+"\n\n":"")+Bn(s)}var Ql=new Set(["red","green","blue","alpha","a","rgb","hue","h","saturation","s","lightness","l","whiteness","w","blackness","b","tint","shade","blend","blenda","contrast","hsl","hsla","hwb","hwba"]);function Fn(t){var e,s;return null==(s=null==(e=t.findAncestor(r=>"css-decl"===r.type))?void 0:e.prop)?void 0:s.toLowerCase()}var Jl=new Set(["initial","inherit","unset","revert"]);function $n(t){return Jl.has(t.toLowerCase())}function Wn(t,e){var r;let s=t.findAncestor(n=>"css-atrule"===n.type);return(null==(r=null==s?void 0:s.name)?void 0:r.toLowerCase().endsWith("keyframes"))&&["from","to"].includes(e.toLowerCase())}function ue(t){return t.includes("$")||t.includes("@")||t.includes("#")||t.startsWith("%")||t.startsWith("--")||t.startsWith(":--")||t.includes("(")&&t.includes(")")?t:t.toLowerCase()}function Ce(t,e){var r;let s=t.findAncestor(n=>"value-func"===n.type);return(null==(r=null==s?void 0:s.value)?void 0:r.toLowerCase())===e}function Yn(t){var r;let e=t.findAncestor(n=>"css-rule"===n.type),s=null==(r=null==e?void 0:e.raws)?void 0:r.selector;return s&&(s.startsWith(":import")||s.startsWith(":export"))}function Oe(t,e){let s=Array.isArray(e)?e:[e],r=t.findAncestor(n=>"css-atrule"===n.type);return r&&s.includes(r.name.toLowerCase())}function Vn(t){var s;let{node:e}=t;return"url"===e.groups[0].value&&2===e.groups.length&&"import"===(null==(s=t.findAncestor(r=>"css-atrule"===r.type))?void 0:s.name)}function zn(t){return"value-func"===t.type&&"url"===t.value.toLowerCase()}function Gn(t){return"value-func"===t.type&&"var"===t.value.toLowerCase()}function jn(t){let{selector:e}=t;return!!e&&("string"==typeof e&&/^@.+:.*$/u.test(e)||e.value&&/^@.+:.*$/u.test(e.value))}function Hn(t){return"value-word"===t.type&&["from","through","end"].includes(t.value)}function Kn(t){return"value-word"===t.type&&["and","or","not"].includes(t.value)}function Qn(t){return"value-word"===t.type&&"in"===t.value}function qt(t){return"value-operator"===t.type&&"*"===t.value}function et(t){return"value-operator"===t.type&&"/"===t.value}function J(t){return"value-operator"===t.type&&"+"===t.value}function he(t){return"value-operator"===t.type&&"-"===t.value}function Xl(t){return"value-operator"===t.type&&"%"===t.value}function Lt(t){return qt(t)||et(t)||J(t)||he(t)||Xl(t)}function Jn(t){return"value-word"===t.type&&["==","!="].includes(t.value)}function Xn(t){return"value-word"===t.type&&["<",">","<=",">="].includes(t.value)}function tt(t,e){return"scss"===e.parser&&"css-atrule"===t.type&&["if","else","for","each","while"].includes(t.name)}function Jr(t){var e;return(null==(e=t.raws)?void 0:e.params)&&/^\(\s*\)$/u.test(t.raws.params)}function Dt(t){return t.name.startsWith("prettier-placeholder")}function Zn(t){return t.prop.startsWith("@prettier-placeholder")}function ei(t,e){return"$$"===t.value&&"value-func"===t.type&&"value-word"===(null==e?void 0:e.type)&&!e.raws.before}function ti(t){var e,s;return"value-root"===(null==(e=t.value)?void 0:e.type)&&"value-value"===(null==(s=t.value.group)?void 0:s.type)&&"composes"===t.prop.toLowerCase()}function ri(t){var e,s,r;return"value-paren_group"===(null==(r=null==(s=null==(e=t.value)?void 0:e.group)?void 0:s.group)?void 0:r.type)&&null!==t.value.group.group.open&&null!==t.value.group.group.close}function de(t){var e;return""===(null==(e=t.raws)?void 0:e.before)}function Bt(t){var e,s;return"value-comma_group"===t.type&&"value-colon"===(null==(s=null==(e=t.groups)?void 0:e[1])?void 0:s.type)}function Qr(t){var e;return"value-paren_group"===t.type&&(null==(e=t.groups)?void 0:e[0])&&Bt(t.groups[0])}function Xr(t,e){var i;if("scss"!==e.parser)return!1;let{node:s}=t;if(0===s.groups.length)return!1;let r=t.grandparent;if(!(Qr(s)||r&&Qr(r)))return!1;let n=t.findAncestor(o=>"css-decl"===o.type);return!!(null!=(i=null==n?void 0:n.prop)&&i.startsWith("$")||Qr(r)||"value-func"===r.type)}function Ae(t){return"value-comment"===t.type&&t.inline}function Mt(t){return"value-word"===t.type&&"#"===t.value}function Zr(t){return"value-word"===t.type&&"{"===t.value}function Ut(t){return"value-word"===t.type&&"}"===t.value}function rt(t){return["value-word","value-atword"].includes(t.type)}function st(t){return"value-colon"===(null==t?void 0:t.type)}function si(t,e){if(!Bt(e))return!1;let{groups:s}=e,r=s.indexOf(t);return-1!==r&&st(s[r+1])}function ni(t){return t.value&&["not","and","or"].includes(t.value.toLowerCase())}function ii(t){return"value-func"===t.type&&Ql.has(t.value.toLowerCase())}function Ne(t){return/\/\//u.test(t.split(/[\n\r]/u).pop())}function nt(t){return"value-atword"===(null==t?void 0:t.type)&&t.value.startsWith("prettier-placeholder-")}function oi(t,e){var s,r;if("("!==(null==(s=t.open)?void 0:s.value)||")"!==(null==(r=t.close)?void 0:r.value)||t.groups.some(n=>"value-comma_group"!==n.type))return!1;if("value-comma_group"===e.type){let n=e.groups.indexOf(t)-1,i=e.groups[n];if("value-word"===(null==i?void 0:i.type)&&"with"===i.value)return!0}return!1}function it(t){var e,s;return"value-paren_group"===t.type&&"("===(null==(e=t.open)?void 0:e.value)&&")"===(null==(s=t.close)?void 0:s.value)}function Zl(t,e,s){var d;let{node:r}=t,n=t.parent,i=t.grandparent,o=Fn(t),u=o&&"value-value"===n.type&&("grid"===o||o.startsWith("grid-template")),a=t.findAncestor(m=>"css-atrule"===m.type),c=a&&tt(a,e),f=r.groups.some(m=>Ae(m)),p=t.map(s,"groups"),l=[""],y=Ce(t,"url"),x=!1,h=!1;for(let m=0;m<r.groups.length;++m){let b=r.groups[m-1],w=r.groups[m],v=r.groups[m+1],N=r.groups[m+2];if(Ae(w)&&!v){l.push([l.pop(),on([" ",p[m]])]);continue}if(l.push([l.pop(),p[m]]),y){(v&&J(v)||J(w))&&l.push([l.pop()," "]);continue}if(st(v)&&"value-word"===w.type&&l.length>2&&r.groups.slice(0,m).every(O=>"value-comment"===O.type)&&!Ae(b)&&(l[l.length-2]=oe($(!1,l,-2))),Oe(t,"forward")&&"value-word"===w.type&&w.value&&void 0!==b&&"value-word"===b.type&&"as"===b.value&&"value-operator"===v.type&&"*"===v.value||!v||"value-word"===w.type&&w.value.endsWith("-")&&nt(v))continue;if("value-string"===w.type&&w.quoted){let O=w.value.lastIndexOf("#{"),ve=w.value.lastIndexOf("}");-1!==O&&-1!==ve?x=O>ve:-1!==O?x=!0:-1!==ve&&(x=!1)}if(x||st(w)||st(v)||"value-atword"===w.type&&(""===w.value||w.value.endsWith("["))||"value-word"===v.type&&v.value.startsWith("]")||"~"===w.value||"value-string"!==w.type&&w.value&&w.value.includes("\\")&&v&&"value-comment"!==v.type||null!=b&&b.value&&b.value.indexOf("\\")===b.value.length-1&&"value-operator"===w.type&&"/"===w.value||"\\"===w.value||ei(w,v)||Mt(w)||Zr(w)||Ut(v)||Zr(v)&&de(v)||Ut(w)&&de(v)||"--"===w.value&&Mt(v))continue;let F=Lt(w),Q=Lt(v);if((F&&Mt(v)||Q&&Ut(w))&&de(v)||!b&&et(w)||Ce(t,"calc")&&(J(w)||J(v)||he(w)||he(v))&&de(v))continue;let W=(J(w)||he(w))&&0===m&&("value-number"===v.type||v.isHex)&&i&&ii(i)&&!de(v),T="value-func"===(null==N?void 0:N.type)||N&&rt(N)||"value-func"===w.type||rt(w),C="value-func"===v.type||rt(v)||"value-func"===(null==b?void 0:b.type)||b&&rt(b);if("scss"===e.parser&&F&&"-"===w.value&&"value-func"===v.type&&R(w)!==P(v))l.push([l.pop()," "]);else if((qt(v)||qt(w)||Ce(t,"calc")||W||!(et(v)&&!T||et(w)&&!C||J(v)&&!T||J(w)&&!C||he(v)||he(w))||!(de(v)||F&&(!b||b&&Lt(b))))&&("scss"!==e.parser&&"less"!==e.parser||!F||"-"!==w.value||!it(v)||R(w)!==P(v.open)||"("!==v.open.value)){if(Ae(w)){if("value-paren_group"===n.type){l.push(oe(S),"");continue}l.push(S,"");continue}if(c&&(Jn(v)||Xn(v)||Kn(v)||Qn(w)||Hn(w))){l.push([l.pop()," "]);continue}if(a&&"namespace"===a.name.toLowerCase()){l.push([l.pop()," "]);continue}if(u){w.source&&v.source&&w.source.start.line!==v.source.start.line?(l.push(S,""),h=!0):l.push([l.pop()," "]);continue}if(Q){l.push([l.pop()," "]);continue}if(!("..."===(null==v?void 0:v.value)||nt(w)&&nt(v)&&R(w)===P(v))){if(nt(w)&&it(v)&&R(w)===P(v.open)){l.push(D,"");continue}if("with"===w.value&&it(v)){l=[[Se(l)," "]];continue}null!=(d=w.value)&&d.endsWith("#")&&"{"===v.value&&it(v.group)||Ae(v)&&!N||l.push(A,"")}}}return f&&l.push([l.pop(),Ke]),h&&l.unshift("",S),c?L(q(l)):Vn(t)?L(Se(l)):L(q(Se(l)))}var ai=Zl;function ec(t){return 1===t.length?t:t.toLowerCase().replace(/^([+-]?[\d.]+e)(?:\+|(-))?0*(?=\d)/u,"$1$2").replace(/^([+-]?[\d.]+)e[+-]?0+$/u,"$1").replace(/^([+-])?\./u,"$10.").replace(/(\.\d+?)0+(?=e|$)/u,"$1").replace(/\.(?=e|$)/u,"")}var ui=ec,es=new Map([["em","em"],["rem","rem"],["ex","ex"],["rex","rex"],["cap","cap"],["rcap","rcap"],["ch","ch"],["rch","rch"],["ic","ic"],["ric","ric"],["lh","lh"],["rlh","rlh"],["vw","vw"],["svw","svw"],["lvw","lvw"],["dvw","dvw"],["vh","vh"],["svh","svh"],["lvh","lvh"],["dvh","dvh"],["vi","vi"],["svi","svi"],["lvi","lvi"],["dvi","dvi"],["vb","vb"],["svb","svb"],["lvb","lvb"],["dvb","dvb"],["vmin","vmin"],["svmin","svmin"],["lvmin","lvmin"],["dvmin","dvmin"],["vmax","vmax"],["svmax","svmax"],["lvmax","lvmax"],["dvmax","dvmax"],["cm","cm"],["mm","mm"],["q","Q"],["in","in"],["pt","pt"],["pc","pc"],["px","px"],["deg","deg"],["grad","grad"],["rad","rad"],["turn","turn"],["s","s"],["ms","ms"],["hz","Hz"],["khz","kHz"],["dpi","dpi"],["dpcm","dpcm"],["dppx","dppx"],["x","x"],["cqw","cqw"],["cqh","cqh"],["cqi","cqi"],["cqb","cqb"],["cqmin","cqmin"],["cqmax","cqmax"],["fr","fr"]]);function li(t){let e=t.toLowerCase();return es.has(e)?es.get(e):t}var ci=/(["'])(?:(?!\1)[^\\]|\\.)*\1/gsu,tc=/(?:\d*\.\d+|\d+\.?)(?:e[+-]?\d+)?/giu,rc=/[a-z]+/giu,sc=/[$@]?[_a-z\u0080-\uFFFF][\w\u0080-\uFFFF-]*/giu,nc=new RegExp(ci.source+`|(${sc.source})?(${tc.source})(${rc.source})?`,"giu");function V(t,e){return E(!1,t,ci,s=>Nt(s,e))}function fi(t,e){let s=e.singleQuote?"'":'"';return t.includes('"')||t.includes("'")?t:s+t+s}function me(t){return E(!1,t,nc,(e,s,r,n,i)=>!r&&n?ts(n)+ue(i||""):e)}function ts(t){return ui(t).replace(/\.0(?=$|e)/u,"")}function pi(t){return"es5"===t.trailingComma||"all"===t.trailingComma}function ic(t,e,s){let r=!(null==s||!s.backwards);if(!1===e)return!1;let n=t.charAt(e);if(r){if("\r"===t.charAt(e-1)&&"\n"===n)return e-2;if("\n"===n||"\r"===n||"\u2028"===n||"\u2029"===n)return e-1}else{if("\r"===n&&"\n"===t.charAt(e+1))return e+2;if("\n"===n||"\r"===n||"\u2028"===n||"\u2029"===n)return e+1}return e}var Ft=ic;function oc(t,e,s={}){let r=Rt(t,s.backwards?e-1:e,s);return r!==Ft(t,r,s)}var $t=oc;function ac(t,e){if(!1===e)return!1;if("/"===t.charAt(e)&&"*"===t.charAt(e+1))for(let s=e+2;s<t.length;++s)if("*"===t.charAt(s)&&"/"===t.charAt(s+1))return s+2;return e}var hi=ac;function uc(t,e){return!1!==e&&("/"===t.charAt(e)&&"/"===t.charAt(e+1)?It(t,e):e)}var di=uc;function lc(t,e){let s=null,r=e;for(;r!==s;)s=r,r=bn(t,r),r=hi(t,r),r=Rt(t,r);return r=di(t,r),r=Ft(t,r),!1!==r&&$t(t,r)}var Wt=lc;function cc({node:t,parent:e},s){return!(!t.source||!s.originalText.slice(P(t),P(e.close)).trimEnd().endsWith(","))}function fc(t,e){return Gn(t.grandparent)&&cc(t,e)?",":"value-comment"===t.node.type||"value-comma_group"===t.node.type&&t.node.groups.every(s=>"value-comment"===s.type)||!pi(e)||!t.callParent(()=>Xr(t,e))?"":Ot(",")}function mi(t,e,s){let{node:r,parent:n}=t,i=t.map(({node:y})=>"string"==typeof y?y:s(),"groups");if(n&&zn(n)&&(1===r.groups.length||r.groups.length>0&&"value-comma_group"===r.groups[0].type&&r.groups[0].groups.length>0&&"value-word"===r.groups[0].groups[0].type&&r.groups[0].groups[0].value.startsWith("data:")))return[r.open?s("open"):"",Y(",",i),r.close?s("close"):""];if(!r.open){let y=rs(t);He(i);let x=hc(Y(",",i),2),h=Y(y?S:A,x);return q(y?[S,h]:L([pc(t)?D:"",Se(h)]))}let o=t.map(({node:y,isLast:x,index:h})=>{var b;let d=i[h];Bt(y)&&"value-comma_group"===y.type&&y.groups&&"value-paren_group"!==y.groups[0].type&&"value-paren_group"===(null==(b=y.groups[2])?void 0:b.type)&&H(d)===re&&H(d.contents)===te&&H(d.contents.contents)===se&&(d=L(oe(d)));let m=[d,x?fc(t,e):","];if(!x&&"value-comma_group"===y.type&&ae(y.groups)){let w=$(!1,y.groups,-1);!w.source&&w.close&&(w=w.close),w.source&&Wt(e.originalText,R(w))&&m.push(S)}return m},"groups"),u=si(r,n),a=oi(r,n),c=Xr(t,e),f=a||c&&!u,p=a||u,l=L([r.open?s("open"):"",q([D,Y(A,o)]),D,r.close?s("close"):""],{shouldBreak:f});return p?oe(l):l}function rs(t){return t.match(e=>"value-paren_group"===e.type&&!e.open&&e.groups.some(s=>"value-comma_group"===s.type),(e,s)=>"group"===s&&"value-value"===e.type,(e,s)=>"group"===s&&"value-root"===e.type,(e,s)=>"value"===s&&("css-decl"===e.type&&!e.prop.startsWith("--")||"css-atrule"===e.type&&e.variable))}function pc(t){return t.match(e=>"value-paren_group"===e.type&&!e.open,(e,s)=>"group"===s&&"value-value"===e.type,(e,s)=>"group"===s&&"value-root"===e.type,(e,s)=>"value"===s&&"css-decl"===e.type)}function hc(t,e){let s=[];for(let r=0;r<t.length;r+=e)s.push(t.slice(r,r+e));return s}function dc(t,e,s){let r=[];return t.each(()=>{let{node:n,previous:i}=t;if("css-comment"===(null==i?void 0:i.type)&&"prettier-ignore"===i.text.trim()?r.push(e.originalText.slice(P(n),R(n))):r.push(s()),t.isLast)return;let{next:o}=t;"css-comment"===o.type&&!$t(e.originalText,P(o),{backwards:!0})&&!Te(n)||"css-atrule"===o.type&&"else"===o.name&&"css-comment"!==n.type?r.push(" "):(r.push(e.__isHTMLStyleAttribute?A:S),Wt(e.originalText,R(n))&&!Te(n)&&r.push(S))},"nodes"),r}var Pe=dc;function mc(t,e,s){var n,i,o,u,a,c;let{node:r}=t;switch(r.type){case"front-matter":return[r.raw,S];case"css-root":{let f=Pe(t,e,s),p=r.raws.after.trim();return p.startsWith(";")&&(p=p.slice(1).trim()),[r.frontMatter?[s("frontMatter"),S]:"",f,p?` ${p}`:"",r.nodes.length>0?S:""]}case"css-comment":{let f=r.inline||r.raws.inline,p=e.originalText.slice(P(r),R(r));return f?p.trimEnd():p}case"css-rule":return[s("selector"),r.important?" !important":"",r.nodes?["selector-unknown"===(null==(n=r.selector)?void 0:n.type)&&Ne(r.selector.value)?A:r.selector?" ":"","{",r.nodes.length>0?q([S,Pe(t,e,s)]):"",S,"}",jn(r)?";":""]:";"];case"css-decl":{let f=t.parent,{between:p}=r.raws,l=p.trim(),y=":"===l,x="string"==typeof r.value&&/^ *$/u.test(r.value),h="string"==typeof r.value?r.value:s("value");return h=ti(r)?tn(h):h,!y&&Ne(l)&&!(null!=(o=null==(i=r.value)?void 0:i.group)&&o.group&&t.call(()=>rs(t),"value","group","group"))&&(h=q([S,oe(h)])),[E(!1,r.raws.before,/[\s;]/gu,""),"css-atrule"===f.type&&f.variable||Yn(t)?r.prop:ue(r.prop),l.startsWith("//")?" ":"",l,r.extend||x?"":" ","less"===e.parser&&r.extend&&r.selector?["extend(",s("selector"),")"]:"",h,r.raws.important?r.raws.important.replace(/\s*!\s*important/iu," !important"):r.important?" !important":"",r.raws.scssDefault?r.raws.scssDefault.replace(/\s*!default/iu," !default"):r.scssDefault?" !default":"",r.raws.scssGlobal?r.raws.scssGlobal.replace(/\s*!global/iu," !global"):r.scssGlobal?" !global":"",r.nodes?[" {",q([D,Pe(t,e,s)]),D,"}"]:Zn(r)&&!f.raws.semicolon&&";"!==e.originalText[R(r)-1]?"":e.__isHTMLStyleAttribute&&t.isLast?Ot(";"):";"]}case"css-atrule":{let f=t.parent,p=Dt(r)&&!f.raws.semicolon&&";"!==e.originalText[R(r)-1];if("less"===e.parser){if(r.mixin)return[s("selector"),r.important?" !important":"",p?"":";"];if(r.function)return[r.name,"string"==typeof r.params?r.params:s("params"),p?"":";"];if(r.variable)return["@",r.name,": ",r.value?s("value"):"",r.raws.between.trim()?r.raws.between.trim()+" ":"",r.nodes?["{",q([r.nodes.length>0?D:"",Pe(t,e,s)]),D,"}"]:"",p?"":";"]}let l="import"===r.name&&"value-unknown"===(null==(u=r.params)?void 0:u.type)&&r.params.value.endsWith(";");return["@",Jr(r)||r.name.endsWith(":")||Dt(r)?r.name:ue(r.name),r.params?[Jr(r)?"":Dt(r)?""===r.raws.afterName?"":r.name.endsWith(":")?" ":/^\s*\n\s*\n/u.test(r.raws.afterName)?[S,S]:/^\s*\n/u.test(r.raws.afterName)?S:" ":" ","string"==typeof r.params?r.params:s("params")]:"",r.selector?q([" ",s("selector")]):"",r.value?L([" ",s("value"),tt(r,e)?ri(r)?" ":A:""]):"else"===r.name?" ":"",r.nodes?[tt(r,e)?"":r.selector&&!r.selector.nodes&&"string"==typeof r.selector.value&&Ne(r.selector.value)||!r.selector&&"string"==typeof r.params&&Ne(r.params)?A:" ","{",q([r.nodes.length>0?D:"",Pe(t,e,s)]),D,"}"]:p||l?"":";"]}case"media-query-list":{let f=[];return t.each(({node:p})=>{"media-query"===p.type&&""===p.value||f.push(s())},"nodes"),L(q(Y(A,f)))}case"media-query":return[Y(" ",t.map(s,"nodes")),t.isLast?"":","];case"media-type":case"media-value":return me(V(r.value,e));case"media-feature-expression":return r.nodes?["(",...t.map(s,"nodes"),")"]:r.value;case"media-feature":return ue(V(E(!1,r.value,/ +/gu," "),e));case"media-colon":return[r.value," "];case"media-keyword":case"selector-string":return V(r.value,e);case"media-url":return V(E(!1,E(!1,r.value,/^url\(\s+/giu,"url("),/\s+\)$/gu,")"),e);case"media-unknown":case"selector-comment":case"selector-nesting":case"value-paren":case"value-operator":case"value-unicode-range":case"value-unknown":return r.value;case"selector-root":return L([Oe(t,"custom-selector")?[t.findAncestor(f=>"css-atrule"===f.type).customSelector,A]:"",Y([",",Oe(t,["extend","custom-selector","nest"])?A:S],t.map(s,"nodes"))]);case"selector-selector":return L((r.nodes.length>1?q:p=>p)(t.map(s,"nodes")));case"selector-tag":return[r.namespace?[!0===r.namespace?"":r.namespace.trim(),"|"]:"","selector-nesting"===(null==(a=t.previous)?void 0:a.type)?r.value:me(Wn(t,r.value)?r.value.toLowerCase():r.value)];case"selector-id":return["#",r.value];case"selector-class":return[".",me(V(r.value,e))];case"selector-attribute":return["[",r.namespace?[!0===r.namespace?"":r.namespace.trim(),"|"]:"",r.attribute.trim(),r.operator??"",r.value?fi(V(r.value.trim(),e),e):"",r.insensitive?" i":"","]"];case"selector-combinator":if("+"===r.value||">"===r.value||"~"===r.value||">>>"===r.value){let l=t.parent;return["selector-selector"===l.type&&l.nodes[0]===r?"":A,r.value,t.isLast?"":" "]}return[r.value.trim().startsWith("(")?A:"",me(V(r.value.trim(),e))||A];case"selector-universal":return[r.namespace?[!0===r.namespace?"":r.namespace.trim(),"|"]:"",r.value];case"selector-pseudo":return[ue(r.value),ae(r.nodes)?L(["(",q([D,Y([",",A],t.map(s,"nodes"))]),D,")"]):""];case"selector-unknown":{let f=t.findAncestor(y=>"css-rule"===y.type);if(null!=f&&f.isSCSSNesterProperty)return me(V(ue(r.value),e));let p=t.parent;if(null!=(c=p.raws)&&c.selector){let y=P(p),x=y+p.raws.selector.length;return e.originalText.slice(y,x).trim()}let l=t.grandparent;if("value-paren_group"===p.type&&"value-func"===(null==l?void 0:l.type)&&"selector"===l.value){let y=R(p.open)+1,x=P(p.close),h=e.originalText.slice(y,x).trim();return Ne(h)?[Ke,h]:h}return r.value}case"value-value":case"value-root":return s("group");case"value-comment":return e.originalText.slice(P(r),R(r));case"value-comma_group":return ai(t,e,s);case"value-paren_group":return mi(t,e,s);case"value-func":return[r.value,Oe(t,"supports")&&ni(r)?" ":"",s("group")];case"value-number":return[ts(r.value),li(r.unit)];case"value-word":return r.isColor&&r.isHex||$n(r.value)?r.value.toLowerCase():r.value;case"value-colon":{let{previous:f}=t;return L([r.value,"string"==typeof(null==f?void 0:f.value)&&f.value.endsWith("\\")||Ce(t,"url")?"":A])}case"value-string":return Nt(r.raws.quote+r.value+r.raws.quote,e);case"value-atword":return["@",r.value];default:throw new pn(r,"PostCSS")}}var yc={print:mc,embed:gn,insertPragma:Un,massageAstNode:dn,getVisitorKeys:xn},yi=yc,gi=[{linguistLanguageId:50,name:"CSS",type:"markup",tmScope:"source.css",aceMode:"css",codemirrorMode:"css",codemirrorMimeType:"text/css",color:"#563d7c",extensions:[".css",".wxss"],parsers:["css"],vscodeLanguageIds:["css"]},{linguistLanguageId:262764437,name:"PostCSS",type:"markup",color:"#dc3a0c",tmScope:"source.postcss",group:"CSS",extensions:[".pcss",".postcss"],aceMode:"text",parsers:["css"],vscodeLanguageIds:["postcss"]},{linguistLanguageId:198,name:"Less",type:"markup",color:"#1d365d",aliases:["less-css"],extensions:[".less"],tmScope:"source.css.less",aceMode:"less",codemirrorMode:"css",codemirrorMimeType:"text/css",parsers:["less"],vscodeLanguageIds:["less"]},{linguistLanguageId:329,name:"SCSS",type:"markup",color:"#c6538c",tmScope:"source.css.scss",aceMode:"scss",codemirrorMode:"css",codemirrorMimeType:"text/x-scss",extensions:[".scss"],parsers:["scss"],vscodeLanguageIds:["scss"]}],vi={singleQuote:{category:"Common",type:"boolean",default:!1,description:"Use single quotes instead of double quotes."}},Js={};Zs(Js,{css:()=>Ny,less:()=>Py,scss:()=>Ry});var ol=xe(gt(),1),al=xe(To(),1),ul=xe(oa(),1);function sp(t,e){let s=new SyntaxError(t+" ("+e.loc.start.line+":"+e.loc.start.column+")");return Object.assign(s,e)}var aa=sp,da=xe(ha(),1);function X(t,e,s){if(t&&"object"==typeof t){delete t.parent;for(let r in t)X(t[r],e,s),"type"===r&&"string"==typeof t[r]&&!t[r].startsWith(e)&&(!s||!s.test(t[r]))&&(t[r]=e+t[r])}return t}function Ls(t){if(t&&"object"==typeof t){delete t.parent;for(let e in t)Ls(t[e]);!Array.isArray(t)&&t.value&&!t.type&&(t.type="unknown")}return t}var mp=da.default.default;function yp(t){let e;try{e=mp(t)}catch{return{type:"selector-unknown",value:t}}return X(Ls(e),"media-")}var ma=yp,lu=xe(uu(),1);function Nm(t){if(/\/\/|\/\*/u.test(t))return{type:"selector-unknown",value:t.trim()};let e;try{new lu.default(s=>{e=s}).process(t)}catch{return{type:"selector-unknown",value:t}}return X(e,"selector-")}var ee=Nm,rl=xe(Qu(),1),wy=t=>{for(;t.parent;)t=t.parent;return t},Fr=wy;function vy(t){return Fr(t).text.slice(t.group.open.sourceIndex+1,t.group.close.sourceIndex).trim()}var Ju=vy;function xy(t){if(ae(t))for(let e=t.length-1;e>0;e--)if("word"===t[e].type&&"{"===t[e].value&&"word"===t[e-1].type&&t[e-1].value.endsWith("#"))return!0;return!1}var Xu=xy;function by(t){return t.some(e=>"string"===e.type||"func"===e.type&&!e.value.endsWith("\\"))}var Zu=by;function _y(t,e){return!("scss"!==e.parser||"word"!==(null==t?void 0:t.type)||!t.value.startsWith("$"))}var el=_y,tl=t=>"paren"===t.type&&")"===t.value;function Ey(t,e){var a;let{nodes:s}=t,r={open:null,close:null,groups:[],type:"paren_group"},n=[r],i=r,o={groups:[],type:"comma_group"},u=[o];for(let c=0;c<s.length;++c){let f=s[c];if("scss"===e.parser&&"number"===f.type&&".."===f.unit&&f.value.endsWith(".")&&(f.value=f.value.slice(0,-1),f.unit="..."),"func"===f.type&&"selector"===f.value&&(f.group.groups=[ee(Fr(t).text.slice(f.group.open.sourceIndex+1,f.group.close.sourceIndex))]),"func"===f.type&&"url"===f.value){let p=(null==(a=f.group)?void 0:a.groups)??[],l=[];for(let y=0;y<p.length;y++){let x=p[y];"comma_group"===x.type?l=[...l,...x.groups]:l.push(x)}(Xu(l)||!Zu(l)&&!el(l[0],e))&&(f.group.groups=[Ju(f)])}if("paren"===f.type&&"("===f.value)r={open:f,close:null,groups:[],type:"paren_group"},n.push(r),o={groups:[],type:"comma_group"},u.push(o);else if(tl(f)){if(o.groups.length>0&&r.groups.push(o),r.close=f,1===u.length)throw new Error("Unbalanced parenthesis");u.pop(),o=$(!1,u,-1),o.groups.push(r),n.pop(),r=$(!1,n,-1)}else if("comma"===f.type){if(c===s.length-3&&"comment"===s[c+1].type&&tl(s[c+2]))continue;r.groups.push(o),o={groups:[],type:"comma_group"},u[u.length-1]=o}else o.groups.push(f)}return o.groups.length>0&&r.groups.push(o),i}function $r(t){return"paren_group"===t.type&&!t.open&&!t.close&&1===t.groups.length||"comma_group"===t.type&&1===t.groups.length?$r(t.groups[0]):"paren_group"===t.type||"comma_group"===t.type?{...t,groups:t.groups.map($r)}:t}function sl(t,e){if(t&&"object"==typeof t)for(let s in t)"parent"!==s&&(sl(t[s],e),"nodes"===s&&(t.group=$r(Ey(t,e)),delete t[s]));return t}function ky(t,e){if("less"===e.parser&&t.startsWith("~`"))return{type:"value-unknown",value:t};let s=null;try{s=new rl.default(t,{loose:!0}).parse()}catch{return{type:"value-unknown",value:t}}return s.text=t,X(sl(s,e),"value-",/^selector-/u)}var pe=ky,Sy=new Set(["import","use","forward"]);function Ty(t){return Sy.has(t)}var nl=Ty;function Cy(t,e){return!("scss"!==e.parser||!t.selector)&&t.selector.replace(/\/\*.*?\*\//u,"").replace(/\/\/.*\n/u,"").trim().endsWith(":")}var il=Cy,Oy=/(\s*)(!default).*$/u,Ay=/(\s*)(!global).*$/u;function ll(t,e){var s,r;if(t&&"object"==typeof t){delete t.parent;for(let u in t)ll(t[u],e);if(!t.type)return t;if(t.raws??(t.raws={}),"css-decl"===t.type&&"string"==typeof t.prop&&t.prop.startsWith("--")&&"string"==typeof t.value&&t.value.startsWith("{")){let u;if(t.value.trimEnd().endsWith("}")){let p,l,a=e.originalText.slice(0,t.source.start.offset),c="a".repeat(t.prop.length)+e.originalText.slice(t.source.start.offset+t.prop.length,t.source.end.offset),f=E(!1,a,/[^\n]/gu," ")+c;p="scss"===e.parser?pl:"less"===e.parser?fl:cl;try{l=p(f,{...e})}catch{}1===(null==(s=null==l?void 0:l.nodes)?void 0:s.length)&&"css-rule"===l.nodes[0].type&&(u=l.nodes[0].nodes)}return t.value=u?{type:"css-rule",nodes:u}:{type:"value-unknown",value:t.raws.value.raw},t}let n="";"string"==typeof t.selector&&(n=t.raws.selector?t.raws.selector.scss??t.raws.selector.raw:t.selector,t.raws.between&&t.raws.between.trim().length>0&&(n+=t.raws.between),t.raws.selector=n);let i="";"string"==typeof t.value&&(i=t.raws.value?t.raws.value.scss??t.raws.value.raw:t.value,t.raws.value=i.trim());let o="";if("string"==typeof t.params&&(o=t.raws.params?t.raws.params.scss??t.raws.params.raw:t.params,t.raws.afterName&&t.raws.afterName.trim().length>0&&(o=t.raws.afterName+o),t.raws.between&&t.raws.between.trim().length>0&&(o+=t.raws.between),o=o.trim(),t.raws.params=o),n.trim().length>0)return n.startsWith("@")&&n.endsWith(":")?t:t.mixin?(t.selector=pe(n,e),t):(il(t,e)&&(t.isSCSSNesterProperty=!0),t.selector=ee(n),t);if(i.trim().length>0){let u=i.match(Oy);u&&(i=i.slice(0,u.index),t.scssDefault=!0,"!default"!==u[0].trim()&&(t.raws.scssDefault=u[0]));let a=i.match(Ay);if(a&&(i=i.slice(0,a.index),t.scssGlobal=!0,"!global"!==a[0].trim()&&(t.raws.scssGlobal=a[0])),i.startsWith("progid:"))return{type:"value-unknown",value:i};t.value=pe(i,e)}if("less"===e.parser&&"css-decl"===t.type&&i.startsWith("extend(")&&(t.extend||(t.extend=":"===t.raws.between),t.extend&&!t.selector&&(delete t.value,t.selector=ee(i.slice(7,-1)))),"css-atrule"===t.type){if("less"===e.parser){if(t.mixin){let u=t.raws.identifier+t.name+t.raws.afterName+t.raws.params;return t.selector=ee(u),delete t.params,t}if(t.function)return t}if("css"===e.parser&&"custom-selector"===t.name){let u=t.params.match(/:--\S+\s+/u)[0].trim();return t.customSelector=u,t.selector=ee(t.params.slice(u.length).trim()),delete t.params,t}if("less"===e.parser){if(t.name.includes(":")&&!t.params){t.variable=!0;let u=t.name.split(":");t.name=u[0],t.value=pe(u.slice(1).join(":"),e)}if(!["page","nest","keyframes"].includes(t.name)&&":"===(null==(r=t.params)?void 0:r[0])){t.variable=!0;let u=t.params.slice(1);u&&(t.value=pe(u,e)),t.raws.afterName+=":"}if(t.variable)return delete t.params,t.value||delete t.value,t}}if("css-atrule"===t.type&&o.length>0){let{name:u}=t,a=t.name.toLowerCase();return"warn"===u||"error"===u?(t.params={type:"media-unknown",value:o},t):"extend"===u||"nest"===u?(t.selector=ee(o),delete t.params,t):"at-root"===u?(/^\(\s*(?:without|with)\s*:.+\)$/su.test(o)?t.params=pe(o,e):(t.selector=ee(o),delete t.params),t):nl(a)?(t.import=!0,delete t.filename,t.params=pe(o,e),t):["namespace","supports","if","else","for","each","while","debug","mixin","include","function","return","define-mixin","add-mixin"].includes(u)?(o=o.replace(/(\$\S+?)(\s+)?\.{3}/u,"$1...$2"),o=o.replace(/^(?!if)(\S+)(\s+)\(/u,"$1($2"),t.value=pe(o,e),delete t.params,t):["media","custom-media"].includes(a)?o.includes("#{")?{type:"media-unknown",value:o}:(t.params=ma(o),t):(t.params=o,t)}}return t}function Ks(t,e,s){let i,r=Ze(e),{frontMatter:n}=r;e=r.content;try{i=t(e,{map:!1})}catch(o){let{name:u,reason:a,line:c,column:f}=o;throw"number"!=typeof c?o:aa(`${u}: ${a}`,{loc:{start:{line:c,column:f}},cause:o})}return s.originalText=e,i=ll(X(i,"css-"),s),Kr(i,e),n&&(n.source={startOffset:0,endOffset:n.raw.length},i.frontMatter=n),i}function cl(t,e={}){return Ks(ol.default.default,t,e)}function fl(t,e={}){return Ks(s=>al.default.parse(kn(s)),t,e)}function pl(t,e={}){return Ks(ul.default,t,e)}var Qs={astFormat:"postcss",hasPragma:Mn,locStart:P,locEnd:R},Ny={...Qs,parse:cl},Py={...Qs,parse:fl},Ry={...Qs,parse:pl},Iy={postcss:yi};return wl(qy)}();return i.default||i}()},710:(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=function s(a,o,h){function u(r,e){if(!o[r]){if(!a[r]){if(l)return l(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var i=o[r]={exports:{}};a[r][0].call(i.exports,function(e){return u(a[r][1][e]||e)},i,i.exports,s,a,o,h)}return o[r].exports}for(var l=void 0,e=0;e<h.length;e++)u(h[e]);return u}({1:[function(e,t,r){var d=e("./utils"),c=e("./support"),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(e){for(var t,r,n,i,s,a,o,h=[],u=0,l=e.length,f=l,c="string"!==d.getTypeOf(e);u<e.length;)f=l-u,n=c?(t=e[u++],r=u<l?e[u++]:0,u<l?e[u++]:0):(t=e.charCodeAt(u++),r=u<l?e.charCodeAt(u++):0,u<l?e.charCodeAt(u++):0),i=t>>2,s=(3&t)<<4|r>>4,a=1<f?(15&r)<<2|n>>6:64,o=2<f?63&n:64,h.push(p.charAt(i)+p.charAt(s)+p.charAt(a)+p.charAt(o));return h.join("")},r.decode=function(e){var t,r,n,i,s,a,o=0,h=0,u="data:";if(e.substr(0,u.length)===u)throw new Error("Invalid base64 input, it looks like a data url.");var l,f=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===p.charAt(64)&&f--,e.charAt(e.length-2)===p.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(l=c.uint8array?new Uint8Array(0|f):new Array(0|f);o<e.length;)t=p.indexOf(e.charAt(o++))<<2|(i=p.indexOf(e.charAt(o++)))>>4,r=(15&i)<<4|(s=p.indexOf(e.charAt(o++)))>>2,n=(3&s)<<6|(a=p.indexOf(e.charAt(o++))),l[h++]=t,64!==s&&(l[h++]=r),64!==a&&(l[h++]=n);return l}},{"./support":30,"./utils":32}],2:[function(e,t,r){var n=e("./external"),i=e("./stream/DataWorker"),s=e("./stream/Crc32Probe"),a=e("./stream/DataLengthProbe");function o(e,t,r,n,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=r,this.compression=n,this.compressedContent=i}o.prototype={getContentWorker:function(){var e=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(e,t,r){return e.pipe(new s).pipe(new a("uncompressedSize")).pipe(t.compressWorker(r)).pipe(new a("compressedSize")).withStreamInfo("compression",t)},t.exports=o},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,r){var n=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,r){var n=e("./utils"),o=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==n.getTypeOf(e)?function(e,t,r,n){var i=o,s=n+r;e^=-1;for(var a=n;a<s;a++)e=e>>>8^i[255&(e^t[a])];return-1^e}(0|t,e,e.length,0):function(e,t,r,n){var i=o,s=n+r;e^=-1;for(var a=n;a<s;a++)e=e>>>8^i[255&(e^t.charCodeAt(a))];return-1^e}(0|t,e,e.length,0):0}},{"./utils":32}],5:[function(e,t,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,t,r){var n=null;n="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:n}},{lie:37}],7:[function(e,t,r){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),s=e("./utils"),a=e("./stream/GenericWorker"),o=n?"uint8array":"array";function h(e,t){a.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}r.magic="\b\0",s.inherits(h,a),h.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(o,e.data),!1)},h.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},r.compressWorker=function(e){return new h("Deflate",e)},r.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,r){function A(e,t){var r,n="";for(r=0;r<t;r++)n+=String.fromCharCode(255&e),e>>>=8;return n}function n(e,t,r,n,i,s){var a,o,h=e.file,u=e.compression,l=s!==O.utf8encode,f=I.transformTo("string",s(h.name)),c=I.transformTo("string",O.utf8encode(h.name)),d=h.comment,p=I.transformTo("string",s(d)),m=I.transformTo("string",O.utf8encode(d)),_=c.length!==h.name.length,g=m.length!==d.length,b="",v="",y="",w=h.dir,k=h.date,x={crc32:0,compressedSize:0,uncompressedSize:0};t&&!r||(x.crc32=e.crc32,x.compressedSize=e.compressedSize,x.uncompressedSize=e.uncompressedSize);var S=0;t&&(S|=8),l||!_&&!g||(S|=2048);var z=0,C=0;w&&(z|=16),"UNIX"===i?(C=798,z|=function(e,t){var r=e;return e||(r=t?16893:33204),(65535&r)<<16}(h.unixPermissions,w)):(C=20,z|=function(e){return 63&(e||0)}(h.dosPermissions)),a=k.getUTCHours(),a<<=6,a|=k.getUTCMinutes(),a<<=5,a|=k.getUTCSeconds()/2,o=k.getUTCFullYear()-1980,o<<=4,o|=k.getUTCMonth()+1,o<<=5,o|=k.getUTCDate(),_&&(v=A(1,1)+A(B(f),4)+c,b+="up"+A(v.length,2)+v),g&&(y=A(1,1)+A(B(p),4)+m,b+="uc"+A(y.length,2)+y);var E="";return E+="\n\0",E+=A(S,2),E+=u.magic,E+=A(a,2),E+=A(o,2),E+=A(x.crc32,4),E+=A(x.compressedSize,4),E+=A(x.uncompressedSize,4),E+=A(f.length,2),E+=A(b.length,2),{fileRecord:R.LOCAL_FILE_HEADER+E+f+b,dirRecord:R.CENTRAL_FILE_HEADER+A(C,2)+E+A(p.length,2)+"\0\0\0\0"+A(z,4)+A(n,4)+f+b+p}}var I=e("../utils"),i=e("../stream/GenericWorker"),O=e("../utf8"),B=e("../crc32"),R=e("../signature");function s(e,t,r,n){i.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}I.inherits(s,i),s.prototype.push=function(e){var t=e.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,i.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:r?(t+100*(r-n-1))/r:100}}))},s.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var r=n(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},s.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,r=n(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),t)this.push({data:function(e){return R.DATA_DESCRIPTOR+A(e.crc32,4)+A(e.compressedSize,4)+A(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},s.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var r=this.bytesWritten-e,n=function(e,t,r,n,i){var s=I.transformTo("string",i(n));return R.CENTRAL_DIRECTORY_END+"\0\0\0\0"+A(e,2)+A(e,2)+A(t,4)+A(r,4)+A(s.length,2)+s}(this.dirRecords.length,r,e,this.zipComment,this.encodeFileName);this.push({data:n,meta:{percent:100}})},s.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},s.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(e){t.error(e)}),this},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},s.prototype.error=function(e){var t=this._sources;if(!i.prototype.error.call(this,e))return!1;for(var r=0;r<t.length;r++)try{t[r].error(e)}catch(e){}return!0},s.prototype.lock=function(){i.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=s},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,r){var u=e("../compressions"),n=e("./ZipFileWorker");r.generateWorker=function(e,a,t){var o=new n(a.streamFiles,t,a.platform,a.encodeFileName),h=0;try{e.forEach(function(e,t){h++;var r=function(e,t){var r=e||t,n=u[r];if(!n)throw new Error(r+" is not a valid compression method !");return n}(t.options.compression,a.compression),n=t.options.compressionOptions||a.compressionOptions||{},i=t.dir,s=t.date;t._compressWorker(r,n).withStreamInfo("file",{name:e,dir:i,date:s,comment:t.comment||"",unixPermissions:t.unixPermissions,dosPermissions:t.dosPermissions}).pipe(o)}),o.entriesCount=h}catch(e){o.error(e)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,r){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new n;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(n.prototype=e("./object")).loadAsync=e("./load"),n.support=e("./support"),n.defaults=e("./defaults"),n.version="3.10.1",n.loadAsync=function(e,t){return(new n).loadAsync(e,t)},n.external=e("./external"),t.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,r){var u=e("./utils"),i=e("./external"),n=e("./utf8"),s=e("./zipEntries"),a=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function f(n){return new i.Promise(function(e,t){var r=n.decompressed.getContentWorker().pipe(new a);r.on("error",function(e){t(e)}).on("end",function(){r.streamInfo.crc32!==n.decompressed.crc32?t(new Error("Corrupted zip : CRC32 mismatch")):e()}).resume()})}t.exports=function(e,o){var h=this;return o=u.extend(o||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:n.utf8decode}),l.isNode&&l.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):u.prepareContent("the loaded zip file",e,!0,o.optimizedBinaryString,o.base64).then(function(e){var t=new s(o);return t.load(e),t}).then(function(e){var t=[i.Promise.resolve(e)],r=e.files;if(o.checkCRC32)for(var n=0;n<r.length;n++)t.push(f(r[n]));return i.Promise.all(t)}).then(function(e){for(var t=e.shift(),r=t.files,n=0;n<r.length;n++){var i=r[n],s=i.fileNameStr,a=u.resolve(i.fileNameStr);h.file(a,i.decompressed,{binary:!0,optimizedBinaryString:!0,date:i.date,dir:i.dir,comment:i.fileCommentStr.length?i.fileCommentStr:null,unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions,createFolders:o.createFolders}),i.dir||(h.file(a).unsafeOriginalName=s)}return t.zipComment.length&&(h.comment=t.zipComment),h})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,r){var n=e("../utils"),i=e("../stream/GenericWorker");function s(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}n.inherits(s,i),s.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",function(e){t.push({data:e,meta:{percent:0}})}).on("error",function(e){t.isPaused?this.generatedError=e:t.error(e)}).on("end",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},s.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,r){var i=e("readable-stream").Readable;function n(e,t,r){i.call(this,t),this._helper=e;var n=this;e.on("data",function(e,t){n.push(e)||n._helper.pause(),r&&r(t)}).on("error",function(e){n.emit("error",e)}).on("end",function(){n.push(null)})}e("../utils").inherits(n,i),n.prototype._read=function(){this._helper.resume()},t.exports=n},{"../utils":32,"readable-stream":16}],14:[function(e,t,r){t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,r){function s(e,t,r){var n,i=u.getTypeOf(t),s=u.extend(r||{},f);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=g(e)),s.createFolders&&(n=_(e))&&b.call(this,n,!0);var a="string"===i&&!1===s.binary&&!1===s.base64;r&&void 0!==r.binary||(s.binary=!a),(t instanceof c&&0===t.uncompressedSize||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t="",s.compression="STORE",i="string");var o=null;o=t instanceof c||t instanceof l?t:p.isNode&&p.isStream(t)?new m(e,t):u.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var h=new d(e,o,s);this.files[e]=h}var i=e("./utf8"),u=e("./utils"),l=e("./stream/GenericWorker"),a=e("./stream/StreamHelper"),f=e("./defaults"),c=e("./compressedObject"),d=e("./zipObject"),o=e("./generate"),p=e("./nodejsUtils"),m=e("./nodejs/NodejsStreamInputAdapter"),_=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},g=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},b=function(e,t){return t=void 0!==t?t:f.createFolders,e=g(e),this.files[e]||s.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function h(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var n={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,r,n;for(t in this.files)n=this.files[t],(r=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(r,n)},filter:function(r){var n=[];return this.forEach(function(e,t){r(e,t)&&n.push(t)}),n},file:function(e,t,r){if(1!==arguments.length)return e=this.root+e,s.call(this,e,t,r),this;if(h(e)){var n=e;return this.filter(function(e,t){return!t.dir&&n.test(e)})}var i=this.files[this.root+e];return i&&!i.dir?i:null},folder:function(r){if(!r)return this;if(h(r))return this.filter(function(e,t){return t.dir&&r.test(e)});var e=this.root+r,t=b.call(this,e),n=this.clone();return n.root=t.name,n},remove:function(r){r=this.root+r;var e=this.files[r];if(e||("/"!==r.slice(-1)&&(r+="/"),e=this.files[r]),e&&!e.dir)delete this.files[r];else for(var t=this.filter(function(e,t){return t.name.slice(0,r.length)===r}),n=0;n<t.length;n++)delete this.files[t[n].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,r={};try{if((r=u.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");u.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var n=r.comment||this.comment||"";t=o.generateWorker(this,r,n)}catch(e){(t=new l("error")).error(e)}return new a(t,r.type||"string",r.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=n},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,r){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,r){var n=e("./DataReader");function i(e){n.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,n),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===t&&this.data[s+1]===r&&this.data[s+2]===n&&this.data[s+3]===i)return s-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),s=this.readData(4);return t===s[0]&&r===s[1]&&n===s[2]&&i===s[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,r){var n=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,r){var n=e("./Uint8ArrayReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,r){var n=e("./DataReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,r){var n=e("./ArrayReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,r){var n=e("../utils"),i=e("../support"),s=e("./ArrayReader"),a=e("./StringReader"),o=e("./NodeBufferReader"),h=e("./Uint8ArrayReader");t.exports=function(e){var t=n.getTypeOf(e);return n.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new o(e):i.uint8array?new h(n.transformTo("uint8array",e)):new s(n.transformTo("array",e)):new a(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,r){var n=e("./GenericWorker"),i=e("../utils");function s(e){n.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(s,n),s.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,r){var n=e("./GenericWorker"),i=e("../crc32");function s(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(s,n),s.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,r){var n=e("../utils"),i=e("./GenericWorker");function s(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}n.inherits(s,i),s.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,r){var n=e("../utils"),i=e("./GenericWorker");function s(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=n.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}n.inherits(s,i),s.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,r){function n(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var r=0;r<this._listeners[e].length;r++)this._listeners[e][r].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.end()}),e.on("error",function(e){t.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=n},{}],29:[function(e,t,r){var h=e("../utils"),i=e("./ConvertWorker"),s=e("./GenericWorker"),u=e("../base64"),n=e("../support"),a=e("../external"),o=null;if(n.nodestream)try{o=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function l(e,o){return new a.Promise(function(t,r){var n=[],i=e._internalType,s=e._outputType,a=e._mimeType;e.on("data",function(e,t){n.push(e),o&&o(t)}).on("error",function(e){n=[],r(e)}).on("end",function(){try{var e=function(e,t,r){switch(e){case"blob":return h.newBlob(h.transformTo("arraybuffer",t),r);case"base64":return u.encode(t);default:return h.transformTo(e,t)}}(s,function(e,t){var r,n=0,i=null,s=0;for(r=0;r<t.length;r++)s+=t[r].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(i=new Uint8Array(s),r=0;r<t.length;r++)i.set(t[r],n),n+=t[r].length;return i;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(i,n),a);t(e)}catch(e){r(e)}n=[]}).resume()})}function f(e,t,r){var n=t;switch(t){case"blob":case"arraybuffer":n="uint8array";break;case"base64":n="string"}try{this._internalType=n,this._outputType=t,this._mimeType=r,h.checkSupport(n),this._worker=e.pipe(new i(n)),e.lock()}catch(e){this._worker=new s("error"),this._worker.error(e)}}f.prototype={accumulate:function(e){return l(this,e)},on:function(e,t){var r=this;return"data"===e?this._worker.on(e,function(e){t.call(r,e.data,e.meta)}):this._worker.on(e,function(){h.delay(t,arguments,r)}),this},resume:function(){return h.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(h.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new o(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer="undefined"!=typeof Buffer,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=0===new Blob([n],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),r.blob=0===i.getBlob("application/zip").size}catch(e){r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch(e){r.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,s){for(var o=e("./utils"),h=e("./support"),r=e("./nodejsUtils"),n=e("./stream/GenericWorker"),u=new Array(256),i=0;i<256;i++)u[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;function a(){n.call(this,"utf-8 decode"),this.leftOver=null}function l(){n.call(this,"utf-8 encode")}u[254]=u[254]=1,s.utf8encode=function(e){return h.nodebuffer?r.newBufferFrom(e,"utf-8"):function(e){var t,r,n,i,s,a=e.length,o=0;for(i=0;i<a;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=h.uint8array?new Uint8Array(o):new Array(o),i=s=0;s<o;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),r<128?t[s++]=r:(r<2048?t[s++]=192|r>>>6:(r<65536?t[s++]=224|r>>>12:(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63),t[s++]=128|r>>>6&63),t[s++]=128|63&r);return t}(e)},s.utf8decode=function(e){return h.nodebuffer?o.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,r,n,i,s=e.length,a=new Array(2*s);for(t=r=0;t<s;)if((n=e[t++])<128)a[r++]=n;else if(4<(i=u[n]))a[r++]=65533,t+=i-1;else{for(n&=2===i?31:3===i?15:7;1<i&&t<s;)n=n<<6|63&e[t++],i--;1<i?a[r++]=65533:n<65536?a[r++]=n:(n-=65536,a[r++]=55296|n>>10&1023,a[r++]=56320|1023&n)}return a.length!==r&&(a.subarray?a=a.subarray(0,r):a.length=r),o.applyFromCharCode(a)}(e=o.transformTo(h.uint8array?"uint8array":"array",e))},o.inherits(a,n),a.prototype.processChunk=function(e){var t=o.transformTo(h.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(h.uint8array){var r=t;(t=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),t.set(r,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var n=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+u[e[r]]>t?r:t}(t),i=t;n!==t.length&&(h.uint8array?(i=t.subarray(0,n),this.leftOver=t.subarray(n,t.length)):(i=t.slice(0,n),this.leftOver=t.slice(n,t.length))),this.push({data:s.utf8decode(i),meta:e.meta})},a.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=a,o.inherits(l,n),l.prototype.processChunk=function(e){this.push({data:s.utf8encode(e.data),meta:e.meta})},s.Utf8EncodeWorker=l},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,a){var o=e("./support"),h=e("./base64"),r=e("./nodejsUtils"),u=e("./external");function n(e){return e}function l(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}e("setimmediate"),a.newBlob=function(t,r){a.checkSupport("blob");try{return new Blob([t],{type:r})}catch(e){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(t),n.getBlob(r)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var i={stringifyByChunk:function(e,t,r){var n=[],i=0,s=e.length;if(s<=r)return String.fromCharCode.apply(null,e);for(;i<s;)"array"===t||"nodebuffer"===t?n.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+r,s)))):n.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+r,s)))),i+=r;return n.join("")},stringifyByChar:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&1===String.fromCharCode.apply(null,r.allocBuffer(1)).length}catch(e){return!1}}()}};function s(e){var t=65536,r=a.getTypeOf(e),n=!0;if("uint8array"===r?n=i.applyCanBeUsed.uint8array:"nodebuffer"===r&&(n=i.applyCanBeUsed.nodebuffer),n)for(;1<t;)try{return i.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return i.stringifyByChar(e)}function f(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}a.applyFromCharCode=s;var c={};c.string={string:n,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return c.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,r.allocBuffer(e.length))}},c.array={string:s,array:n,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return r.newBufferFrom(e)}},c.arraybuffer={string:function(e){return s(new Uint8Array(e))},array:function(e){return f(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:n,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return r.newBufferFrom(new Uint8Array(e))}},c.uint8array={string:s,array:function(e){return f(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:n,nodebuffer:function(e){return r.newBufferFrom(e)}},c.nodebuffer={string:s,array:function(e){return f(e,new Array(e.length))},arraybuffer:function(e){return c.nodebuffer.uint8array(e).buffer},uint8array:function(e){return f(e,new Uint8Array(e.length))},nodebuffer:n},a.transformTo=function(e,t){if(t=t||"",!e)return t;a.checkSupport(e);var r=a.getTypeOf(t);return c[r][e](t)},a.resolve=function(e){for(var t=e.split("/"),r=[],n=0;n<t.length;n++){var i=t[n];"."===i||""===i&&0!==n&&n!==t.length-1||(".."===i?r.pop():r.push(i))}return r.join("/")},a.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":o.nodebuffer&&r.isBuffer(e)?"nodebuffer":o.uint8array&&e instanceof Uint8Array?"uint8array":o.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(e){if(!o[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(e){var t,r,n="";for(r=0;r<(e||"").length;r++)n+="\\x"+((t=e.charCodeAt(r))<16?"0":"")+t.toString(16).toUpperCase();return n},a.delay=function(e,t,r){setImmediate(function(){e.apply(r||null,t||[])})},a.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.prototype=new r},a.extend=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===r[t]&&(r[t]=arguments[e][t]);return r},a.prepareContent=function(r,e,n,i,s){return u.Promise.resolve(e).then(function(n){return o.blob&&(n instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(n)))&&"undefined"!=typeof FileReader?new u.Promise(function(t,r){var e=new FileReader;e.onload=function(e){t(e.target.result)},e.onerror=function(e){r(e.target.error)},e.readAsArrayBuffer(n)}):n}).then(function(e){var t=a.getTypeOf(e);return t?("arraybuffer"===t?e=a.transformTo("uint8array",e):"string"===t&&(s?e=h.decode(e):n&&!0!==i&&(e=function(e){return l(e,o.uint8array?new Uint8Array(e.length):new Array(e.length))}(e))),e):u.Promise.reject(new Error("Can't read the data of '"+r+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,r){var n=e("./reader/readerFor"),i=e("./utils"),s=e("./signature"),a=e("./zipEntry"),o=e("./support");function h(e){this.files=[],this.loadOptions=e}h.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var r=this.reader.index;this.reader.setIndex(e);var n=this.reader.readString(4)===t;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=o.uint8array?"uint8array":"array",r=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,n=this.zip64EndOfCentralSize-44;0<n;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(e=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=t-r;if(0<n)this.isSignature(t,s.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(e){this.reader=n(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,r){var n=e("./reader/readerFor"),s=e("./utils"),i=e("./compressedObject"),a=e("./crc32"),o=e("./utf8"),h=e("./compressions"),u=e("./support");function l(e,t){this.options=e,this.loadOptions=t}l.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in h)if(Object.prototype.hasOwnProperty.call(h,t)&&h[t].magic===e)return h[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=n(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,r,n,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),r=e.readInt(2),n=e.readData(r),this.extraFields[t]={id:t,length:r,value:n};e.setIndex(i)},handleUTF8:function(){var e=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var r=s.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var i=s.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=n(e.value);return 1!==t.readInt(1)||a(this.fileName)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=n(e.value);return 1!==t.readInt(1)||a(this.fileComment)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null}},t.exports=l},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,r){function n(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var s=e("./stream/StreamHelper"),i=e("./stream/DataWorker"),a=e("./utf8"),o=e("./compressedObject"),h=e("./stream/GenericWorker");n.prototype={internalStream:function(e){var t=null,r="string";try{if(!e)throw new Error("No output type specified.");var n="string"===(r=e.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),t=this._decompressWorker();var i=!this._dataBinary;i&&!n&&(t=t.pipe(new a.Utf8EncodeWorker)),!i&&n&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(e){(t=new h("error")).error(e)}return new s(t,r,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof o&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new a.Utf8EncodeWorker)),o.createWorkerFrom(r,e,t)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof h?this._data:new i(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<u.length;f++)n.prototype[u[f]]=l;t.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,l,t){(function(t){var r,n,e=t.MutationObserver||t.WebKitMutationObserver;if(e){var i=0,s=new e(u),a=t.document.createTextNode("");s.observe(a,{characterData:!0}),r=function(){a.data=i=++i%2}}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){u(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(u,0)};else{var o=new t.MessageChannel;o.port1.onmessage=u,r=function(){o.port2.postMessage(0)}}var h=[];function u(){var e,t;n=!0;for(var r=h.length;r;){for(t=h,h=[],e=-1;++e<r;)t[e]();r=h.length}n=!1}l.exports=function(e){1!==h.push(e)||n||r()}}).call(this,void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,r){var i=e("immediate");function u(){}var l={},s=["REJECTED"],a=["FULFILLED"],n=["PENDING"];function o(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=n,this.queue=[],this.outcome=void 0,e!==u&&d(this,e)}function h(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(t,r,n){i(function(){var e;try{e=r(n)}catch(e){return l.reject(t,e)}e===t?l.reject(t,new TypeError("Cannot resolve promise with itself")):l.resolve(t,e)})}function c(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function d(t,e){var r=!1;function n(e){r||(r=!0,l.reject(t,e))}function i(e){r||(r=!0,l.resolve(t,e))}var s=p(function(){e(i,n)});"error"===s.status&&n(s.value)}function p(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}(t.exports=o).prototype.finally=function(t){if("function"!=typeof t)return this;var r=this.constructor;return this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})})},o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s)return this;var r=new this.constructor(u);return this.state!==n?f(r,this.state===a?e:t,this.outcome):this.queue.push(new h(r,e,t)),r},h.prototype.callFulfilled=function(e){l.resolve(this.promise,e)},h.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},h.prototype.callRejected=function(e){l.reject(this.promise,e)},h.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},l.resolve=function(e,t){var r=p(c,t);if("error"===r.status)return l.reject(e,r.value);var n=r.value;if(n)d(e,n);else{e.state=a,e.outcome=t;for(var i=-1,s=e.queue.length;++i<s;)e.queue[i].callFulfilled(t)}return e},l.reject=function(e,t){e.state=s,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},o.resolve=function(e){return e instanceof this?e:l.resolve(new this(u),e)},o.reject=function(e){var t=new this(u);return l.reject(t,e)},o.all=function(e){var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,t=-1,o=new this(u);++t<n;)h(e[t],t);return o;function h(e,t){r.resolve(e).then(function(e){s[t]=e,++a!==n||i||(i=!0,l.resolve(o,s))},function(e){i||(i=!0,l.reject(o,e))})}},o.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var a,i=-1,s=new this(u);++i<r;)a=e[i],t.resolve(a).then(function(e){n||(n=!0,l.resolve(s,e))},function(e){n||(n=!0,l.reject(s,e))});return s}},{immediate:36}],38:[function(e,t,r){var n={};(0,e("./lib/utils/common").assign)(n,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,r){var a=e("./zlib/deflate"),o=e("./utils/common"),h=e("./utils/strings"),i=e("./zlib/messages"),s=e("./zlib/zstream"),u=Object.prototype.toString,l=0,f=-1,c=0,d=8;function p(e){if(!(this instanceof p))return new p(e);this.options=o.assign({level:f,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=a.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==l)throw new Error(i[r]);if(t.header&&a.deflateSetHeader(this.strm,t.header),t.dictionary){var n;if(n="string"==typeof t.dictionary?h.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=a.deflateSetDictionary(this.strm,n))!==l)throw new Error(i[r]);this._dict_set=!0}}function n(e,t){var r=new p(t);if(r.push(e,!0),r.err)throw r.msg||i[r.err];return r.result}p.prototype.push=function(e,t){var r,n,i=this.strm,s=this.options.chunkSize;if(this.ended)return!1;n=t===~~t?t:!0===t?4:0,"string"==typeof e?i.input=h.string2buf(e):"[object ArrayBuffer]"===u.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new o.Buf8(s),i.next_out=0,i.avail_out=s),1!==(r=a.deflate(i,n))&&r!==l)return this.onEnd(r),!(this.ended=!0);0!==i.avail_out&&(0!==i.avail_in||4!==n&&2!==n)||("string"===this.options.to?this.onData(h.buf2binstring(o.shrinkBuf(i.output,i.next_out))):this.onData(o.shrinkBuf(i.output,i.next_out)))}while((0<i.avail_in||0===i.avail_out)&&1!==r);return 4===n?(r=a.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===l):2!==n||(this.onEnd(l),!(i.avail_out=0))},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===l&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=p,r.deflate=n,r.deflateRaw=function(e,t){return(t=t||{}).raw=!0,n(e,t)},r.gzip=function(e,t){return(t=t||{}).gzip=!0,n(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,r){var c=e("./zlib/inflate"),d=e("./utils/common"),p=e("./utils/strings"),m=e("./zlib/constants"),n=e("./zlib/messages"),i=e("./zlib/zstream"),s=e("./zlib/gzheader"),_=Object.prototype.toString;function a(e){if(!(this instanceof a))return new a(e);this.options=d.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var r=c.inflateInit2(this.strm,t.windowBits);if(r!==m.Z_OK)throw new Error(n[r]);this.header=new s,c.inflateGetHeader(this.strm,this.header)}function o(e,t){var r=new a(t);if(r.push(e,!0),r.err)throw r.msg||n[r.err];return r.result}a.prototype.push=function(e,t){var r,n,i,s,a,o,h=this.strm,u=this.options.chunkSize,l=this.options.dictionary,f=!1;if(this.ended)return!1;n=t===~~t?t:!0===t?m.Z_FINISH:m.Z_NO_FLUSH,"string"==typeof e?h.input=p.binstring2buf(e):"[object ArrayBuffer]"===_.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new d.Buf8(u),h.next_out=0,h.avail_out=u),(r=c.inflate(h,m.Z_NO_FLUSH))===m.Z_NEED_DICT&&l&&(o="string"==typeof l?p.string2buf(l):"[object ArrayBuffer]"===_.call(l)?new Uint8Array(l):l,r=c.inflateSetDictionary(this.strm,o)),r===m.Z_BUF_ERROR&&!0===f&&(r=m.Z_OK,f=!1),r!==m.Z_STREAM_END&&r!==m.Z_OK)return this.onEnd(r),!(this.ended=!0);h.next_out&&(0!==h.avail_out&&r!==m.Z_STREAM_END&&(0!==h.avail_in||n!==m.Z_FINISH&&n!==m.Z_SYNC_FLUSH)||("string"===this.options.to?(i=p.utf8border(h.output,h.next_out),s=h.next_out-i,a=p.buf2string(h.output,i),h.next_out=s,h.avail_out=u-s,s&&d.arraySet(h.output,h.output,i,s,0),this.onData(a)):this.onData(d.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(f=!0)}while((0<h.avail_in||0===h.avail_out)&&r!==m.Z_STREAM_END);return r===m.Z_STREAM_END&&(n=m.Z_FINISH),n===m.Z_FINISH?(r=c.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===m.Z_OK):n!==m.Z_SYNC_FLUSH||(this.onEnd(m.Z_OK),!(h.avail_out=0))},a.prototype.onData=function(e){this.chunks.push(e)},a.prototype.onEnd=function(e){e===m.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=d.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=a,r.inflate=o,r.inflateRaw=function(e,t){return(t=t||{}).raw=!0,o(e,t)},r.ungzip=o},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,r){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var s=0;s<n;s++)e[i+s]=t[r+s]},flattenChunks:function(e){var t,r,n,i,s,a;for(t=n=0,r=e.length;t<r;t++)n+=e[t].length;for(a=new Uint8Array(n),t=i=0,r=e.length;t<r;t++)s=e[t],a.set(s,i),i+=s.length;return a}},s={arraySet:function(e,t,r,n,i){for(var s=0;s<n;s++)e[i+s]=t[r+s]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(n)},{}],42:[function(e,t,r){var h=e("./common"),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){s=!1}for(var u=new h.Buf8(256),n=0;n<256;n++)u[n]=252<=n?6:248<=n?5:240<=n?4:224<=n?3:192<=n?2:1;function l(e,t){if(t<65537&&(e.subarray&&s||!e.subarray&&i))return String.fromCharCode.apply(null,h.shrinkBuf(e,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}u[254]=u[254]=1,r.string2buf=function(e){var t,r,n,i,s,a=e.length,o=0;for(i=0;i<a;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=new h.Buf8(o),i=s=0;s<o;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),r<128?t[s++]=r:(r<2048?t[s++]=192|r>>>6:(r<65536?t[s++]=224|r>>>12:(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63),t[s++]=128|r>>>6&63),t[s++]=128|63&r);return t},r.buf2binstring=function(e){return l(e,e.length)},r.binstring2buf=function(e){for(var t=new h.Buf8(e.length),r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){var r,n,i,s,a=t||e.length,o=new Array(2*a);for(r=n=0;r<a;)if((i=e[r++])<128)o[n++]=i;else if(4<(s=u[i]))o[n++]=65533,r+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&r<a;)i=i<<6|63&e[r++],s--;1<s?o[n++]=65533:i<65536?o[n++]=i:(i-=65536,o[n++]=55296|i>>10&1023,o[n++]=56320|1023&i)}return l(o,n)},r.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+u[e[r]]>t?r:t}},{"./common":41}],43:[function(e,t,r){t.exports=function(e,t,r,n){for(var i=65535&e,s=e>>>16&65535,a=0;0!==r;){for(r-=a=2e3<r?2e3:r;s=s+(i=i+t[n++]|0)|0,--a;);i%=65521,s%=65521}return i|s<<16}},{}],44:[function(e,t,r){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,r){var o=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t,r,n){var i=o,s=n+r;e^=-1;for(var a=n;a<s;a++)e=e>>>8^i[255&(e^t[a])];return-1^e}},{}],46:[function(e,t,r){var h,c=e("../utils/common"),u=e("./trees"),d=e("./adler32"),p=e("./crc32"),n=e("./messages"),l=0,f=4,m=0,_=-2,g=-1,b=4,i=2,v=8,y=9,s=286,a=30,o=19,w=2*s+1,k=15,x=3,S=258,z=S+x+1,C=42,E=113,A=1,I=2,O=3,B=4;function R(e,t){return e.msg=n[t],t}function T(e){return(e<<1)-(4<e?9:0)}function D(e){for(var t=e.length;0<=--t;)e[t]=0}function F(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(c.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function N(e,t){u._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,F(e.strm)}function U(e,t){e.pending_buf[e.pending++]=t}function P(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function L(e,t){var r,n,i=e.max_chain_length,s=e.strstart,a=e.prev_length,o=e.nice_match,h=e.strstart>e.w_size-z?e.strstart-(e.w_size-z):0,u=e.window,l=e.w_mask,f=e.prev,c=e.strstart+S,d=u[s+a-1],p=u[s+a];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do{if(u[(r=t)+a]===p&&u[r+a-1]===d&&u[r]===u[s]&&u[++r]===u[s+1]){s+=2,r++;do{}while(u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&s<c);if(n=S-(c-s),s=c-S,a<n){if(e.match_start=t,o<=(a=n))break;d=u[s+a-1],p=u[s+a]}}}while((t=f[t&l])>h&&0!=--i);return a<=e.lookahead?a:e.lookahead}function j(e){var t,r,n,i,s,a,o,h,u,l,f=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=f+(f-z)){for(c.arraySet(e.window,e.window,f,f,0),e.match_start-=f,e.strstart-=f,e.block_start-=f,t=r=e.hash_size;n=e.head[--t],e.head[t]=f<=n?n-f:0,--r;);for(t=r=f;n=e.prev[--t],e.prev[t]=f<=n?n-f:0,--r;);i+=f}if(0===e.strm.avail_in)break;if(a=e.strm,o=e.window,h=e.strstart+e.lookahead,l=void 0,(u=i)<(l=a.avail_in)&&(l=u),r=0===l?0:(a.avail_in-=l,c.arraySet(o,a.input,a.next_in,l,h),1===a.state.wrap?a.adler=d(a.adler,o,l,h):2===a.state.wrap&&(a.adler=p(a.adler,o,l,h)),a.next_in+=l,a.total_in+=l,l),e.lookahead+=r,e.lookahead+e.insert>=x)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+x-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<x)););}while(e.lookahead<z&&0!==e.strm.avail_in)}function Z(e,t){for(var r,n;;){if(e.lookahead<z){if(j(e),e.lookahead<z&&t===l)return A;if(0===e.lookahead)break}if(r=0,e.lookahead>=x&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-z&&(e.match_length=L(e,r)),e.match_length>=x)if(n=u._tr_tally(e,e.strstart-e.match_start,e.match_length-x),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=x){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=u._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(N(e,!1),0===e.strm.avail_out))return A}return e.insert=e.strstart<x-1?e.strstart:x-1,t===f?(N(e,!0),0===e.strm.avail_out?O:B):e.last_lit&&(N(e,!1),0===e.strm.avail_out)?A:I}function W(e,t){for(var r,n,i;;){if(e.lookahead<z){if(j(e),e.lookahead<z&&t===l)return A;if(0===e.lookahead)break}if(r=0,e.lookahead>=x&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=x-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-z&&(e.match_length=L(e,r),e.match_length<=5&&(1===e.strategy||e.match_length===x&&4096<e.strstart-e.match_start)&&(e.match_length=x-1)),e.prev_length>=x&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-x,n=u._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-x),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=x-1,e.strstart++,n&&(N(e,!1),0===e.strm.avail_out))return A}else if(e.match_available){if((n=u._tr_tally(e,0,e.window[e.strstart-1]))&&N(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return A}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=u._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<x-1?e.strstart:x-1,t===f?(N(e,!0),0===e.strm.avail_out?O:B):e.last_lit&&(N(e,!1),0===e.strm.avail_out)?A:I}function M(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function H(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(2*w),this.dyn_dtree=new c.Buf16(2*(2*a+1)),this.bl_tree=new c.Buf16(2*(2*o+1)),D(this.dyn_ltree),D(this.dyn_dtree),D(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(k+1),this.heap=new c.Buf16(2*s+1),D(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(2*s+1),D(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function G(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=i,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?C:E,e.adler=2===t.wrap?0:1,t.last_flush=l,u._tr_init(t),m):R(e,_)}function K(e){var t=G(e);return t===m&&function(e){e.window_size=2*e.w_size,D(e.head),e.max_lazy_match=h[e.level].max_lazy,e.good_match=h[e.level].good_length,e.nice_match=h[e.level].nice_length,e.max_chain_length=h[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=x-1,e.match_available=0,e.ins_h=0}(e.state),t}function Y(e,t,r,n,i,s){if(!e)return _;var a=1;if(t===g&&(t=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),i<1||y<i||r!==v||n<8||15<n||t<0||9<t||s<0||b<s)return R(e,_);8===n&&(n=9);var o=new H;return(e.state=o).strm=e,o.wrap=a,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+x-1)/x),o.window=new c.Buf8(2*o.w_size),o.head=new c.Buf16(o.hash_size),o.prev=new c.Buf16(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new c.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=t,o.strategy=s,o.method=r,K(e)}h=[new M(0,0,0,0,function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(j(e),0===e.lookahead&&t===l)return A;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,N(e,!1),0===e.strm.avail_out))return A;if(e.strstart-e.block_start>=e.w_size-z&&(N(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===f?(N(e,!0),0===e.strm.avail_out?O:B):(e.strstart>e.block_start&&(N(e,!1),e.strm.avail_out),A)}),new M(4,4,8,4,Z),new M(4,5,16,8,Z),new M(4,6,32,32,Z),new M(4,4,16,16,W),new M(8,16,32,32,W),new M(8,16,128,128,W),new M(8,32,128,256,W),new M(32,128,258,1024,W),new M(32,258,258,4096,W)],r.deflateInit=function(e,t){return Y(e,t,v,15,8,0)},r.deflateInit2=Y,r.deflateReset=K,r.deflateResetKeep=G,r.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?_:(e.state.gzhead=t,m):_},r.deflate=function(e,t){var r,n,i,s;if(!e||!e.state||5<t||t<0)return e?R(e,_):_;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||666===n.status&&t!==f)return R(e,0===e.avail_out?-5:_);if(n.strm=e,r=n.last_flush,n.last_flush=t,n.status===C)if(2===n.wrap)e.adler=0,U(n,31),U(n,139),U(n,8),n.gzhead?(U(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),U(n,255&n.gzhead.time),U(n,n.gzhead.time>>8&255),U(n,n.gzhead.time>>16&255),U(n,n.gzhead.time>>24&255),U(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),U(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(U(n,255&n.gzhead.extra.length),U(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=p(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(U(n,0),U(n,0),U(n,0),U(n,0),U(n,0),U(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),U(n,3),n.status=E);else{var a=v+(n.w_bits-8<<4)<<8;a|=(2<=n.strategy||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(a|=32),a+=31-a%31,n.status=E,P(n,a),0!==n.strstart&&(P(n,e.adler>>>16),P(n,65535&e.adler)),e.adler=1}if(69===n.status)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>i&&(e.adler=p(e.adler,n.pending_buf,n.pending-i,i)),F(e),i=n.pending,n.pending!==n.pending_buf_size));)U(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(e.adler=p(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=p(e.adler,n.pending_buf,n.pending-i,i)),F(e),i=n.pending,n.pending===n.pending_buf_size)){s=1;break}s=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,U(n,s)}while(0!==s);n.gzhead.hcrc&&n.pending>i&&(e.adler=p(e.adler,n.pending_buf,n.pending-i,i)),0===s&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=p(e.adler,n.pending_buf,n.pending-i,i)),F(e),i=n.pending,n.pending===n.pending_buf_size)){s=1;break}s=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,U(n,s)}while(0!==s);n.gzhead.hcrc&&n.pending>i&&(e.adler=p(e.adler,n.pending_buf,n.pending-i,i)),0===s&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&F(e),n.pending+2<=n.pending_buf_size&&(U(n,255&e.adler),U(n,e.adler>>8&255),e.adler=0,n.status=E)):n.status=E),0!==n.pending){if(F(e),0===e.avail_out)return n.last_flush=-1,m}else if(0===e.avail_in&&T(t)<=T(r)&&t!==f)return R(e,-5);if(666===n.status&&0!==e.avail_in)return R(e,-5);if(0!==e.avail_in||0!==n.lookahead||t!==l&&666!==n.status){var o=2===n.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(j(e),0===e.lookahead)){if(t===l)return A;break}if(e.match_length=0,r=u._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(N(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===f?(N(e,!0),0===e.strm.avail_out?O:B):e.last_lit&&(N(e,!1),0===e.strm.avail_out)?A:I}(n,t):3===n.strategy?function(e,t){for(var r,n,i,s,a=e.window;;){if(e.lookahead<=S){if(j(e),e.lookahead<=S&&t===l)return A;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=x&&0<e.strstart&&(n=a[i=e.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i]){s=e.strstart+S;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<s);e.match_length=S-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=x?(r=u._tr_tally(e,1,e.match_length-x),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=u._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(N(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===f?(N(e,!0),0===e.strm.avail_out?O:B):e.last_lit&&(N(e,!1),0===e.strm.avail_out)?A:I}(n,t):h[n.level].func(n,t);if(o!==O&&o!==B||(n.status=666),o===A||o===O)return 0===e.avail_out&&(n.last_flush=-1),m;if(o===I&&(1===t?u._tr_align(n):5!==t&&(u._tr_stored_block(n,0,0,!1),3===t&&(D(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),F(e),0===e.avail_out))return n.last_flush=-1,m}return t!==f?m:n.wrap<=0?1:(2===n.wrap?(U(n,255&e.adler),U(n,e.adler>>8&255),U(n,e.adler>>16&255),U(n,e.adler>>24&255),U(n,255&e.total_in),U(n,e.total_in>>8&255),U(n,e.total_in>>16&255),U(n,e.total_in>>24&255)):(P(n,e.adler>>>16),P(n,65535&e.adler)),F(e),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending?m:1)},r.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==C&&69!==t&&73!==t&&91!==t&&103!==t&&t!==E&&666!==t?R(e,_):(e.state=null,t===E?R(e,-3):m):_},r.deflateSetDictionary=function(e,t){var r,n,i,s,a,o,h,u,l=t.length;if(!e||!e.state)return _;if(2===(s=(r=e.state).wrap)||1===s&&r.status!==C||r.lookahead)return _;for(1===s&&(e.adler=d(e.adler,t,l,0)),r.wrap=0,l>=r.w_size&&(0===s&&(D(r.head),r.strstart=0,r.block_start=0,r.insert=0),u=new c.Buf8(r.w_size),c.arraySet(u,t,l-r.w_size,r.w_size,0),t=u,l=r.w_size),a=e.avail_in,o=e.next_in,h=e.input,e.avail_in=l,e.next_in=0,e.input=t,j(r);r.lookahead>=x;){for(n=r.strstart,i=r.lookahead-(x-1);r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+x-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--i;);r.strstart=n,r.lookahead=x-1,j(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=x-1,r.match_available=0,e.next_in=o,e.input=h,e.avail_in=a,r.wrap=s,m},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,r){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,r){t.exports=function(e,t){var r,n,i,s,a,o,h,u,l,f,c,d,p,m,_,g,b,v,y,w,k,x,S,z,C;r=e.state,n=e.next_in,z=e.input,i=n+(e.avail_in-5),s=e.next_out,C=e.output,a=s-(t-e.avail_out),o=s+(e.avail_out-257),h=r.dmax,u=r.wsize,l=r.whave,f=r.wnext,c=r.window,d=r.hold,p=r.bits,m=r.lencode,_=r.distcode,g=(1<<r.lenbits)-1,b=(1<<r.distbits)-1;e:do{p<15&&(d+=z[n++]<<p,p+=8,d+=z[n++]<<p,p+=8),v=m[d&g];t:for(;;){if(d>>>=y=v>>>24,p-=y,0==(y=v>>>16&255))C[s++]=65535&v;else{if(!(16&y)){if(!(64&y)){v=m[(65535&v)+(d&(1<<y)-1)];continue t}if(32&y){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}w=65535&v,(y&=15)&&(p<y&&(d+=z[n++]<<p,p+=8),w+=d&(1<<y)-1,d>>>=y,p-=y),p<15&&(d+=z[n++]<<p,p+=8,d+=z[n++]<<p,p+=8),v=_[d&b];r:for(;;){if(d>>>=y=v>>>24,p-=y,!(16&(y=v>>>16&255))){if(!(64&y)){v=_[(65535&v)+(d&(1<<y)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(k=65535&v,p<(y&=15)&&(d+=z[n++]<<p,(p+=8)<y&&(d+=z[n++]<<p,p+=8)),h<(k+=d&(1<<y)-1)){e.msg="invalid distance too far back",r.mode=30;break e}if(d>>>=y,p-=y,(y=s-a)<k){if(l<(y=k-y)&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(S=c,(x=0)===f){if(x+=u-y,y<w){for(w-=y;C[s++]=c[x++],--y;);x=s-k,S=C}}else if(f<y){if(x+=u+f-y,(y-=f)<w){for(w-=y;C[s++]=c[x++],--y;);if(x=0,f<w){for(w-=y=f;C[s++]=c[x++],--y;);x=s-k,S=C}}}else if(x+=f-y,y<w){for(w-=y;C[s++]=c[x++],--y;);x=s-k,S=C}for(;2<w;)C[s++]=S[x++],C[s++]=S[x++],C[s++]=S[x++],w-=3;w&&(C[s++]=S[x++],1<w&&(C[s++]=S[x++]))}else{for(x=s-k;C[s++]=C[x++],C[s++]=C[x++],C[s++]=C[x++],2<(w-=3););w&&(C[s++]=C[x++],1<w&&(C[s++]=C[x++]))}break}}break}}while(n<i&&s<o);n-=w=p>>3,d&=(1<<(p-=w<<3))-1,e.next_in=n,e.next_out=s,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=s<o?o-s+257:257-(s-o),r.hold=d,r.bits=p}},{}],49:[function(e,t,r){var I=e("../utils/common"),O=e("./adler32"),B=e("./crc32"),R=e("./inffast"),T=e("./inftrees"),D=1,F=2,N=0,U=-2,P=1,n=852,i=592;function L(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function s(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new I.Buf16(320),this.work=new I.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=P,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new I.Buf32(n),t.distcode=t.distdyn=new I.Buf32(i),t.sane=1,t.back=-1,N):U}function o(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,a(e)):U}function h(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?U:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,o(e))):U}function u(e,t){var r,n;return e?(n=new s,(e.state=n).window=null,(r=h(e,t))!==N&&(e.state=null),r):U}var l,f,c=!0;function j(e){if(c){var t;for(l=new I.Buf32(512),f=new I.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(T(D,e.lens,0,288,l,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;T(F,e.lens,0,32,f,0,e.work,{bits:5}),c=!1}e.lencode=l,e.lenbits=9,e.distcode=f,e.distbits=5}function Z(e,t,r,n){var i,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new I.Buf8(s.wsize)),n>=s.wsize?(I.arraySet(s.window,t,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(n<(i=s.wsize-s.wnext)&&(i=n),I.arraySet(s.window,t,r-n,i,s.wnext),(n-=i)?(I.arraySet(s.window,t,r-n,n,0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}r.inflateReset=o,r.inflateReset2=h,r.inflateResetKeep=a,r.inflateInit=function(e){return u(e,15)},r.inflateInit2=u,r.inflate=function(e,t){var r,n,i,s,a,o,h,u,l,f,c,d,p,m,_,g,b,v,y,w,k,x,S,z,C=0,E=new I.Buf8(4),A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return U;12===(r=e.state).mode&&(r.mode=13),a=e.next_out,i=e.output,h=e.avail_out,s=e.next_in,n=e.input,o=e.avail_in,u=r.hold,l=r.bits,f=o,c=h,x=N;e:for(;;)switch(r.mode){case P:if(0===r.wrap){r.mode=13;break}for(;l<16;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}if(2&r.wrap&&35615===u){E[r.check=0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0),l=u=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=30;break}if(8!=(15&u)){e.msg="unknown compression method",r.mode=30;break}if(l-=4,k=8+(15&(u>>>=4)),0===r.wbits)r.wbits=k;else if(k>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<k,e.adler=r.check=1,r.mode=512&u?10:12,l=u=0;break;case 2:for(;l<16;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}if(r.flags=u,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=u>>8&1),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0)),l=u=0,r.mode=3;case 3:for(;l<32;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}r.head&&(r.head.time=u),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,E[2]=u>>>16&255,E[3]=u>>>24&255,r.check=B(r.check,E,4,0)),l=u=0,r.mode=4;case 4:for(;l<16;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}r.head&&(r.head.xflags=255&u,r.head.os=u>>8),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0)),l=u=0,r.mode=5;case 5:if(1024&r.flags){for(;l<16;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}r.length=u,r.head&&(r.head.extra_len=u),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0)),l=u=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(o<(d=r.length)&&(d=o),d&&(r.head&&(k=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),I.arraySet(r.head.extra,n,s,d,k)),512&r.flags&&(r.check=B(r.check,n,d,s)),o-=d,s+=d,r.length-=d),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===o)break e;for(d=0;k=n[s+d++],r.head&&k&&r.length<65536&&(r.head.name+=String.fromCharCode(k)),k&&d<o;);if(512&r.flags&&(r.check=B(r.check,n,d,s)),o-=d,s+=d,k)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===o)break e;for(d=0;k=n[s+d++],r.head&&k&&r.length<65536&&(r.head.comment+=String.fromCharCode(k)),k&&d<o;);if(512&r.flags&&(r.check=B(r.check,n,d,s)),o-=d,s+=d,k)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;l<16;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}if(u!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}l=u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;l<32;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}e.adler=r.check=L(u),l=u=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=a,e.avail_out=h,e.next_in=s,e.avail_in=o,r.hold=u,r.bits=l,2;e.adler=r.check=1,r.mode=12;case 12:if(5===t||6===t)break e;case 13:if(r.last){u>>>=7&l,l-=7&l,r.mode=27;break}for(;l<3;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}switch(r.last=1&u,l-=1,3&(u>>>=1)){case 0:r.mode=14;break;case 1:if(j(r),r.mode=20,6!==t)break;u>>>=2,l-=2;break e;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}u>>>=2,l-=2;break;case 14:for(u>>>=7&l,l-=7&l;l<32;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&u,l=u=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(d=r.length){if(o<d&&(d=o),h<d&&(d=h),0===d)break e;I.arraySet(i,n,s,d,a),o-=d,s+=d,h-=d,a+=d,r.length-=d;break}r.mode=12;break;case 17:for(;l<14;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}if(r.nlen=257+(31&u),u>>>=5,l-=5,r.ndist=1+(31&u),u>>>=5,l-=5,r.ncode=4+(15&u),u>>>=4,l-=4,286<r.nlen||30<r.ndist){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;l<3;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}r.lens[A[r.have++]]=7&u,u>>>=3,l-=3}for(;r.have<19;)r.lens[A[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,S={bits:r.lenbits},x=T(0,r.lens,0,19,r.lencode,0,r.work,S),r.lenbits=S.bits,x){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;g=(C=r.lencode[u&(1<<r.lenbits)-1])>>>16&255,b=65535&C,!((_=C>>>24)<=l);){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}if(b<16)u>>>=_,l-=_,r.lens[r.have++]=b;else{if(16===b){for(z=_+2;l<z;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}if(u>>>=_,l-=_,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}k=r.lens[r.have-1],d=3+(3&u),u>>>=2,l-=2}else if(17===b){for(z=_+3;l<z;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}l-=_,k=0,d=3+(7&(u>>>=_)),u>>>=3,l-=3}else{for(z=_+7;l<z;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}l-=_,k=0,d=11+(127&(u>>>=_)),u>>>=7,l-=7}if(r.have+d>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;d--;)r.lens[r.have++]=k}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,S={bits:r.lenbits},x=T(D,r.lens,0,r.nlen,r.lencode,0,r.work,S),r.lenbits=S.bits,x){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,S={bits:r.distbits},x=T(F,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,S),r.distbits=S.bits,x){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(6<=o&&258<=h){e.next_out=a,e.avail_out=h,e.next_in=s,e.avail_in=o,r.hold=u,r.bits=l,R(e,c),a=e.next_out,i=e.output,h=e.avail_out,s=e.next_in,n=e.input,o=e.avail_in,u=r.hold,l=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;g=(C=r.lencode[u&(1<<r.lenbits)-1])>>>16&255,b=65535&C,!((_=C>>>24)<=l);){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}if(g&&!(240&g)){for(v=_,y=g,w=b;g=(C=r.lencode[w+((u&(1<<v+y)-1)>>v)])>>>16&255,b=65535&C,!(v+(_=C>>>24)<=l);){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}u>>>=v,l-=v,r.back+=v}if(u>>>=_,l-=_,r.back+=_,r.length=b,0===g){r.mode=26;break}if(32&g){r.back=-1,r.mode=12;break}if(64&g){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&g,r.mode=22;case 22:if(r.extra){for(z=r.extra;l<z;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;g=(C=r.distcode[u&(1<<r.distbits)-1])>>>16&255,b=65535&C,!((_=C>>>24)<=l);){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}if(!(240&g)){for(v=_,y=g,w=b;g=(C=r.distcode[w+((u&(1<<v+y)-1)>>v)])>>>16&255,b=65535&C,!(v+(_=C>>>24)<=l);){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}u>>>=v,l-=v,r.back+=v}if(u>>>=_,l-=_,r.back+=_,64&g){e.msg="invalid distance code",r.mode=30;break}r.offset=b,r.extra=15&g,r.mode=24;case 24:if(r.extra){for(z=r.extra;l<z;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===h)break e;if(d=c-h,r.offset>d){if((d=r.offset-d)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}p=d>r.wnext?(d-=r.wnext,r.wsize-d):r.wnext-d,d>r.length&&(d=r.length),m=r.window}else m=i,p=a-r.offset,d=r.length;for(h<d&&(d=h),h-=d,r.length-=d;i[a++]=m[p++],--d;);0===r.length&&(r.mode=21);break;case 26:if(0===h)break e;i[a++]=r.length,h--,r.mode=21;break;case 27:if(r.wrap){for(;l<32;){if(0===o)break e;o--,u|=n[s++]<<l,l+=8}if(c-=h,e.total_out+=c,r.total+=c,c&&(e.adler=r.check=r.flags?B(r.check,i,c,a-c):O(r.check,i,c,a-c)),c=h,(r.flags?u:L(u))!==r.check){e.msg="incorrect data check",r.mode=30;break}l=u=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;l<32;){if(0===o)break e;o--,u+=n[s++]<<l,l+=8}if(u!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}l=u=0}r.mode=29;case 29:x=1;break e;case 30:x=-3;break e;case 31:return-4;default:return U}return e.next_out=a,e.avail_out=h,e.next_in=s,e.avail_in=o,r.hold=u,r.bits=l,(r.wsize||c!==e.avail_out&&r.mode<30&&(r.mode<27||4!==t))&&Z(e,e.output,e.next_out,c-e.avail_out)?(r.mode=31,-4):(f-=e.avail_in,c-=e.avail_out,e.total_in+=f,e.total_out+=c,r.total+=c,r.wrap&&c&&(e.adler=r.check=r.flags?B(r.check,i,c,e.next_out-c):O(r.check,i,c,e.next_out-c)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==f&&0===c||4===t)&&x===N&&(x=-5),x)},r.inflateEnd=function(e){if(!e||!e.state)return U;var t=e.state;return t.window&&(t.window=null),e.state=null,N},r.inflateGetHeader=function(e,t){var r;return e&&e.state&&2&(r=e.state).wrap?((r.head=t).done=!1,N):U},r.inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?U:11===r.mode&&O(1,t,n,0)!==r.check?-3:Z(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,N):U},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,r){var D=e("../utils/common"),F=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],N=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],U=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],P=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,n,i,s,a,o){var h,u,l,f,c,d,p,m,_,g=o.bits,b=0,v=0,y=0,w=0,k=0,x=0,S=0,z=0,C=0,E=0,A=null,I=0,O=new D.Buf16(16),B=new D.Buf16(16),R=null,T=0;for(b=0;b<=15;b++)O[b]=0;for(v=0;v<n;v++)O[t[r+v]]++;for(k=g,w=15;1<=w&&0===O[w];w--);if(w<k&&(k=w),0===w)return i[s++]=20971520,i[s++]=20971520,o.bits=1,0;for(y=1;y<w&&0===O[y];y++);for(k<y&&(k=y),b=z=1;b<=15;b++)if(z<<=1,(z-=O[b])<0)return-1;if(0<z&&(0===e||1!==w))return-1;for(B[1]=0,b=1;b<15;b++)B[b+1]=B[b]+O[b];for(v=0;v<n;v++)0!==t[r+v]&&(a[B[t[r+v]]++]=v);if(d=0===e?(A=R=a,19):1===e?(A=F,I-=257,R=N,T-=257,256):(A=U,R=P,-1),b=y,c=s,S=v=E=0,l=-1,f=(C=1<<(x=k))-1,1===e&&852<C||2===e&&592<C)return 1;for(;;){for(p=b-S,_=a[v]<d?(m=0,a[v]):a[v]>d?(m=R[T+a[v]],A[I+a[v]]):(m=96,0),h=1<<b-S,y=u=1<<x;i[c+(E>>S)+(u-=h)]=p<<24|m<<16|_,0!==u;);for(h=1<<b-1;E&h;)h>>=1;if(0!==h?(E&=h-1,E+=h):E=0,v++,0==--O[b]){if(b===w)break;b=t[r+a[v]]}if(k<b&&(E&f)!==l){for(0===S&&(S=k),c+=y,z=1<<(x=b-S);x+S<w&&!((z-=O[x+S])<=0);)x++,z<<=1;if(C+=1<<x,1===e&&852<C||2===e&&592<C)return 1;i[l=E&f]=k<<24|x<<16|c-s}}return 0!==E&&(i[c+E]=b-S<<24|64<<16),o.bits=k,0}},{"../utils/common":41}],51:[function(e,t,r){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,r){var i=e("../utils/common"),o=0,h=1;function n(e){for(var t=e.length;0<=--t;)e[t]=0}var s=0,a=29,u=256,l=u+1+a,f=30,c=19,_=2*l+1,g=15,d=16,p=7,m=256,b=16,v=17,y=18,w=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],k=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=new Array(2*(l+2));n(z);var C=new Array(2*f);n(C);var E=new Array(512);n(E);var A=new Array(256);n(A);var I=new Array(a);n(I);var O,B,R,T=new Array(f);function D(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function F(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function N(e){return e<256?E[e]:E[256+(e>>>7)]}function U(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function P(e,t,r){e.bi_valid>d-r?(e.bi_buf|=t<<e.bi_valid&65535,U(e,e.bi_buf),e.bi_buf=t>>d-e.bi_valid,e.bi_valid+=r-d):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function L(e,t,r){P(e,r[2*t],r[2*t+1])}function j(e,t){for(var r=0;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1}function Z(e,t,r){var n,i,s=new Array(g+1),a=0;for(n=1;n<=g;n++)s[n]=a=a+r[n-1]<<1;for(i=0;i<=t;i++){var o=e[2*i+1];0!==o&&(e[2*i]=j(s[o]++,o))}}function W(e){var t;for(t=0;t<l;t++)e.dyn_ltree[2*t]=0;for(t=0;t<f;t++)e.dyn_dtree[2*t]=0;for(t=0;t<c;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*m]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function M(e){8<e.bi_valid?U(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function H(e,t,r,n){var i=2*t,s=2*r;return e[i]<e[s]||e[i]===e[s]&&n[t]<=n[r]}function G(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&H(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!H(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function K(e,t,r){var n,i,s,a,o=0;if(0!==e.last_lit)for(;n=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],i=e.pending_buf[e.l_buf+o],o++,0===n?L(e,i,t):(L(e,(s=A[i])+u+1,t),0!==(a=w[s])&&P(e,i-=I[s],a),L(e,s=N(--n),r),0!==(a=k[s])&&P(e,n-=T[s],a)),o<e.last_lit;);L(e,m,t)}function Y(e,t){var r,n,i,s=t.dyn_tree,a=t.stat_desc.static_tree,o=t.stat_desc.has_stree,h=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=_,r=0;r<h;r++)0!==s[2*r]?(e.heap[++e.heap_len]=u=r,e.depth[r]=0):s[2*r+1]=0;for(;e.heap_len<2;)s[2*(i=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[i]=0,e.opt_len--,o&&(e.static_len-=a[2*i+1]);for(t.max_code=u,r=e.heap_len>>1;1<=r;r--)G(e,s,r);for(i=h;r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],G(e,s,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,s[2*i]=s[2*r]+s[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,s[2*r+1]=s[2*n+1]=i,e.heap[1]=i++,G(e,s,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,i,s,a,o,h=t.dyn_tree,u=t.max_code,l=t.stat_desc.static_tree,f=t.stat_desc.has_stree,c=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(s=0;s<=g;s++)e.bl_count[s]=0;for(h[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<_;r++)p<(s=h[2*h[2*(n=e.heap[r])+1]+1]+1)&&(s=p,m++),h[2*n+1]=s,u<n||(e.bl_count[s]++,a=0,d<=n&&(a=c[n-d]),o=h[2*n],e.opt_len+=o*(s+a),f&&(e.static_len+=o*(l[2*n+1]+a)));if(0!==m){do{for(s=p-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[p]--,m-=2}while(0<m);for(s=p;0!==s;s--)for(n=e.bl_count[s];0!==n;)u<(i=e.heap[--r])||(h[2*i+1]!==s&&(e.opt_len+=(s-h[2*i+1])*h[2*i],h[2*i+1]=s),n--)}}(e,t),Z(s,u,e.bl_count)}function X(e,t,r){var n,i,s=-1,a=t[1],o=0,h=7,u=4;for(0===a&&(h=138,u=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=t[2*(n+1)+1],++o<h&&i===a||(o<u?e.bl_tree[2*i]+=o:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[2*b]++):o<=10?e.bl_tree[2*v]++:e.bl_tree[2*y]++,s=i,u=(o=0)===a?(h=138,3):i===a?(h=6,3):(h=7,4))}function V(e,t,r){var n,i,s=-1,a=t[1],o=0,h=7,u=4;for(0===a&&(h=138,u=3),n=0;n<=r;n++)if(i=a,a=t[2*(n+1)+1],!(++o<h&&i===a)){if(o<u)for(;L(e,i,e.bl_tree),0!=--o;);else 0!==i?(i!==s&&(L(e,i,e.bl_tree),o--),L(e,b,e.bl_tree),P(e,o-3,2)):o<=10?(L(e,v,e.bl_tree),P(e,o-3,3)):(L(e,y,e.bl_tree),P(e,o-11,7));s=i,u=(o=0)===a?(h=138,3):i===a?(h=6,3):(h=7,4)}}n(T);var q=!1;function J(e,t,r,n){P(e,(s<<1)+(n?1:0),3),function(e,t,r,n){M(e),n&&(U(e,r),U(e,~r)),i.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r,!0)}r._tr_init=function(e){q||(function(){var e,t,r,n,i,s=new Array(g+1);for(n=r=0;n<a-1;n++)for(I[n]=r,e=0;e<1<<w[n];e++)A[r++]=n;for(A[r-1]=n,n=i=0;n<16;n++)for(T[n]=i,e=0;e<1<<k[n];e++)E[i++]=n;for(i>>=7;n<f;n++)for(T[n]=i<<7,e=0;e<1<<k[n]-7;e++)E[256+i++]=n;for(t=0;t<=g;t++)s[t]=0;for(e=0;e<=143;)z[2*e+1]=8,e++,s[8]++;for(;e<=255;)z[2*e+1]=9,e++,s[9]++;for(;e<=279;)z[2*e+1]=7,e++,s[7]++;for(;e<=287;)z[2*e+1]=8,e++,s[8]++;for(Z(z,l+1,s),e=0;e<f;e++)C[2*e+1]=5,C[2*e]=j(e,5);O=new D(z,w,u+1,l,g),B=new D(C,k,0,f,g),R=new D(new Array(0),x,0,c,p)}(),q=!0),e.l_desc=new F(e.dyn_ltree,O),e.d_desc=new F(e.dyn_dtree,B),e.bl_desc=new F(e.bl_tree,R),e.bi_buf=0,e.bi_valid=0,W(e)},r._tr_stored_block=J,r._tr_flush_block=function(e,t,r,n){var i,s,a=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return o;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return h;for(t=32;t<u;t++)if(0!==e.dyn_ltree[2*t])return h;return o}(e)),Y(e,e.l_desc),Y(e,e.d_desc),a=function(e){var t;for(X(e,e.dyn_ltree,e.l_desc.max_code),X(e,e.dyn_dtree,e.d_desc.max_code),Y(e,e.bl_desc),t=c-1;3<=t&&0===e.bl_tree[2*S[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=i&&(i=s)):i=s=r+5,r+4<=i&&-1!==t?J(e,t,r,n):4===e.strategy||s===i?(P(e,2+(n?1:0),3),K(e,z,C)):(P(e,4+(n?1:0),3),function(e,t,r,n){var i;for(P(e,t-257,5),P(e,r-1,5),P(e,n-4,4),i=0;i<n;i++)P(e,e.bl_tree[2*S[i]+1],3);V(e,e.dyn_ltree,t-1),V(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),K(e,e.dyn_ltree,e.dyn_dtree)),W(e),n&&M(e)},r._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(A[r]+u+1)]++,e.dyn_dtree[2*N(t)]++),e.last_lit===e.lit_bufsize-1},r._tr_align=function(e){P(e,2,3),L(e,m,z),function(e){16===e.bi_valid?(U(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,r){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){(function(e){!function(r,n){if(!r.setImmediate){var i,s,t,a,o=1,h={},u=!1,l=r.document,e=Object.getPrototypeOf&&Object.getPrototypeOf(r);e=e&&e.setTimeout?e:r,i="[object process]"==={}.toString.call(r.process)?function(e){process.nextTick(function(){c(e)})}:function(){if(r.postMessage&&!r.importScripts){var e=!0,t=r.onmessage;return r.onmessage=function(){e=!1},r.postMessage("","*"),r.onmessage=t,e}}()?(a="setImmediate$"+Math.random()+"$",r.addEventListener?r.addEventListener("message",d,!1):r.attachEvent("onmessage",d),function(e){r.postMessage(a+e,"*")}):r.MessageChannel?((t=new MessageChannel).port1.onmessage=function(e){c(e.data)},function(e){t.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(s=l.documentElement,function(e){var t=l.createElement("script");t.onreadystatechange=function(){c(e),t.onreadystatechange=null,s.removeChild(t),t=null},s.appendChild(t)}):function(e){setTimeout(c,0,e)},e.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return h[o]=n,i(o),o++},e.clearImmediate=f}function f(e){delete h[e]}function c(e){if(u)setTimeout(c,0,e);else{var t=h[e];if(t){u=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{f(e),u=!1}}}}function d(e){e.source===r&&"string"==typeof e.data&&0===e.data.indexOf(a)&&c(+e.data.slice(a.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__webpack_require__),module.exports}__webpack_require__.n=module=>{var getter=module&&module.__esModule?()=>module.default:()=>module;return __webpack_require__.d(getter,{a:getter}),getter},__webpack_require__.d=(exports,definition)=>{for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop);const AsyncFunction=Object.getPrototypeOf(async function(){}).constructor;class ImageGroup{source;startDelay;constructor(htmlSource,startDelay){this.source=htmlSource,this.startDelay=startDelay}async childrenForEach(callback){const childrenTarget=[...this.source.children].map(c=>c);let index;index=0;for(let c of childrenTarget)await callback(c,index),index++}lengthCallback(callbacks){const instance=this,childrenTarget=[...this.source.children].map(c=>c);let index;if(callbacks.length!==childrenTarget.length)throw new Error("length error");return setTimeout(()=>{(async()=>{index=0;for(let c of childrenTarget)await callbacks[index](c,instance.startDelay),index++})().catch(e=>console.log(e))},0),this}}class UnzipFileList extends Array{fileName;exe;constructor(length){super(length),this.fileName="",this.exe=""}setFileName(name){this.fileName=name,/\./gi.test(name)?this.exe=name.split(".").at(-1):this.exe=""}getFileName(){return this.fileName}getExeName(){return this.exe}getFileList(){return[...this]}}class UserFunctions{static dummyUser=()=>({date:new Date(1800,0,1),expired:new Date(1800,0,1),phone:"",name:"",role:"user",email:"",plan:[],study:[]})}class SvgTongListClass{list;constructor(){this.list=[]}add=str=>{this.list.push(str)}}class SvgTongHtmlParsingClass{attribute;src;id;style;events;classList;constructor(){this.attribute={},this.src="",this.id="",this.style={},this.events=[],this.classList=new SvgTongListClass}setAttribute=(key,value)=>{this.attribute[key]=value};getAttribute=key=>this.attribute[key];addEventListener=(eventName,callback)=>{const obj={name:eventName,callback};this.events.push(obj)}}class SvgDom{source;classList;stringSource;constructor(str){const target=(new DOMParser).parseFromString(str,"image/svg+xml").children[0];this.source=target,this.classList=new SvgDomClassList(target),this.stringSource=str}getAttribute(key){return this.source.getAttribute(key)}setAttribute(key,value){this.source.setAttribute(key,value)}setId(id){this.source.id=id}getRatio(){let viewBoxString,viewBoxArr;return viewBoxString=String(this.source.getAttribute("viewBox")),"null"===viewBoxString?-1:(viewBoxArr=viewBoxString.split(" "),Number(viewBoxArr[2])/Number(viewBoxArr[3]))}setStyle(key,value){let thisStyleKey;thisStyleKey=key,this.source.style[thisStyleKey]=value}addEventListener(eventName,eventFunction){this.source.addEventListener(eventName,eventFunction)}}class SvgDomClassList extends Array{source;constructor(source){super(),this.source=source}add(str){this.push(str),this.source.classList.add(str)}}class SvgTong{constructor(){}static tongMaker(){return new SvgTongHtmlParsingClass}static stringParsing(str){return new SvgDom(str)}static getRatio(svgString){let svgDom,viewBoxString,viewBoxArr;return svgDom=SvgTong.stringParsing(svgString),viewBoxString=String(svgDom.getAttribute("viewBox")),"null"===viewBoxString?-1:(viewBoxArr=viewBoxString.split(" "),Number(viewBoxArr[2])/Number(viewBoxArr[3]))}}class WhiteLoading{cancel;loading;progress;constructor(cancel,loading,progress){this.cancel=cancel,this.loading=loading,this.progress=progress}remove=()=>{this.loading.source.parentElement.removeChild(this.loading.source),this.cancel.parentElement.removeChild(this.cancel),this.progress.parentElement.removeChild(this.progress)};softRemove=()=>{const instance=this;return this.cancel.style.animation="loadingfadeout 0.4s ease forwards",instance.loading.source.remove(),new Promise((resolve,reject)=>{setTimeout(()=>{instance.cancel.remove(),instance.progress.remove(),resolve(!0)},401)})}}class FrontBackMaker{db;version;static fixedTableName="frontDocuments";static idField="_id";constructor(){this.db=null,this.version=1}static uniqueValue=()=>{const uniqueNumber=(new Date).valueOf(),hexChars=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],randomKeyWords=["A","B","C","D","E","F"];let uniqueNumber_copied,maxExponent,cArr,temp,hexString;for(uniqueNumber_copied=uniqueNumber,maxExponent=0;Math.pow(16,maxExponent)<=uniqueNumber;)maxExponent++;cArr=[];for(let i=0;i<maxExponent;i++)temp=uniqueNumber_copied/Math.pow(16,i)%16,cArr.push(temp),uniqueNumber_copied-=temp*Math.pow(16,i);hexString=cArr.map(index=>hexChars[index]).join("");for(let i=0;i<11;i++)hexString+=hexChars[Math.floor(hexChars.length*Math.random())];return"front_id_"+randomKeyWords[Math.floor(randomKeyWords.length*Math.random())]+randomKeyWords[Math.floor(randomKeyWords.length*Math.random())]+hexChars[Math.floor(hexChars.length*Math.random())]+randomKeyWords[Math.floor(randomKeyWords.length*Math.random())]+String(uniqueNumber)+"A"+hexString};connect=collection=>new Promise((resolve,reject)=>{if(this.db)return resolve();const request=window.indexedDB.open(collection,this.version);request.onerror=event=>reject(event.target.error),request.onsuccess=event=>{this.db=event.target.result,this.db.onclose=()=>{this.db=null},resolve()},request.onupgradeneeded=event=>{const db=event.target.result;if(this.db=db,!db.objectStoreNames.contains(FrontBackMaker.fixedTableName)){db.createObjectStore(FrontBackMaker.fixedTableName,{keyPath:FrontBackMaker.idField}).createIndex("collectionIndex","key",{unique:!1})}},request.onblocked=event=>reject(new Error("DB 접근 블락됨"))});transactionHelper=async(mode,collection)=>{if(!this.db){if("string"!=typeof collection)return console.error("DB가 연결되지 않았습니다."),null;await this.connect(collection)}try{return this.db.transaction(FrontBackMaker.fixedTableName,mode).objectStore(FrontBackMaker.fixedTableName)}catch(error){return console.error(error),null}};frontCreate=async(collection,data)=>{null!==this.db&&this.db?.name!==collection&&(this.close(),await this.connect(collection));const store=await this.transactionHelper("readwrite",collection);if(null===store)throw new Error("connection error");{const result=await(store=>new Promise((resolve,reject)=>{(void 0===data[FrontBackMaker.idField]||null===data[FrontBackMaker.idField]||"string"==typeof data[FrontBackMaker.idField]&&""===data[FrontBackMaker.idField].trim())&&(data[FrontBackMaker.idField]=FrontBackMaker.uniqueValue()),data.date instanceof Date||(data.date=new Date),"string"!=typeof data.key&&(data.key="general");const request=store.add(data);request.onsuccess=event=>resolve(event.target.result),request.onerror=event=>reject(event.target.error),store.transaction&&(store.transaction.onerror=event=>reject(event.target.error))}))(store);return{_id:result}}};frontRead=async(collection,whereQuery)=>{null!==this.db&&this.db?.name!==collection&&(this.close(),await this.connect(collection));const store=await this.transactionHelper("readonly",collection);if(null===store)throw new Error("connection error");{const result=await(store=>new Promise((resolve,reject)=>{if("string"==typeof whereQuery._id){const request=store.get(whereQuery._id);request.onsuccess=event=>resolve([event.target.result]),request.onerror=event=>reject(event.target.error),store.transaction&&(store.transaction.onerror=event=>reject(event.target.error))}else{const request=store.openCursor();let results;results=[],request.onsuccess=event=>{const cursor=event.target.result;let doc,matches,dateFilters;if(cursor){if(doc=cursor.value,matches=!0,dateFilters=whereQuery.$gte?.date||whereQuery.$gt?.date||whereQuery.$lte?.date||whereQuery.$lt?.date,dateFilters&&(doc.date instanceof Date?(matches&&whereQuery.$gte?.date instanceof Date&&!(doc.date.valueOf()>=whereQuery.$gte.date.valueOf())&&(matches=!1),matches&&whereQuery.$gt?.date instanceof Date&&!(doc.date.valueOf()>whereQuery.$gt.date.valueOf())&&(matches=!1),matches&&whereQuery.$lte?.date instanceof Date&&!(doc.date.valueOf()<=whereQuery.$lte.date.valueOf())&&(matches=!1),matches&&whereQuery.$lt?.date instanceof Date&&!(doc.date.valueOf()<whereQuery.$lt.date.valueOf())&&(matches=!1)):matches=!1),matches)for(const queryKey in whereQuery)if("_id"!==queryKey&&!queryKey.startsWith("$")&&!queryKey.startsWith("~")&&doc[queryKey]!==whereQuery[queryKey]){matches=!1;break}if(matches)for(const queryKey in whereQuery)if(queryKey.startsWith("~")){const thisKey=queryKey.slice(1);if(matches=new RegExp(whereQuery[queryKey],"gi").test(doc[thisKey]),!matches)break}matches&&results.push(doc),cursor.continue()}else{try{results.sort((a,b)=>(b.date?.valueOf()??0)-(a.date?.valueOf()??0))}catch{}resolve(results)}},request.onerror=event=>reject(event.target.error),store.transaction&&(store.transaction.onerror=event=>reject(event.target.error))}}))(store);return result.filter(o=>null!=o)}};frontUpdate=async(collection,queryArr)=>{if(null!==this.db&&this.db?.name!==collection&&(this.close(),await this.connect(collection)),"string"!=typeof queryArr[0]._id)throw new Error("invalid where query");queryArr[1]._id=queryArr[0]._id;const store=await this.transactionHelper("readwrite",collection);if(null===store)throw new Error("connection error");{const result=await(store=>new Promise((resolve,reject)=>{const request=store.put(queryArr[1]);request.onsuccess=event=>resolve({message:"success"}),request.onerror=event=>reject(event.target.error),store.transaction&&(store.transaction.onerror=event=>reject(event.target.error))}))(store);return result}};frontDelete=async(collection,whereQuery)=>{if(null!==this.db&&this.db?.name!==collection&&(this.close(),await this.connect(collection)),"string"!=typeof whereQuery._id)throw new Error("invalid where query");const store=await this.transactionHelper("readwrite",collection);if(null===store)throw new Error("connection error");{const result=await(store=>new Promise((resolve,reject)=>{const request=store.delete(whereQuery._id);request.onsuccess=event=>resolve({message:"success"}),request.onerror=event=>reject(event.target.error),store.transaction&&(store.transaction.onerror=event=>reject(event.target.error))}))(store);return result}};close=()=>{this.db&&(this.db.close(),this.db=null)}}class DateRange{start;end;endNext;constructor(start,end){this.start=start,this.end=end,this.endNext=new Date(end.getFullYear(),end.getMonth(),end.getDate(),0,0,0),this.endNext.setDate(this.endNext.getDate()+1)}rangeMatch=targetDate=>{let boo0,boo1;return boo0=this.start.valueOf()<=targetDate.valueOf(),boo1=this.endNext.valueOf()>targetDate.valueOf(),boo0&&boo1}}class DateMatrix{year;month;matrix;constructor(year,month){this.year=year,this.month=month,this.matrix=[]}getYearString=()=>String(this.year)+"년";getMonthString=()=>String(this.month+1)+"월";getMatrix=()=>this.matrix;getNormalMatrix=()=>{let justTong,justArr;justTong=[],justArr=[];for(let arr of this.matrix){justArr=[];for(let obj of arr)null===obj?justArr.push(null):justArr.push(obj.date);justTong.push(justArr)}return justTong};getDateArr=()=>{let justTong;justTong=[];for(let arr of this.matrix)for(let obj of arr)null!==obj&&justTong.push(obj);return justTong};nextMatrix=()=>11===this.month?getDateMatrix(this.year+1,0):getDateMatrix(this.year,this.month+1);previousMatrix=()=>0===this.month?getDateMatrix(this.year-1,11):getDateMatrix(this.year,this.month-1);nextSundayMatrix=()=>11===this.month?getDateMatrix(this.year+1,0).sundayConvert():getDateMatrix(this.year,this.month+1).sundayConvert();previousSundayMatrix=()=>0===this.month?getDateMatrix(this.year-1,11).sundayConvert():getDateMatrix(this.year,this.month-1).sundayConvert();yearMatrix=()=>{let tempObj,arr=[];for(let i=0;i<12;i++)tempObj=getDateMatrix(this.year,i),arr.push(tempObj);return arr};nextYearMatrix=()=>{let arr=[];for(let i=0;i<12;i++)arr.push(getDateMatrix(this.year+1,i));return arr};previousYearMatrix=()=>{let arr=[];for(let i=0;i<12;i++)arr.push(getDateMatrix(this.year-1,i));return arr};rangeMatrix=(range=3)=>{let tempMatrix,arr=[];tempMatrix=this.previousMatrix(),arr.unshift(tempMatrix);for(let i=1;i<range;i++)tempMatrix=tempMatrix.previousMatrix(),arr.unshift(tempMatrix);arr.push(this),tempMatrix=this.nextMatrix(),arr.push(tempMatrix);for(let i=1;i<range;i++)tempMatrix=tempMatrix.nextMatrix(),arr.push(tempMatrix);return arr};returnSundayMatrix=()=>{let arr,boo,tempArr,tong,length;tempArr=[],arr=[];for(let matrix of this.matrix)for(let i of matrix)arr.push(i);arr.unshift(null),boo=!0;for(let i=0;i<7;i++)null!==arr[i]&&(boo=!1);if(boo)for(let i=0;i<7;i++)arr.shift();tong=[];for(let i=0;i<arr.length;i++)i%7==0&&(tempArr=[]),tempArr.push(arr[i]),i%7!=6&&i!==arr.length-1||tong.push(tempArr);if(0===tong[tong.length-1].length&&tong.pop(),length=tong[tong.length-1].length,7!==length)for(let i=0;i<7-length;i++)tong[tong.length-1].push(null);boo=!0;for(let i=0;i<7;i++)null!==tong[tong.length-1][i]&&(boo=!1);return boo&&tong.pop(),tong};sundayConvert=()=>{const newObj=new DateMatrix(this.year,this.month);return newObj.matrix=this.returnSundayMatrix(),newObj}}class DateFactor{year;month;date;day;dateObject;dayday;constructor(year,month,date,index){this.year=year,this.month=month,this.date=date,this.day=["월","화","수","목","금","토","일"][index],this.dateObject=new Date(year,month,date),this.dayday=this.dateObject.getDay()}getDateString=()=>{const zeroAddition=num=>{if("string"==typeof num){if(Number.isNaN(Number(num)))throw new Error("invaild type");num=Number(num)}return num<10?"0"+String(num):String(num)};return String(this.year)+"-"+zeroAddition(this.month+1)+"-"+zeroAddition(this.date)}}const getDateMatrix=(year,month)=>{let tempObj,tempArr,tempArr2,tempArr3;if(void 0===year&&(year=new Date),"today"===year||void 0===year&&void 0===month?(tempObj=new Date,year=tempObj.getFullYear(),month=tempObj.getMonth()):"string"==typeof year&&void 0===month&&/\-/g.test(year)?(10===year.length?(tempArr=year.split("-"),tempObj=new Date(Number(tempArr[0]),Number(tempArr[1].replace(/^0/,""))-1,Number(tempArr[2].replace(/^0/,"")))):(tempArr=year.split(" "),tempArr2=tempArr[0].split("-"),tempArr3=tempArr[1].split(":"),tempObj=new Date(Number(tempArr2[0]),Number(tempArr2[1].replace(/^0/,""))-1,Number(tempArr2[2].replace(/^0/,"")),Number(tempArr3[0].replace(/^0/,"")),Number(tempArr3[1].replace(/^0/,"")),Number(tempArr3[2].replace(/^0/,"")))),year=tempObj.getFullYear(),month=tempObj.getMonth()):"object"==typeof year&&null!==year&&year instanceof Date&&(month=year.getMonth(),year=year.getFullYear()),year=Number(year),month=Number(month),Number.isNaN(year)||Number.isNaN(month))throw new Error("invalid input");const firstDay=new Date(year,month,1).getDay(),lastDate=((year,month)=>{const today=new Date(year,month,1);let newMonth,lastDate;lastDate=-1;for(let i=27;i<33;i++)if(today.setDate(i),newMonth=today.getMonth(),month!==newMonth){lastDate=i-1;break}return lastDate})(year,month);let tempDate,arr,tong,pastLength,result,num,matrixResult;if(result=new DateMatrix(year,month),tong=[],arr=[],0!==firstDay)for(let i=0;i<firstDay-1;i++)arr.push(null);else for(let i=0;i<6;i++)arr.push(null);for(let i=1;i<lastDate+1;i++)tempDate=new Date(year,month,i),arr.push(tempDate.getDay()),arr.length%7==0&&(tong.push(arr),arr=[]);if(7!==arr.length&&0!==arr.length){pastLength=arr.length;for(let i=0;i<7-pastLength;i++)arr.push(null);tong.push(arr)}matrixResult=[],num=1;for(let arr of tong){const thisWeek=[];for(let i=0;i<arr.length;i++)if(null!==arr[i]){const thisFactor=new DateFactor(year,month,num,i);thisWeek.push(thisFactor),num++}else thisWeek.push(null);matrixResult.push(thisWeek)}return result.matrix=matrixResult,result};function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,subClass.__proto__=superClass}var _suppressOverwrites,_reverting,_context,_globalTimeline,_win,_coreInitted,_doc,_coreReady,_lastRenderedFrame,_quickTween,_tickerActive,n,c,n1,n2,n3,easeOut,_config={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},_defaults={duration:.5,overwrite:!1,delay:0},_bigNum=1e8,_2PI=2*Math.PI,_HALF_PI=_2PI/4,_gsID=0,_sqrt=Math.sqrt,_cos=Math.cos,_sin=Math.sin,_isString=function _isString(value){return"string"==typeof value},_isFunction=function _isFunction(value){return"function"==typeof value},_isNumber=function _isNumber(value){return"number"==typeof value},_isUndefined=function _isUndefined(value){return void 0===value},_isObject=function _isObject(value){return"object"==typeof value},_isNotFalse=function _isNotFalse(value){return!1!==value},_windowExists=function _windowExists(){return"undefined"!=typeof window},_isFuncOrString=function _isFuncOrString(value){return _isFunction(value)||_isString(value)},_isTypedArray="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},_isArray=Array.isArray,_strictNumExp=/(?:-?\.?\d|\.)+/gi,_numExp=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,_numWithUnitExp=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,_complexStringNumExp=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,_relExp=/[+-]=-?[.\d]+/,_delimitedValueExp=/[^,'"\[\]\s]+/gi,_unitExp=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,_globals={},_installScope={},_install=function _install(scope){return(_installScope=_merge(scope,_globals))&&gsap},_missingPlugin=function _missingPlugin(property,value){return console.warn("Invalid property",property,"set to",value,"Missing plugin? gsap.registerPlugin()")},_warn=function _warn(message,suppress){return!suppress&&console.warn(message)},_addGlobal=function _addGlobal(name,obj){return name&&(_globals[name]=obj)&&_installScope&&(_installScope[name]=obj)||_globals},_emptyFunc=function _emptyFunc(){return 0},_startAtRevertConfig={suppressEvents:!0,isStart:!0,kill:!1},_revertConfigNoKill={suppressEvents:!0,kill:!1},_revertConfig={suppressEvents:!0},_reservedProps={},_lazyTweens=[],_lazyLookup={},_plugins={},_effects={},_nextGCFrame=30,_harnessPlugins=[],_callbackNames="",_harness=function _harness(targets){var harnessPlugin,i,target=targets[0];if(_isObject(target)||_isFunction(target)||(targets=[targets]),!(harnessPlugin=(target._gsap||{}).harness)){for(i=_harnessPlugins.length;i--&&!_harnessPlugins[i].targetTest(target););harnessPlugin=_harnessPlugins[i]}for(i=targets.length;i--;)targets[i]&&(targets[i]._gsap||(targets[i]._gsap=new GSCache(targets[i],harnessPlugin)))||targets.splice(i,1);return targets},_getCache=function _getCache(target){return target._gsap||_harness(toArray(target))[0]._gsap},_getProperty=function _getProperty(target,property,v){return(v=target[property])&&_isFunction(v)?target[property]():_isUndefined(v)&&target.getAttribute&&target.getAttribute(property)||v},_forEachName=function _forEachName(names,func){return(names=names.split(",")).forEach(func)||names},_round=function _round(value){return Math.round(1e5*value)/1e5||0},_roundPrecise=function _roundPrecise(value){return Math.round(1e7*value)/1e7||0},_parseRelative=function _parseRelative(start,value){var operator=value.charAt(0),end=parseFloat(value.substr(2));return start=parseFloat(start),"+"===operator?start+end:"-"===operator?start-end:"*"===operator?start*end:start/end},_arrayContainsAny=function _arrayContainsAny(toSearch,toFind){for(var l=toFind.length,i=0;toSearch.indexOf(toFind[i])<0&&++i<l;);return i<l},_lazyRender=function _lazyRender(){var i,tween,l=_lazyTweens.length,a=_lazyTweens.slice(0);for(_lazyLookup={},_lazyTweens.length=0,i=0;i<l;i++)(tween=a[i])&&tween._lazy&&(tween.render(tween._lazy[0],tween._lazy[1],!0)._lazy=0)},_isRevertWorthy=function _isRevertWorthy(animation){return!!(animation._initted||animation._startAt||animation.add)},_lazySafeRender=function _lazySafeRender(animation,time,suppressEvents,force){_lazyTweens.length&&!_reverting&&_lazyRender(),animation.render(time,suppressEvents,force||!!(_reverting&&time<0&&_isRevertWorthy(animation))),_lazyTweens.length&&!_reverting&&_lazyRender()},_numericIfPossible=function _numericIfPossible(value){var n=parseFloat(value);return(n||0===n)&&(value+"").match(_delimitedValueExp).length<2?n:_isString(value)?value.trim():value},_passThrough=function _passThrough(p){return p},_setDefaults=function _setDefaults(obj,defaults){for(var p in defaults)p in obj||(obj[p]=defaults[p]);return obj},_merge=function _merge(base,toMerge){for(var p in toMerge)base[p]=toMerge[p];return base},_mergeDeep=function _mergeDeep(base,toMerge){for(var p in toMerge)"__proto__"!==p&&"constructor"!==p&&"prototype"!==p&&(base[p]=_isObject(toMerge[p])?_mergeDeep(base[p]||(base[p]={}),toMerge[p]):toMerge[p]);return base},_copyExcluding=function _copyExcluding(obj,excluding){var p,copy={};for(p in obj)p in excluding||(copy[p]=obj[p]);return copy},_inheritDefaults=function _inheritDefaults(vars){var parent=vars.parent||_globalTimeline,func=vars.keyframes?function _setKeyframeDefaults(excludeDuration){return function(obj,defaults){for(var p in defaults)p in obj||"duration"===p&&excludeDuration||"ease"===p||(obj[p]=defaults[p])}}(_isArray(vars.keyframes)):_setDefaults;if(_isNotFalse(vars.inherit))for(;parent;)func(vars,parent.vars.defaults),parent=parent.parent||parent._dp;return vars},_addLinkedListItem=function _addLinkedListItem(parent,child,firstProp,lastProp,sortBy){void 0===firstProp&&(firstProp="_first"),void 0===lastProp&&(lastProp="_last");var t,prev=parent[lastProp];if(sortBy)for(t=child[sortBy];prev&&prev[sortBy]>t;)prev=prev._prev;return prev?(child._next=prev._next,prev._next=child):(child._next=parent[firstProp],parent[firstProp]=child),child._next?child._next._prev=child:parent[lastProp]=child,child._prev=prev,child.parent=child._dp=parent,child},_removeLinkedListItem=function _removeLinkedListItem(parent,child,firstProp,lastProp){void 0===firstProp&&(firstProp="_first"),void 0===lastProp&&(lastProp="_last");var prev=child._prev,next=child._next;prev?prev._next=next:parent[firstProp]===child&&(parent[firstProp]=next),next?next._prev=prev:parent[lastProp]===child&&(parent[lastProp]=prev),child._next=child._prev=child.parent=null},_removeFromParent=function _removeFromParent(child,onlyIfParentHasAutoRemove){child.parent&&(!onlyIfParentHasAutoRemove||child.parent.autoRemoveChildren)&&child.parent.remove&&child.parent.remove(child),child._act=0},_uncache=function _uncache(animation,child){if(animation&&(!child||child._end>animation._dur||child._start<0))for(var a=animation;a;)a._dirty=1,a=a.parent;return animation},_rewindStartAt=function _rewindStartAt(tween,totalTime,suppressEvents,force){return tween._startAt&&(_reverting?tween._startAt.revert(_revertConfigNoKill):tween.vars.immediateRender&&!tween.vars.autoRevert||tween._startAt.render(totalTime,!0,force))},_hasNoPausedAncestors=function _hasNoPausedAncestors(animation){return!animation||animation._ts&&_hasNoPausedAncestors(animation.parent)},_elapsedCycleDuration=function _elapsedCycleDuration(animation){return animation._repeat?_animationCycle(animation._tTime,animation=animation.duration()+animation._rDelay)*animation:0},_animationCycle=function _animationCycle(tTime,cycleDuration){var whole=Math.floor(tTime=_roundPrecise(tTime/cycleDuration));return tTime&&whole===tTime?whole-1:whole},_parentToChildTotalTime=function _parentToChildTotalTime(parentTime,child){return(parentTime-child._start)*child._ts+(child._ts>=0?0:child._dirty?child.totalDuration():child._tDur)},_setEnd=function _setEnd(animation){return animation._end=_roundPrecise(animation._start+(animation._tDur/Math.abs(animation._ts||animation._rts||1e-8)||0))},_alignPlayhead=function _alignPlayhead(animation,totalTime){var parent=animation._dp;return parent&&parent.smoothChildTiming&&animation._ts&&(animation._start=_roundPrecise(parent._time-(animation._ts>0?totalTime/animation._ts:((animation._dirty?animation.totalDuration():animation._tDur)-totalTime)/-animation._ts)),_setEnd(animation),parent._dirty||_uncache(parent,animation)),animation},_postAddChecks=function _postAddChecks(timeline,child){var t;if((child._time||!child._dur&&child._initted||child._start<timeline._time&&(child._dur||!child.add))&&(t=_parentToChildTotalTime(timeline.rawTime(),child),(!child._dur||_clamp(0,child.totalDuration(),t)-child._tTime>1e-8)&&child.render(t,!0)),_uncache(timeline,child)._dp&&timeline._initted&&timeline._time>=timeline._dur&&timeline._ts){if(timeline._dur<timeline.duration())for(t=timeline;t._dp;)t.rawTime()>=0&&t.totalTime(t._tTime),t=t._dp;timeline._zTime=-1e-8}},_addToTimeline=function _addToTimeline(timeline,child,position,skipChecks){return child.parent&&_removeFromParent(child),child._start=_roundPrecise((_isNumber(position)?position:position||timeline!==_globalTimeline?_parsePosition(timeline,position,child):timeline._time)+child._delay),child._end=_roundPrecise(child._start+(child.totalDuration()/Math.abs(child.timeScale())||0)),_addLinkedListItem(timeline,child,"_first","_last",timeline._sort?"_start":0),_isFromOrFromStart(child)||(timeline._recent=child),skipChecks||_postAddChecks(timeline,child),timeline._ts<0&&_alignPlayhead(timeline,timeline._tTime),timeline},_scrollTrigger=function _scrollTrigger(animation,trigger){return(_globals.ScrollTrigger||_missingPlugin("scrollTrigger",trigger))&&_globals.ScrollTrigger.create(trigger,animation)},_attemptInitTween=function _attemptInitTween(tween,time,force,suppressEvents,tTime){return _initTween(tween,time,tTime),tween._initted?!force&&tween._pt&&!_reverting&&(tween._dur&&!1!==tween.vars.lazy||!tween._dur&&tween.vars.lazy)&&_lastRenderedFrame!==_ticker.frame?(_lazyTweens.push(tween),tween._lazy=[tTime,suppressEvents],1):void 0:1},_parentPlayheadIsBeforeStart=function _parentPlayheadIsBeforeStart(_ref){var parent=_ref.parent;return parent&&parent._ts&&parent._initted&&!parent._lock&&(parent.rawTime()<0||_parentPlayheadIsBeforeStart(parent))},_isFromOrFromStart=function _isFromOrFromStart(_ref2){var data=_ref2.data;return"isFromStart"===data||"isStart"===data},_setDuration=function _setDuration(animation,duration,skipUncache,leavePlayhead){var repeat=animation._repeat,dur=_roundPrecise(duration)||0,totalProgress=animation._tTime/animation._tDur;return totalProgress&&!leavePlayhead&&(animation._time*=dur/animation._dur),animation._dur=dur,animation._tDur=repeat?repeat<0?1e10:_roundPrecise(dur*(repeat+1)+animation._rDelay*repeat):dur,totalProgress>0&&!leavePlayhead&&_alignPlayhead(animation,animation._tTime=animation._tDur*totalProgress),animation.parent&&_setEnd(animation),skipUncache||_uncache(animation.parent,animation),animation},_onUpdateTotalDuration=function _onUpdateTotalDuration(animation){return animation instanceof Timeline?_uncache(animation):_setDuration(animation,animation._dur)},_zeroPosition={_start:0,endTime:_emptyFunc,totalDuration:_emptyFunc},_parsePosition=function _parsePosition(animation,position,percentAnimation){var i,offset,isPercent,labels=animation.labels,recent=animation._recent||_zeroPosition,clippedDuration=animation.duration()>=_bigNum?recent.endTime(!1):animation._dur;return _isString(position)&&(isNaN(position)||position in labels)?(offset=position.charAt(0),isPercent="%"===position.substr(-1),i=position.indexOf("="),"<"===offset||">"===offset?(i>=0&&(position=position.replace(/=/,"")),("<"===offset?recent._start:recent.endTime(recent._repeat>=0))+(parseFloat(position.substr(1))||0)*(isPercent?(i<0?recent:percentAnimation).totalDuration()/100:1)):i<0?(position in labels||(labels[position]=clippedDuration),labels[position]):(offset=parseFloat(position.charAt(i-1)+position.substr(i+1)),isPercent&&percentAnimation&&(offset=offset/100*(_isArray(percentAnimation)?percentAnimation[0]:percentAnimation).totalDuration()),i>1?_parsePosition(animation,position.substr(0,i-1),percentAnimation)+offset:clippedDuration+offset)):null==position?clippedDuration:+position},_createTweenType=function _createTweenType(type,params,timeline){var irVars,parent,isLegacy=_isNumber(params[1]),varsIndex=(isLegacy?2:1)+(type<2?0:1),vars=params[varsIndex];if(isLegacy&&(vars.duration=params[1]),vars.parent=timeline,type){for(irVars=vars,parent=timeline;parent&&!("immediateRender"in irVars);)irVars=parent.vars.defaults||{},parent=_isNotFalse(parent.vars.inherit)&&parent.parent;vars.immediateRender=_isNotFalse(irVars.immediateRender),type<2?vars.runBackwards=1:vars.startAt=params[varsIndex-1]}return new Tween(params[0],vars,params[varsIndex+1])},_conditionalReturn=function _conditionalReturn(value,func){return value||0===value?func(value):func},_clamp=function _clamp(min,max,value){return value<min?min:value>max?max:value},getUnit=function getUnit(value,v){return _isString(value)&&(v=_unitExp.exec(value))?v[1]:""},_slice=[].slice,_isArrayLike=function _isArrayLike(value,nonEmpty){return value&&_isObject(value)&&"length"in value&&(!nonEmpty&&!value.length||value.length-1 in value&&_isObject(value[0]))&&!value.nodeType&&value!==_win},_flatten=function _flatten(ar,leaveStrings,accumulator){return void 0===accumulator&&(accumulator=[]),ar.forEach(function(value){var _accumulator;return _isString(value)&&!leaveStrings||_isArrayLike(value,1)?(_accumulator=accumulator).push.apply(_accumulator,toArray(value)):accumulator.push(value)})||accumulator},toArray=function toArray(value,scope,leaveStrings){return _context&&!scope&&_context.selector?_context.selector(value):!_isString(value)||leaveStrings||!_coreInitted&&_wake()?_isArray(value)?_flatten(value,leaveStrings):_isArrayLike(value)?_slice.call(value,0):value?[value]:[]:_slice.call((scope||_doc).querySelectorAll(value),0)},selector=function selector(value){return value=toArray(value)[0]||_warn("Invalid scope")||{},function(v){var el=value.current||value.nativeElement||value;return toArray(v,el.querySelectorAll?el:el===value?_warn("Invalid scope")||_doc.createElement("div"):value)}},shuffle=function shuffle(a){return a.sort(function(){return.5-Math.random()})},distribute=function distribute(v){if(_isFunction(v))return v;var vars=_isObject(v)?v:{each:v},ease=_parseEase(vars.ease),from=vars.from||0,base=parseFloat(vars.base)||0,cache={},isDecimal=from>0&&from<1,ratios=isNaN(from)||isDecimal,axis=vars.axis,ratioX=from,ratioY=from;return _isString(from)?ratioX=ratioY={center:.5,edges:.5,end:1}[from]||0:!isDecimal&&ratios&&(ratioX=from[0],ratioY=from[1]),function(i,target,a){var originX,originY,x,y,d,j,max,min,wrapAt,l=(a||vars).length,distances=cache[l];if(!distances){if(!(wrapAt="auto"===vars.grid?0:(vars.grid||[1,_bigNum])[1])){for(max=-_bigNum;max<(max=a[wrapAt++].getBoundingClientRect().left)&&wrapAt<l;);wrapAt<l&&wrapAt--}for(distances=cache[l]=[],originX=ratios?Math.min(wrapAt,l)*ratioX-.5:from%wrapAt,originY=wrapAt===_bigNum?0:ratios?l*ratioY/wrapAt-.5:from/wrapAt|0,max=0,min=_bigNum,j=0;j<l;j++)x=j%wrapAt-originX,y=originY-(j/wrapAt|0),distances[j]=d=axis?Math.abs("y"===axis?y:x):_sqrt(x*x+y*y),d>max&&(max=d),d<min&&(min=d);"random"===from&&shuffle(distances),distances.max=max-min,distances.min=min,distances.v=l=(parseFloat(vars.amount)||parseFloat(vars.each)*(wrapAt>l?l-1:axis?"y"===axis?l/wrapAt:wrapAt:Math.max(wrapAt,l/wrapAt))||0)*("edges"===from?-1:1),distances.b=l<0?base-l:base,distances.u=getUnit(vars.amount||vars.each)||0,ease=ease&&l<0?_invertEase(ease):ease}return l=(distances[i]-distances.min)/distances.max||0,_roundPrecise(distances.b+(ease?ease(l):l)*distances.v)+distances.u}},_roundModifier=function _roundModifier(v){var p=Math.pow(10,((v+"").split(".")[1]||"").length);return function(raw){var n=_roundPrecise(Math.round(parseFloat(raw)/v)*v*p);return(n-n%1)/p+(_isNumber(raw)?0:getUnit(raw))}},snap=function snap(snapTo,value){var radius,is2D,isArray=_isArray(snapTo);return!isArray&&_isObject(snapTo)&&(radius=isArray=snapTo.radius||_bigNum,snapTo.values?(snapTo=toArray(snapTo.values),(is2D=!_isNumber(snapTo[0]))&&(radius*=radius)):snapTo=_roundModifier(snapTo.increment)),_conditionalReturn(value,isArray?_isFunction(snapTo)?function(raw){return is2D=snapTo(raw),Math.abs(is2D-raw)<=radius?is2D:raw}:function(raw){for(var dx,dy,x=parseFloat(is2D?raw.x:raw),y=parseFloat(is2D?raw.y:0),min=_bigNum,closest=0,i=snapTo.length;i--;)(dx=is2D?(dx=snapTo[i].x-x)*dx+(dy=snapTo[i].y-y)*dy:Math.abs(snapTo[i]-x))<min&&(min=dx,closest=i);return closest=!radius||min<=radius?snapTo[closest]:raw,is2D||closest===raw||_isNumber(raw)?closest:closest+getUnit(raw)}:_roundModifier(snapTo))},random=function random(min,max,roundingIncrement,returnFunction){return _conditionalReturn(_isArray(min)?!max:!0===roundingIncrement?!!(roundingIncrement=0):!returnFunction,function(){return _isArray(min)?min[~~(Math.random()*min.length)]:(roundingIncrement=roundingIncrement||1e-5)&&(returnFunction=roundingIncrement<1?Math.pow(10,(roundingIncrement+"").length-2):1)&&Math.floor(Math.round((min-roundingIncrement/2+Math.random()*(max-min+.99*roundingIncrement))/roundingIncrement)*roundingIncrement*returnFunction)/returnFunction})},_wrapArray=function _wrapArray(a,wrapper,value){return _conditionalReturn(value,function(index){return a[~~wrapper(index)]})},_replaceRandom=function _replaceRandom(value){for(var i,nums,end,isArray,prev=0,s="";~(i=value.indexOf("random(",prev));)end=value.indexOf(")",i),isArray="["===value.charAt(i+7),nums=value.substr(i+7,end-i-7).match(isArray?_delimitedValueExp:_strictNumExp),s+=value.substr(prev,i-prev)+random(isArray?nums:+nums[0],isArray?0:+nums[1],+nums[2]||1e-5),prev=end+1;return s+value.substr(prev,value.length-prev)},mapRange=function mapRange(inMin,inMax,outMin,outMax,value){var inRange=inMax-inMin,outRange=outMax-outMin;return _conditionalReturn(value,function(value){return outMin+((value-inMin)/inRange*outRange||0)})},_getLabelInDirection=function _getLabelInDirection(timeline,fromTime,backward){var p,distance,label,labels=timeline.labels,min=_bigNum;for(p in labels)(distance=labels[p]-fromTime)<0==!!backward&&distance&&min>(distance=Math.abs(distance))&&(label=p,min=distance);return label},_callback=function _callback(animation,type,executeLazyFirst){var params,scope,result,v=animation.vars,callback=v[type],prevContext=_context,context=animation._ctx;if(callback)return params=v[type+"Params"],scope=v.callbackScope||animation,executeLazyFirst&&_lazyTweens.length&&_lazyRender(),context&&(_context=context),result=params?callback.apply(scope,params):callback.call(scope),_context=prevContext,result},_interrupt=function _interrupt(animation){return _removeFromParent(animation),animation.scrollTrigger&&animation.scrollTrigger.kill(!!_reverting),animation.progress()<1&&_callback(animation,"onInterrupt"),animation},_registerPluginQueue=[],_createPlugin=function _createPlugin(config){if(config)if(config=!config.name&&config.default||config,_windowExists()||config.headless){var name=config.name,isFunc=_isFunction(config),Plugin=name&&!isFunc&&config.init?function(){this._props=[]}:config,instanceDefaults={init:_emptyFunc,render:_renderPropTweens,add:_addPropTween,kill:_killPropTweensOf,modifier:_addPluginModifier,rawVars:0},statics={targetTest:0,get:0,getSetter:_getSetter,aliases:{},register:0};if(_wake(),config!==Plugin){if(_plugins[name])return;_setDefaults(Plugin,_setDefaults(_copyExcluding(config,instanceDefaults),statics)),_merge(Plugin.prototype,_merge(instanceDefaults,_copyExcluding(config,statics))),_plugins[Plugin.prop=name]=Plugin,config.targetTest&&(_harnessPlugins.push(Plugin),_reservedProps[name]=1),name=("css"===name?"CSS":name.charAt(0).toUpperCase()+name.substr(1))+"Plugin"}_addGlobal(name,Plugin),config.register&&config.register(gsap,Plugin,PropTween)}else _registerPluginQueue.push(config)},_colorLookup={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},_hue=function _hue(h,m1,m2){return 255*(6*(h+=h<0?1:h>1?-1:0)<1?m1+(m2-m1)*h*6:h<.5?m2:3*h<2?m1+(m2-m1)*(2/3-h)*6:m1)+.5|0},splitColor=function splitColor(v,toHSL,forceAlpha){var r,g,b,h,s,l,max,min,d,wasHSL,a=v?_isNumber(v)?[v>>16,v>>8&255,255&v]:0:_colorLookup.black;if(!a){if(","===v.substr(-1)&&(v=v.substr(0,v.length-1)),_colorLookup[v])a=_colorLookup[v];else if("#"===v.charAt(0)){if(v.length<6&&(r=v.charAt(1),g=v.charAt(2),b=v.charAt(3),v="#"+r+r+g+g+b+b+(5===v.length?v.charAt(4)+v.charAt(4):"")),9===v.length)return[(a=parseInt(v.substr(1,6),16))>>16,a>>8&255,255&a,parseInt(v.substr(7),16)/255];a=[(v=parseInt(v.substr(1),16))>>16,v>>8&255,255&v]}else if("hsl"===v.substr(0,3))if(a=wasHSL=v.match(_strictNumExp),toHSL){if(~v.indexOf("="))return a=v.match(_numExp),forceAlpha&&a.length<4&&(a[3]=1),a}else h=+a[0]%360/360,s=+a[1]/100,r=2*(l=+a[2]/100)-(g=l<=.5?l*(s+1):l+s-l*s),a.length>3&&(a[3]*=1),a[0]=_hue(h+1/3,r,g),a[1]=_hue(h,r,g),a[2]=_hue(h-1/3,r,g);else a=v.match(_strictNumExp)||_colorLookup.transparent;a=a.map(Number)}return toHSL&&!wasHSL&&(r=a[0]/255,g=a[1]/255,b=a[2]/255,l=((max=Math.max(r,g,b))+(min=Math.min(r,g,b)))/2,max===min?h=s=0:(d=max-min,s=l>.5?d/(2-max-min):d/(max+min),h=max===r?(g-b)/d+(g<b?6:0):max===g?(b-r)/d+2:(r-g)/d+4,h*=60),a[0]=~~(h+.5),a[1]=~~(100*s+.5),a[2]=~~(100*l+.5)),forceAlpha&&a.length<4&&(a[3]=1),a},_colorOrderData=function _colorOrderData(v){var values=[],c=[],i=-1;return v.split(_colorExp).forEach(function(v){var a=v.match(_numWithUnitExp)||[];values.push.apply(values,a),c.push(i+=a.length+1)}),values.c=c,values},_formatColors=function _formatColors(s,toHSL,orderMatchData){var c,shell,d,l,result="",colors=(s+result).match(_colorExp),type=toHSL?"hsla(":"rgba(",i=0;if(!colors)return s;if(colors=colors.map(function(color){return(color=splitColor(color,toHSL,1))&&type+(toHSL?color[0]+","+color[1]+"%,"+color[2]+"%,"+color[3]:color.join(","))+")"}),orderMatchData&&(d=_colorOrderData(s),(c=orderMatchData.c).join(result)!==d.c.join(result)))for(l=(shell=s.replace(_colorExp,"1").split(_numWithUnitExp)).length-1;i<l;i++)result+=shell[i]+(~c.indexOf(i)?colors.shift()||type+"0,0,0,0)":(d.length?d:colors.length?colors:orderMatchData).shift());if(!shell)for(l=(shell=s.split(_colorExp)).length-1;i<l;i++)result+=shell[i]+colors[i];return result+shell[l]},_colorExp=function(){var p,s="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(p in _colorLookup)s+="|"+p+"\\b";return new RegExp(s+")","gi")}(),_hslExp=/hsl[a]?\(/,_colorStringFilter=function _colorStringFilter(a){var toHSL,combined=a.join(" ");if(_colorExp.lastIndex=0,_colorExp.test(combined))return toHSL=_hslExp.test(combined),a[1]=_formatColors(a[1],toHSL),a[0]=_formatColors(a[0],toHSL,_colorOrderData(a[1])),!0},_ticker=function(){var _id,_req,_raf,_self,_delta,_i,_getTime=Date.now,_lagThreshold=500,_adjustedLag=33,_startTime=_getTime(),_lastUpdate=_startTime,_gap=1e3/240,_nextTime=_gap,_listeners=[],_tick=function _tick(v){var overlap,dispatch,time,frame,elapsed=_getTime()-_lastUpdate,manual=!0===v;if((elapsed>_lagThreshold||elapsed<0)&&(_startTime+=elapsed-_adjustedLag),((overlap=(time=(_lastUpdate+=elapsed)-_startTime)-_nextTime)>0||manual)&&(frame=++_self.frame,_delta=time-1e3*_self.time,_self.time=time/=1e3,_nextTime+=overlap+(overlap>=_gap?4:_gap-overlap),dispatch=1),manual||(_id=_req(_tick)),dispatch)for(_i=0;_i<_listeners.length;_i++)_listeners[_i](time,_delta,frame,v)};return _self={time:0,frame:0,tick:function tick(){_tick(!0)},deltaRatio:function deltaRatio(fps){return _delta/(1e3/(fps||60))},wake:function wake(){_coreReady&&(!_coreInitted&&_windowExists()&&(_win=_coreInitted=window,_doc=_win.document||{},_globals.gsap=gsap,(_win.gsapVersions||(_win.gsapVersions=[])).push(gsap.version),_install(_installScope||_win.GreenSockGlobals||!_win.gsap&&_win||{}),_registerPluginQueue.forEach(_createPlugin)),_raf="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,_id&&_self.sleep(),_req=_raf||function(f){return setTimeout(f,_nextTime-1e3*_self.time+1|0)},_tickerActive=1,_tick(2))},sleep:function sleep(){(_raf?cancelAnimationFrame:clearTimeout)(_id),_tickerActive=0,_req=_emptyFunc},lagSmoothing:function lagSmoothing(threshold,adjustedLag){_lagThreshold=threshold||1/0,_adjustedLag=Math.min(adjustedLag||33,_lagThreshold)},fps:function fps(_fps){_gap=1e3/(_fps||240),_nextTime=1e3*_self.time+_gap},add:function add(callback,once,prioritize){var func=once?function(t,d,f,v){callback(t,d,f,v),_self.remove(func)}:callback;return _self.remove(callback),_listeners[prioritize?"unshift":"push"](func),_wake(),func},remove:function remove(callback,i){~(i=_listeners.indexOf(callback))&&_listeners.splice(i,1)&&_i>=i&&_i--},_listeners},_self}(),_wake=function _wake(){return!_tickerActive&&_ticker.wake()},_easeMap={},_customEaseExp=/^[\d.\-M][\d.\-,\s]/,_quotesExp=/["']/g,_parseObjectInString=function _parseObjectInString(value){for(var index,val,parsedVal,obj={},split=value.substr(1,value.length-3).split(":"),key=split[0],i=1,l=split.length;i<l;i++)val=split[i],index=i!==l-1?val.lastIndexOf(","):val.length,parsedVal=val.substr(0,index),obj[key]=isNaN(parsedVal)?parsedVal.replace(_quotesExp,"").trim():+parsedVal,key=val.substr(index+1).trim();return obj},_invertEase=function _invertEase(ease){return function(p){return 1-ease(1-p)}},_propagateYoyoEase=function _propagateYoyoEase(timeline,isYoyo){for(var ease,child=timeline._first;child;)child instanceof Timeline?_propagateYoyoEase(child,isYoyo):!child.vars.yoyoEase||child._yoyo&&child._repeat||child._yoyo===isYoyo||(child.timeline?_propagateYoyoEase(child.timeline,isYoyo):(ease=child._ease,child._ease=child._yEase,child._yEase=ease,child._yoyo=isYoyo)),child=child._next},_parseEase=function _parseEase(ease,defaultEase){return ease&&(_isFunction(ease)?ease:_easeMap[ease]||function _configEaseFromString(name){var split=(name+"").split("("),ease=_easeMap[split[0]];return ease&&split.length>1&&ease.config?ease.config.apply(null,~name.indexOf("{")?[_parseObjectInString(split[1])]:function _valueInParentheses(value){var open=value.indexOf("(")+1,close=value.indexOf(")"),nested=value.indexOf("(",open);return value.substring(open,~nested&&nested<close?value.indexOf(")",close+1):close)}(name).split(",").map(_numericIfPossible)):_easeMap._CE&&_customEaseExp.test(name)?_easeMap._CE("",name):ease}(ease))||defaultEase},_insertEase=function _insertEase(names,easeIn,easeOut,easeInOut){void 0===easeOut&&(easeOut=function easeOut(p){return 1-easeIn(1-p)}),void 0===easeInOut&&(easeInOut=function easeInOut(p){return p<.5?easeIn(2*p)/2:1-easeIn(2*(1-p))/2});var lowercaseName,ease={easeIn,easeOut,easeInOut};return _forEachName(names,function(name){for(var p in _easeMap[name]=_globals[name]=ease,_easeMap[lowercaseName=name.toLowerCase()]=easeOut,ease)_easeMap[lowercaseName+("easeIn"===p?".in":"easeOut"===p?".out":".inOut")]=_easeMap[name+"."+p]=ease[p]}),ease},_easeInOutFromOut=function _easeInOutFromOut(easeOut){return function(p){return p<.5?(1-easeOut(1-2*p))/2:.5+easeOut(2*(p-.5))/2}},_configElastic=function _configElastic(type,amplitude,period){var p1=amplitude>=1?amplitude:1,p2=(period||(type?.3:.45))/(amplitude<1?amplitude:1),p3=p2/_2PI*(Math.asin(1/p1)||0),easeOut=function easeOut(p){return 1===p?1:p1*Math.pow(2,-10*p)*_sin((p-p3)*p2)+1},ease="out"===type?easeOut:"in"===type?function(p){return 1-easeOut(1-p)}:_easeInOutFromOut(easeOut);return p2=_2PI/p2,ease.config=function(amplitude,period){return _configElastic(type,amplitude,period)},ease},_configBack=function _configBack(type,overshoot){void 0===overshoot&&(overshoot=1.70158);var easeOut=function easeOut(p){return p?--p*p*((overshoot+1)*p+overshoot)+1:0},ease="out"===type?easeOut:"in"===type?function(p){return 1-easeOut(1-p)}:_easeInOutFromOut(easeOut);return ease.config=function(overshoot){return _configBack(type,overshoot)},ease};_forEachName("Linear,Quad,Cubic,Quart,Quint,Strong",function(name,i){var power=i<5?i+1:i;_insertEase(name+",Power"+(power-1),i?function(p){return Math.pow(p,power)}:function(p){return p},function(p){return 1-Math.pow(1-p,power)},function(p){return p<.5?Math.pow(2*p,power)/2:1-Math.pow(2*(1-p),power)/2})}),_easeMap.Linear.easeNone=_easeMap.none=_easeMap.Linear.easeIn,_insertEase("Elastic",_configElastic("in"),_configElastic("out"),_configElastic()),n=7.5625,n2=2*(n1=1/(c=2.75)),n3=2.5*n1,_insertEase("Bounce",function(p){return 1-easeOut(1-p)},easeOut=function easeOut(p){return p<n1?n*p*p:p<n2?n*Math.pow(p-1.5/c,2)+.75:p<n3?n*(p-=2.25/c)*p+.9375:n*Math.pow(p-2.625/c,2)+.984375}),_insertEase("Expo",function(p){return Math.pow(2,10*(p-1))*p+p*p*p*p*p*p*(1-p)}),_insertEase("Circ",function(p){return-(_sqrt(1-p*p)-1)}),_insertEase("Sine",function(p){return 1===p?1:1-_cos(p*_HALF_PI)}),_insertEase("Back",_configBack("in"),_configBack("out"),_configBack()),_easeMap.SteppedEase=_easeMap.steps=_globals.SteppedEase={config:function config(steps,immediateStart){void 0===steps&&(steps=1);var p1=1/steps,p2=steps+(immediateStart?0:1),p3=immediateStart?1:0;return function(p){return((p2*_clamp(0,.99999999,p)|0)+p3)*p1}}},_defaults.ease=_easeMap["quad.out"],_forEachName("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(name){return _callbackNames+=name+","+name+"Params,"});var GSCache=function GSCache(target,harness){this.id=_gsID++,target._gsap=this,this.target=target,this.harness=harness,this.get=harness?harness.get:_getProperty,this.set=harness?harness.getSetter:_getSetter},Animation=function(){function Animation(vars){this.vars=vars,this._delay=+vars.delay||0,(this._repeat=vars.repeat===1/0?-2:vars.repeat||0)&&(this._rDelay=vars.repeatDelay||0,this._yoyo=!!vars.yoyo||!!vars.yoyoEase),this._ts=1,_setDuration(this,+vars.duration,1,1),this.data=vars.data,_context&&(this._ctx=_context,_context.data.push(this)),_tickerActive||_ticker.wake()}var _proto=Animation.prototype;return _proto.delay=function delay(value){return value||0===value?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+value-this._delay),this._delay=value,this):this._delay},_proto.duration=function duration(value){return arguments.length?this.totalDuration(this._repeat>0?value+(value+this._rDelay)*this._repeat:value):this.totalDuration()&&this._dur},_proto.totalDuration=function totalDuration(value){return arguments.length?(this._dirty=0,_setDuration(this,this._repeat<0?value:(value-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},_proto.totalTime=function totalTime(_totalTime,suppressEvents){if(_wake(),!arguments.length)return this._tTime;var parent=this._dp;if(parent&&parent.smoothChildTiming&&this._ts){for(_alignPlayhead(this,_totalTime),!parent._dp||parent.parent||_postAddChecks(parent,this);parent&&parent.parent;)parent.parent._time!==parent._start+(parent._ts>=0?parent._tTime/parent._ts:(parent.totalDuration()-parent._tTime)/-parent._ts)&&parent.totalTime(parent._tTime,!0),parent=parent.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&_totalTime<this._tDur||this._ts<0&&_totalTime>0||!this._tDur&&!_totalTime)&&_addToTimeline(this._dp,this,this._start-this._delay)}return(this._tTime!==_totalTime||!this._dur&&!suppressEvents||this._initted&&1e-8===Math.abs(this._zTime)||!_totalTime&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=_totalTime),_lazySafeRender(this,_totalTime,suppressEvents)),this},_proto.time=function time(value,suppressEvents){return arguments.length?this.totalTime(Math.min(this.totalDuration(),value+_elapsedCycleDuration(this))%(this._dur+this._rDelay)||(value?this._dur:0),suppressEvents):this._time},_proto.totalProgress=function totalProgress(value,suppressEvents){return arguments.length?this.totalTime(this.totalDuration()*value,suppressEvents):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},_proto.progress=function progress(value,suppressEvents){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?value:1-value)+_elapsedCycleDuration(this),suppressEvents):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},_proto.iteration=function iteration(value,suppressEvents){var cycleDuration=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(value-1)*cycleDuration,suppressEvents):this._repeat?_animationCycle(this._tTime,cycleDuration)+1:1},_proto.timeScale=function timeScale(value,suppressEvents){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===value)return this;var tTime=this.parent&&this._ts?_parentToChildTotalTime(this.parent._time,this):this._tTime;return this._rts=+value||0,this._ts=this._ps||-1e-8===value?0:this._rts,this.totalTime(_clamp(-Math.abs(this._delay),this.totalDuration(),tTime),!1!==suppressEvents),_setEnd(this),function _recacheAncestors(animation){for(var parent=animation.parent;parent&&parent.parent;)parent._dirty=1,parent.totalDuration(),parent=parent.parent;return animation}(this)},_proto.paused=function paused(value){return arguments.length?(this._ps!==value&&(this._ps=value,value?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(_wake(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&1e-8!==Math.abs(this._zTime)&&(this._tTime-=1e-8)))),this):this._ps},_proto.startTime=function startTime(value){if(arguments.length){this._start=value;var parent=this.parent||this._dp;return parent&&(parent._sort||!this.parent)&&_addToTimeline(parent,this,value-this._delay),this}return this._start},_proto.endTime=function endTime(includeRepeats){return this._start+(_isNotFalse(includeRepeats)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},_proto.rawTime=function rawTime(wrapRepeats){var parent=this.parent||this._dp;return parent?wrapRepeats&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?_parentToChildTotalTime(parent.rawTime(wrapRepeats),this):this._tTime:this._tTime},_proto.revert=function revert(config){void 0===config&&(config=_revertConfig);var prevIsReverting=_reverting;return _reverting=config,_isRevertWorthy(this)&&(this.timeline&&this.timeline.revert(config),this.totalTime(-.01,config.suppressEvents)),"nested"!==this.data&&!1!==config.kill&&this.kill(),_reverting=prevIsReverting,this},_proto.globalTime=function globalTime(rawTime){for(var animation=this,time=arguments.length?rawTime:animation.rawTime();animation;)time=animation._start+time/(Math.abs(animation._ts)||1),animation=animation._dp;return!this.parent&&this._sat?this._sat.globalTime(rawTime):time},_proto.repeat=function repeat(value){return arguments.length?(this._repeat=value===1/0?-2:value,_onUpdateTotalDuration(this)):-2===this._repeat?1/0:this._repeat},_proto.repeatDelay=function repeatDelay(value){if(arguments.length){var time=this._time;return this._rDelay=value,_onUpdateTotalDuration(this),time?this.time(time):this}return this._rDelay},_proto.yoyo=function yoyo(value){return arguments.length?(this._yoyo=value,this):this._yoyo},_proto.seek=function seek(position,suppressEvents){return this.totalTime(_parsePosition(this,position),_isNotFalse(suppressEvents))},_proto.restart=function restart(includeDelay,suppressEvents){return this.play().totalTime(includeDelay?-this._delay:0,_isNotFalse(suppressEvents)),this._dur||(this._zTime=-1e-8),this},_proto.play=function play(from,suppressEvents){return null!=from&&this.seek(from,suppressEvents),this.reversed(!1).paused(!1)},_proto.reverse=function reverse(from,suppressEvents){return null!=from&&this.seek(from||this.totalDuration(),suppressEvents),this.reversed(!0).paused(!1)},_proto.pause=function pause(atTime,suppressEvents){return null!=atTime&&this.seek(atTime,suppressEvents),this.paused(!0)},_proto.resume=function resume(){return this.paused(!1)},_proto.reversed=function reversed(value){return arguments.length?(!!value!==this.reversed()&&this.timeScale(-this._rts||(value?-1e-8:0)),this):this._rts<0},_proto.invalidate=function invalidate(){return this._initted=this._act=0,this._zTime=-1e-8,this},_proto.isActive=function isActive(){var rawTime,parent=this.parent||this._dp,start=this._start;return!(parent&&!(this._ts&&this._initted&&parent.isActive()&&(rawTime=parent.rawTime(!0))>=start&&rawTime<this.endTime(!0)-1e-8))},_proto.eventCallback=function eventCallback(type,callback,params){var vars=this.vars;return arguments.length>1?(callback?(vars[type]=callback,params&&(vars[type+"Params"]=params),"onUpdate"===type&&(this._onUpdate=callback)):delete vars[type],this):vars[type]},_proto.then=function then(onFulfilled){var self=this;return new Promise(function(resolve){var f=_isFunction(onFulfilled)?onFulfilled:_passThrough,_resolve=function _resolve(){var _then=self.then;self.then=null,_isFunction(f)&&(f=f(self))&&(f.then||f===self)&&(self.then=_then),resolve(f),self.then=_then};self._initted&&1===self.totalProgress()&&self._ts>=0||!self._tTime&&self._ts<0?_resolve():self._prom=_resolve})},_proto.kill=function kill(){_interrupt(this)},Animation}();_setDefaults(Animation.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Timeline=function(_Animation){function Timeline(vars,position){var _this;return void 0===vars&&(vars={}),(_this=_Animation.call(this,vars)||this).labels={},_this.smoothChildTiming=!!vars.smoothChildTiming,_this.autoRemoveChildren=!!vars.autoRemoveChildren,_this._sort=_isNotFalse(vars.sortChildren),_globalTimeline&&_addToTimeline(vars.parent||_globalTimeline,_assertThisInitialized(_this),position),vars.reversed&&_this.reverse(),vars.paused&&_this.paused(!0),vars.scrollTrigger&&_scrollTrigger(_assertThisInitialized(_this),vars.scrollTrigger),_this}_inheritsLoose(Timeline,_Animation);var _proto2=Timeline.prototype;return _proto2.to=function to(targets,vars,position){return _createTweenType(0,arguments,this),this},_proto2.from=function from(targets,vars,position){return _createTweenType(1,arguments,this),this},_proto2.fromTo=function fromTo(targets,fromVars,toVars,position){return _createTweenType(2,arguments,this),this},_proto2.set=function set(targets,vars,position){return vars.duration=0,vars.parent=this,_inheritDefaults(vars).repeatDelay||(vars.repeat=0),vars.immediateRender=!!vars.immediateRender,new Tween(targets,vars,_parsePosition(this,position),1),this},_proto2.call=function call(callback,params,position){return _addToTimeline(this,Tween.delayedCall(0,callback,params),position)},_proto2.staggerTo=function staggerTo(targets,duration,vars,stagger,position,onCompleteAll,onCompleteAllParams){return vars.duration=duration,vars.stagger=vars.stagger||stagger,vars.onComplete=onCompleteAll,vars.onCompleteParams=onCompleteAllParams,vars.parent=this,new Tween(targets,vars,_parsePosition(this,position)),this},_proto2.staggerFrom=function staggerFrom(targets,duration,vars,stagger,position,onCompleteAll,onCompleteAllParams){return vars.runBackwards=1,_inheritDefaults(vars).immediateRender=_isNotFalse(vars.immediateRender),this.staggerTo(targets,duration,vars,stagger,position,onCompleteAll,onCompleteAllParams)},_proto2.staggerFromTo=function staggerFromTo(targets,duration,fromVars,toVars,stagger,position,onCompleteAll,onCompleteAllParams){return toVars.startAt=fromVars,_inheritDefaults(toVars).immediateRender=_isNotFalse(toVars.immediateRender),this.staggerTo(targets,duration,toVars,stagger,position,onCompleteAll,onCompleteAllParams)},_proto2.render=function render(totalTime,suppressEvents,force){var time,child,next,iteration,cycleDuration,prevPaused,pauseTween,timeScale,prevStart,prevIteration,yoyo,isYoyo,prevTime=this._time,tDur=this._dirty?this.totalDuration():this._tDur,dur=this._dur,tTime=totalTime<=0?0:_roundPrecise(totalTime),crossingStart=this._zTime<0!=totalTime<0&&(this._initted||!dur);if(this!==_globalTimeline&&tTime>tDur&&totalTime>=0&&(tTime=tDur),tTime!==this._tTime||force||crossingStart){if(prevTime!==this._time&&dur&&(tTime+=this._time-prevTime,totalTime+=this._time-prevTime),time=tTime,prevStart=this._start,prevPaused=!(timeScale=this._ts),crossingStart&&(dur||(prevTime=this._zTime),(totalTime||!suppressEvents)&&(this._zTime=totalTime)),this._repeat){if(yoyo=this._yoyo,cycleDuration=dur+this._rDelay,this._repeat<-1&&totalTime<0)return this.totalTime(100*cycleDuration+totalTime,suppressEvents,force);if(time=_roundPrecise(tTime%cycleDuration),tTime===tDur?(iteration=this._repeat,time=dur):((iteration=~~(prevIteration=_roundPrecise(tTime/cycleDuration)))&&iteration===prevIteration&&(time=dur,iteration--),time>dur&&(time=dur)),prevIteration=_animationCycle(this._tTime,cycleDuration),!prevTime&&this._tTime&&prevIteration!==iteration&&this._tTime-prevIteration*cycleDuration-this._dur<=0&&(prevIteration=iteration),yoyo&&1&iteration&&(time=dur-time,isYoyo=1),iteration!==prevIteration&&!this._lock){var rewinding=yoyo&&1&prevIteration,doesWrap=rewinding===(yoyo&&1&iteration);if(iteration<prevIteration&&(rewinding=!rewinding),prevTime=rewinding?0:tTime%dur?dur:tTime,this._lock=1,this.render(prevTime||(isYoyo?0:_roundPrecise(iteration*cycleDuration)),suppressEvents,!dur)._lock=0,this._tTime=tTime,!suppressEvents&&this.parent&&_callback(this,"onRepeat"),this.vars.repeatRefresh&&!isYoyo&&(this.invalidate()._lock=1),prevTime&&prevTime!==this._time||prevPaused!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(dur=this._dur,tDur=this._tDur,doesWrap&&(this._lock=2,prevTime=rewinding?dur:-1e-4,this.render(prevTime,!0),this.vars.repeatRefresh&&!isYoyo&&this.invalidate()),this._lock=0,!this._ts&&!prevPaused)return this;_propagateYoyoEase(this,isYoyo)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(pauseTween=function _findNextPauseTween(animation,prevTime,time){var child;if(time>prevTime)for(child=animation._first;child&&child._start<=time;){if("isPause"===child.data&&child._start>prevTime)return child;child=child._next}else for(child=animation._last;child&&child._start>=time;){if("isPause"===child.data&&child._start<prevTime)return child;child=child._prev}}(this,_roundPrecise(prevTime),_roundPrecise(time)),pauseTween&&(tTime-=time-(time=pauseTween._start))),this._tTime=tTime,this._time=time,this._act=!timeScale,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=totalTime,prevTime=0),!prevTime&&tTime&&!suppressEvents&&!prevIteration&&(_callback(this,"onStart"),this._tTime!==tTime))return this;if(time>=prevTime&&totalTime>=0)for(child=this._first;child;){if(next=child._next,(child._act||time>=child._start)&&child._ts&&pauseTween!==child){if(child.parent!==this)return this.render(totalTime,suppressEvents,force);if(child.render(child._ts>0?(time-child._start)*child._ts:(child._dirty?child.totalDuration():child._tDur)+(time-child._start)*child._ts,suppressEvents,force),time!==this._time||!this._ts&&!prevPaused){pauseTween=0,next&&(tTime+=this._zTime=-1e-8);break}}child=next}else{child=this._last;for(var adjustedTime=totalTime<0?totalTime:time;child;){if(next=child._prev,(child._act||adjustedTime<=child._end)&&child._ts&&pauseTween!==child){if(child.parent!==this)return this.render(totalTime,suppressEvents,force);if(child.render(child._ts>0?(adjustedTime-child._start)*child._ts:(child._dirty?child.totalDuration():child._tDur)+(adjustedTime-child._start)*child._ts,suppressEvents,force||_reverting&&_isRevertWorthy(child)),time!==this._time||!this._ts&&!prevPaused){pauseTween=0,next&&(tTime+=this._zTime=adjustedTime?-1e-8:1e-8);break}}child=next}}if(pauseTween&&!suppressEvents&&(this.pause(),pauseTween.render(time>=prevTime?0:-1e-8)._zTime=time>=prevTime?1:-1,this._ts))return this._start=prevStart,_setEnd(this),this.render(totalTime,suppressEvents,force);this._onUpdate&&!suppressEvents&&_callback(this,"onUpdate",!0),(tTime===tDur&&this._tTime>=this.totalDuration()||!tTime&&prevTime)&&(prevStart!==this._start&&Math.abs(timeScale)===Math.abs(this._ts)||this._lock||((totalTime||!dur)&&(tTime===tDur&&this._ts>0||!tTime&&this._ts<0)&&_removeFromParent(this,1),suppressEvents||totalTime<0&&!prevTime||!tTime&&!prevTime&&tDur||(_callback(this,tTime===tDur&&totalTime>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(tTime<tDur&&this.timeScale()>0)&&this._prom())))}return this},_proto2.add=function add(child,position){var _this2=this;if(_isNumber(position)||(position=_parsePosition(this,position,child)),!(child instanceof Animation)){if(_isArray(child))return child.forEach(function(obj){return _this2.add(obj,position)}),this;if(_isString(child))return this.addLabel(child,position);if(!_isFunction(child))return this;child=Tween.delayedCall(0,child)}return this!==child?_addToTimeline(this,child,position):this},_proto2.getChildren=function getChildren(nested,tweens,timelines,ignoreBeforeTime){void 0===nested&&(nested=!0),void 0===tweens&&(tweens=!0),void 0===timelines&&(timelines=!0),void 0===ignoreBeforeTime&&(ignoreBeforeTime=-_bigNum);for(var a=[],child=this._first;child;)child._start>=ignoreBeforeTime&&(child instanceof Tween?tweens&&a.push(child):(timelines&&a.push(child),nested&&a.push.apply(a,child.getChildren(!0,tweens,timelines)))),child=child._next;return a},_proto2.getById=function getById(id){for(var animations=this.getChildren(1,1,1),i=animations.length;i--;)if(animations[i].vars.id===id)return animations[i]},_proto2.remove=function remove(child){return _isString(child)?this.removeLabel(child):_isFunction(child)?this.killTweensOf(child):(child.parent===this&&_removeLinkedListItem(this,child),child===this._recent&&(this._recent=this._last),_uncache(this))},_proto2.totalTime=function totalTime(_totalTime2,suppressEvents){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=_roundPrecise(_ticker.time-(this._ts>0?_totalTime2/this._ts:(this.totalDuration()-_totalTime2)/-this._ts))),_Animation.prototype.totalTime.call(this,_totalTime2,suppressEvents),this._forcing=0,this):this._tTime},_proto2.addLabel=function addLabel(label,position){return this.labels[label]=_parsePosition(this,position),this},_proto2.removeLabel=function removeLabel(label){return delete this.labels[label],this},_proto2.addPause=function addPause(position,callback,params){var t=Tween.delayedCall(0,callback||_emptyFunc,params);return t.data="isPause",this._hasPause=1,_addToTimeline(this,t,_parsePosition(this,position))},_proto2.removePause=function removePause(position){var child=this._first;for(position=_parsePosition(this,position);child;)child._start===position&&"isPause"===child.data&&_removeFromParent(child),child=child._next},_proto2.killTweensOf=function killTweensOf(targets,props,onlyActive){for(var tweens=this.getTweensOf(targets,onlyActive),i=tweens.length;i--;)_overwritingTween!==tweens[i]&&tweens[i].kill(targets,props);return this},_proto2.getTweensOf=function getTweensOf(targets,onlyActive){for(var children,a=[],parsedTargets=toArray(targets),child=this._first,isGlobalTime=_isNumber(onlyActive);child;)child instanceof Tween?_arrayContainsAny(child._targets,parsedTargets)&&(isGlobalTime?(!_overwritingTween||child._initted&&child._ts)&&child.globalTime(0)<=onlyActive&&child.globalTime(child.totalDuration())>onlyActive:!onlyActive||child.isActive())&&a.push(child):(children=child.getTweensOf(parsedTargets,onlyActive)).length&&a.push.apply(a,children),child=child._next;return a},_proto2.tweenTo=function tweenTo(position,vars){vars=vars||{};var initted,tl=this,endTime=_parsePosition(tl,position),_vars=vars,startAt=_vars.startAt,_onStart=_vars.onStart,onStartParams=_vars.onStartParams,immediateRender=_vars.immediateRender,tween=Tween.to(tl,_setDefaults({ease:vars.ease||"none",lazy:!1,immediateRender:!1,time:endTime,overwrite:"auto",duration:vars.duration||Math.abs((endTime-(startAt&&"time"in startAt?startAt.time:tl._time))/tl.timeScale())||1e-8,onStart:function onStart(){if(tl.pause(),!initted){var duration=vars.duration||Math.abs((endTime-(startAt&&"time"in startAt?startAt.time:tl._time))/tl.timeScale());tween._dur!==duration&&_setDuration(tween,duration,0,1).render(tween._time,!0,!0),initted=1}_onStart&&_onStart.apply(tween,onStartParams||[])}},vars));return immediateRender?tween.render(0):tween},_proto2.tweenFromTo=function tweenFromTo(fromPosition,toPosition,vars){return this.tweenTo(toPosition,_setDefaults({startAt:{time:_parsePosition(this,fromPosition)}},vars))},_proto2.recent=function recent(){return this._recent},_proto2.nextLabel=function nextLabel(afterTime){return void 0===afterTime&&(afterTime=this._time),_getLabelInDirection(this,_parsePosition(this,afterTime))},_proto2.previousLabel=function previousLabel(beforeTime){return void 0===beforeTime&&(beforeTime=this._time),_getLabelInDirection(this,_parsePosition(this,beforeTime),1)},_proto2.currentLabel=function currentLabel(value){return arguments.length?this.seek(value,!0):this.previousLabel(this._time+1e-8)},_proto2.shiftChildren=function shiftChildren(amount,adjustLabels,ignoreBeforeTime){void 0===ignoreBeforeTime&&(ignoreBeforeTime=0);for(var p,child=this._first,labels=this.labels;child;)child._start>=ignoreBeforeTime&&(child._start+=amount,child._end+=amount),child=child._next;if(adjustLabels)for(p in labels)labels[p]>=ignoreBeforeTime&&(labels[p]+=amount);return _uncache(this)},_proto2.invalidate=function invalidate(soft){var child=this._first;for(this._lock=0;child;)child.invalidate(soft),child=child._next;return _Animation.prototype.invalidate.call(this,soft)},_proto2.clear=function clear(includeLabels){void 0===includeLabels&&(includeLabels=!0);for(var next,child=this._first;child;)next=child._next,this.remove(child),child=next;return this._dp&&(this._time=this._tTime=this._pTime=0),includeLabels&&(this.labels={}),_uncache(this)},_proto2.totalDuration=function totalDuration(value){var prev,start,parent,max=0,child=this._last,prevStart=_bigNum;if(arguments.length)return this.timeScale((this._repeat<0?this.duration():this.totalDuration())/(this.reversed()?-value:value));if(this._dirty){for(parent=this.parent;child;)prev=child._prev,child._dirty&&child.totalDuration(),(start=child._start)>prevStart&&this._sort&&child._ts&&!this._lock?(this._lock=1,_addToTimeline(this,child,start-child._delay,1)._lock=0):prevStart=start,start<0&&child._ts&&(max-=start,(!parent&&!this._dp||parent&&parent.smoothChildTiming)&&(this._start+=start/this._ts,this._time-=start,this._tTime-=start),this.shiftChildren(-start,!1,-Infinity),prevStart=0),child._end>max&&child._ts&&(max=child._end),child=prev;_setDuration(this,this===_globalTimeline&&this._time>max?this._time:max,1,1),this._dirty=0}return this._tDur},Timeline.updateRoot=function updateRoot(time){if(_globalTimeline._ts&&(_lazySafeRender(_globalTimeline,_parentToChildTotalTime(time,_globalTimeline)),_lastRenderedFrame=_ticker.frame),_ticker.frame>=_nextGCFrame){_nextGCFrame+=_config.autoSleep||120;var child=_globalTimeline._first;if((!child||!child._ts)&&_config.autoSleep&&_ticker._listeners.length<2){for(;child&&!child._ts;)child=child._next;child||_ticker.sleep()}}},Timeline}(Animation);_setDefaults(Timeline.prototype,{_lock:0,_hasPause:0,_forcing:0});var _overwritingTween,_forceAllPropTweens,_addComplexStringPropTween=function _addComplexStringPropTween(target,prop,start,end,setter,stringFilter,funcParam){var result,startNums,color,endNum,chunk,startNum,hasRandom,a,pt=new PropTween(this._pt,target,prop,0,1,_renderComplexString,null,setter),index=0,matchIndex=0;for(pt.b=start,pt.e=end,start+="",(hasRandom=~(end+="").indexOf("random("))&&(end=_replaceRandom(end)),stringFilter&&(stringFilter(a=[start,end],target,prop),start=a[0],end=a[1]),startNums=start.match(_complexStringNumExp)||[];result=_complexStringNumExp.exec(end);)endNum=result[0],chunk=end.substring(index,result.index),color?color=(color+1)%5:"rgba("===chunk.substr(-5)&&(color=1),endNum!==startNums[matchIndex++]&&(startNum=parseFloat(startNums[matchIndex-1])||0,pt._pt={_next:pt._pt,p:chunk||1===matchIndex?chunk:",",s:startNum,c:"="===endNum.charAt(1)?_parseRelative(startNum,endNum)-startNum:parseFloat(endNum)-startNum,m:color&&color<4?Math.round:0},index=_complexStringNumExp.lastIndex);return pt.c=index<end.length?end.substring(index,end.length):"",pt.fp=funcParam,(_relExp.test(end)||hasRandom)&&(pt.e=0),this._pt=pt,pt},_addPropTween=function _addPropTween(target,prop,start,end,index,targets,modifier,stringFilter,funcParam,optional){_isFunction(end)&&(end=end(index||0,target,targets));var pt,currentValue=target[prop],parsedStart="get"!==start?start:_isFunction(currentValue)?funcParam?target[prop.indexOf("set")||!_isFunction(target["get"+prop.substr(3)])?prop:"get"+prop.substr(3)](funcParam):target[prop]():currentValue,setter=_isFunction(currentValue)?funcParam?_setterFuncWithParam:_setterFunc:_setterPlain;if(_isString(end)&&(~end.indexOf("random(")&&(end=_replaceRandom(end)),"="===end.charAt(1)&&((pt=_parseRelative(parsedStart,end)+(getUnit(parsedStart)||0))||0===pt)&&(end=pt)),!optional||parsedStart!==end||_forceAllPropTweens)return isNaN(parsedStart*end)||""===end?(!currentValue&&!(prop in target)&&_missingPlugin(prop,end),_addComplexStringPropTween.call(this,target,prop,parsedStart,end,setter,stringFilter||_config.stringFilter,funcParam)):(pt=new PropTween(this._pt,target,prop,+parsedStart||0,end-(parsedStart||0),"boolean"==typeof currentValue?_renderBoolean:_renderPlain,0,setter),funcParam&&(pt.fp=funcParam),modifier&&pt.modifier(modifier,this,target),this._pt=pt)},_checkPlugin=function _checkPlugin(property,vars,tween,index,target,targets){var plugin,pt,ptLookup,i;if(_plugins[property]&&!1!==(plugin=new _plugins[property]).init(target,plugin.rawVars?vars[property]:function _processVars(vars,index,target,targets,tween){if(_isFunction(vars)&&(vars=_parseFuncOrString(vars,tween,index,target,targets)),!_isObject(vars)||vars.style&&vars.nodeType||_isArray(vars)||_isTypedArray(vars))return _isString(vars)?_parseFuncOrString(vars,tween,index,target,targets):vars;var p,copy={};for(p in vars)copy[p]=_parseFuncOrString(vars[p],tween,index,target,targets);return copy}(vars[property],index,target,targets,tween),tween,index,targets)&&(tween._pt=pt=new PropTween(tween._pt,target,property,0,1,plugin.render,plugin,0,plugin.priority),tween!==_quickTween))for(ptLookup=tween._ptLookup[tween._targets.indexOf(target)],i=plugin._props.length;i--;)ptLookup[plugin._props[i]]=pt;return plugin},_initTween=function _initTween(tween,time,tTime){var cleanVars,i,p,pt,target,hasPriority,gsData,harness,plugin,ptLookup,index,harnessVars,overwritten,vars=tween.vars,ease=vars.ease,startAt=vars.startAt,immediateRender=vars.immediateRender,lazy=vars.lazy,onUpdate=vars.onUpdate,runBackwards=vars.runBackwards,yoyoEase=vars.yoyoEase,keyframes=vars.keyframes,autoRevert=vars.autoRevert,dur=tween._dur,prevStartAt=tween._startAt,targets=tween._targets,parent=tween.parent,fullTargets=parent&&"nested"===parent.data?parent.vars.targets:targets,autoOverwrite="auto"===tween._overwrite&&!_suppressOverwrites,tl=tween.timeline;if(tl&&(!keyframes||!ease)&&(ease="none"),tween._ease=_parseEase(ease,_defaults.ease),tween._yEase=yoyoEase?_invertEase(_parseEase(!0===yoyoEase?ease:yoyoEase,_defaults.ease)):0,yoyoEase&&tween._yoyo&&!tween._repeat&&(yoyoEase=tween._yEase,tween._yEase=tween._ease,tween._ease=yoyoEase),tween._from=!tl&&!!vars.runBackwards,!tl||keyframes&&!vars.stagger){if(harnessVars=(harness=targets[0]?_getCache(targets[0]).harness:0)&&vars[harness.prop],cleanVars=_copyExcluding(vars,_reservedProps),prevStartAt&&(prevStartAt._zTime<0&&prevStartAt.progress(1),time<0&&runBackwards&&immediateRender&&!autoRevert?prevStartAt.render(-1,!0):prevStartAt.revert(runBackwards&&dur?_revertConfigNoKill:_startAtRevertConfig),prevStartAt._lazy=0),startAt){if(_removeFromParent(tween._startAt=Tween.set(targets,_setDefaults({data:"isStart",overwrite:!1,parent,immediateRender:!0,lazy:!prevStartAt&&_isNotFalse(lazy),startAt:null,delay:0,onUpdate:onUpdate&&function(){return _callback(tween,"onUpdate")},stagger:0},startAt))),tween._startAt._dp=0,tween._startAt._sat=tween,time<0&&(_reverting||!immediateRender&&!autoRevert)&&tween._startAt.revert(_revertConfigNoKill),immediateRender&&dur&&time<=0&&tTime<=0)return void(time&&(tween._zTime=time))}else if(runBackwards&&dur&&!prevStartAt)if(time&&(immediateRender=!1),p=_setDefaults({overwrite:!1,data:"isFromStart",lazy:immediateRender&&!prevStartAt&&_isNotFalse(lazy),immediateRender,stagger:0,parent},cleanVars),harnessVars&&(p[harness.prop]=harnessVars),_removeFromParent(tween._startAt=Tween.set(targets,p)),tween._startAt._dp=0,tween._startAt._sat=tween,time<0&&(_reverting?tween._startAt.revert(_revertConfigNoKill):tween._startAt.render(-1,!0)),tween._zTime=time,immediateRender){if(!time)return}else _initTween(tween._startAt,1e-8,1e-8);for(tween._pt=tween._ptCache=0,lazy=dur&&_isNotFalse(lazy)||lazy&&!dur,i=0;i<targets.length;i++){if(gsData=(target=targets[i])._gsap||_harness(targets)[i]._gsap,tween._ptLookup[i]=ptLookup={},_lazyLookup[gsData.id]&&_lazyTweens.length&&_lazyRender(),index=fullTargets===targets?i:fullTargets.indexOf(target),harness&&!1!==(plugin=new harness).init(target,harnessVars||cleanVars,tween,index,fullTargets)&&(tween._pt=pt=new PropTween(tween._pt,target,plugin.name,0,1,plugin.render,plugin,0,plugin.priority),plugin._props.forEach(function(name){ptLookup[name]=pt}),plugin.priority&&(hasPriority=1)),!harness||harnessVars)for(p in cleanVars)_plugins[p]&&(plugin=_checkPlugin(p,cleanVars,tween,index,target,fullTargets))?plugin.priority&&(hasPriority=1):ptLookup[p]=pt=_addPropTween.call(tween,target,p,"get",cleanVars[p],index,fullTargets,0,vars.stringFilter);tween._op&&tween._op[i]&&tween.kill(target,tween._op[i]),autoOverwrite&&tween._pt&&(_overwritingTween=tween,_globalTimeline.killTweensOf(target,ptLookup,tween.globalTime(time)),overwritten=!tween.parent,_overwritingTween=0),tween._pt&&lazy&&(_lazyLookup[gsData.id]=1)}hasPriority&&_sortPropTweensByPriority(tween),tween._onInit&&tween._onInit(tween)}tween._onUpdate=onUpdate,tween._initted=(!tween._op||tween._pt)&&!overwritten,keyframes&&time<=0&&tl.render(_bigNum,!0,!0)},_parseKeyframe=function _parseKeyframe(prop,obj,allProps,easeEach){var p,a,ease=obj.ease||easeEach||"power1.inOut";if(_isArray(obj))a=allProps[prop]||(allProps[prop]=[]),obj.forEach(function(value,i){return a.push({t:i/(obj.length-1)*100,v:value,e:ease})});else for(p in obj)a=allProps[p]||(allProps[p]=[]),"ease"===p||a.push({t:parseFloat(prop),v:obj[p],e:ease})},_parseFuncOrString=function _parseFuncOrString(value,tween,i,target,targets){return _isFunction(value)?value.call(tween,i,target,targets):_isString(value)&&~value.indexOf("random(")?_replaceRandom(value):value},_staggerTweenProps=_callbackNames+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",_staggerPropsToSkip={};_forEachName(_staggerTweenProps+",id,stagger,delay,duration,paused,scrollTrigger",function(name){return _staggerPropsToSkip[name]=1});var Tween=function(_Animation2){function Tween(targets,vars,position,skipInherit){var _this3;"number"==typeof vars&&(position.duration=vars,vars=position,position=null);var tl,i,copy,l,p,curTarget,staggerFunc,staggerVarsToMerge,_this3$vars=(_this3=_Animation2.call(this,skipInherit?vars:_inheritDefaults(vars))||this).vars,duration=_this3$vars.duration,delay=_this3$vars.delay,immediateRender=_this3$vars.immediateRender,stagger=_this3$vars.stagger,overwrite=_this3$vars.overwrite,keyframes=_this3$vars.keyframes,defaults=_this3$vars.defaults,scrollTrigger=_this3$vars.scrollTrigger,yoyoEase=_this3$vars.yoyoEase,parent=vars.parent||_globalTimeline,parsedTargets=(_isArray(targets)||_isTypedArray(targets)?_isNumber(targets[0]):"length"in vars)?[targets]:toArray(targets);if(_this3._targets=parsedTargets.length?_harness(parsedTargets):_warn("GSAP target "+targets+" not found. https://gsap.com",!_config.nullTargetWarn)||[],_this3._ptLookup=[],_this3._overwrite=overwrite,keyframes||stagger||_isFuncOrString(duration)||_isFuncOrString(delay)){if(vars=_this3.vars,(tl=_this3.timeline=new Timeline({data:"nested",defaults:defaults||{},targets:parent&&"nested"===parent.data?parent.vars.targets:parsedTargets})).kill(),tl.parent=tl._dp=_assertThisInitialized(_this3),tl._start=0,stagger||_isFuncOrString(duration)||_isFuncOrString(delay)){if(l=parsedTargets.length,staggerFunc=stagger&&distribute(stagger),_isObject(stagger))for(p in stagger)~_staggerTweenProps.indexOf(p)&&(staggerVarsToMerge||(staggerVarsToMerge={}),staggerVarsToMerge[p]=stagger[p]);for(i=0;i<l;i++)(copy=_copyExcluding(vars,_staggerPropsToSkip)).stagger=0,yoyoEase&&(copy.yoyoEase=yoyoEase),staggerVarsToMerge&&_merge(copy,staggerVarsToMerge),curTarget=parsedTargets[i],copy.duration=+_parseFuncOrString(duration,_assertThisInitialized(_this3),i,curTarget,parsedTargets),copy.delay=(+_parseFuncOrString(delay,_assertThisInitialized(_this3),i,curTarget,parsedTargets)||0)-_this3._delay,!stagger&&1===l&&copy.delay&&(_this3._delay=delay=copy.delay,_this3._start+=delay,copy.delay=0),tl.to(curTarget,copy,staggerFunc?staggerFunc(i,curTarget,parsedTargets):0),tl._ease=_easeMap.none;tl.duration()?duration=delay=0:_this3.timeline=0}else if(keyframes){_inheritDefaults(_setDefaults(tl.vars.defaults,{ease:"none"})),tl._ease=_parseEase(keyframes.ease||vars.ease||"none");var a,kf,v,time=0;if(_isArray(keyframes))keyframes.forEach(function(frame){return tl.to(parsedTargets,frame,">")}),tl.duration();else{for(p in copy={},keyframes)"ease"===p||"easeEach"===p||_parseKeyframe(p,keyframes[p],copy,keyframes.easeEach);for(p in copy)for(a=copy[p].sort(function(a,b){return a.t-b.t}),time=0,i=0;i<a.length;i++)(v={ease:(kf=a[i]).e,duration:(kf.t-(i?a[i-1].t:0))/100*duration})[p]=kf.v,tl.to(parsedTargets,v,time),time+=v.duration;tl.duration()<duration&&tl.to({},{duration:duration-tl.duration()})}}duration||_this3.duration(duration=tl.duration())}else _this3.timeline=0;return!0!==overwrite||_suppressOverwrites||(_overwritingTween=_assertThisInitialized(_this3),_globalTimeline.killTweensOf(parsedTargets),_overwritingTween=0),_addToTimeline(parent,_assertThisInitialized(_this3),position),vars.reversed&&_this3.reverse(),vars.paused&&_this3.paused(!0),(immediateRender||!duration&&!keyframes&&_this3._start===_roundPrecise(parent._time)&&_isNotFalse(immediateRender)&&_hasNoPausedAncestors(_assertThisInitialized(_this3))&&"nested"!==parent.data)&&(_this3._tTime=-1e-8,_this3.render(Math.max(0,-delay)||0)),scrollTrigger&&_scrollTrigger(_assertThisInitialized(_this3),scrollTrigger),_this3}_inheritsLoose(Tween,_Animation2);var _proto3=Tween.prototype;return _proto3.render=function render(totalTime,suppressEvents,force){var time,pt,iteration,cycleDuration,prevIteration,isYoyo,ratio,timeline,yoyoEase,prevTime=this._time,tDur=this._tDur,dur=this._dur,isNegative=totalTime<0,tTime=totalTime>tDur-1e-8&&!isNegative?tDur:totalTime<1e-8?0:totalTime;if(dur){if(tTime!==this._tTime||!totalTime||force||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==isNegative||this._lazy){if(time=tTime,timeline=this.timeline,this._repeat){if(cycleDuration=dur+this._rDelay,this._repeat<-1&&isNegative)return this.totalTime(100*cycleDuration+totalTime,suppressEvents,force);if(time=_roundPrecise(tTime%cycleDuration),tTime===tDur?(iteration=this._repeat,time=dur):(iteration=~~(prevIteration=_roundPrecise(tTime/cycleDuration)))&&iteration===prevIteration?(time=dur,iteration--):time>dur&&(time=dur),(isYoyo=this._yoyo&&1&iteration)&&(yoyoEase=this._yEase,time=dur-time),prevIteration=_animationCycle(this._tTime,cycleDuration),time===prevTime&&!force&&this._initted&&iteration===prevIteration)return this._tTime=tTime,this;iteration!==prevIteration&&(timeline&&this._yEase&&_propagateYoyoEase(timeline,isYoyo),this.vars.repeatRefresh&&!isYoyo&&!this._lock&&time!==cycleDuration&&this._initted&&(this._lock=force=1,this.render(_roundPrecise(cycleDuration*iteration),!0).invalidate()._lock=0))}if(!this._initted){if(_attemptInitTween(this,isNegative?totalTime:time,force,suppressEvents,tTime))return this._tTime=0,this;if(!(prevTime===this._time||force&&this.vars.repeatRefresh&&iteration!==prevIteration))return this;if(dur!==this._dur)return this.render(totalTime,suppressEvents,force)}if(this._tTime=tTime,this._time=time,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=ratio=(yoyoEase||this._ease)(time/dur),this._from&&(this.ratio=ratio=1-ratio),!prevTime&&tTime&&!suppressEvents&&!prevIteration&&(_callback(this,"onStart"),this._tTime!==tTime))return this;for(pt=this._pt;pt;)pt.r(ratio,pt.d),pt=pt._next;timeline&&timeline.render(totalTime<0?totalTime:timeline._dur*timeline._ease(time/this._dur),suppressEvents,force)||this._startAt&&(this._zTime=totalTime),this._onUpdate&&!suppressEvents&&(isNegative&&_rewindStartAt(this,totalTime,0,force),_callback(this,"onUpdate")),this._repeat&&iteration!==prevIteration&&this.vars.onRepeat&&!suppressEvents&&this.parent&&_callback(this,"onRepeat"),tTime!==this._tDur&&tTime||this._tTime!==tTime||(isNegative&&!this._onUpdate&&_rewindStartAt(this,totalTime,0,!0),(totalTime||!dur)&&(tTime===this._tDur&&this._ts>0||!tTime&&this._ts<0)&&_removeFromParent(this,1),suppressEvents||isNegative&&!prevTime||!(tTime||prevTime||isYoyo)||(_callback(this,tTime===tDur?"onComplete":"onReverseComplete",!0),this._prom&&!(tTime<tDur&&this.timeScale()>0)&&this._prom()))}}else!function _renderZeroDurationTween(tween,totalTime,suppressEvents,force){var pt,iteration,prevIteration,prevRatio=tween.ratio,ratio=totalTime<0||!totalTime&&(!tween._start&&_parentPlayheadIsBeforeStart(tween)&&(tween._initted||!_isFromOrFromStart(tween))||(tween._ts<0||tween._dp._ts<0)&&!_isFromOrFromStart(tween))?0:1,repeatDelay=tween._rDelay,tTime=0;if(repeatDelay&&tween._repeat&&(tTime=_clamp(0,tween._tDur,totalTime),iteration=_animationCycle(tTime,repeatDelay),tween._yoyo&&1&iteration&&(ratio=1-ratio),iteration!==_animationCycle(tween._tTime,repeatDelay)&&(prevRatio=1-ratio,tween.vars.repeatRefresh&&tween._initted&&tween.invalidate())),ratio!==prevRatio||_reverting||force||1e-8===tween._zTime||!totalTime&&tween._zTime){if(!tween._initted&&_attemptInitTween(tween,totalTime,force,suppressEvents,tTime))return;for(prevIteration=tween._zTime,tween._zTime=totalTime||(suppressEvents?1e-8:0),suppressEvents||(suppressEvents=totalTime&&!prevIteration),tween.ratio=ratio,tween._from&&(ratio=1-ratio),tween._time=0,tween._tTime=tTime,pt=tween._pt;pt;)pt.r(ratio,pt.d),pt=pt._next;totalTime<0&&_rewindStartAt(tween,totalTime,0,!0),tween._onUpdate&&!suppressEvents&&_callback(tween,"onUpdate"),tTime&&tween._repeat&&!suppressEvents&&tween.parent&&_callback(tween,"onRepeat"),(totalTime>=tween._tDur||totalTime<0)&&tween.ratio===ratio&&(ratio&&_removeFromParent(tween,1),suppressEvents||_reverting||(_callback(tween,ratio?"onComplete":"onReverseComplete",!0),tween._prom&&tween._prom()))}else tween._zTime||(tween._zTime=totalTime)}(this,totalTime,suppressEvents,force);return this},_proto3.targets=function targets(){return this._targets},_proto3.invalidate=function invalidate(soft){return(!soft||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(soft),_Animation2.prototype.invalidate.call(this,soft)},_proto3.resetTo=function resetTo(property,value,start,startIsRelative,skipRecursion){_tickerActive||_ticker.wake(),this._ts||this.play();var time=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||_initTween(this,time),function _updatePropTweens(tween,property,value,start,startIsRelative,ratio,time,skipRecursion){var pt,rootPT,lookup,i,ptCache=(tween._pt&&tween._ptCache||(tween._ptCache={}))[property];if(!ptCache)for(ptCache=tween._ptCache[property]=[],lookup=tween._ptLookup,i=tween._targets.length;i--;){if((pt=lookup[i][property])&&pt.d&&pt.d._pt)for(pt=pt.d._pt;pt&&pt.p!==property&&pt.fp!==property;)pt=pt._next;if(!pt)return _forceAllPropTweens=1,tween.vars[property]="+=0",_initTween(tween,time),_forceAllPropTweens=0,skipRecursion?_warn(property+" not eligible for reset"):1;ptCache.push(pt)}for(i=ptCache.length;i--;)(pt=(rootPT=ptCache[i])._pt||rootPT).s=!start&&0!==start||startIsRelative?pt.s+(start||0)+ratio*pt.c:start,pt.c=value-pt.s,rootPT.e&&(rootPT.e=_round(value)+getUnit(rootPT.e)),rootPT.b&&(rootPT.b=pt.s+getUnit(rootPT.b))}(this,property,value,start,startIsRelative,this._ease(time/this._dur),time,skipRecursion)?this.resetTo(property,value,start,startIsRelative,1):(_alignPlayhead(this,0),this.parent||_addLinkedListItem(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},_proto3.kill=function kill(targets,vars){if(void 0===vars&&(vars="all"),!(targets||vars&&"all"!==vars))return this._lazy=this._pt=0,this.parent?_interrupt(this):this.scrollTrigger&&this.scrollTrigger.kill(!!_reverting),this;if(this.timeline){var tDur=this.timeline.totalDuration();return this.timeline.killTweensOf(targets,vars,_overwritingTween&&!0!==_overwritingTween.vars.overwrite)._first||_interrupt(this),this.parent&&tDur!==this.timeline.totalDuration()&&_setDuration(this,this._dur*this.timeline._tDur/tDur,0,1),this}var overwrittenProps,curLookup,curOverwriteProps,props,p,pt,i,parsedTargets=this._targets,killingTargets=targets?toArray(targets):parsedTargets,propTweenLookup=this._ptLookup,firstPT=this._pt;if((!vars||"all"===vars)&&function _arraysMatch(a1,a2){for(var i=a1.length,match=i===a2.length;match&&i--&&a1[i]===a2[i];);return i<0}(parsedTargets,killingTargets))return"all"===vars&&(this._pt=0),_interrupt(this);for(overwrittenProps=this._op=this._op||[],"all"!==vars&&(_isString(vars)&&(p={},_forEachName(vars,function(name){return p[name]=1}),vars=p),vars=function _addAliasesToVars(targets,vars){var copy,p,i,aliases,harness=targets[0]?_getCache(targets[0]).harness:0,propertyAliases=harness&&harness.aliases;if(!propertyAliases)return vars;for(p in copy=_merge({},vars),propertyAliases)if(p in copy)for(i=(aliases=propertyAliases[p].split(",")).length;i--;)copy[aliases[i]]=copy[p];return copy}(parsedTargets,vars)),i=parsedTargets.length;i--;)if(~killingTargets.indexOf(parsedTargets[i]))for(p in curLookup=propTweenLookup[i],"all"===vars?(overwrittenProps[i]=vars,props=curLookup,curOverwriteProps={}):(curOverwriteProps=overwrittenProps[i]=overwrittenProps[i]||{},props=vars),props)(pt=curLookup&&curLookup[p])&&("kill"in pt.d&&!0!==pt.d.kill(p)||_removeLinkedListItem(this,pt,"_pt"),delete curLookup[p]),"all"!==curOverwriteProps&&(curOverwriteProps[p]=1);return this._initted&&!this._pt&&firstPT&&_interrupt(this),this},Tween.to=function to(targets,vars){return new Tween(targets,vars,arguments[2])},Tween.from=function from(targets,vars){return _createTweenType(1,arguments)},Tween.delayedCall=function delayedCall(delay,callback,params,scope){return new Tween(callback,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay,onComplete:callback,onReverseComplete:callback,onCompleteParams:params,onReverseCompleteParams:params,callbackScope:scope})},Tween.fromTo=function fromTo(targets,fromVars,toVars){return _createTweenType(2,arguments)},Tween.set=function set(targets,vars){return vars.duration=0,vars.repeatDelay||(vars.repeat=0),new Tween(targets,vars)},Tween.killTweensOf=function killTweensOf(targets,props,onlyActive){return _globalTimeline.killTweensOf(targets,props,onlyActive)},Tween}(Animation);_setDefaults(Tween.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),_forEachName("staggerTo,staggerFrom,staggerFromTo",function(name){Tween[name]=function(){var tl=new Timeline,params=_slice.call(arguments,0);return params.splice("staggerFromTo"===name?5:4,0,0),tl[name].apply(tl,params)}});var _setterPlain=function _setterPlain(target,property,value){return target[property]=value},_setterFunc=function _setterFunc(target,property,value){return target[property](value)},_setterFuncWithParam=function _setterFuncWithParam(target,property,value,data){return target[property](data.fp,value)},_setterAttribute=function _setterAttribute(target,property,value){return target.setAttribute(property,value)},_getSetter=function _getSetter(target,property){return _isFunction(target[property])?_setterFunc:_isUndefined(target[property])&&target.setAttribute?_setterAttribute:_setterPlain},_renderPlain=function _renderPlain(ratio,data){return data.set(data.t,data.p,Math.round(1e6*(data.s+data.c*ratio))/1e6,data)},_renderBoolean=function _renderBoolean(ratio,data){return data.set(data.t,data.p,!!(data.s+data.c*ratio),data)},_renderComplexString=function _renderComplexString(ratio,data){var pt=data._pt,s="";if(!ratio&&data.b)s=data.b;else if(1===ratio&&data.e)s=data.e;else{for(;pt;)s=pt.p+(pt.m?pt.m(pt.s+pt.c*ratio):Math.round(1e4*(pt.s+pt.c*ratio))/1e4)+s,pt=pt._next;s+=data.c}data.set(data.t,data.p,s,data)},_renderPropTweens=function _renderPropTweens(ratio,data){for(var pt=data._pt;pt;)pt.r(ratio,pt.d),pt=pt._next},_addPluginModifier=function _addPluginModifier(modifier,tween,target,property){for(var next,pt=this._pt;pt;)next=pt._next,pt.p===property&&pt.modifier(modifier,tween,target),pt=next},_killPropTweensOf=function _killPropTweensOf(property){for(var hasNonDependentRemaining,next,pt=this._pt;pt;)next=pt._next,pt.p===property&&!pt.op||pt.op===property?_removeLinkedListItem(this,pt,"_pt"):pt.dep||(hasNonDependentRemaining=1),pt=next;return!hasNonDependentRemaining},_setterWithModifier=function _setterWithModifier(target,property,value,data){data.mSet(target,property,data.m.call(data.tween,value,data.mt),data)},_sortPropTweensByPriority=function _sortPropTweensByPriority(parent){for(var next,pt2,first,last,pt=parent._pt;pt;){for(next=pt._next,pt2=first;pt2&&pt2.pr>pt.pr;)pt2=pt2._next;(pt._prev=pt2?pt2._prev:last)?pt._prev._next=pt:first=pt,(pt._next=pt2)?pt2._prev=pt:last=pt,pt=next}parent._pt=first},PropTween=function(){function PropTween(next,target,prop,start,change,renderer,data,setter,priority){this.t=target,this.s=start,this.c=change,this.p=prop,this.r=renderer||_renderPlain,this.d=data||this,this.set=setter||_setterPlain,this.pr=priority||0,this._next=next,next&&(next._prev=this)}return PropTween.prototype.modifier=function modifier(func,tween,target){this.mSet=this.mSet||this.set,this.set=_setterWithModifier,this.m=func,this.mt=target,this.tween=tween},PropTween}();_forEachName(_callbackNames+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(name){return _reservedProps[name]=1}),_globals.TweenMax=_globals.TweenLite=Tween,_globals.TimelineLite=_globals.TimelineMax=Timeline,_globalTimeline=new Timeline({sortChildren:!1,defaults:_defaults,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),_config.stringFilter=_colorStringFilter;var _media=[],_listeners={},_emptyArray=[],_lastMediaTime=0,_contextID=0,_dispatch=function _dispatch(type){return(_listeners[type]||_emptyArray).map(function(f){return f()})},_onMediaChange=function _onMediaChange(){var time=Date.now(),matches=[];time-_lastMediaTime>2&&(_dispatch("matchMediaInit"),_media.forEach(function(c){var match,p,anyMatch,toggled,queries=c.queries,conditions=c.conditions;for(p in queries)(match=_win.matchMedia(queries[p]).matches)&&(anyMatch=1),match!==conditions[p]&&(conditions[p]=match,toggled=1);toggled&&(c.revert(),anyMatch&&matches.push(c))}),_dispatch("matchMediaRevert"),matches.forEach(function(c){return c.onMatch(c,function(func){return c.add(null,func)})}),_lastMediaTime=time,_dispatch("matchMedia"))},Context=function(){function Context(func,scope){this.selector=scope&&selector(scope),this.data=[],this._r=[],this.isReverted=!1,this.id=_contextID++,func&&this.add(func)}var _proto5=Context.prototype;return _proto5.add=function add(name,func,scope){_isFunction(name)&&(scope=func,func=name,name=_isFunction);var self=this,f=function f(){var result,prev=_context,prevSelector=self.selector;return prev&&prev!==self&&prev.data.push(self),scope&&(self.selector=selector(scope)),_context=self,result=func.apply(self,arguments),_isFunction(result)&&self._r.push(result),_context=prev,self.selector=prevSelector,self.isReverted=!1,result};return self.last=f,name===_isFunction?f(self,function(func){return self.add(null,func)}):name?self[name]=f:f},_proto5.ignore=function ignore(func){var prev=_context;_context=null,func(this),_context=prev},_proto5.getTweens=function getTweens(){var a=[];return this.data.forEach(function(e){return e instanceof Context?a.push.apply(a,e.getTweens()):e instanceof Tween&&!(e.parent&&"nested"===e.parent.data)&&a.push(e)}),a},_proto5.clear=function clear(){this._r.length=this.data.length=0},_proto5.kill=function kill(revert,matchMedia){var _this4=this;if(revert?function(){for(var t,tweens=_this4.getTweens(),i=_this4.data.length;i--;)"isFlip"===(t=_this4.data[i]).data&&(t.revert(),t.getChildren(!0,!0,!1).forEach(function(tween){return tweens.splice(tweens.indexOf(tween),1)}));for(tweens.map(function(t){return{g:t._dur||t._delay||t._sat&&!t._sat.vars.immediateRender?t.globalTime(0):-1/0,t}}).sort(function(a,b){return b.g-a.g||-1/0}).forEach(function(o){return o.t.revert(revert)}),i=_this4.data.length;i--;)(t=_this4.data[i])instanceof Timeline?"nested"!==t.data&&(t.scrollTrigger&&t.scrollTrigger.revert(),t.kill()):!(t instanceof Tween)&&t.revert&&t.revert(revert);_this4._r.forEach(function(f){return f(revert,_this4)}),_this4.isReverted=!0}():this.data.forEach(function(e){return e.kill&&e.kill()}),this.clear(),matchMedia)for(var i=_media.length;i--;)_media[i].id===this.id&&_media.splice(i,1)},_proto5.revert=function revert(config){this.kill(config||{})},Context}(),MatchMedia=function(){function MatchMedia(scope){this.contexts=[],this.scope=scope,_context&&_context.data.push(this)}var _proto6=MatchMedia.prototype;return _proto6.add=function add(conditions,func,scope){_isObject(conditions)||(conditions={matches:conditions});var mq,p,active,context=new Context(0,scope||this.scope),cond=context.conditions={};for(p in _context&&!context.selector&&(context.selector=_context.selector),this.contexts.push(context),func=context.add("onMatch",func),context.queries=conditions,conditions)"all"===p?active=1:(mq=_win.matchMedia(conditions[p]))&&(_media.indexOf(context)<0&&_media.push(context),(cond[p]=mq.matches)&&(active=1),mq.addListener?mq.addListener(_onMediaChange):mq.addEventListener("change",_onMediaChange));return active&&func(context,function(f){return context.add(null,f)}),this},_proto6.revert=function revert(config){this.kill(config||{})},_proto6.kill=function kill(revert){this.contexts.forEach(function(c){return c.kill(revert,!0)})},MatchMedia}(),_gsap={registerPlugin:function registerPlugin(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];args.forEach(function(config){return _createPlugin(config)})},timeline:function timeline(vars){return new Timeline(vars)},getTweensOf:function getTweensOf(targets,onlyActive){return _globalTimeline.getTweensOf(targets,onlyActive)},getProperty:function getProperty(target,property,unit,uncache){_isString(target)&&(target=toArray(target)[0]);var getter=_getCache(target||{}).get,format=unit?_passThrough:_numericIfPossible;return"native"===unit&&(unit=""),target?property?format((_plugins[property]&&_plugins[property].get||getter)(target,property,unit,uncache)):function(property,unit,uncache){return format((_plugins[property]&&_plugins[property].get||getter)(target,property,unit,uncache))}:target},quickSetter:function quickSetter(target,property,unit){if((target=toArray(target)).length>1){var setters=target.map(function(t){return gsap.quickSetter(t,property,unit)}),l=setters.length;return function(value){for(var i=l;i--;)setters[i](value)}}target=target[0]||{};var Plugin=_plugins[property],cache=_getCache(target),p=cache.harness&&(cache.harness.aliases||{})[property]||property,setter=Plugin?function(value){var p=new Plugin;_quickTween._pt=0,p.init(target,unit?value+unit:value,_quickTween,0,[target]),p.render(1,p),_quickTween._pt&&_renderPropTweens(1,_quickTween)}:cache.set(target,p);return Plugin?setter:function(value){return setter(target,p,unit?value+unit:value,cache,1)}},quickTo:function quickTo(target,property,vars){var _setDefaults2,tween=gsap.to(target,_setDefaults(((_setDefaults2={})[property]="+=0.1",_setDefaults2.paused=!0,_setDefaults2.stagger=0,_setDefaults2),vars||{})),func=function func(value,start,startIsRelative){return tween.resetTo(property,value,start,startIsRelative)};return func.tween=tween,func},isTweening:function isTweening(targets){return _globalTimeline.getTweensOf(targets,!0).length>0},defaults:function defaults(value){return value&&value.ease&&(value.ease=_parseEase(value.ease,_defaults.ease)),_mergeDeep(_defaults,value||{})},config:function config(value){return _mergeDeep(_config,value||{})},registerEffect:function registerEffect(_ref3){var name=_ref3.name,effect=_ref3.effect,plugins=_ref3.plugins,defaults=_ref3.defaults,extendTimeline=_ref3.extendTimeline;(plugins||"").split(",").forEach(function(pluginName){return pluginName&&!_plugins[pluginName]&&!_globals[pluginName]&&_warn(name+" effect requires "+pluginName+" plugin.")}),_effects[name]=function(targets,vars,tl){return effect(toArray(targets),_setDefaults(vars||{},defaults),tl)},extendTimeline&&(Timeline.prototype[name]=function(targets,vars,position){return this.add(_effects[name](targets,_isObject(vars)?vars:(position=vars)&&{},this),position)})},registerEase:function registerEase(name,ease){_easeMap[name]=_parseEase(ease)},parseEase:function parseEase(ease,defaultEase){return arguments.length?_parseEase(ease,defaultEase):_easeMap},getById:function getById(id){return _globalTimeline.getById(id)},exportRoot:function exportRoot(vars,includeDelayedCalls){void 0===vars&&(vars={});var child,next,tl=new Timeline(vars);for(tl.smoothChildTiming=_isNotFalse(vars.smoothChildTiming),_globalTimeline.remove(tl),tl._dp=0,tl._time=tl._tTime=_globalTimeline._time,child=_globalTimeline._first;child;)next=child._next,!includeDelayedCalls&&!child._dur&&child instanceof Tween&&child.vars.onComplete===child._targets[0]||_addToTimeline(tl,child,child._start-child._delay),child=next;return _addToTimeline(_globalTimeline,tl,0),tl},context:function context(func,scope){return func?new Context(func,scope):_context},matchMedia:function matchMedia(scope){return new MatchMedia(scope)},matchMediaRefresh:function matchMediaRefresh(){return _media.forEach(function(c){var found,p,cond=c.conditions;for(p in cond)cond[p]&&(cond[p]=!1,found=1);found&&c.revert()})||_onMediaChange()},addEventListener:function addEventListener(type,callback){var a=_listeners[type]||(_listeners[type]=[]);~a.indexOf(callback)||a.push(callback)},removeEventListener:function removeEventListener(type,callback){var a=_listeners[type],i=a&&a.indexOf(callback);i>=0&&a.splice(i,1)},utils:{wrap:function wrap(min,max,value){var range=max-min;return _isArray(min)?_wrapArray(min,wrap(0,min.length),max):_conditionalReturn(value,function(value){return(range+(value-min)%range)%range+min})},wrapYoyo:function wrapYoyo(min,max,value){var range=max-min,total=2*range;return _isArray(min)?_wrapArray(min,wrapYoyo(0,min.length-1),max):_conditionalReturn(value,function(value){return min+((value=(total+(value-min)%total)%total||0)>range?total-value:value)})},distribute,random,snap,normalize:function normalize(min,max,value){return mapRange(min,max,0,1,value)},getUnit,clamp:function clamp(min,max,value){return _conditionalReturn(value,function(v){return _clamp(min,max,v)})},splitColor,toArray,selector,mapRange,pipe:function pipe(){for(var _len=arguments.length,functions=new Array(_len),_key=0;_key<_len;_key++)functions[_key]=arguments[_key];return function(value){return functions.reduce(function(v,f){return f(v)},value)}},unitize:function unitize(func,unit){return function(value){return func(parseFloat(value))+(unit||getUnit(value))}},interpolate:function interpolate(start,end,progress,mutate){var func=isNaN(start+end)?0:function(p){return(1-p)*start+p*end};if(!func){var p,i,interpolators,l,il,isString=_isString(start),master={};if(!0===progress&&(mutate=1)&&(progress=null),isString)start={p:start},end={p:end};else if(_isArray(start)&&!_isArray(end)){for(interpolators=[],l=start.length,il=l-2,i=1;i<l;i++)interpolators.push(interpolate(start[i-1],start[i]));l--,func=function func(p){p*=l;var i=Math.min(il,~~p);return interpolators[i](p-i)},progress=end}else mutate||(start=_merge(_isArray(start)?[]:{},start));if(!interpolators){for(p in end)_addPropTween.call(master,start,p,"get",end[p]);func=function func(p){return _renderPropTweens(p,master)||(isString?start.p:start)}}}return _conditionalReturn(progress,func)},shuffle},install:_install,effects:_effects,ticker:_ticker,updateRoot:Timeline.updateRoot,plugins:_plugins,globalTimeline:_globalTimeline,core:{PropTween,globals:_addGlobal,Tween,Timeline,Animation,getCache:_getCache,_removeLinkedListItem,reverting:function reverting(){return _reverting},context:function context(toAdd){return toAdd&&_context&&(_context.data.push(toAdd),toAdd._ctx=_context),_context},suppressOverwrites:function suppressOverwrites(value){return _suppressOverwrites=value}}};_forEachName("to,from,fromTo,delayedCall,set,killTweensOf",function(name){return _gsap[name]=Tween[name]}),_ticker.add(Timeline.updateRoot),_quickTween=_gsap.to({},{duration:0});var _getPluginPropTween=function _getPluginPropTween(plugin,prop){for(var pt=plugin._pt;pt&&pt.p!==prop&&pt.op!==prop&&pt.fp!==prop;)pt=pt._next;return pt},_buildModifierPlugin=function _buildModifierPlugin(name,modifier){return{name,headless:1,rawVars:1,init:function init(target,vars,tween){tween._onInit=function(tween){var temp,p;if(_isString(vars)&&(temp={},_forEachName(vars,function(name){return temp[name]=1}),vars=temp),modifier){for(p in temp={},vars)temp[p]=modifier(vars[p]);vars=temp}!function _addModifiers(tween,modifiers){var p,i,pt,targets=tween._targets;for(p in modifiers)for(i=targets.length;i--;)(pt=tween._ptLookup[i][p])&&(pt=pt.d)&&(pt._pt&&(pt=_getPluginPropTween(pt,p)),pt&&pt.modifier&&pt.modifier(modifiers[p],tween,targets[i],p))}(tween,vars)}}}},gsap=_gsap.registerPlugin({name:"attr",init:function init(target,vars,tween,index,targets){var p,pt,v;for(p in this.tween=tween,vars)v=target.getAttribute(p)||"",(pt=this.add(target,"setAttribute",(v||0)+"",vars[p],index,targets,0,0,p)).op=p,pt.b=v,this._props.push(p)},render:function render(ratio,data){for(var pt=data._pt;pt;)_reverting?pt.set(pt.t,pt.p,pt.b,pt):pt.r(ratio,pt.d),pt=pt._next}},{name:"endArray",headless:1,init:function init(target,value){for(var i=value.length;i--;)this.add(target,i,target[i]||0,value[i],0,0,0,0,0,1)}},_buildModifierPlugin("roundProps",_roundModifier),_buildModifierPlugin("modifiers"),_buildModifierPlugin("snap",snap))||_gsap;Tween.version=Timeline.version=gsap.version="3.13.0",_coreReady=1,_windowExists()&&_wake();_easeMap.Power0,_easeMap.Power1,_easeMap.Power2,_easeMap.Power3,_easeMap.Power4,_easeMap.Linear,_easeMap.Quad,_easeMap.Cubic,_easeMap.Quart,_easeMap.Quint,_easeMap.Strong,_easeMap.Elastic,_easeMap.Back,_easeMap.SteppedEase,_easeMap.Bounce,_easeMap.Sine,_easeMap.Expo,_easeMap.Circ;var CSSPlugin_win,CSSPlugin_doc,_docElement,_pluginInitted,_tempDiv,_recentSetterPlugin,CSSPlugin_reverting,_supports3D,_transformProps={},_RAD2DEG=180/Math.PI,_DEG2RAD=Math.PI/180,_atan2=Math.atan2,_capsExp=/([A-Z])/g,_horizontalExp=/(left|right|width|margin|padding|x)/i,_complexExp=/[\s,\(]\S/,_propertyAliases={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},_renderCSSProp=function _renderCSSProp(ratio,data){return data.set(data.t,data.p,Math.round(1e4*(data.s+data.c*ratio))/1e4+data.u,data)},_renderPropWithEnd=function _renderPropWithEnd(ratio,data){return data.set(data.t,data.p,1===ratio?data.e:Math.round(1e4*(data.s+data.c*ratio))/1e4+data.u,data)},_renderCSSPropWithBeginning=function _renderCSSPropWithBeginning(ratio,data){return data.set(data.t,data.p,ratio?Math.round(1e4*(data.s+data.c*ratio))/1e4+data.u:data.b,data)},_renderRoundedCSSProp=function _renderRoundedCSSProp(ratio,data){var value=data.s+data.c*ratio;data.set(data.t,data.p,~~(value+(value<0?-.5:.5))+data.u,data)},_renderNonTweeningValue=function _renderNonTweeningValue(ratio,data){return data.set(data.t,data.p,ratio?data.e:data.b,data)},_renderNonTweeningValueOnlyAtEnd=function _renderNonTweeningValueOnlyAtEnd(ratio,data){return data.set(data.t,data.p,1!==ratio?data.b:data.e,data)},_setterCSSStyle=function _setterCSSStyle(target,property,value){return target.style[property]=value},_setterCSSProp=function _setterCSSProp(target,property,value){return target.style.setProperty(property,value)},_setterTransform=function _setterTransform(target,property,value){return target._gsap[property]=value},_setterScale=function _setterScale(target,property,value){return target._gsap.scaleX=target._gsap.scaleY=value},_setterScaleWithRender=function _setterScaleWithRender(target,property,value,data,ratio){var cache=target._gsap;cache.scaleX=cache.scaleY=value,cache.renderTransform(ratio,cache)},_setterTransformWithRender=function _setterTransformWithRender(target,property,value,data,ratio){var cache=target._gsap;cache[property]=value,cache.renderTransform(ratio,cache)},_transformProp="transform",_transformOriginProp=_transformProp+"Origin",_saveStyle=function _saveStyle(property,isNotCSS){var _this=this,target=this.target,style=target.style,cache=target._gsap;if(property in _transformProps&&style){if(this.tfm=this.tfm||{},"transform"===property)return _propertyAliases.transform.split(",").forEach(function(p){return _saveStyle.call(_this,p,isNotCSS)});if(~(property=_propertyAliases[property]||property).indexOf(",")?property.split(",").forEach(function(a){return _this.tfm[a]=_get(target,a)}):this.tfm[property]=cache.x?cache[property]:_get(target,property),property===_transformOriginProp&&(this.tfm.zOrigin=cache.zOrigin),this.props.indexOf(_transformProp)>=0)return;cache.svg&&(this.svgo=target.getAttribute("data-svg-origin"),this.props.push(_transformOriginProp,isNotCSS,"")),property=_transformProp}(style||isNotCSS)&&this.props.push(property,isNotCSS,style[property])},_removeIndependentTransforms=function _removeIndependentTransforms(style){style.translate&&(style.removeProperty("translate"),style.removeProperty("scale"),style.removeProperty("rotate"))},_revertStyle=function _revertStyle(){var i,p,props=this.props,target=this.target,style=target.style,cache=target._gsap;for(i=0;i<props.length;i+=3)props[i+1]?2===props[i+1]?target[props[i]](props[i+2]):target[props[i]]=props[i+2]:props[i+2]?style[props[i]]=props[i+2]:style.removeProperty("--"===props[i].substr(0,2)?props[i]:props[i].replace(_capsExp,"-$1").toLowerCase());if(this.tfm){for(p in this.tfm)cache[p]=this.tfm[p];cache.svg&&(cache.renderTransform(),target.setAttribute("data-svg-origin",this.svgo||"")),(i=CSSPlugin_reverting())&&i.isStart||style[_transformProp]||(_removeIndependentTransforms(style),cache.zOrigin&&style[_transformOriginProp]&&(style[_transformOriginProp]+=" "+cache.zOrigin+"px",cache.zOrigin=0,cache.renderTransform()),cache.uncache=1)}},_getStyleSaver=function _getStyleSaver(target,properties){var saver={target,props:[],revert:_revertStyle,save:_saveStyle};return target._gsap||gsap.core.getCache(target),properties&&target.style&&target.nodeType&&properties.split(",").forEach(function(p){return saver.save(p)}),saver},_createElement=function _createElement(type,ns){var e=CSSPlugin_doc.createElementNS?CSSPlugin_doc.createElementNS((ns||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),type):CSSPlugin_doc.createElement(type);return e&&e.style?e:CSSPlugin_doc.createElement(type)},_getComputedProperty=function _getComputedProperty(target,property,skipPrefixFallback){var cs=getComputedStyle(target);return cs[property]||cs.getPropertyValue(property.replace(_capsExp,"-$1").toLowerCase())||cs.getPropertyValue(property)||!skipPrefixFallback&&_getComputedProperty(target,_checkPropPrefix(property)||property,1)||""},_prefixes="O,Moz,ms,Ms,Webkit".split(","),_checkPropPrefix=function _checkPropPrefix(property,element,preferPrefix){var s=(element||_tempDiv).style,i=5;if(property in s&&!preferPrefix)return property;for(property=property.charAt(0).toUpperCase()+property.substr(1);i--&&!(_prefixes[i]+property in s););return i<0?null:(3===i?"ms":i>=0?_prefixes[i]:"")+property},_initCore=function _initCore(){(function _windowExists(){return"undefined"!=typeof window})()&&window.document&&(CSSPlugin_win=window,CSSPlugin_doc=CSSPlugin_win.document,_docElement=CSSPlugin_doc.documentElement,_tempDiv=_createElement("div")||{style:{}},_createElement("div"),_transformProp=_checkPropPrefix(_transformProp),_transformOriginProp=_transformProp+"Origin",_tempDiv.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",_supports3D=!!_checkPropPrefix("perspective"),CSSPlugin_reverting=gsap.core.reverting,_pluginInitted=1)},_getReparentedCloneBBox=function _getReparentedCloneBBox(target){var bbox,owner=target.ownerSVGElement,svg=_createElement("svg",owner&&owner.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),clone=target.cloneNode(!0);clone.style.display="block",svg.appendChild(clone),_docElement.appendChild(svg);try{bbox=clone.getBBox()}catch(e){}return svg.removeChild(clone),_docElement.removeChild(svg),bbox},_getAttributeFallbacks=function _getAttributeFallbacks(target,attributesArray){for(var i=attributesArray.length;i--;)if(target.hasAttribute(attributesArray[i]))return target.getAttribute(attributesArray[i])},_getBBox=function _getBBox(target){var bounds,cloned;try{bounds=target.getBBox()}catch(error){bounds=_getReparentedCloneBBox(target),cloned=1}return bounds&&(bounds.width||bounds.height)||cloned||(bounds=_getReparentedCloneBBox(target)),!bounds||bounds.width||bounds.x||bounds.y?bounds:{x:+_getAttributeFallbacks(target,["x","cx","x1"])||0,y:+_getAttributeFallbacks(target,["y","cy","y1"])||0,width:0,height:0}},_isSVG=function _isSVG(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!_getBBox(e))},_removeProperty=function _removeProperty(target,property){if(property){var first2Chars,style=target.style;property in _transformProps&&property!==_transformOriginProp&&(property=_transformProp),style.removeProperty?("ms"!==(first2Chars=property.substr(0,2))&&"webkit"!==property.substr(0,6)||(property="-"+property),style.removeProperty("--"===first2Chars?property:property.replace(_capsExp,"-$1").toLowerCase())):style.removeAttribute(property)}},_addNonTweeningPT=function _addNonTweeningPT(plugin,target,property,beginning,end,onlySetAtEnd){var pt=new PropTween(plugin._pt,target,property,0,1,onlySetAtEnd?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue);return plugin._pt=pt,pt.b=beginning,pt.e=end,plugin._props.push(property),pt},_nonConvertibleUnits={deg:1,rad:1,turn:1},_nonStandardLayouts={grid:1,flex:1},_convertToUnit=function _convertToUnit(target,property,value,unit){var px,parent,cache,isSVG,curValue=parseFloat(value)||0,curUnit=(value+"").trim().substr((curValue+"").length)||"px",style=_tempDiv.style,horizontal=_horizontalExp.test(property),isRootSVG="svg"===target.tagName.toLowerCase(),measureProperty=(isRootSVG?"client":"offset")+(horizontal?"Width":"Height"),toPixels="px"===unit,toPercent="%"===unit;if(unit===curUnit||!curValue||_nonConvertibleUnits[unit]||_nonConvertibleUnits[curUnit])return curValue;if("px"!==curUnit&&!toPixels&&(curValue=_convertToUnit(target,property,value,"px")),isSVG=target.getCTM&&_isSVG(target),(toPercent||"%"===curUnit)&&(_transformProps[property]||~property.indexOf("adius")))return px=isSVG?target.getBBox()[horizontal?"width":"height"]:target[measureProperty],_round(toPercent?curValue/px*100:curValue/100*px);if(style[horizontal?"width":"height"]=100+(toPixels?curUnit:unit),parent="rem"!==unit&&~property.indexOf("adius")||"em"===unit&&target.appendChild&&!isRootSVG?target:target.parentNode,isSVG&&(parent=(target.ownerSVGElement||{}).parentNode),parent&&parent!==CSSPlugin_doc&&parent.appendChild||(parent=CSSPlugin_doc.body),(cache=parent._gsap)&&toPercent&&cache.width&&horizontal&&cache.time===_ticker.time&&!cache.uncache)return _round(curValue/cache.width*100);if(!toPercent||"height"!==property&&"width"!==property)(toPercent||"%"===curUnit)&&!_nonStandardLayouts[_getComputedProperty(parent,"display")]&&(style.position=_getComputedProperty(target,"position")),parent===target&&(style.position="static"),parent.appendChild(_tempDiv),px=_tempDiv[measureProperty],parent.removeChild(_tempDiv),style.position="absolute";else{var v=target.style[property];target.style[property]=100+unit,px=target[measureProperty],v?target.style[property]=v:_removeProperty(target,property)}return horizontal&&toPercent&&((cache=_getCache(parent)).time=_ticker.time,cache.width=parent[measureProperty]),_round(toPixels?px*curValue/100:px&&curValue?100/px*curValue:0)},_get=function _get(target,property,unit,uncache){var value;return _pluginInitted||_initCore(),property in _propertyAliases&&"transform"!==property&&~(property=_propertyAliases[property]).indexOf(",")&&(property=property.split(",")[0]),_transformProps[property]&&"transform"!==property?(value=_parseTransform(target,uncache),value="transformOrigin"!==property?value[property]:value.svg?value.origin:_firstTwoOnly(_getComputedProperty(target,_transformOriginProp))+" "+value.zOrigin+"px"):(!(value=target.style[property])||"auto"===value||uncache||~(value+"").indexOf("calc("))&&(value=_specialProps[property]&&_specialProps[property](target,property,unit)||_getComputedProperty(target,property)||_getProperty(target,property)||("opacity"===property?1:0)),unit&&!~(value+"").trim().indexOf(" ")?_convertToUnit(target,property,value,unit)+unit:value},_tweenComplexCSSString=function _tweenComplexCSSString(target,prop,start,end){if(!start||"none"===start){var p=_checkPropPrefix(prop,target,1),s=p&&_getComputedProperty(target,p,1);s&&s!==start?(prop=p,start=s):"borderColor"===prop&&(start=_getComputedProperty(target,"borderTopColor"))}var a,result,startValues,startNum,color,startValue,endValue,endNum,chunk,endUnit,startUnit,pt=new PropTween(this._pt,target.style,prop,0,1,_renderComplexString),index=0,matchIndex=0;if(pt.b=start,pt.e=end,start+="","var(--"===(end+="").substring(0,6)&&(end=_getComputedProperty(target,end.substring(4,end.indexOf(")")))),"auto"===end&&(startValue=target.style[prop],target.style[prop]=end,end=_getComputedProperty(target,prop)||end,startValue?target.style[prop]=startValue:_removeProperty(target,prop)),_colorStringFilter(a=[start,end]),end=a[1],startValues=(start=a[0]).match(_numWithUnitExp)||[],(end.match(_numWithUnitExp)||[]).length){for(;result=_numWithUnitExp.exec(end);)endValue=result[0],chunk=end.substring(index,result.index),color?color=(color+1)%5:"rgba("!==chunk.substr(-5)&&"hsla("!==chunk.substr(-5)||(color=1),endValue!==(startValue=startValues[matchIndex++]||"")&&(startNum=parseFloat(startValue)||0,startUnit=startValue.substr((startNum+"").length),"="===endValue.charAt(1)&&(endValue=_parseRelative(startNum,endValue)+startUnit),endNum=parseFloat(endValue),endUnit=endValue.substr((endNum+"").length),index=_numWithUnitExp.lastIndex-endUnit.length,endUnit||(endUnit=endUnit||_config.units[prop]||startUnit,index===end.length&&(end+=endUnit,pt.e+=endUnit)),startUnit!==endUnit&&(startNum=_convertToUnit(target,prop,startValue,endUnit)||0),pt._pt={_next:pt._pt,p:chunk||1===matchIndex?chunk:",",s:startNum,c:endNum-startNum,m:color&&color<4||"zIndex"===prop?Math.round:0});pt.c=index<end.length?end.substring(index,end.length):""}else pt.r="display"===prop&&"none"===end?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue;return _relExp.test(end)&&(pt.e=0),this._pt=pt,pt},_keywordToPercent={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},_convertKeywordsToPercentages=function _convertKeywordsToPercentages(value){var split=value.split(" "),x=split[0],y=split[1]||"50%";return"top"!==x&&"bottom"!==x&&"left"!==y&&"right"!==y||(value=x,x=y,y=value),split[0]=_keywordToPercent[x]||x,split[1]=_keywordToPercent[y]||y,split.join(" ")},_renderClearProps=function _renderClearProps(ratio,data){if(data.tween&&data.tween._time===data.tween._dur){var prop,clearTransforms,i,target=data.t,style=target.style,props=data.u,cache=target._gsap;if("all"===props||!0===props)style.cssText="",clearTransforms=1;else for(i=(props=props.split(",")).length;--i>-1;)prop=props[i],_transformProps[prop]&&(clearTransforms=1,prop="transformOrigin"===prop?_transformOriginProp:_transformProp),_removeProperty(target,prop);clearTransforms&&(_removeProperty(target,_transformProp),cache&&(cache.svg&&target.removeAttribute("transform"),style.scale=style.rotate=style.translate="none",_parseTransform(target,1),cache.uncache=1,_removeIndependentTransforms(style)))}},_specialProps={clearProps:function clearProps(plugin,target,property,endValue,tween){if("isFromStart"!==tween.data){var pt=plugin._pt=new PropTween(plugin._pt,target,property,0,0,_renderClearProps);return pt.u=endValue,pt.pr=-10,pt.tween=tween,plugin._props.push(property),1}}},_identity2DMatrix=[1,0,0,1,0,0],_rotationalProperties={},_isNullTransform=function _isNullTransform(value){return"matrix(1, 0, 0, 1, 0, 0)"===value||"none"===value||!value},_getComputedTransformMatrixAsArray=function _getComputedTransformMatrixAsArray(target){var matrixString=_getComputedProperty(target,_transformProp);return _isNullTransform(matrixString)?_identity2DMatrix:matrixString.substr(7).match(_numExp).map(_round)},_getMatrix=function _getMatrix(target,force2D){var parent,nextSibling,temp,addedToDOM,cache=target._gsap||_getCache(target),style=target.style,matrix=_getComputedTransformMatrixAsArray(target);return cache.svg&&target.getAttribute("transform")?"1,0,0,1,0,0"===(matrix=[(temp=target.transform.baseVal.consolidate().matrix).a,temp.b,temp.c,temp.d,temp.e,temp.f]).join(",")?_identity2DMatrix:matrix:(matrix!==_identity2DMatrix||target.offsetParent||target===_docElement||cache.svg||(temp=style.display,style.display="block",(parent=target.parentNode)&&(target.offsetParent||target.getBoundingClientRect().width)||(addedToDOM=1,nextSibling=target.nextElementSibling,_docElement.appendChild(target)),matrix=_getComputedTransformMatrixAsArray(target),temp?style.display=temp:_removeProperty(target,"display"),addedToDOM&&(nextSibling?parent.insertBefore(target,nextSibling):parent?parent.appendChild(target):_docElement.removeChild(target))),force2D&&matrix.length>6?[matrix[0],matrix[1],matrix[4],matrix[5],matrix[12],matrix[13]]:matrix)},_applySVGOrigin=function _applySVGOrigin(target,origin,originIsAbsolute,smooth,matrixArray,pluginToAddPropTweensTo){var bounds,determinant,y,cache=target._gsap,matrix=matrixArray||_getMatrix(target,!0),xOriginOld=cache.xOrigin||0,yOriginOld=cache.yOrigin||0,xOffsetOld=cache.xOffset||0,yOffsetOld=cache.yOffset||0,a=matrix[0],b=matrix[1],c=matrix[2],d=matrix[3],tx=matrix[4],ty=matrix[5],originSplit=origin.split(" "),xOrigin=parseFloat(originSplit[0])||0,yOrigin=parseFloat(originSplit[1])||0;originIsAbsolute?matrix!==_identity2DMatrix&&(determinant=a*d-b*c)&&(y=xOrigin*(-b/determinant)+yOrigin*(a/determinant)-(a*ty-b*tx)/determinant,xOrigin=xOrigin*(d/determinant)+yOrigin*(-c/determinant)+(c*ty-d*tx)/determinant,yOrigin=y):(xOrigin=(bounds=_getBBox(target)).x+(~originSplit[0].indexOf("%")?xOrigin/100*bounds.width:xOrigin),yOrigin=bounds.y+(~(originSplit[1]||originSplit[0]).indexOf("%")?yOrigin/100*bounds.height:yOrigin)),smooth||!1!==smooth&&cache.smooth?(tx=xOrigin-xOriginOld,ty=yOrigin-yOriginOld,cache.xOffset=xOffsetOld+(tx*a+ty*c)-tx,cache.yOffset=yOffsetOld+(tx*b+ty*d)-ty):cache.xOffset=cache.yOffset=0,cache.xOrigin=xOrigin,cache.yOrigin=yOrigin,cache.smooth=!!smooth,cache.origin=origin,cache.originIsAbsolute=!!originIsAbsolute,target.style[_transformOriginProp]="0px 0px",pluginToAddPropTweensTo&&(_addNonTweeningPT(pluginToAddPropTweensTo,cache,"xOrigin",xOriginOld,xOrigin),_addNonTweeningPT(pluginToAddPropTweensTo,cache,"yOrigin",yOriginOld,yOrigin),_addNonTweeningPT(pluginToAddPropTweensTo,cache,"xOffset",xOffsetOld,cache.xOffset),_addNonTweeningPT(pluginToAddPropTweensTo,cache,"yOffset",yOffsetOld,cache.yOffset)),target.setAttribute("data-svg-origin",xOrigin+" "+yOrigin)},_parseTransform=function _parseTransform(target,uncache){var cache=target._gsap||new GSCache(target);if("x"in cache&&!uncache&&!cache.uncache)return cache;var x,y,z,scaleX,scaleY,rotation,rotationX,rotationY,skewX,skewY,perspective,xOrigin,yOrigin,matrix,angle,cos,sin,a,b,c,d,a12,a22,t1,t2,t3,a13,a23,a33,a42,a43,a32,style=target.style,invertedScaleX=cache.scaleX<0,cs=getComputedStyle(target),origin=_getComputedProperty(target,_transformOriginProp)||"0";return x=y=z=rotation=rotationX=rotationY=skewX=skewY=perspective=0,scaleX=scaleY=1,cache.svg=!(!target.getCTM||!_isSVG(target)),cs.translate&&("none"===cs.translate&&"none"===cs.scale&&"none"===cs.rotate||(style[_transformProp]=("none"!==cs.translate?"translate3d("+(cs.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==cs.rotate?"rotate("+cs.rotate+") ":"")+("none"!==cs.scale?"scale("+cs.scale.split(" ").join(",")+") ":"")+("none"!==cs[_transformProp]?cs[_transformProp]:"")),style.scale=style.rotate=style.translate="none"),matrix=_getMatrix(target,cache.svg),cache.svg&&(cache.uncache?(t2=target.getBBox(),origin=cache.xOrigin-t2.x+"px "+(cache.yOrigin-t2.y)+"px",t1=""):t1=!uncache&&target.getAttribute("data-svg-origin"),_applySVGOrigin(target,t1||origin,!!t1||cache.originIsAbsolute,!1!==cache.smooth,matrix)),xOrigin=cache.xOrigin||0,yOrigin=cache.yOrigin||0,matrix!==_identity2DMatrix&&(a=matrix[0],b=matrix[1],c=matrix[2],d=matrix[3],x=a12=matrix[4],y=a22=matrix[5],6===matrix.length?(scaleX=Math.sqrt(a*a+b*b),scaleY=Math.sqrt(d*d+c*c),rotation=a||b?_atan2(b,a)*_RAD2DEG:0,(skewX=c||d?_atan2(c,d)*_RAD2DEG+rotation:0)&&(scaleY*=Math.abs(Math.cos(skewX*_DEG2RAD))),cache.svg&&(x-=xOrigin-(xOrigin*a+yOrigin*c),y-=yOrigin-(xOrigin*b+yOrigin*d))):(a32=matrix[6],a42=matrix[7],a13=matrix[8],a23=matrix[9],a33=matrix[10],a43=matrix[11],x=matrix[12],y=matrix[13],z=matrix[14],rotationX=(angle=_atan2(a32,a33))*_RAD2DEG,angle&&(t1=a12*(cos=Math.cos(-angle))+a13*(sin=Math.sin(-angle)),t2=a22*cos+a23*sin,t3=a32*cos+a33*sin,a13=a12*-sin+a13*cos,a23=a22*-sin+a23*cos,a33=a32*-sin+a33*cos,a43=a42*-sin+a43*cos,a12=t1,a22=t2,a32=t3),rotationY=(angle=_atan2(-c,a33))*_RAD2DEG,angle&&(cos=Math.cos(-angle),a43=d*(sin=Math.sin(-angle))+a43*cos,a=t1=a*cos-a13*sin,b=t2=b*cos-a23*sin,c=t3=c*cos-a33*sin),rotation=(angle=_atan2(b,a))*_RAD2DEG,angle&&(t1=a*(cos=Math.cos(angle))+b*(sin=Math.sin(angle)),t2=a12*cos+a22*sin,b=b*cos-a*sin,a22=a22*cos-a12*sin,a=t1,a12=t2),rotationX&&Math.abs(rotationX)+Math.abs(rotation)>359.9&&(rotationX=rotation=0,rotationY=180-rotationY),scaleX=_round(Math.sqrt(a*a+b*b+c*c)),scaleY=_round(Math.sqrt(a22*a22+a32*a32)),angle=_atan2(a12,a22),skewX=Math.abs(angle)>2e-4?angle*_RAD2DEG:0,perspective=a43?1/(a43<0?-a43:a43):0),cache.svg&&(t1=target.getAttribute("transform"),cache.forceCSS=target.setAttribute("transform","")||!_isNullTransform(_getComputedProperty(target,_transformProp)),t1&&target.setAttribute("transform",t1))),Math.abs(skewX)>90&&Math.abs(skewX)<270&&(invertedScaleX?(scaleX*=-1,skewX+=rotation<=0?180:-180,rotation+=rotation<=0?180:-180):(scaleY*=-1,skewX+=skewX<=0?180:-180)),uncache=uncache||cache.uncache,cache.x=x-((cache.xPercent=x&&(!uncache&&cache.xPercent||(Math.round(target.offsetWidth/2)===Math.round(-x)?-50:0)))?target.offsetWidth*cache.xPercent/100:0)+"px",cache.y=y-((cache.yPercent=y&&(!uncache&&cache.yPercent||(Math.round(target.offsetHeight/2)===Math.round(-y)?-50:0)))?target.offsetHeight*cache.yPercent/100:0)+"px",cache.z=z+"px",cache.scaleX=_round(scaleX),cache.scaleY=_round(scaleY),cache.rotation=_round(rotation)+"deg",cache.rotationX=_round(rotationX)+"deg",cache.rotationY=_round(rotationY)+"deg",cache.skewX=skewX+"deg",cache.skewY=skewY+"deg",cache.transformPerspective=perspective+"px",(cache.zOrigin=parseFloat(origin.split(" ")[2])||!uncache&&cache.zOrigin||0)&&(style[_transformOriginProp]=_firstTwoOnly(origin)),cache.xOffset=cache.yOffset=0,cache.force3D=_config.force3D,cache.renderTransform=cache.svg?_renderSVGTransforms:_supports3D?_renderCSSTransforms:_renderNon3DTransforms,cache.uncache=0,cache},_firstTwoOnly=function _firstTwoOnly(value){return(value=value.split(" "))[0]+" "+value[1]},_addPxTranslate=function _addPxTranslate(target,start,value){var unit=getUnit(start);return _round(parseFloat(start)+parseFloat(_convertToUnit(target,"x",value+"px",unit)))+unit},_renderNon3DTransforms=function _renderNon3DTransforms(ratio,cache){cache.z="0px",cache.rotationY=cache.rotationX="0deg",cache.force3D=0,_renderCSSTransforms(ratio,cache)},_renderCSSTransforms=function _renderCSSTransforms(ratio,cache){var _ref=cache||this,xPercent=_ref.xPercent,yPercent=_ref.yPercent,x=_ref.x,y=_ref.y,z=_ref.z,rotation=_ref.rotation,rotationY=_ref.rotationY,rotationX=_ref.rotationX,skewX=_ref.skewX,skewY=_ref.skewY,scaleX=_ref.scaleX,scaleY=_ref.scaleY,transformPerspective=_ref.transformPerspective,force3D=_ref.force3D,target=_ref.target,zOrigin=_ref.zOrigin,transforms="",use3D="auto"===force3D&&ratio&&1!==ratio||!0===force3D;if(zOrigin&&("0deg"!==rotationX||"0deg"!==rotationY)){var cos,angle=parseFloat(rotationY)*_DEG2RAD,a13=Math.sin(angle),a33=Math.cos(angle);angle=parseFloat(rotationX)*_DEG2RAD,cos=Math.cos(angle),x=_addPxTranslate(target,x,a13*cos*-zOrigin),y=_addPxTranslate(target,y,-Math.sin(angle)*-zOrigin),z=_addPxTranslate(target,z,a33*cos*-zOrigin+zOrigin)}"0px"!==transformPerspective&&(transforms+="perspective("+transformPerspective+") "),(xPercent||yPercent)&&(transforms+="translate("+xPercent+"%, "+yPercent+"%) "),(use3D||"0px"!==x||"0px"!==y||"0px"!==z)&&(transforms+="0px"!==z||use3D?"translate3d("+x+", "+y+", "+z+") ":"translate("+x+", "+y+") "),"0deg"!==rotation&&(transforms+="rotate("+rotation+") "),"0deg"!==rotationY&&(transforms+="rotateY("+rotationY+") "),"0deg"!==rotationX&&(transforms+="rotateX("+rotationX+") "),"0deg"===skewX&&"0deg"===skewY||(transforms+="skew("+skewX+", "+skewY+") "),1===scaleX&&1===scaleY||(transforms+="scale("+scaleX+", "+scaleY+") "),target.style[_transformProp]=transforms||"translate(0, 0)"},_renderSVGTransforms=function _renderSVGTransforms(ratio,cache){var a11,a21,a12,a22,temp,_ref2=cache||this,xPercent=_ref2.xPercent,yPercent=_ref2.yPercent,x=_ref2.x,y=_ref2.y,rotation=_ref2.rotation,skewX=_ref2.skewX,skewY=_ref2.skewY,scaleX=_ref2.scaleX,scaleY=_ref2.scaleY,target=_ref2.target,xOrigin=_ref2.xOrigin,yOrigin=_ref2.yOrigin,xOffset=_ref2.xOffset,yOffset=_ref2.yOffset,forceCSS=_ref2.forceCSS,tx=parseFloat(x),ty=parseFloat(y);rotation=parseFloat(rotation),skewX=parseFloat(skewX),(skewY=parseFloat(skewY))&&(skewX+=skewY=parseFloat(skewY),rotation+=skewY),rotation||skewX?(rotation*=_DEG2RAD,skewX*=_DEG2RAD,a11=Math.cos(rotation)*scaleX,a21=Math.sin(rotation)*scaleX,a12=Math.sin(rotation-skewX)*-scaleY,a22=Math.cos(rotation-skewX)*scaleY,skewX&&(skewY*=_DEG2RAD,temp=Math.tan(skewX-skewY),a12*=temp=Math.sqrt(1+temp*temp),a22*=temp,skewY&&(temp=Math.tan(skewY),a11*=temp=Math.sqrt(1+temp*temp),a21*=temp)),a11=_round(a11),a21=_round(a21),a12=_round(a12),a22=_round(a22)):(a11=scaleX,a22=scaleY,a21=a12=0),(tx&&!~(x+"").indexOf("px")||ty&&!~(y+"").indexOf("px"))&&(tx=_convertToUnit(target,"x",x,"px"),ty=_convertToUnit(target,"y",y,"px")),(xOrigin||yOrigin||xOffset||yOffset)&&(tx=_round(tx+xOrigin-(xOrigin*a11+yOrigin*a12)+xOffset),ty=_round(ty+yOrigin-(xOrigin*a21+yOrigin*a22)+yOffset)),(xPercent||yPercent)&&(temp=target.getBBox(),tx=_round(tx+xPercent/100*temp.width),ty=_round(ty+yPercent/100*temp.height)),temp="matrix("+a11+","+a21+","+a12+","+a22+","+tx+","+ty+")",target.setAttribute("transform",temp),forceCSS&&(target.style[_transformProp]=temp)},_addRotationalPropTween=function _addRotationalPropTween(plugin,target,property,startNum,endValue){var direction,pt,isString=_isString(endValue),change=parseFloat(endValue)*(isString&&~endValue.indexOf("rad")?_RAD2DEG:1)-startNum,finalValue=startNum+change+"deg";return isString&&("short"===(direction=endValue.split("_")[1])&&(change%=360)!==change%180&&(change+=change<0?360:-360),"cw"===direction&&change<0?change=(change+36e9)%360-360*~~(change/360):"ccw"===direction&&change>0&&(change=(change-36e9)%360-360*~~(change/360))),plugin._pt=pt=new PropTween(plugin._pt,target,property,startNum,change,_renderPropWithEnd),pt.e=finalValue,pt.u="deg",plugin._props.push(property),pt},_assign=function _assign(target,source){for(var p in source)target[p]=source[p];return target},_addRawTransformPTs=function _addRawTransformPTs(plugin,transforms,target){var endCache,p,startValue,endValue,startNum,endNum,endUnit,startCache=_assign({},target._gsap),style=target.style;for(p in startCache.svg?(startValue=target.getAttribute("transform"),target.setAttribute("transform",""),style[_transformProp]=transforms,endCache=_parseTransform(target,1),_removeProperty(target,_transformProp),target.setAttribute("transform",startValue)):(startValue=getComputedStyle(target)[_transformProp],style[_transformProp]=transforms,endCache=_parseTransform(target,1),style[_transformProp]=startValue),_transformProps)(startValue=startCache[p])!==(endValue=endCache[p])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(p)<0&&(startNum=getUnit(startValue)!==(endUnit=getUnit(endValue))?_convertToUnit(target,p,startValue,endUnit):parseFloat(startValue),endNum=parseFloat(endValue),plugin._pt=new PropTween(plugin._pt,endCache,p,startNum,endNum-startNum,_renderCSSProp),plugin._pt.u=endUnit||0,plugin._props.push(p));_assign(endCache,startCache)};_forEachName("padding,margin,Width,Radius",function(name,index){var t="Top",r="Right",b="Bottom",l="Left",props=(index<3?[t,r,b,l]:[t+l,t+r,b+r,b+l]).map(function(side){return index<2?name+side:"border"+side+name});_specialProps[index>1?"border"+name:name]=function(plugin,target,property,endValue,tween){var a,vars;if(arguments.length<4)return a=props.map(function(prop){return _get(plugin,prop,property)}),5===(vars=a.join(" ")).split(a[0]).length?a[0]:vars;a=(endValue+"").split(" "),vars={},props.forEach(function(prop,i){return vars[prop]=a[i]=a[i]||a[(i-1)/2|0]}),plugin.init(target,vars,tween)}});var rotation,all,CSSPlugin={name:"css",register:_initCore,targetTest:function targetTest(target){return target.style&&target.nodeType},init:function init(target,vars,tween,index,targets){var startValue,endValue,endNum,startNum,type,specialProp,p,startUnit,endUnit,relative,isTransformRelated,transformPropTween,cache,smooth,hasPriority,inlineProps,props=this._props,style=target.style,startAt=tween.vars.startAt;for(p in _pluginInitted||_initCore(),this.styles=this.styles||_getStyleSaver(target),inlineProps=this.styles.props,this.tween=tween,vars)if("autoRound"!==p&&(endValue=vars[p],!_plugins[p]||!_checkPlugin(p,vars,tween,index,target,targets)))if(type=typeof endValue,specialProp=_specialProps[p],"function"===type&&(type=typeof(endValue=endValue.call(tween,index,target,targets))),"string"===type&&~endValue.indexOf("random(")&&(endValue=_replaceRandom(endValue)),specialProp)specialProp(this,target,p,endValue,tween)&&(hasPriority=1);else if("--"===p.substr(0,2))startValue=(getComputedStyle(target).getPropertyValue(p)+"").trim(),endValue+="",_colorExp.lastIndex=0,_colorExp.test(startValue)||(startUnit=getUnit(startValue),endUnit=getUnit(endValue)),endUnit?startUnit!==endUnit&&(startValue=_convertToUnit(target,p,startValue,endUnit)+endUnit):startUnit&&(endValue+=startUnit),this.add(style,"setProperty",startValue,endValue,index,targets,0,0,p),props.push(p),inlineProps.push(p,0,style[p]);else if("undefined"!==type){if(startAt&&p in startAt?(startValue="function"==typeof startAt[p]?startAt[p].call(tween,index,target,targets):startAt[p],_isString(startValue)&&~startValue.indexOf("random(")&&(startValue=_replaceRandom(startValue)),getUnit(startValue+"")||"auto"===startValue||(startValue+=_config.units[p]||getUnit(_get(target,p))||""),"="===(startValue+"").charAt(1)&&(startValue=_get(target,p))):startValue=_get(target,p),startNum=parseFloat(startValue),(relative="string"===type&&"="===endValue.charAt(1)&&endValue.substr(0,2))&&(endValue=endValue.substr(2)),endNum=parseFloat(endValue),p in _propertyAliases&&("autoAlpha"===p&&(1===startNum&&"hidden"===_get(target,"visibility")&&endNum&&(startNum=0),inlineProps.push("visibility",0,style.visibility),_addNonTweeningPT(this,style,"visibility",startNum?"inherit":"hidden",endNum?"inherit":"hidden",!endNum)),"scale"!==p&&"transform"!==p&&~(p=_propertyAliases[p]).indexOf(",")&&(p=p.split(",")[0])),isTransformRelated=p in _transformProps)if(this.styles.save(p),"string"===type&&"var(--"===endValue.substring(0,6)&&(endValue=_getComputedProperty(target,endValue.substring(4,endValue.indexOf(")"))),endNum=parseFloat(endValue)),transformPropTween||((cache=target._gsap).renderTransform&&!vars.parseTransform||_parseTransform(target,vars.parseTransform),smooth=!1!==vars.smoothOrigin&&cache.smooth,(transformPropTween=this._pt=new PropTween(this._pt,style,_transformProp,0,1,cache.renderTransform,cache,0,-1)).dep=1),"scale"===p)this._pt=new PropTween(this._pt,cache,"scaleY",cache.scaleY,(relative?_parseRelative(cache.scaleY,relative+endNum):endNum)-cache.scaleY||0,_renderCSSProp),this._pt.u=0,props.push("scaleY",p),p+="X";else{if("transformOrigin"===p){inlineProps.push(_transformOriginProp,0,style[_transformOriginProp]),endValue=_convertKeywordsToPercentages(endValue),cache.svg?_applySVGOrigin(target,endValue,0,smooth,0,this):((endUnit=parseFloat(endValue.split(" ")[2])||0)!==cache.zOrigin&&_addNonTweeningPT(this,cache,"zOrigin",cache.zOrigin,endUnit),_addNonTweeningPT(this,style,p,_firstTwoOnly(startValue),_firstTwoOnly(endValue)));continue}if("svgOrigin"===p){_applySVGOrigin(target,endValue,1,smooth,0,this);continue}if(p in _rotationalProperties){_addRotationalPropTween(this,cache,p,startNum,relative?_parseRelative(startNum,relative+endValue):endValue);continue}if("smoothOrigin"===p){_addNonTweeningPT(this,cache,"smooth",cache.smooth,endValue);continue}if("force3D"===p){cache[p]=endValue;continue}if("transform"===p){_addRawTransformPTs(this,endValue,target);continue}}else p in style||(p=_checkPropPrefix(p)||p);if(isTransformRelated||(endNum||0===endNum)&&(startNum||0===startNum)&&!_complexExp.test(endValue)&&p in style)endNum||(endNum=0),(startUnit=(startValue+"").substr((startNum+"").length))!==(endUnit=getUnit(endValue)||(p in _config.units?_config.units[p]:startUnit))&&(startNum=_convertToUnit(target,p,startValue,endUnit)),this._pt=new PropTween(this._pt,isTransformRelated?cache:style,p,startNum,(relative?_parseRelative(startNum,relative+endNum):endNum)-startNum,isTransformRelated||"px"!==endUnit&&"zIndex"!==p||!1===vars.autoRound?_renderCSSProp:_renderRoundedCSSProp),this._pt.u=endUnit||0,startUnit!==endUnit&&"%"!==endUnit&&(this._pt.b=startValue,this._pt.r=_renderCSSPropWithBeginning);else if(p in style)_tweenComplexCSSString.call(this,target,p,startValue,relative?relative+endValue:endValue);else if(p in target)this.add(target,p,startValue||target[p],relative?relative+endValue:endValue,index,targets);else if("parseTransform"!==p){_missingPlugin(p,endValue);continue}isTransformRelated||(p in style?inlineProps.push(p,0,style[p]):"function"==typeof target[p]?inlineProps.push(p,2,target[p]()):inlineProps.push(p,1,startValue||target[p])),props.push(p)}hasPriority&&_sortPropTweensByPriority(this)},render:function render(ratio,data){if(data.tween._time||!CSSPlugin_reverting())for(var pt=data._pt;pt;)pt.r(ratio,pt.d),pt=pt._next;else data.styles.revert()},get:_get,aliases:_propertyAliases,getSetter:function getSetter(target,property,plugin){var p=_propertyAliases[property];return p&&p.indexOf(",")<0&&(property=p),property in _transformProps&&property!==_transformOriginProp&&(target._gsap.x||_get(target,"x"))?plugin&&_recentSetterPlugin===plugin?"scale"===property?_setterScale:_setterTransform:(_recentSetterPlugin=plugin||{})&&("scale"===property?_setterScaleWithRender:_setterTransformWithRender):target.style&&!_isUndefined(target.style[property])?_setterCSSStyle:~property.indexOf("-")?_setterCSSProp:_getSetter(target,property)},core:{_removeProperty,_getMatrix}};gsap.utils.checkPrefix=_checkPropPrefix,gsap.core.getStyleSaver=_getStyleSaver,all=_forEachName("x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+(rotation="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(name){_transformProps[name]=1}),_forEachName(rotation,function(name){_config.units[name]="deg",_rotationalProperties[name]=1}),_propertyAliases[all[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+rotation,_forEachName("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(name){var split=name.split(":");_propertyAliases[split[1]]=all[split[0]]}),_forEachName("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(name){_config.units[name]="px"}),gsap.registerPlugin(CSSPlugin);var gsapWithCSS=gsap.registerPlugin(CSSPlugin)||gsap;gsapWithCSS.core.Tween;class CreateDom{static videoExe=new Set(["webm","mp4"]);static scrollEvents=[];static mediaCondition=[[1/0,1450],[1450,1100],[1100,900],[900,760],[760,-1]];static pureNumberProperty=["fontWeight","zIndex","opacity","lineHeight","flex","flexGrow","flexShrink","order","columnCount","animationIterationCount","zoom"];static mediaEa=()=>{const conditionMatrix=CreateDom.mediaCondition;let finalValue;return finalValue=window.innerWidth<=conditionMatrix[0][0]&&window.innerWidth>conditionMatrix[0][1]||window.innerWidth<=conditionMatrix[1][0]&&window.innerWidth>conditionMatrix[1][1]||window.innerWidth<=conditionMatrix[2][0]&&window.innerWidth>conditionMatrix[2][1]||window.innerWidth<=conditionMatrix[3][0]&&window.innerWidth>conditionMatrix[3][1]?"px":"vw",finalValue};static getNaviheight=()=>{const conditionMatrix=CreateDom.mediaCondition;let finalValue;return finalValue=window.innerWidth<=conditionMatrix[0][0]&&window.innerWidth>conditionMatrix[0][1]?68:window.innerWidth<=conditionMatrix[1][0]&&window.innerWidth>conditionMatrix[1][1]?66:window.innerWidth<=conditionMatrix[2][0]&&window.innerWidth>conditionMatrix[2][1]?64:window.innerWidth<=conditionMatrix[3][0]&&window.innerWidth>conditionMatrix[3][1]?60:45,finalValue};static getBaseTop=(forcePixel=!1)=>{const convertVwPx=vw=>Math.floor(vw/100*window.innerWidth),conditionMatrix=CreateDom.mediaCondition;let finalValue;return window.innerWidth<=conditionMatrix[0][0]&&window.innerWidth>conditionMatrix[0][1]||window.innerWidth<=conditionMatrix[1][0]&&window.innerWidth>conditionMatrix[1][1]?(finalValue=200,window.innerHeight<960&&(finalValue=180)):window.innerWidth<=conditionMatrix[2][0]&&window.innerWidth>conditionMatrix[2][1]?(finalValue=170,window.innerHeight<960&&(finalValue=165)):window.innerWidth<=conditionMatrix[3][0]&&window.innerWidth>conditionMatrix[3][1]?(finalValue=140,window.innerHeight<960&&(finalValue=140)):forcePixel?(finalValue=convertVwPx(10),window.innerHeight<960&&(finalValue=convertVwPx(10))):(finalValue=10,window.innerHeight<960&&(finalValue=10)),finalValue};static equal=jsonString=>{const equal=jsonString=>{let filtered;"object"==typeof jsonString&&(jsonString=JSON.stringify(jsonString)),"string"!=typeof jsonString&&(jsonString=String(jsonString)),filtered=jsonString.replace(/(\"[0-9]+\-[0-9]+\-[0-9]+T[0-9]+\:[0-9]+\:[^Z]+Z\")/g,function(match,p1,offset,string){return"new Date("+p1+")"}),filtered=filtered.replace(/nbsp\;/g,"&nbsp;"),filtered=filtered.replace(/\&\&nbsp\;/g,"&nbsp;");const json=new Function("const obj = "+filtered+"; return obj;")();let temp,boo;if("object"==typeof json){if(Array.isArray(json)){for(let item of json)if("string"==typeof item&&/^[\{\[]/.test(item.trim())&&/[\}\]]$/.test(item.trim())){try{temp=JSON.parse(item),boo=!0}catch(e){boo=!1}boo&&(item=equal(item))}}else for(let i in json)if("string"==typeof json[i]&&/^[\{\[]/.test(json[i].trim())&&/[\}\]]$/.test(json[i].trim())){try{temp=JSON.parse(json[i]),boo=!0}catch(e){boo=!1}boo&&(json[i]=equal(json[i]))}return json}throw Error("invalid input")};return equal(jsonString)};static toOriginKeyframe=(duration,thisEase="power1.inOut")=>({duration,animation:{ease:thisEase},transform:{x:0,y:0,scale:1,rotation:0,opacity:1}});static createTempClassName=()=>{const classKey="temptemp_class_generate_name_";return void 0!==window.crypto?classKey+crypto.randomUUID():`${classKey}fallback-${Date.now().toString(36)}-${Math.random().toString(36).substring(2)}`};static convertStyleObjectToCssString=styles=>{let cssText;cssText="";for(const key in styles)if(Object.prototype.hasOwnProperty.call(styles,key)){cssText+=`${key.replace(/[A-Z]/g,match=>`-${match.toLowerCase()}`)}: ${styles[key]}; `}return cssText.trim()};static transformCss=command=>{let result;return result=" ",void 0!==command.x&&void 0!==command.y?("string"==typeof command.x?result+="translate("+command.x+",":"number"==typeof command.x&&(result+="translate("+String(command.x)+"px,"),"string"==typeof command.y?result+=" "+command.y+")":"number"==typeof command.y&&(result+=" "+String(command.y)+"px)")):void 0!==command.x?"string"==typeof command.x?result+="translateX("+command.x+")":"number"==typeof command.x&&(result+="translateX("+String(command.x)+"px)"):void 0!==command.y&&("string"==typeof command.y?result+="translateY("+command.y+")":"number"==typeof command.y&&(result+="translateY("+String(command.y)+"px)")),result+=" ",void 0!==command.scale?result+="scale("+String(command.scale)+")":void 0!==command.scaleX&&void 0!==command.scaleY?("number"==typeof command.scaleX&&(result+="scale("+String(command.scaleX)+","),"number"==typeof command.scaleY&&(result+=" "+String(command.scaleY)+")")):void 0!==command.scaleX?result+="scaleX("+String(command.scaleX)+")":void 0!==command.scaleY&&(result+="scaleY("+String(command.scaleY)+")"),result+=" ",void 0!==command.rotation&&(result+="rotate("+String(command.rotation)+"deg)"),result+=" ",void 0!==command.skew?result+="skew("+String(command.skew)+"deg)":void 0!==command.skewX&&void 0!==command.skewY?("number"==typeof command.skewX&&(result+="skew("+String(command.skewX)+"deg,"),"number"==typeof command.skewY&&(result+=" "+String(command.skewY)+"deg)")):void 0!==command.skewX?result+="skewX("+String(command.skewX)+")":void 0!==command.skewY&&(result+="skewY("+String(command.skewY)+")"),result+=" ",result=result.trim(),result=result.replace(/  /g," "),result=result.trim(),result=result.replace(/  /g," "),result=result.trim(),result};static toOrigin=command=>{const conditionMatrix=CreateDom.mediaCondition;let duration,startDelay,launching,target,targets,thisEase,scroll,scrollDom,scrollVisual;if(duration=command.duration,startDelay="number"==typeof command.startDelay?command.startDelay:0,launching="boolean"==typeof command.launching&&command.launching,target=void 0!==command.target?command.target:null,targets=void 0!==command.targets?command.targets:[],thisEase=void 0!==command.ease?command.ease:"power1.inOut",scrollVisual=window.innerWidth>conditionMatrix[3][1]?100:0,void 0===command.scroll?scroll=-1:"number"==typeof command.scroll?(scroll=command.scroll,scrollDom=null):(scroll=command.scroll.offsetTop-window.innerHeight+CreateDom.getNaviheight()+CreateDom.getBaseTop(!0)+scrollVisual,scrollDom=command.scroll),-1!==scroll&&(launching=!0),launching){if(-1===scroll){if(0===targets.length){if(null==target)throw new Error("invalid target");return setTimeout(()=>{CreateDom.animate(target,{keyframe:[CreateDom.toOriginKeyframe(duration,thisEase)],time:{startDelay:0+startDelay}}).catch(e=>console.log(e))},0),async(target,start)=>{CreateDom.animate(target,{keyframe:[CreateDom.toOriginKeyframe(duration,thisEase)],time:{startDelay:start+startDelay}}).catch(e=>console.log(e))}}return setTimeout(()=>{for(let t of targets)CreateDom.animate(t,{keyframe:[CreateDom.toOriginKeyframe(duration,thisEase)],time:{startDelay:0+startDelay}}).catch(e=>console.log(e))},0),async(target,start)=>{CreateDom.animate(target,{keyframe:[CreateDom.toOriginKeyframe(duration,thisEase)],time:{startDelay:start+startDelay}}).catch(e=>console.log(e))}}return 0===targets.length?null==target?async(target,start)=>{CreateDom.scrollEvents.push(async scrollY=>{if(null!==scrollDom&&scrollY>(scroll=scrollDom.offsetTop-window.innerHeight+CreateDom.getNaviheight()+CreateDom.getBaseTop(!0)+scrollVisual)||null===scrollDom&&scrollY>scroll){if(0===scrollY){if(!(.8*window.innerHeight>scroll+window.innerHeight))return!1;setTimeout(()=>{CreateDom.animate(target,{keyframe:[CreateDom.toOriginKeyframe(duration,thisEase)],time:{startDelay:0+startDelay}}).catch(e=>console.log(e))},0)}else setTimeout(()=>{CreateDom.animate(target,{keyframe:[CreateDom.toOriginKeyframe(duration,thisEase)],time:{startDelay:0+startDelay}}).catch(e=>console.log(e))},0);return!0}return!1})}:(CreateDom.scrollEvents.push(async scrollY=>{if(null!==scrollDom&&scrollY>(scroll=scrollDom.offsetTop-window.innerHeight+CreateDom.getNaviheight()+CreateDom.getBaseTop(!0)+scrollVisual)||null===scrollDom&&scrollY>scroll){if(0===scrollY){if(!(.8*window.innerHeight>scroll+window.innerHeight))return!1;setTimeout(()=>{CreateDom.animate(target,{keyframe:[CreateDom.toOriginKeyframe(duration,thisEase)],time:{startDelay:0+startDelay}}).catch(e=>console.log(e))},0)}else setTimeout(()=>{CreateDom.animate(target,{keyframe:[CreateDom.toOriginKeyframe(duration,thisEase)],time:{startDelay:0+startDelay}}).catch(e=>console.log(e))},0);return!0}return!1}),async(target,start)=>{CreateDom.animate(target,{keyframe:[CreateDom.toOriginKeyframe(duration,thisEase)],time:{startDelay:start+startDelay}}).catch(e=>console.log(e))}):(CreateDom.scrollEvents.push(async scrollY=>{if(null!==scrollDom&&scrollY>(scroll=scrollDom.offsetTop-window.innerHeight+CreateDom.getNaviheight()+CreateDom.getBaseTop(!0)+scrollVisual)||null===scrollDom&&scrollY>scroll){if(0===scrollY){if(!(.8*window.innerHeight>scroll+window.innerHeight))return!1;setTimeout(()=>{for(let t of targets)CreateDom.animate(t,{keyframe:[CreateDom.toOriginKeyframe(duration,thisEase)],time:{startDelay:0+startDelay}}).catch(e=>console.log(e))},0)}else setTimeout(()=>{for(let t of targets)CreateDom.animate(t,{keyframe:[CreateDom.toOriginKeyframe(duration,thisEase)],time:{startDelay:0+startDelay}}).catch(e=>console.log(e))},0);return!0}return!1}),async(target,start)=>{CreateDom.animate(target,{keyframe:[CreateDom.toOriginKeyframe(duration,thisEase)],time:{startDelay:start+startDelay}}).catch(e=>console.log(e))})}return async(target,start)=>{CreateDom.animate(target,{keyframe:[CreateDom.toOriginKeyframe(duration,thisEase)],time:{startDelay:start+startDelay}}).catch(e=>console.log(e))}};static keyframeCallback=command=>{const conditionMatrix=CreateDom.mediaCondition;let thisEase,scroll,scrollDom,scrollVisual,animateOption,originDuration,originDelay,originKeyframe,originEase;return originDuration=void 0!==command.originDuration?command.originDuration:-1,originDelay=void 0!==command.originDelay?command.originDelay:0,originEase=void 0!==command.originEase?command.originEase:"power1.inOut",thisEase=void 0!==command.ease?command.ease:"power1.inOut",scrollVisual=window.innerWidth>conditionMatrix[3][1]?100:0,animateOption=command.animate,originKeyframe=CreateDom.toOriginKeyframe(originDuration,originEase),void 0===command.scroll?scroll=-1:"number"==typeof command.scroll?(scroll=command.scroll,scrollDom=null):(scroll=command.scroll.offsetTop-window.innerHeight+CreateDom.getNaviheight()+CreateDom.getBaseTop(!0)+scrollVisual,scrollDom=command.scroll),-1===scroll?(target,start)=>new Promise(resolve=>{let thisDelay,videoBoo;videoBoo=!1;try{CreateDom.videoExe.has(String(String(target.getAttribute("src")).split(".").at(-1)).toLowerCase())&&(videoBoo=!0)}catch{}thisDelay=start,"number"==typeof animateOption.time?.startDelay&&(animateOption.time.startDelay=animateOption.time.startDelay+start,thisDelay=animateOption.time.startDelay);for(let k of animateOption.keyframe)void 0===k.animation?k.animation={ease:thisEase}:k.animation?.ease||(k.animation.ease=thisEase);thisDelay=thisDelay+originDelay+200,Number.isNaN(thisDelay)&&(thisDelay=0),videoBoo&&setTimeout(()=>{target.play()},thisDelay),-1!==originDuration?CreateDom.animate(target,{keyframe:[originKeyframe],time:{startDelay:originDelay}}).then(b=>CreateDom.animate(target,animateOption)).then(()=>{resolve()}).catch(e=>console.log(e)):CreateDom.animate(target,animateOption).then(()=>{resolve()}).catch(e=>console.log(e))}):async(target,start)=>{let thisDelay,videoBoo;videoBoo=!1;try{CreateDom.videoExe.has(String(String(target.getAttribute("src")).split(".").at(-1)).toLowerCase())&&(videoBoo=!0)}catch{}thisDelay=start,CreateDom.scrollEvents.push(async scrollY=>{if(null!==scrollDom&&scrollY>(scroll=scrollDom.offsetTop-window.innerHeight+CreateDom.getNaviheight()+CreateDom.getBaseTop(!0)+scrollVisual)||null===scrollDom&&scrollY>scroll){if(0===scrollY){if(!(.8*window.innerHeight>scroll+window.innerHeight))return!1;setTimeout(()=>{"number"==typeof animateOption.time?.startDelay&&(animateOption.time.startDelay=animateOption.time.startDelay+start,thisDelay=animateOption.time.startDelay);for(let k of animateOption.keyframe)void 0===k.animation?k.animation={ease:thisEase}:k.animation?.ease||(k.animation.ease=thisEase);Number.isNaN(thisDelay)&&(thisDelay=0),videoBoo&&setTimeout(()=>{target.play()},thisDelay),-1!==originDuration?CreateDom.animate(target,{keyframe:[originKeyframe],time:{startDelay:originDelay}}).then(b=>CreateDom.animate(target,animateOption)).catch(e=>console.log(e)):CreateDom.animate(target,animateOption).catch(e=>console.log(e))},0)}else setTimeout(()=>{"number"==typeof animateOption.time?.startDelay&&(animateOption.time.startDelay=animateOption.time.startDelay+start,thisDelay=animateOption.time.startDelay);for(let k of animateOption.keyframe)void 0===k.animation?k.animation={ease:thisEase}:k.animation?.ease||(k.animation.ease=thisEase);Number.isNaN(thisDelay)&&(thisDelay=0),videoBoo&&setTimeout(()=>{target.play()},thisDelay),-1!==originDuration?CreateDom.animate(target,{keyframe:[originKeyframe],time:{startDelay:originDelay}}).then(b=>CreateDom.animate(target,animateOption)).catch(e=>console.log(e)):CreateDom.animate(target,animateOption).catch(e=>console.log(e))},0);return!0}return!1})}};static createNode=mode=>"svg"===mode.mode?CreateDom.createSvg(mode):CreateDom.createDom(mode);static createDom=domCommandObject=>{if("object"!=typeof domCommandObject||null===domCommandObject)throw new Error("invalid input");let dom_clone,targetStyle,boldObject,underObject,specialObject,codeObject,italicObject,referenceObject,anchorObject,children,nextObject,previousObject,previousDom,thisEa,codeArr,thisCodeRegExp,thisExecResult,codeDomArr,sourceBoo,mode,mother,source,text,thisTempStyleClassName,thisStyleKey,thisOriginStyleKey,styleElement,targetStyleMaker;if(thisEa=CreateDom.mediaEa(),children=[],targetStyle={},nextObject=null,previousObject=null,codeArr=[],sourceBoo=!1,text="",mother=null,mode=void 0===domCommandObject.mode?"abstract-div":domCommandObject.mode,void 0!==domCommandObject.source&&(source=domCommandObject.source),void 0!==domCommandObject.mother&&(mother=domCommandObject.mother),children=[],void 0!==domCommandObject.child&&("object"!=typeof domCommandObject.child||null===domCommandObject.child||Array.isArray(domCommandObject.child)||children.push(domCommandObject.child)),void 0!==domCommandObject.children&&Array.isArray(domCommandObject.children)&&(children=children.concat(domCommandObject.children)),void 0!==domCommandObject.next&&("object"!=typeof domCommandObject.next||null===domCommandObject.next||Array.isArray(domCommandObject.next)||(nextObject=domCommandObject.next)),void 0!==domCommandObject.previous&&("object"!=typeof domCommandObject.previous||null===domCommandObject.previous||Array.isArray(domCommandObject.previous)||(previousObject=domCommandObject.previous)),dom_clone=document.createElement(mode.toUpperCase()),void 0!==domCommandObject.text&&("string"==typeof domCommandObject.text||Array.isArray(domCommandObject.text))&&void 0!==dom_clone.textContent){if(text=Array.isArray(domCommandObject.text)?domCommandObject.text.join("<br>"):domCommandObject.text,/\<b\%/gi.test(domCommandObject.text)){if(void 0===domCommandObject.bold||"object"!=typeof domCommandObject.bold)throw new Error("bold option needs");boldObject="",void 0!==domCommandObject.bold.display&&null!==domCommandObject.bold.display||(domCommandObject.bold.display="inline-block"),void 0!==domCommandObject.bold.position&&null!==domCommandObject.bold.position||(domCommandObject.bold.position="relative");for(let b in domCommandObject.bold)if("fontSizeWeight"===b){const[thisSize,thisWeight]=domCommandObject.bold[b];"number"==typeof thisSize?(boldObject+="font-size:"+String(thisSize)+thisEa,boldObject+=";"):"string"==typeof thisSize&&(boldObject+="font-size:"+thisSize,boldObject+=";"),"number"==typeof thisWeight?(boldObject+="font-weight:"+String(thisWeight),boldObject+=";"):"string"==typeof thisWeight&&(boldObject+="font-weight:"+thisWeight,boldObject+=";")}else"color"===b?(boldObject+="color:"+domCommandObject.bold[b]+";",boldObject+="-webkit-text-fill-color:"+domCommandObject.bold[b]+";"):"fontColor"===b?boldObject+="color:"+domCommandObject.bold[b]+";":"textGradient"===b?(delete domCommandObject.bold.background,delete domCommandObject.bold.color,boldObject+="background:"+domCommandObject.bold[b]+";",boldObject+="background-clip:text;",boldObject+="-webkit-background-clip:text;",boldObject+="color:transparent;",boldObject+="-webkit-text-fill-color:transparent;"):(boldObject+=/([a-z]+)([A-Z][a-z]+)/g.test(b)?b.replace(/([a-z]+)([A-Z][a-z]+)/g,(match,p1,p2)=>p1+"-"+p2.toLowerCase()):b,boldObject+=":","number"==typeof domCommandObject.bold[b]?CreateDom.pureNumberProperty.includes(b)?boldObject+=String(domCommandObject.bold[b]):boldObject+=String(domCommandObject.bold[b])+thisEa:boldObject+=domCommandObject.bold[b],boldObject+=";");text=text.replace(/\<b\%/gi,'<b style="'+boldObject+'">'),text=text.replace(/\%b\>/gi,"</b>")}if(/\<u\%/gi.test(domCommandObject.text)){if(void 0===domCommandObject.under||"object"!=typeof domCommandObject.under)throw new Error("under option needs");underObject="",void 0!==domCommandObject.under.display&&null!==domCommandObject.under.display||(domCommandObject.under.display="inline-block"),void 0!==domCommandObject.under.position&&null!==domCommandObject.under.position||(domCommandObject.under.position="relative");for(let b in domCommandObject.under)if("fontSizeWeight"===b){const[thisSize,thisWeight]=domCommandObject.under[b];"number"==typeof thisSize?(underObject+="font-size:"+String(thisSize)+thisEa,underObject+=";"):"string"==typeof thisSize&&(underObject+="font-size:"+thisSize,underObject+=";"),"number"==typeof thisWeight?(underObject+="font-weight:"+String(thisWeight),underObject+=";"):"string"==typeof thisWeight&&(underObject+="font-weight:"+thisWeight,underObject+=";")}else"color"===b?(underObject+="color:"+domCommandObject.under[b]+";",underObject+="-webkit-text-fill-color:"+domCommandObject.under[b]+";"):"fontColor"===b?underObject+="color:"+domCommandObject.under[b]+";":"textGradient"===b?(delete domCommandObject.under.background,delete domCommandObject.under.color,underObject+="background:"+domCommandObject.under[b]+";",underObject+="background-clip:text;",underObject+="-webkit-background-clip:text;",underObject+="color:transparent;",underObject+="-webkit-text-fill-color:transparent;"):(underObject+=/([a-z]+)([A-Z][a-z]+)/g.test(b)?b.replace(/([a-z]+)([A-Z][a-z]+)/g,(match,p1,p2)=>p1+"-"+p2.toLowerCase()):b,underObject+=":","number"==typeof domCommandObject.under[b]?CreateDom.pureNumberProperty.includes(b)?underObject+=String(domCommandObject.under[b]):underObject+=String(domCommandObject.under[b])+thisEa:underObject+=domCommandObject.under[b],underObject+=";");text=text.replace(/\<u\%/gi,'<b style="'+underObject+'">'),text=text.replace(/\%u\>/gi,"</b>")}if(/\<s\%/gi.test(domCommandObject.text)){if(void 0===domCommandObject.special||"object"!=typeof domCommandObject.special)throw new Error("special option needs");specialObject="",void 0!==domCommandObject.special.display&&null!==domCommandObject.special.display||(domCommandObject.special.display="inline-block"),void 0!==domCommandObject.special.position&&null!==domCommandObject.special.position||(domCommandObject.special.position="relative");for(let b in domCommandObject.special)if("fontSizeWeight"===b){const[thisSize,thisWeight]=domCommandObject.special[b];"number"==typeof thisSize?(specialObject+="font-size:"+String(thisSize)+thisEa,specialObject+=";"):"string"==typeof thisSize&&(specialObject+="font-size:"+thisSize,specialObject+=";"),"number"==typeof thisWeight?(specialObject+="font-weight:"+String(thisWeight),specialObject+=";"):"string"==typeof thisWeight&&(specialObject+="font-weight:"+thisWeight,specialObject+=";")}else"color"===b?(specialObject+="color:"+domCommandObject.special[b]+";",specialObject+="-webkit-text-fill-color:"+domCommandObject.special[b]+";"):"fontColor"===b?specialObject+="color:"+domCommandObject.special[b]+";":"textGradient"===b?(delete domCommandObject.special.background,delete domCommandObject.special.color,specialObject+="background:"+domCommandObject.special[b]+";",specialObject+="background-clip:text;",specialObject+="-webkit-background-clip:text;",specialObject+="color:transparent;",specialObject+="-webkit-text-fill-color:transparent;"):(specialObject+=/([a-z]+)([A-Z][a-z]+)/g.test(b)?b.replace(/([a-z]+)([A-Z][a-z]+)/g,(match,p1,p2)=>p1+"-"+p2.toLowerCase()):b,specialObject+=":","number"==typeof domCommandObject.special[b]?CreateDom.pureNumberProperty.includes(b)?specialObject+=String(domCommandObject.special[b]):specialObject+=String(domCommandObject.special[b])+thisEa:specialObject+=domCommandObject.special[b],specialObject+=";");text=text.replace(/\<s\%/gi,'<b style="'+specialObject+'">'),text=text.replace(/\%s\>/gi,"</b>")}if(/\<c\%/gi.test(domCommandObject.text)){if(void 0===domCommandObject.code||"object"!=typeof domCommandObject.code)throw new Error("code option needs");codeObject="",void 0!==domCommandObject.code.display&&null!==domCommandObject.code.display||(domCommandObject.code.display="inline-block"),void 0!==domCommandObject.code.position&&null!==domCommandObject.code.position||(domCommandObject.code.position="relative");for(let b in domCommandObject.code)if("fontSizeWeight"===b){const[thisSize,thisWeight]=domCommandObject.code[b];"number"==typeof thisSize?(codeObject+="font-size:"+String(thisSize)+thisEa,codeObject+=";"):"string"==typeof thisSize&&(codeObject+="font-size:"+thisSize,codeObject+=";"),"number"==typeof thisWeight?(codeObject+="font-weight:"+String(thisWeight),codeObject+=";"):"string"==typeof thisWeight&&(codeObject+="font-weight:"+thisWeight,codeObject+=";")}else"color"===b?(codeObject+="color:"+domCommandObject.code[b]+";",codeObject+="-webkit-text-fill-color:"+domCommandObject.code[b]+";"):"fontColor"===b?codeObject+="color:"+domCommandObject.code[b]+";":"textGradient"===b?(delete domCommandObject.code.background,delete domCommandObject.code.color,codeObject+="background:"+domCommandObject.code[b]+";",codeObject+="background-clip:text;",codeObject+="-webkit-background-clip:text;",codeObject+="color:transparent;",codeObject+="-webkit-text-fill-color:transparent;"):(codeObject+=/([a-z]+)([A-Z][a-z]+)/g.test(b)?b.replace(/([a-z]+)([A-Z][a-z]+)/g,(match,p1,p2)=>p1+"-"+p2.toLowerCase()):b,codeObject+=":","number"==typeof domCommandObject.code[b]?CreateDom.pureNumberProperty.includes(b)?codeObject+=String(domCommandObject.code[b]):codeObject+=String(domCommandObject.code[b])+thisEa:codeObject+=domCommandObject.code[b],codeObject+=";");text=text.replace(/\<c\%/gi,'<code style="'+codeObject+'">'),text=text.replace(/\%c\>/gi,"</code>"),thisCodeRegExp=/\<code [^\>]*\>(((?!\<\/code\>).)*)\<\/code\>/gi,codeArr=[];do{thisExecResult=thisCodeRegExp.exec(domCommandObject.text),codeArr.push(thisExecResult)}while(null!==thisExecResult);codeArr=codeArr.filter(o=>null!==o).map(o=>o[1]),text=text.replace(/(\<code [^\>]*\>)(((?!\<\/code\>).)*)(\<\/code\>)/gi,(match,p1)=>p1+"</code>")}if(/\<i\%/gi.test(domCommandObject.text)){if(void 0===domCommandObject.italic||"object"!=typeof domCommandObject.italic)throw new Error("italic option needs");italicObject="",void 0!==domCommandObject.italic.display&&null!==domCommandObject.italic.display||(domCommandObject.italic.display="inline-block"),void 0!==domCommandObject.italic.position&&null!==domCommandObject.italic.position||(domCommandObject.italic.position="relative");for(let b in domCommandObject.italic)if("fontSizeWeight"===b){const[thisSize,thisWeight]=domCommandObject.italic[b];"number"==typeof thisSize?(italicObject+="font-size:"+String(thisSize)+thisEa,italicObject+=";"):"string"==typeof thisSize&&(italicObject+="font-size:"+thisSize,italicObject+=";"),"number"==typeof thisWeight?(italicObject+="font-weight:"+String(thisWeight),italicObject+=";"):"string"==typeof thisWeight&&(italicObject+="font-weight:"+thisWeight,italicObject+=";")}else"color"===b?(italicObject+="color:"+domCommandObject.italic[b]+";",italicObject+="-webkit-text-fill-color:"+domCommandObject.italic[b]+";"):"fontColor"===b?italicObject+="color:"+domCommandObject.italic[b]+";":"textGradient"===b?(delete domCommandObject.italic.background,delete domCommandObject.italic.color,italicObject+="background:"+domCommandObject.italic[b]+";",italicObject+="background-clip:text;",italicObject+="-webkit-background-clip:text;",italicObject+="color:transparent;",italicObject+="-webkit-text-fill-color:transparent;"):(italicObject+=/([a-z]+)([A-Z][a-z]+)/g.test(b)?b.replace(/([a-z]+)([A-Z][a-z]+)/g,(match,p1,p2)=>p1+"-"+p2.toLowerCase()):b,italicObject+=":","number"==typeof domCommandObject.italic[b]?CreateDom.pureNumberProperty.includes(b)?italicObject+=String(domCommandObject.italic[b]):italicObject+=String(domCommandObject.italic[b])+thisEa:italicObject+=domCommandObject.italic[b],italicObject+=";");text=text.replace(/\<i\%/gi,'<b style="'+italicObject+'">'),text=text.replace(/\%i\>/gi,"</b>")}if(/\<r\%/gi.test(domCommandObject.text)){if(void 0===domCommandObject.reference||"object"!=typeof domCommandObject.reference)throw new Error("reference option needs");referenceObject="",void 0!==domCommandObject.reference.display&&null!==domCommandObject.reference.display||(domCommandObject.reference.display="inline-block"),void 0!==domCommandObject.reference.position&&null!==domCommandObject.reference.position||(domCommandObject.reference.position="relative");for(let b in domCommandObject.reference)if("fontSizeWeight"===b){const[thisSize,thisWeight]=domCommandObject.reference[b];"number"==typeof thisSize?(referenceObject+="font-size:"+String(thisSize)+thisEa,referenceObject+=";"):"string"==typeof thisSize&&(referenceObject+="font-size:"+thisSize,referenceObject+=";"),"number"==typeof thisWeight?(referenceObject+="font-weight:"+String(thisWeight),referenceObject+=";"):"string"==typeof thisWeight&&(referenceObject+="font-weight:"+thisWeight,referenceObject+=";")}else"color"===b?(referenceObject+="color:"+domCommandObject.reference[b]+";",referenceObject+="-webkit-text-fill-color:"+domCommandObject.reference[b]+";"):"fontColor"===b?referenceObject+="color:"+domCommandObject.reference[b]+";":"textGradient"===b?(delete domCommandObject.reference.background,delete domCommandObject.reference.color,referenceObject+="background:"+domCommandObject.reference[b]+";",referenceObject+="background-clip:text;",referenceObject+="-webkit-background-clip:text;",referenceObject+="color:transparent;",referenceObject+="-webkit-text-fill-color:transparent;"):(referenceObject+=/([a-z]+)([A-Z][a-z]+)/g.test(b)?b.replace(/([a-z]+)([A-Z][a-z]+)/g,(match,p1,p2)=>p1+"-"+p2.toLowerCase()):b,referenceObject+=":","number"==typeof domCommandObject.reference[b]?CreateDom.pureNumberProperty.includes(b)?referenceObject+=String(domCommandObject.reference[b]):referenceObject+=String(domCommandObject.reference[b])+thisEa:referenceObject+=domCommandObject.reference[b],referenceObject+=";");text=text.replace(/\<r\%/gi,'<b style="'+referenceObject+'">'),text=text.replace(/\%r\>/gi,"</b>")}if(/\<a\%/gi.test(domCommandObject.text)){if(void 0===domCommandObject.anchor||"object"!=typeof domCommandObject.anchor)throw new Error("anchor option needs");anchorObject="",void 0!==domCommandObject.anchor.display&&null!==domCommandObject.anchor.display||(domCommandObject.anchor.display="inline-block"),void 0!==domCommandObject.anchor.position&&null!==domCommandObject.anchor.position||(domCommandObject.anchor.position="relative");for(let b in domCommandObject.anchor)if("fontSizeWeight"===b){const[thisSize,thisWeight]=domCommandObject.anchor[b];"number"==typeof thisSize?(anchorObject+="font-size:"+String(thisSize)+thisEa,anchorObject+=";"):"string"==typeof thisSize&&(anchorObject+="font-size:"+thisSize,anchorObject+=";"),"number"==typeof thisWeight?(anchorObject+="font-weight:"+String(thisWeight),anchorObject+=";"):"string"==typeof thisWeight&&(anchorObject+="font-weight:"+thisWeight,anchorObject+=";")}else"color"===b?(anchorObject+="color:"+domCommandObject.anchor[b]+";",anchorObject+="-webkit-text-fill-color:"+domCommandObject.anchor[b]+";"):"fontColor"===b?anchorObject+="color:"+domCommandObject.anchor[b]+";":"textGradient"===b?(delete domCommandObject.anchor.background,delete domCommandObject.anchor.color,anchorObject+="background:"+domCommandObject.anchor[b]+";",anchorObject+="background-clip:text;",anchorObject+="-webkit-background-clip:text;",anchorObject+="color:transparent;",anchorObject+="-webkit-text-fill-color:transparent;"):(anchorObject+=/([a-z]+)([A-Z][a-z]+)/g.test(b)?b.replace(/([a-z]+)([A-Z][a-z]+)/g,(match,p1,p2)=>p1+"-"+p2.toLowerCase()):b,anchorObject+=":","number"==typeof domCommandObject.anchor[b]?CreateDom.pureNumberProperty.includes(b)?anchorObject+=String(domCommandObject.anchor[b]):anchorObject+=String(domCommandObject.anchor[b])+thisEa:anchorObject+=domCommandObject.anchor[b],anchorObject+=";");text=text.replace(/\<a\%/gi,'<b style="'+anchorObject+'">'),text=text.replace(/\%a\>/gi,"</b>")}if("textarea"!==mode){if(dom_clone.insertAdjacentHTML("beforeend",text.replace(/\n/g,"<br>")),Array.isArray(codeArr)&&codeArr.length>0){codeDomArr=[...dom_clone.querySelectorAll("code")];for(let i=0;i<codeDomArr.length;i++)codeDomArr[i].textContent="",codeDomArr[i].textContent=codeArr[i]}}else dom_clone.textContent=text.replace(/\<br\>/g,"\n")}if("string"==typeof domCommandObject.source&&dom_clone.setAttribute("src",domCommandObject.source),void 0!==domCommandObject.class&&Array.isArray(domCommandObject.class))for(let c of domCommandObject.class)dom_clone.classList.add(c);if(void 0!==domCommandObject.id&&"string"==typeof domCommandObject.id&&void 0!==dom_clone.id&&(dom_clone.id=domCommandObject.id),void 0!==domCommandObject.attribute&&"object"==typeof domCommandObject.attribute&&null!==domCommandObject.attribute)for(let key in domCommandObject.attribute)dom_clone.setAttribute(key,String(domCommandObject.attribute[key]));if(void 0!==domCommandObject.style){if("object"!=typeof domCommandObject.style)throw new Error("invaild arguments");targetStyle=domCommandObject.style}if(void 0!==targetStyle.display&&null!==targetStyle.display||(targetStyle.display="flex"),void 0!==targetStyle.position&&null!==targetStyle.position||(targetStyle.position="relative"),"string"!=typeof targetStyle.transformOrigin&&(targetStyle.transformOrigin="50% 50%"),"string"==typeof targetStyle.display&&/flex/gi.test(targetStyle.display)&&(void 0!==targetStyle.flexDirection&&null!==targetStyle.flexDirection||(targetStyle.flexDirection="column")),void 0===targetStyle.wordSpacing&&(targetStyle.wordSpacing=String(-1)+"px"),void 0!==targetStyle.color&&(void 0!==targetStyle["-webkit-text-fill-color"]&&""===targetStyle["-webkit-text-fill-color"]||(targetStyle["-webkit-text-fill-color"]=targetStyle.color)),targetStyleMaker=targetStyle=>{void 0!==targetStyle.textGradient&&(delete targetStyle.background,delete targetStyle.color,targetStyle.background=targetStyle.textGradient,targetStyle["background-clip"]="text",targetStyle["-webkit-background-clip"]="text",targetStyle.color="transparent",targetStyle["-webkit-text-fill-color"]="transparent",delete targetStyle.textGradient),void 0!==targetStyle.fontColor&&(targetStyle.color=targetStyle.fontColor,targetStyle["-webkit-text-fill-color"]="",delete targetStyle["-webkit-text-fill-color"],delete targetStyle.fontColor);for(let i in targetStyle)if("number"==typeof targetStyle[i])CreateDom.pureNumberProperty.includes(i)?targetStyle[i]=String(targetStyle[i]):targetStyle[i]=String(targetStyle[i])+thisEa;else if("widthHeight"===i){const[thisWidth,thisHeight]=targetStyle[i];"number"==typeof thisWidth?targetStyle.width=String(thisWidth)+thisEa:"string"==typeof thisWidth&&(targetStyle.width=thisWidth),"number"==typeof thisHeight?targetStyle.height=String(thisHeight)+thisEa:"string"==typeof thisHeight&&(targetStyle.height=thisHeight)}else if("fontSizeWeight"===i){const[thisSize,thisWeight]=targetStyle[i];"number"==typeof thisSize?targetStyle.fontSize=String(thisSize)+thisEa:"string"==typeof thisSize&&(targetStyle.fontSize=thisSize),"number"==typeof thisWeight?targetStyle.fontWeight=String(thisWeight):"string"==typeof thisWeight&&(targetStyle.fontWeight=thisWeight)}else targetStyle[i]=targetStyle[i];return targetStyle},targetStyle=targetStyleMaker(targetStyle),void 0===domCommandObject.hover)for(let i in targetStyle)thisStyleKey=i,dom_clone.style[thisStyleKey]=targetStyle[thisStyleKey];if(void 0!==domCommandObject.hover&&(styleElement=document.querySelector("style"),null===styleElement&&(styleElement=document.createElement("style"),document.head.appendChild(styleElement)),thisTempStyleClassName=CreateDom.createTempClassName(),dom_clone.classList.add(thisTempStyleClassName),styleElement.insertAdjacentHTML("beforeend",`.${thisTempStyleClassName} { ${CreateDom.convertStyleObjectToCssString(targetStyle)} }`),styleElement.insertAdjacentHTML("beforeend",`.${thisTempStyleClassName}:hover { ${CreateDom.convertStyleObjectToCssString(targetStyleMaker(domCommandObject.hover))} }`)),void 0!==domCommandObject.event&&"object"==typeof domCommandObject.event&&null!==domCommandObject.event)for(let type in domCommandObject.event)if("function"==typeof domCommandObject.event[type]){if("touch"===type)/iPhone/gi.test(window.navigator.userAgent)?dom_clone.addEventListener("touchstart",domCommandObject.event[type]):dom_clone.addEventListener("click",domCommandObject.event[type]);else if("hover"===type)dom_clone.setAttribute("origin_style",JSON.stringify(targetStyle)),dom_clone.addEventListener("mouseenter",domCommandObject.event[type]),dom_clone.addEventListener("mouseleave",e=>{const self=e.currentTarget,originStyle=JSON.parse(self.getAttribute("origin_style"));for(let i in originStyle)if(thisOriginStyleKey=i,"number"==typeof originStyle[i])CreateDom.pureNumberProperty.includes(i)?self.style[i]=String(originStyle[i]):self.style[thisOriginStyleKey]=String(originStyle[i])+thisEa;else if("widthHeight"===i){const[thisWidth,thisHeight]=originStyle[i];"number"==typeof thisWidth?self.style.width=String(thisWidth)+thisEa:"string"==typeof thisWidth&&(self.style.width=thisWidth),"number"==typeof thisHeight?self.style.height=String(thisHeight)+thisEa:"string"==typeof thisHeight&&(self.style.height=thisHeight)}else if("fontSizeWeight"===i){const[thisSize,thisWeight]=originStyle[i];"number"==typeof thisSize?self.style.fontSize=String(thisSize)+thisEa:"string"==typeof thisSize&&(self.style.fontSize=thisSize),"number"==typeof thisWeight?self.style.fontWeight=String(thisWeight):"string"==typeof thisWeight&&(self.style.fontWeight=thisWeight)}else self.style[thisOriginStyleKey]=originStyle[i]});else if(/\$/gi.test(type)){const allTypes=type.split("$");for(let t of allTypes)dom_clone.addEventListener(t,domCommandObject.event[type])}else dom_clone.addEventListener(type,domCommandObject.event[type]);"click"===type&&"string"!=typeof targetStyle.cursor&&(dom_clone.style.cursor="pointer")}if(null!==mother&&"function"==typeof mother.appendChild)if(!0===domCommandObject.unshift||"number"==typeof domCommandObject.position&&domCommandObject.position>=0)try{const motherChildren=[...mother.children];motherChildren.length>0?"number"==typeof domCommandObject.position&&domCommandObject.position>=0&&domCommandObject.position<motherChildren.length&&void 0!==motherChildren[domCommandObject.position]?mother.insertBefore(dom_clone,motherChildren[domCommandObject.position]):!0===domCommandObject.unshift?mother.insertBefore(dom_clone,motherChildren[0]):mother.appendChild(dom_clone):mother.appendChild(dom_clone)}catch{mother.appendChild(dom_clone)}else mother.appendChild(dom_clone);if(Array.isArray(children)&&children.length>0)for(let childObject of children)!0===childObject.pass||(childObject.mother=dom_clone,CreateDom.createNode(childObject));return"object"!=typeof nextObject||null===nextObject||Array.isArray(nextObject)||null!==mother&&(!0===nextObject.pass||(nextObject.mother=mother,CreateDom.createNode(nextObject))),"object"!=typeof previousObject||null===previousObject||Array.isArray(previousObject)||null!==mother&&(!0===previousObject.pass||(previousObject.mother=mother,previousDom=CreateDom.createNode(previousObject),previousDom instanceof SvgDom?mother.insertBefore(previousDom.source,dom_clone):mother.insertBefore(previousDom,dom_clone))),"video"===mode&&(dom_clone.autoplay=!1,dom_clone.loop=!1,dom_clone.muted=!0,dom_clone.playsInline=!0,dom_clone.controls=!1,void 0!==domCommandObject.attribute&&"object"==typeof domCommandObject.attribute&&null!==domCommandObject.attribute&&("string"==typeof domCommandObject.attribute.autoplay&&"false"!==domCommandObject.attribute.autoplay&&(dom_clone.autoplay=!0),"string"==typeof domCommandObject.attribute.loop&&"false"!==domCommandObject.attribute.loop&&(dom_clone.loop=!0),("string"==typeof domCommandObject.attribute.controls&&"false"!==domCommandObject.attribute.controls||"string"==typeof domCommandObject.attribute.control&&"false"!==domCommandObject.attribute.control)&&(dom_clone.controls=!0),"string"==typeof domCommandObject.attribute.muted&&"false"===domCommandObject.attribute.muted&&(dom_clone.muted=!1))),dom_clone};static createSvg=domCommandObject=>{if("object"!=typeof domCommandObject||null===domCommandObject)throw new Error("invalid input");let dom_clone,targetStyle,children,nextObject,previousObject,previousDom,thisEa,codeArr,sourceBoo,mother,source,text,ea,ratio,temp,thisOriginStyleKey;if(thisEa=CreateDom.mediaEa(),children=[],targetStyle={},nextObject=null,previousObject=null,codeArr=[],sourceBoo=!1,text="",mother=null,void 0===domCommandObject.source)throw new Error("must be in source");if(source=domCommandObject.source,void 0!==domCommandObject.mother&&(mother=domCommandObject.mother),children=[],void 0!==domCommandObject.child&&("object"!=typeof domCommandObject.child||null===domCommandObject.child||Array.isArray(domCommandObject.child)||children.push(domCommandObject.child)),void 0!==domCommandObject.children&&Array.isArray(domCommandObject.children)&&(children=children.concat(domCommandObject.children)),void 0!==domCommandObject.next&&("object"!=typeof domCommandObject.next||null===domCommandObject.next||Array.isArray(domCommandObject.next)||(nextObject=domCommandObject.next)),void 0!==domCommandObject.previous&&("object"!=typeof domCommandObject.previous||null===domCommandObject.previous||Array.isArray(domCommandObject.previous)||(previousObject=domCommandObject.previous)),dom_clone=SvgTong.stringParsing(source),void 0!==domCommandObject.class&&Array.isArray(domCommandObject.class))for(let c of domCommandObject.class)dom_clone.classList.add(c);if(void 0!==domCommandObject.id&&"string"==typeof domCommandObject.id&&dom_clone.setId(domCommandObject.id),void 0!==domCommandObject.attribute&&"object"==typeof domCommandObject.attribute&&null!==domCommandObject.attribute)for(let key in domCommandObject.attribute)dom_clone.setAttribute(key,String(domCommandObject.attribute[key]));if(void 0!==domCommandObject.style){if("object"!=typeof domCommandObject.style)throw new Error("invaild arguments");targetStyle=domCommandObject.style}void 0!==targetStyle.display&&null!==targetStyle.display||(targetStyle.display="flex"),void 0!==targetStyle.position&&null!==targetStyle.position||(targetStyle.position="relative"),"auto"!==targetStyle.width&&void 0!==targetStyle.width||void 0===targetStyle.height||(ratio=dom_clone.getRatio(),"number"!=typeof targetStyle.height?(ea=targetStyle.height.replace(/[\-\.0-9]/gi,""),temp=Number(targetStyle.height.replace(/[^\-\.0-9]/gi,""))):(ea=thisEa,temp=targetStyle.height),targetStyle.width=String(temp*ratio)+ea),"auto"!==targetStyle.height&&void 0!==targetStyle.height||void 0===targetStyle.width||(ratio=dom_clone.getRatio(),"number"!=typeof targetStyle.width?(ea=targetStyle.width.replace(/[\-\.0-9]/gi,""),temp=Number(targetStyle.width.replace(/[^\-\.0-9]/gi,""))):(ea=thisEa,temp=targetStyle.width),targetStyle.height=String(temp/ratio)+ea);for(let i in targetStyle)if("number"==typeof targetStyle[i])CreateDom.pureNumberProperty.includes(i)?dom_clone.setStyle(i,String(targetStyle[i])):dom_clone.setStyle(i,String(targetStyle[i])+thisEa);else if("widthHeight"===i){const[thisWidth,thisHeight]=targetStyle[i];"number"==typeof thisWidth?dom_clone.setStyle("width",String(thisWidth)+thisEa):"string"==typeof thisWidth&&dom_clone.setStyle("width",String(thisWidth)),"number"==typeof thisHeight?dom_clone.setStyle("height",String(thisHeight)+thisEa):"string"==typeof thisHeight&&dom_clone.setStyle("height",String(thisHeight))}else if("fontSizeWeight"===i){const[thisSize,thisWeight]=targetStyle[i];"number"==typeof thisSize?dom_clone.setStyle("fontSize",String(thisSize)+thisEa):"string"==typeof thisSize&&dom_clone.setStyle("fontSize",String(thisSize)),("number"==typeof thisWeight||"string"==typeof thisWeight)&&dom_clone.setStyle("fontWeight",String(thisWeight))}else dom_clone.setStyle(i,String(targetStyle[i]));if(void 0!==domCommandObject.event&&"object"==typeof domCommandObject.event&&null!==domCommandObject.event)for(let type in domCommandObject.event)if("function"==typeof domCommandObject.event[type]){if("touch"===type)/iPhone/gi.test(window.navigator.userAgent)?dom_clone.addEventListener("touchstart",domCommandObject.event[type]):dom_clone.addEventListener("click",domCommandObject.event[type]);else if("hover"===type)dom_clone.setAttribute("origin_style",JSON.stringify(targetStyle)),dom_clone.addEventListener("mouseenter",domCommandObject.event[type]),dom_clone.addEventListener("mouseleave",e=>{const self=e.currentTarget,originStyle=JSON.parse(self.getAttribute("origin_style"));for(let i in originStyle)if(thisOriginStyleKey=i,"number"==typeof originStyle[i])CreateDom.pureNumberProperty.includes(i)?self.style[i]=String(originStyle[i]):self.style[thisOriginStyleKey]=String(originStyle[i])+thisEa;else if("widthHeight"===i){const[thisWidth,thisHeight]=originStyle[i];"number"==typeof thisWidth?self.style.width=String(thisWidth)+thisEa:"string"==typeof thisWidth&&(self.style.width=thisWidth),"number"==typeof thisHeight?self.style.height=String(thisHeight)+thisEa:"string"==typeof thisHeight&&(self.style.height=thisHeight)}else if("fontSizeWeight"===i){const[thisSize,thisWeight]=originStyle[i];"number"==typeof thisSize?self.style.fontSize=String(thisSize)+thisEa:"string"==typeof thisSize&&(self.style.fontSize=thisSize),"number"==typeof thisWeight?self.style.fontWeight=String(thisWeight):"string"==typeof thisWeight&&(self.style.fontWeight=thisWeight)}else self.style[thisOriginStyleKey]=originStyle[i]});else if(/\$/gi.test(type)){const allTypes=type.split("$");for(let t of allTypes)dom_clone.addEventListener(t,domCommandObject.event[type])}else dom_clone.addEventListener(type,domCommandObject.event[type]);"click"===type&&dom_clone.setStyle("cursor","pointer")}if(null!==mother&&"function"==typeof mother.appendChild)if(!0===domCommandObject.unshift||"number"==typeof domCommandObject.position&&domCommandObject.position>=0)try{const motherChildren=[...mother.children];motherChildren.length>0?"number"==typeof domCommandObject.position&&domCommandObject.position>=0&&domCommandObject.position<motherChildren.length&&void 0!==motherChildren[domCommandObject.position]?mother.insertBefore(dom_clone.source,motherChildren[domCommandObject.position]):!0===domCommandObject.unshift?mother.insertBefore(dom_clone.source,motherChildren[0]):mother.appendChild(dom_clone.source):mother.appendChild(dom_clone.source)}catch{mother.appendChild(dom_clone.source)}else mother.appendChild(dom_clone.source);return"object"!=typeof nextObject||null===nextObject||Array.isArray(nextObject)||null!==mother&&(nextObject.mother=mother,CreateDom.createNode(nextObject)),"object"!=typeof previousObject||null===previousObject||Array.isArray(previousObject)||null!==mother&&(previousObject.mother=mother,previousDom=CreateDom.createNode(previousObject),mother.insertBefore(previousDom,dom_clone.source)),dom_clone};static createImageGroup=imageGroupCommandObject=>{const startDelay=imageGroupCommandObject.startDelay;let baseDom,imageTargets,index,baseChildren,thisSourceIsVideo,thisSourceIsDiv;imageTargets=imageGroupCommandObject.group,thisSourceIsVideo=!1,thisSourceIsDiv=!1,imageGroupCommandObject.children=[],index=0;for(let imageSource of imageTargets)thisSourceIsVideo=!1,thisSourceIsDiv=!1,"string"==typeof imageSource.source.split(".").at(-1)&&CreateDom.videoExe.has(String(imageSource.source.split(".").at(-1)).toLowerCase())&&(thisSourceIsVideo=!0),""===imageSource.source&&(thisSourceIsDiv=!0),"object"==typeof imageSource.style&&null!==imageSource.style&&void 0!==imageSource.style&&0!==Object.keys(imageSource.style).length?(imageSource.style.position="absolute",void 0===imageSource.style.top&&void 0===imageSource.style.bottom&&(imageSource.style.top=0),void 0===imageSource.style.left&&void 0===imageSource.style.right&&(imageSource.style.left=0),void 0===imageSource.style.width&&(imageSource.style.width=String(100)+"%"),imageGroupCommandObject.children.push({mode:thisSourceIsDiv?"div":thisSourceIsVideo?"video":"img",source:imageSource.source,style:{position:"absolute",opacity:"number"==typeof imageSource.origin?.opacity?Number(imageSource.origin?.opacity):"",transform:void 0===imageSource.origin?"":CreateDom.transformCss(imageSource.origin),...imageSource.style,"will-change":"transform, opacity"}})):0===index?imageGroupCommandObject.children.push({mode:thisSourceIsDiv?"div":thisSourceIsVideo?"video":"img",source:imageSource.source,style:{position:"relative",opacity:"number"==typeof imageSource.origin?.opacity?Number(imageSource.origin?.opacity):"",width:String(100)+"%",transform:void 0===imageSource.origin?"":CreateDom.transformCss(imageSource.origin),"will-change":"transform, opacity"}}):imageGroupCommandObject.children.push({mode:thisSourceIsDiv?"div":thisSourceIsVideo?"video":"img",source:imageSource.source,style:{position:"absolute",opacity:"number"==typeof imageSource.origin?.opacity?Number(imageSource.origin?.opacity):"",transform:void 0===imageSource.origin?"":CreateDom.transformCss(imageSource.origin),top:0,left:0,width:String(100)+"%","will-change":"transform, opacity"}}),index++;return baseDom=CreateDom.createDom(imageGroupCommandObject),baseChildren=[...baseDom.children].map(d=>d),setTimeout(()=>{const completeTong=[];new Promise((resolve,reject)=>{for(let i=0;i<imageTargets.length;i++)void 0!==imageTargets[i].callback&&imageTargets[i].callback(baseChildren[i],startDelay).then(()=>{completeTong.push("complete"),completeTong.length===imageTargets.length&&resolve(!0)}).catch(e=>reject(e))}).then(b=>{if("function"==typeof imageGroupCommandObject.completeCallback)return imageGroupCommandObject.completeCallback(baseDom)}).catch(e=>console.log(e))},0),new ImageGroup(baseDom,imageGroupCommandObject.startDelay)};static animateRaw=(target,option)=>new Promise((resolve,reject)=>{try{const{mediaEa,equal}=CreateDom,defaultEase="power1.inOut",ea=mediaEa();let startDelay,repeat,repeatDelay,callbacks,yoyo,tempOption,tempOptionOverlap,transformBoo,inFunctionThis;startDelay=0,repeat=0,repeatDelay=0,callbacks={},yoyo=!1,transformBoo=!1,inFunctionThis=!1,"object"==typeof option.time&&null!==option.time&&("number"==typeof option.time.startDelay&&(startDelay=option.time.startDelay),"number"==typeof option.time.repeat&&(repeat=option.time.repeat),"number"==typeof option.time.repeatDelay&&(repeatDelay=option.time.repeatDelay),option.time.infinite&&(repeat=-1),"boolean"==typeof option.time.yoyo&&(yoyo=option.time.yoyo)),"object"==typeof option.callback&&null!==option.callback&&(callbacks=option.callback),yoyo&&-1!==repeat&&(repeat+=1),setTimeout(()=>{let originalTransition,timeline;originalTransition=target.style.transition,target.style.transition="all 0s",timeline=gsapWithCSS.timeline({repeat,repeatDelay:0===repeat?0:Math.floor(repeatDelay/1e3),yoyo,onStart:()=>{"function"==typeof callbacks.onStart&&callbacks.onStart()},onUpdate:()=>{"function"==typeof callbacks.onUpdate&&callbacks.onUpdate()},onRepeat:()=>{"function"==typeof callbacks.onRepeat&&callbacks.onRepeat()},onComplete:()=>{const sleepPromise=new Promise(resolve=>{setTimeout(()=>resolve(!0),100)});"function"==typeof callbacks.onComplete&&callbacks.onComplete(),target.style.transition=originalTransition,sleepPromise.then(()=>{resolve(!0)}).catch(e=>reject(e))},onInterrupt:()=>{"function"==typeof callbacks.onInterrupt&&callbacks.onInterrupt(),resolve(!1)}});for(let key of option.keyframe){if("number"==typeof key.wait&&timeline.to(target,{duration:key.wait/1e3,ease:defaultEase}),inFunctionThis=!1,tempOption={},tempOption.duration=key.duration/1e3,tempOption.ease=defaultEase,"object"==typeof key.animation&&null!==key.animation&&("string"==typeof key.animation?.ease&&(tempOption.ease=key.animation.ease),"number"==typeof key.animation.repeat&&(tempOption.repeat=key.animation.repeat),"number"==typeof key.animation.repeatDelay&&(tempOption.repeatDelay=key.animation.repeatDelay),"boolean"==typeof key.animation.yoyo&&(tempOption.yoyo=key.animation.yoyo),"number"==typeof key.animation.stagger&&(tempOption.stagger=key.animation.stagger),"boolean"==typeof key.animation.reversed&&(tempOption.reversed=key.animation.reversed)),transformBoo=!1,"object"==typeof key.transform&&null!==key.transform&&(tempOption.force3D=!0,"string"==typeof key.transform.transformOrigin&&(tempOption.transformOrigin=key.transform.transformOrigin),"number"==typeof key.transform.x&&(tempOption.x=String(key.transform.x)+ea,transformBoo=!0),"string"==typeof key.transform.x&&(tempOption.x=key.transform.x,transformBoo=!0),"number"==typeof key.transform.y&&(tempOption.y=String(key.transform.y)+ea,transformBoo=!0),"string"==typeof key.transform.y&&(tempOption.y=key.transform.y,transformBoo=!0),"number"==typeof key.transform.scale&&(tempOption.scale=key.transform.scale,transformBoo=!0),"number"==typeof key.transform.scaleX&&(tempOption.scaleX=key.transform.scaleX,transformBoo=!0),"number"==typeof key.transform.scaleY&&(tempOption.scaleY=key.transform.scaleY,transformBoo=!0),"number"==typeof key.transform.rotation&&(tempOption.rotation=key.transform.rotation,transformBoo=!0),"number"==typeof key.transform.skew&&(tempOption.skew=key.transform.skew,transformBoo=!0),"number"==typeof key.transform.skewX&&(tempOption.skewX=key.transform.skewX,transformBoo=!0),"number"==typeof key.transform.skewY&&(tempOption.skewY=key.transform.skewY,transformBoo=!0)),"object"==typeof key.style&&null!==key.style)for(let s in key.style)"number"==typeof key.style[s]?CreateDom.pureNumberProperty.includes(s)?tempOption[s]=String(key.style[s]):tempOption[s]=String(key.style[s])+ea:tempOption[s]=key.style[s];if("object"==typeof key.callback&&null!==key.callback)for(let c in key.callback)tempOption[c]=key.callback[c],inFunctionThis=!0;"object"==typeof key.transform&&null!==key.transform&&"number"==typeof key.transform.opacity&&(tempOption.opacity=key.transform.opacity,tempOption.force3D=!0,transformBoo||(tempOption.x=0)),"object"==typeof key.overlap&&null!==key.overlap?(tempOptionOverlap={},tempOptionOverlap.duration=key.duration/1e3,tempOptionOverlap.ease=defaultEase,"object"==typeof key.animation&&null!==key.animation&&("string"==typeof key.animation?.ease&&(tempOptionOverlap.ease=key.animation.ease),"number"==typeof key.animation.repeat&&(tempOptionOverlap.repeat=key.animation.repeat),"number"==typeof key.animation.repeatDelay&&(tempOptionOverlap.repeatDelay=key.animation.repeatDelay),"boolean"==typeof key.animation.yoyo&&(tempOptionOverlap.yoyo=key.animation.yoyo),"number"==typeof key.animation.stagger&&(tempOptionOverlap.stagger=key.animation.stagger),"boolean"==typeof key.animation.reversed&&(tempOptionOverlap.reversed=key.animation.reversed)),tempOptionOverlap.force3D=!0,"string"==typeof key.overlap.transformOrigin&&(tempOptionOverlap.transformOrigin=key.overlap.transformOrigin),"number"==typeof key.overlap.x&&(tempOptionOverlap.x=String(key.overlap.x)+ea),"string"==typeof key.overlap.x&&(tempOptionOverlap.x=key.overlap.x),"number"==typeof key.overlap.y&&(tempOptionOverlap.y=String(key.overlap.y)+ea),"string"==typeof key.overlap.y&&(tempOptionOverlap.y=key.overlap.y),"number"==typeof key.overlap.scale&&(tempOptionOverlap.scale=key.overlap.scale),"number"==typeof key.overlap.scaleX&&(tempOptionOverlap.scaleX=key.overlap.scaleX),"number"==typeof key.overlap.scaleY&&(tempOptionOverlap.scaleY=key.overlap.scaleY),"number"==typeof key.overlap.rotation&&(tempOptionOverlap.rotation=key.overlap.rotation),"number"==typeof key.overlap.skew&&(tempOptionOverlap.skew=key.overlap.skew),"number"==typeof key.overlap.skewX&&(tempOptionOverlap.skewX=key.overlap.skewX),"number"==typeof key.overlap.skewY&&(tempOptionOverlap.skewY=key.overlap.skewY),"number"==typeof key.overlap.opacity&&(tempOptionOverlap.opacity=key.overlap.opacity),tempOptionOverlap.duration=.5*tempOption.duration,tempOption.duration=.5*tempOption.duration,tempOptionOverlap.overwrite="auto",tempOption.overwrite="auto",timeline.to(target,equal(JSON.stringify(tempOptionOverlap))).to(target,equal(JSON.stringify(tempOption)),"<50%")):inFunctionThis?timeline.to(target,tempOption):timeline.to(target,equal(JSON.stringify(tempOption)))}},startDelay)}catch(e){console.log(e),reject(e)}});static animateSingle=async(target,option)=>{if(Array.isArray(option)){const thisOption={keyframe:option};return await CreateDom.animateRaw(target,thisOption)}return await CreateDom.animateRaw(target,option)};static animate=(args,option=null)=>new Promise((resolve,reject)=>{try{if(Array.isArray(args))Promise.all(args.map(obj=>CreateDom.animateSingle(obj.target,obj.option))).then(results=>resolve(results.every(b=>b))).catch(e=>{throw new Error(e.message)});else if(args instanceof HTMLElement){if(null===option)throw new Error("invalid arguments");CreateDom.animateSingle(args,option).then(boo=>resolve(boo)).catch(e=>{throw new Error(e.message)})}else{if(void 0===args.option||void 0===args.target)throw new Error("invalid arguments");CreateDom.animateSingle(args.target,args.option).then(boo=>resolve(boo)).catch(e=>{throw new Error(e.message)})}}catch(e){reject(e)}});static createVideo=mode=>CreateDom.createDom({...mode,mode:"video",attribute:{..."object"==typeof mode.attribute&&null!==mode.attribute?mode.attribute:{},muted:"true",playsInline:"true"}})}class AbstractDiv extends HTMLElement{constructor(){super()}createChild=domCommandObject=>(domCommandObject.mother=this,domCommandObject.mode="abstract-div",CreateDom.createDom(domCommandObject));createImgChild=domCommandObject=>(domCommandObject.mother=this,domCommandObject.mode="img",CreateDom.createDom(domCommandObject));createSvgChild=domCommandObject=>(domCommandObject.mother=this,domCommandObject.mode="svg",CreateDom.createSvg(domCommandObject));applyCallback=async callback=>{const instance=this;try{return await callback(instance)}catch(e){throw new Error(e.message)}};delayRemove=(callback=async()=>{},delta=200)=>{const instance=this;return new Promise(resolve=>{0!==delta?(instance.style.opacity=String(1),setTimeout(()=>{instance.style.animation="justfadeoutoriginal "+String(delta/1e3)+"s ease forwards",setTimeout(async()=>{await callback(),instance.remove(),resolve(!0)},delta+1),setTimeout(async()=>{instance.remove()},delta+1)},delta)):setTimeout(async()=>{await callback(),instance.remove(),resolve(!0)},0)})};toOrigin=command=>(command.target=this,void 0===command.scroll&&void 0===command.launching&&(command.launching=!0),setTimeout(()=>{CreateDom.toOrigin(command)},0),this);getKey=()=>{if(null===this.getAttribute("key"))throw new Error("must have key attribute");return String(this.getAttribute("key"))};mustAttribute=attribute=>{if(null===this.getAttribute(attribute))throw new Error("must have this attribute");return String(this.getAttribute(attribute))};childrenContinuousToOrigin=command=>{void 0===command.scroll&&void 0===command.launching&&(command.launching=!0);const targetChildren=[...this.children].map(d=>d);if(0===targetChildren.length)throw new Error("invalid method, must be children");for(let c of targetChildren)c.style.opacity=String(0),c.style.transform=this.style.transform;return this.style.transition="all 0s ease",this.style.transform="",this.style.opacity=String(1),setTimeout(()=>{let startDelay,index;index=0;for(let c of targetChildren)startDelay=0+200*index,CreateDom.toOrigin({...command,startDelay,target:c}),index++},0),this};animation=async option=>await CreateDom.animate(this,option)}globalThis.customElements.define("abstract-div",AbstractDiv);Event;const ADDRESS={MONGOHOST:"https://message.abstract-rabbit.xyz",XYZHOST:"https://abstract-cloud.xyz",DATAHOST:"https://abstractcloud-press.com",ABSTRACTHOST:"https://abstractcloud-press.com",ROCKETHOST:"https://message.abstract-rabbit.xyz",MESSAGEHOST:"https://message.abstract-rabbit.xyz",STUDYHOST:"https://abstractcloud-press.com",STUDYTERMINAL:"https://abstractcloud-press.com:57574",STUDYLOG:"https://abstractcloud-press.com:57573",STUDYCODE:"https://abstractcloud-press.com:38081",EMAILHOST:"https://message.abstract-rabbit.xyz",SOCKETHOST:"https://wss.abstract-cloud.xyz",DEVHOST:"https://dev.abstract-rabbit.xyz",STATICHOST:"https://static.abstract-cloud.xyz",STATICTERMINAL:"https://static.abstract-cloud.xyz:57574",MATTERHOST:"https://abstract-cloud.xyz",CODEHOST:"https://code.abstract-cloud.xyz",CODECODE:"https://code.abstract-cloud.xyz:23000"},Coloris=((window,document)=>{const getEl=id=>{if(null===document.getElementById(id))throw new Error("invalid id");return document.getElementById(id)},addListener=(context,type,selector,fn)=>{const matches=Element.prototype.matches;"string"==typeof selector&&"function"==typeof fn?context.addEventListener(type,event=>{matches.call(event.target,selector)&&fn.call(event.target,event)}):(fn=selector,context.addEventListener(type,fn))},ctx=document.createElement("canvas").getContext("2d"),currentColor={r:0,g:0,b:0,h:0,s:0,v:0,a:1};let container,picker,colorArea,colorMarker,colorPreview,colorValue,clearButton,closeButton,hueSlider,hueMarker,alphaSlider,alphaMarker,currentEl,currentFormat,oldColor,preValueRoot,colorAreaDims={};preValueRoot="#000001";const settings={el:"[data-coloris]",parent:"body",theme:"default",themeMode:"light",rtl:!1,wrap:!0,margin:2,format:"hex",formatToggle:!1,swatches:[],swatchesOnly:!1,alpha:!0,forceAlpha:!1,focusInput:!0,selectInput:!1,inline:!1,defaultColor:"#000001",clearButton:!1,clearLabel:"Clear",closeButton:!1,closeLabel:"Close",onChange:()=>{},a11y:{open:"Open color picker",close:"Close color picker",clear:"Clear the selected color",marker:"Saturation: {s}. Brightness: {v}.",hueSlider:"Hue slider",alphaSlider:"Opacity slider",input:"Color value field",format:"Color format",swatch:"Color swatch",instruction:"Saturation and brightness selector. Use up, down, left and right arrow keys to select."}},instances={};let currentInstanceId="",defaultInstance={},hasInstance=!1;const configure=options=>{if("object"!=typeof options||null===options)throw new Error("invalid input");for(const key in options)switch(key){case"el":bindFields(options.el),!1!==options.wrap&&wrapFields(options.el);break;case"parent":container=options.parent instanceof HTMLElement?options.parent:document.querySelector(options.parent),container&&(container.appendChild(picker),settings.parent=options.parent,container===document.body&&(container=void 0));break;case"themeMode":settings.themeMode=options.themeMode,"auto"===options.themeMode&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(settings.themeMode="dark");case"theme":options.theme&&(settings.theme=options.theme),picker.className=`clr-picker clr-${settings.theme} clr-${settings.themeMode}`,settings.inline&&updatePickerPosition();break;case"rtl":settings.rtl=!!options.rtl,Array.from(document.getElementsByClassName("clr-field")).forEach(field=>field.classList.toggle("clr-rtl",settings.rtl));break;case"margin":options.margin*=1,settings.margin=isNaN(options.margin)?settings.margin:options.margin;break;case"wrap":options.el&&options.wrap&&wrapFields(options.el);break;case"formatToggle":settings.formatToggle=!!options.formatToggle,getEl("clr-format").style.display=settings.formatToggle?"block":"none",settings.formatToggle&&(settings.format="auto");break;case"swatches":if(Array.isArray(options.swatches)){const swatchesContainer=getEl("clr-swatches"),swatches=document.createElement("div");swatches.style.background="transparent",swatchesContainer.textContent="",options.swatches.forEach((swatch,i)=>{const button=document.createElement("button");button.setAttribute("type","button"),button.setAttribute("id",`clr-swatch-${i}`),button.setAttribute("aria-labelledby",`clr-swatch-label clr-swatch-${i}`),button.style.color=swatch,button.textContent=swatch,swatches.appendChild(button)}),options.swatches.length&&swatchesContainer.appendChild(swatches),settings.swatches=options.swatches.slice()}break;case"swatchesOnly":settings.swatchesOnly=!!options.swatchesOnly,picker.setAttribute("data-minimal",settings.swatchesOnly);break;case"alpha":settings.alpha=!!options.alpha,picker.setAttribute("data-alpha",settings.alpha);break;case"inline":if(settings.inline=!!options.inline,picker.setAttribute("data-inline",settings.inline),settings.inline){const defaultColor=options.defaultColor||"#000001";currentFormat=getColorFormatFromStr(defaultColor),updatePickerPosition(),setColorFromStr(defaultColor)}break;case"clearButton":"object"==typeof options.clearButton&&(options.clearButton.label&&(settings.clearLabel=options.clearButton.label,clearButton.innerHTML=settings.clearLabel),options.clearButton=options.clearButton.show),settings.clearButton=!!options.clearButton,clearButton.style.display=settings.clearButton?"block":"none";break;case"clearLabel":settings.clearLabel=options.clearLabel,clearButton.innerHTML=settings.clearLabel;break;case"closeButton":settings.closeButton=!!options.closeButton,settings.closeButton?picker.insertBefore(closeButton,colorPreview):colorPreview.appendChild(closeButton);break;case"closeLabel":settings.closeLabel=options.closeLabel,closeButton.innerHTML=settings.closeLabel;break;case"a11y":const labels=options.a11y;let update=!1;if("object"==typeof labels)for(const label in labels)labels[label]&&settings.a11y[label]&&(settings.a11y[label]=labels[label],update=!0);if(update){const openLabel=getEl("clr-open-label"),swatchLabel=getEl("clr-swatch-label");openLabel.innerHTML=settings.a11y.open,swatchLabel.innerHTML=settings.a11y.swatch,closeButton.setAttribute("aria-label",settings.a11y.close),clearButton.setAttribute("aria-label",settings.a11y.clear),hueSlider.setAttribute("aria-label",settings.a11y.hueSlider),alphaSlider.setAttribute("aria-label",settings.a11y.alphaSlider),colorValue.setAttribute("aria-label",settings.a11y.input),colorArea.setAttribute("aria-label",settings.a11y.instruction)}break;default:settings[key]=options[key]}},setVirtualInstance=(selector,options)=>{"string"==typeof selector&&"object"==typeof options&&(instances[selector]=options,hasInstance=!0)},removeVirtualInstance=selector=>{delete instances[selector],0===Object.keys(instances).length&&(hasInstance=!1,selector===currentInstanceId&&resetVirtualInstance())},resetVirtualInstance=()=>{Object.keys(defaultInstance).length>0&&(configure(defaultInstance),currentInstanceId="",defaultInstance={})},bindFields=selector=>{selector instanceof HTMLElement&&(selector=[selector]),Array.isArray(selector)?[...selector].forEach(field=>{addListener(field,"click",openPicker),addListener(field,"input",updateColorPreview)}):(addListener(document,"click",selector,openPicker),addListener(document,"input",selector,updateColorPreview))},openPicker=()=>{if(oldColor="#000001",currentFormat=getColorFormatFromStr(oldColor),picker.classList.add("clr-open"),updatePickerPosition(),setColorFromStr(oldColor),settings.focusInput||settings.selectInput){colorValue.focus({preventScroll:!0});try{colorValue.setSelectionRange(currentEl.selectionStart,currentEl.selectionEnd)}catch{}}settings.selectInput&&colorValue.select();const thisArr=getFocusableElements();if(thisArr.length>0&&settings.swatchesOnly){thisArr.shift().focus()}},updatePickerPosition=()=>{const parent=container,scrollY=window.scrollY,pickerWidth=picker.offsetWidth,pickerHeight=picker.offsetHeight,reposition={left:!1,top:!1};let parentStyle,parentMarginTop,parentBorderTop,offset={x:0,y:0};if(parent&&(parentStyle=window.getComputedStyle(parent),parentMarginTop=parseFloat(parentStyle.marginTop),parentBorderTop=parseFloat(parentStyle.borderTopWidth),offset=parent.getBoundingClientRect(),offset.y+=parentBorderTop+scrollY),!settings.inline){let coords,left,top;coords=null==currentEl?document.body.getBoundingClientRect():currentEl.getBoundingClientRect(),left=coords.x,top=scrollY+coords.y+coords.height+settings.margin,parent?(left-=offset.x,top-=offset.y,left+pickerWidth>parent.clientWidth&&(left+=coords.width-pickerWidth,reposition.left=!0),top+pickerHeight>parent.clientHeight-parentMarginTop&&pickerHeight+settings.margin<=coords.top-(offset.y-scrollY)&&(top-=coords.height+pickerHeight+2*settings.margin,reposition.top=!0),top+=parent.scrollTop):(left+pickerWidth>document.documentElement.clientWidth&&(left+=coords.width-pickerWidth,reposition.left=!0),top+pickerHeight-scrollY>document.documentElement.clientHeight&&pickerHeight+settings.margin<=coords.top&&(top=scrollY+coords.y-pickerHeight-settings.margin,reposition.top=!0)),offset.x+=picker.offsetLeft,offset.y+=picker.offsetTop}const box=picker.getBoundingClientRect();colorAreaDims={width:colorArea.offsetWidth,height:colorArea.offsetHeight,x:box.left,y:box.top-20}},wrapFields=selector=>{selector instanceof HTMLElement?wrapColorField(selector):Array.isArray(selector)?[...selector].forEach(wrapColorField):[...document.querySelectorAll(selector)].forEach(wrapColorField)},wrapColorField=field=>{const parentNode=field.parentNode;if(!parentNode.classList.contains("clr-field")){const wrapper=document.createElement("div");let classes="clr-field";(settings.rtl||field.classList.contains("clr-rtl"))&&(classes+=" clr-rtl"),wrapper.innerHTML='<button type="button" aria-labelledby="clr-open-label"></button>',parentNode.insertBefore(wrapper,field),wrapper.className=classes,wrapper.style.color=field.value,wrapper.appendChild(field)}},updateColorPreview=event=>{const parent=event.target.parentNode;parent.classList.contains("clr-field")&&(parent.style.color=event.target.value)},closePicker=(revert=!1)=>{if(currentEl&&!settings.inline){const prevEl=currentEl;revert&&(currentEl=void 0,oldColor!==prevEl.value&&(prevEl.value=oldColor,prevEl.dispatchEvent(new Event("input",{bubbles:!0})))),setTimeout(()=>{oldColor!==prevEl.value&&prevEl.dispatchEvent(new Event("change",{bubbles:!0}))}),picker.classList.remove("clr-open"),hasInstance&&resetVirtualInstance(),prevEl.dispatchEvent(new Event("close",{bubbles:!1})),settings.focusInput&&prevEl.focus({preventScroll:!0}),currentEl=void 0}},setColorFromStr=str=>{const rgba=strToRGBA(str),hsva=RGBAtoHSVA(rgba);updateMarkerA11yLabel(hsva.s,hsva.v),updateColor(rgba,hsva),hueSlider.value=hsva.h,picker.style.color=`hsl(${hsva.h}, 100%, 50%)`,hueMarker.style.left=hsva.h/360*100+"%",colorMarker.style.left=colorAreaDims.width*hsva.s/100+"px",colorMarker.style.top=colorAreaDims.height-colorAreaDims.height*hsva.v/100+"px",alphaSlider.value=100*hsva.a,alphaMarker.style.left=100*hsva.a+"%"},getColorFormatFromStr=str=>{"string"!=typeof str&&(str="#000001");const format=str.substring(0,3).toLowerCase();return"rgb"===format||"hsl"===format?format:"hex"},pickColor=color=>{color=void 0!==color?color:colorValue.value,currentEl&&(currentEl.value=color,currentEl.dispatchEvent(new Event("input",{bubbles:!0}))),settings.onChange&&settings.onChange.call(window,color,currentEl),document.dispatchEvent(new CustomEvent("coloris:pick",{detail:{color,currentEl}}))},setColorAtPosition=(x,y)=>{const hsva={h:1*hueSlider.value,s:x/colorAreaDims.width*100,v:100-y/colorAreaDims.height*100,a:alphaSlider.value/100},rgba=HSVAtoRGBA(hsva);updateMarkerA11yLabel(hsva.s,hsva.v),updateColor(rgba,hsva),pickColor()},updateMarkerA11yLabel=(saturation,value)=>{let label=settings.a11y.marker;saturation=1*Number(saturation.toFixed(1)),value=1*Number(value.toFixed(1)),label=label.replace("{s}",saturation),label=label.replace("{v}",value),colorMarker.setAttribute("aria-label",label)},moveMarker=event=>{const pointer=(event=>event.changedTouches?{pageX:event.changedTouches[0].pageX,pageY:event.changedTouches[0].pageY}:{pageX:event.pageX,pageY:event.pageY})(event);let x=pointer.pageX-colorAreaDims.x,y=pointer.pageY-colorAreaDims.y;container&&(y+=container.scrollTop),setMarkerPosition(x,y),event.preventDefault(),event.stopPropagation()},setMarkerPosition=(x,y)=>{x=x<0?0:x>colorAreaDims.width?colorAreaDims.width:x,y=y<0?0:y>colorAreaDims.height?colorAreaDims.height:y,colorMarker.style.left=`${x}px`,colorMarker.style.top=`${y}px`,setColorAtPosition(x,y),colorMarker.focus()},updateColor=(rgba={},hsva={})=>{let format=settings.format;for(const key in rgba)currentColor[key]=rgba[key];for(const key in hsva)currentColor[key]=hsva[key];const hex=RGBAToHex(currentColor),opaqueHex=hex.substring(0,7);switch(colorMarker.style.color=opaqueHex,alphaMarker.parentNode.style.color=opaqueHex,alphaMarker.style.color=hex,colorPreview.style.color=hex,colorArea.style.display="none",colorArea.offsetHeight,colorArea.style.display="",alphaMarker.nextElementSibling.style.display="none",alphaMarker.nextElementSibling.offsetHeight,alphaMarker.nextElementSibling.style.display="","mixed"===format?format=1===currentColor.a?"hex":"rgb":"auto"===format&&(format=currentFormat),format){case"hex":colorValue.value=hex;break;case"rgb":colorValue.value=RGBAToStr(currentColor);break;case"hsl":colorValue.value=HSLAToStr(HSVAtoHSLA(currentColor))}pickColor(colorValue.value),document.querySelector(`.clr-format [value="${format}"]`).checked=!0},setHue=()=>{const hue=1*hueSlider.value,x=1*Number(colorMarker.style.left.replace("px","")),y=1*Number(colorMarker.style.top.replace("px",""));picker.style.color=`hsl(${hue}, 100%, 50%)`,hueMarker.style.left=hue/360*100+"%",setColorAtPosition(x,y)},setAlpha=()=>{const alpha=alphaSlider.value/100;alphaMarker.style.left=100*alpha+"%",updateColor({a:alpha}),pickColor()},HSVAtoRGBA=hsva=>{const saturation=hsva.s/100,value=hsva.v/100;let chroma=saturation*value,hueBy60=hsva.h/60,x=chroma*(1-Math.abs(hueBy60%2-1)),m=value-chroma;chroma+=m,x+=m;const index=Math.floor(hueBy60)%6,red=[chroma,x,m,m,x,chroma][index],green=[x,chroma,chroma,x,m,m][index],blue=[m,m,x,chroma,chroma,x][index];return{r:Math.round(255*red),g:Math.round(255*green),b:Math.round(255*blue),a:hsva.a}},HSVAtoHSLA=hsva=>{const value=hsva.v/100,lightness=value*(1-hsva.s/100/2);let saturation;return saturation=0,lightness>0&&lightness<1&&(saturation=Math.round((value-lightness)/Math.min(lightness,1-lightness)*100)),{h:hsva.h,s:saturation,l:Math.round(100*lightness),a:hsva.a}},RGBAtoHSVA=rgba=>{const red=rgba.r/255,green=rgba.g/255,blue=rgba.b/255,xmax=Math.max(red,green,blue),chroma=xmax-Math.min(red,green,blue),value=xmax;let hue=0,saturation=0;return chroma&&(xmax===red&&(hue=(green-blue)/chroma),xmax===green&&(hue=2+(blue-red)/chroma),xmax===blue&&(hue=4+(red-green)/chroma),xmax&&(saturation=chroma/xmax)),hue=Math.floor(60*hue),{h:hue<0?hue+360:hue,s:Math.round(100*saturation),v:Math.round(100*value),a:rgba.a}},strToRGBA=str=>{const hexStandard=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];let r,g,b,a,rw,gw,bw;if(str=str.toLowerCase(),ctx.fillStyle="#000",ctx.fillStyle=str,r=0,g=0,b=0,a=0,/^#/.test(str))if(str.length<=7){const last=str[str.length-1],n=7-str.length;for(let i=0;i<n;i++)str+=last;rw=String(str.slice(1,3)),gw=String(str.slice(3,5)),bw=String(str.slice(5,7)),a=1,r=16*hexStandard.findIndex(s=>s===rw.slice(0,1))+hexStandard.findIndex(s=>s===rw.slice(1)),g=16*hexStandard.findIndex(s=>s===gw.slice(0,1))+hexStandard.findIndex(s=>s===gw.slice(1)),b=16*hexStandard.findIndex(s=>s===bw.slice(0,1))+hexStandard.findIndex(s=>s===bw.slice(1))}else rw=String(str.slice(1,3)),gw=String(str.slice(3,5)),bw=String(str.slice(5,7)),r=16*hexStandard.findIndex(s=>s===rw.slice(0,1))+hexStandard.findIndex(s=>s===rw.slice(1)),g=16*hexStandard.findIndex(s=>s===gw.slice(0,1))+hexStandard.findIndex(s=>s===gw.slice(1)),b=16*hexStandard.findIndex(s=>s===bw.slice(0,1))+hexStandard.findIndex(s=>s===bw.slice(1)),a=Number(str.slice(7,9))/100;else if(/^rgb/i.test(str))str.replace(/^(rgba|rgb)\(([0-9\.\-]+),\s*([0-9\.\-]+),\s*([0-9\.\-]+)(,*\s*)([0-9\.\-]+)?/gi,(match,p1,p2,p3,p4,p5,p6)=>(a="rgba"===p1?Number(p6):1,r=Number(p2),g=Number(p3),b=Number(p4),match));else{const result=convertColorToHex(str);if(null===result)throw new Error("invalid color");rw=String(result.slice(1,3)),gw=String(result.slice(3,5)),bw=String(result.slice(5,7)),a=1,r=16*hexStandard.findIndex(s=>s===rw.slice(0,1))+hexStandard.findIndex(s=>s===rw.slice(1)),g=16*hexStandard.findIndex(s=>s===gw.slice(0,1))+hexStandard.findIndex(s=>s===gw.slice(1)),b=16*hexStandard.findIndex(s=>s===bw.slice(0,1))+hexStandard.findIndex(s=>s===bw.slice(1))}return{r,g,b,a}},RGBAToHex=rgba=>{let R=rgba.r.toString(16),G=rgba.g.toString(16),B=rgba.b.toString(16),A="";if(rgba.r<16&&(R="0"+R),rgba.g<16&&(G="0"+G),rgba.b<16&&(B="0"+B),settings.alpha&&(rgba.a<1||settings.forceAlpha)){const alpha=255*rgba.a|0;A=alpha.toString(16),alpha<16&&(A="0"+A)}return"#"+R+G+B+A},RGBAToStr=rgba=>!settings.alpha||1===rgba.a&&!settings.forceAlpha?`rgb(${rgba.r}, ${rgba.g}, ${rgba.b})`:`rgba(${rgba.r}, ${rgba.g}, ${rgba.b}, ${rgba.a})`,HSLAToStr=hsla=>!settings.alpha||1===hsla.a&&!settings.forceAlpha?`hsl(${hsla.h}, ${hsla.s}%, ${hsla.l}%)`:`hsla(${hsla.h}, ${hsla.s}%, ${hsla.l}%, ${hsla.a})`,convertColorToHex=colorName=>{const dummyElement=document.createElement("div");dummyElement.style.color=colorName,document.body.appendChild(dummyElement);const computedColor=window.getComputedStyle(dummyElement).color;document.body.removeChild(dummyElement);const rgbMatch=computedColor.match(/\d+/g);if(!rgbMatch||rgbMatch.length<3)return null;const[r,g,b]=rgbMatch.map(Number),toHex=c=>("0"+c.toString(16)).slice(-2);return`#${toHex(r)}${toHex(g)}${toHex(b)}`.toUpperCase()},init=thisMother=>{const box=thisMother.getBoundingClientRect(),cancelBack=CreateDom.createDom({mother:thisMother,style:{display:"flex",position:"fixed",top:-2*box.top,left:-2*box.left,width:"calc(100vw + (4 * "+String(box.left)+"px))",height:"calc(100vh + (4 * "+String(box.top)+"px))",background:"transparent"}}),safeBack=CreateDom.createDom({mother:thisMother,style:{display:"flex",position:"fixed",top:0,left:0,width:String(100)+"%",height:String(100)+"%",background:"transparent"}});return container=void 0,picker=CreateDom.createDom({mother:thisMother,mode:"div",id:"clr-picker",class:["clr-picker"],text:[`<input id="clr-color-value" name="clr-color-value" class="clr-color" type="text" value="" spellcheck="false" aria-label="${settings.a11y.input}">`,`<div id="clr-color-area" class="clr-gradient" role="application" aria-label="${settings.a11y.instruction}">`,'<div id="clr-color-marker" class="clr-marker" tabindex="0"></div>',"</div>",'<div class="clr-hue">',`<input id="clr-hue-slider" name="clr-hue-slider" type="range" min="0" max="360" step="1" aria-label="${settings.a11y.hueSlider}">`,'<div id="clr-hue-marker"></div>',"</div>",'<div class="clr-alpha">',`<input id="clr-alpha-slider" name="clr-alpha-slider" type="range" min="0" max="100" step="1" aria-label="${settings.a11y.alphaSlider}">`,'<div id="clr-alpha-marker"></div>',"<span></span>","</div>",'<div id="clr-format" class="clr-format">','<fieldset class="clr-segmented">',`<legend>${settings.a11y.format}</legend>`,'<input id="clr-f1" type="radio" name="clr-format" value="hex">','<label for="clr-f1">Hex</label>','<input id="clr-f2" type="radio" name="clr-format" value="rgb">','<label for="clr-f2">RGB</label>','<input id="clr-f3" type="radio" name="clr-format" value="hsl">','<label for="clr-f3">HSL</label>',"<span></span>","</fieldset>","</div>",'<div id="clr-swatches" class="clr-swatches"></div>',`<button type="button" id="clr-clear" class="clr-clear" aria-label="${settings.a11y.clear}">${settings.clearLabel}</button>`,'<div id="clr-color-preview" class="clr-preview">',`<button type="button" id="clr-close" class="clr-close" aria-label="${settings.a11y.close}">${settings.closeLabel}</button>`,"</div>",`<span id="clr-open-label" hidden>${settings.a11y.open}</span>`,`<span id="clr-swatch-label" hidden>${settings.a11y.swatch}</span>`].join(""),style:{display:"flex",flexDirection:"row",width:String(100)+"%",left:0,top:0,height:"auto",boxShadow:"",background:"#f1f1f1",borderRadius:10,overflow:"hidden",zIndex:1}}),colorArea=getEl("clr-color-area"),colorMarker=getEl("clr-color-marker"),clearButton=getEl("clr-clear"),closeButton=getEl("clr-close"),colorPreview=getEl("clr-color-preview"),colorValue=getEl("clr-color-value"),hueSlider=getEl("clr-hue-slider"),hueMarker=getEl("clr-hue-marker"),alphaSlider=getEl("clr-alpha-slider"),alphaMarker=getEl("clr-alpha-marker"),bindFields(settings.el),wrapFields(settings.el),addListener(picker,"mousedown",event=>{picker.classList.remove("clr-keyboard-nav"),event.stopPropagation()}),addListener(colorArea,"mousedown",event=>{addListener(colorArea,"mousemove",moveMarker)}),addListener(colorArea,"contextmenu",event=>{event.preventDefault()}),addListener(colorArea,"touchstart",event=>{colorArea.addEventListener("touchmove",moveMarker,{passive:!1})}),addListener(colorMarker,"mousedown",event=>{addListener(colorArea,"mousemove",moveMarker)}),addListener(colorMarker,"touchstart",event=>{colorArea.addEventListener("touchmove",moveMarker,{passive:!1})}),addListener(colorValue,"change",event=>{const value=colorValue.value;if(currentEl||settings.inline){const color=""===value?value:setColorFromStr(value);pickColor(color)}}),addListener(clearButton,"click",event=>{pickColor(),closePicker()}),addListener(closeButton,"click",event=>{pickColor(),closePicker()}),addListener(getEl("clr-format"),"click",".clr-format input",event=>{currentFormat=event.target.value,updateColor(),pickColor()}),addListener(picker,"click",".clr-swatches button",event=>{setColorFromStr(event.target.textContent),pickColor(),settings.swatchesOnly&&closePicker()}),addListener(colorArea,"mouseup",event=>{colorArea.removeEventListener("mousemove",moveMarker)}),addListener(colorArea,"touchend",event=>{colorArea.removeEventListener("mousemove",moveMarker)}),addListener(colorArea,"mouseleave",event=>{colorArea.removeEventListener("mousemove",moveMarker)}),addListener(colorArea,"mousemove",event=>{null===Coloris.timeouts.thisColorAreaMouseMove&&void 0===Coloris.timeouts.thisColorAreaMouseMove||window.clearTimeout(Coloris.timeouts.thisColorAreaMouseMove),Coloris.timeouts.thisColorAreaMouseMove=window.setTimeout(()=>{try{colorArea.removeEventListener("mousemove",moveMarker)}catch{}},1e3)}),addListener(colorMarker,"keydown",event=>{const movements={ArrowUp:[0,-1],ArrowDown:[0,1],ArrowLeft:[-1,0],ArrowRight:[1,0]};if(Object.keys(movements).includes(event.key)){const target=movements[event.key];((offsetX,offsetY)=>{let x=1*Number(colorMarker.style.left.replace("px",""))+offsetX,y=1*Number(colorMarker.style.top.replace("px",""))+offsetY;setMarkerPosition(x,y)})(target[0],target[1]),event.preventDefault()}}),addListener(colorArea,"click",moveMarker),addListener(hueSlider,"input",setHue),addListener(alphaSlider,"input",setAlpha),setTimeout(()=>{setColorFromStr(preValueRoot),document.getElementById("clr-color-value").value=preValueRoot},0),new Promise((resolve,reject)=>{document.getElementById("clr-color-value").addEventListener("keyup",e=>{if(!(e.ctrlKey||e.altKey||e.metaKey||e.shiftKey)&&"Meta"!==e.key&&"Alt"!==e.key&&"Ctrl"!==e.key&&"Shift"!==e.key){const self=e.currentTarget;if(self.value=self.value.replace(/[^0-9#\(\)a-r,]/gis,"").replace(/\s/gis,"").trim(),self.value=self.value.replace(/#+/gi,"#"),/^#/i.test(self.value)||(self.value="#"+self.value,self.value=self.value.replace(/#+/gi,"#").trim()),self.value.length>=7)try{setColorFromStr(self.value),e.ctrlKey||e.altKey||e.metaKey||e.shiftKey||resolve(document.getElementById("clr-color-value").value)}catch{resolve(null)}}}),document.getElementById("clr-color-value").addEventListener("keydown",e=>{const self=e.currentTarget;if(("Enter"===e.key||"Tap"===e.key||"Tab"===e.key)&&(e.preventDefault(),self.value=self.value.replace(/[^0-9#\(\)a-r,]/gis,"").replace(/\s/gis,"").trim(),self.value=self.value.replace(/#+/gi,"#"),/^#/i.test(self.value)||(self.value="#"+self.value,self.value=self.value.replace(/#+/gi,"#").trim()),self.value.length>=7))try{setColorFromStr(self.value),resolve(document.getElementById("clr-color-value").value)}catch{resolve(null)}}),cancelBack.addEventListener("click",e=>{if(null===document.getElementById("clr-color-value"))resolve(null);else{const self=document.getElementById("clr-color-value");if(self.value=self.value.replace(/[^0-9#\(\)a-r,]/gis,"").replace(/\s/gis,"").trim(),self.value=self.value.replace(/#+/gi,"#"),/^#/i.test(self.value)||(self.value="#"+self.value,self.value=self.value.replace(/#+/gi,"#").trim()),self.value.length>=7)try{setColorFromStr(self.value),resolve(document.getElementById("clr-color-value").value)}catch{resolve(null)}else resolve(null)}}),safeBack.addEventListener("click",e=>e.stopPropagation()),picker.addEventListener("click",e=>e.stopPropagation())})},getFocusableElements=()=>[...picker.querySelectorAll("input, button")].filter(node=>!!node.offsetWidth);class Coloris{constructor(){}static timeouts={};injectionPicker(thisMother,preValue="#000001",options={}){preValueRoot=preValue,this.styleInjection();const initOption={parent:options.parent?options.parent:".container",el:options.el?options.el:".color-field",wrap:!options.wrap||options.wrap,rtl:!!options.rtl&&options.rtl,theme:options.theme?options.theme:"default",themeMode:options.themeMode?options.themeMode:"light",margin:options.margin?options.margin:2,format:options.format?options.format:"hex",formatToggle:!!options.formatToggle&&options.formatToggle,alpha:!options.alpha||options.alpha,forceAlpha:!!options.forceAlpha&&options.forceAlpha,swatchesOnly:!!options.swatchesOnly&&options.swatchesOnly,focusInput:!options.focusInput||options.focusInput,selectInput:!!options.selectInput&&options.selectInput,clearButton:!!options.clearButton&&options.clearButton,clearLabel:options.clearLabel?options.clearLabel:"Clear",closeButton:!!options.closeButton&&options.closeButton,closeLabel:options.closeLabel?options.closeLabel:"닫기",swatches:options.swatches?options.swatches:["#ffffff","#f2f2f2","#ececec","#202020","#00ABC9","#008AA2","#B32737","#F2AB63","#ffdd99","#dcbdfb","#6cb6ff"],inline:!!options.inline&&options.inline,defaultColor:options.defaultColor?options.defaultColor:"#000001",onChange:options.onChange?options.onChange:(color,el)=>{}};return new Promise((resolve,reject)=>{init(thisMother).then(result=>{resolve(null===result||"#000001"===result?null:result)}).catch(e=>reject(e)),configure(initOption),openPicker()})}styleInjection=()=>{if(null===document.querySelector("style")){const styleTag=document.createElement("style");document.head.appendChild(styleTag)}const styleTag=document.querySelector("style");/\.clr\-picker/g.test(styleTag.innerHTML)||styleTag.insertAdjacentHTML("beforeend",'\n        .clr-picker {\n          display: none;\n          flex-wrap: wrap;\n          position: fixed;\n          z-index: 1000;\n          border-radius: 10px;\n          background-color: #ffffff;\n          justify-content: flex-end;\n          direction: ltr;\n          color: #000000;\n          -moz-user-select: none;\n          -webkit-user-select: none;\n          user-select: none;\n        }\n    \n        .clr-picker.clr-open,\n        .clr-picker[data-inline="true"] {\n          display: flex;\n        }\n    \n        .clr-picker[data-inline="true"] {\n          position: relative;\n        }\n    \n        .clr-gradient {\n          position: relative;\n          width: 100%;\n          height: 100px;\n          margin-bottom: 15px;\n          border-radius: 3px 3px 0 0;\n          background-image: linear-gradient(rgba(0,0,0,0), #000), linear-gradient(90deg, #fff, currentColor);\n          cursor: pointer;\n          color: inherit;\n        }\n    \n        .clr-marker {\n          position: absolute;\n          width: 12px;\n          height: 12px;\n          margin: -6px 0 0 -6px;\n          border: 1px solid #ececec;\n          border-radius: 50%;\n          background-color: currentColor;\n          cursor: pointer;\n          color: inherit;\n        }\n    \n        .clr-picker input[type="range"]::-webkit-slider-runnable-track {\n          width: 100%;\n          height: 16px;\n        }\n    \n        .clr-picker input[type="range"]::-webkit-slider-thumb {\n          width: 16px;\n          height: 16px;\n          -webkit-appearance: none;\n        }\n    \n        .clr-picker input[type="range"]::-moz-range-track {\n          width: 100%;\n          height: 16px;\n          border: 0;\n        }\n    \n        .clr-picker input[type="range"]::-moz-range-thumb {\n          width: 16px;\n          height: 16px;\n          border: 0;\n        }\n    \n        .clr-hue {\n          background-image: linear-gradient(to right, #f00 0%, #ff0 16.66%, #0f0 33.33%, #0ff 50%, #00f 66.66%, #f0f 83.33%, #f00 100%);\n        }\n    \n        .clr-hue,\n        .clr-alpha {\n          position: relative;\n          width: calc(100% - 40px);\n          height: 8px;\n          margin: 5px 20px;\n          border-radius: 4px;\n        }\n    \n        .clr-alpha span {\n          display: block;\n          height: 100%;\n          width: 100%;\n          border-radius: inherit;\n          background-image: linear-gradient(90deg, rgba(0,0,0,0), currentColor);\n          color: inherit;\n        }\n    \n        .clr-hue input[type="range"],\n        .clr-alpha input[type="range"] {\n          position: absolute;\n          width: calc(100% + 32px);\n          height: 16px;\n          left: -16px;\n          top: -4px;\n          margin: 0;\n          background-color: transparent;\n          opacity: 0;\n          cursor: pointer;\n          appearance: none;\n          -webkit-appearance: none;\n        }\n    \n        .clr-hue div,\n        .clr-alpha div {\n          position: absolute;\n          width: 16px;\n          height: 16px;\n          left: 0;\n          top: 50%;\n          margin-left: -8px;\n          transform: translateY(-50%);\n          border: 2px solid #fff;\n          border-radius: 50%;\n          background-color: currentColor;\n          color: inherit;\n          box-shadow: 0 0 1px #888;\n          pointer-events: none;\n        }\n    \n        .clr-alpha div:before {\n          content: \'\';\n          position: absolute;\n          height: 100%;\n          width: 100%;\n          left: 0;\n          top: 0;\n          border-radius: 50%;\n          background-color: currentColor;\n          color: inherit;\n        }\n    \n        .clr-format {\n          display: none;\n          order: 1;\n          width: calc(100% - 40px);\n          margin: 0 20px 20px;\n        }\n    \n        .clr-segmented {\n          display: flex;\n          position: relative;\n          width: 100%;\n          margin: 0;\n          padding: 0;\n          border: 1px solid #ddd;\n          border-radius: 15px;\n          box-sizing: border-box;\n          color: #999;\n          font-size: 12px;\n        }\n    \n        .clr-segmented input,\n        .clr-segmented legend {\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          margin: 0;\n          padding: 0;\n          border: 0;\n          left: 0;\n          top: 0;\n          opacity: 0;\n          pointer-events: none;\n        }\n    \n        .clr-segmented label {\n          flex-grow: 1;\n          margin: 0;\n          padding: 4px 0;\n          font-size: inherit;\n          font-weight: normal;\n          line-height: initial;\n          text-align: center;\n          cursor: pointer;\n        }\n    \n        .clr-segmented label:first-of-type {\n          border-radius: 10px 0 0 10px;\n        }\n    \n        .clr-segmented label:last-of-type {\n          border-radius: 0 10px 10px 0;\n        }\n    \n        .clr-segmented input:checked + label {\n          color: #fff;\n          background-color: #666;\n        }\n    \n        .clr-swatches {\n          order: 2;\n          width: calc(100% - 32px);\n          margin: 0 16px;\n          background: transparent;\n        }\n    \n        .clr-swatches div {\n          display: flex;\n          flex-wrap: wrap;\n          padding-bottom: 12px;\n          justify-content: center;\n        }\n    \n        .clr-swatches button {\n          position: relative;\n          width: 20px;\n          height: 20px;\n          margin: 0 4px 6px 4px;\n          padding: 0;\n          border: 0;\n          border-radius: 50%;\n          color: inherit;\n          text-indent: -1000px;\n          white-space: nowrap;\n          overflow: hidden;\n          cursor: pointer;\n        }\n    \n        .clr-swatches button:after {\n          content: \'\';\n          display: block;\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          left: 0;\n          top: 0;\n          border-radius: inherit;\n          background-color: currentColor;\n          box-shadow: inset 0 0 0 1px rgba(0,0,0,.12);\n          color: inherit;\n        }\n    \n        input.clr-color {\n          order: 1;\n          width: calc(100% - 80px);\n          height: 32px;\n          margin: 15px 20px 20px auto;\n          padding: 0 10px;\n          border-radius: 16px;\n          color: #202020;\n          border: 0;\n          background-color: #ffffff;\n          font-family: pretendard;\n          font-size: 14.5px;\n          font-weight: 400;\n          text-align: center;\n          box-shadow: none;\n          outline: none;\n        }\n    \n        input.clr-color:focus {\n          outline: none;\n          border: 0;\n        }\n    \n        .clr-close,\n        .clr-clear {\n          display: none;\n          order: 2;\n          height: 24px;\n          margin: 0 20px 20px;\n          padding: 0 20px;\n          border: 0;\n          border-radius: 12px;\n          color: #fff;\n          background-color: #666;\n          font-family: inherit;\n          font-size: 12px;\n          font-weight: 400;\n          cursor: pointer;\n        }\n    \n        .clr-close {\n          display: block;\n          margin: 0 20px 20px auto;\n        }\n    \n        .clr-preview {\n          position: relative;\n          width: 32px;\n          height: 32px;\n          margin: 15px 0 20px 20px;\n          border-radius: 50%;\n          overflow: hidden;\n        }\n    \n        .clr-preview:before,\n        .clr-preview:after {\n          content: \'\';\n          position: absolute;\n          height: 100%;\n          width: 100%;\n          left: 0;\n          top: 0;\n          border: 1px solid #fff;\n          border-radius: 50%;\n        }\n    \n        .clr-preview:after {\n          border: 0;\n          background-color: currentColor;\n          box-shadow: inset 0 0 0 1px #ececec50;\n          color: inherit;\n        }\n    \n        .clr-preview button {\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          z-index: 1;\n          margin: 0;\n          padding: 0;\n          border: 0;\n          border-radius: 50%;\n          outline-offset: -2px;\n          background-color: transparent;\n          text-indent: -9999px;\n          cursor: pointer;\n          overflow: hidden;\n        }\n    \n        .clr-marker,\n        .clr-hue div,\n        .clr-alpha div,\n        .clr-color {\n          box-sizing: border-box;\n        }\n    \n        .clr-field {\n          display: inline-block;\n          position: relative;\n          color: transparent;\n        }\n    \n        .clr-field input {\n          margin: 0;\n          direction: ltr;\n        }\n    \n        .clr-field.clr-rtl input {\n          text-align: right;\n        }\n    \n        .clr-field button {\n          position: absolute;\n          width: 30px;\n          height: 100%;\n          right: 0;\n          top: 50%;\n          transform: translateY(-50%);\n          margin: 0;\n          padding: 0;\n          border: 0;\n          color: inherit;\n          text-indent: -1000px;\n          white-space: nowrap;\n          overflow: hidden;\n          pointer-events: none;\n        }\n    \n        .clr-field.clr-rtl button {\n          right: auto;\n          left: 0;\n        }\n    \n        .clr-field button:after {\n          content: \'\';\n          display: block;\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          left: 0;\n          top: 0;\n          border-radius: inherit;\n          background-color: currentColor;\n          box-shadow: inset 0 0 1px rgba(0,0,0,.5);\n          color: inherit;\n        }\n    \n        .clr-alpha,\n        .clr-alpha div,\n        .clr-swatches button,\n        .clr-preview:before,\n        .clr-field button {\n          background-image: repeating-linear-gradient(45deg, #aaa 25%, transparent 25%, transparent 75%, #aaa 75%, #aaa), repeating-linear-gradient(45deg, #aaa 25%, #fff 25%, #fff 75%, #aaa 75%, #aaa);\n          background-position: 0 0, 4px 4px;\n          background-size: 8px 8px;\n        }\n    \n        .clr-marker:focus {\n          outline: none;\n        }\n    \n        .clr-keyboard-nav .clr-marker:focus,\n        .clr-keyboard-nav .clr-hue input:focus + div,\n        .clr-keyboard-nav .clr-alpha input:focus + div,\n        .clr-keyboard-nav .clr-segmented input:focus + label {\n          outline: none;\n          box-shadow: 0 0 0 2px #1e90ff, 0 0 2px 2px #fff;\n        }\n    \n        .clr-picker[data-alpha="false"] .clr-alpha {\n          display: none;\n        }\n    \n        .clr-picker[data-minimal="true"] {\n          padding-top: 16px;\n        }\n    \n        .clr-picker[data-minimal="true"] .clr-gradient,\n        .clr-picker[data-minimal="true"] .clr-hue,\n        .clr-picker[data-minimal="true"] .clr-alpha,\n        .clr-picker[data-minimal="true"] .clr-color,\n        .clr-picker[data-minimal="true"] .clr-preview {\n          display: none;\n        }\n    \n        /** Dark theme **/\n    \n        .clr-dark {\n          background-color: #444;\n        }\n    \n        .clr-dark .clr-segmented {\n          border-color: #777;\n        }\n    \n        .clr-dark .clr-swatches button:after {\n          box-shadow: inset 0 0 0 1px rgba(255,255,255,.3);\n        }\n    \n        .clr-dark input.clr-color {\n          color: #fff;\n          border-color: #777;\n          background-color: #555;\n        }\n    \n        .clr-dark input.clr-color:focus {\n          border-color: #1e90ff;\n        }\n    \n        .clr-dark .clr-preview:after {\n          box-shadow: inset 0 0 0 1px rgba(255,255,255,.5);\n        }\n    \n        .clr-dark .clr-alpha,\n        .clr-dark .clr-alpha div,\n        .clr-dark .clr-swatches button,\n        .clr-dark .clr-preview:before {\n          background-image: repeating-linear-gradient(45deg, #666 25%, transparent 25%, transparent 75%, #888 75%, #888), repeating-linear-gradient(45deg, #888 25%, #444 25%, #444 75%, #888 75%, #888);\n        }\n    \n        /** Polaroid theme **/\n    \n        .clr-picker.clr-polaroid {\n          border-radius: 6px;\n          box-shadow: 0 0 5px rgba(0,0,0,.1), 0 5px 30px rgba(0,0,0,.2);\n        }\n    \n        .clr-picker.clr-polaroid:before {\n          content: \'\';\n          display: block;\n          position: absolute;\n          width: 16px;\n          height: 10px;\n          left: 20px;\n          top: -10px;\n          border: solid transparent;\n          border-width: 0 8px 10px 8px;\n          border-bottom-color: currentColor;\n          box-sizing: border-box;\n          color: #fff;\n          filter: drop-shadow(0 -4px 3px rgba(0,0,0,.1));\n          pointer-events: none;\n        }\n    \n        .clr-picker.clr-polaroid.clr-dark:before {\n          color: #444;\n        }\n    \n        .clr-picker.clr-polaroid.clr-left:before {\n          left: auto;\n          right: 20px;\n        }\n    \n        .clr-picker.clr-polaroid.clr-top:before {\n          top: auto;\n          bottom: -10px;\n          transform: rotateZ(180deg);\n        }\n    \n        .clr-polaroid .clr-gradient {\n          width: calc(100% - 20px);\n          height: 120px;\n          margin: 10px;\n          border-radius: 3px;\n        }\n    \n        .clr-polaroid .clr-hue,\n        .clr-polaroid .clr-alpha {\n          width: calc(100% - 30px);\n          height: 10px;\n          margin: 6px 15px;\n          border-radius: 5px;\n        }\n    \n        .clr-polaroid .clr-hue div,\n        .clr-polaroid .clr-alpha div {\n          box-shadow: 0 0 5px rgba(0,0,0,.2);\n        }\n    \n        .clr-polaroid .clr-format {\n          width: calc(100% - 20px);\n          margin: 0 10px 15px;\n        }\n    \n        .clr-polaroid .clr-swatches {\n          width: calc(100% - 12px);\n          margin: 0 6px;\n        }\n        .clr-polaroid .clr-swatches div {\n          padding-bottom: 10px;\n        }\n    \n        .clr-polaroid .clr-swatches button {\n          width: 22px;\n          height: 22px;\n        }\n    \n        .clr-polaroid input.clr-color {\n          width: calc(100% - 60px);\n          margin: 10px 10px 15px auto;\n        }\n    \n        .clr-polaroid .clr-clear {\n          margin: 0 10px 15px 10px;\n        }\n    \n        .clr-polaroid .clr-close {\n          margin: 0 10px 15px auto;\n        }\n    \n        .clr-polaroid .clr-preview {\n          margin: 10px 0 15px 10px;\n        }\n    \n        /** Large theme **/\n    \n        .clr-picker.clr-large {\n          width: 275px;\n        }\n    \n        .clr-large .clr-gradient {\n          height: 150px;\n        }\n    \n        .clr-large .clr-swatches button {\n          width: 22px;\n          height: 22px;\n        }\n    \n        /** Pill (horizontal) theme **/\n    \n        .clr-picker.clr-pill {\n          width: 380px;\n          padding-left: 180px;\n          box-sizing: border-box;\n        }\n    \n        .clr-pill .clr-gradient {\n          position: absolute;\n          width: 180px;\n          height: 100%;\n          left: 0;\n          top: 0;\n          margin-bottom: 0;\n          border-radius: 3px 0 0 3px;\n        }\n    \n        .clr-pill .clr-hue {\n          margin-top: 20px;\n        }\n        ')};set(options){configure(options)}wrap(selector){wrapFields(selector)}close(revert=!1){closePicker(revert)}setInstance(selector,options){setVirtualInstance(selector,options)}removeInstance(selector){removeVirtualInstance(selector)}updatePosition(){updatePickerPosition()}static set(options){configure(options)}static wrap(selector){wrapFields(selector)}static close(revert=!1){closePicker(revert)}static setInstance(selector,options){setVirtualInstance(selector,options)}static removeInstance(selector){removeVirtualInstance(selector)}static updatePosition(){updatePickerPosition()}}return Coloris})(window,window.document);class AbstractNode{totalContents;baseTong;footerBase;rootElement;sero;userNameToken;mode;ea;standardWidth;modeMinus;naviHeight;backHeight;margin;baseTop;subBoxMargin;media;firstPageViewTime;events;stacks;timeouts;boos;constructor(){this.totalContents=document.createElement("DIV"),this.baseTong=document.createElement("DIV"),this.footerBase=document.createElement("DIV"),this.rootElement=document.createElement("DIV"),this.sero=!1,this.userNameToken="",this.mode="",this.ea="",this.standardWidth=0,this.modeMinus=0,this.naviHeight=0,this.backHeight=0,this.margin=0,this.baseTop=0,this.subBoxMargin={},this.media=[],this.firstPageViewTime=new Date,this.events={},this.stacks={},this.timeouts={},this.boos={}}static standardWidthArray=[1400,1050,900,720,90];static mediaToken="____media____";static lastVisitToken="localkey____last__visit____";static formPopupInputMatrixTempToken="__formPopupInputMatrixTempToken";static events={};static stacks={__temporaryPreventDefaultEvent:function(e){e.preventDefault()},__temporaryPreventScroll:0,____isDoingToken____:0};static timeouts={};static boos={scroll:!0};static mimeTypes={aac:"audio/aac",abw:"application/x-abiword",arc:"application/octet-stream",mkv:"video/x-matroska",avi:"video/x-msvideo",flac:"audio/flac",azw:"application/vnd.amazon.ebook",bin:"application/octet-stream",bz:"application/x-bzip",bz2:"application/x-bzip2",csh:"application/x-csh",css:"text/css",csv:"text/csv",doc:"application/msword",epub:"application/epub+zip",gif:"image/gif",html:"text/html",htm:"text/html",ts:"text/typescript",ico:"image/x-icon",ics:"text/calendar",jar:"application/java-archive",jpg:"image/jpeg",jpeg:"image/jpeg",mjs:"application/js",js:"application/js",json:"application/json",mid:"audio/midi",midi:"audio/midi",mpeg:"video/mpeg",mpkg:"application/vnd.apple.installer+xml",odp:"application/vnd.oasis.opendocument.presentation",ods:"application/vnd.oasis.opendocument.spreadsheet",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",pdf:"application/pdf",ppt:"application/vnd.ms-powerpoint",rar:"application/x-rar-compressed",rtf:"application/rtf",sh:"application/x-sh",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",ttf:"application/x-font-ttf",vsd:"application/vnd.visio",wav:"audio/x-wav",weba:"audio/webm",webm:"video/webm",webp:"image/webp",woff:"application/x-font-woff",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xml:"application/xml",xul:"application/vnd.mozilla.xul+xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2","7z":"application/x-7z-compressed",opf:"application/oebps-package+xml",txt:"text/plain",png:"image/png",apng:"image/apng",jfif:"image/jpeg",pjpeg:"image/jpeg",psd:"image/vnd.adobe.photoshop",pjp:"image/jpeg",cur:"image/x-icon",bmp:"image/bmp",avif:"image/avif",woff2:"font/woff2",otf:"font/otf",eot:"application/vnd.ms-fontobject",gz:"application/gzip",mp3:"audio/mpeg",ogg:"audio/ogg",mp4:"video/mp4",md:"text/markdown",heic:"image/heic",heif:"image/heif",opus:"audio/opus",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",hwp:"application/haansofthwp",hwpx:"application/vnd.hancom.hwpx",indd:"application/x-indesign",ncx:"application/x-dtbncx+xml"};static mimeTypesToKind=(()=>{const typeToExtensionMap=new Map;for(const extension in AbstractNode.mimeTypes){const mimeType=AbstractNode.mimeTypes[extension];typeToExtensionMap.has(mimeType)||typeToExtensionMap.set(mimeType,extension)}return typeToExtensionMap})();mimeTypes=AbstractNode.mimeTypes;static colorExtended={transparent:"transparent",white:"#ffffff",whiteIcon:"#ffffff",whiteBlack:"#ffffff",whiteGray:"#fbfbfb",whiteTransparent:"rgba(255, 255, 255, 0.95)",grayBack:"#f3f3f3",gray0:"#f7f7f7",gray1:"#f2f2f2",gray2:"#ececec",gray3:"#dddddd",gray4:"#cccccc",gray5:"#aaaaaa",gray6:"#e7e7e7",grayDeactive:"#c2c2c2",deactive:"#bbbbbb",liteShadow:"#bbbbbb",shadow:"#808080",shadowWhite:"#808080",darkShadow:"#606060",darkDarkShadow:"#505050",darkDarkDarkShadow:"#464646",liteBlack:"#aaaaaa",black:"#404040",mint:"rgba(0, 179, 207, 1)",mintSharp:"#00B1CF",mintDarkLight:"#A4E0EA",mintDarkDarkLight:"#57C7DB",mintLight:"#DAF1F5",mintWhite:"#E7F4F6",mintDark:"#008AA2",mintBlack:"rgba(0, 90, 160, 1)",mintDarkBlack:"rgba(0, 80, 140, 1)",mintBlue:"rgba(0,130,210,1)",gradientMintMiddle:"linear-gradient(138deg, rgba(27,177,255,1) 0%, rgba(0,179,207,1) 100%)",gradientMintLight:"linear-gradient(138deg, rgba(27,168,255,1) 0%, rgba(0,203,207,1) 100%)",gradientMintWhite:"linear-gradient(138deg, rgba(0,130,210,0.3) 0%, rgba(0,179,207,0.3) 100%)",gradientMintDark:"linear-gradient(182deg, rgba(0, 110, 180, 1) 0%, rgba(0, 130, 190, 1) 100%)",gradientMintBlack:"linear-gradient(180deg, rgba(0, 90, 160, 1) 0%, rgba(0, 80, 140, 1) 100%)",gradientSky:"linear-gradient(138deg, rgba(212, 232, 241, 1) 0%, rgba(137, 203, 222, 1) 100%)",gradientMint:"linear-gradient(138deg, rgba(0,130,210,1) 0%, rgba(0,179,207,1) 100%)",gradientMint2:"linear-gradient(138deg, rgba(0,130,210,1) 0%, rgba(0,179,207,0.5) 100%)",backgroundMint:"linear-gradient(138deg, rgba(0,130,210,0.2) 0%, rgba(0,179,207,0.8) 100%)",backgroundWhite:"linear-gradient(138deg, rgba(100,100,100,0.2) 0%, rgba(100,100,100,0.9) 100%)",darkBlack:"#303030",darkDarkBlack:"#252525",realBlack:"#202020",darkRealBlack:"#1c1c1c",darkDarkRealBlack:"#141414",gradientGreen:"linear-gradient(222deg, rgba(89, 175, 137, 0.9) 5%, rgba(0, 156, 106, 0.9) 100%)",gradientGreen2:"linear-gradient(222deg, rgba(89, 175, 137, 0.8) 5%, rgba(0, 156, 106, 0.9) 100%)",gradientGreen3:"linear-gradient(172deg, rgba(89, 175, 137, 0.9) 5%, rgba(0, 156, 106, 0.9) 100%)",gradientGreen4:"linear-gradient(222deg, rgba(89, 175, 137, 1) 5%, rgba(0, 156, 106, 1) 100%)",gradientGreenWhite:"linear-gradient(222deg, rgba(89, 175, 137, 0.9) 5%, rgba(0, 156, 106, 0.9) 100%)",greenGray:"#2fa678",greenWhite:"#2fa678",greenBlack:"#2fa678",cancelBlack:"#404040",green:"#2fa678",softGreen:"#59af89",darkGreen:"#009b6a",whiteGreen:"#bedacb",middleGreen:"#83cea7",liteGreen:"#f0f9f5",gradientWhiteWhiteGray:"linear-gradient(254deg, rgba(243, 243, 243, 0.94) 0%, rgba(248, 248, 248, 0.95) 100%)",gradientWhiteGray:"linear-gradient(254deg, rgba(236, 236, 236, 0.94) 0%, rgba(240, 240, 240, 0.95) 100%)",gradientGray:"linear-gradient(256deg, rgba(17, 17, 17, 0.8) 0%, rgba(20, 20, 20, 0.75) 100%)",gradientBlack:"linear-gradient(256deg, rgba(17, 17, 17, 0.9) 0%, rgba(20, 20, 20, 0.75) 100%)",gradientWhite:"linear-gradient(256deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.85) 100%)",gradientWhite2:"linear-gradient(200deg, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0.75) 100%)",gradientPurple:"linear-gradient(200deg, rgba(161, 166, 223, 1) 0%, rgba(161, 166, 223, 0.65) 100%)",gradientTransparent:"linear-gradient(0deg, rgba(255,255,255,0.7) 0%, rgba(235,235,235,0.3) 100%)",gradientWhiteTransparent:"linear-gradient(0deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.6) 100%)",red:"#B32737",yellow:"#F2AB63",purple:"#dcbdfb",purpleDark:"#BA8AEA",purpleDimDark:"#4a5191",purpleLogo:"#a1a6df",purpleLight:"#bcc2e8",darkRed:"#d13939",blueWhite:"#E7F3FB",blueLight:"#8CC9F4",blue:"#6cb6ff",blueString:"#96d0ff",blueDark:"#65A0C8",blueDim:"#5A96BF",blueDarkDim:"#2A5F84",blueDarkDarkDim:"#224761",blueDeactive:"#A9CDE5",brown:"#C59879",gardientWhite:"linear-gradient(28deg, rgba(140,201,244,0.88) 0%, rgba(195,224,244,1) 100%)",gradientBlue:"linear-gradient(199deg, rgba(140,201,244,0.85) 0%, rgba(119,187,233,1) 100%)",gradientBlue1:"linear-gradient(138deg, rgba(140,201,244,1) 0%, rgba(101,160,200,1) 100%)",gradientBlue2:"linear-gradient(199deg, rgba(140,201,244,1) 0%, rgba(90,150,191,1) 100%)",gradientBlue3:"linear-gradient(117deg, rgba(119,187,233,0.85) 0%, rgba(78,139,180,0.85) 100%)",gradientBlue4:"linear-gradient(138deg, rgba(111,170,215,1) 0%, rgba(119,187,233,1) 100%)",ultimateLightBlack:"#121212",ultimateBlack:"#000000",subRed:"#ff9062",subYellow:"#ffd874",yellowLine:"#cc921f",warmGray0:"#f2f2f2",warmGray1:"#ececec",warmGrayMiddle:"#dddddd",warmGray2:"#cccccc",softYellow:"#ffdd99",skyBlue:"#8db8f7",skyBlueLight:"#C2D6F8",pink:"#f2c5e6",beige:"#BEB1A1",skyblue:"#A3C1C9",rose:"#E3A08D",roseDark:"#CD7156",leaf:"#CAC9A1",gradientPinkBlue:"linear-gradient(138deg, #f2c5e6 0%, #8db8f7 100%)",pinkBeige:"rgba(229, 161, 153, 1)",pinkBeigeLight:"rgba(250, 224, 216, 1)",pinkBeigeDark:"rgba(204, 127, 124, 1)",gradientBeige:"linear-gradient(120deg, rgba(204, 127, 124, 1) 0%, rgba(250, 224, 216, 1) 100%)",gradientBeige2:"linear-gradient(120deg, rgba(229, 161, 153, 1) 0%, rgba(250, 224, 216, 1) 100%)",gradientBeige3:"linear-gradient(120deg, rgba(255, 255, 255, 1) 0%, rgba(250, 224, 216, 1) 100%)"};colorExtended=AbstractNode.colorExtended;static svgMaker={returnLoading:function(color=AbstractNode.colorExtended.darkShadow,color2=AbstractNode.colorExtended.black){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 566.929 566.929"><path d="M196.13 552.859c-23.91-7.75-37.01-33.409-29.26-57.31l0 0c7.74-23.9 33.4-37.01 57.31-29.26l0 0c23.9 7.74 37 33.399 29.26 57.31l0 0c-6.24 19.25-24.08 31.49-43.28 31.49l0 0C205.52 555.09 200.79 554.37 196.13 552.859z" fill="${color}"/><path d="M313.729 523.569C305.96 499.67 319.04 474 342.939 466.229l0 0c23.891-7.77 49.561 5.301 57.33 29.2l0 0c7.771 23.9-5.3 49.57-29.2 57.34l0 0c-4.67 1.521-9.409 2.24-14.069 2.24l0 0C337.819 555.01 319.979 542.79 313.729 523.569z" fill="${color2}"/><path d="M54.55 450.109c-14.81-20.3-10.35-48.76 9.96-63.569l0 0c20.3-14.8 48.77-10.34 63.57 9.97l0 0c14.8 20.3 10.34 48.76-9.96 63.56l0 0c-8.09 5.9-17.47 8.74-26.77 8.74l0 0C77.31 468.81 63.45 462.33 54.55 450.109z" fill="${color}"/><path d="M449 459.899c-20.33-14.779-24.82-43.239-10.03-63.56l0 0c14.78-20.32 43.23-24.81 63.561-10.03l0 0c20.319 14.78 24.81 43.24 10.029 63.561l0 0c-8.91 12.239-22.779 18.739-36.84 18.739l0 0C466.439 468.609 457.069 465.78 449 459.899z" fill="${color2}"/><path d="M0.33 283.77C0.3 258.64 20.65 238.25 45.78 238.22l0 0c25.13-0.03 45.52 20.32 45.55 45.45l0 0C91.35 308.8 71 329.189 45.88 329.22l0 0c-0.02 0-0.03 0-0.05 0l0 0C20.72 329.22 0.35 308.88 0.33 283.77z" fill="${color}"/><path d="M475.6 283.46L475.6 283.46c0-0.01 0-0.03 0-0.05l0 0c0-0.12 0-0.24 0-0.36l0 0C475.55 257.92 495.87 237.51 521 237.45l0 0c25.13-0.05 45.55 20.28 45.6 45.41l0 0c0 0.12 0 0.24 0 0.36l0 0c0 0.08 0 0.16 0 0.24l0 0c0 25.13-20.37 45.5-45.5 45.5l0 0C495.97 328.96 475.6 308.59 475.6 283.46z" fill="${color2}"/><path d="M0.33 283.76v0.01l0 0 0 0 0 0C0.33 283.76 0.33 283.76 0.33 283.76z" fill="${color}"/><path d="M64.29 180.85c-20.34-14.76-24.86-43.21-10.1-63.55l0 0C68.95 96.96 97.41 92.44 117.74 107.2l0 0c20.34 14.76 24.86 43.22 10.1 63.55l0 0c-8.9 12.27-22.78 18.78-36.86 18.78l0 0C81.71 189.53 72.36 186.71 64.29 180.85z" fill="${color}"/><path d="M438.729 170.26c-14.83-20.29-10.399-48.76 9.891-63.59l0 0c20.29-14.82 48.76-10.39 63.58 9.9l0 0 0 0 0 0c14.83 20.29 10.399 48.75-9.891 63.58l0 0c-8.1 5.92-17.5 8.77-26.81 8.77l0 0C461.47 188.92 447.64 182.45 438.729 170.26z" fill="${color}"/><path d="M166.43 71.62C158.63 47.73 171.67 22.05 195.57 14.25l0 0c23.89-7.8 49.57 5.25 57.37 29.14l0 0c7.79 23.89-5.26 49.57-29.14 57.37l0 0c-4.69 1.53-9.45 2.26-14.13 2.26l0 0C190.52 103.02 172.69 90.82 166.43 71.62z" fill="${color}"/><path d="M342.56 100.57h-0.01c-23.91-7.72-37.04-33.36-29.32-57.27l0 0C320.95 19.38 346.6 6.25 370.51 13.98l0 0 0 0 0 0C394.42 21.69 407.55 47.34 399.83 71.25l0 0c-6.221 19.27-24.07 31.54-43.29 31.54l0 0C351.91 102.79 347.2 102.07 342.56 100.57z" fill="${color}"/></svg>`},musicIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 190.3604 228.5013" xml:space="preserve"><path fill="${color}" d="M190.3588,92.5411c0,27.2085,0.0045,54.417-0.0016,81.6255c-0.0038,16.9354-12.2404,29.5731-29.1318,30.2833 c-8.0408,0.3381-15.9315-0.1328-23.573-2.9057c-14.2383-5.1668-21.5354-18.8859-17.5531-33.5142 c1.9154-7.0359,7.3796-10.6451,13.88-12.8728c5.987-2.0517,12.2216-2.6337,18.513-2.9545 c5.1651-0.2634,10.3952-0.4364,15.4465-1.4197c5.2526-1.0224,7.5702-4.3736,7.9675-9.759c0.1424-1.9304,0.2231-3.8699,0.2242-5.8053 c0.0146-24.8831,0.0142-49.7662,0.0009-74.6492c-0.0011-1.936-0.0856-3.8745-0.2047-5.8073 c-0.2053-3.3328-1.5277-4.5815-4.7838-3.9927c-5.4801,0.9909-10.9207,2.2087-16.3633,3.3981 c-26.0831,5.7002-52.1625,11.4174-78.2399,17.1437c-3.8895,0.8541-4.6838,1.7892-5.0232,5.8036 c-0.1369,1.6194-0.21,3.2492-0.2105,4.8743c-0.0114,38.1385-0.3324,76.2811,0.1357,114.4139 c0.2151,17.5239-11.143,27.4111-24.1964,30.4439c-9.1203,2.119-18.2647,2.3043-27.3779-0.0396 c-12.1187-3.1169-19.4519-12.3519-19.8487-24.8942c-0.3807-12.0342,5.1014-19.5656,16.6356-23.1213 c6.47-1.9945,13.1459-1.8328,19.774-2.3525c4.1398-0.3246,8.3133-0.873,12.3365-1.868c5.2085-1.2881,7.6766-4.6607,8.0948-10.0512 c0.1377-1.7751,0.2096-3.5601,0.2101-5.3406c0.0114-41.0842,0.0088-82.1684,0.0091-123.2526c0-0.7752-0.0182-1.5511,0.01-2.3254 c0.2201-6.0568,1.8858-8.1047,7.8565-9.3468c38.4912-8.0077,76.9852-16.0023,115.4854-23.9667 c5.9467-1.2302,9.3986,1.509,9.8106,7.6076c0.0887,1.3132,0.1127,2.6329,0.1131,3.9496 C190.3604,38.744,190.3588,65.6425,190.3588,92.5411z"/></svg>`},rabbitLogo:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 365.0174 319.9759" xml:space="preserve"><path fill="${color}" d="M0,160.1689c0,36.9398,28.7166,44.9485,48.2896,49.6733c4.9173,1.187,8.7928,5.1226,9.6175,10.1134 c2.859,17.3003,20.1173,39.6472,40.2479,49.6958c1.8247,0.9108,1.5226,3.5723-0.4289,4.1643 c-15.6562,4.75-27.0305,19.3415-26.9075,36.5781c0.0381,5.3367,4.5211,9.5822,9.8579,9.5822h172.2743 c0.3013,0,0.5953-0.0307,0.8796-0.0887c1.167,0.0375,2.3307,0.0887,3.5069,0.0887c59.4701,0,107.6802-48.2101,107.6802-107.6802 c0-5.7456-0.4516-11.491-1.3605-17.1644c-4.5865-28.6308-21.0121-54.6273-44.779-71.2088 c-5.029-3.5086-10.3757-6.5587-15.9527-9.1075c-8.8923-4.0639-18.3544-6.8328-28.0106-8.3388 c-2.3029-0.3592-4.6165-0.6487-6.9366-0.8703c-12.9993-1.2417-26.2029-0.3667-38.9412,2.4935 c-3.6537,0.8204-7.2547,1.8653-10.796,3.0809c-18.1071,6.2289-33.5727,17.7488-51.3084,24.8242 c-5.3935,2.1517-12.7303,3.8704-16.7037-2.09c-7.1685-10.753,14.499-42.4581,29.3149-59.3361 c23.2962-26.5389,30.6432-49.94,20.8216-64.7688c-8.7041-13.1415-29.308-14.0801-46.057,3.328 c-1.0855-0.27-2.2393-0.3451-3.3516-0.3903c-23.4358-0.9523-36.4365,23.3603-44.8278,41.59 c-4.2827,9.3038-8.2604,18.7981-10.6519,28.7877c-0.5371,2.2434-2.2685,3.9838-4.506,4.545C73.3918,92.0799,0,115.1123,0,160.1689z  M36.1397,146.5098c0-6.7027,5.4335-12.1363,12.1362-12.1363s12.1363,5.4336,12.1363,12.1363s-5.4336,12.1363-12.1363,12.1363 S36.1397,153.2124,36.1397,146.5098z"/></svg>`},homeIcon:function(color){return`<svg width="100%" height="100%" viewBox="0 0 549 551" xmlns="http://www.w3.org/2000/svg"><path fill="${color}" d="M0,272.513c-0,-18.235 7.652,-35.634 21.092,-47.958c53.634,-49.18 194.143,-178.019 238.968,-219.122c7.895,-7.239 20.016,-7.239 27.912,0c44.825,41.103 185.333,169.942 238.967,219.122c13.44,12.324 21.092,29.723 21.092,47.958c0,49.501 0,152.103 0,217.821c0,15.92 -6.324,31.188 -17.581,42.445c-11.257,11.257 -26.525,17.581 -42.445,17.581c-58.461,0 -141.767,0 -164.68,0c-3.331,0 -6.031,-2.7 -6.031,-6.031c-0,-21.534 -0,-95.892 -0,-143.744c-0,-23.201 -18.808,-42.009 -42.008,-42.009c-0.847,0 -1.694,0 -2.54,0c-23.201,0 -42.008,18.808 -42.008,42.009c-0,47.852 -0,122.21 -0,143.744c-0,3.331 -2.701,6.031 -6.031,6.031c-22.914,0 -106.22,0 -164.681,0c-15.92,0 -31.188,-6.324 -42.445,-17.581c-11.257,-11.257 -17.581,-26.525 -17.581,-42.445c0,-65.718 0,-168.32 0,-217.821Z"/></svg>`},aboutIcon:function(color){return`<svg width="100%" height="100%" viewBox="0 0 541 551" xmlns="http://www.w3.org/2000/svg"><path fill="${color}" d="M19.623,550.36c-10.837,0 -19.623,-8.778 -19.623,-19.606l0,-465.943c-0,-17.189 6.834,-33.674 18.999,-45.828c12.165,-12.155 28.664,-18.983 45.868,-18.983l207.755,0c17.203,-0 33.702,6.828 45.867,18.983c12.165,12.154 18.999,28.639 18.999,45.828c0,0 0,434.934 0,481.52c0,2.225 -1.803,4.029 -4.029,4.029c-22.604,0 -132.658,0 -132.658,0l0,-97.084c0,-17.419 -14.132,-31.54 -31.566,-31.54l-0.982,0c-17.433,0 -31.566,14.121 -31.566,31.54l-0,97.084l-117.064,0Zm254.916,-277.541c-0,-17.894 -14.541,-32.422 -32.45,-32.422c-17.91,-0 -32.45,14.528 -32.45,32.422l-0,44.197c-0,17.894 14.54,32.422 32.45,32.422c17.909,0 32.45,-14.528 32.45,-32.422l-0,-44.197Zm-211.539,0l0,44.197c0,17.894 14.541,32.422 32.45,32.422c17.91,0 32.451,-14.528 32.451,-32.422l-0,-44.197c-0,-17.894 -14.541,-32.422 -32.451,-32.422c-17.909,-0 -32.45,14.528 -32.45,32.422Zm0,-146.255l0,44.197c0,17.894 14.541,32.422 32.45,32.422c17.91,0 32.451,-14.528 32.451,-32.422l-0,-44.197c-0,-17.895 -14.541,-32.423 -32.451,-32.423c-17.909,0 -32.45,14.528 -32.45,32.423Zm211.539,-0c-0,-17.895 -14.541,-32.423 -32.45,-32.423c-17.91,0 -32.45,14.528 -32.45,32.423l-0,44.197c-0,17.894 14.54,32.422 32.45,32.422c17.909,0 32.45,-14.528 32.45,-32.422l-0,-44.197Zm196.085,62.438c18.65,-0 36.536,7.409 49.724,20.596c13.188,13.188 20.597,31.075 20.597,49.725l-0,267.171c-0,13.181 -10.685,23.866 -23.866,23.866l-142.726,0c-1.069,0 -2.093,-0.424 -2.849,-1.18c-0.756,-0.755 -1.18,-1.78 -1.18,-2.849c-0,-37.289 -0,-321.594 -0,-354.271c-0,-0.811 0.322,-1.589 0.896,-2.163c0.573,-0.573 1.351,-0.895 2.162,-0.895l97.242,-0Z"/></svg>`},searchIcon:function(color,boldMode=!1){return boldMode?`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 37.146 39.325" style="enable-background:new 0 0 37.146 39.325;" xml:space="preserve"><path fill="${color}" d="M36.6375,35.7993L26.4641,24.6445c2.6861-3.2016,3.9178-7.3604,3.3907-11.521c-0.5028-3.9772-2.5257-7.5201-5.6939-9.9761 C20.9928,0.6921,17.0589-0.3799,13.0806,0.12C4.8713,1.1603-0.9621,8.6851,0.077,16.8943 c1.0403,8.2092,8.5737,14.0438,16.7749,13.0035c2.3158-0.2929,4.5423-1.1325,6.481-2.4369l10.1952,11.179 c0.4002,0.4383,0.9676,0.6851,1.5593,0.6851c0.0865,0,0.1753-0.0046,0.263-0.0161c0.4336-0.0565,0.8315-0.241,1.1522-0.534 c0.4163-0.3783,0.6585-0.8961,0.6851-1.4589C37.213,36.7543,37.018,36.2157,36.6375,35.7993z M16.3243,25.7194 c-2.8544,0.361-5.6847-0.4129-7.9676-2.1821c-2.2818-1.7692-3.7379-4.3163-4.0994-7.1718 c-0.3621-2.8562,0.4123-5.6858,2.1809-7.9676s4.3157-3.7379,7.1718-4.0994c0.4596-0.0582,0.918-0.0871,1.3736-0.0871 c2.3781,0,4.6784,0.7842,6.594,2.2686c2.2812,1.7686,3.7379,4.3157,4.1,7.1713C26.4261,19.5573,22.2303,24.9709,16.3243,25.7194z"/></svg>`:`<svg xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 37.146 39.325"><path d="M13.308 2.882c6.582-0.834 12.616 3.843 13.45 10.425s-3.843 12.616-10.425 13.45 -12.616-3.843-13.45-10.425S6.725 3.716 13.308 2.882M12.958 0.119C4.839 1.148-0.909 8.563 0.119 16.682s8.444 13.867 16.563 12.839c8.119-1.028 13.867-8.444 12.839-16.563C28.492 4.839 21.077-0.909 12.958 0.119L12.958 0.119z" fill="${color}"/><path d="M35.929 39.314c-0.434 0.055-0.887-0.095-1.204-0.442l-11.032-12.096c-0.519-0.568-0.479-1.449 0.089-1.967 0.568-0.519 1.449-0.479 1.968 0.089l11.032 12.096c0.519 0.568 0.479 1.449-0.089 1.967C36.472 39.162 36.205 39.279 35.929 39.314z" fill="${color}"/></svg>`},referenceIcon:function(color){return`<svg width="100%" height="100%" viewBox="0 0 850 852" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" xmlns:serif="http://www.serif.com/"><path fill="${color}" d="M0,177.071c0,-37.967 30.826,-68.792 68.796,-68.792l172.839,-0c56.457,-0 85.776,29.115 106.993,50.331l369.956,369.936c20.193,20.192 23.193,29.689 23.193,52.304c0,22.615 -14.916,37.426 -32.54,45.008c-17.624,7.583 -96.744,39.955 -112.874,44.64c-16.131,4.684 -23.744,9.9 -29.014,24.116c-5.269,14.216 -42.556,105.3 -50.039,123.808c-7.483,18.507 -24.617,32.598 -45.919,32.598c-21.302,-0 -33.714,-8.741 -57.573,-32.598c-23.859,-23.858 -334.585,-332.625 -355.619,-355.6c-21.035,-22.976 -58.199,-47.549 -58.199,-119.034l-0,-166.717Zm194.267,70.08c-30.189,0 -54.699,24.509 -54.699,54.696c0,30.188 24.51,54.696 54.699,54.696c30.189,0 54.699,-24.508 54.699,-54.696c0,-30.187 -24.51,-54.696 -54.699,-54.696Zm563.307,247.011l-381.086,-381.066c-23.827,-23.825 -56.751,-56.521 -120.151,-56.521l-133.342,0c-7.889,0 -12.472,-5.315 -10.477,-12.554c0.526,-1.362 1.095,-2.702 1.704,-4.02c0.366,-0.647 0.648,-1.238 0.852,-1.778c11.265,-22.646 34.646,-38.223 61.637,-38.223l172.84,0c56.457,0 85.775,29.115 106.993,50.331l369.956,369.936c20.193,20.192 23.193,29.689 23.193,52.304c0,22.615 -14.917,37.426 -32.54,45.008c-4.76,2.048 -25.339,10.863 -25.407,10.892c-4.567,1.916 -9.281,2.256 -12.24,-3.812c-2.959,-6.068 -8.004,-16.57 -21.932,-30.497Z"/></svg>`},terminalIcon:function(color){return`<svg viewBox="0 0 4671 4167" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/"><path fill="${color}" d="M4670.29,414.15l-0,3338.37c-0,228.575 -186.28,414.15 -415.725,414.15l-3838.83,-0c-229.446,-0 -415.73,-185.575 -415.73,-414.15l0,-3338.37c0,-228.575 186.284,-414.15 415.73,-414.15l3838.83,-0c229.445,-0 415.725,185.575 415.725,414.15Zm-2677.79,1717.63l959.619,0c89.387,0 161.956,-74.73 161.956,-166.781c0,-92.045 -72.569,-166.776 -161.956,-166.776l-959.619,0c-89.387,0 -161.956,74.731 -161.956,166.776c-0,92.051 72.569,166.781 161.956,166.781Zm-1254.81,-1193.53l517.803,462.383l-514.54,435.524c-69.054,58.45 -79.036,163.635 -22.277,234.742c56.759,71.112 158.903,81.388 227.957,22.938l662.731,-560.953c36.85,-31.194 58.475,-77.524 59.1,-126.641c0.63,-49.118 -19.799,-96.023 -55.837,-128.203l-662.731,-591.799c-67.53,-60.303 -169.902,-52.802 -228.463,16.739c-58.562,69.546 -51.278,174.967 16.257,235.27Z"/></svg>`},figmaLogo:function(color){return`<svg width="100%" height="100%" viewBox="0 0 500 750" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/"><path fill="${color}" d="M117.321,234.642c-64.751,-0 -117.321,-52.57 -117.321,-117.321c0,-64.751 52.57,-117.321 117.321,-117.321l117.321,0l-0,234.642l-117.321,-0Zm-0,257.021c-64.751,0 -117.321,-52.569 -117.321,-117.32c0,-64.752 52.57,-117.321 117.321,-117.321l117.321,-0l-0,234.641l-117.321,0Zm117.321,140.428c-0,64.751 -52.57,117.321 -117.321,117.321c-64.751,-0 -117.321,-52.57 -117.321,-117.321c0,-64.751 52.57,-117.321 117.321,-117.321l117.321,0l-0,117.321Zm30.695,-397.449l-0,-234.642l117.32,0c64.752,0 117.321,52.57 117.321,117.321c0,64.751 -52.569,117.321 -117.321,117.321l-117.32,-0Zm117.32,22.38c64.752,-0 117.321,52.569 117.321,117.321c0,64.751 -52.569,117.32 -117.321,117.32c-64.751,0 -117.32,-52.569 -117.32,-117.32c-0,-64.752 52.569,-117.321 117.32,-117.321Z"/></svg>`},notionLogo:function(color){return`<svg width="100%" height="100%" viewBox="0 0 1357 1391" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" xmlns:serif="http://www.serif.com/"><path fill="${color}" d="M0,195.483c0,-99.871 68.808,-142.211 132.193,-147.436c63.385,-5.225 651.022,-41.557 747.867,-47.194c96.846,-5.638 125.276,17.782 156.549,37.775c31.274,19.992 194.684,120.887 251.347,156.855c56.663,35.968 68.994,84.849 68.994,148.955l-0,857.862c-0,94.722 -79.464,139.982 -130.027,143.69c-38.712,2.839 -548.274,28.849 -595.075,31.168c-46.802,2.319 -274.329,13.441 -314.402,13.441c-40.073,-0 -82.311,-19.671 -116.144,-62.985c-33.833,-43.313 -179.177,-227.611 -189.72,-242.884c-10.544,-15.273 -11.582,-26.267 -11.582,-55.528l0,-833.719Zm276.551,214.105l-0,847.006c-0,63.181 53.487,52.519 78.754,50.834c39.886,-2.661 850.036,-46.236 872.471,-47.773c5.582,-0.383 46.769,-3.204 46.769,-51.345l0,-841.036c0,-6.385 0,-58.107 -58.984,-54.604c-32.912,1.954 -851.419,42.174 -890.436,45.538c-48.574,4.188 -48.574,45.758 -48.574,51.38Zm171.086,161.165c4.761,-42.891 41.267,-63.746 76.943,-65.631c24.236,-1.28 83.343,-4.984 126.718,-6.884c39.745,-1.742 43.708,-2.161 57.172,17.407l262.487,381.498l0,-336.699c0,-15.438 -51.622,-16.489 -70.333,-25.37c-18.71,-8.88 -13.35,-16.306 6.483,-31.336c18.775,-14.229 46.274,-20.369 70.699,-20.369c17.369,-0 95.074,1.053 121.67,-2.433c26.595,-3.487 32.456,-13.487 39.332,-8.531c6.877,4.957 0,23.237 -18.967,43.24c-18.967,20.002 -51.657,24.175 -51.657,24.175l-0,543.67c-0,27.776 -8.485,41.712 -22.095,48.1c-13.611,6.387 -47.664,27.083 -77.724,27.083c-30.061,-0 -56.63,-21.692 -76.815,-52.376c-20.184,-30.685 -273.754,-424.612 -273.754,-424.612l-0,394.347c-0,18.444 41.492,22.831 65.572,30.265c24.079,7.433 18.724,14.323 -0,30.684c-20.011,17.486 -60.667,24.251 -80.915,24.251l-80.069,-0c-24.3,-0 -47,-0 -57.913,5.656c-10.914,5.656 -23.944,-0 -4.749,-29.907c19.194,-29.906 62.662,-34.25 62.662,-34.25l-0,-524.676l-74.747,-7.302Zm-316.089,-410.637c1.274,1.257 95.996,97.045 105.795,106.905c1.87,1.881 24.933,33.554 57.035,30.021c24.133,-2.655 815.739,-43.193 897.689,-47.653c1.886,-0.102 46.984,-2.556 7.481,-29.496c-5.689,-3.879 -187.918,-124.704 -198.506,-131.464c-26.329,-16.811 -57.644,-25.85 -89.666,-23.234c-32.554,2.658 -741.956,47.26 -769.134,50.535c-32.765,3.949 -26.645,28.65 -10.694,44.386Z"/></svg>`},folderIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 416.427 350.794"><path d="M173.206 29.54L133.756 4.781C128.779 1.657 123.022 0 117.145 0H23.61C10.57 0 0 10.57 0 23.61v303.92c0 12.849 10.416 23.265 23.265 23.265h373.314c10.962 0 19.848-8.886 19.848-19.848V55.293c0-11.583-9.389-20.972-20.972-20.972H189.817C183.94 34.321 178.183 32.664 173.206 29.54z" fill="${color}"/></svg>`},triangleIcon:function(color){return`<svg shape-rendering="geometricPrecision" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 425.197 373.954" xml:space="preserve"><path fill="${color}" d="M2.922,32.348l191.001,330.823c8.301,14.377,29.052,14.377,37.353,0l191-330.823C430.576,17.971,420.2,0,403.599,0H21.598 C4.997,0-5.379,17.971,2.922,32.348z"/></svg>`},toggleIcon:function(color){return`<svg viewBox="0 0 1559 1772" xmlns="http://www.w3.org/2000/svg"><path fill="${color}" d="M134.783,1759.48l1378.43,-795.837c59.904,-34.588 59.904,-121.05 -0.001,-155.638l-1378.43,-795.833c-59.904,-34.583 -134.783,8.65 -134.783,77.821l-0,1591.67c-0,69.171 74.879,112.404 134.783,77.816Z" /></svg>`},logoutIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 424.942 505.757"><path d="M278.583 326.277h19.269c2.611 0 4.728 2.117 4.728 4.728v108.305 16.073 7.924c0 2.611-2.117 4.728-4.728 4.728H178.201c-2.611 0-4.728-2.117-4.728-4.728v-19.269c0-2.611 2.117-4.728 4.728-4.728h90.926c2.611 0 4.728-2.117 4.728-4.728V331.005C273.855 328.393 275.972 326.277 278.583 326.277zM278.583 178.17h19.269c2.611 0 4.728-2.117 4.728-4.728V65.137 49.064v-7.924c0-2.611-2.117-4.728-4.728-4.728H178.201c-2.611 0-4.728 2.117-4.728 4.728v19.269c0 2.611 2.117 4.728 4.728 4.728h90.926c2.611 0 4.728 2.117 4.728 4.728v103.577C273.855 176.053 275.972 178.17 278.583 178.17zM422.434 247.537l-92.906-59.541c-1.99-1.276-4.604 0.154-4.604 2.518v15.979c0 1.17-0.949 2.119-2.119 2.119H178.921c-3.009 0-5.447 2.439-5.447 5.447v75.764c0 3.009 2.439 5.447 5.447 5.447h143.884c1.17 0 2.119 0.949 2.119 2.119v15.996c0 2.36 2.606 3.79 4.597 2.522l92.901-59.191C425.777 254.58 425.783 249.684 422.434 247.537zM149.64 24.761v454.666c0 18.688-18.941 31.415-36.243 24.353l-89.219-36.415C9.556 461.398 0 447.175 0 431.383V74.073C0 58.138 9.727 43.818 24.539 37.945l91.246-36.179C132.024-4.673 149.64 7.293 149.64 24.761zM122.286 250.815c0-8.442-6.844-15.286-15.286-15.286s-15.286 6.844-15.286 15.286c0 8.442 6.844 15.286 15.286 15.286S122.286 259.257 122.286 250.815z" fill="${color}"/></svg>`},increaseIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 34.853 34.853"><path d="M9.963 0c0.64 0 1.279 0.244 1.768 0.733l14.926 14.926c0.977 0.976 0.977 2.559 0 3.536L11.731 34.12c-0.977 0.977-2.559 0.977-3.536 0 -0.977-0.976-0.977-2.559 0-3.536l13.158-13.158L8.196 4.268c-0.977-0.977-0.977-2.559 0-3.536C8.684 0.244 9.324 0 9.963 0z" fill="${color}"/></svg>`},decreaseIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 34.853 34.853"><path d="M24.89 34.853c-0.64 0-1.279-0.244-1.768-0.733L8.196 19.194c-0.977-0.976-0.977-2.559 0-3.536L23.122 0.733c0.977-0.977 2.559-0.977 3.536 0 0.977 0.976 0.977 2.559 0 3.536l-13.158 13.158 13.158 13.158c0.977 0.977 0.977 2.559 0 3.536C26.169 34.609 25.529 34.853 24.89 34.853z" fill="${color}"/></svg>`},wingIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 140.316 226.772"><path d="M139.316 110.452l-8.145-10.556c0 0 0 0 0-0.001l-53.754-69.665 0 0L56.375 2.962C54.934 1.094 52.709 0 50.35 0h-7.215H28.485 1.886c-1.563 0-2.445 1.795-1.49 3.032l25.144 32.586c0.001 0.001 0.002 0.003 0.003 0.004l58.653 76.015c0.795 1.03 0.795 2.467 0 3.497l-41.894 54.294h0L0.396 223.739c-0.955 1.237-0.073 3.032 1.49 3.032h26.599 14.65 7.215c2.359 0 4.585-1.094 6.026-2.962l4.383-5.681c0 0 0 0 0 0l45.021-58.347v0l2.329-3.019 23.061-29.887c0.001-0.001 0.002-0.003 0.003-0.004l8.142-10.553C140.649 114.591 140.649 112.181 139.316 110.452z" fill="${color}"/></svg>`},smileDocuments:function(color){return`<svg viewBox="0 0 2481 2481" xmlns="http://www.w3.org/2000/svg"><path fill="${color}" d="M1408.93,2453.17c-0,14.991 -12.153,27.144 -27.144,27.144l-1108.95,-0c-150.582,-0 -272.835,-122.253 -272.835,-272.835l-0,-1934.64c-0,-150.582 122.253,-272.835 272.835,-272.835l1934.64,-0c150.582,-0 272.835,122.253 272.835,272.835l-0,1108.95c-0,14.991 -12.153,27.144 -27.144,27.144l-747.346,-0c-78.741,-0 -154.256,31.28 -209.934,86.958c-55.678,55.678 -86.958,131.193 -86.958,209.934l-0,747.346Zm-613.534,-1020.86l0.168,0.657c327.71,-47.471 588.422,-303.054 643.607,-628.217l-0.489,-0.146c1.16,-6.194 1.767,-12.581 1.767,-19.109c-0,-57.034 -46.305,-103.338 -103.338,-103.338c-49.317,-0 -90.611,34.62 -100.883,80.862l-0.244,0c-37.59,239.641 -228.044,428.85 -468.299,464.563c-2.645,0.27 -5.26,0.641 -7.842,1.108c-48.23,8.722 -84.86,50.961 -84.86,101.688c0,57.034 46.305,103.338 103.338,103.338c5.816,0 11.52,-0.481 17.075,-1.406Zm156.993,-1045.52c-80.874,-0 -146.533,65.659 -146.533,146.532c0,80.874 65.659,146.533 146.533,146.533c80.873,-0 146.532,-65.659 146.532,-146.533c0,-80.873 -65.659,-146.532 -146.532,-146.532Zm-420.235,376.521c-80.874,-0 -146.533,65.659 -146.533,146.532c0,80.874 65.659,146.533 146.533,146.533c80.873,-0 146.532,-65.659 146.532,-146.533c0,-80.873 -65.659,-146.532 -146.532,-146.532Zm1923.38,769.9c13.687,-0 24.782,11.095 24.782,24.782l-0,61.13c-0,57.954 -23.022,113.535 -64.002,154.515l-642.673,642.673c-40.98,40.98 -96.561,64.002 -154.515,64.002l-61.13,-0c-13.687,-0 -24.782,-11.095 -24.782,-24.782l-0,-741.236c-0,-48.026 19.078,-94.086 53.038,-128.046c33.96,-33.96 80.02,-53.038 128.046,-53.038l741.236,-0Z"/></svg>`},horizontalArrow:function(width,height,color=AbstractNode.colorExtended.blue,styleInjection=null){if(0===height)throw new Error("zero height ban");const y=6.721,x=width/height*y,calcul=num=>String(Math.round(1e3*num)/1e3),constValues=[3.095,1.655,3.626,.042];if(null==styleInjection)return`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${calcul(x)} ${calcul(y)}" xml:space="preserve"><path fill="${color}" d="M${calcul(x)},3.36c0-0.103-0.042-0.196-0.109-0.263c0,0,0-0.001-0.001-0.002L${calcul(x-constValues[0])},0.11c-0.146-0.146-0.385-0.146-0.531,0c-0.146,0.146-0.146,0.384,0,0.53l2.346,2.345H0.375C0.168,2.985,0,3.153,0,3.36s0.168,0.375,0.375,0.375h${calcul(x-constValues[1])}L${calcul(x-constValues[2])},6.08c-0.146,0.146-0.146,0.385,0,0.531c0.073,0.073,0.17,0.109,0.266,0.109s0.192-0.036,0.266-0.109l2.985-2.986c0,0,0-0.001,0.001-0.002C${calcul(x-constValues[3])},3.556,${calcul(x)},3.463,${calcul(x)},3.36z"/></svg>`;if("object"==typeof styleInjection){const{mediaEa}=AbstractNode;let thisEa,styleString;thisEa=mediaEa(),styleString="";for(let key in styleInjection)styleString+=key,styleString+=":","number"==typeof styleInjection[key]?styleString+=String(styleInjection[key])+thisEa+";":styleString+=String(styleInjection[key])+";";return`<svg version="1.1" style="${styleString}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${calcul(x)} ${calcul(y)}" xml:space="preserve"><path fill="${color}" d="M${calcul(x)},3.36c0-0.103-0.042-0.196-0.109-0.263c0,0,0-0.001-0.001-0.002L${calcul(x-constValues[0])},0.11c-0.146-0.146-0.385-0.146-0.531,0c-0.146,0.146-0.146,0.384,0,0.53l2.346,2.345H0.375C0.168,2.985,0,3.153,0,3.36s0.168,0.375,0.375,0.375h${calcul(x-constValues[1])}L${calcul(x-constValues[2])},6.08c-0.146,0.146-0.146,0.385,0,0.531c0.073,0.073,0.17,0.109,0.266,0.109s0.192-0.036,0.266-0.109l2.985-2.986c0,0,0-0.001,0.001-0.002C${calcul(x-constValues[3])},3.556,${calcul(x)},3.463,${calcul(x)},3.36z"/></svg>`}return`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${calcul(x)} ${calcul(y)}" xml:space="preserve"><path fill="${color}" d="M${calcul(x)},3.36c0-0.103-0.042-0.196-0.109-0.263c0,0,0-0.001-0.001-0.002L${calcul(x-constValues[0])},0.11c-0.146-0.146-0.385-0.146-0.531,0c-0.146,0.146-0.146,0.384,0,0.53l2.346,2.345H0.375C0.168,2.985,0,3.153,0,3.36s0.168,0.375,0.375,0.375h${calcul(x-constValues[1])}L${calcul(x-constValues[2])},6.08c-0.146,0.146-0.146,0.385,0,0.531c0.073,0.073,0.17,0.109,0.266,0.109s0.192-0.036,0.266-0.109l2.985-2.986c0,0,0-0.001,0.001-0.002C${calcul(x-constValues[3])},3.556,${calcul(x)},3.463,${calcul(x)},3.36z"/></svg>`},verticalArrow:function(width,height,color=AbstractNode.colorExtended.blue,styleInjection=null){if(0===width)throw new Error("zero width ban");const y=6.72,x=height/width*y,calcul=num=>String(Math.round(1e3*num)/1e3),constValues=[1.655,3.553,3.456,3.36,.042];if(null==styleInjection)return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${calcul(y)} ${calcul(x)}" xml:space="preserve"><path fill="${color}" d="M3.36,${calcul(x)}c0.103,0,0.196-0.042,0.263-0.109c0,0,0.001,0,0.002-0.001l2.985-2.985c0.146-0.146,0.146-0.385,0-0.531s-0.384-0.146-0.53,0l-2.345,2.346V0.375C3.735,0.168,3.567,0,3.36,0S2.985,0.168,2.985,0.375v${calcul(x-constValues[0])}l-2.345-2.346c-0.146-0.146-0.385-0.146-0.531,0C0.036,${calcul(x-constValues[1])},0,${calcul(x-constValues[2])},0,${calcul(x-constValues[3])}c0,0.096,0.036,0.192,0.109,0.266l2.986,2.985c0,0,0.001,0,0.002,0.001C3.164,${calcul(x-constValues[4])},3.257,${calcul(x)},3.36,${calcul(x)}z"/></svg>`;if("object"==typeof styleInjection){const{mediaEa}=AbstractNode;let thisEa,styleString;thisEa=mediaEa(),styleString="";for(let key in styleInjection)styleString+=key,styleString+=":","number"==typeof styleInjection[key]?styleString+=String(styleInjection[key])+thisEa+";":styleString+=String(styleInjection[key])+";";return`<svg style="${styleString}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${calcul(y)} ${calcul(x)}" xml:space="preserve"><path fill="${color}" d="M3.36,${calcul(x)}c0.103,0,0.196-0.042,0.263-0.109c0,0,0.001,0,0.002-0.001l2.985-2.985c0.146-0.146,0.146-0.385,0-0.531s-0.384-0.146-0.53,0l-2.345,2.346V0.375C3.735,0.168,3.567,0,3.36,0S2.985,0.168,2.985,0.375v${calcul(x-constValues[0])}l-2.345-2.346c-0.146-0.146-0.385-0.146-0.531,0C0.036,${calcul(x-constValues[1])},0,${calcul(x-constValues[2])},0,${calcul(x-constValues[3])}c0,0.096,0.036,0.192,0.109,0.266l2.986,2.985c0,0,0.001,0,0.002,0.001C3.164,${calcul(x-constValues[4])},3.257,${calcul(x)},3.36,${calcul(x)}z"/></svg>`}return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${calcul(y)} ${calcul(x)}" xml:space="preserve"><path fill="${color}" d="M3.36,${calcul(x)}c0.103,0,0.196-0.042,0.263-0.109c0,0,0.001,0,0.002-0.001l2.985-2.985c0.146-0.146,0.146-0.385,0-0.531s-0.384-0.146-0.53,0l-2.345,2.346V0.375C3.735,0.168,3.567,0,3.36,0S2.985,0.168,2.985,0.375v${calcul(x-constValues[0])}l-2.345-2.346c-0.146-0.146-0.385-0.146-0.531,0C0.036,${calcul(x-constValues[1])},0,${calcul(x-constValues[2])},0,${calcul(x-constValues[3])}c0,0.096,0.036,0.192,0.109,0.266l2.986,2.985c0,0,0.001,0,0.002,0.001C3.164,${calcul(x-constValues[4])},3.257,${calcul(x)},3.36,${calcul(x)}z"/></svg>`},dotDotDot:function(color,styleInjection=null){if(null==styleInjection)return`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 336.215 72.772"><path d="M72.772,36.386c0,20.095-16.29,36.386-36.386,36.386S0,56.481,0,36.386S16.29,0,36.386,0S72.772,16.29,72.772,36.386z M168.109,0c-20.095,0-36.386,16.29-36.386,36.386s16.29,36.386,36.386,36.386s36.386-16.29,36.386-36.386S188.205,0,168.109,0z M299.829,0c-20.095,0-36.386,16.29-36.386,36.386s16.29,36.386,36.386,36.386s36.386-16.29,36.386-36.386S319.924,0,299.829,0z" fill="${color}"/></svg>`;if("object"==typeof styleInjection){const{mediaEa}=AbstractNode;let thisEa,styleString;thisEa=mediaEa(),styleString="";for(let key in styleInjection)styleString+=key,styleString+=":","number"==typeof styleInjection[key]?styleString+=String(styleInjection[key])+thisEa+";":styleString+=String(styleInjection[key])+";";return`<svg style="${styleString}" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 336.215 72.772"><path d="M72.772,36.386c0,20.095-16.29,36.386-36.386,36.386S0,56.481,0,36.386S16.29,0,36.386,0S72.772,16.29,72.772,36.386z M168.109,0c-20.095,0-36.386,16.29-36.386,36.386s16.29,36.386,36.386,36.386s36.386-16.29,36.386-36.386S188.205,0,168.109,0z M299.829,0c-20.095,0-36.386,16.29-36.386,36.386s16.29,36.386,36.386,36.386s36.386-16.29,36.386-36.386S319.924,0,299.829,0z" fill="${color}"/></svg>`}return`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 336.215 72.772"><path d="M72.772,36.386c0,20.095-16.29,36.386-36.386,36.386S0,56.481,0,36.386S16.29,0,36.386,0S72.772,16.29,72.772,36.386z M168.109,0c-20.095,0-36.386,16.29-36.386,36.386s16.29,36.386,36.386,36.386s36.386-16.29,36.386-36.386S188.205,0,168.109,0z M299.829,0c-20.095,0-36.386,16.29-36.386,36.386s16.29,36.386,36.386,36.386s36.386-16.29,36.386-36.386S319.924,0,299.829,0z" fill="${color}"/></svg>`},squareArrow:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 153.1014 153.1014" xml:space="preserve"><path fill="${color}" d="M102.0676,0H51.0338C22.9652,0,0,22.9652,0,51.0338v51.0338c0,28.0686,22.9652,51.0338,51.0338,51.0338h51.0338 c28.0686,0,51.0338-22.9652,51.0338-51.0338V51.0338C153.1014,22.9652,130.1362,0,102.0676,0z M122.0687,77.8907 c-0.2417,0.5856-0.5918,1.1126-1.0329,1.5524l-35.9504,35.9504c-0.9288,0.9288-2.1455,1.393-3.3622,1.393 c-1.2167,0-2.4333-0.4641-3.3622-1.393c-1.8571-1.8577-1.8571-4.8667,0-6.7243l26.1349-26.1349 c0.6292-0.6286,0.1838-1.7038-0.7058-1.7038H34.7817c-2.6283,0-4.7551-2.1268-4.7551-4.7551c0-2.6283,2.1268-4.7551,4.7551-4.7551 h69.0084c0.8896,0,1.335-1.0752,0.7058-1.7044L78.361,43.4815c-1.8571-1.8577-1.8571-4.8666,0-6.7243 c1.8577-1.8577,4.8667-1.8577,6.7243,0l35.9504,35.9504c0.4411,0.4398,0.7912,0.9669,1.0329,1.5518 C122.5496,75.4219,122.5496,76.7289,122.0687,77.8907z"/></svg>`},loginIcon:function(color){return`<svg width="100%" height="100%" viewBox="0 0 512 647" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve"><path fill="${color}" d="M0,85.015c0,-16.287 13.186,-30.34 31.587,-33.664l282.117,-50.96c6.315,-1.141 12.888,0.244 17.893,3.77c5.006,3.527 7.912,8.819 7.912,14.409l-0,608.923c-0,5.59 -2.906,10.882 -7.912,14.409c-5.005,3.526 -11.578,4.911 -17.893,3.77l-282.117,-50.96c-18.401,-3.324 -31.587,-17.377 -31.587,-33.664l0,-476.033Zm249.282,201.073c-17.783,0 -32.221,16.554 -32.221,36.943c-0,20.39 14.438,36.944 32.221,36.944c17.783,-0 32.22,-16.554 32.22,-36.944c0,-20.389 -14.437,-36.943 -32.22,-36.943Zm230.47,-229.031c8.398,-0 16.452,2.89 22.391,8.036c5.938,5.145 9.274,12.124 9.274,19.401l0,477.075c0,7.277 -3.336,14.256 -9.274,19.401c-5.939,5.146 -13.993,8.036 -22.391,8.036l-110.294,0c-3.177,0 -5.752,-2.231 -5.752,-4.983l-0,-521.983c-0,-2.752 2.575,-4.983 5.752,-4.983l110.294,-0Z"/></svg>`},bentArrow:function(width,height,zMultiple=1,color=AbstractNode.colorExtended.blue){if(0===height)throw new Error("zero height ban");const y=6.721*zMultiple,x=width/height*y,calcul=num=>String(Math.round(1e3*num)/1e3),constXValues=[.029,4.156,.01,.029],constYValues=[3.506,5.862,3.411,3.461,3.506];return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${calcul(x)} ${calcul(y)}" xml:space="preserve"><path d="M${calcul(x-constXValues[0])},${calcul(y-constYValues[0])}c-0.019-0.045-0.046-0.086-0.081-0.121l-2.983-2.984c-0.146-0.146-0.384-0.146-0.53,0s-0.146,0.384,0,0.53l2.344,2.344H2.876c-1.172,0-2.126-0.954-2.126-2.126V0H0v${calcul(y-constYValues[1])}c0,1.586,1.29,2.876,2.876,2.876h${calcul(x-constXValues[1])}l-2.344,2.343c-0.146,0.146-0.146,0.385,0,0.531c0.073,0.073,0.169,0.109,0.265,0.109s0.192-0.036,0.265-0.109l2.984-2.984c0.034-0.034,0.062-0.075,0.081-0.121c0.019-0.045,0.029-0.094,0.029-0.144C${calcul(x)},${calcul(y-constYValues[2])},${calcul(x-constXValues[2])},${calcul(y-constYValues[3])},${calcul(x-constXValues[3])},${calcul(y-constYValues[4])}z"/></svg>`},processArrow:function(width,height,color=AbstractNode.colorExtended.blue){if(0===height)throw new Error("zero height ban");const calcul=num=>String(Math.round(1e3*num)/1e3);let standard,x,y,w,z,standardWidth;return standard=200,standardWidth=200*(width/height),x=3,y=4,w=10,z=14,`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 ${calcul(standardWidth)} ${calcul(200)}" xml:space="preserve"><path fill="${color}" d="M ${calcul(standardWidth-75)}, ${calcul(200)}H 0l ${calcul(69.75)}, -${calcul(93)}c ${calcul(3)}, -${calcul(4)}, ${calcul(3)}, -${calcul(10)}, 0, -${calcul(z)}L 0,0h ${calcul(standardWidth-75)}l ${calcul(69.75)}, ${calcul(93)}c ${calcul(3)}, ${calcul(4)}, ${calcul(3)}, ${calcul(10)}, 0, ${calcul(z)}L ${calcul(standardWidth-75)}, ${calcul(200)}z" /></svg>`},extractArrow:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 314.679 388.43"><path d="M310.776 204.421h-67.473c-0.985 0-1.783 0.799-1.783 1.783v173.779c0 4.666-3.782 8.447-8.447 8.447H81.607c-4.665 0-8.447-3.782-8.447-8.447V206.204c0-0.985-0.799-1.783-1.783-1.783H3.903c-3.232 0-5.059-3.709-3.089-6.271L151.189 3.029c3.106-4.038 9.196-4.038 12.301 0l150.374 195.12C315.835 200.711 314.008 204.421 310.776 204.421z" fill="${color}"/></svg>`},returnArrow:function(direction,color){return"right"===direction?`<svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" viewBox="0 0 425.197 425.197"><path style="fill:${color};" d="M32.348 422.275l330.823-191.001c14.377-8.301 14.377-29.052 0-37.353L32.348 2.921C17.971-5.379 0 4.997 0 21.598v382.001C0 420.2 17.971 430.576 32.348 422.275z"/></svg>`:`<svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" viewBox="0 0 425.197 425.197"><path style="fill:${color}" d="M392.849 2.921L62.026 193.922c-14.377 8.301-14.377 29.052 0 37.353l330.823 191.001c14.377 8.301 32.348-2.075 32.348-18.676V21.598C425.197 4.997 407.226-5.379 392.849 2.921z"/></svg>`},newWindowIcon:function(color){return`<svg width="100%" height="100%" viewBox="0 0 67 67" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/"><path fill="${color}" d="M55.339,6.636l-12,0c-1.832,0 -3.318,-1.487 -3.318,-3.318c-0,-1.831 1.486,-3.318 3.318,-3.318l20.01,0c0.893,0 1.729,0.356 2.346,0.972c0.616,0.616 0.971,1.452 0.971,2.346l0.001,20.01c-0,1.831 -1.487,3.318 -3.318,3.318c-1.832,0 -3.318,-1.487 -3.318,-3.318l-0,-12l-24.351,24.352c-1.295,1.294 -3.398,1.294 -4.693,-0c-1.295,-1.295 -1.295,-3.398 0,-4.693l24.352,-24.351Zm4.692,30.032c-0,-1.831 1.486,-3.318 3.318,-3.318c1.831,0 3.318,1.487 3.318,3.318l-0,20.011c-0,5.516 -4.472,9.988 -9.988,9.988l-46.691,-0c-5.516,-0 -9.988,-4.472 -9.988,-9.988l0,-46.691c0,-5.516 4.472,-9.988 9.988,-9.988l20.01,0c1.831,0 3.318,1.487 3.318,3.318c0,1.831 -1.487,3.318 -3.318,3.318l-20.01,0c-1.851,0 -3.352,1.501 -3.352,3.352l0,46.691c0,1.851 1.501,3.352 3.352,3.352l46.691,-0c1.851,-0 3.352,-1.501 3.352,-3.352l-0,-20.011Z"/></svg>`},resetIcon:function(color){return`<svg width="100%" height="100%" viewBox="0 0 242 280" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/"><path fill="${color}" d="M120.749,37.67c66.642,-0 120.748,54.105 120.748,120.748c0,66.643 -54.106,120.749 -120.748,120.749c-66.643,-0 -120.749,-54.106 -120.749,-120.749c0,-7.515 6.101,-13.616 13.616,-13.616c7.516,-0 13.617,6.101 13.617,13.616c-0,51.613 41.903,93.516 93.516,93.516c51.612,-0 93.515,-41.903 93.515,-93.516c0,-51.613 -41.903,-93.516 -93.515,-93.516l-41.41,0l14.213,14.213c5.314,5.314 5.314,13.943 -0,19.257c-5.314,5.314 -13.943,5.314 -19.257,-0l-37.456,-37.459c-2.562,-2.561 -3.989,-6.006 -3.989,-9.627c-0,-3.621 1.427,-7.066 3.989,-9.627l37.456,-37.459c5.314,-5.314 13.943,-5.314 19.257,0c5.314,5.314 5.314,13.943 -0,19.257l-14.213,14.213l41.41,-0Z"/></svg>`},goalFlag:function(color0,color1){return`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 476.3076 595.2756" style="enable-background:new 0 0 476.3076 595.2756;"><path fill="${color0}" d="M20.1645,32.0342C9.028,32.0342,0,39.3074,0,48.2793v530.7512c0,8.9719,9.028,16.2451,20.1645,16.2451 s20.1645-7.2732,20.1645-16.2451V48.2793C40.329,39.3074,31.301,32.0342,20.1645,32.0342z"/><path fill="${color1}" d="M54.9746,306.6144c0,9.8952,11.6965,15.0119,19.0547,8.3959c5.2399-4.7114,11.9062-9.3995,20.3824-13.6187 c36.4869-18.1623,75.4347-15.2138,124.3226,8.9199c48.8879,24.1337,105.281,63.347,168.4556,63.347 c46.7735,0,73.852-22.4899,85.61-40.9722c5.2438-8.2426,3.6788-19.0876-3.7186-25.4686 c-16.96-14.6298-50.3036-46.8942-70.6179-89.6277c-2.1025-4.4228-2.139-9.5653-0.142-14.0367 c2.8334-6.3439,8.3161-16.8622,18.6418-32.0683c16.5381-24.3547,46.4747-65.6442,58.9731-113.7058 c1.4158-5.4444-4.9409-9.554-9.2845-5.9791c-15.9952,13.1644-45.3319,32.3686-80.36,32.3686 c-53.2946,0-101.6407-33.1875-130.9226-47.7687S188.9857,0,146.7683,0S54.9746,20.0516,54.9746,65.2618V306.6144z"/></svg>`},completeCircle:function(color0,color1){return`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 48.561 48.5605" xml:space="preserve"><path fill="${color0}" d="M22.564,33.6807c-0.5347,0-1.0483-0.2144-1.4253-0.5967l-8.2368-8.3662 c-0.7749-0.7871-0.7651-2.0537,0.022-2.8286s2.0537-0.7656,2.8286,0.022l6.6748,6.7798L32.687,16.1655 c0.6992-0.855,1.9609-0.9775,2.8145-0.2803c0.8545,0.7002,0.9795,1.96,0.2793,2.8145l-11.6694,14.248 c-0.3599,0.4395-0.8892,0.7051-1.4561,0.731C22.625,33.6802,22.5942,33.6807,22.564,33.6807z"/><path fill="${color1}" style="opacity:0.7;"  d="M24.2803,48.5605C10.8921,48.5605,0,37.6685,0,24.2803S10.8921,0,24.2803,0S48.561,10.8921,48.561,24.2803 S37.6685,48.5605,24.2803,48.5605z M24.2803,4C13.0977,4,4,13.0977,4,24.2803s9.0977,20.2803,20.2803,20.2803 c11.1831,0,20.2808-9.0977,20.2808-20.2803S35.4634,4,24.2803,4z"/></svg>`},informationCircle:function(color0,color1){return`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 48.561 48.5605" xml:space="preserve"><path fill="${color0}" d="M24.2803,48.5605C10.8921,48.5605,0,37.6685,0,24.2803S10.8921,0,24.2803,0S48.561,10.8921,48.561,24.2803 S37.6685,48.5605,24.2803,48.5605z M24.2803,4C13.0977,4,4,13.0977,4,24.2803s9.0977,20.2803,20.2803,20.2803 c11.1831,0,20.2808-9.0977,20.2808-20.2803S35.4634,4,24.2803,4z"/><path fill="${color1}" d="M24.2859,29.349h-0.0109c-1.4669,0-2.6755-1.1513-2.7468-2.6165l-0.6076-12.5 c-0.0763-1.5694,1.1755-2.8835,2.7468-2.8835h1.2262c1.5712,0,2.823,1.3142,2.7468,2.8835l-0.6076,12.5 C26.9615,28.1977,25.7528,29.349,24.2859,29.349z M24.2805,31.7115L24.2805,31.7115c-1.5188,0-2.75,1.2312-2.75,2.75v0 c0,1.5188,1.2312,2.75,2.75,2.75h0c1.5188,0,2.75-1.2312,2.75-2.75v0C27.0305,32.9427,25.7993,31.7115,24.2805,31.7115z"/></svg>`},commentTriangle:function(direction,color){if("string"!=typeof direction||"string"!=typeof color)throw new Error("direction => [ verticalRight, verticalLeft, horizontalRight, horizontalLeft ]");return"horizontalRight"===direction?`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 20 10" xml:space="preserve"><path fill="${color}" d="M 0, 0L 20, 0l -10, 10h -10L 0, 0z" /></svg>`:"horizontalLeft"===direction?`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 20 10" xml:space="preserve"><path fill="${color}" d="M 20, 0L 0, 0l 10, 10h 10L 20, 0z" /></svg>`:"verticalRight"===direction?`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 10 20" xml:space="preserve"><path fill="${color}" d="M 10, 0L 0, 0L 0, 10l 10, 10L 10, 0z"/></svg>`:`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 10 20" xml:space="preserve"><path fill="${color}" d="M 10, 0L 0, 0L 0, 20l 10, -10L 10, 0z"/></svg>`},generalTriangle:function(color){return`<svg shape-rendering="geometricPrecision" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 425.197 373.954" xml:space="preserve"><path fill="${color}" d="M2.922,32.348l191.001,330.823c8.301,14.377,29.052,14.377,37.353,0l191-330.823C430.576,17.971,420.2,0,403.599,0H21.598 C4.997,0-5.379,17.971,2.922,32.348z"/></svg>`},buttonArrow:function(direction,color){return"right"===direction?`<svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" viewBox="0 0 425.197 425.197"><path style="fill:${color};" d="M32.348 422.275l330.823-191.001c14.377-8.301 14.377-29.052 0-37.353L32.348 2.921C17.971-5.379 0 4.997 0 21.598v382.001C0 420.2 17.971 430.576 32.348 422.275z"/></svg>`:`<svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" viewBox="0 0 425.197 425.197"><path style="fill:${color}" d="M392.849 2.921L62.026 193.922c-14.377 8.301-14.377 29.052 0 37.353l330.823 191.001c14.377 8.301 32.348-2.075 32.348-18.676V21.598C425.197 4.997 407.226-5.379 392.849 2.921z"/></svg>`},buttonLineArrow:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 21.6338 45.4406" xml:space="preserve"><path fill="${color}" d="M2.4985,45.4406c-0.5367,0-1.0761-0.1719-1.5305-0.5243c-1.1181-0.8671-1.1947-2.5965-0.2958-3.6892l14.463-17.5818 c0.4423-0.5376,0.4423-1.3131,0-1.8507L0.6588,4.1969c-0.8303-1.0094-0.8607-2.5266,0.061-3.4533 c1.0606-1.0664,2.7796-0.9641,3.7108,0.1678l16.6338,20.2202c0.7592,0.9228,0.7592,2.2539,0,3.1767L4.4306,44.529 C3.9364,45.1296,3.2201,45.4406,2.4985,45.4406z"/></svg>`},titleIcon:function(color){return`<svg width="100%" height="100%" viewBox="0 0 750 751" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/"><path fill="${color}" d="M413.515,380.695l-360.162,360.161c-12.196,12.196 -31.999,12.196 -44.194,0c-12.196,-12.195 -12.196,-31.998 -0,-44.194l117.134,-117.134l0,-146.753c0,-38.533 2.048,-51.501 22.731,-72.184l171.354,-171.354c6.795,-6.795 13.7,-5.09 16.678,6.796c2.979,11.885 23.722,72.836 27.46,84.315c3.738,11.478 14.245,11.729 18.742,-0c4.497,-11.73 80.093,-194.45 84.663,-205.547c4.571,-11.097 9.823,-14.861 21.456,-20.801c11.633,-5.939 92.948,-54 183.504,-54c61.636,0 77.119,43.834 77.119,74.801c0,67.485 -23.952,188.667 -135.484,300.199l-218.702,218.702c-25.72,25.72 -36.211,30.868 -65.376,30.868l-96.757,-0c-8.488,-0 -13.665,-4.657 -5.142,-13.179l201.893,-201.894c9.725,-9.724 16.038,-20.65 5.777,-30.235c-7.197,-6.722 -15.854,-3.411 -22.694,1.433Z"/></svg>`},profileIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 455 455"><path d="M227.5 0C101.855 0 0 101.855 0 227.5S101.855 455 227.5 455 455 353.145 455 227.5 353.145 0 227.5 0zM227.5 85.86c36.175 0 65.5 28.716 65.5 64.14 0 35.423-29.325 64.14-65.5 64.14 -36.175 0-65.5-28.716-65.5-64.14C162 114.577 191.325 85.86 227.5 85.86zM227.5 370c-63.789 0-115.5-19.252-115.5-43 0-34.357 1.24-80.277 57.093-117.897 1.78-1.199 4.149-1.065 5.759 0.353 6.299 5.551 24.124 19.215 52.648 19.215 28.504 0 46.345-13.669 52.649-19.218 1.61-1.417 3.978-1.55 5.756-0.352C341.76 246.722 343 292.643 343 327 343 350.748 291.289 370 227.5 370z" fill="${color}"/></svg>`},profileLogo:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 369.906 455"><path d="M369.906 386.143c0 38.029-82.806 68.857-184.953 68.857S0 424.172 0 386.143c0-55.017 1.985-128.55 91.425-188.791 2.85-1.919 6.644-1.706 9.221 0.566 10.086 8.889 38.63 30.77 84.307 30.77 45.644 0 74.214-21.889 84.308-30.775 2.578-2.269 6.37-2.481 9.218-0.563C367.921 257.591 369.906 331.126 369.906 386.143zM184.953 205.417c57.928 0 104.887-45.984 104.887-102.709C289.84 45.984 242.881 0 184.953 0 127.026 0 80.066 45.984 80.066 102.709 80.066 159.433 127.026 205.417 184.953 205.417z" fill="${color}"/></svg>`},fullscreenIcon:function(color){return`<svg width="100%" height="100%" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/"><path fill="${color}" d="M100,9.362c-0.023,-5.127 -4.235,-9.339 -9.362,-9.362l-24.383,0c-2.918,0 -5.319,2.401 -5.319,5.319c0,2.918 2.401,5.319 5.319,5.319l22.043,0c0.583,0 1.064,0.481 1.064,1.064l-0,13.915c-0,2.918 2.401,5.319 5.319,5.319c2.918,0 5.319,-2.401 5.319,-5.319l-0,-16.255Z"/><path fill="${color}" d="M0,25.617c0,2.918 2.401,5.319 5.319,5.319c2.918,0 5.319,-2.401 5.319,-5.319l0,-13.915c0,-0.583 0.481,-1.064 1.064,-1.064l22.043,0c2.918,0 5.319,-2.401 5.319,-5.319c-0,-2.918 -2.401,-5.319 -5.319,-5.319l-24.383,0c-5.127,0.023 -9.339,4.235 -9.362,9.362l0,16.255Z"/><path fill="${color}" d="M100,90.596l-0,-16.213c-0,-2.918 -2.401,-5.319 -5.319,-5.319c-2.918,-0 -5.319,2.401 -5.319,5.319l-0,13.915c-0,0.583 -0.481,1.064 -1.064,1.064l-22.043,-0c-2.918,-0 -5.319,2.401 -5.319,5.319c0,2.918 2.401,5.319 5.319,5.319l24.383,-0c5.143,-0.023 9.362,-4.261 9.362,-9.404Z"/><path fill="${color}" d="M0,90.596c-0,5.143 4.219,9.381 9.362,9.404l24.383,0c2.918,0 5.319,-2.401 5.319,-5.319c-0,-2.918 -2.401,-5.319 -5.319,-5.319l-22.043,-0c-0.583,-0 -1.064,-0.481 -1.064,-1.064l0,-13.915c0,-2.918 -2.401,-5.319 -5.319,-5.319c-2.918,-0 -5.319,2.401 -5.319,5.319l0,16.213Z"/><path fill="${color}" d="M29.66,33.574l40.638,0c-0,0 8.298,0 8.298,8.298l-0,16.298c-0,0 -0,8.298 -8.298,8.298l-40.638,0c-0,0 -8.298,0 -8.298,-8.298l-0,-16.298c-0,0 -0,-8.298 8.298,-8.298"/></svg>`},shareIcon:function(color){return`<svg width="100%" height="100%" viewBox="0 0 256 285" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/"><path d="M241.95,236.766c0.004,36.421 -39.423,59.191 -70.964,40.986c-19.863,-11.465 -28.643,-35.522 -20.839,-57.085l-69.655,-44.751c-26.001,25.506 -69.86,13.299 -78.948,-21.968c-9.087,-35.271 23.418,-67.153 58.505,-57.388c7.702,2.144 14.735,6.206 20.443,11.806l69.655,-44.686c-12.484,-34.308 16.853,-69.272 52.811,-62.929c35.957,6.342 51.566,49.23 28.097,77.199c-17.761,21.163 -49.771,22.731 -69.51,3.406l-69.656,44.75c3.764,10.405 3.764,21.798 0,32.202l69.656,44.751c26.03,-25.476 69.872,-13.222 78.921,22.058c0.976,3.806 1.475,7.723 1.484,11.649Z" fill="${color}"/></svg>`},plusIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8.388 8.388"><path d="M4.194 0C1.878 0 0 1.878 0 4.194s1.878 4.194 4.194 4.194 4.194-1.878 4.194-4.194S6.51 0 4.194 0zM6.469 4.606H4.606v1.863c0 0.228-0.185 0.412-0.412 0.412 -0.228 0-0.412-0.185-0.412-0.412V4.606H1.918c-0.228 0-0.412-0.185-0.412-0.412 0-0.228 0.185-0.412 0.412-0.412h1.863V1.918c0-0.228 0.185-0.412 0.412-0.412 0.228 0 0.412 0.185 0.412 0.412v1.863h1.863c0.228 0 0.412 0.185 0.412 0.412C6.881 4.421 6.697 4.606 6.469 4.606z" fill="${color}"/></svg>`},downloadArrow:function(color,longMode=!1){return longMode?`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 41.684 72.772"><path fill="${color}" d="M41.684,70.169c0,1.437-1.166,2.603-2.603,2.603H2.603C1.166,72.772,0,71.606,0,70.169 c0-1.437,1.166-2.603,2.603-2.603H39.08C40.518,67.565,41.684,68.731,41.684,70.169z M19.001,56.57 c0.508,0.508,1.173,0.759,1.84,0.759c0.668,0,1.332-0.251,1.84-0.759l18.239-18.235c1.017-1.017,1.017-2.671,0-3.688 c-1.017-1.017-2.664-1.017-3.681,0L23.445,48.442V2.603C23.445,1.166,22.279,0,20.842,0c-1.437,0-2.603,1.166-2.603,2.603v45.839 L4.444,34.647c-1.017-1.017-2.664-1.003-3.681,0c-1.017,1.017-1.017,2.671,0,3.688L19.001,56.57z"/></svg>`:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 34.853 30.842"><path fill="${color}" d="M16.366 25.637c0.281 0.281 0.663 0.439 1.061 0.439s0.78-0.158 1.061-0.439L25.75 18.375c0.586-0.586 0.586-1.535 0-2.121s-1.535-0.586-2.121 0l-4.703 4.703V1.5c0-0.829-0.671-1.5-1.5-1.5s-1.5 0.671-1.5 1.5v19.456l-4.702-4.702c-0.586-0.586-1.535-0.586-2.121 0s-0.586 1.535 0 2.121L16.366 25.637z"/><path d="M25.45 27.83H9.403c-0.829 0-1.5 0.672-1.5 1.5s0.671 1.5 1.5 1.5h16.047c0.828 0 1.5-0.672 1.5-1.5S26.278 27.83 25.45 27.83z" fill="${color}"/></svg>`},entireArrow:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1078.5691 1080" xml:space="preserve"><path fill="${color}" d="M243.8123,128.607c-1.7437-1.7437-1.7437-4.5707,0-6.3143L358.483,7.6221 C361.2958,4.8093,359.3037,0,355.3258,0H51.5803C23.0933,0,0,23.0933,0,51.5803v303.7455c0,3.9778,4.8094,5.9699,7.6221,3.1572 L121.94,244.1651c1.7437-1.7437,4.5707-1.7437,6.3143,0l178.5876,178.5877c10.9222,10.9222,28.6306,10.9222,39.5528,0 L422.4,346.7475c10.9222-10.9222,10.9222-28.6306,0-39.5528L243.8123,128.607z"/><path fill="${color}" d="M1026.9888,0H723.2432c-3.9778,0-5.9699,4.8093-3.1572,7.6221l114.6707,114.6706 c1.7437,1.7437,1.7437,4.5707,0,6.3143L656.1691,307.1947c-10.9222,10.9222-10.9222,28.6306,0,39.5528l76.0052,76.0052 c10.9222,10.9222,28.6306,10.9222,39.5528,0l178.5876-178.5877c1.7437-1.7437,4.5707-1.7437,6.3144,0l114.3178,114.3179 c2.8129,2.8127,7.6222,0.8206,7.6222-3.1572V51.5803C1078.5691,23.0933,1055.4758,0,1026.9888,0z"/><path fill="${color}" d="M346.3948,657.2473c-10.9222-10.9222-28.6306-10.9222-39.5528,0L128.2544,835.835 c-1.7437,1.7437-4.5707,1.7437-6.3143,0L7.6221,721.517C4.8094,718.7043,0,720.6964,0,724.6742v303.7455 C0,1056.9067,23.0933,1080,51.5803,1080h303.7455c3.9778,0,5.9699-4.8093,3.1572-7.6221L243.8123,957.7073 c-1.7437-1.7437-1.7437-4.5707,0-6.3143L422.4,772.8054c10.9222-10.9222,10.9222-28.6306,0-39.5529L346.3948,657.2473z"/><path fill="${color}" d="M1070.9469,721.517L956.6291,835.835c-1.7437,1.7437-4.5707,1.7437-6.3144,0L771.7271,657.2473 c-10.9222-10.9222-28.6306-10.9222-39.5528,0l-76.0052,76.0052c-10.9222,10.9222-10.9222,28.6306,0,39.5529l178.5876,178.5876 c1.7437,1.7437,1.7437,4.5707,0,6.3143l-114.6707,114.6707c-2.8127,2.8127-0.8207,7.6221,3.1572,7.6221h303.7455 c28.4871,0,51.5803-23.0933,51.5803-51.5803V724.6742C1078.5691,720.6964,1073.7598,718.7043,1070.9469,721.517z"/></svg>`},plusCircleIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 34.853 34.853"><path fill="${color}" d="M17.427,0.001c-9.624,0-17.425,7.801-17.425,17.425s7.801,17.425,17.425,17.425s17.425-7.801,17.425-17.425 S27.05,0.001,17.427,0.001z M25.821,19.341H19.34v6.48c0,1.056-0.858,1.914-1.914,1.914c-1.055,0-1.914-0.858-1.914-1.914V19.34 H9.031c-1.055,0-1.914-0.859-1.914-1.914s0.858-1.914,1.914-1.914h6.482V9.031c0-1.056,0.858-1.914,1.914-1.914 c1.056,0,1.914,0.858,1.914,1.914v6.482h6.483c0.512,0,0.992,0.199,1.354,0.561c0.36,0.361,0.56,0.842,0.559,1.353 C27.735,18.483,26.876,19.341,25.821,19.341z"/></svg>`},minusCircleIcon:function(color){return`<svg width="100%" height="100%" viewBox="0 0 146 146" xmlns="http://www.w3.org/2000/svg"><path fill="${color}" d="M72.613,0.004c-40.101,0 -72.605,32.504 -72.605,72.604c0,40.1 32.505,72.605 72.605,72.605c40.1,-0.001 72.604,-32.505 72.604,-72.605c-0,-40.1 -32.509,-72.604 -72.604,-72.604Zm34.975,80.583l-69.959,-0.004c-4.396,0 -7.975,-3.579 -7.975,-7.975c0,-4.396 3.575,-7.975 7.975,-7.975l69.971,0.004c2.133,0 4.133,0.83 5.642,2.338c1.5,1.504 2.333,3.508 2.329,5.637c-0.008,4.4 -3.588,7.975 -7.983,7.975Z" /></svg>`},settingIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 512.9863 526.2865" xml:space="preserve"><path fill="${color}" d="M103.543,52.1175c2.081,0.9305,4.3185,1.6158,6.2185,2.8297c17.124,10.9406,34.2023,21.953,51.2494,33.0131 c1.6664,1.0811,2.9053,1.2133,4.7211,0.2065c11.0291-6.1159,22.6236-10.9538,34.662-14.6977 c1.6555-0.5149,2.4143-1.281,2.7901-2.9917c4.5563-20.7406,9.2001-41.4619,13.8099-62.1907 c1.1024-4.9572,4.8512-8.2334,9.9073-8.247c19.748-0.053,39.4964-0.0545,59.2445,0.0058c5.0661,0.0155,8.7577,3.2817,9.8683,8.2807 c4.6228,20.8093,9.233,41.6216,13.9677,62.4055c0.2314,1.0159,1.442,2.2511,2.4568,2.5788 c12.24,3.9524,24.0614,8.8645,35.3101,15.1064c1.4818,0.8222,2.5106,0.6443,3.8484-0.2219 c17.0588-11.0438,34.1554-22.0292,51.2303-33.0483c6.0642-3.9135,10.3034-3.4893,15.3405,1.6715 c13.2652,13.5911,26.5221,27.1903,39.7736,40.7948c4.4557,4.5745,4.9806,9.3125,1.6769,14.7055 c-10.874,17.7511-21.7367,35.5092-32.6405,53.2419c-0.8248,1.3414-0.9726,2.4349-0.1998,3.9018 c6.0728,11.5275,10.9155,23.5638,14.553,36.0747c0.501,1.7231,1.4024,2.5582,3.179,2.9635 c14.2887,3.2594,28.5578,6.6046,42.8278,9.9457c5.9151,1.3849,11.8234,2.7998,17.7239,4.2455 c4.7671,1.168,7.884,5.0094,7.8939,9.9468c0.0405,20.3314,0.0408,40.663,0.0024,60.9944c-0.0095,5.0196-3.1241,8.8686-8.114,10.0508 c-13.7744,3.2636-27.5671,6.45-41.3513,9.6721c-6.5674,1.5352-13.1452,3.0297-19.6815,4.688 c-0.8476,0.2151-1.8889,1.1774-2.14,2.0058c-3.9005,12.8683-8.8825,25.2838-15.0081,37.2585 c-0.4511,0.8819-0.0374,2.5909,0.5531,3.5639c10.5851,17.4401,21.2589,34.8264,31.9152,52.2232 c4.0132,6.5516,3.5458,10.7183-1.8926,16.2983c-13.1378,13.4796-26.2849,26.9502-39.4359,40.4169 c-4.5985,4.7088-8.9868,5.1776-14.5333,1.602c-17.1493-11.0553-34.3102-22.0927-51.4333-33.1884 c-1.5034-0.9742-2.6964-1.1354-4.3275-0.2313c-11.0324,6.1152-22.6006,11.006-34.6502,14.7319 c-1.7785,0.5499-2.6782,1.3756-3.1029,3.3228c-4.5259,20.7477-9.1708,41.4695-13.796,62.1956 c-1.0436,4.6766-4.7787,7.9647-9.5983,7.9839c-19.9145,0.0796-39.8297,0.0811-59.7442-0.0044 c-4.911-0.0211-8.5311-3.3644-9.6207-8.2614c-4.6122-20.7284-9.2647-41.4478-13.804-62.192 c-0.3872-1.7694-1.2394-2.4904-2.8185-2.9748c-12.1413-3.7241-23.775-8.6707-34.8874-14.8111 c-1.6486-0.911-2.8399-0.7009-4.3265,0.2607c-17.2003,11.1268-34.4318,22.2053-51.6598,33.2891 c-5.2878,3.402-9.778,2.9194-14.141-1.5487c-13.2681-13.5875-26.5309-27.1802-39.7766-40.7895 c-5.2276-5.371-5.634-9.7041-1.6956-16.1254c10.6654-17.389,21.2869-34.805,31.999-52.1651 c1.0123-1.6406,0.9874-2.8936,0.1196-4.5525c-5.8828-11.2466-10.6752-22.9488-14.1713-35.1558 c-0.6059-2.1157-1.6517-2.9992-3.8442-3.5013c-19.8854-4.5543-39.7338-9.2699-59.5922-13.9419 c-5.199-1.2231-8.3607-5.0414-8.3703-10.3763c-0.0365-20.1648-0.0374-40.3297,0.0008-60.4946 c0.0099-5.2348,3.1058-9.0556,8.1659-10.2474c19.6963-4.6389,39.3859-9.3079,59.114-13.8078 c2.723-0.6211,3.9687-1.8202,4.7499-4.4918c3.4428-11.7745,7.9935-23.1342,13.7456-33.98c1.0638-2.0058,1.0158-3.5054-0.189-5.453 c-10.7335-17.3506-21.3692-34.7618-32.0168-52.1655c-3.5895-5.8671-3.0839-10.4565,1.6663-15.3293 c13.3151-13.6589,26.6535-27.295,39.9526-40.9695C97.4627,54.1286,99.9501,52.5041,103.543,52.1175z M254.0143,384.4631 c35.9556-0.5699,64.4068-12.8121,87.3302-37.091c40.8153-43.2289,44.9545-109.7653,9.1699-157.3098 c-27.218-36.1626-64.0588-52.1869-109.2199-47.0405c-26.5673,3.0275-49.1572,15.054-67.9178,34.0693 c-40.3733,40.9214-46.8352,105.7537-14.8032,153.6495C181.7802,365.4408,214.6885,383.2517,254.0143,384.4631z"/></svg>`},returnIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 475.449 413.43"><path style="fill:${color}" d="M201.159 62.683c-1.04 0 1.037 0.02 0 0.031l0-58.417c0-3.611-4.287-5.606-7.155-3.329L43.119 120.739c-3.724 2.956-3.755 8.501-0.065 11.497l150.913 120.542c2.859 2.322 7.193 0.334 7.193-3.299v-69.727l-3.111 0c120.242 0.588 163.157 53.466 163.157 118.639 0 55.465-52.965 102.031-124.531 115.039 107.786-13.319 190.203-93.841 190.203-181.851C426.877 143.35 361.043 62.683 201.159 62.683z"/></svg>`},filterIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1206.412 1268.126"><path fill="${color}" d="M1154.367 0H52.045C5.759 0-17.41 59.19 15.334 93.785l419.086 442.77v403.991c0 23.315 9.28 45.671 25.791 62.132l256.736 255.967c20.34 20.279 55.045 5.873 55.045-22.849V536.555l419.086-442.77C1223.822 59.19 1200.653 0 1154.367 0z"/></svg>`},hashIcon:function(color){return`<svg width="100%" height="100%" viewBox="0 0 104 160" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/"><path fill="${color}" d="M17.349,112.034l-14.465,0c-1.592,0 -2.884,-1.292 -2.884,-2.884l-0,-13.765c-0,-1.592 1.292,-2.884 2.884,-2.884l17.689,0.001l4.295,-27.612l-16.045,0c-1.578,0 -2.859,-1.281 -2.859,-2.858l0,-13.817c0,-1.577 1.281,-2.858 2.859,-2.858l19.274,-0c0.151,-0.986 5.239,-34.171 6.423,-42.303c0.445,-3.054 3.24,-3.054 3.24,-3.054l12.178,-0c0,-0 2.437,0.374 1.999,3.054c-1.262,7.723 -6.502,41.311 -6.656,42.303l24.774,-0c0.151,-0.986 5.239,-34.171 6.423,-42.303c0.444,-3.054 3.24,-3.054 3.24,-3.054l12.178,-0c0,-0 2.437,0.374 1.999,3.054c-1.262,7.723 -6.502,41.311 -6.657,42.303l13.883,-0c1.577,-0 2.858,1.281 2.858,2.858l0,13.817c0,1.577 -1.281,2.858 -2.858,2.858l-16.905,0l-4.273,27.611l15.187,-0c1.592,-0 2.885,1.292 2.885,2.884l-0,13.765c-0,1.592 -1.293,2.884 -2.885,2.884l-18.209,0c-0.102,0.655 -5.723,36.663 -7.025,44.45c-0.519,3.103 -3.069,3.104 -3.069,3.104l-12.156,-0.001c-0,0 -2.47,0 -1.99,-3.103c1.182,-7.646 6.493,-43.546 6.626,-44.45l-24.344,0c-0.102,0.655 -5.723,36.663 -7.025,44.45c-0.519,3.103 -3.069,3.104 -3.069,3.104l-12.156,-0.001c-0,0 -2.47,0 -1.99,-3.103c1.182,-7.646 6.493,-43.546 6.626,-44.45Zm24.909,-47.144l-4.273,27.612l24.546,0l4.295,-27.612l-24.568,0Z"/></svg>`},additionIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 34.853 34.853"><path d="M32.342 14.915H19.937V2.512c0-1.387-1.124-2.511-2.511-2.511 -1.387 0-2.511 1.124-2.511 2.511V14.915H2.512c-1.387 0-2.511 1.124-2.511 2.511 0 1.387 1.124 2.512 2.511 2.512h12.403v12.402c0 1.387 1.124 2.511 2.511 2.511 1.387 0 2.511-1.124 2.511-2.511V19.939h12.404c1.387 0 2.511-1.125 2.511-2.512C34.853 16.039 33.729 14.915 32.342 14.915z" fill="${color}"/></svg>`},blankArrow:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 1080.0533 1080" xml:space="preserve"><path fill="${color}" d="M539.7226,1079.8636c-124.393-0.0005-248.7868-0.2578-373.1786,0.1353c-45.1227,0.1427-84.1436-14.3094-116.6906-45.3521 c-29.5977-28.2297-46.087-63.0261-49.1954-103.9402c-0.4741-6.2405-0.4855-12.5262-0.4861-18.791 C0.1493,663.8575,0.302,415.7991,0.0002,167.7413C-0.048,128.1848,10.0144,92.3785,34.9556,61.6091 C68.401,20.3484,111.9671-0.0429,165.3529,0.0468C298.4241,0.2704,431.496,0.115,564.5676,0.1217 c28.2051,0.0014,56.4184-0.3716,84.6132,0.1816c31.2153,0.6125,53.9622,25.4533,52.8174,56.6719 c-0.9522,25.9622-22.8329,48.6824-48.7466,50.5031c-4.5624,0.3205-9.1539,0.3164-13.7319,0.3168 c-157.6609,0.0153-315.3218,0.0262-472.9827-0.0009c-23.3922-0.004-42.2211,8.7187-52.392,30.3418 c-4.1387,8.7986-6.0082,19.4534-6.0422,29.2736c-0.4016,115.952-0.2602,231.9058-0.2598,347.8591 c0.0005,132.828,0.0093,265.6561-0.0017,398.4841c-0.0019,23.1031,8.6367,41.7916,29.9793,51.8642 c9.0032,4.2491,19.8911,6.2592,29.9315,6.2902c130.6597,0.403,261.3209,0.2675,391.9819,0.2674 c118.1251-0.0002,236.2502,0.0222,354.3754-0.0188c26.7462-0.0093,46.687-13.056,54.6546-36.7849 c2.546-7.5825,3.3141-16.0732,3.3237-24.1501c0.1865-158.1398,0.2299-316.2802,0.0198-474.42 c-0.0241-18.1701,4.7162-33.8824,18.8365-45.7023c16.5436-13.8484,35.4057-17.3034,55.4003-8.9795 c20.124,8.3777,31.5012,23.8629,33.3245,45.8806c0.2582,3.1171,0.2365,6.2627,0.2366,9.3951 c0.0104,158.6223-0.2081,317.2451,0.1476,475.8665c0.1005,44.8239-13.9149,83.7839-44.6803,116.239 c-28.2864,29.8398-63.2085,46.677-104.4042,49.8301c-6.9594,0.5326-13.9717,0.5117-20.9595,0.5134 C786.58,1079.8718,663.1513,1079.864,539.7226,1079.8636z"/><path fill="${color}" d="M970.0544,186.9626c-2.584,2.3743-5.2608,4.6558-7.7386,7.136c-127.052,127.177-254.0822,254.3756-381.1285,381.5581 c-19.8133,19.8345-46.5831,24.1418-68.5496,11.1249c-30.5685-18.1142-36.0625-59.1721-10.9549-85.0772 c19.7832-20.4116,40.1472-40.2604,60.2634-60.349C670.9156,332.5355,779.89,223.7207,888.8408,114.8822 c1.5888-1.5871,2.8972-3.4548,4.3365-5.1915c-0.2444-0.6374-0.4888-1.2747-0.7331-1.9121c-9.2573,0-18.5151-0.0533-27.772,0.0117 c-16.6613,0.117-30.683-5.947-41.405-18.6199c-14.4191-17.0426-17.265-36.5933-8.5165-56.7742 c8.7747-20.2415,25.0278-31.3798,47.4395-32.1063c13.9672-0.4527,27.9593-0.1656,41.9402-0.1668 c40.4976-0.0035,80.9969-0.2274,121.4919,0.103c31.3495,0.2558,53.9006,22.4354,54.1382,53.7478 c0.4094,53.9918,0.3521,107.9904,0.0132,161.9831c-0.1704,27.1332-19.4187,49.7164-44.0782,53.1509 c-28.9084,4.0262-53.0789-10.838-61.4047-38.4024c-1.7707-5.8623-1.7394-12.3505-1.9829-18.572 c-0.3163-8.084-0.0773-16.1897-0.0773-24.2861C971.5051,187.5525,970.7798,187.2575,970.0544,186.9626z"/></svg>`},doubleQuote:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56.785 49.482"><path d="M1.404 41.51C-3.883 27.672 6.229 7.036 23.924 0l1.608 2.581c-8.272 4.924-13.097 10.083-14.936 15.947 -1.379 4.22 0.69 6.799 3.446 7.034 6.205 0.47 10.8 5.862 10.8 11.492 0 6.801-5.054 12.428-11.718 12.428C7.837 49.482 3.242 46.2 1.404 41.51zM32.657 41.51C27.37 27.672 37.482 7.036 55.177 0l1.608 2.581c-8.272 4.924-13.097 10.083-14.936 15.947 -1.379 4.22 0.69 6.799 3.446 7.034 6.205 0.47 10.802 5.862 10.802 11.492 0 6.801-5.056 12.428-11.72 12.428C39.09 49.482 34.495 46.2 32.657 41.51z" fill="${color}"/></svg>`},serifAsterisk:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 117.4811 129.0094" xml:space="preserve"><path fill="${color}" d="M109.1632,54.0568c-10.9022,6.8139-33.1609,6.8139-39.5205,9.5394c-1.817,0.9085-2.7256,2.2713-0.9085,2.7256 c7.2681,2.7255,28.6183,2.7255,39.9747,9.5394c8.6309,4.9968,10.4479,12.7192,5.4511,20.8959 c-5.4511,9.0852-11.8107,11.3565-21.3501,5.9054c-11.3565-6.3596-22.2587-25.8927-27.7098-29.5268 c-1.3628-0.9085-2.2713-0.4543-2.2713,0.9085c0,7.2681,11.3565,26.347,11.3565,39.5205c0,10.4479-5.4511,15.4448-15.8991,15.4448 s-15.4448-4.9968-15.4448-15.4448c0-13.1735,11.8107-32.2524,11.8107-39.0662c0-1.817-0.9085-2.7255-2.2713-1.817 c-6.8139,4.0883-16.3533,21.8044-28.6183,29.0725c-9.0852,5.4511-15.899,3.6341-20.8959-5.4511 c-4.9968-8.6309-3.6341-15.899,5.4511-21.3501c11.8107-6.8139,32.7066-6.3596,39.5205-9.5394 c1.3628-0.4543,2.7256-1.817,0.9085-2.7256c-6.3596-2.7255-28.6183-2.7255-39.9747-9.5394 C0.1412,48.1514-1.6758,41.3375,3.321,32.2523s12.7192-10.9022,21.8044-5.4511c11.3565,6.8139,21.3501,25.4385,27.2555,29.0725 c1.3628,0.9085,2.2713,0.4543,2.2713-0.9085c0-6.8139-11.3565-26.347-11.3565-39.5205C43.2958,4.9968,48.2926,0,58.7406,0 s15.899,4.9968,15.899,15.4448c0,13.1735-11.8107,32.7066-11.8107,39.0662c0,1.817,0.9085,2.2713,2.2713,1.817 c6.8139-3.6341,17.7161-22.2587,28.6183-29.0725c8.6309-5.4511,15.4448-3.6341,20.8959,5.4511 C119.6112,41.3375,118.2484,48.6057,109.1632,54.0568z"/></svg>`},darkMoon:function(color){return`<svg width="100%" height="100%" viewBox="0 0 9449 9949" xmlns="http://www.w3.org/2000/svg" xml:space="preserve"><path fill="${color}" d="M9241.78,6988.91c62.468,-15.546 128.26,6.832 168.294,57.242c40.035,50.411 46.932,119.561 17.642,176.886c-824.243,1617.09 -2505.43,2725.63 -4443.49,2725.63c-2750.87,-0 -4984.22,-2233.35 -4984.22,-4984.22c0,-2589.34 1978.78,-4720.16 4505.35,-4961.47c64.115,-6.035 125.844,25.943 157.898,81.796c32.055,55.854 28.524,125.285 -9.032,177.598c-508.86,710.577 -808.494,1580.98 -808.494,2520.81c0,2393.3 1943.06,4336.36 4336.36,4336.36c365.503,-0 720.506,-45.319 1059.69,-130.638Z"/></svg>`},calendarIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1343.66 1279.127"><path fill="${color}" d="M1343.66 90.609c0-35.574-20.504-66.354-50.336-81.182 -1.354-0.673-2.728-1.313-4.12-1.92 -1.225-0.534-2.463-1.041-3.715-1.521 -0.873-0.335-1.753-0.657-2.639-0.965 -2.514-0.875-5.077-1.643-7.686-2.298C1268.085 0.947 1260.679 0 1253.051 0H90.609C72.315 0 55.29 5.427 41.048 14.751c-0.976 0.639-1.942 1.291-2.891 1.966 -0.849 0.604-1.683 1.227-2.51 1.859 -3.773 2.883-7.317 6.052-10.59 9.482 -0.046 0.048-0.092 0.098-0.138 0.146 -0.908 0.955-1.794 1.931-2.66 2.925 -1.069 1.227-2.105 2.484-3.107 3.768C7.152 50.264 0 69.601 0 90.609v169.702h0v928.208c0 50.042 40.567 90.609 90.609 90.609h1162.442c50.042 0 90.609-40.567 90.609-90.609V260.311h0V90.609zM1291.361 1188.518c0 21.158-17.152 38.311-38.311 38.311H90.609c-21.158 0-38.311-17.152-38.311-38.311V280.009c0-10.879 8.819-19.699 19.699-19.699h1199.666c10.879 0 19.699 8.819 19.699 19.699V1188.518z"/><path fill="${color}" d="M358.2 576.714h-161.176c-9.348 0-16.927-7.578-16.927-16.927V398.612c0-9.348 7.578-16.927 16.927-16.927h161.176c9.348 0 16.927 7.578 16.927 16.927v161.176C375.127 569.136 367.548 576.714 358.2 576.714z"/><path fill="${color}" d="M620.995 576.714H459.82c-9.348 0-16.927-7.578-16.927-16.927V398.612c0-9.348 7.578-16.927 16.927-16.927h161.176c9.348 0 16.927 7.578 16.927 16.927v161.176C637.922 569.136 630.344 576.714 620.995 576.714z"/><path fill="${color}" d="M883.792 576.714H722.616c-9.348 0-16.927-7.578-16.927-16.927V398.612c0-9.348 7.578-16.927 16.927-16.927h161.176c9.348 0 16.927 7.578 16.927 16.927v161.176C900.718 569.136 893.14 576.714 883.792 576.714z"/><path fill="${color}" d="M1146.588 576.714H985.412c-9.348 0-16.927-7.578-16.927-16.927V398.612c0-9.348 7.578-16.927 16.927-16.927h161.176c9.348 0 16.927 7.578 16.927 16.927v161.176C1163.515 569.136 1155.936 576.714 1146.588 576.714z"/><path fill="${color}" d="M358.2 839.509h-161.176c-9.348 0-16.927-7.578-16.927-16.927V661.407c0-9.348 7.578-16.927 16.927-16.927h161.176c9.348 0 16.927 7.578 16.927 16.927v161.176C375.127 831.931 367.548 839.509 358.2 839.509z"/><path fill="${color}" d="M620.995 839.509H459.82c-9.348 0-16.927-7.578-16.927-16.927V661.407c0-9.348 7.578-16.927 16.927-16.927h161.176c9.348 0 16.927 7.578 16.927 16.927v161.176C637.922 831.931 630.344 839.509 620.995 839.509z"/><path fill="${color}" d="M883.792 839.509H722.616c-9.348 0-16.927-7.578-16.927-16.927V661.407c0-9.348 7.578-16.927 16.927-16.927h161.176c9.348 0 16.927 7.578 16.927 16.927v161.176C900.718 831.931 893.14 839.509 883.792 839.509z"/><path fill="${color}" d="M1146.588 839.509H985.412c-9.348 0-16.927-7.578-16.927-16.927V661.407c0-9.348 7.578-16.927 16.927-16.927h161.176c9.348 0 16.927 7.578 16.927 16.927v161.176C1163.515 831.931 1155.936 839.509 1146.588 839.509z"/><path fill="${color}" d="M358.2 1102.305h-161.176c-9.348 0-16.927-7.578-16.927-16.927V924.202c0-9.348 7.578-16.927 16.927-16.927h161.176c9.348 0 16.927 7.578 16.927 16.927v161.176C375.127 1094.726 367.548 1102.305 358.2 1102.305z"/><path fill="${color}" d="M620.995 1102.305H459.82c-9.348 0-16.927-7.578-16.927-16.927V924.202c0-9.348 7.578-16.927 16.927-16.927h161.176c9.348 0 16.927 7.578 16.927 16.927v161.176C637.922 1094.726 630.344 1102.305 620.995 1102.305z"/><path fill="${color}" d="M883.792 1102.305H722.616c-9.348 0-16.927-7.578-16.927-16.927V924.202c0-9.348 7.578-16.927 16.927-16.927h161.176c9.348 0 16.927 7.578 16.927 16.927v161.176C900.718 1094.726 893.14 1102.305 883.792 1102.305z"/><path fill="${color}" d="M1146.588 1102.305H985.412c-9.348 0-16.927-7.578-16.927-16.927V924.202c0-9.348 7.578-16.927 16.927-16.927h161.176c9.348 0 16.927 7.578 16.927 16.927v161.176C1163.515 1094.726 1155.936 1102.305 1146.588 1102.305z"/></svg>`},calendarIcon2:function(color){return`<svg width="100%" height="100%" viewBox="0 0 717 750" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/"><path fill="${color}" d="M451.439,113.013l-0,66.686c-0,13.826 11.225,25.051 25.051,25.051c13.826,0 25.052,-11.225 25.052,-25.051l-0,-86.258l0.04,0l0,-64.214c0,-16.131 13.096,-29.227 29.227,-29.227c16.13,-0 29.226,13.096 29.226,29.227l0,64.214l91.953,0c35.853,0 64.96,29.108 64.96,64.961l0,526.638c0,35.852 -29.107,64.96 -64.96,64.96l-587.028,-0c-35.852,-0 -64.96,-29.108 -64.96,-64.96l-0,-526.638c-0,-35.853 29.108,-64.961 64.96,-64.961l37.885,0l0,0.117c10.738,-0 19.456,8.717 19.456,19.455l0.098,0l-0,65.117c-0,13.827 11.225,25.052 25.051,25.052c13.826,-0 25.051,-11.225 25.051,-25.052l0,-84.689l0.164,0l-0,-64.214c-0,-16.131 13.096,-29.227 29.226,-29.227c16.131,-0 29.227,13.096 29.227,29.227l-0,64.214l200.772,0l0,0.117c10.738,-0 19.456,8.717 19.456,19.455l0.093,0Zm-392.986,180.82l0,383.512c0,7.838 6.364,14.202 14.203,14.202l571.637,-0c7.839,-0 14.202,-6.364 14.202,-14.202l0,-383.512c0,-7.839 -6.363,-14.203 -14.202,-14.203l-571.637,0c-7.839,0 -14.203,6.364 -14.203,14.203Zm322.942,110.065l-70.935,-0c-16.13,-0 -29.226,-13.096 -29.226,-29.227c-0,-16.13 13.096,-29.226 29.226,-29.226l102.216,-0l11.632,1.574l8.557,3.576l7.04,5.226l5.907,7.328l3.789,8.613l1.448,8.667l-1.076,11.522l-3.322,9.652l-92.996,204.518c-6.676,14.684 -24.018,21.185 -38.702,14.508c-14.684,-6.677 -21.185,-24.019 -14.508,-38.703l80.95,-178.028Z"/></svg>`},githubIcon:function(color){return`<svg width="100%" height="100%" viewBox="0 0 3141 3284" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/"><path fill="${color}" d="M1038.06,2944.55l-1.001,0c-0.366,-51.114 -0.634,-106.703 -0.634,-163.365c-536,98.667 -674.667,-130.666 -717.334,-250.666c-24,-61.334 -128,-250.667 -218.666,-301.334c-74.667,-40 -181.334,-138.666 -2.667,-141.333c168,-2.667 288,154.667 328,218.667c192,322.666 498.667,232 621.333,176c18.667,-138.667 74.667,-232 136,-285.334c-474.666,-53.333 -970.666,-237.333 -970.666,-1053.33c-0,-232 82.666,-424 218.666,-573.333c-21.333,-53.334 -96,-272 21.334,-565.334c-0,0 178.666,-56 586.666,218.667c170.667,-48 352,-72 533.334,-72c181.333,-0 362.666,24 533.333,72c408,-277.333 586.667,-218.667 586.667,-218.667c117.333,293.334 42.666,512 21.333,565.334c136,149.333 218.667,338.666 218.667,573.333c-0,818.667 -498.667,1000 -973.334,1053.33c77.334,66.667 144,194.667 144,394.667c0,133.208 -0.581,254.211 -1.201,352.698l-0.608,0l0,238.829c0,55.494 -45.054,100.548 -100.548,100.548l-862.125,0c-55.494,0 -100.549,-45.054 -100.549,-100.548l0,-238.829Z"/></svg>`},interactionIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 164.7519 136.627" xml:space="preserve"><path fill="${color}" d="M133.7234,100.943c-0.036-0.942,0.417-1.842,1.193-2.377c15.607-10.751,26.021-25.595,26.021-42.495 c0-31.157-31.917-56.071-71.287-56.071s-71.287,24.914-71.287,56.071s31.916,55.727,71.287,55.727c3.2,0,6.35-0.169,9.439-0.493 c1.217-0.128,2.427,0.239,3.388,0.997c11.411,8.991,28.209,14.495,42.154,15.168c0.974,0.047,1.498-1.129,0.81-1.821 C141.7265,121.911,134.1754,112.89,133.7234,100.943z"/><path fill="${color}" d="M36.9615,98.552c-12.261-9.54-19.824-21.906-21.794-35.376c-7.085,6.644-11.353,15.225-11.353,24.641 c0,11.526,7.088,21.653,17.718,28.997c0.567,0.392,0.907,1.042,0.879,1.731c-0.34,8.333-5.726,14.574-8.186,17.004 c-0.408,0.403-0.109,1.101,0.464,1.077c9.433-0.395,20.845-4.059,28.709-10.09c0.906-0.695,2.032-1.031,3.169-0.921 c1.956,0.19,3.948,0.289,5.969,0.289c13.053,0,24.907-3.952,33.654-10.453C67.5725,114.795,50.2025,108.854,36.9615,98.552z"/></svg>`},linkIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 77.326 72.7716" xml:space="preserve"><path fill="${color}" d="M32.4648,53.8433c0.7818-0.8269,1.9796-1.0714,3.0235-0.6186c3.0778,1.3352,6.0816,1.63,9.3559,1.1336 c-0.268,0.3706-0.3808,0.5807-0.5424,0.742c-4.1556,4.1481-8.2184,8.3957-12.4999,12.4098 c-5.936,5.5651-14.1185,6.7112-20.6902,3.1443C1.4752,65.4242-0.6793,52.4901,7.0136,43.8894 c5.1292-5.7345,10.6434-11.1642,16.3361-16.3449c6.9673-6.3407,17.4842-6.1651,23.6823-0.076 c1.3946,1.3701,1.9352,2.9763,1.4056,4.8363c-0.4905,1.7227-1.7106,3.0358-3.4683,3.1096c-1.3413,0.0563-2.9694-0.3345-4.0305-1.12 c-4.024-2.9787-8.3527-3.0391-11.9467,0.4467c-5.0482,4.8962-10.0118,9.8856-14.8637,14.9761 c-3.5474,3.7219-3.3953,8.9197,0.0819,11.9336c3.1163,2.701,7.6792,2.4502,11.1588-0.7631 c2.4248-2.2392,4.7108-4.6297,7.0323-6.9789C32.4229,53.8873,32.444,53.8654,32.4648,53.8433z"/><path fill="${color}" d="M44.5844,19.2995c-0.5888,0.6009-1.4959,0.7818-2.2594,0.4284c-3.1276-1.4477-6.2668-1.9142-9.5952-1.3541 c0-0.1569-0.0461-0.3084,0.0066-0.3611c4.4082-4.4118,8.6418-9.0192,13.2788-13.1767c8.5503-7.6661,21.3662-5.8016,26.732,3.6491 c3.6604,6.4469,2.809,14.8065-2.5958,20.592c-5.256,5.6261-10.7121,11.0956-16.4099,16.2709 c-6.7187,6.1025-16.7418,6.0137-23.1022,0.2401c-2.2629-2.0541-2.5948-4.7657-0.8335-6.8093 c1.7979-2.086,4.4361-2.1616,6.8376-0.1959c3.4519,2.8255,7.8897,2.9706,11.1925-0.1604 c5.3674-5.0883,10.5592-10.3712,15.6488-15.7391c2.2252-2.3468,2.9494-5.3508,1.7545-8.527 c-1.0328-2.7454-3.1023-4.3876-5.9872-4.7994c-2.999-0.428-5.5306,0.737-7.6309,2.8119 C49.2641,14.4974,46.9579,16.8771,44.5844,19.2995z"/></svg>`},linkIcon2:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 566.9291 566.3705" xml:space="preserve"><path style="fill:${color};" d="M310.0074,199.8997l-25.7186,25.6573c-1.1178,1.1177-2.1418,2.3093-3.1116,3.5333 c-0.292,0.3661-0.5589,0.7519-0.8383,1.1304c-0.6707,0.9068-1.2981,1.8388-1.8876,2.7943 c-0.2488,0.4164-0.5101,0.8257-0.7444,1.2493c-0.6526,1.143-1.2422,2.322-1.7704,3.5262c-0.0937,0.2127-0.2054,0.4057-0.292,0.6165 c-0.6023,1.4278-1.1124,2.9007-1.5414,4.397c-0.0308,0.1046-0.0559,0.2165-0.0795,0.3281 c11.7074,3.3226,22.4321,9.5962,31.1829,18.3849c12.733,12.7311,20.1478,29.6682,20.8816,47.6979 c0,0.0505,0.0181,0.0939,0.0181,0.1442c0,0.0307,0,0.054,0,0.0793c0,0.0072,0,0.0126,0,0.0126 c0.8708,20.0109-6.7876,39.681-21.0168,53.8599l-33.4273,33.3893c-0.056,0.0559-0.1298,0.092-0.1857,0.1552l-95.2537,95.05 c-13.5641,13.5641-31.6189,21.042-50.8348,21.042c-19.2412,0-37.3393-7.5032-50.9594-21.1305 c-13.5767-13.6002-21.042-31.6929-21.0186-50.9466c0.0197-19.2538,7.5158-37.332,21.1051-50.9033l88.3166-88.1363 c-0.2415-0.7643-0.4091-1.5468-0.64-2.3165c-0.4596-1.5343-0.8635-3.0864-1.2782-4.6403c-0.7715-2.8738-1.4656-5.7762-2.075-8.7003 c-0.3408-1.6404-0.6707-3.2792-0.9573-4.9307c-0.5336-3.0629-0.9429-6.1491-1.2979-9.2554 c-0.1677-1.4531-0.3787-2.9006-0.5032-4.3645c-0.3911-4.554-0.6327-9.1366-0.6327-13.7571 c0.0055-3.4415,0.1425-6.8758,0.3732-10.2993c0.0738-1.1537,0.2163-2.2966,0.3155-3.4469c0.2056-2.2787,0.4164-4.5574,0.7157-6.8181 c0.0488-0.3659,0.0668-0.7391,0.1172-1.1067l-120.2023,119.95c-48.9545,48.8589-49.0339,128.4446-0.1677,177.4154 c23.6813,23.7499,55.212,36.8308,88.789,36.8308c33.4506,0,64.9073-13.0178,88.5833-36.656L342.8504,401.166 c8.8193-8.7831,16.2414-18.7759,22.0733-29.7062c14.0744-26.4396,18.1487-56.7174,11.9362-85.5528 c-1.4404-6.6523-3.4217-13.2362-5.9545-19.6703c-6.2864-15.9618-15.6573-30.2578-27.8568-42.4878 C333.2867,213.9543,322.2068,205.9607,310.0074,199.8997L310.0074,199.8997z"/><path style="fill:${color};" d="M187.5694,245.3822c-0.1983,2.8303-0.3173,5.6626-0.3226,8.5073 c0,16.0375,2.9367,31.6009,8.7254,46.2468c6.2665,15.9042,15.6571,30.202,27.9359,42.506 c9.7332,9.7873,20.8006,17.7809,32.9981,23.8364l25.724-25.6753c1.1321-1.125,2.1632-2.3292,3.1368-3.5658 c0.3047-0.384,0.5786-0.7878,0.8634-1.179c0.6455-0.8888,1.2675-1.801,1.839-2.733c0.2848-0.4778,0.5661-0.9573,0.8329-1.4404 c0.5138-0.9321,0.986-1.8821,1.4278-2.852c0.2182-0.4778,0.4471-0.9501,0.64-1.4332c0.5085-1.2367,0.9429-2.4969,1.3233-3.7769 c0.0559-0.193,0.1371-0.3787,0.1857-0.5715c-11.6569-3.3225-22.3707-9.5836-31.1413-18.3524 c-12.5708-12.5708-19.9478-29.1907-20.8798-46.9102v-0.0072c-0.0126-0.2038-0.0505-0.4092-0.0559-0.6129 c-0.0937-1.1249-0.1117-2.2805-0.1117-3.3929c0.0486-19.2772,7.5518-37.35,21.1285-50.9214L390.7053,74.4802 c13.62-13.5642,31.6803-21.0294,50.8655-21.0294c19.2411,0,37.3393,7.503,50.9593,21.1231 c28.0225,28.1217,27.9559,73.7825-0.1297,101.8122l-88.3545,88.1795c0.3227,1.0132,0.5769,2.0317,0.8762,3.0503 c0.4399,1.4712,0.8816,2.944,1.2727,4.4348c0.3481,1.2981,0.6454,2.6087,0.9556,3.9121c0.3678,1.5288,0.7264,3.0502,1.0437,4.5845 c0.2669,1.2907,0.4977,2.5959,0.732,3.894c0.2812,1.5521,0.5534,3.0989,0.7896,4.6512c0.1928,1.3051,0.3533,2.6158,0.5156,3.9246 c0.1927,1.554,0.3786,3.0991,0.5283,4.653c0.1243,1.3232,0.2163,2.6446,0.3045,3.968c0.1046,1.5414,0.2037,3.0809,0.2597,4.6204 c0.0559,1.3485,0.081,2.6898,0.0991,4.0383c0.0199,1.5143,0.0253,3.0359,0,4.5519c-0.0181,1.3666-0.0613,2.7259-0.1172,4.087 c-0.0612,1.4963-0.1425,2.9998-0.2488,4.4962c-0.0991,1.372-0.2162,2.7384-0.3479,4.1121c-0.1425,1.4838-0.3102,2.962-0.4904,4.433 c-0.0939,0.7211-0.1425,1.4422-0.2416,2.1562l120.179-119.9248c23.6813-23.6128,36.7352-55.0948,36.773-88.6519 c0.0361-33.5498-12.9494-65.0569-36.5622-88.7257C506.6783,13.0809,475.1459,0,441.5708,0 c-33.4633,0-64.9398,13.0178-88.614,36.6632L224.0759,165.225c-8.8373,8.8445-16.2971,18.8373-22.1472,29.6936 c0,0.0072-0.0055,0.0072-0.0055,0.0126C193.6683,210.3956,188.7809,227.688,187.5694,245.3822L187.5694,245.3822z"/></svg>`},facebookIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 39.9954 71.8158" xml:space="preserve"><path fill="${color}" d="M35.642,35.8267l1.6974-10.9954H24.814V18.822c0-4.5661,1.4931-8.6206,5.7664-8.6206h6.8669V0.6042 c-1.2051-0.1609-3.7584-0.5197-8.5788-0.5197c-10.0686,0-15.9702,5.3159-15.9702,17.4294v7.3174H2.5481v10.9954h10.3502v35.8177 l11.9157,0.0869V35.8267H35.642z"/></svg>`},twitterIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 95.7448 72.7716" xml:space="preserve"><path fill="${color}" d="M92.3282,8.9345c0.0413-0.0609-0.0226-0.1375-0.09-0.1081c-3.217,1.4019-6.6648,2.3476-10.2794,2.7797 c3.6844-2.2066,6.5313-5.6677,7.9374-9.7991c0.038-0.1115-0.0846-0.2111-0.1865-0.1519c-3.4564,2.0073-7.2726,3.4696-11.3289,4.2702 c-3.5244-3.7562-8.6285-6.0247-14.2419-5.7592c-8.1436,0.3851-15.2084,6.2443-16.9653,14.2053 c-0.6271,2.8413-0.5682,5.662,0.0281,8.2395c-15.207-0.7616-28.6886-8.0478-37.7175-19.1212 C7.9131,6.1929,7.011,9.3352,7.011,12.6936c0,6.3463,3.228,11.9481,8.137,15.2276c-2.9982-0.096-5.8215-0.9193-8.2879-2.2881 c0,0.0789,0,0.1509,0,0.2299c0,8.8676,6.3051,16.2636,14.6788,17.9411c-1.5334,0.4185-3.1526,0.6415-4.8232,0.6415 c-1.1766,0-2.3258-0.1166-3.4407-0.3259c2.3293,7.269,9.0872,12.5622,17.0938,12.7097c-6.2605,4.9089-14.1505,7.8351-22.7266,7.8351 c-1.475,0-2.933-0.0858-4.3669-0.2573c8.0992,5.1902,17.7147,8.2193,28.0505,8.2193c33.6593,0,52.0601-27.8824,52.0601-52.0635 c0-0.7924-0.0172-1.5814-0.0515-2.367C86.8439,15.6623,89.8979,12.5147,92.3282,8.9345z"/></svg>`},talkIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 451.0676 385.724" xml:space="preserve"><path fill="${color}" d="M61.5539,378.9067c-2.0208,2.0784-0.4816,5.6116,2.3813,5.4706c40.9867-2.0228,90.3566-18.5609,123.8974-45.5795 c2.8252-2.275,6.3823-3.3783,9.9602-2.994c9.0774,0.9742,18.3355,1.4826,27.7415,1.4826 c115.7158,0,209.5221-73.8304,209.5221-167.4551S341.251,1.3427,225.5343,1.3427S16.0112,76.2068,16.0112,169.8315 c0,50.783,30.6094,95.3863,76.4798,127.6918c2.281,1.6068,3.6107,4.3138,3.5054,7.1429 C94.6668,340.5665,72.4753,367.6725,61.5539,378.9067z"/></svg>`},closeIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.219 32.219"><path d="M18.967 16.109L31.627 3.45c0.789-0.789 0.789-2.069 0-2.858 -0.788-0.789-2.069-0.789-2.858 0L16.109 13.252 3.45 0.592c-0.788-0.789-2.069-0.789-2.858 0 -0.789 0.789-0.789 2.069 0 2.858l12.66 12.66L0.592 28.769c-0.789 0.789-0.789 2.068 0 2.858 0.394 0.395 0.912 0.592 1.429 0.592s1.035-0.197 1.429-0.592l12.66-12.66 12.66 12.66c0.394 0.395 0.912 0.592 1.429 0.592 0.517 0 1.035-0.197 1.429-0.592 0.789-0.789 0.789-2.068 0-2.858L18.967 16.109z" fill="${color}"/></svg>`},checkCircle:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 59.044 59.04"><path d="M29.524 0c-16.307 0-29.524 13.217-29.524 29.52 0 16.306 13.217 29.52 29.524 29.52 16.303 0 29.52-13.214 29.52-29.52C59.044 13.217 45.826 0 29.524 0zM44.092 23.517L25.984 41.569c-0.515 0.515-1.188 0.772-1.865 0.772 -0.659 0-1.315-0.243-1.827-0.733l-8.164-7.79c-1.058-1.005-1.097-2.68-0.088-3.738 1.005-1.054 2.684-1.093 3.738-0.085l6.298 6.009 16.282-16.232c1.033-1.033 2.712-1.026 3.742 0.007C45.129 20.812 45.129 22.487 44.092 23.517z" fill="${color}"/></svg>`},hamburgerIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 65.032 41.503"><path d="M63.272 6.046H1.76C0.788 6.046 0 5.258 0 4.286V1.76C0 0.788 0.788 0 1.76 0h61.513c0.972 0 1.76 0.788 1.76 1.76v2.526C65.032 5.258 64.244 6.046 63.272 6.046zM65.032 22.015v-2.526c0-0.972-0.788-1.76-1.76-1.76H1.76C0.788 17.729 0 18.516 0 19.488v2.526c0 0.972 0.788 1.76 1.76 1.76h61.513C64.244 23.774 65.032 22.986 65.032 22.015zM65.032 39.743v-2.526c0-0.972-0.788-1.76-1.76-1.76H1.76C0.788 35.457 0 36.245 0 37.217v2.526c0 0.972 0.788 1.76 1.76 1.76h61.513C64.244 41.503 65.032 40.715 65.032 39.743z" fill="${color}"/></svg>`},mailIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 198.6291 140.8618"><path fill="${color}" d="M0.0003,19.0035c0-2.5127,0.5001-4.9621,1.488-7.2941L64.368,71.4319L2.0719,130.424 c-1.3573-2.6498-2.0716-5.5953-2.0716-8.5654V19.0035z M18.8279,0.1759c-5.0004,0-9.6737,1.9311-13.2259,5.4519l70.6926,67.1433 c12.908,12.2596,33.1308,12.2596,46.0398,0l70.6926-67.1438c-3.5527-3.5203-8.2255-5.4514-13.2254-5.4514H18.8279z  M179.8015,140.6861c4.5018,0,8.8248-1.6133,12.2468-4.5558l-63.0468-59.7014l-1.6781,1.5926 c-7.5967,7.2155-17.5444,11.1887-28.0085,11.1887c-10.4655,0-20.4123-3.9732-28.0085-11.1887l-1.6776-1.5926L6.5815,136.1303 c3.4215,2.9426,7.745,4.5558,12.2463,4.5558H179.8015z M198.6291,19.0035c0-2.5132-0.5001-4.9626-1.4885-7.2941l-62.8798,59.723 l62.2971,58.9915c1.3568-2.6498,2.0711-5.5943,2.0711-8.5654V19.0035z"/></svg>`},downArrow:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 295.5974 275.3"><path fill="${color}" d="M289.6034,121.5312h-45.1321V5.982c0-3.3038-2.6782-5.982-5.982-5.982H57.1081c-3.3038,0-5.982,2.6782-5.982,5.982v115.5493 H5.994c-5.3294,0-7.9984,6.4434-4.2299,10.2119l141.8047,141.8047c2.3361,2.3361,6.1237,2.3361,8.4598,0l141.8047-141.8047 C297.6017,127.9747,294.9328,121.5312,289.6034,121.5312z"/></svg>`},houseLine:function(color,shortVersion=!1){return shortVersion?`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 365.3806 149.2332" xml:space="preserve"><path fill="${color}" d="M356.3929,87.9033L190.3481,1.8623c-4.7961-2.4824-10.5202-2.4838-15.3154,0.0005L8.9861,87.9033 C3.4431,90.7769,0,96.4403,0,102.6819v46.5523h5.356v-46.5513c0-4.2343,2.3354-8.0754,6.0942-10.0239L177.4954,6.6174 c3.2562-1.6835,7.1392-1.684,10.3887-0.0005l166.0438,86.041c3.7602,1.9504,6.0961,5.7916,6.0961,10.024v46.5523h5.357v-46.5523 C365.3809,96.4413,361.9368,90.7779,356.3929,87.9033z"/></svg>`:`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 566.9291 149.2332" xml:space="preserve"><path fill="${color}" d="M566.9291,149.2332H466.1548v-45.9778c0-4.8913-2.6993-9.3296-7.0432-11.5818L289.676,3.8755 c-3.7587-1.9478-8.2442-1.9454-12.0029,0L108.2364,91.6737c-4.3439,2.2522-7.042,6.6893-7.042,11.5818v45.9778H0v-2.4162h98.7782 v-43.5617c0-5.7985,3.1983-11.0579,8.3468-13.7266L276.5618,1.7307c4.4512-2.3064,9.7696-2.3088,14.2256,0l169.4355,87.7981 c5.1497,2.6686,8.348,7.9292,8.348,13.7266v43.5617h98.3582V149.2332z"/></svg>`},cloudIcon:function(color){return`<svg width="100%" height="100%" viewBox="0 0 1428 777" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><path d="M168.14,317.834c58.909,-22.82 82.875,-40.95 109.332,-104.48c26.457,-63.53 83.84,-188.334 259.035,-210.248c142.387,-17.81 220.168,45.064 283.818,84.559c67.272,41.742 107.129,33.276 191.924,47.366c84.795,14.089 119.883,75.424 142.231,109.594c22.347,34.169 21.682,67.287 114.077,100.477c92.396,33.191 162.294,105.55 158.756,206.092c-3.539,100.541 -35.407,220.987 -273.649,223.281c-238.242,2.293 -689.288,1.12 -863.202,1.863c-173.914,0.743 -221.439,-70.027 -260.912,-121.347c-39.473,-51.321 -39.494,-159.481 0.503,-229.56c39.997,-70.078 79.178,-84.777 138.087,-107.597Z" style="fill:${color}"/></svg>`},boxTag:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 435.7833 566.9291" xml:space="preserve"><path fill="${color}" d="M24.0582,338.9482c32.9704,34.0915,66.5096,67.6332,99.7931,101.4218c31.7184,32.2031,63.8426,64.0182,95.0303,96.7278 c19.2624,20.204,41.8937,29.8313,69.7035,29.8313c28.5998,0,147.1982,0,147.1982,0V0c0,0-116.2152,0.0047-144.8111,0.0047 c-26.3687,0-48.0859,8.3752-66.8201,26.9874C158.9034,91.8119,93.2196,156.194,27.7725,220.8154 c-4.7373,4.6775-9.5116,9.5205-13.2284,14.9945C-7.795,268.7141-4.2283,309.701,24.0582,338.9482z M173.3789,245.0669 c20.4966-19.84,52.9568-19.5232,73.1086,0.7113c20.503,20.5895,20.4126,53.1184-0.2061,73.5196 c-20.4979,20.2841-53.6134,20.12-73.6926-0.3652C152.5845,298.5225,152.9446,264.8458,173.3789,245.0669z"/></svg>`},gitlabIcon:function(color){return`<svg width="100%" height="100%" viewBox="0 0 1180 1141" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/"><path fill="${color}" d="M554.674,1126.63l-432.615,-328.566c-74.092,-55.66 -122.059,-144.31 -122.059,-244.086c0,-42.763 8.812,-83.484 24.715,-120.439l157.201,-406.652c5.804,-15.692 20.897,-26.889 38.581,-26.889c17.635,-0 32.692,11.133 38.533,26.755c0.4,1.071 0.757,2.164 1.069,3.275l108.828,333.284l441.7,0l108.828,-333.284c0.311,-1.111 0.668,-2.204 1.069,-3.275c5.84,-15.622 20.898,-26.755 38.532,-26.755c17.684,-0 32.777,11.197 38.582,26.889l157.201,406.652c15.903,36.955 24.714,77.676 24.714,120.439c0,99.776 -47.967,188.426 -122.058,244.086l-432.616,328.566c-9.285,8.324 -21.546,13.389 -34.98,13.389c-0.082,0 -0.163,0 -0.244,0c-13.434,0 -25.696,-5.065 -34.981,-13.389Z"/></svg>`},designIcon:function(color){return`<svg width="100%" height="100%" viewBox="0 0 1274 1229" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" ><path fill="${color}" d="M0,663.411c0,-166.324 55.416,-318.74 154.282,-435.72c118.257,-139.923 296.132,-227.691 481.057,-227.691c233.813,-0 426.486,123.234 536.671,300.555c66.725,107.38 101.609,235.689 101.609,362.856c-0,337.164 -296.15,564.843 -414.896,564.843c-118.745,0 -189.61,-91.777 -223.384,-128.011c-33.774,-36.233 -183.127,-183.518 -223.532,-223.567c-48.14,-47.714 -90.143,-17.254 -102.048,8.012c-11.904,25.266 -3.202,56.621 35.031,90.636c52.262,46.494 50.76,101.826 0,144.789c-50.759,42.962 -167.231,10.179 -245.466,-125.694c-78.234,-135.873 -99.324,-219.258 -99.324,-331.008Zm539.005,-471.893c-59.744,0 -108.248,48.512 -108.248,108.265c-0,59.753 48.504,108.265 108.248,108.265c59.743,-0 108.247,-48.512 108.247,-108.265c0,-59.753 -48.504,-108.265 -108.247,-108.265Zm469.584,352.404c-44.127,0 -79.953,35.831 -79.953,79.965c0,44.134 35.826,79.965 79.953,79.965c44.127,0 79.953,-35.831 79.953,-79.965c-0,-44.134 -35.826,-79.965 -79.953,-79.965Zm-146.805,207.172c-72.842,0 -131.981,59.148 -131.981,132.001c0,72.853 59.139,132.001 131.981,132.001c72.842,0 131.98,-59.148 131.98,-132.001c-0,-72.853 -59.138,-132.001 -131.98,-132.001Zm-0,-504.474c-59.744,0 -108.248,48.512 -108.248,108.265c-0,59.753 48.504,108.264 108.248,108.264c59.743,0 108.247,-48.511 108.247,-108.264c0,-59.753 -48.504,-108.265 -108.247,-108.265Z"/></svg>`},gridViewIcon:function(color){return`<svg width="100%" height="100%" viewBox="0 0 1049 1046" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/"><path fill="${color}" d="M488.48,129.783l-0,228.6c-0,71.629 -58.192,129.783 -129.867,129.783l-228.746,-0c-71.676,-0 -129.867,-58.154 -129.867,-129.783l-0,-228.6c-0,-71.629 58.191,-129.783 129.867,-129.783l228.746,-0c71.675,-0 129.867,58.154 129.867,129.783Zm-0,557.758l-0,228.599c-0,71.63 -58.192,129.784 -129.867,129.784l-228.746,-0c-71.676,-0 -129.867,-58.154 -129.867,-129.784l-0,-228.599c-0,-71.629 58.191,-129.783 129.867,-129.783l228.746,-0c71.675,-0 129.867,58.154 129.867,129.783Zm560.402,-557.758l0,228.6c0,71.629 -58.191,129.783 -129.866,129.783l-228.746,-0c-71.676,-0 -129.867,-58.154 -129.867,-129.783l-0,-228.6c-0,-71.629 58.191,-129.783 129.867,-129.783l228.746,-0c71.675,-0 129.866,58.154 129.866,129.783Zm0,557.758l0,228.599c0,71.63 -58.191,129.784 -129.866,129.784l-228.746,-0c-71.676,-0 -129.867,-58.154 -129.867,-129.784l-0,-228.599c-0,-71.629 58.191,-129.783 129.867,-129.783l228.746,-0c71.675,-0 129.866,58.154 129.866,129.783Z"/></svg>`},listViewIcon:function(color){return`<svg width="100%" height="100%" viewBox="0 0 4371 4359" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/"><path fill="${color}" d="M4370.83,3798.15l0,248.24c0,172.168 -139.778,311.946 -311.946,311.946l-3746.95,0c-172.168,0 -311.946,-139.778 -311.946,-311.946l-0,-248.24c-0,-172.168 139.778,-311.947 311.946,-311.947l3746.95,0c172.168,0 311.946,139.779 311.946,311.947Zm0,-2324.89l0,248.24c0,172.168 -139.778,311.946 -311.946,311.946l-3746.95,0c-172.168,0 -311.946,-139.778 -311.946,-311.946l-0,-248.24c-0,-172.168 139.778,-311.947 311.946,-311.947l3746.95,0c172.168,0 311.946,139.779 311.946,311.947Zm0,1164.4l0,248.24c0,172.168 -139.778,311.947 -311.946,311.947l-3746.95,-0c-172.168,-0 -311.946,-139.779 -311.946,-311.947l-0,-248.24c-0,-172.168 139.778,-311.946 311.946,-311.946l3746.95,-0c172.168,-0 311.946,139.778 311.946,311.946Zm0,-2324.89l0,248.24c0,172.168 -139.778,311.947 -311.946,311.947l-3746.95,-0c-172.168,-0 -311.946,-139.779 -311.946,-311.947l-0,-248.24c-0,-172.168 139.778,-311.946 311.946,-311.946l3746.95,-0c172.168,-0 311.946,139.778 311.946,311.946Z"/></svg>`},checkBox:function(color,back=null){const uncheckColorList=[AbstractNode.colorExtended.gray3,AbstractNode.colorExtended.gray4,AbstractNode.colorExtended.gray2,AbstractNode.colorExtended.deactive,AbstractNode.colorExtended.gradientGray],checkColorList=[AbstractNode.colorExtended.mint,AbstractNode.colorExtended.blue,AbstractNode.colorExtended.black,AbstractNode.colorExtended.red,AbstractNode.colorExtended.gradientBlue];let uncheck,uncheckColor,checkColor,whiteBack;return whiteBack=null===back?AbstractNode.colorExtended.white:back,uncheckColorList.includes(color)?(uncheck=!0,uncheckColor=color,checkColor=checkColorList[0]):checkColorList.includes(color)?(uncheck=!1,uncheckColor=uncheckColorList[0],checkColor=color):(uncheck=!1,uncheckColor=uncheckColorList[0],checkColor=checkColorList[0]),uncheck?`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 160.654 160.654">\n        <g style="opacity:1;" class="uncheckbox">\n          <path d="M145.66 0H14.993C6.713 0 0 6.713 0 14.993v130.667c0 8.281 6.713 14.993 14.993 14.993h130.667c8.281 0 14.993-6.713 14.993-14.993V14.993C160.654 6.713 153.941 0 145.66 0z" fill="${uncheckColor}"/>\n        </g>\n        <g style="opacity:0;" class="checkbox">\n          <path d="M145.66 0H14.993C6.713 0 0 6.713 0 14.993v130.667c0 8.281 6.713 14.993 14.993 14.993h130.667c8.281 0 14.993-6.713 14.993-14.993V14.993C160.654 6.713 153.941 0 145.66 0z" fill="${whiteBack}"/>\n          <path d="M145.66 0H14.993C6.713 0 0 6.713 0 14.993v130.667c0 8.281 6.713 14.993 14.993 14.993h130.667c8.281 0 14.993-6.713 14.993-14.993V14.993C160.654 6.713 153.941 0 145.66 0zM139.273 48.929l-71.955 77.279c-1.129 1.214-2.728 1.91-4.385 1.91 0 0-0.001 0-0.001 0 -1.658 0-3.257-0.696-4.387-1.909L19.522 84.299c-2.252-2.418-2.116-6.219 0.303-8.471l6.544-6.09c1.171-1.091 2.707-1.672 4.298-1.602 1.6 0.057 3.083 0.735 4.174 1.907l28.047 30.142 61.081-65.511 0 0 0 0c1.09-1.172 2.572-1.849 4.173-1.906 1.616-0.05 3.128 0.513 4.3 1.605l6.531 6.087c1.169 1.087 1.847 2.569 1.905 4.17C140.935 46.231 140.365 47.757 139.273 48.929z" fill="${checkColor}"/>\n        </g>\n        </svg>`:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 160.654 160.654">\n        <g style="opacity:1;" class="uncheckbox">\n          <path d="M145.66 0H14.993C6.713 0 0 6.713 0 14.993v130.667c0 8.281 6.713 14.993 14.993 14.993h130.667c8.281 0 14.993-6.713 14.993-14.993V14.993C160.654 6.713 153.941 0 145.66 0z" fill="${uncheckColor}"/>\n        </g>\n        <g style="opacity:1;" class="checkbox">\n          <path d="M145.66 0H14.993C6.713 0 0 6.713 0 14.993v130.667c0 8.281 6.713 14.993 14.993 14.993h130.667c8.281 0 14.993-6.713 14.993-14.993V14.993C160.654 6.713 153.941 0 145.66 0z" fill="${whiteBack}"/>\n          <path d="M145.66 0H14.993C6.713 0 0 6.713 0 14.993v130.667c0 8.281 6.713 14.993 14.993 14.993h130.667c8.281 0 14.993-6.713 14.993-14.993V14.993C160.654 6.713 153.941 0 145.66 0zM139.273 48.929l-71.955 77.279c-1.129 1.214-2.728 1.91-4.385 1.91 0 0-0.001 0-0.001 0 -1.658 0-3.257-0.696-4.387-1.909L19.522 84.299c-2.252-2.418-2.116-6.219 0.303-8.471l6.544-6.09c1.171-1.091 2.707-1.672 4.298-1.602 1.6 0.057 3.083 0.735 4.174 1.907l28.047 30.142 61.081-65.511 0 0 0 0c1.09-1.172 2.572-1.849 4.173-1.906 1.616-0.05 3.128 0.513 4.3 1.605l6.531 6.087c1.169 1.087 1.847 2.569 1.905 4.17C140.935 46.231 140.365 47.757 139.273 48.929z" fill="${checkColor}"/>\n        </g>\n        </svg>`},furnitureIllust:function(index,color){return[`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 595.2756 535.4619" xml:space="preserve"><path fill="${color}" d="M332.7396,139.7497c3.0963,0.8314,6.2588,1.5842,9.4388,1.9091c24.7999,2.5337,49.5469,5.4344,74.1574,9.4683 c14.6825,2.4066,29.3069,5.0244,43.8049,8.4171c18.1242,4.2412,33.8917,12.5978,46.6291,26.1853 c15.8197,16.8755,28.2367,35.9865,36.5473,57.6608c0.5755,1.5009,1.175,2.9934,1.8015,4.4736 c2.8145,6.6496,5.7427,13.2529,8.4455,19.9474c5.6371,13.9627,11.1573,27.9727,16.7284,41.9622 c0.1486,0.3731,0.3301,0.7331,0.4937,1.1003c4.001,8.9805,8.0886,17.9237,11.9805,26.9512 c5.0205,11.6456,7.8802,24.03,12.0489,35.9701c0.3237,0.9276,0.3961,1.9678,0.4418,2.9623 c0.0834,1.8186-0.0897,3.5645-1.1396,5.1959c-1.6218,2.5198-3.2045,5.0799-4.587,7.7356 c-2.7748,5.3299-7.024,8.7241-12.8415,10.0839c-1.3246,0.3096-2.8798,0.5105-4.1279,0.1199 c-5.851-1.8312-11.2617-4.4129-14.2674-10.2413c-3.498-6.7829-7.1647-13.4889-10.3862-20.4016 c-3.3046-7.0912-6.2961-14.3381-9.1651-21.6192c-2.0001-5.0759-4.743-9.7386-7.2832-14.5201 c-1.5068-2.8363-3.0419-5.662-4.6916-8.4161c-1.2065-2.0142-2.332-2.386-4.5632-1.7107c-1.1473,0.3473-2.2468,0.8659-3.3463,1.3558 c-4.4017,1.961-8.7791,3.9773-13.1947,5.9064c-9.0163,3.9393-18.055,7.8271-27.0762,11.7549 c-2.3905,1.0408-4.7531,2.1462-7.1252,3.229c-6.3953,2.919-12.6712,6.1419-19.2058,8.7052 c-17.3988,6.8248-34.9088,13.3663-52.3747,20.02c-0.3758,0.1432-0.7571,0.2727-1.1296,0.4236 c-11.3533,4.6005-22.5996,9.4788-34.3336,13.0877c-0.8744,0.2689-1.5922,1.0468-2.3519,1.5668 c0.4031,3.0189,2.3575,4.9301,3.6719,7.1305c6.5076,10.894,12.2817,22.0721,15.9669,34.3204 c2.0776,6.9052,4.5812,13.8065,7.9029,20.1835c4.7129,9.0481,7.1737,18.7311,9.5209,28.4623 c1.4867,6.1637,0.085,11.8853-4.6304,16.6476c-4.0788,4.1195-10.3311,4.2913-14.4164,8.3972 c-1.0247,1.0299-2.9134,1.3537-4.4719,1.6479c-1.1068,0.2089-2.684,0.2546-3.435-0.3688 c-3.9778-3.3018-8.5917-6.1242-10.2136-11.5145c-1.2365-4.1098-3.6215-7.5901-5.9147-11.1319 c-1.7464-2.6972-3.5266-5.3788-5.1351-8.158c-9.255-15.9908-18.4114-32.0388-27.7092-48.0047 c-4.7524-8.1609-9.7642-16.1704-14.5807-24.2946c-1.1962-2.0178-2.6429-3.3628-5.03-3.8735 c-7.8585-1.6812-15.6287-3.836-23.5369-5.2115c-17.2276-2.9967-34.5118-5.6734-51.7888-8.3798 c-6.7505-1.0575-13.523-2.0545-20.3212-2.7094c-13.8046-1.3298-27.6323-2.4211-41.4543-3.5644 c-1.1222-0.0928-2.2738,0.1689-3.8243,0.3011c0.1736,1.9041,0.1839,3.4793,0.4786,4.9994c1.3375,6.9008,2.791,13.779,4.1344,20.6786 c1.4969,7.6883,2.6494,15.4543,4.4324,23.074c3.5262,15.0689,6.7789,30.1687,8.4887,45.5749 c1.1738,10.577,2.7789,21.1107,3.7381,31.7049c0.4485,4.9545,0.3226,10.0828-0.4345,14.995 c-1.0212,6.6255-4.8939,11.3329-11.6487,13.2225c-2.5125,0.7029-4.9777,1.5952-7.5163,2.1733 c-1.0943,0.2492-2.365,0.0999-3.4782-0.1781c-4.1081-1.0256-6.6936-4.1609-9.6063-6.9285c-2.0396-1.9378-3.0667-4.0028-3.3021-6.79 c-0.388-4.5971-0.8856-9.2089-1.7414-13.7381c-2.7593-14.6032-5.5177-29.2117-8.6612-43.7349 c-1.3914-6.4281-2.0732-13.1391-5.6674-18.9703c-0.7045-1.143-0.8176-2.6692-1.1231-4.0367 c-2.5396-11.3676-5.021-22.7484-7.6169-34.1031c-0.5794-2.5345-1.3018-5.0908-2.378-7.4453 c-1.936-4.236-3.1037-8.6691-4.1688-13.1636c-0.3153-1.3305-0.7574-2.7494-1.5543-3.8209 c-1.3629-1.8325-2.0775-3.8367-2.6708-5.9933c-1.6491-5.994-3.3977-11.9614-5.1793-17.9177 c-1.036-3.4638-2.3076-6.8583-3.3046-10.3324c-2.3797-8.2926-4.3621-16.7114-7.0462-24.9019 c-4.5019-13.7373-9.4254-27.3364-14.2038-41.0869c-1.8762-1.5958-4.2867-1.8938-6.6673-2.2359 c-7.3698-1.0592-14.6543-2.4855-21.8018-4.6173c-7.3885-2.2037-13.6225-6.0925-17.7889-12.6438 c-2.6847-4.2211-5.0061-8.7087-7.1109-13.2526c-2.0106-4.3406-0.3493-8.4311,3.9417-10.6089 c3.0905-1.5685,6.3745-2.4476,9.8995-2.0925c4.3994,0.4434,8.798,0.9004,13.2029,1.2822c1.1252,0.0975,2.2733-0.0669,3.8188-0.1268 c-0.3487-1.3896-0.4022-2.4101-0.8416-3.2216c-2.677-4.9433-5.2598-9.9519-8.2204-14.724 c-4.249-6.8488-7.6193-14.1298-11.2034-21.3162c-2.9537-5.9224-5.6922-11.9569-9.4603-17.4654 c-2.6018-3.8033-5.1837-7.7225-7.029-11.9177c-2.9892-6.7958-5.4508-13.8302-7.9759-20.8214 c-2.1149-5.8556-4.1335-11.7355-7.1657-17.2086c-0.6771-1.2222-1.281-2.5322-1.6378-3.8762 c-1.492-5.6215-3.003-11.243-4.2735-16.9169c-2.1212-9.4723-2.268-19.1463-2.3227-28.7847 c-0.0214-3.7775,0.5568-7.6477,1.4824-11.3194c1.2248-4.8589,2.7052-9.9059,7.1082-12.9254 c3.2748-2.2457,6.8605-4.3706,10.6227-5.5039c7.6787-2.3131,15.5416-4.0487,23.3806-5.7876 c9.6052-2.1307,19.2761-3.9642,28.8956-6.0324c8.8333-1.8992,17.5876-4.0717,26.2787-6.6093 c10.5876-3.0914,21.385-5.4788,32.1254-8.0282c10.7498-2.5516,21.5122-5.065,32.3223-7.3428 c11.6009-2.4444,23.1414-5.1349,34.5303-8.3994c11.7834-3.3775,23.6108-6.4754,35.5965-9.0994 c9.064-1.9844,16.5571,1.2762,23.9214,5.3362c3.0941,1.7058,5.6759,4.4767,8.2056,7.0441 c8.6732,8.8021,15.6011,18.8866,21.0367,29.9547c2.2968,4.6764,4.2676,9.5361,6.0539,14.4338 c1.9245,5.2767,3.4661,10.6935,5.1602,16.0538c0.4837,1.5305,0.9898,3.0596,1.3598,4.6191 c1.2969,5.4655,2.5218,10.9481,3.8078,16.4163c0.8265,3.5142,1.5122,7.0788,2.614,10.5073 c2.277,7.0862,4.2509,14.2319,5.5627,21.5656c0.4916,2.7482,1.0852,5.5207,2.6663,7.5326 C319.6233,136.0326,326.157,137.9823,332.7396,139.7497z M195.7266,334.8376c0.115,0.074,0.2235,0.1926,0.3468,0.2109 c0.1661,0.0247,0.3436-0.0277,0.5163-0.0469c0.8949,0.1009,1.789,0.2023,2.683,0.3037c0.8951,0.1,1.7893,0.2008,2.6834,0.3017 c0.8902,0.1047,1.7794,0.2102,2.6686,0.3158c0.89,0.1076,1.7793,0.2159,2.6687,0.3241c1.7258,0.4581,3.4254,1.1022,5.1806,1.3455 c10.7149,1.4858,21.4287,2.9958,32.1698,4.2724c10.3391,1.2287,20.7098,2.1933,31.0695,3.2462 c0.9248,0.0939,1.8704-0.0164,2.8369-0.0323c-0.1296-1.9984-1.4934-2.1251-2.5713-2.29c-4.1591-0.6366-8.3275-1.2484-12.5123-1.6755 c-16.7445-1.7092-33.4939-3.372-50.2489-4.9738c-1.9599-0.1874-3.9664,0.1104-5.9512,0.1832 c-0.8921-0.1018-1.7841-0.2037-2.6762-0.3055c-0.8878-0.1109-1.7757-0.2218-2.6636-0.3327 c-0.8936-0.1035-1.7872-0.2071-2.6807-0.3105c-0.895-0.0994-1.79-0.1989-2.685-0.2982 C196.2829,334.9962,196.0048,334.9169,195.7266,334.8376z M161.6603,369.5204c0.8876,0.1084,1.774,0.2182,2.6603,0.328 c0.8978,0.0987,1.795,0.1983,2.6921,0.2978c4.753,0.6582,9.4878,1.5069,14.2602,1.9421 c17.4027,1.5873,34.7876,3.2138,51.9924,6.4546c13.8143,2.6022,27.73,4.6694,41.5383,7.3013 c8.8506,1.687,17.5878,3.9686,26.5735,6.029c0.7658-0.4977,0.1757-1.2978-0.1406-1.9502c-1.0476-2.1613-2.0965-4.3326-3.341-6.381 c-0.3443-0.5668-1.3384-0.8608-2.0909-1.0312c-1.3666-0.3094-2.7722-0.4594-4.1673-0.6291 c-19.1403-2.3272-38.2483-4.9838-57.4316-6.8764c-20.9787-2.0698-42.0263-3.4438-63.0477-5.0731 c-1.3766-0.1067-2.7849,0.1945-4.1785,0.306c-0.8972-0.0999-1.7945-0.1997-2.6917-0.2996 c-0.8849-0.1172-1.7697-0.2343-2.6546-0.3515C161.4248,369.4766,161.6811,369.5547,161.6603,369.5204z M253.6469,256.0851 c16.1509-4.2582,31.7336-10.2146,47.4446-15.8059c11.3701-4.0465,22.3753-8.9539,33.5587-13.4392 c6.7075-2.6901,13.6011-4.9174,20.4182-7.3324c3.2194-1.1405,6.4662-2.2045,9.6759-3.3706 c0.6792-0.2468,1.2514-0.7882,1.7902-1.1399c-0.1317-0.4921-0.1242-0.7865-0.2389-0.846 c-6.1525-3.1951-11.1552-7.7262-15.6377-12.9707c-2.0753-2.4281-4.5721-4.5206-7.0146-6.6049 c-4.1562-3.5468-7.7419-7.5493-10.8488-12.0553c-2.6035-3.7758-5.3023-7.4488-9.1615-10.2492 c-1.9943-1.4472-3.2168-4.0428-4.5861-6.2451c-2.0086-3.2307-3.7102-6.6558-5.7809-9.8433 c-1.6614-2.5574-2.935-5.0427-3.2907-8.2249c-0.3735-3.3413-1.8229-6.5546-2.7184-9.8467 c-1.58-5.8092-3.0791-11.6404-4.6471-17.4529c-0.7832-2.9035-1.6476-5.7851-2.4684-8.6785 c-1.3682-4.8241-2.8091-9.6293-4.0764-14.4798c-1.6741-6.4068-3.1335-12.8702-4.8391-19.2682 c-0.8261-3.0985-1.8997-6.143-3.0421-9.143c-2.8562-7.5002-5.2186-15.1731-8.9116-22.373 c-4.9012-9.5554-10.9582-18.2319-18.1716-26.1404c-3.2418-3.5542-6.4-7.1538-10.2595-10.1326 c-4.7654-3.6778-9.7476-5.1848-15.7381-3.7245c-8.9743,2.1877-17.9226,4.3745-26.798,7.0114 c-18.2594,5.4248-36.5602,10.7776-55.2984,14.4448c-5.6999,1.1155-11.2578,2.9443-16.901,4.3661 c-10.7051,2.6971-21.4321,5.3079-32.1351,8.0132c-4.474,1.1308-8.8767,2.5561-13.3703,3.5943 c-10.17,2.3498-20.3846,4.5055-30.5657,6.8082c-12.1433,2.7466-24.2728,5.5546-36.4011,8.3666 c-1.1691,0.2711-2.2956,0.7376-3.4292,1.1481C12.6627,63.2017,8.065,69.1555,7.9907,77.2655 c-0.0681,7.4178,0.2732,14.8597,1.8074,22.1713c1.7726,8.4483,3.5482,16.8962,5.3829,25.3311 c0.3827,1.7594,0.9634,3.4848,1.568,5.185c1.7507,4.9237,3.6708,9.7897,5.3209,14.7461c2.6129,7.8485,6.0492,15.3064,10.1484,22.475 c0.3982,0.6963,0.8203,1.3965,1.0906,2.1457c2.4178,6.7005,6.2672,12.5214,10.712,18.0367 c6.6107,8.2032,11.1255,17.6067,15.1878,27.2522c3.1946,7.5857,6.4636,15.14,9.6733,22.7194 c0.6892,1.6275,1.8301,2.5836,3.5811,2.8297c1.3933,0.1958,2.7809,0.4335,4.1753,0.6209 c6.1734,0.8295,12.3521,1.6204,18.5217,2.4777c5.5985,0.7778,11.2129,0.6726,16.8342,0.4373 c11.6465-0.4874,23.2932-0.885,34.9359,0.0728c2.8024,0.2305,5.603,0.4885,8.4001,0.7749 c13.9897,1.4323,27.981,2.8491,41.9658,4.3282c12.0255,1.2719,23.823,3.7014,35.4077,7.1688 c4.041,1.2095,8.092,2.3852,12.8284,3.7794C247.7899,257.414,250.7462,256.8499,253.6469,256.0851z M269.1768,271.2634 c6.6449,4.1978,12.7794,9.0255,18.1714,14.8029c5.2075,5.5799,10.5815,11.0065,15.9471,16.4366 c8.5328,8.6353,15.0223,18.8137,21.8579,28.7335c1.7094,2.4807,3.3485,5.0119,5.1212,7.4462 c1.9041,2.6146,2.7572,2.7712,5.5218,1.5104c2.1894-0.9985,4.3787-2.0103,6.6231-2.8729 c9.1915-3.5323,18.4875-6.8077,27.5869-10.5611c10.1956-4.2054,20.2094-8.8502,30.3231-13.2561 c7.3644-3.2082,14.7456-6.3795,22.1506-9.4929c7.4005-3.1116,14.8419-6.1259,22.2616-9.1919 c11.5004-4.752,23.0778-9.33,34.4626-14.3446c5.697-2.5093,11.3384-5.1023,17.2091-7.1964 c5.263-1.8773,10.7768-3.0738,15.7027-5.9066c1.1481-0.6602,2.7003-0.6142,4.0643-0.904c1.1673-0.248,2.3693-0.4032,3.4875-0.7948 c1.5074-0.5279,2.0687-1.9616,1.4094-3.4245c-0.9046-2.0074-2.2761-3.8922-2.749-5.9872 c-0.8517-3.7728-2.7475-7.0899-3.9956-10.6732c-1.3565-3.8944-3.8493-6.113-7.9543-7.3603 c-11.9345-3.6263-24.004-6.6864-36.1558-9.4371c-16.4612-3.7263-32.9586-7.3384-49.7471-9.2625 c-11.3971-1.3062-22.8644-1.4996-34.3068-0.5476c-6.2449,0.5195-12.1289,2.6978-18.0175,4.7187 c-2.4658,0.8462-4.8909,1.8108-7.3582,2.6521c-11.4064,3.8894-22.8427,7.6932-33.8424,12.6728 c-1.8274,0.8273-3.7393,1.4725-5.6272,2.1609c-12.6527,4.6137-25.3198,9.1877-37.9608,13.8332 c-7.5493,2.7743-15.1577,5.3289-23.0288,7.0498c-1.1203,0.2449-2.1793,0.7707-4.1789,1.4985 C261.2621,266.5725,265.2892,268.8075,269.1768,271.2634z M293.8044,370.9929c-2.2664-4.4706-4.7064-8.8529-7.0432-13.2883 c-1.1208-2.1273-2.9167-3.2677-5.1922-3.7297c-5.1169-1.039-10.202-2.3487-15.3694-3.0005 c-9.9638-1.2567-19.9793-2.1004-29.9663-3.1804c-6.9892-0.7558-13.9753-1.5536-20.9475-2.4508 c-9.5641-1.2307-19.1199-2.5308-28.6683-3.8783c-13.5355-1.9102-27.1193-3.2725-40.7758-3.9291 c-2.4034-0.1156-4.7923-0.5247-7.1887-0.7908c-3.0119-0.3344-4.8451-2.1099-5.2426-4.9817 c-1.2017-8.6822-5.2856-16.4154-7.8673-24.6387c-2.2327-7.1114-5.5037-13.7825-8.5416-20.5558 c-0.794-1.7702-1.8616-3.1399-3.923-3.2709c-6.37-0.4047-12.732-1.2117-19.5406-0.7158c0.4434,4.2217,1.4078,8.0122,2.5567,11.7955 c4.3143,14.2061,8.9229,28.3314,12.0545,42.8711c0.1687,0.7831,0.4131,1.554,0.6761,2.312 c3.5554,10.2479,6.9382,20.5605,10.7373,30.7175c3.3872,9.0561,5.4716,18.4687,8.235,27.6928 c1.3244,4.4207,2.5501,8.8711,3.8011,13.3136c2.3369,8.2988,5.0227,16.5197,6.916,24.9189 c4.5876,20.351,8.8348,40.7792,13.1455,61.1919c0.995,4.7121,1.6735,9.4905,2.5448,14.2296 c0.215,1.1694,0.3152,2.5333,0.9864,3.4121c1.8094,2.369,2.3821,5.0397,2.6327,7.8777c0.1338,1.5141,0.7642,2.7152,2.3751,3.0928 c1.5445,0.3621,3.0647-0.4312,3.928-2.1033c1.5345-2.9723,1.761-6.1318,1.2223-9.3873c-0.9179-5.5469-1.8998-11.0848-2.7144-16.647 c-1.658-11.3217-2.9709-22.6998-4.8812-33.9774c-3.3179-19.5878-6.2944-39.2364-11.2556-58.5291 c-2.9467-11.4591-5.1-23.127-7.4482-34.7336c-1.532-7.5725-0.3533-9.0221,7.292-9.1876c5.4096-0.1172,10.8426-0.1732,16.2361,0.1818 c16.6401,1.0955,33.2969,2.0904,49.8901,3.708c18.5948,1.8128,37.1275,4.2608,55.6868,6.437 c5.9767,0.7009,11.9793,1.081,17.7802,3.0406c2.5781,0.871,5.4836,0.7735,9.2415,1.2398 C294.5377,373.6175,294.4085,372.1848,293.8044,370.9929z M340.5264,354.6234c3.938,6.5336,7.877,13.0668,11.8674,19.5683 c1.455,2.3707,2.579,5.0382,5.1485,6.4603c0.4687,0.0183,0.9174,0.1647,1.2539,0.0301c7.086-2.8352,14.149-5.7281,21.2394-8.552 c3.5483-1.4131,7.11-2.806,10.7213-4.0457c14.4617-4.9644,28.4979-10.998,42.6101-16.8422 c9.8327-4.0719,19.6813-8.1061,29.4977-12.2172c4.812-2.0152,9.5721-4.1546,14.3463-6.2594 c11.7646-5.1866,23.5355-10.3596,35.2793-15.5932c4.402-1.9617,8.7574-4.0319,13.0928-6.1377 c2.5223-1.2252,4.9359-2.5475,6.4982-5.1432c0.7748-1.2875,2.288-2.131,3.4335-3.1454c-0.6791-3.5378-8.015-24.8731-10.2387-29.6181 c-0.4091-0.8728-1.1193-1.6046-1.7678-2.5093c-1.0923,0.2338-2.1262,0.2756-2.998,0.6728 c-3.8341,1.7471-7.6262,3.587-11.4204,5.4204c-0.5359,0.259-1.1255,0.5689-1.4773,1.021c-3.1099,3.997-7.6449,5.7541-12.0462,7.6964 c-6.2418,2.7543-12.4236,5.6812-18.7995,8.0877c-14.859,5.6082-29.8272,10.9269-44.7348,16.4075 c-10.0007,3.6767-20.1629,6.9996-29.8954,11.2915c-7.1701,3.1619-14.4459,6.0327-21.642,9.1093 c-6.082,2.6002-11.9691,5.6559-18.0498,8.2592c-6.0954,2.6096-12.3254,4.9041-18.4926,7.3463 c-2.0215,0.8005-4.031,1.6309-6.8118,2.7581C338.5692,351.1991,339.5087,352.9348,340.5264,354.6234z M386.1299,479.7303 c-1.9594-10.2501-3.6714-20.5607-6.0715-30.708c-1.3308-5.6259-3.5957-11.0757-5.8672-16.4232 c-2.9788-7.0125-6.4707-13.805-9.5757-20.7662c-4.009-8.9883-8.1523-17.8908-13.6758-26.0835 c-0.7777-1.1536-1.6299-2.4295-1.8579-3.7506c-0.8872-5.1399-3.7203-9.2818-6.5584-13.4165 c-10.116-14.7372-20.2385-29.4706-30.4506-44.1413c-7.8554-11.2854-17.9118-20.5754-27.6288-30.1783 c-6.4581-6.3823-13.3587-12.1516-21.0422-17.0099c-5.1231-3.2394-10.4906-5.9709-16.1905-7.9616 c-13.2909-4.6417-26.7625-8.6818-40.7031-10.8879c-5.5526-0.8787-11.1498-1.5037-16.7427-2.0928 c-12.1853-1.2835-24.3824-2.4549-36.5717-3.7011c-8.1974-0.838-16.3854-1.3654-24.6536-1.1961 c-7.6163,0.156-15.274-0.1734-22.8681-0.8209c-12.2052-1.0407-24.3717-2.5293-36.5566-3.8097 c-7.9929-0.8399-15.982-1.7354-23.9894-2.4084c-2.1499-0.1807-4.3946,0.2028-6.5251,0.6581 c-0.7449,0.1592-1.6877,1.2557-1.7951,2.0277c-0.1139,0.819,0.4178,2.1038,1.0936,2.5754c1.282,0.8951,2.8123,1.5943,4.3385,1.9485 c3.713,0.8615,7.4538,1.7551,11.2342,2.1499c24.1742,2.5242,48.3517,5.0273,72.5493,7.3143 c15.9958,1.5118,32.0194,2.7546,48.0445,3.9284c16.0678,1.1769,31.9114,3.8031,47.6884,6.9149 c8.1666,1.6107,15.6922,4.8958,22.9035,8.9897c8.1175,4.6083,14.9265,10.8436,21.6956,17.1503 c18.4559,17.1954,33.9467,36.9565,49.2641,56.8665c1.096,1.4247,2.0645,2.9827,2.8697,4.5902 c4.8583,9.6983,10.5266,18.9395,16.0545,28.2508c5.635,9.4918,11.823,18.6566,17.4139,28.173 c4.2631,7.2563,8.0442,14.8011,11.9004,22.2892c2.3862,4.6334,4.5329,9.3908,6.7498,14.1102 c3.9248,8.3556,7.7942,16.7372,11.7481,25.0788c0.9837,2.0754,2.201,4.0403,3.3109,6.0559c0.2365-0.0839,0.473-0.1677,0.7096-0.2515 C386.2993,482.0386,386.3456,480.8594,386.1299,479.7303z M581.7056,390.2634c3.2867-3.2018,5.3189-7.0578,5.7459-11.6385 c0.126-1.3529-0.03-2.8206-0.4315-4.1198c-3.0816-9.9702-5.5418-20.1444-9.576-29.8049c-1.7004-4.0721-3.6208-8.0528-5.2973-12.1342 c-6.1009-14.8516-11.7742-29.8922-18.3276-44.54c-4.6839-10.4695-7.9744-21.4652-12.8337-31.8297 c-5.1911-11.0723-9.1329-22.7213-15.5517-33.23c-8.1973-13.4205-17.1661-26.2049-29.091-36.6581 c-7.7862-6.8252-16.2632-12.4953-26.3484-15.3326c-9.2793-2.6106-18.5215-5.4327-27.925-7.5045 c-17.6604-3.8911-35.5008-6.8683-53.4224-9.334c-12.937-1.7799-25.8622-3.6462-38.7981-5.4351 c-1.9835-0.2743-4.0062-0.2603-5.9923-0.5203c-2.774-0.3632-5.5809-0.6594-8.2838-1.3402 c-5.2583-1.3245-10.4487-2.9167-15.6804-4.3502c-1.1515-0.3156-2.351-0.4927-3.5407-0.6204 c-0.9806-0.1052-1.7716,1.1562-1.4818,2.1339c0.4409,1.4874,1.468,2.3847,2.8646,2.8571c5.5125,1.8647,10.9691,3.8331,16.7837,4.748 c10.7126,1.6856,21.3738,3.6962,32.0609,5.5453c6.3354,1.0962,12.7218,1.9404,19.0107,3.2543 c12.5837,2.6293,25.111,5.5269,37.6715,8.2686c8.2437,1.7994,16.5313,3.4047,24.7525,5.2997 c16.1969,3.7334,30.4297,11.2762,42.6695,22.5234c1.7695,1.6259,3.4333,3.395,4.9619,5.2496 c4.982,6.0444,9.9171,12.1287,14.7916,18.2601c2.2662,2.8506,3.7585,5.9223,4.1693,9.7786c0.3501,3.287,1.8349,6.5799,3.3743,9.5851 c2.6658,5.2041,4.6046,10.6923,6.9475,16.014c6.8081,15.4644,11.9274,31.5577,18.0763,47.2614 c3.7296,9.5247,7.9739,18.8477,11.9747,28.2665c0.5496,1.2939,1.0435,2.6122,1.5357,3.9295 c1.6157,4.3228,3.5045,8.5226,5.3622,12.7451c2.8212,6.4128,4.7878,13.2051,7.0442,19.8611 c0.9661,2.8499,1.7485,5.762,2.6129,8.6463c0.4606,1.5369,1.0778,3.0472,1.3487,4.6171c1.0571,6.1251,1.0161,6.1322,4.5993,11.4105 C579.2306,392.296,580.5287,391.4099,581.7056,390.2634z M44.983,263.9904c2.8637,2.2842,6.1976,3.698,9.6955,4.7233 c9.4925,2.7826,19.2483,4.169,29.0477,5.173c3.7697,0.3862,7.6221-0.1204,11.4232,0.0624 c21.282,1.0238,42.5704,1.9648,63.8352,3.2786c12.6349,0.7806,25.2395,2.104,37.8407,3.3551 c8.8692,0.8806,17.2441,3.874,25.6438,6.6336c5.5346,1.8184,10.9745,3.927,16.4422,5.9457 c4.9368,1.8227,9.5053,4.385,13.7493,7.4504c2.091,1.5103,4.0279,3.3482,5.6769,5.3347c4.8801,5.879,9.2863,12.0988,13.1854,18.6958 c1.7238,2.9167,3.9326,5.583,6.1579,8.1587c3.1592,3.6565,6.2892,7.2935,8.6663,11.5464c1.3687,2.4486,3.0296,4.7404,4.6409,7.0456 c3.7032,5.2983,6.5711,11.0031,9.0701,16.9708c4.0309,9.6262,8.648,18.925,14.6868,27.5629 c11.6399,16.6504,21.9994,34.0702,30.3178,52.6807c2.1923,4.9048,5.6756,9.2212,8.4244,13.8912 c5.809,9.8692,11.5316,19.7893,17.2729,29.6982c1.1989,2.0692,2.3711,4.1423,4.2218,5.4662 c2.1309-0.0628,3.3945-1.2235,3.9843-2.681c0.5692-1.4064,0.7567-3.1129,0.6057-4.6375c-0.445-4.493-2.7527-8.3735-4.5786-12.3812 c-2.9946-6.5727-6.2745-13.0153-9.2717-19.587c-8.1702-17.9146-16.6647-35.6441-27.0935-52.4033 c-6.1523-9.8868-11.8855-20.0352-17.7625-30.0921c-1.2194-2.0867-2.3584-4.0961-4.5405-5.4693 c-1.2824-0.8072-2.3692-2.2305-3.0651-3.617c-8.1057-16.149-19.3908-29.964-31.481-43.2022 c-8.5524-9.3647-17.7489-18.0667-27.3053-26.3852c-7.0285-6.118-14.8914-10.9621-23.5998-14.32 c-2.7979-1.0789-5.7316-1.8816-8.6669-2.5168c-18.8954-4.0883-37.9977-6.6044-57.2986-7.8777 c-15.2378-1.0051-30.4406-2.547-45.6552-3.8919c-14.4129-1.274-28.8361-2.4568-43.2258-3.9569 c-9.7917-1.0207-19.5337-2.5179-29.2975-3.805c-0.971-0.128-1.9394-0.2761-4.5214-0.6458 C43.67,262.2342,44.1537,263.3289,44.983,263.9904z M255.3168,312.1895c-3.1757-3.8289-6.8624-6.7812-11.2816-8.7827 c-4.9293-2.2325-9.9415-4.3369-15.0575-6.0886c-6.8338-2.3398-13.7485-4.4901-20.7313-6.332 c-4.8325-1.2746-9.8036-2.3054-14.7737-2.7251c-16.0027-1.3513-32.0331-2.3765-48.0544-3.5049 c-1.9663-0.1384-3.9855-0.547-6.1044,0.5991c-0.1496,4.3857,2.2886,8.0002,3.4622,11.9453 c1.1432,3.8434,2.6083,7.5969,3.6266,11.4701c1.0758,4.0918,2.4027,8.0559,4.4062,12.1902c0.3652,0.1073,0.9259,0.3547,1.509,0.4315 c17.5151,2.308,35.0208,4.6941,52.5538,6.8574c10.3585,1.278,20.7764,2.0721,31.1395,3.3164 c10.7636,1.2925,21.4931,2.8689,32.2391,4.3089c0.9667,0.1295,1.9457,0.1682,3.859,0.3271 C266.3175,327.4415,261.3517,319.4661,255.3168,312.1895z M343.611,185.8609c1.9261,2.0378,4.133,3.8072,6.1219,5.7894 c2.84,2.8306,5.8114,5.5697,8.3383,8.6649c4.3781,5.3624,10.193,8.3217,16.4708,10.6091c1.8768,0.6838,3.8085,0.8414,5.9005,0.5187 c3.5527-0.548,7.1753-0.7976,10.7743-0.8656c19.3841-0.3664,38.4207,2.2815,57.2386,6.7651 c9.1718,2.1853,18.3582,4.3091,27.5439,6.4354c0.5515,0.1276,1.155,0.0306,1.673,0.0374c0.8694-1.1491,0.1443-1.9646-0.3854-2.751 c-2.3525-3.4926-4.6312-7.0421-7.1338-10.4252c-9.0916-12.2902-22.0406-18.3557-36.3672-21.8848 c-5.2342-1.2893-10.6692-1.9989-16.0553-2.3957c-20.8344-1.535-41.497-4.3878-62.1172-7.6226 c-5.9203-0.9288-11.8441-1.8366-18.7746-2.9103C338.4232,180.3708,341.0311,183.1316,343.611,185.8609z M507.2979,230.4203 c-2.189-3.8304-4.1818-7.8158-6.7673-11.366c-3.3058-4.5391-7.0023-8.81-10.7207-13.0287 c-5.8978-6.6912-12.9218-11.8703-20.7908-16.1827c-8.235-4.513-16.9298-7.2568-25.9897-9.3004 c-12.7418-2.8742-25.4189-6.0343-38.1518-8.9491c-7.8336-1.7932-15.7111-3.4-23.5844-5.0143 c-12.0106-2.4625-24.0164-4.9554-36.0604-7.2455c-6.6972-1.2735-13.4664-2.17-20.2087-3.1999 c-0.3384-0.0517-0.7299,0.2431-1.4116,0.4912c0.118,2.8266,1.4454,5.2612,2.8553,7.5856c0.869,1.4327,2.5341,1.8392,4.1746,2.1152 c5.153,0.8672,10.2799,1.8986,15.4449,2.6833c17.282,2.6254,34.5656,5.2441,51.8705,7.7116 c6.957,0.992,13.9658,1.6349,20.9599,2.3491c11.4832,1.1727,22.5521,3.7038,33.0108,8.8334 c9.8324,4.8225,17.6639,11.8226,23.7863,20.7595c3.1711,4.6291,6.3514,9.3071,8.1797,14.7098 c0.5486,1.6211,1.6165,2.7492,3.2814,3.2657c6.3263,1.9628,12.6494,3.936,18.9868,5.8622c0.2964,0.0901,0.7195-0.2365,1.2032-0.4125 C507.3539,231.5317,507.5442,230.8512,507.2979,230.4203z M177.2741,515.3116c0.1208-3.8037,0.2182-7.6397-0.1214-11.4214 c-1.8679-20.7982-4.6052-41.4837-8.8798-61.9341c-2.5842-12.3632-5.3483-24.691-8.2135-36.9923 c-1.9988-8.582-4.32-17.0885-6.466-25.6366c-0.5358-2.1346-0.8448-4.3298-1.4464-6.4435c-0.9144-3.2133-1.661-3.6718-5.2534-3.5341 c-0.5534,0.0212-1.0943,0.373-1.8615,0.6523c-0.0651,0.7683-0.3215,1.571-0.1634,2.2816c1.3041,5.8668,2.6244,11.7313,4.056,17.568 c2.5779,10.5099,5.3868,20.9654,7.8165,31.5087c2.2042,9.5649,4.1806,19.1889,5.9731,28.8397 c1.1714,6.3069,1.7882,12.7152,2.7375,19.0655c1.7498,11.7049,3.5477,23.4027,5.3526,35.0993 c0.972,6.299,2.5738,12.5306,1.4322,20.1433C176.2797,521.6283,177.17,518.5889,177.2741,515.3116z M531.1201,319.1409 c0.3908,1.2499,0.6179,2.6205,1.2235,3.796c2.0188,3.9185,4.1132,7.8012,6.291,11.6338c2.7718,4.8781,5.1858,9.9166,7.5811,14.9921 c4.699,9.9566,8.5804,20.308,14.2076,29.8243c1.5266,2.5818,2.8866,5.2615,4.3862,7.8598c0.3411,0.5912,0.9442,1.0314,1.4781,1.5953 c1.3263-1.6559,0.4449-2.9766,0.0645-4.239c-2.4842-8.2444-4.6686-16.6035-7.6459-24.6687 c-3.6036-9.7619-7.1063-19.5813-11.6302-28.9978c-1.9897-4.1417-3.2783-8.6182-4.9275-12.9265 c-0.6983-1.8244-1.175-3.8281-3.2089-5.0069C536.364,315.025,533.8814,316.9735,531.1201,319.1409z M122.7717,284.2691 c0.0005,0.8073-0.1725,1.4524,0.0272,1.947c3.2946,8.1585,6.6499,16.2924,9.9612,24.4442c1.6475,4.0558,4.0438,7.808,4.738,12.2598 c0.2012,1.2896,1.4501,1.9763,2.7862,1.5945c1.103-0.3152,2.1079-0.9738,3.2894-1.5445c-0.1102-1.3463-0.0173-2.5688-0.3307-3.6764 c-3.3099-11.6942-6.7865-23.3376-10.7185-34.7261C129.1005,283.7253,125.9965,283.4058,122.7717,284.2691z M101.0237,222.3944 c-4.7658-9.9426-9.4304-19.9354-14.3311-29.8111c-3.5649-7.184-7.2231-14.3395-11.2328-21.2806 c-5.5172-9.5503-11.5539-18.8003-17.0836-28.3438c-3.8158-6.5854-7.0906-13.482-10.722-20.1773 c-2.1982-4.0528-4.6255-7.9811-6.9327-11.9752c-3.8135-6.6017-7.6594-13.1852-11.4048-19.8254 c-3.2702-5.7978-6.1716-11.7173-5.9592-18.6746c0.0399-1.3086-0.4649-2.8304-1.2179-3.9033 c-0.5848-0.8332-1.8969-1.3569-2.9779-1.5886c-1.2617-0.2705-2.5916,1.1759-2.0846,2.2436c1.2619,2.6575,0.941,5.4962,1.3419,8.252 c0.2868,1.9717,0.7958,3.9328,1.4143,5.8306c2.6277,8.063,6.5466,15.53,10.9033,22.7595 c7.3573,12.2089,13.868,24.8599,20.3352,37.5539c4.1839,8.2121,9.25,15.9704,13.7635,24.0203 c4.8047,8.5694,9.5481,17.1782,14.0853,25.8911c3.7037,7.1121,7.2403,14.3239,10.5232,21.6386 c2.7912,6.2188,5.077,12.6628,7.6652,18.9749c0.9089,2.2169,1.9646,4.3861,3.1232,6.4832c0.5937,1.0748,1.6685,1.7951,3.032,1.3846 c1.2795-0.3853,2.0947-1.4133,2.0948-2.6624c0.0001-1.7669-0.0911-3.6176-0.6154-5.2839 c-1.2041-3.8275-2.6936-7.5653-4.0672-11.3395C100.7921,222.5055,100.9079,222.45,101.0237,222.3944z M380.491,292.8264 c-10.4406,3.5994-20.556,7.9696-30.5143,12.7324c-3.4343,1.6426-7.0429,2.9168-10.5242,4.4663 c-2.7438,1.2212-5.4426,2.5532-8.1015,3.9498c-0.8546,0.4489-1.7841,1.1254-2.2007,1.9417 c-0.4957,0.9715-0.8565,2.3097-0.5857,3.3003c0.3583,1.311,1.9639,1.5783,3.0464,1.2225c3.792-1.2463,7.53-2.6716,11.2355-4.1606 c2.0359-0.8181,3.9475-1.9395,5.9469-2.8551c5.6464-2.5857,11.2615-5.2479,16.9766-7.6735 c8.6704-3.6797,17.4411-7.123,26.1128-10.7993c2.9391-1.246,5.7432-2.8316,8.5228-4.4135c0.5329-0.3033,0.9292-1.3195,0.9183-1.9992 c-0.018-1.1231-0.941-1.8741-2.006-1.7816c-1.5748,0.1368-3.1771,0.4376-4.6698,0.9523 C389.9045,289.3446,385.2067,291.1115,380.491,292.8264z M458.3082,263.2068c-2.0677,0.7526-4.1738,1.4176-6.1854,2.2984 c-0.8755,0.3833-1.6204,1.1474-2.3111,1.8501c-0.9028,0.9184-0.5142,2.3798,0.6158,3.0365c1.9265,1.1197,3.8555,0.732,5.8043,0.1518 c4.9846-1.4842,9.9742-2.9523,14.9504-4.4647c8.4155-2.5576,16.8104-5.183,25.2387-7.6973 c2.8664-0.8551,5.8148-1.4324,8.7098-2.1967c0.9583-0.253,1.9786-0.5394,2.76-1.1026c0.5439-0.3921,1.0421-1.3102,0.986-1.9422 c-0.057-0.6436-0.7278-1.6277-1.2881-1.7523c-1.3169-0.293-2.784-0.4301-4.0919-0.1578 c-6.6546,1.3854-13.3276,2.7315-19.8999,4.4517c-8.51,2.2274-16.9309,4.7951-25.3902,7.2164 C458.2406,263.0009,458.2744,263.1038,458.3082,263.2068z"/></svg>`,`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 304.0488 345.5214" xml:space="preserve"><path fill="${color}" d="M233.2215,217.5866c3.5241,0.6465,6.4962-0.5704,9.7353-1.4045c0.4488-0.8038,0.9564-1.634,1.3895-2.5013 c3.7134-7.4353,13.9965-9.1496,19.4539-2.9732c1.9312,2.1857,3.9316,3.0943,6.6667,3.2326c3.993,0.2019,7.977,0.586,11.9639,0.9039 c4.0938,0.3263,7.7896,1.7777,11.0877,4.1686c2.7239,1.9745,4.4895,4.6505,4.4258,8.0965 c-0.1598,8.6429,1.3274,17.1004,2.6182,25.5861c0.3603,2.3689,0.6224,4.7537,1.0291,7.1141 c0.1629,0.9461,0.3534,2.0605,0.9478,2.7271c1.8484,2.0728,1.6617,4.4035,1.1946,6.792c-1.0464,5.3507-3.006,10.3704-5.9416,14.9572 c-5.5514,8.6739-12.6705,15.8777-20.7628,22.2239c-14.1371,11.0868-29.8442,19.3228-46.5125,25.7758 c-18.37,7.1118-37.3429,11.852-57.0654,12.9895c-11.0114,0.6351-22.0201,0.2299-32.5918-3.4512 c-3.1804-1.1074-6.2286-2.6613-9.2117-4.2471c-2.3049-1.2253-4.0507-3.1198-5.5585-5.3324 c-5.6241-8.2533-11.383-16.415-17.1246-24.5877c-0.7997-1.1383-1.7889-2.1432-2.6835-3.2155 c-4.668-5.5956-5.3922-11.9658-1.9675-18.3949c2.7645-5.1899,6.8006-9.3671,11.1109-13.265c2.9522-2.6697,6.082-5.1431,9.364-7.8988 c-0.7027-1.2447-1.4233-2.3895-2.0181-3.5963c-3.2769-6.6493-3.3634-15.1624,1.9589-20.6978 c4.1846-4.3522,11.4547-5.2101,16.355-1.5815c0.9086,0.6728,1.5563,1.7579,2.1795,2.7443c1.8148,2.8726,3.7145,5.6465,6.8852,7.6187 c4.4987-2.1466,9.0022-4.2682,13.4821-6.4382c13.3351-6.4592,27.0975-11.8432,41.1826-16.4209 c2.2814-0.7415,4.5257-1.6151,6.8383-2.2379c2.8129-0.7576,3.9476-2.6519,3.7364-5.3349 c-0.4387-5.5722-0.7221-11.1837-1.6302-16.6866c-2.3856-14.4579-6.5425-28.4247-12.5632-41.8076 c-0.6512-1.4476-1.4926-2.8146-2.32-4.1738c-0.1661-0.2728-0.6696-0.3403-1.237-0.6047c-0.478,0.5098-1.0993,1.0122-1.5219,1.6468 c-7.8568,11.801-19.5302,17.4653-32.9335,19.8932c-14.0741,2.5493-27.9047,1.0257-41.2281-4.2149 c-2.3867-0.9388-4.5261-1.0726-6.9616-0.5807c-14.1178,2.8513-28.3292,5.1238-42.7338,5.8144 c-8.5688,0.4108-17.1836,0.937-25.7191-0.2054c-6.7144-0.8987-13.4268-2.0248-19.7936-4.5752 c-4.1315-1.655-7.6142-4.2411-11.1885-6.8457c-6.0396-4.401-8.725-10.7276-11.2029-17.2927 c-4.6313-12.2701-5.5071-24.7616-2.9239-37.6723C5.1279,93.1588,14.5746,77.899,27.0251,64.2453 c10.1825-11.1665,22.123-20.1782,35.0727-27.8959c8.4326-5.0256,17.1735-9.4488,26.3366-12.9643 c3.29-1.2622,5.8697-3.0686,8.0718-5.8582c5.6769-7.1916,12.669-12.738,21.4798-15.6978 c5.6057-1.8831,11.2715-2.6367,17.0509-0.6808c3.0796,1.0422,5.9903,2.2728,7.7268,5.2792 c1.0317,1.7862,2.6958,2.2051,4.6312,2.0434c3.5834-0.2993,7.1662-0.641,10.7566-0.8129 c21.9341-1.0501,43.5221,0.8922,64.4949,7.7733c13.7983,4.5272,26.6436,10.9187,37.7783,20.3562 c9.2534,7.843,16.7393,17.0837,21.7951,28.2442c2.9397,6.4891,2.7831,12.7337-0.1876,19.0761 c-2.4764,5.2872-5.6451,10.0894-9.4936,14.4917c-9.0433,10.3446-19.9383,18.4396-31.4727,25.6745 c-7.4432,4.6687-15.2473,8.7628-22.897,13.1014c-1.0426,0.5912-2.1595,1.0541-3.1869,1.6685 c-1.7982,1.0755-2.1872,2.0917-1.4501,3.9796c0.7264,1.8606,1.5583,3.6813,2.3805,5.503 c6.1934,13.723,10.8173,27.9764,13.6544,42.7397c1.5046,7.8295,2.1402,15.8258,3.1703,23.7465 C232.8865,215.1597,233.0476,216.305,233.2215,217.5866z M86.2381,33.5576c-1.31,0.3939-2.2584,0.5875-3.133,0.9559 C72.5135,38.9747,63.3948,45.8443,54.041,52.3283c-0.1633,0.1132-0.3088,0.2547-0.4514,0.3945 c-5.1329,5.0331-10.298,10.0341-15.3881,15.1101c-6.8443,6.8255-11.8366,15.0835-17.4051,22.8823 c-2.6613,3.7272-5.0822,7.6876-7.1128,11.7894c-3.4635,6.9961-6.5563,14.1923-6.4739,22.2421 c0.0824,8.0539,1.2404,15.9342,4.2382,23.4632c0.5116,1.2848,1.1769,2.5366,1.9512,3.6821 c1.2171,1.8006,2.6127,3.4794,3.8864,5.2433c1.7737,2.4562,3.7233,4.7782,6.468,6.1328c3.0315,1.4963,6.1029,3.0312,9.3213,4.0076 c10.4544,3.1714,21.2791,3.6351,32.0776,3.328c19.0382-0.5413,37.7743-3.5538,56.3071-7.8622 c18.3301-4.2612,36.2516-9.8329,53.8846-16.4166c22.7505-8.4945,44.4989-18.9781,64.872-32.199 c8.554-5.551,16.7443-11.637,23.8452-19.0531c4.0251-4.2038,7.6928-8.6675,10.5486-13.7626 c2.865-5.1116,3.0676-10.2428,0.1653-15.4139c-0.2934-0.5228-0.5464-1.068-0.8312-1.5957 c-7.3318-13.588-18.0642-23.766-31.4039-31.3423c-15.8901-9.0249-33.1001-13.9581-51.1164-16.1578 c-19.3759-2.3658-38.6776-1.5175-57.9266,1.7439c-6.1108,1.0353-11.5788,3.2147-16.306,7.041 c-5.9703,4.8324-11.1231,10.3187-12.7187,18.3028c-1.0545,5.2769-2.795,10.4089-3.1175,15.844 c-0.0926,1.5606-0.4823,3.191-1.1236,4.6148c-1.7277,3.8359-4.9303,4.8606-8.8493,3.2844c-2.1847-0.8787-3.6155-2.237-4.5834-4.4 c-1.8358-4.1022-2.8719-8.2894-2.369-12.8043C85.0229,45.099,85.5745,39.7663,86.2381,33.5576z M117.2356,310.088 c3.9457,5.2356,7.002,9.1544,9.9087,13.1812c4.038,5.5941,9.613,8.9046,15.9978,11.0441 c9.2631,3.1041,18.8969,3.6053,28.4672,2.9321c34.6788-2.4396,66.3308-13.8205,95.1069-33.2388 c7.9902-5.3918,15.1613-11.7341,21.2801-19.2299c3.9793-4.8748,7.0193-10.2187,8.3083-16.4204 c0.3578-1.7217,0.732-3.6561,0.3064-5.2862c-1.6232-6.2167-2.371-12.5416-3.0051-18.9012c-0.0503-0.505-0.5648-0.9637-1.0076-1.6753 c-0.7309,0.6038-1.4161,1.0123-1.8968,1.5907c-5.9335,7.1406-13.119,12.8301-20.7199,18.0618 c-14.8874,10.247-30.8925,18.4033-47.5004,25.4246c-20.6701,8.7386-41.8412,15.9038-63.9326,20.1493 c-10.8133,2.0781-21.6769,3.5785-32.7296,3.0105C123.4747,310.6102,121.136,310.3838,117.2356,310.088z M272.1833,221.9181 c0.0546,1.0297-0.0188,1.6366,0.1322,2.1815c1.2884,4.6485-0.6627,8.1931-3.8643,11.2644 c-3.7534,3.6006-8.4256,5.2751-13.4533,6.0444c-1.1585,0.1773-2.405,0.0533-3.5719-0.153 c-2.7853-0.4922-4.8277-1.9715-5.4005-4.8871c-0.4994-2.5421-0.7723-5.128-1.2441-7.6763 c-0.2412-1.3027-0.6994-2.5653-1.1157-4.0459c-3.8865,0.2662-7.3845,0.5205-10.0971,2.5281 c-1.2051,7.308-1.9689,14.2818-3.5558,21.063c-3.0592,13.0727-8.6027,24.91-18.8701,34.0665 c-0.1677,0.1495-0.0246,0.6473-0.0271,1.0744c0.5867-0.1172,1.1904-0.138,1.7114-0.3562 c13.839-5.7957,27.4628-12.0407,40.4096-19.6644c7.7581-4.5684,15.2986-9.469,22.2478-15.2209 c4.1617-3.4446,8.2868-6.9621,11.3859-11.4352c1.3476-1.945,2.5108-4.1077,3.2869-6.3356c0.9605-2.7572,0.0569-4.6204-2.6047-5.9126 c-4.1798-2.0292-8.6741-2.9496-13.2945-3.22C273.7132,221.2014,273.1439,221.5872,272.1833,221.9181z M132.0165,270.2409 c-6.92,4.059-14.7585,10.6053-18.8929,15.7602c-1.1142,1.3892-2.1421,2.9027-2.911,4.5026 c-1.8819,3.9155-0.7271,7.5916,3.0982,9.6351c1.733,0.9258,3.6815,1.525,5.5979,2.0165c5.0918,1.3061,10.3052,1.1019,15.4772,0.7875 c15.216-0.925,30.0057-4.2173,44.63-8.341c1.4622-0.4123,2.8626-1.0438,4.2917-1.5735 C163.4508,291.4215,147.3131,281.8583,132.0165,270.2409z M156.8263,255.8109c0.7518,0.8773,1.3544,1.9643,2.2724,2.5856 c4.1169,2.7863,8.221,5.6188,12.5291,8.0868c3.6361,2.0832,7.6621,3.3355,11.8472,3.9402 c7.6362,1.1034,14.1602-1.0805,19.5769-6.5888c2.8285-2.8762,4.9586-6.2268,6.7214-9.8202 c3.0229-6.1623,4.2396-12.8226,5.213-19.5328c0.0969-0.6679-0.3633-1.4165-0.5498-2.0743 c-5.7754,0.5402-13.8999,3.2262-30.1749,9.9022C168.5079,248.7717,160.846,252.5198,156.8263,255.8109z M224.4199,230.219 c-0.4058,0.0344-0.8116,0.0688-1.2173,0.1032c-0.2198,1.1455-0.4713,2.2861-0.6535,3.4375 c-0.5917,3.7392-0.9737,7.5223-1.7725,11.2158c-1.6626,7.687-4.5952,14.8847-9.2899,21.2479 c-6.6431,9.004-15.3545,13.6198-26.8088,12.6237c-7.1472-0.6214-13.5321-3.1875-19.6655-6.6805 c-7.5341-4.2907-13.6734-10.3432-20.2075-15.8946c-0.8892-0.7555-1.4717-1.868-2.213-2.802 c-1.7373-2.1889-3.3784-4.4693-5.2824-6.503c-0.7206-0.7697-2.1106-1.4382-3.1032-1.3275 c-2.7193,0.3033-4.9992,1.7382-5.8855,4.4408c-0.8871,2.705-1.2203,5.4435,1.5237,7.6098c3.1316,2.4723,6.0489,5.216,9.1817,7.6866 c9.007,7.1031,18.7302,12.9756,29.8542,16.1017c4.0084,1.1265,8.193,1.9023,12.3429,2.1988 c13.7896,0.9852,24.4181-4.8647,32.1965-15.9794c7.4192-10.6015,10.5993-22.6735,11.4464-35.442 C224.9102,231.5896,224.5773,230.8985,224.4199,230.219z M135.0359,168.2971c5.7693,1.7773,11.3858,2.4792,17.2173,2.1933 c8.4884-0.4162,16.5932-1.9686,24.1556-5.9172c5.7508-3.0027,10.5905-7.068,14.1479-12.545 c0.4904-0.755,0.7337-1.6704,1.6316-3.7819C172.8809,156.7058,153.9605,162.5001,135.0359,168.2971z M133.0054,10.2102 c-5.7385-2.7677-11.1339-1.817-16.2103,0.8295c-11.7048,6.1021-19.444,15.6553-23.7083,28.0732 c-1.438,4.1875-2.1211,8.5293-1.8258,12.9491c0.2223,3.327,0.7178,6.6456,2.9871,9.314c2.0117-0.827,1.6902-2.4138,1.8139-3.7164 c0.6616-6.97,1.9037-13.8254,4.1043-20.4748c0.6827-2.0627,1.453-4.2117,2.6976-5.9539 c6.4057-8.9669,14.3516-16.0136,25.1527-19.3064C129.6976,11.4122,131.3434,10.7846,133.0054,10.2102z M223.386,218.9619 c2.5287-2.4098,1.7834-5.0709,1.5759-7.5576c-1.8643-22.3387-7.9739-43.5598-17.1675-63.9414 c-0.4899-1.0861-1.0477-2.1585-1.7121-3.1442c-0.6568-0.9743-1.7675-1.104-2.6159-0.4578c-0.499,0.38-0.9384,1.4546-0.7555,1.9988 c0.5685,1.6916,1.4269,3.2888,2.2082,4.9056c10.0134,20.7236,16.5122,42.4149,18.0737,65.471 C223.0545,217.1496,223.2518,218.0536,223.386,218.9619z M266.433,227.1264c-2.4652-4.1234-4.6893-7.8686-6.9414-11.5969 c-0.7911-1.3096-2.0546-1.9398-3.5293-1.8288c-1.3699,0.1031-2.7611,0.3539-4.0664,0.7762 c-1.6909,0.5471-2.5986,1.902-2.5128,3.6602c0.2033,4.1645,0.4797,8.3275,0.8474,12.4806c0.1105,1.2483,0.9097,2.278,2.269,2.4296 C257.9649,233.6569,262.7346,232.5104,266.433,227.1264z M290.1095,268.0176c0.1285,0.6939,1.3455,1.6318,2.0742,1.6456 c0.748,0.0142,1.8013-0.8055,2.2169-1.5439c1.0242-1.8199,0.6322-3.8252,0.2635-5.8001c-0.6906-3.6988-1.2914-7.4142-1.9438-11.1203 c-0.1021-0.5803-0.1387-1.2508-0.4623-1.6906c-0.3077-0.4181-0.9434-0.7896-1.4506-0.8111 c-0.4967-0.0211-1.328,0.3101-1.4653,0.6864c-0.5331,1.4601-0.8483,2.9998-1.3696,4.9865 C288.6207,258.6799,289.2483,263.3704,290.1095,268.0176z"/></svg>`,`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 407.6999 359.2555" xml:space="preserve"><path fill="${color}" d="M356.8638,241.3519c3.1956,2.6721,6.1598,4.1268,8.8651,5.9521c1.5802,1.0661,3.2564,2.0292,4.6817,3.2761 c2.254,1.9721,2.3167,3.4733,0.4218,5.8035c-4.2656,5.2458-8.5531,10.4742-12.8733,15.675 c-6.3134,7.6003-12.7051,15.136-18.9735,22.773c-2.0168,2.4572-4.3414,4.4483-7.0624,6.0495 c-6.7281,3.9592-13.2182,8.3931-20.1987,11.8364c-10.4518,5.1555-20.1867,11.497-30.2769,17.243 c-8.1391,4.6348-16.1103,9.5639-24.1766,14.3274c-7.3198,4.3228-14.7712,8.4335-21.9633,12.9577 c-4.1694,2.6227-8.1051,2.5676-12.2671,0.4798c-1.3911-0.6978-2.7453-1.4875-4.0493-2.3382 c-4.5052-2.939-8.9286-6.0063-13.4782-8.8742c-11.6005-7.3126-23.2622-14.5281-34.8819-21.8105 C116.3577,290.6882,62.0932,256.6591,7.8107,222.6588c-2.6762-1.6762-5.1396-3.4743-6.8752-6.211 c-0.8229-1.2973-1.0727-2.5041-0.673-3.9171c0.1415-0.5006,0.253-1.0144,0.4454-1.4953c4.8925-12.2296,9.866-24.4275,14.663-36.6944 c2.3332-5.9665,5.5183-11.5983,7.0407-17.8837c1.2488-5.1556,5.0385-8.0308,11.35-7.7249 c4.5036,0.2181,8.9922,0.7497,13.4868,1.1496c11.2344,0.9994,22.4678,2.0098,33.7033,2.9975 c1.3642,0.1199,2.7383,0.1269,4.0168,0.1823c0.7837-1.0898,0.0298-1.7408-0.3196-2.4526c-1.1463-2.3362-2.3655-4.6383-3.4494-7.0026 c-1.6007-3.4912-2.6816-7.1415-3.0267-10.9864c-0.4943-5.5073,0.608-10.4753,3.4775-15.3988 c4.1929-7.1944,10.4414-10.7683,18.1585-12.6915c10.3055-2.5684,20.6565-2.0908,31.0302-0.7693 c3.6105,0.46,7.1832,1.216,10.7729,1.8385c2.0371,0.3532,4.0736,0.7098,5.8844,1.0255c1.7865-1.0586,1.3669-2.564,1.3797-3.8881 c0.0847-8.8489,0.126-17.6981,0.1966-26.5472c0.1576-19.7804,0.3316-39.5606,0.4772-59.3411 c0.0176-2.3999,0.1539-4.7303-0.994-7.1005c-1.2632-2.6081,0.5899-5.7621,3.3989-6.4884c1.1626-0.3006,2.4006-0.3513,3.6098-0.4238 c15.5904-0.9338,31.1835-1.8229,46.7713-2.7961c3.195-0.1995,5.9627,0.3416,8.888,1.9646c4.2185,2.3404,8.8824,3.8909,13.389,5.6967 c18.0263,7.2235,36.0656,14.4148,54.0996,21.6188c28.3481,11.324,56.701,22.6362,85.0416,33.9787 c13.0372,5.2177,26.0513,10.4928,39.0724,15.7509c0.8027,0.3241,1.5994,0.6804,2.3543,1.1019 c2.7952,1.5609,3.0074,2.4057,1.8831,5.3999c-0.6003,1.5985-1.0581,3.2915-1.2875,4.9817 c-1.5163,11.1721-2.9571,22.3545-4.4149,33.5346c-2.1532,16.5147-4.2991,33.0303-6.4508,49.5451 c-2.151,16.5094-4.3051,33.0185-6.4588,49.5275c-0.0673,0.5163-0.1757,1.0292-0.2109,1.5473 c-0.2011,2.9622-1.8865,4.7371-4.55,5.7458c-0.8115,0.3072-1.6194,0.6235-2.4258,0.944c-6.4495,2.5637-12.9028,5.118-19.3437,7.7033 C360.497,239.6518,359.1178,240.3347,356.8638,241.3519z M196.1862,38.9081c-1.1519,2.6719-1.0078,4.9453-1.1277,7.1541 c-1.1754,21.6499-2.3194,43.3015-3.4722,64.9526c-0.1817,3.4109-0.1937,6.8488-1.9043,9.903 c1.0351,0.6464,1.7218,1.1986,2.5005,1.5429c9.8405,4.3495,19.3336,9.3427,28.6802,14.6843 c11.7852,6.7353,22.871,14.4299,33.4748,22.8571c2.8497,2.2647,5.5335,4.7386,8.3933,6.9895c1.1986,0.9433,2.601,1.685,4.0065,2.299 c8.7394,3.8179,17.5416,7.4936,26.253,11.3736c7.9185,3.527,15.7594,7.2292,23.6137,10.8989 c8.1644,3.8146,16.7861,6.5927,24.7224,10.9317c0.6473,0.354,1.5639,0.2154,2.4254,0.3137c0.226-0.9949,0.4904-1.6607,0.5141-2.3349 c1.1025-31.3795,2.1851-62.7597,3.259-94.1401c0.0175-0.5122-0.0984-1.0292-0.134-1.3704c-2.707-2.4777-5.9018-3.4081-8.9132-4.7065 c-23.248-10.0233-46.4925-20.0552-69.726-30.1123c-20.2025-8.7451-40.3848-17.5371-60.5872-26.2825 C204.3559,42.2131,200.4946,40.6858,196.1862,38.9081z M229.7788,197.2083c1.9544-0.8344,2.7385-1.1908,3.5385-1.5071 c2.2569-0.8924,4.528-1.7493,6.7791-2.6557c2.4241-0.976,4.7228-0.9206,6.9094,0.6479c2.2558,1.618,4.6662,3.0494,6.7717,4.8411 c2.8694,2.4416,6.1379,3.8108,9.7478,4.6272c6.261,1.4159,12.5001,2.9284,18.755,4.3716c1.147,0.2646,2.3257,0.3917,3.5887,0.5984 c0.5401-2.1765-0.6227-3.5997-1.4058-5.0695c-3.1193-5.8536-7.1909-11.0427-11.551-15.9976 c-11.4202-12.9783-24.7421-23.7802-39.0594-33.3382c-15.8913-10.609-32.5716-19.8265-50.2113-27.2533 c-15.3956-6.4818-31.1897-11.6706-47.6199-14.8031c-9.064-1.7282-18.19-2.6258-27.4361-1.9229 c-4.0071,0.3046-7.8782,1.0618-11.6625,2.437c-9.0637,3.294-13.4394,11.4695-11.6785,20.6461 c0.8598,4.481,2.4924,8.6595,4.7178,12.6188c3.5013,6.2296,7.8178,11.8543,12.5733,17.18 c11.6422,13.0385,25.5269,23.3878,39.7966,33.2615c8.1384,5.6312,16.9195,10.1963,25.6283,14.8668 c1.376,0.738,2.6873,1.6066,4.0956,2.2728c9.8717,4.6696,19.8083,9.1874,30.0951,12.8942 c16.7175,6.0241,33.7391,10.6584,51.5939,11.6598c5.7422,0.3222,11.4639,0.1716,17.1179-0.7971 c5.3497-0.9166,10.3782-2.7161,14.6048-6.3591c3.6715-3.1646,4.5837-7.0996,3.7863-11.8241 c-1.0375-0.3836-1.9727-0.8158-2.9533-1.0786c-10.3892-2.7836-20.7846-5.5439-31.1822-8.2959 c-0.6653-0.1761-1.3728-0.3643-2.0439-0.3156c-2.3671,0.1712-4.468-0.5631-6.4004-1.8048c-2.8751-1.8473-5.7519-1.735-8.9245-0.6853 c-4.455,1.474-9.0969,2.1625-13.8167,2.1904c-15.0548,0.0891-29.1561-3.7712-42.5904-10.3338 c-1.3865-0.6773-2.6721-1.6252-3.8667-2.614c-1.2922-1.0698-1.3358-2.7662-0.3204-4.2063c0.8522-1.2086,2.1071-1.4719,3.678-0.7453 c0.471,0.2179,0.9224,0.4826,1.3687,0.7495c11.0523,6.6077,23.0569,10.3167,35.8059,11.7351 c1.8665,0.2077,3.7505,0.2563,5.4374,0.3663c1.0133-1.58,1.9289-2.7678,1.869-4.4336c-9.0966,1.2372-12.5796,1.104-20.3752-0.8771 c-9.8041-2.4915-19.1111-6.3257-27.963-11.1394c-6.8509-3.7255-13.4968-7.8537-20.0658-12.0649 c-6.5897-4.2244-12.5309-9.2897-17.8075-15.1019c-2.3533-2.5922-4.3477-5.4441-5.5981-8.7084 c-2.3039-6.0147,0.8081-11.8682,7.1387-13.0848c2.6747-0.5141,5.5691-0.5811,8.2583-0.1669 c4.2685,0.6575,8.5477,1.5867,12.6494,2.9298c19.4915,6.3827,37.1845,16.1564,53.0632,29.1105 c4.4137,3.6007,8.6747,7.4603,11.9877,12.2236C229.4654,186.3693,231.571,190.6233,229.7788,197.2083z M6.6656,212.8746 c1.8477,1.2501,3.2467,2.2566,4.7024,3.1728c30.2646,19.0478,60.5107,38.1251,90.8124,57.1138 c31.4787,19.7264,63.0135,39.3631,94.5209,59.0435c7.3616,4.5982,14.7016,9.231,22.0754,13.8092 c1.5941,0.9897,3.0539,2.3433,5.4559,2.3326c0.6686-0.6968,1.6054-1.4651,2.2789-2.4194c1.2991-1.8403,2.3955-3.8227,3.6705-5.6814 c8.0441-11.7254,14.8518-24.2437,23.3097-35.7246c3.7698-5.1171,6.3564-11.1089,9.4273-16.7325 c0.3027-0.5541,0.2364-1.3098,0.3933-2.2998c-1.4422-0.9566-2.8028-2.0146-4.2994-2.8198c-3.2013-1.7223-6.5062-3.252-9.709-4.9717 c-7.329-3.935-14.596-7.9862-21.9374-11.8976c-7.7962-4.1537-15.6361-8.2263-23.4819-12.2858 c-6.1502-3.1823-12.367-6.2365-18.5015-9.4484c-5.6789-2.9734-11.2505-6.1517-16.9353-9.1134 c-10.4502-5.4443-20.9729-10.7496-31.4193-16.2011c-7.9888-4.1689-15.909-8.4694-23.8555-12.7194 c-7.1849-3.8426-14.3496-7.7232-21.5498-11.537c-7.1956-3.8115-14.4257-7.5577-21.6376-11.3384 c-5.0674-2.6564-10.1275-5.3265-15.1948-7.9829c-6.7518-3.5393-13.4911-7.1032-20.2706-10.5886 c-2.2687-1.1664-4.3589-2.806-6.8725-3.1096c-0.4597,0.3296-0.8873,0.4689-0.9922,0.7353 c-6.0263,15.3153-13.7743,29.928-18.6646,45.7053C7.537,209.3805,7.1952,210.8799,6.6656,212.8746z M346.8461,256.8282 c-3.0855-1.9268-5.2419-3.3699-7.4986-4.6334c-0.8578-0.4802-2.0258-0.9252-2.9169-0.7388 c-4.1996,0.8779-7.8961-0.5649-11.5473-2.2245c-2.8378-1.29-5.5169-2.9612-8.4146-4.0792c-3.359-1.2959-5.1651-3.3311-4.7612-7.0425 c0.032-0.2948-0.2591-0.6247-0.4037-0.9367c-6.5144-4.8295-11.5647-7.7643-15.3237-8.8484 c-0.528,0.5344-1.2483,1.0562-1.6997,1.7522c-4.7595,7.3392-12.0151,10.9826-20.1272,12.78 c-5.3763,1.1911-11.0005,1.6191-16.5257,1.7157c-13.8252,0.242-27.2749-2.4292-40.5123-6.1926 c-13.8778-3.9454-27.3215-9.0298-40.4025-15.1627c-11.3234-5.3088-22.3091-11.2076-32.9871-17.6801 c-3.8426-2.3291-7.3121-5.2644-11.0665-7.7497c-12.9455-8.569-24.6525-18.5701-35.1104-30.0376 c-1.9841-2.1757-3.9439-4.3737-5.9149-6.5613c-3.0825-0.3209-6.163-0.6626-9.2479-0.959 c-14.1697-1.3611-28.3399-2.7175-42.5121-4.0532c-1.8312-0.1725-3.6747-0.2147-5.5125-0.3172 c0.3221,1.0241,0.8219,1.3842,1.3624,1.6661c5.6843,2.9661,11.3882,5.8952,17.0611,8.8829 c7.3654,3.879,14.6917,7.8325,22.0646,11.6971c6.5948,3.4567,13.239,6.8189,19.8444,10.2554 c5.2325,2.7221,10.4324,5.5063,15.659,8.2397c6.2974,3.2934,12.6124,6.5532,18.9111,9.8442 c5.3775,2.8096,10.7357,5.656,16.1152,8.4619c6.1498,3.2076,12.3346,6.3486,18.4657,9.5913 c7.2043,3.8101,14.3302,7.7695,21.5577,11.5342c8.4552,4.4043,17.0063,8.624,25.4735,13.0056 c9.0819,4.6997,18.1184,9.4873,27.1677,14.2497c9.0538,4.7646,18.1528,9.4476,27.1147,14.3797 c2.6783,1.4741,5.0402,1.5896,7.9117,0.7644c8.1692-2.3477,16.4239-4.3968,24.6387-6.5869 c11.0634-2.9495,22.1507-5.8159,33.168-8.9291C336.0095,261.4649,341.0023,259.5182,346.8461,256.8282z M359.0558,100.9746 c-2.3219,44.1424-4.6183,87.7528-6.8936,131.3643c-0.0511,0.9817,0.1385,1.976,0.2182,2.9975 c4.1806-0.764,23.9094-8.6404,28.848-11.484c0.2417-1.1758,0.6006-2.5082,0.7815-3.8645c2.6128-19.59,5.196-39.1837,7.798-58.7752 c2.0544-15.4669,4.1175-30.9328,6.192-46.397c0.8989-6.7013,1.873-13.3927,2.7294-20.0994 c0.2099-1.6437,0.8509-3.3723-0.3112-5.3133C385.4356,93.1062,372.4811,96.75,359.0558,100.9746z M164.0623,9.5636 c2.3663,1.1109,3.8725,1.867,5.4167,2.5351c9.7023,4.1975,19.4107,8.3806,29.1215,12.5584 c9.3898,4.0398,18.7869,8.0626,28.1771,12.1015c9.0696,3.901,18.139,7.8023,27.2001,11.7229 c9.7002,4.1972,19.3814,8.4388,29.0873,12.6225c16.2327,6.9972,32.4773,13.9665,48.719,20.9426 c8.2792,3.5561,16.5761,7.0714,24.8346,10.6748c1.8331,0.7997,3.5572,1.0718,5.524,0.5004 c9.6514-2.8036,19.3311-5.5098,28.9862-8.3007c0.739-0.2136,1.3651-0.8176,2.5258-1.5403 c-1.4033-0.7277-2.2595-1.2594-3.1796-1.6342c-4.815-1.9609-9.6492-3.8748-14.4715-5.818 c-17.3562-6.9942-34.7021-14.0148-52.0678-20.9852c-17.692-7.1014-35.4187-14.116-53.1013-21.2404 c-20.896-8.4192-41.7618-16.9137-62.6388-25.3802c-2.6036-1.0559-5.2452-1.5109-8.1017-1.3282 c-11.0736,0.7084-22.1577,1.2535-33.2365,1.8845C166.2313,8.9147,165.618,9.1738,164.0623,9.5636z M229.8759,351.5538 c0.1751,0.2321,0.3503,0.4643,0.5254,0.6964c1.0433-0.5461,2.1116-1.0495,3.1262-1.6446 c23.7947-13.9576,47.5901-27.9139,71.356-41.9206c1.3056-0.7696,2.56-1.8138,3.486-3.0043 c2.8692-3.6883,5.5834-7.4977,8.3301-11.2804c6.5309-8.9944,13.7715-17.3878,21.4294-25.4326 c0.5056-0.5311,1.4937-0.9634,0.5375-2.537c-0.6612,0.2794-1.4347,0.6802-2.2529,0.9408 c-9.7585,3.1074-19.6599,5.6806-29.6459,7.9465c-9.4784,2.1506-18.9257,4.4395-28.4161,6.5348 c-6.0964,1.346-10.1359,4.9277-12.5221,10.5945c-0.6698,1.5909-1.4297,3.1632-2.3247,4.6369 c-5.8536,9.6394-11.7254,19.2681-17.6509,28.8636C240.5678,334.5078,235.2049,343.0203,229.8759,351.5538z M159.9334,23.7662 c0.997,29.2663,1.7356,57.9326,1.8056,86.8198c6.9839,2.5093,13.9675,5.0309,20.9684,7.5025 c0.409,0.1444,0.9594-0.1124,1.4688-0.1861c0.1921-0.5775,0.466-1.0486,0.4935-1.5339c1.4768-26.1063,2.9359-52.2137,4.374-78.3222 c0.0366-0.6652-0.1806-1.3444-0.3073-2.2069c-8.4453-4.3817-17.4199-7.5836-26.0342-11.5774 C162.1056,23.9855,161.3689,24.0115,159.9334,23.7662z M275.6021,179.1741c0.1752,0.4665,0.1952,0.6581,0.2988,0.7761 c5.9645,6.7883,11.41,13.9479,15.6165,21.9803c0.8466,1.6168,2.2031,2.6042,3.653,3.5861 c6.4439,4.3636,13.4408,7.8225,19.88,12.1916c0.2817,0.1911,0.62,0.3158,0.9487,0.4176c4.955,1.5348,9.6928,3.7718,14.8948,4.5129 c3.4691,0.4942,6.7327,1.5873,9.6487,3.6165c0.6764,0.4707,1.4499,1.0229,2.7222,0.118c0.3515-4.6931,0.6188-9.6465,0.2994-14.7185 c-5.4557-3.4331-10.9876-6.2581-16.6093-8.9009c-9.7057-4.5625-19.4625-9.0159-29.1739-13.5663 c-6.4236-3.0098-12.7976-6.1254-19.2149-9.1486C277.7043,179.6331,276.718,179.4914,275.6021,179.1741z M149.9247,148.4402 c-0.8288,1.5198-0.1727,2.6057,0.62,3.4947c1.8389,2.0623,3.6989,4.1245,5.7249,5.998 c7.4233,6.8646,15.9724,12.1625,24.7136,17.1036c7.531,4.2569,15.3071,8.1148,23.6144,10.6605 c3.6179,1.1086,7.3964,1.7118,11.1254,2.4215c0.6769,0.1288,1.4672-0.3383,2.4723-0.5999 c-0.4925-0.9908-0.6831-1.6822-1.1068-2.1719c-1.5833-1.8302-3.0581-3.8194-4.9096-5.3397 c-4.938-4.0548-9.9181-8.0835-15.1269-11.7765c-6.3589-4.5084-13.2654-8.1377-20.2948-11.507 c-6.7257-3.2237-13.6428-5.9442-20.884-7.7786C153.8886,148.4424,151.8785,147.8701,149.9247,148.4402z M359.1117,260.1803 c-5.6369,0.0832-7.4476,0.7689-10.8849,4.5982c-5.3238,5.9306-10.5821,11.9271-15.6703,18.0599 c-3.9798,4.7968-7.6679,9.836-11.4567,14.7897c-0.3526,0.4609-0.4962,1.0815-0.9925,2.2088 c3.0331-0.873,4.8642-2.5054,6.9704-3.5897c2.9767-1.5326,5.3616-3.6593,7.5056-6.2639 c6.8279-8.2947,13.8558-16.4246,20.7677-24.6508C356.5508,263.9044,357.5615,262.3174,359.1117,260.1803z M320.1534,240.9476 c-0.0088,0.0196-0.0175,0.0393-0.0263,0.0589c2.1856,0.9853,4.3339,2.0667,6.5655,2.9335c3.4145,1.3262,4.2207,0.8452,4.9738-2.6774 c0.1427-0.6673,0.2624-1.3468,0.3067-2.0263c0.0736-1.1306-0.3822-2.0978-1.446-2.48c-3.0538-1.0975-6.1327-2.1334-9.2383-3.0721 c-0.559-0.1689-1.4116,0.0644-1.9256,0.4121c-2.585,1.7485-2.3897,5.0629,0.3297,6.6218 C319.8416,240.8033,319.9997,240.8715,320.1534,240.9476z M345.9419,243.8758c-1.3754,1.4086-2.2928,2.6801-1.0285,3.5615 c3.5283,2.4594,7.1806,4.7739,10.957,6.8276c1.4582,0.793,3.311,0.4893,4.8013-1.4072 C355.9163,249.4004,351.2603,246.2613,345.9419,243.8758z M300.818,222.2944c4.6307,2.8918,8.4949,5.3086,12.3658,7.7143 c0.2874,0.1786,0.6141,0.3484,0.9413,0.3984c0.9255,0.1416,1.6874-0.1227,2.0598-1.0703c0.6233-1.5858,0.2207-2.8855-1.2339-3.3956 c-2.2594-0.7925-4.5652-1.4553-6.8603-2.143C306.0137,223.1761,303.9813,222.3038,300.818,222.2944z M142.9821,153.0386 c-0.832-3.337,0.5081-5.7334-0.0618-8.2341c-2.7292,0.2602-3.4703,0.7831-3.3112,2.3228 C139.8209,149.1753,140.5,151.0078,142.9821,153.0386z M332.4001,230.7872c1.8874,0.7832,2.8213,1.184,3.7664,1.5557 c0.314,0.1234,0.6911,0.3013,0.9792,0.2258c0.4419-0.1158,1.0519-0.344,1.1833-0.6826c0.138-0.3555-0.0625-1.0464-0.362-1.3295 c-0.8795-0.831-1.9298-1.5114-3.2182-1.167C334.161,229.5467,333.6578,230.0204,332.4001,230.7872z M336.1127,244.1656 c2.7235-0.3051,3.3351-1.6699,3.3672-3.3364c0.0104-0.5403-0.4393-1.3883-0.8928-1.5748c-0.8719-0.3584-1.8163,0.077-2.0567,1.0238 C336.2474,241.3929,336.2658,242.5842,336.1127,244.1656z M187.2209,27.1858c0.1074,0.0911,0.215,0.1821,0.3224,0.2732 c-0.0118-0.0817,0.0037-0.2061-0.0417-0.2352C187.4296,27.1776,187.3166,27.1952,187.2209,27.1858z M167.6885,133.2166 c-0.6805-1.3592-2.0295-1.7893-3.3861-2.146c-4.3429-1.1418-8.6446-2.4954-13.0424-3.3581 c-4.3953-0.8621-8.8771-1.3286-13.3394-1.7907c-4.7238-0.4891-9.3078,0.4647-13.7379,2.0138 c-1.4122,0.4938-2.7386,1.4373-3.8648,2.4431c-0.4534,0.4049-0.4598,1.5791-0.2754,2.3029 c0.0791,0.3106,1.1933,0.5784,1.7826,0.4924c1.1858-0.1728,2.3368-0.5928,3.4977-0.9262 c5.5834-1.6035,11.1958-1.7919,16.9188-0.6978c5.6035,1.0713,11.184,2.1561,16.6076,3.9887 c1.9421,0.6563,4.0155,1.094,6.0545,1.2208c1.0206,0.0634,2.0984-0.7962,3.3101-1.3055 C167.9982,134.4873,167.9739,133.7866,167.6885,133.2166z M239.7775,212.7195c0.3798-0.6506-0.0451-1.9712-0.7193-2.2357 c-1.5396-0.604-6.7702,0.4751-7.7316,1.6683c-0.3001,0.3723-0.4885,0.9403-0.4886,1.4187 c-0.0002,0.4558,0.3122,0.9117,0.4377,1.2387C233.7184,216.159,238.4978,214.9118,239.7775,212.7195z M63.3383,235.3303 c-12.7001-7.8828-26.4318-13.6775-40.1053-19.5948c-2.0652-0.8938-4.0884-1.8938-6.0878-2.9283 c-1.9294-0.9983-2.7105-2.7434-2.3201-4.7893c0.3528-1.8493,0.8954-3.7146,1.6866-5.4185 c2.8439-6.1243,5.8363-12.1794,8.7554-18.269c0.8223-1.7156,1.4886-3.513,2.4033-5.1756c0.9343-1.6981,2.0772-2.0386,3.9487-1.3952 c0.9814,0.3373,1.961,0.7247,2.8704,1.2199c6.3894,3.4782,12.7464,7.0161,19.1415,10.4837 c4.8694,2.6403,9.8001,5.1674,14.6657,7.8146c4.5657,2.484,9.1506,4.9453,13.5972,7.6317c3.4212,2.0668,3.5871,2.707,2.2804,6.3501 c-1.1098,3.094-2.4952,6.0881-3.6913,9.1526c-0.4179,1.0709-0.6352,2.2203-0.9991,3.5318c2.8015,0.6078,5.1552,0.239,7.4172-0.6633 c2.1944-0.8753,3.808-0.383,5.65,1.1593c2.2257,1.8636,4.8137,3.3929,7.4426,4.6551c4.7275,2.2698,5.5432,3.4303,5.1346,8.8017 c-0.0247,0.3246,0.1048,0.6611,0.1744,1.0599c1.7123,1.0693,3.4151,2.2538,5.2265,3.2385c3.8002,2.0657,7.6503,4.0402,11.493,6.0268 c5.8403,3.0193,11.6964,6.008,17.5355,9.0297c1.5374,0.7956,3.0657,1.6165,4.5476,2.5099 c3.4166,2.0596,6.7569,4.2491,10.2116,6.2414c4.504,2.5975,9.0012,3.3381,13.4611-0.2992c0.6691-0.5457,1.9688-0.6183,2.9027-0.4632 c1.1645,0.1934,2.3243,0.7256,3.3608,1.3272c5.4027,3.1357,10.7081,6.4323,15.4847,10.4872 c3.3031,2.804,3.7963,5.0012,1.0987,9.0317c-1.4379,2.1483-3.1224,4.1471-4.8384,6.087c-0.78,0.8818-1.8169,1.6603-2.8921,2.1348 c-3.8038,1.6783-7.678,3.1968-11.5183,4.793c-1.9117,0.7946-3.5879,0.5822-5.3833-0.583 c-4.0703-2.6415-8.2276-5.1576-12.4357-7.5746c-2.8465-1.6348-5.7975-3.1052-8.7759-4.4896 c-7.5692-3.5182-14.586-7.9859-21.7166-12.28c-11.1319-6.7038-22.3952-13.1895-33.6083-19.7581 c-7.1809-4.2065-14.3794-8.3828-21.5545-12.5991C64.7736,239.9791,64.7788,239.931,63.3383,235.3303z M78.614,241.1504 c3.7145,2.2397,7.4239,4.488,11.1446,6.7172c8.027,4.8095,16.6049,8.6614,24.3316,13.9947 c0.5698,0.3932,1.1852,0.7222,1.7894,1.0636c7.0931,4.0089,14.1786,8.0313,21.29,12.0076c1.5092,0.8438,3.1487,1.4527,4.6694,2.278 c7.9113,4.2934,16.4129,7.5159,23.6654,13.0153c0.2707,0.2052,0.8433,0.0121,2.0224-0.0085 c-1.0762-1.0232-1.5736-1.6798-2.2274-2.0829c-1.9185-1.1828-3.9068-2.2517-5.8543-3.3884 c-8.2306-4.8041-16.4562-9.6169-24.6844-14.4249c-0.2995-0.175-0.6061-0.3379-0.9124-0.5009 c-7.7944-4.1471-15.6128-8.2497-23.3771-12.4524c-7.7695-4.2054-15.429-8.6175-23.2546-12.714 c-2.7117-1.4195-5.4212-3.0726-8.5958-3.436c-1.2717-0.8539-2.5024-1.7788-3.8266-2.5415c-1.303-0.7505-2.4393-1.9183-5.1921-2.2067 C73.2533,238.3865,75.435,240.6784,78.614,241.1504z M20.494,207.4434c2.775,2.1795,5.5887,3.1196,8.2715,4.2839 c5.5533,2.4099,11.1794,4.6551,16.7054,7.1249c7.089,3.1683,14.1988,6.3088,21.0158,10.6208 c1.7044-2.8669,4.6917-3.5244,7.5669-4.8833c0.6782-4.5665,4.0437-8.2242,4.8045-13.0921c-1.5441-1.759-3.5268-2.7601-5.5185-3.7892 c-6.602-3.4109-13.211-6.8111-19.7568-10.3278c-6.3958-3.4361-12.7164-7.0121-19.0736-10.5202 c-0.4534-0.2501-0.9233-0.4803-1.4065-0.6645c-2.1038-0.8018-3.3517-0.4254-4.2873,1.5439 c-2.5955,5.4633-5.1355,10.9536-7.6237,16.4666C20.7859,205.1054,20.7555,206.1737,20.494,207.4434z M181.0623,279.9688 c-2.817-2.0723-4.9774-3.7578-7.2384-5.2953c-1.9213-1.3065-3.9339-1.7498-6.3271-0.8854 c-2.0616,0.7447-4.3415,0.8836-6.5234,1.2984c-0.6269,0.1191-1.4617-0.0273-1.4099,1.3805 c2.4369,1.5218,5.0644,3.1183,7.6466,4.7848C171.9012,284.2793,176.209,283.1692,181.0623,279.9688z M93.9618,231.9727 c-2.6538-2.8011-5.6452-4.1199-9.6756-2.8333c-2.2773,0.7269-4.7656,0.7823-7.1498,1.1929c-0.5954,0.1026-1.1558,0.408-1.95,0.7005 c1.3439,2.31,3.5195,2.6779,5.2762,3.6232c1.6716,0.8993,3.3911,1.7305,5.1508,2.4394c1.8323,0.7382,3.4623,2.2467,5.4693,1.9353 C92.1046,236.5256,93.0029,234.3235,93.9618,231.9727z M172.1839,290.8878c1.2237,0.7642,1.639,1.2435,1.9484,1.1829 c3.201-0.6277,6.4283-2.4453,8.1234-4.6411C179.0673,288.5244,176.1889,289.5127,172.1839,290.8878z M203.6629,325.2859 c-6.4961-3.8695-11.7553-6.9097-16.9184-10.1049c-4.7062-2.9125-5.1758-4.5223-2.6933-9.3397 c4.2853-8.3159,8.6948-16.5676,13.035-24.8553c0.5611-1.0715,0.9902-2.2116,1.5342-3.2928c0.543-1.0793,1.0493-2.2009,1.758-3.1674 c1.2242-1.6698,2.7119-1.9821,4.5625-1.1502c0.3157,0.1419,0.6321,0.298,0.9148,0.4954c6.895,4.8152,14.9925,7.2049,22.3537,11.0815 c2.6042,1.3714,5.2959,2.5757,7.9297,3.8921c2.321,1.16,4.6238,2.3573,6.9204,3.565c0.7636,0.4016,1.5321,0.8233,2.2126,1.3472 c1.2883,0.9916,1.6302,2.2126,0.9458,3.6754c-1.1746,2.5102-2.4523,4.972-3.6782,7.4583 c-3.1404,6.3696-6.2465,12.7565-9.432,19.1034c-0.9307,1.8545-2.0134,3.6436-3.1559,5.3774 c-0.8607,1.3062-1.6049,2.5139-1.8544,4.1806c-0.3485,2.3278-2.3014,3.584-4.585,3.0969c-1.6525-0.3527-3.2922-1.0961-4.7492-1.977 C213.2673,331.3494,207.8482,327.8995,203.6629,325.2859z M190.1698,309.2629c5.918,3.4778,11.3175,6.5663,16.6307,9.7966 c5.4354,3.3046,10.8197,6.6845,16.9208,9.2621c1.0676-1.5088,2.069-2.6942,2.8185-4.0218 c4.0003-7.0853,7.978-14.1843,11.8637-21.3328c0.8022-1.4757,1.6167-3.0922,1.0198-5.2018 c-0.9558-0.6992-1.9976-1.6179-3.1766-2.299c-9.9067-5.724-20.4885-10.0799-30.746-15.0943 c-0.1274-0.0623-0.3419,0.0272-0.5068,0.0759c-0.1589,0.0471-0.3063,0.1332-0.4592,0.2019 c-0.228,0.2541-0.5206,0.4742-0.6746,0.7672c-4.0266,7.6653-8.0688,15.3228-12.0251,23.0244 C191.1455,305.7837,190.8283,307.3175,190.1698,309.2629z M49.8268,202.3024c-3.6766-1.8907-7.3659-3.7591-11.0852-5.5638 c-2.1672-1.0517-4.3714-2.0453-6.6222-2.8981c-0.9752-0.3696-2.0931-0.1836-2.6993,0.8991c-0.587,1.0482-0.338,2.1012,0.5616,2.7639 c1.5224,1.1215,3.1681,2.0767,4.7698,3.0893c1.5807,0.9993,3.1712,1.9831,4.7942,2.9967c-0.0647,1.4196-0.274,2.6249-0.1245,3.784 c0.1249,0.9685,0.4048,2.2154,1.0816,2.7546c1.5968,1.2722,3.3821,2.406,5.2581,3.2025c1.9275,0.8183,3.7425-0.1423,4.734-1.9896 c0.876-1.6322,1.7821-3.2483,2.7231-4.9593C53.1046,204.2723,51.5481,203.1875,49.8268,202.3024z M56.4165,214.1224 c-1.2468-0.4465-2.6689-0.5469-4.0069-0.5205c-0.4919,0.0097-1.2118,0.7532-1.3818,1.3007 c-0.1673,0.5384,0.1718,1.2754,0.4068,1.8793c0.1088,0.2798,0.4678,0.5099,0.7649,0.6616c3.373,1.7219,6.7386,3.4602,10.145,5.1139 c1.3549,0.6577,2.883,0.4955,3.8503-0.5838c1.3432-1.4987,3.0045-2.141,4.7974-2.7925c1.4783-0.5371,1.6864-2.4163,0.3534-3.324 c-2.557-1.7413-5.2179-3.338-7.9057-4.8718c-0.4803-0.274-1.5791-0.2064-1.8969,0.1479c-0.5024,0.5598-0.8881,1.5423-0.7766,2.2612 c0.1716,1.1065,0.8059,2.1414,1.3081,3.3629C60.1023,215.8183,58.3191,214.8038,56.4165,214.1224z M212.9315,297.7317 c-0.8807,3.7119,1.3114,5.8627,3.9587,7.7092c1.9423,1.3548,3.4957,1.3443,5.1554-0.2656c1.2669-1.2288,2.5717-2.1136,4.2327-2.7561 c3.0039-1.1618,3.2223-3.4756,0.6784-5.4215c-0.5442-0.4162-1.1596-0.7484-1.769-1.0683c-2.2888-1.2012-4.5658-2.4283-6.8899-3.5579 c-3.0998-1.5068-6.2192-2.9787-9.3838-4.3413c-0.4807-0.2069-1.577,0.0614-1.8117,0.4545 c-0.3835,0.6423-0.5642,1.6613-0.3274,2.3481c0.2505,0.7271,1.0165,1.3492,1.6852,1.8448c1.3767,1.0204,2.8385,1.9262,4.4198,2.9823 C212.9152,296.7182,213.0449,297.2538,212.9315,297.7317z M210.6833,312.6718c1.4711,0.9187,2.8967,1.9248,4.4293,2.7261 c1.0601,0.5541,2.2452,0.9238,3.4162,1.1961c1.2026,0.2795,2.6529-0.5511,2.9599-1.5946c0.347-1.1794-0.2612-2.1176-1.2043-2.6125 c-3.8297-2.0099-7.6909-3.9645-11.5945-5.8263c-1.0162-0.4847-2.0564-0.0708-2.6515,0.9914 c-0.6069,1.0835-0.2211,2.2916,1.002,3.097c1.1581,0.7627,2.3492,1.4756,3.5258,2.2103 C210.6052,312.7968,210.6443,312.7343,210.6833,312.6718z"/></svg>`,`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 359.6065 429.2505" xml:space="preserve"><path fill="${color}" d="M227.9258,317.5579c-0.9414-1.0642-1.4087-2.428-1.3164-3.8412c0.1919-2.9175,2.7466-5.1487,5.6763-4.9471 c9.3633,1.0255,18.835,1.0264,28.1748,0.0019l0.5547-0.0611v0.2132c0.4741-0.1153,0.9604-0.1628,1.4585-0.1483 c1.4233,0.0514,2.7417,0.6484,3.7114,1.6836c0.9702,1.0342,1.4766,2.3815,1.4253,3.7937c-0.0513,1.4132-0.6533,2.7217-1.6958,3.6841 c-1.0425,0.9625-2.4082,1.452-3.8232,1.4142c-5.0356,0.5505-10.1255,0.8258-15.2236,0.8258c-5.1011,0-10.2114-0.2753-15.2856-0.8277 C230.1627,319.2551,228.8648,318.6192,227.9258,317.5579z M75.7032,316.6846l0.0898,0.0233 c2.9043,0.4701,5.7671,0.6174,8.585,0.6174c2.4004,0,4.7686-0.1066,7.0996-0.2122c3.689-0.1657,7.1743-0.3237,10.5908-0.064 c2.9492,0.222,5.5088-1.9763,5.7295-4.8938c0.1069-1.4122-0.3472-2.7818-1.2783-3.8567c-0.9312-1.0739-2.228-1.7234-3.6514-1.83 l-0.5376-0.0398v0.1939c-3.7949-0.2472-7.5728-0.0775-11.231,0.0892c-4.791,0.2181-9.3179,0.4236-13.6904-0.2927 c-2.9385,0.0611-5.2803,2.4832-5.2202,5.3997C72.2339,313.9891,73.646,315.945,75.7032,316.6846z M359.6065,16.628l-4.4482,146.3097 c-2.7891,91.6784-4.189,137.6949-4.9277,160.6703c-0.6978,21.7066-0.7515,23.1411-1.1289,23.4716 c-1.5776,3.0348-5.8687,3.3449-18.3794,4.2521l-1.3286,0.0969l-5.2012,0.0572c-20.9473,0.2288-21.084,0.2307-50.7686,0.2307 c0.7827,4.7504,1.3369,9.5869,1.6484,14.3848c1.0942,9.5162,1.5176,19.2185,1.2568,28.8141 c0.252,9.2012-0.335,18.507-1.7446,27.6326c-0.8779,3.813-1.9224,6.7024-6.6782,6.7024c-3.1758-0.0184-6.1489-1.2629-8.375-3.5049 l-0.105-0.156c-2.7197-6.431-4.6812-13.179-5.8296-20.0569c-3.3862-13.4601-5.7798-27.3264-7.106-41.1751 c-0.7427-4.1649-1.1797-8.4597-1.2954-12.7361H111.816c-0.2383,6.274-0.9009,12.5849-1.9707,18.7668 c-1.4741,12.8834-3.8672,25.8114-7.1099,38.3982c-0.9761,5.171-2.481,10.3003-4.4653,15.2135 c-1.1982,2.1208-4.2803,3.8518-7.5225,4.2677c-2.5386,0.3228-4.6533-0.2307-5.9575-1.5663 c-6.7715-6.8711-2.9136-63.6745-1.0981-75.3677H49.4273c-0.147,0.0049-16.1909,0.4459-22.9399,0.2627 c-1.3945-0.0359-3.2261,0.0756-5.1621,0.1977c-5.7969,0.3615-13.0112,0.8132-16.3052-2.1915 c-1.145-1.0449-1.7441-2.4425-1.7803-4.1513c-0.1846-8.7766-1.4604-74.9538-1.4604-74.9538l-0.0439-0.5195 c-0.1597-1.9347-0.3174-3.8703-0.4648-5.8059c-0.1411-1.8561-0.2734-3.7113-0.3906-5.5674c-0.1216-1.925-0.228-3.8499-0.3179-5.7758 c-0.0996-2.145-0.1797-4.2899-0.2456-6.4359c-0.0762-2.5143-0.1318-5.0285-0.1743-7.5428c-0.0513-3.0338-0.0835-6.0676-0.105-9.1004 c-0.0264-3.7045-0.0361-7.4081-0.0371-11.1106c-0.001-4.5235,0.0112-9.0461,0.0308-13.5696 c0.0229-5.4938,0.0566-10.9875,0.0957-16.4813c0.0474-6.6142,0.1021-13.2275,0.1611-19.8427 c0.0698-7.8849,0.1455-15.7699,0.2241-23.6548c0.0923-9.3059,0.1885-18.6117,0.2861-27.9185l0.98-91.406 c0.02-1.8571,0.0034-3.7142-0.0132-5.5713c-0.0234-2.6684-0.0479-5.4279,0.041-8.1466c0.0796-2.4387,0.2529-4.6786,0.5298-6.8468 C2.5069,3.8599,2.9273,1.9679,4.585,0.956L4.5626,0.9037l0.2881-0.1522l0.0586,0.0339c3.2207-0.9848,6.5386-0.8248,9.7529-0.6688 c0.8804,0.0426,1.7617,0.0853,2.6416,0.1047l9.5542,0.2191c0.0894,0.0019,0.29,0.0155,0.5693,0.0339 c1.1328,0.0746,4.1431,0.2714,5.1748-0.0107l0.0967-0.0271l0.0991,0.0126c1.6431,0.2045,3.3496,0.1347,4.9985,0.0669 c0.9746-0.0388,1.9844-0.0824,2.98-0.0669l66.9771,2.0015c0.4619,0.0572,0.874,0.0989,1.2686,0.126 c1.1655,0.0824,2.3608,0.0998,3.5166,0.1163l1.1157,0.0184c0.5625,0.0107,1.0908,0.0204,1.6138,0.0698 c0.4414,0.0504,0.8701,0.0116,1.2788-0.1115l0.0786-0.0233l0.082,0.0019l16.8901,0.506 c16.7334-0.4827,93.2969,0.5389,139.0415,1.1486c14.7114,0.1958,26.6626,0.3547,33.2007,0.4207 c6.3618,0.0649,12.5601-0.2094,18.5557-0.474c14.521-0.6387,27.063-1.1922,32.354,3.9381c1.9067,1.8493,2.8037,4.2948,2.7422,7.4749 c0.0259,0.2695,0.0605,0.5379,0.0947,0.8074L359.6065,16.628z M11.1221,344.8464c0.3418-0.0068,0.9038-0.0107,1.6562-0.0107 c1.6675,0,4.271,0.0155,7.4902,0.0339c9.4229,0.0572,25.1953,0.1483,39.4785-0.0233c12.7295-0.3024,39.0049-0.5137,91.3535-0.9334 c40.5967-0.3257,96.1963-0.7715,173.8076-1.4839l2.9258-0.2016c5.9072-0.4023,9.8101-0.6678,13.9565-1.3269l0.0156-0.002 c0.1504-1.355,0.2393-6.4088,0.4878-20.528c0.1611-9.1847,0.3926-22.3346,0.7568-41.1548 c-14.394-0.1144-316.1396-3.1501-336.5337-6.8294v3.7326l-0.0947,0.0174c0.0107,3.1259,0.562,17.1288,1.0962,30.6926 c0.5,12.6973,0.9722,24.6899,0.9722,27.0268l-0.001,0.7454c-0.0068,3.7132-0.0151,8.3337,1.4912,9.8002 C10.2989,344.7107,10.6749,344.8503,11.1221,344.8464z M186.3506,130.1884c-9.749,3.6405-21.4844,3.5969-31.9121,0.566 c-10.0088-2.9087-18.3979-8.3696-23.6221-15.3763c-5.9697-8.008-7.6118-17.7093-4.7476-28.0562 c2.2661-8.5256,6.9888-16.0771,13.6729-21.8713c-2.0288-1.7834-3.4082-4.2221-3.8921-6.8653 c-15.5903,14.3509-21.7695,31.3953-17.4043,48.085c4.2983,16.4328,18.6743,29.7233,36.6255,33.8592 c11.231,2.7081,22.8823,2.0917,33.7432-1.7757c-1.0029-1.4704-1.8379-3.0503-2.4863-4.7048 C185.8672,132.7143,185.3599,131.2429,186.3506,130.1884z M162.3804,73.9112v-0.1367c-4.6479-1.4471-7.7891-5.6275-7.8838-10.4321 c-8.2217,3.2267-14.9941,9.1556-19.2437,16.8331c3.9214-1.3347,8.208-1.0633,11.9565,0.7929c2.083,1.3608,3.478,2.9369,4.708,4.3277 c1.8164,2.0539,3.251,3.6754,5.9385,3.6754c1.769-0.1531,3.5698,0.031,5.313,0.5476c3.7563,1.7737,6.2632,5.2166,6.7778,9.2351 c0.8843,6.6617-5.248,12.0082-10.7681,14.5622c-1.4424,0.5564-2.4893,0.8374-3.2534,1.0429 c-0.5342,0.1434-0.9561,0.2569-1.3047,0.4032c-1.8994,0.8161-2.0874,2.6218-2.3252,4.9083 c-0.1206,1.1592-0.2451,2.3572-0.6133,3.5552c-0.0186,0.1619-0.0635,0.3179-0.1348,0.4633c-0.0977,0.2045-0.2393,0.38-0.4141,0.5156 c9.1626,3.8819,20.1177,5.2447,29.9736,3.2373c-0.478-0.7899-0.8765-1.6264-1.1895-2.4949 c-1.2705-3.5252-1.0811-7.3305,0.5327-10.7152c1.6138-3.3837,4.459-5.9416,8.0112-7.2026c1.4575-0.4439,2.8496-0.629,4.1953-0.8064 c2.0884-0.2772,3.8921-0.5156,5.3301-1.6138c0.9458-0.7221,1.7627-1.6691,2.5527-2.584c1.209-1.4006,2.457-2.8467,4.2354-3.6018 c0.5776-7.5631-1.1016-14.9857-4.8696-21.5583c-0.8159,2.2991-2.541,4.226-4.7803,5.2825 c-5.6938,2.9213-9.1982-0.7405-12.2891-3.9711c-1.8237-1.9075-3.5464-3.7084-5.5684-4.1436 c-1.6509-0.2782-3.3901-0.0165-5.2314,0.2598c-2.6865,0.4052-5.7334,0.8617-9.3081-0.2714L162.3804,73.9112z M197.941,73.6931 c-3.4424-4.414-8.0508-7.7473-13.3467-9.6519c-4.1777-1.3453-8.5088-2.3873-12.8569-3.0929 c-4.667-0.4769-9.3442-0.0698-13.8813,1.2174c0.1445,2.2904,1.3643,4.3617,3.3125,5.5936c3.5474,2.1217,6.8188,1.5944,10.2847,1.039 c1.5317-0.2472,3.0918-0.4982,4.6816-0.4982c1.4004,0,2.8232,0.1948,4.2715,0.7589c2.9761,1.1592,4.895,3.4409,6.5879,5.453 c2.0791,2.4726,3.7202,4.4256,6.5449,3.4583l0.3506-0.1309C195.6451,77.1912,196.1514,77.0041,197.941,73.6931z M184.5294,126.6457 c11.4111-3.4428,17.4116-10.1859,19.6543-22.2503c-0.8799,1.4888-1.8633,2.9184-2.939,4.2715l-0.1089,0.1018 c-3.0376,2.0771-6.5859,3.3149-10.2656,3.5804l-0.127,0.0514C185.1446,114.7277,182.4234,121.0473,184.5294,126.6457z  M148.8638,115.5487c0.6968-3.3362,3.2212-4.4915,5.6626-5.6091c0.6548-0.2995,1.332-0.6097,1.979-0.9605 c3.3599-1.8232,7.959-5.8553,7.6646-9.1101c-0.2808-1.6788-1.1372-3.2819-2.4067-4.4799c-0.7036-0.504-1.6245-0.7589-2.5591-0.6804 c-2.4756,0.3247-5.0166-0.2501-7.1279-1.6128c-2.2344-1.388-3.6689-3.1918-4.9346-4.7823c-1.3169-1.6555-2.4541-3.0852-4.2319-3.91 c-3.272-1.0478-6.8442-0.8442-10.0259,0.5883c-4.3906,11.0079-3.0874,21.0572,3.7729,29.0729 c3.124,3.6502,7.314,6.715,12.104,9.0597c-0.0083-0.1919,0.021-0.3877,0.0923-0.5757c-0.0039-0.7764-0.0571-1.5421-0.1084-2.2826 C148.6343,118.6726,148.5303,117.1683,148.8638,115.5487z M95.9156,139.4584c-16.2954,0.3547-28.6753,0.5738-37.7393,0.7337 c-25.9834,0.4594-28.106,0.4972-30.3779,2.0451c-3.1128,1.4384-4.5327,4.9248-3.3423,8.0187 c0.623,0.0989,3.3896,0.1812,11.9712,0.4352c9.6821,0.2869,27.6562,0.819,59.8506,1.891L95.9156,139.4584z M25.856,126.5459v-0.0058 c-3.3643,2.6839-2.2012,6.0986-1.7339,7.1347c0.9629,2.1372,2.9038,3.5523,4.3228,3.1675 c5.6606-1.2697,11.4517-1.9191,17.2339-1.9356c10.0894-0.7202,20.3633-0.9285,30.5-0.6232 c11.9082,0.2724,13.6963,0.2869,16.2056,0.2879c0.4238-3.8887,0.2886-7.8055-0.4028-11.6563 c-12.7324,0.3344-22.8491,0.5835-30.9126,0.7822c-31.5283,0.7744-31.5283,0.7744-33.7764,2.0665 c-0.208,0.1192-0.4341,0.2491-0.7007,0.3906L25.856,126.5459z M217.6856,13.725c-23.8291,0-42.4678,0.0252-57.4585,0.0446 c-61.6323,0.0824-61.6294,0.0804-107.2026-2.0132c-10.9185-0.5021-24.4526-1.1234-42.0781-1.8939L6.629,149.4514l13.2969,0.44 c-1.1748-4.3568,0.585-8.9085,4.3599-11.3704c-0.5918-0.2665-1.1499-0.6009-1.667-1.0003 c-0.9634-0.8394-1.7275-1.8174-2.2944-2.9243c-2.4541-4.793-0.522-10.6735,4.3071-13.1092 c2.9961-1.6758,6.4194-2.5937,9.8813-2.6441c19.2109-1.3909,38.7354-1.6167,58.0044-0.6698 c1.4634,0.2249,2.6089,1.2523,2.9707,2.6228c0.688,4.6447,0.5029,9.2603-0.5391,13.7771c1.3389,0.1124,1.9712,0.1716,2.3071,0.2035 c0.3506,0.033,0.3506,0.0339,0.5508,0.0339l0.1914,0.0378c2.3594,0.9693,2.0981,3.9749,1.5776,9.964 c-0.1826,2.1004-0.4072,4.6873-0.5674,7.7085l66.3941,2.2119c-0.7969-2.4755-0.7954-5.1264,0.0044-7.6019 c-0.1821,0.0019-0.3638,0.0029-0.5454,0.0029c-27.1108,0.0019-49.8662-19.8786-53.2026-46.7203 c-1.3228-18.4983,7.4761-33.9638,27.6885-48.6985c0.0981-0.0775,0.6943-0.5108,1.3164-0.3964 c0.3184,0.0572,0.5815,0.2452,0.7607,0.5418c0.5991,0.9896,0.3657,1.2009-2.4941,3.7782l-0.4282,0.3867 c2.5386,0.8345,3.7915,3.1927,4.8193,5.1274c0.1772,0.3334,0.3496,0.6581,0.5229,0.9644c2.1699-1.6332,4.564-2.9281,7.126-3.8509 c10.6953-4.3326,22.4966-4.3316,33.2104,0.0068c8.6143,2.6732,15.7246,8.7107,19.9819,16.9863 c5.1821,10.0735,5.6675,22.6342,1.3667,35.3683c-2.8823,9.1983-9.311,15.3279-17.3027,18.8036 c0.0776,0.0107,0.1558,0.0252,0.2349,0.0446c1.8604,0.4585,3.6494,3.4913,4.9556,5.706c0.2554,0.4323,0.4863,0.8239,0.6841,1.1369 l1.9097-1.105c1.0752-0.7318,1.6958-1.2019,2.1069-1.513c0.7471-0.5651,0.8706-0.6387,1.5684-0.5932 c0.1719,0.0107,0.4014,0.0242,0.731,0.0242h0.5v2.0209l-0.1758,0.1483c-8.5352,7.2074-19.3599,11.35-30.5498,11.7048 c0.8052,2.5618,0.8042,5.3115-0.0029,7.8723l44.667,1.6826L217.6856,13.725z M213.0245,248.5417 c0.2363-8.417,0.3608-14.6397,0.3711-18.5158c-8.4839,0.0785-71.0049,1.859-74.4487,4.6786 c-2.1841,1.8057-3.377,3.8208-3.5439,5.9861c-0.3052,3.9565,2.7773,7.4226,4.0938,8.9026c0.1265,0.1425,0.23,0.2588,0.3145,0.3577 c0.7627-0.3421,1.5518-0.63,2.3511-0.8588c9.1055-1.1854,18.3037-1.8774,27.4165-2.0713v-0.1434l0.4893-0.0107 C184.3536,246.5616,198.8013,247.1266,213.0245,248.5417z M136.796,267.4937l75.8857,1.8969l0.3687-18.3045l-6.8472,0.2239 c-59.9858,1.9637-62.3271,2.0403-65.375,3.9536C136.7149,257.8874,135.0499,262.9886,136.796,267.4937z M180.8043,225.549 c10.9673,0,21.9346,0.2888,32.8208,0.8665c0.061-1.1127,0.0967-3.3158,0.1587-7.1531c0.0498-3.09,0.1172-7.2753,0.23-12.9047 c-11.0688,0.4488-20.0884,0.787-27.4624,1.0643c-32.8604,1.2348-32.8604,1.2348-35.9951,4.162 c-0.5957,0.5428-1.0884,1.1137-1.5083,1.7369c-2.8618,4.2551-1.7461,10.0144,2.4736,12.9173 C161.2413,225.7787,171.0235,225.549,180.8043,225.549z M213.8897,203.5148l0.8491-42.9227H7.1407l-0.1826,19.738 c5.9824-1.325,12.1001-1.6351,18.2002-0.9247c0.5508,0.1328,0.979,0.4245,1.2681,0.8316l0.0659,0.1289 c0.9897,2.9562,1.5166,6.0278,1.5674,9.1391c5.3701-1.0642,10.8603-1.4723,16.3281-1.2135 c-0.1152-0.945-0.2188-1.7641-0.3086-2.4765c-0.5986-4.7465-0.6343-5.0305,0.5869-5.8892l0.1025-0.0717l0.1245-0.0155 c7.7593-0.9654,15.645-1.1282,23.4375-0.4817l0.1299,0.0107l0.1079,0.0717c0.832,0.5564,1.3521,1.4442,1.4268,2.4367 c0.7026,5.9735,1.061,12.0663,1.0654,18.1029c5.8677-1.3996,11.8862-1.8358,17.9019-1.2988 c2.5596,0.6446,2.7896,2.4047,3.1079,4.8414c0.7427,4.384,1.1514,8.8784,1.2119,13.3399 c1.3452,16.427,1.3594,33.1167,0.0405,49.5825c10.7983,0.2656,18.7246,0.472,24.5327,0.6232 c9.458,0.2462,13.499,0.3499,14.8809,0.3179c-2.0732-5.6682-0.2974-11.9907,4.3711-15.7825 c-3.6631-1.515-7.4453-5.9619-7.7363-10.9032c-0.1753-2.9805,0.9136-8.5479,10.1777-12.3503 c2.416-0.8588,4.9097-1.3928,7.4424-1.5983c-2.0161-2.1236-3.2988-4.8376-3.645-7.755c-0.8857-7.4662,4.5132-14.2559,12.0356-15.135 c10.2686-1.2814,20.73-1.8697,31.0801-1.7301C195.5836,202.0968,204.8121,202.5688,213.8897,203.5148z M70.0323,266.4702 l19.8652-0.2733c-0.1504-4.1387-0.5742-12.7332-1.4604-30.6877c-0.418-8.4772-0.9419-19.0886-1.5933-32.3985 c-5.2378-0.7056-10.5566-0.8423-15.8208-0.4052l0.0347,1.4723c0.8574,36.3472,0.8574,36.3472-0.0757,51.4163l-0.2129,3.4506 C70.6485,261.5182,70.4004,264.015,70.0323,266.4702z M27.0626,266.9965l19.0337-0.3179 c-0.0312-3.9323-0.4204-14.2171-1.5947-45.2411l-1.0928-28.9256c-5.1265-0.7008-10.3242-0.7764-15.4683-0.22 C30.1807,217.1077,29.8853,242.2377,27.0626,266.9965z M50.6544,236.3533c-0.0269,2.239-0.0571,4.8114-0.0781,7.944 c0,3.0396-0.4341,15.8532-1.1909,22.3637l17.6279-0.2724c0.25-3.498-0.2373-18.8366-1.2495-50.701 c-0.2915-9.1828-0.6279-19.7777-1.0059-31.9313c-1.1992-0.1938-4.0479-0.1958-17.0015-0.1958 C50.8311,221.4975,50.814,222.9397,50.6544,236.3533z M6.6993,182.6873L5.3096,235.101c0.2666,7.9508,0.4478,13.5803,0.5801,17.688 c0.3057,9.4871,0.3496,10.8586,0.5913,14.3634l0.27-0.0252c1.8691-0.1803,4.1914-0.4032,17.5103-0.409 c-0.0151-2.3379-0.1987-15.3133-1.9692-84.0309C17.1163,182.0457,11.8741,182.0457,6.6993,182.6873z M309.3145,238.8976 c0.3896-10.5591,0.9277-25.131,1.6685-45.5426c-0.0361-1.5527-0.1758-3.1385-0.416-4.698 c-17.354-1.4025-34.9263-1.165-52.2393,0.7047l-0.2119,2.9911l-0.3267,7.9208c-0.4194,10.2334-0.4194,10.2334-1.9595,42.4196 l-1.313,27.4417c6.6284,0.1657,11.8906,0.2927,16.1562,0.3964c18.2524,0.441,18.2524,0.441,28.7808,1.1118 c2.3335,0.1493,5.1851,0.3305,8.8687,0.5573l-0.0005-0.0349C308.2886,266.6873,308.2886,266.6873,309.3145,238.8976z  M297.3106,167.9556v-2.6325c0-11.8696,0.1387-18.2899,0.2397-22.9792c0.2124-9.836,0.2842-13.149-1.2056-44.1265 c-0.8438-17.595-2.6338-25.6689-3.4238-27.4368c-3.6772,4.1756-6.5601,17.6134-8.5737,39.9732 c-1.666,18.5342-4.8198,61.7021-3.5439,71.3821h15.4531C295.962,177.3739,296.316,172.6061,297.3106,167.9556z M276.5679,182.3326 c2.1499-14.5719-24.021-113.0641-35.4028-138.8678c0.3286,23.491,8.627,124.2455,17.5864,140.1656 C264.6417,182.8512,270.6314,182.415,276.5679,182.3326z M312.9869,182.3365c4.2812-11.7019,7.2632-23.8787,8.8696-36.2096 c1.0059-6.0491,1.7607-10.3963,2.3545-13.8178c2.186-12.5975,2.186-12.5975,4.4272-37.9717l1.187-13.4 c0.8359-6.1354,1.2998-12.3522,1.3857-18.5342c-7.4868,19.1177-14.0059,38.8169-19.3906,58.6005 c-3.7773,10.8906-6.5654,22.1544-8.2979,33.5092c-1.2188,6.6394-2.0269,10.0832-2.5098,12.14 c-0.3198,1.3618-0.48,2.0442-0.48,2.5055c-0.5469,4.3665-0.7158,8.7485-0.5068,13.085l0.5503,0.0145 c4.9272,0.1173,9.6934,0.3644,12.4067,1.2174C312.8629,183.1778,312.838,182.7978,312.9869,182.3365z M343.4107,274.3105 l5.8828-256.91c-0.167-0.7822-0.7559-2.9165-6.8516-2.7556c-2.1055,0.0446-4.5273-0.2598-7.2139-0.9198H227.9503l-10.6836,255.7867 l34.1572,0.8384c0.2642-16.9824,0.4673-30.4861,0.6289-41.2304c0.6313-42.0048,0.6313-42.0048,1.2529-42.9033l0.0688-0.1037 c0.5957-0.7609,1.3677-1.3027,2.2354-1.5935c-11.2388-20.9302-22.5801-134.6437-19.8843-147.5601 c0.0278-1.0458,0.5693-2.0878,1.4751-2.776c0.8037-0.6087,1.7969-0.8733,2.8003-0.7376c1.002,0.1328,1.8916,0.6455,2.5054,1.4423 c5.373,5.4569,14.4688,35.8568,19.4087,53.4886c6.894,24.7995,12.0122,47.642,15.2441,68.0188 c-0.0312-1.0439-0.0615-2.1876-0.0903-3.4312c0.0649-1.8164,0.126-4.0757,0.1963-6.6986 c0.6147-22.829,1.8931-70.3314,12.3022-79.4609c1.3574-1.1902,2.8447-1.7098,4.4268-1.5654 c2.854,0.3673,4.0654,3.2703,4.8765,6.0627c1.4194,5.6295,2.2529,11.4072,2.4829,17.1879 c1.1611,10.8131,1.5518,21.8384,1.1597,32.7377c0.0005,8.798-0.1699,13.8149-0.311,17.4583 c3.4478-16.4726,8.0278-32.8153,13.6396-48.6636c3.6865-13.0288,8.3267-25.9558,13.7812-38.3924l0.1997-0.4013 c0.7085-1.4238,1.3779-2.7692,2.9424-3.3207c1.5703-0.4934,3.2603,0.3557,3.7812,1.892c0.6401,4.4954,0.7222,8.9724,0.2651,13.3942 c-0.3882,15.828-1.9346,31.8063-4.5942,47.454c-1.2891,13.8304-3.6177,27.7276-6.9155,41.2691 c-2.0537,10.7966-5.3149,21.4148-9.6885,31.5349c-0.2617,0.4071-0.6289,0.6717-1.0176,0.7783 c0.1416,0.1066,0.2632,0.2191,0.3628,0.3373c3.3608,3.6599,1.6274,24.8576-2.5596,76.0714l-0.9565,11.7213L343.4107,274.3105z"/></svg>`,`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 317.4577 242.9929" xml:space="preserve"><path fill="${color}" d="M314.5677,233.1166c-1.36,6.7083-1.987,2.3113-163.1255,6.1232c-20.4916,0.4864-12.8179,2.3538-14.382-78.1738 c-0.4229-21.9565-0.5919-113.9833-0.3662-153.352c0.0419-7.6596,4.6503-4.7564,31.0044-6.0813 c11.26-0.5709,140.0908-2.2194,145.2276-1.4161c2.6356,0.4155,3.9389,2.2127,4.1152,4.9888 c1.2472,20.3221-0.5215,218.2998-2.466,227.9112H314.5677z M146.2062,213.1046c2.9667,1.36,66.7165-75.4186,92.2032-81.4506 c1.4309-0.3378,1.0499-1.3458,1.0222-2.212c-0.5567-17.0034,0.1547-34.0068-0.1128-51.0029 c-0.1412-9.0757,2.9525-11.7958,11.4011-8.1386c9.7452,4.2139,16.6224,0.0986,22.9503-1.5431 c5.4044-1.402,2.8187,1.7336,3.516,15.7698c0.2682,5.4191-4.6362,6.9623-10.0411,7.4203 c-19.7722,1.6769-23.6617-6.5252-23.5705-0.0986c0.9303,68.2732-3.9599,17.7291,31.4131,57.6119 c9.7033,10.9363,8.5338,18.229-2.4944,7.2157c-15.3894-15.3542-24.7468-27.7986-44.8297-13.1909 c-24.5921,17.8838-56.2444,53.9473-76.0031,71.0426c-4.1997,3.6288-6.3772,7.0042-5.1793,12.5497 c1.156,5.3199,0,1.8249,157.1294,0.3101c5.5597-0.0567,1.1978-1.2053,2.7626-46.8451c0.1406-4.1855-0.9513-5.4259-4.3834-6.8211 c-9.7946-3.9815-18.9054-3.6078-27.8824,2.3539c-20.7944,13.8037-32.4772,28.1222-35.275,25.2616 c-3.9037-4.0024,27.4952-28.3836,32.6462-31.5118c13.0854-7.9555,21.7808-7.371,32.5623-2.7059 c3.868,1.6769,2.3391-1.6424,2.3816-8.1811c1.0567-157.6226,1.1763-148.6172-0.8249-148.5185 c-13.1768,0.6554-123.2705,2.4241-123.4191,2.4241c-36.8952,0.352-36.6628-1.6282-36.4513,4.4672 c0.7047,20.2937,0.4655,62.6432,0.4655,195.8001l0.0142-0.0068H146.2062z M273.3674,73.8448 c-2.7058,0.6412-13.2901,6.1867-25.7129-0.2817c-4.7915-2.4944-4.6294-2.2269-4.4111,9.9425 c0.0142,0.8385-0.3945,1.8606,1.1202,2.114C275.5025,90.8131,273.3674,86.7256,273.3674,73.8448z M180.2266,47.8526 c17.9547-0.0777,17.9405,27.6925-1.0777,27.5587C161.4199,75.2844,161.857,47.9303,180.2266,47.8526z M179.6563,68.6747 c10.9924-0.0068,9.604-15.0935-0.254-14.903C169.5443,53.9549,170.6225,68.6821,179.6563,68.6747z M0.6685,7.7701 C-1.2057,1.0902,4.1,2.8448,91.7373,2.6333c13.4449-0.0284,15.2907,0.4371,15.3333,5.0949 c0.8527,100.6654,3.3612,101.7721-3.77,101.8004C1.8805,109.9793,1.19,112.9743,1.3171,105.3992 c0.0142-0.9371,0.352-94.0989-0.6412-97.6359L0.6685,7.7701z M30.3412,60.8019c-3.516-12.4653-3.6713-12.6058,5.5172-13.8672 c3.5024-0.479,0.4581-1.987,2.9667-16.8906c0.7891-4.7071,4.9118-2.4876,9.0763,0.6128c2.4377,1.8113,2.4099,3.6855-0.5216,4.4395 c-5.1368,1.3175-6.236,4.5801-5.6584,9.1466c0.0703,0.5635-0.7682,2.4661,1.8884,2.4802 c12.4936,0.0913,13.1909-0.127,12.1693,5.4327c-1.4938,8.1102-2.6498,8.519,4.8057,7.6454 c20.4491-2.4025,1.3033,11.8592-29.6586,6.7927c-8.5689-1.4019-23.2604-4.7213-22.9361,4.5801 c1.106,31.7233-1.7336,32.1536,4.7071,32.0827c88.088-1.0216,88.1157,1.4445,87.9893-3.5727 c-0.86-34.3515,3.868-28.7634-8.3223-32.4347c-4.9888-1.5006-9.8581-4.2139-15.4036-2.5086 c-4.0443,1.2472-2.5931-10.8938,23.3732,0.0845c0-54.4899,1.4303-54.8283-2.3532-54.7155 c-21.7808,0.6344-22.6618,0.648-86.4394,0.8668c-4.5517,0.0142-4.6226-0.3385-3.7274,47.4863 c0.0845,4.6645,2.6282-0.6837,13.0361,1.1763c2.9944,0.5357,6.0246,0.754,9.5054,1.1769L30.3412,60.8019z M31.8844,50.8877 c-0.3946,1.3317,0.3736,2.2262,0.6412,3.2201c2.0228,7.6312,2.0154,7.7933,9.9148,7.6034c9.4844-0.233,7.8353,0.3378,8.6811-8.1669 c0.4858-4.8766-6.2995-0.4513-19.2296-2.6498L31.8844,50.8877z M29.0305,80.8762c0.8736,2.1985,1.8742-0.6769,8.6811,0.4087 c10.535,1.6837,24.5921,5.7286,37.114-0.2682c9.5479-4.5659-1.2472-2.9593-32.7029-3.516 C37.9934,77.4305,27.5016,77.0359,29.0305,80.8762z M77.7924,26.6526c0.1128,5.6583,8.4413,6.257,8.9345-0.4087 C85.7195,20.1977,77.6796,20.9943,77.7924,26.6526z M34.4213,135.7045c60.9164,1.0641,72.1628-4.749,72.2054,5.3624 c0.1479,35.7115-0.275,0.0425,1.0074,90.554c0.1831,13.0362-2.2268,10.5843-9.9141,10.6971 c-30.7936,0.4439-70.2609,0.479-71.7756,0.4507c-23.3732-0.4371-24.8603,2.5789-25.0434-5.1651 c-1.3458-55.0121,0.5425-92.3721-0.6128-96.586c-1.6843-6.1725,3.3045-5.8557,34.14-5.3199L34.4213,135.7045z M7.4612,189.3707 c3.3896-2.4525,6.3562-4.9185,10.0695-5.0949C37.3171,183.3671,46.4495,197.7627,39.1,195.55 c-3.4882-1.0499-6.9758-2.1418-10.4782-3.1633c-13.1206-3.8193-21.2734,0.352-21.1464,5.5314 c0.9513,38.537-1.5857,38.1917,4.7354,38.1073c88.1021-1.1418,88.0738,1.4587,88.0035-3.5727 c-0.148-10.6404-0.106-21.2592-0.2115-31.8996c-0.0284-3.1639,1.4161-7.3143-0.4655-9.2304 c-2.0573-2.0931-24.6907-6.011-34.9008,6.9475c-1.8465,2.3397-4.0024,0.2115-3.347-1.8742 c2.6775-8.498,18.8351-17.6723,36.3669-12.0423c3.5727,1.1486,2.2829,4.5943,2.2404-39.0585c0-3.8544-0.0703-2.0857-29.3411-1.8606 c-63.1013,0.4932-62.7703-1.4722-62.9534,3.1923c-0.5641,14.0294-0.8107,28.052-0.127,42.7299L7.4612,189.3707z M27.3536,218.9997 c4.6504,3.8896,2.5579-10.408,25.163-8.1811c8.8081,0.8668,17.9122,10.7884,19.6316,9.1466 c1.3952-1.3391-6.4968-15.3333-21.9146-16.3129C31.8918,204.1947,24.2322,216.3924,27.3536,218.9997z M32.8147,179.0447 c1.987,2.9383,7.3636-7.4765,22.9078-0.0284C57.9776,165.4728,28.1637,172.1811,32.8147,179.0447z"/></svg>`,`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 284.6681 486.6373" xml:space="preserve"><path fill="${color}" d="M262.3694,0.816h-0.0024c-21.2974-4.0859-40.0596,7.1865-55.7622,33.5039l-0.3184,0.5117 c-0.0405,0.0654-0.0742,0.1299-0.1475,0.2852c-0.1689,0.3467-0.3374,0.6924-0.5249,1.0234c-0.0581,0.1006-0.126,0.1953-0.2231,0.334 l-1.4897,2.3447l0.2305,0.0166c-14.9492,27.1035-21.9233,57.9228-28.0562,85.1904h-0.1392l-0.1777,1.3398 c-0.0854,0.6426-0.1909,1.1387-0.3447,1.6182l-0.0459,0.1562c-0.355,1.4727-1.4727,6.7666-2.0938,9.8525l-0.085-0.0049 l-0.1714,1.4316c-0.0322,0.2676-0.0767,0.5381-0.127,0.8418c-0.0254,0.1504-0.0654,0.2949-0.1128,0.4414 c-0.1299,0.4004-0.2202,0.792-0.3125,1.2285l-0.0225,0.168c-0.0596,0.8008-0.0542,1.4277,0.0142,1.9648 c-0.0093,0.4854-0.1333,0.9277-0.3354,1.29l-0.375,0.4688l-0.0728,0.3633c-1.5713,7.9512-2.811,14.9648-3.6953,20.9033 c-1.6602-8.1328-3.6602-16.2539-5.9536-24.1709l-0.2705-1.0713c-0.2588-0.8828-0.5513-1.8311-0.9097-2.752 c-0.0059-0.0996-0.0127-0.1992-0.0283-0.3164l-0.2158-1.2959l-0.2114-0.0059c-1.2153-3.8105-2.2295-6.7891-3.293-9.6621 l-0.5474-1.1445l-0.314-1.6445h-0.252c-0.8257-2.1855-1.6313-4.1875-2.5044-6.2217h0.2236l-1.1118-2.2139 c-0.4487-0.8926-0.8306-1.875-1.2002-2.8252l-0.4951-1.2734l-0.1689,0.0029c-0.0952-0.2295-0.1934-0.457-0.292-0.6836 l-0.3472-0.7812l-0.5337-1.3203c-0.021-0.0742-0.0435-0.1484-0.0918-0.2734l-0.1255-0.251c-0.166-0.2822-0.3335-0.5625-0.5366-0.835 c-0.2231-0.2949-0.3823-0.5908-0.5483-1.0283c-5.1201-10.8115-12.4385-20.3359-21.7944-28.3418l-0.2241-0.1514 c-2.0229-1.1094-4.0078-2.4062-5.9272-3.6611l-0.8188-0.5342c-1.749-1.1396-3.6255-2.2012-5.2808-3.1377l-0.1416-0.0811 c-1.1455-0.6494-2.29-1.2979-3.4604-2.0039l-0.2549-0.1182c-15.2153-5.3203-31.9902-1.958-43.7788,8.7734l-0.1382,0.127 l-0.1934,0.3066c-0.0273,0.0537-0.0527,0.1074-0.0913,0.1943c-0.3794,0.4834-0.8281,1.04-1.3081,1.5498 c-0.2363,0.252-0.4639,0.5078-0.7563,0.8574c-0.1406,0.1914-0.3193,0.376-0.5996,0.6182l-0.2471,0.2871 c-4.6201,7.0752-4.7344,15.7061-0.3066,25.7168l0.1899,0.2969c0.2002,0.2412,0.3193,0.4697,0.3896,0.7529 c0.0239,0.085,0.0527,0.1689,0.1079,0.3105l0.0791,0.1836c0.4062,0.7861,0.8848,1.502,1.356,2.207 c0.3813,0.5684,0.7412,1.1055,1.0771,1.709c0.1343,0.2246,0.2354,0.4736,0.3096,0.7627l0.6021,1.1377 c2.0522,3.2334,4.3765,6.4453,7.1367,9.8555l0.1689,0.1699c0.064,0.0547,0.1304,0.1045,0.1597,0.1162 c1.4482,1.4238,2.7104,3.126,3.9355,4.7774l0.2886,0.3887l-0.019,0.0156l0.5195,0.6572l0.0239-0.0166 c0.918,1.0195,1.8398,2.04,2.812,3.0684l-0.04,0.0527l0.3892,0.2832l0.252,0.2324l0.0278-0.0293l0.1436,0.1045 c0.958,0.6729,1.8633,1.3086,2.6406,2.0498c0.7358,0.7002,1.3706,1.5312,2.0454,2.4141l0.4287,0.5576l0.6855,0.7441 c0.4355,0.4717,0.8789,0.9346,1.3315,1.3945c0.8589,0.8721,1.7402,1.7236,2.7178,2.668c0.145,0.1406,0.2749,0.2998,0.4346,0.5361 l0.2075,0.2393c12.0605,11.1328,24.6826,20.8711,33.9678,28.0352c3.9751,3.0684,7.1152,5.4912,9.1587,7.2227 c2.7207,2.3105,7.835,7.0859,14.0698,13.1338l0.2251,0.1768c0.2412,0.1729,0.4829,0.3467,0.7109,0.5312 c0.2085,0.1699,0.3994,0.3555,0.6069,0.5576c0.1279,0.124,0.2554,0.2461,0.3848,0.3662c0.5229,0.4834,0.9629,1.0195,1.3813,1.5518 l0.1172,0.1289c4.7588,4.6328,12.1436,11.9766,13.7632,13.6094c1.7427,13.6963,5.5586,27.0381,11.3442,39.6572 c0.0874,0.3594,0.2803,0.6787,0.561,0.9287c0.4917,0.4365,1.0854,0.5605,1.8906,0.5605c0.0127,0,0.0264,0,0.0396,0 c1.1523,14.418,2.0122,25.1572,2.6519,33.0898c-6.5142-20.2285-16.9761-38.0664-28.9624-58.5029l-3.3091-5.6465 c-5.7017-9.0557-12.8638-17.2158-21.3208-24.2803c-0.582-0.4053-1.1582-0.8203-1.729-1.25 c-1.0264-0.7715-1.9834-1.6035-2.8452-2.4736l-0.4111-0.4541c-22.0991-17.4717-48.3569-28.6289-70.334-29.8486l-0.1831,0.0137 c-1.897,0.2227-3.8628,0.3184-5.7642,0.4111l0.0244,0.4985h-0.0002l-0.1653-0.4916c-1.5972,0.0771-3.2485,0.1572-4.8716,0.3086 l-0.6357-0.0557l-0.3535,0.1484c-0.4312,0.1807-0.7769,0.2656-1.0859,0.2676c-0.4971,0.0029-0.981,0.0459-1.5186,0.0977 l-0.2754,0.0283c-1.5347,0.2578-3.0225,0.6299-4.4629,0.9902l-0.1187,0.0293c-1.0806,0.2715-2.2251,0.4951-3.5469,0.6924 l-0.2549,0.0654c-8.1201,2.8779-15.21,7.8555-20.541,14.4492l-0.248,0.4131c-0.0342,0.0635-0.0674,0.127-0.1123,0.1885 c-0.4741,0.6504-0.9912,1.2744-1.5493,1.8691l-1.5039,1.7256l0.2944,0.1025c-12.9272,19.2285-10.9209,37.5723,5.6904,51.7168 c7.6104,6.1025,16.0889,11.0762,25.1675,14.7686l0.3237,0.1602c0.4521,0.2217,0.8926,0.4648,1.3892,0.7666l0.2437,0.1152 c1.6758,0.6123,3.0522,1.166,4.3555,1.8936l0.1719,0.0801c10.8057,4.1758,21.6582,7.3682,31.2642,10.1943 c3.9751,1.1699,7.73,2.2744,10.957,3.3047c7.8315,2.46,15.6548,5.5557,23.2446,8.5586c3.8936,1.541,7.9199,3.1338,11.9355,4.6348 c4.6758,1.6748,8.459,2.8145,11.8027,3.8223c8.5537,2.5791,14.2212,4.2881,24.4683,11.9092 c0.9575,6.9561,1.1143,7.915,2.1699,14.0518l0.1147,0.3877c0.373,1.3936,0.6323,2.8623,0.8882,4.3174 c0.2422,1.377,0.4922,2.8008,0.8501,4.2129c0.1538,0.6055,0.3535,1.1738,0.5684,1.7842c0.1538,0.4395,0.3081,0.876,0.4292,1.3262 c0.2842,1.0498,0.3955,2.0459,0.3218,2.8799l-0.0176,0.2021l0.0366,0.1982c0.5425,2.9844,1.5308,8.3877,2.2324,12.0449 c-21.9561,2.1416-33.4907,5.4121-35.2612,10.001c-1.9351,5.1865,3.8433,39.3984,9.0312,67.1846 c4.6406,24.8525,11.9321,60.5371,13.583,62.9375l0.1621,0.1895c2.916,2.8584,6.5757,4.7646,10.5391,5.502 c7.5562,2.1289,22.9814,4.2842,37.8433,4.2842c12.5356-0.001,34.0938-1.6289,37.6348-12.5254 c2.8037-8.7471,10.8965-87.3662,12.5234-117.6641c0.9727-0.374,1.9072-0.8379,2.7783-1.3789 c8.728-5.2598,20.2183-16.6309,25.3931-40.9297c5.8101-27.2861,0.6714-59.1133-12.5098-77.416 c-10.0737-12.8154-25.3403-21.0557-41.8555-22.6055c-1.3481-0.209-2.7144-0.3096-4.0698-0.2783 c24.9888-39.6719,55.8179-88.9268,61.3979-144.5059C285.8875,52.4898,283.8123,4.9644,262.3694,0.816z M225.866,220.1129 c14.8491,1.6738,28.5078,9.2305,37.4619,20.7139c11.9644,16.7607,16.6538,47.4199,11.1499,72.9014 c-2.5981,12.0264-8.5811,28.0947-22.3291,36.3496c-2.3276,1.4131-4.8218,1.7334-7.4102,0.9521 c-4.7734-1.4443-9.7134-6.5898-12.5845-13.1064c-3.8037-8.791-6.144-18.9316-8.6226-29.6719 c-4.9478-21.4443-10.0645-43.6191-27.6475-56.4336c-2.7422-2.0889-5.8828-3.751-9.2007-4.8809 c24.3389-11.4258,49.4224-2.4336,62.481,22.4404c3.9365,7.3555,6.1494,15.2607,6.5771,23.4688c0,1.2119,1.0137,2.1982,2.2593,2.1982 c0.5962,0,1.1602-0.2246,1.5879-0.6318c0.4326-0.4121,0.6709-0.957,0.6699-1.5166c0.5034-15.5234-5.4858-30.8379-16.4321-42.0156 c-9.0898-9.2822-20.6997-14.5547-32.7021-14.8467h-0.1709c-7.1416,0-14.3105,1.4678-20.8809,4.2598 c7.0581-7.6445,21.5654-21.3086,34.4004-20.5459v0.207L225.866,220.1129z M233.9304,472.525l-0.042,0.3086 c-1.125,2.9375-6.3774,5.2764-14.8047,6.5879c-21.3223,3.3213-55.6729-0.7637-59.5098-5.7383 c-1.0054-2.791-7.3857-31.0811-13.5054-61.3828c-8.8267-43.6992-11.0845-61.5713-10.2544-63.7246 c2.187-5.666,53.4292-10.0449,91.248-6.2373c3.5083,6.9102,10.5781,14.9512,19.314,15.5771 C244.9646,379.0592,236.9924,463.1285,233.9304,472.525z M102.3298,217.4439h-0.0005c-6.8979-4.0312-30.625-17.1582-46.5615-16.5977 l-0.2793,0.042c-0.5957,0.1455-1.0972,0.5088-1.4131,1.0225c-0.3188,0.5176-0.4087,1.125-0.2534,1.71 c0.2114,0.7939,0.8491,1.4121,1.7246,1.623l0.3262,0.0361c12.9854,0,38.7998,12.7285,62.7759,30.9531 c16.5269,12.5625,45.979,38.2617,62.3286,72.2402c-9.6699-12.2109-25.5981-25.4355-40.311-29.5674 c-9.5742-2.7168-19.1035-6.5293-28.3193-10.2158c-7.1191-2.8477-14.4805-5.792-21.8311-8.2207 c-3.6948-1.2041-7.7163-2.4258-11.9731-3.7188l-0.2656-0.0811c-19.9116-6.0459-44.6919-13.5703-59.6201-26.334 c-13.8481-11.8184-15.5244-25.5859-5.123-42.0928c8.333-13.4004,21.2446-20.1953,38.3755-20.1953l0.5605,0.0029 c34.9268,0.2988,79.4175,29.6709,94.3843,54.7383c1.5762,2.6689,3.1934,5.3721,4.8301,8.1094l0.0996,0.167 c6.4668,10.8105,13.1538,21.9902,18.8999,33.5322c5.9658,11.6016,10.3086,23.8643,12.9336,36.5068 C165.5242,264.0377,130.0818,233.7291,102.3298,217.4439z M209.2585,323.231l0.0054,0.001l1.2798-14.2178 c0.7119-7.8906,1.3809-15.6611,1.8213-20.9082c2.0254,6.8877,3.7422,13.9121,5.1123,20.916l3.1069,13.5361 c1.022,4.5479,2.3091,9.0967,3.8286,13.5352c-5.2578-0.3955-10.7549-0.6494-16.3613-0.7539 C208.5681,330.9771,208.9641,326.6471,209.2585,323.231z M193.384,329.5787c-0.0127-1.2734-0.1055-2.5234-0.1963-3.75 l-0.0083-0.1123c-0.062-0.8496-0.125-1.7061-0.1611-2.6104l-0.8213-14.0059c-0.2607-4.4795-2.874-38.29-4.3608-56.9072 c7.9888,3.9785,15.2314,12.207,19.98,22.7354l-0.4795,3.7939c-1.5879,12.54-1.5884,12.543-3.0957,29.6396l-1.1714,14.3926 c-0.4116,4.7021-0.7632,9.0176-1.0273,12.2676l-0.041,0.5088c-2.7734-0.0752-5.6011-0.0859-8.2891-0.0879 c-0.04-0.8613-0.106-1.7285-0.1704-2.5791c-0.0532-0.7012-0.1055-1.3926-0.1411-2.0566 C193.5168,330.4059,193.511,329.9762,193.384,329.5787z M176.0813,310.4576c1.2656,1.4277,2.3237,3.042,3.5229,5.0254 c0.2983,0.4951,0.5928,0.9951,0.9238,1.5576c0.9409,1.6045,1.9141,3.2637,3.1318,4.8711c0.5464,0.6436,1.1489,1.3916,1.3926,2.1279 l2.7563,4.6943c0.208,2.332,0.3906,4.5889,0.5669,6.8105c-5.1152,0.0713-10.2954,0.4648-14.8179,0.8418l-2.561-13.2734 l-2.4194-13.918l-0.0225-0.1064c-0.8916-3.5791-1.0259-4.1865-1.8179-8.4268c2.5508,2.29,4.9927,4.7227,7.2827,7.2539h-0.1899 L176.0813,310.4576z M229.9905,81.5836c2.8389-7.6787,5.2905-14.3105,7.3271-20.0732c0.5859-1.0117,0.2886-2.2744-0.6909-2.9375 c-0.5063-0.3447-1.1162-0.4736-1.7139-0.3701c-0.6055,0.1035-1.1333,0.4287-1.4863,0.916 c-0.1797,0.2471-0.3086,0.5352-0.3496,0.7549c-1.8955,4.8076-4.0781,10.0469-6.6411,16.1992 c-9.4229,22.6172-22.3281,53.5918-33.3096,93.957c-6.6206,23.0322-10.8242,46.791-12.5024,70.6533 c-8.4067-22.7783-10.8516-47.373-7.0674-71.2842l0.0005-0.001c3.5581-22.8467,9.4946-46.957,13.833-64.5772l0.939-3.8154 c4.7163-21.0645,12.2939-41.5371,22.5234-60.8486l0.0796-0.1514l0.1245-0.6328c0.1123-0.3545,0.29-0.7217,0.5068-1.1699 c0.0186-0.0381,0.0405-0.0742,0.0596-0.1035l0.0498-0.0723c0.2451-0.3223,0.5024-0.6406,0.7612-0.9512 c0.0347-0.041,0.0703-0.0801,0.0747-0.085l0.1455-0.1162l0.2104-0.2861c12.2134-19.999,26.0977-30.1387,41.2676-30.1387 c2.2788,0,4.6157,0.2305,6.9492,0.6855c5.7461,1.0791,10.2622,7.8096,13.4214,20c15.3755,60.9775-20.7021,126.6436-59.0137,188.6865 c-11.7705,3.7354-22.5576,14.0908-29.8569,22.6172c5.8213-52.6191,28.9497-115.1777,44.3091-156.7217L229.9905,81.5836z  M155.4963,161.8834c-10.1792-18.7061-22.8662-36.0635-37.7056-51.585c-3.6191-3.8584-7.7866-7.2188-12.4077-9.999 c-1.0918-0.5879-2.4785-0.2021-3.0894,0.8574c-0.6016,1.043-0.251,2.3496,0.7661,2.9541c3.9595,2.7852,7.519,6.0801,10.5889,9.8047 c13.6968,15.7617,25.8193,32.918,36.0371,51c6.9751,11.7441,12.6963,24.2275,17.0063,37.1074 c-7.731-8.0312-21.0225-21.6006-26.4644-26.3389c-2.1592-1.8828-5.3882-4.4639-9.4761-7.7314l-0.1494-0.1191 c-16.8774-13.4844-45.126-36.0537-57.9082-56.6318c-8.7676-14.1504-8.5078-24.5273,0.7837-31.7148 c6.5249-4.7676,14.4507-7.2354,22.4258-7.2354c4.7046,0,9.4272,0.8594,13.8867,2.6133 c34.7837,14.8486,50.1948,74.9492,56.3208,109.8359C163.4856,177.6227,159.9226,169.9615,155.4963,161.8834z"/></svg>`,`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 444.3163 400.3593" xml:space="preserve"><path fill="${color}" d="M391.0627,187.4592c-1.0227,2.9701-2.0489,5.939-3.0672,8.9106c-1.6854,4.9183-4.0609,9.3926-7.7684,13.1529 c-2.7006,2.7391-5.1291,5.7454-7.7036,8.6104c-11.1609,12.4201-27.9966,17.7796-42.9763,24.0042 c-10.1536,4.2192-20.359,8.3139-30.6131,12.2827c-5.002,1.936-35.5161,12.33-39.2,13.4797 c-3.1924,0.9962-6.3959,1.9668-9.5464,3.0844c-2.0008,0.7097-3.8651,1.7282-5.4604,3.2018 c-0.8971,0.8286-1.3944,1.7559-1.5864,2.969c-1.1367,7.1837-2.3263,14.3591-3.502,21.5366 c-2.4033,14.6726-4.8945,29.3316-7.1875,44.0214c-1.9256,12.3362-3.6125,24.7096-5.4251,37.0636 c-0.4393,2.9944-0.9101,5.9859-1.4518,8.9632c-0.568,3.1221-1.9425,5.8545-4.262,8.0656c-1.7701,1.6873-3.8231,2.8289-6.2744,3.1684 c-3.1417,0.435-6.2808,0.5903-9.4261-0.0077c-3.7581-0.7144-6.6468-2.7037-8.6751-5.9175 c-2.0124-3.1885-3.0156-6.6871-2.8378-10.465c0.5421-11.5177,0.9808-23.0428,1.7337-34.5471 c0.5506-8.4142,1.5324-16.8001,2.3242-25.1985c0.8825-9.3596,1.7936-18.7167,2.6403-28.0796 c0.429-4.7432,0.7481-9.4965,1.1042-14.2462c0.0511-0.6814,0.0307-1.3681,0.0464-2.2146c-2.1857,0.0783-4.1642,0.1881-6.1436,0.213 c-6.8888,0.0866-53.4625-7.0025-69.3392-11.771c-15.7439-4.7286-31.5932-9.3642-46.6752-15.9752 c-9.7458-4.2719-18.7892-9.9512-27.5527-15.9561c-3.0814-2.1114-6.2234-4.1347-9.346-6.1855 c-0.5268-0.346-1.0967-0.6263-1.9034-1.0819c-0.3183,1.8851-0.5895,3.5665-0.8874,5.2433 c-1.7788,10.01-3.6361,20.0067-5.327,30.0314c-1.8413,10.9169-3.5252,21.8603-5.2895,32.7902 c-0.3181,1.9704-0.6388,3.9432-1.0538,5.8946c-0.7239,3.4035-2.4154,6.2197-5.2962,8.2496 c-2.7739,1.9545-5.8335,2.6425-9.1696,1.9756c-1.6386-0.3276-3.297-0.6124-4.8866-1.1083c-0.9516-0.2969-1.9855-0.7827-2.641-1.497 c-2.7678-3.016-4.9937-6.3726-5.987-10.4393c-0.5808-2.3778-0.3805-4.7385-0.0601-7.1019 c1.6864-12.4389,3.325-24.8849,5.1131-37.3092c2.5587-17.7785,5.1189-35.5582,7.9041-53.302 c1.4169-9.027,3.3867-17.9659,4.9938-26.9648c1.1882-6.6533,2.1573-13.3454,3.2889-20.0093 c2.8478-16.7713,6.5222-33.3457,11.5405-49.6205c3.2531-10.5502,10.0937-17.5709,20.1897-21.6667 c4.6847-1.9005,9.6122-2.8808,14.5164-3.9548c9.3771-2.0535,18.8352-3.6369,28.3396-4.9814 c12.8984-1.8246,25.8597-2.8672,38.8652-3.4849c7.0539-0.335,14.0042,0.5099,20.9452,1.5623 c13.1684,1.9966,26.3348,4.0065,39.5019,6.0114c4.6109,0.7021,7.4054-0.8285,9.5567-5.0399 c3.1492-6.1647,5.3954-12.6776,7.4745-19.247c2.2134-6.9938,4.3412-14.0172,6.3552-21.0708 c1.8506-6.4811,4.3832-12.6604,7.764-18.4751c5.5372-9.5236,13.916-14.4024,24.8826-14.7957 c11.1454-0.3997,22.2925-0.2993,33.4208,0.4508c9.6999,0.6538,19.3896,1.461,29.0816,2.2293 c7.8923,0.6256,15.7748,1.3894,23.6731,1.9214c12.2875,0.8276,24.5856,0.879,36.8831,0.1093 c4.4998-0.2816,9.0013-0.5645,13.5063-0.7278c2.4985-0.0905,5.0527-0.2295,7.5012,0.1602 c10.3702,1.6502,17.5562,7.6324,21.9318,17.0009c3.4907,7.4738,3.6867,15.3209,1.8578,23.2596 c-4.7835,20.7621-9.6092,41.5146-14.3919,62.2769c-1.1267,4.8914-2.1096,9.816-3.2488,14.7043 c-0.3002,1.2882-0.1236,2.2507,0.5695,3.4159c1.4327,2.4085,2.7226,4.902,3.0575,7.8073c0.1891,1.6394,0.9181,3.2099,1.3201,4.8323 c4.6597,18.8059,9.3557,37.6031,13.933,56.4291c2.9661,12.1993,5.8127,24.4285,8.6045,36.6691 c3.4641,15.1891,6.7957,30.4084,10.2265,45.6051c1.3611,6.0292,2.8397,12.0319,4.2512,18.0498 c0.1758,0.7497,0.2887,1.5159,0.3973,2.2793c1.239,8.7187-7.3089,13.5633-13.986,11.6014 c-5.2326-1.5375-9.0154-4.7038-10.9925-9.7622c-1.1667-2.9851-2.0439-6.1042-2.806-9.223 c-3.3773-13.8211-6.6414-27.6698-9.9944-41.4969c-2.5925-10.6911-5.2718-21.3611-7.8829-32.0477 c-2.1383-8.7515-4.2315-17.514-6.3503-26.2703c-0.1622-0.6701-0.3692-1.3293-0.5554-1.9935 C391.4396,187.494,391.2512,187.4766,391.0627,187.4592z M380.587,108.6527c0.207-0.674,0.382-1.1497,0.4991-1.6393 c1.4974-6.2601,3.0537-12.5071,4.4634-18.787c2.7913-12.4347,5.5052-24.8868,8.242-37.3338 c2.5292-11.5026,5.053-23.0064,7.5652-34.5128c0.7-3.2063-0.1497-4.3848-3.373-4.4967c-3.4081-0.1184-6.8236-0.2036-10.2311-0.1156 c-9.2093,0.2378-18.4143,0.6519-27.6242,0.8458c-5.9212,0.1247-11.8651,0.2612-17.7685-0.1016 c-9.374-0.5761-18.7151-1.667-28.0838-2.3521c-10.3991-0.7604-20.8098-1.3835-31.2228-1.925 c-6.7504-0.351-13.5138-0.4557-20.2718-0.6574c-3.6693-0.1096-7.3395-0.275-11.0091-0.2682 c-7.5301,0.0139-13.4539,3.1438-17.4928,9.5335c-1.2296,1.9453-2.2446,4.0666-3.0741,6.2168 c-2.3862,6.1846-4.629,12.4245-6.9251,18.6438c-1.7639,4.7777-3.358,9.6-4.078,14.6713c-0.5703,4.017-6.1953,31.644-6.6949,33.9036 c-2.2233,10.0566-8.1513,35.0501-8.4532,36.6096c-0.5868,3.0316,1.097,4.9306,4.1961,5.0145 c1.4622,0.0396,2.9251,0.3097,4.3726,0.5621c1.5149,0.2641,3.0111,0.6346,4.5166,0.9535c0.6251,0.1324,1.2628,0.2154,1.8777,0.3833 c2.2963,0.6268,4.5752,1.3196,6.8801,1.9119c2.7664,0.7109,6.0377-4.5229,6.6438-4.9419c2.2251-1.5381,4.421-3.1184,6.6481-4.6534 c3.5646-2.4567,7.2979-4.602,11.4093-6.0258c12.5535-4.3475,25.5102-6.6168,38.7177-7.7729 c8.8521-0.7748,17.7325-0.9824,26.5929-1.5907c11.419-0.784,22.9012-0.6365,34.3549-0.9374 C353.8335,109.7235,375.56,108.8614,380.587,108.6527z M224.3707,143.3397c-1.5784-0.3899-3.1484-0.5779-4.5538-1.1622 c-4.2465-1.7655-8.7284-2.6824-13.1405-3.8448c-2.688-0.7081-5.4337-1.1043-8.2222-0.5553 c-2.2727,0.4474-4.5363,0.9446-6.8158,1.3537c-2.658,0.477-5.3605,0.744-7.9879,1.3457 c-6.5229,1.4938-13.0034,3.1715-19.5204,4.6919c-9.1476,2.1341-18.3035,4.2348-27.4733,6.271 c-8.7346,1.9395-17.5149,3.6402-26.3784,4.9114c-5.9889,0.8589-11.9451,1.9431-17.9274,2.8515 c-5.5332,0.8402-11.0607,1.8145-16.6281,2.3095c-8.034,0.7144-16.094,0.1947-24.131-0.2765 c-3.6799-0.2157-6.9906,0.6129-10.1339,2.4915c-3.3047,1.9751-5.2541,4.7081-5.8784,8.58 c-1.3627,8.4512,2.1389,14.9799,9.1186,19.6062c13.4937,8.944,28.4346,13.3895,43.4407,19.3196 c15.1472,5.9859,30.2084,12.1761,45.3462,18.1781c3.1744,1.2586,6.365,2.477,9.579,3.6311 c19.9917,7.1788,39.8924,9.7133,60.8749,10.2487c2.3622,0.0603,3.1399-0.6817,3.1993-3.105 c0.2441-9.9484,2.1545-19.7018,3.4872-29.516c1.264-9.3081,2.9431-18.5603,4.4671-27.8326 C217.2854,169.496,219.938,156.2615,224.3707,143.3397z M282.6545,120.8288c-6.7563,0.8887-13.4731,2.1729-20.1459,3.5753 c-6.5898,1.385-12.9074,3.6562-18.4395,7.628c-6.5838,4.7269-11.7684,10.6021-14.2062,18.5193 c-1.4203,4.6125-2.8088,9.2394-4.03,13.9073c-1.584,6.0543-2.2595,12.271-3.1342,18.459 c-1.0355,7.3253-2.3803,14.6127-3.7863,21.8788c-2.7066,13.9883-4.39,28.099-5.59,42.2869 c-0.656,7.7559-1.6522,15.4833-2.5192,23.2208c-0.681,6.078-1.5016,12.1423-2.0671,18.2306 c-0.4283,4.6112-0.3683,9.2698-0.8496,13.8735c-1.0033,9.5966-2.2539,19.1672-3.3376,28.7558 c-0.593,5.2462-1.1305,10.5013-1.5525,15.7637c-0.489,6.0977-0.8825,12.2048-1.2089,18.3136 c-0.3368,6.3021-0.582,12.6099-0.7873,18.9178c-0.0809,2.485,0.7165,4.7111,2.6852,6.3624 c0.7844,0.6579,1.6809,1.1802,2.5029,1.7957c1.7953,1.3441,3.8161,1.6542,5.8615,0.9324c1.4928-0.5267,2.9414-1.3068,4.2434-2.2128 c1.5857-1.1035,2.454-2.7302,2.7254-4.7063c0.7005-5.1012,1.509-10.1874,2.2222-15.2869 c1.3913-9.9466,2.6499-19.9129,4.1473-29.8433c1.2567-8.3347,2.7693-16.6309,4.1784-24.9424 c1.3448-7.9324,2.6526-15.8716,4.0717-23.7908c0.9307-5.1932,2.084-10.3464,3.0229-15.5383 c0.2947-1.6296,0.5199-10.4201,0.6202-11.4443c0.8211-8.3911,1.6318-16.7832,2.4339-25.1761 c0.8878-9.2901,1.7476-18.5828,2.6478-27.8717c1.1178-11.5352,2.2044-23.074,3.4228-34.5987 c0.663-6.272,1.3904-12.548,2.4185-18.7677c1.0598-6.4115,4.2303-11.6563,10.1422-14.7438 c7.1286-3.7229,14.6175-6.3994,22.7693-6.7733c2.3812-0.1092,4.7815-0.1185,7.1356-0.4439 c10.5881-1.4636,21.1675-2.9918,31.7409-4.5586c12.4182-1.8401,24.7622-4.1756,37.2495-5.5572 c4.6099-0.51,9.2135-1.0181,13.8665-0.907c4.2422,0.1012,7.6585,1.5632,9.6855,5.5153c1.0282,2.0047,2.1177,3.9798,3.0861,6.0128 c1.9096,4.009,3.8692,7.9954,5.0063,12.3284c0.9315,3.549,2.0694,7.0438,3.002,10.5925 c2.7159,10.3344,5.4482,20.6655,8.0297,31.0338c1.6943,6.8049,3.0314,13.6987,4.725,20.5038 c1.693,6.8028,3.791,13.5061,5.427,20.3214c3.1989,13.3263,6.1462,26.7129,9.304,40.0494c1.6758,7.0778,3.528,14.1152,5.3905,21.147 c1.0699,4.0396,3.3804,6.78,7.8404,7.468c3.843,0.5929,6.3586-1.6301,5.7901-5.4865c-0.1498-1.0163-0.2375-2.0415-0.3683-3.0608 c-0.3195-2.4906-0.4485-5.0258-1.0078-7.4619c-1.9443-8.4693-4.2067-16.8571-6.955-25.1075 c-0.4657-1.3981-0.9234-2.8045-1.2713-4.2347c-0.2928-1.2034-7.3624-27.4759-9.533-36.8849 c-1.4313-6.2047-9.9516-39.8998-12.4426-50.6208c-1.2676-5.4552-6.4012-29.9405-7.5332-35.2233 c-0.7067-3.2976-1.5653-6.5129-3.2318-9.4499c-0.5575-0.9825-1.2591-2.0005-2.1502-2.654c-2.488-1.8244-5.1035-3.4756-7.6853-5.17 c-0.3658-0.2401-0.8123-0.4387-1.2408-0.488c-2.2947-0.264-4.594-0.493-6.895-0.6966c-1.3465-0.1192-2.7016-0.2645-4.0487-0.231 c-4.047,0.1008-8.1009,0.1658-12.135,0.4705c-3.4619,0.2616-6.8929,0.9086-10.351,1.2488 c-3.8443,0.3782-7.7003,0.6657-11.5574,0.8784c-5.9129,0.326-11.8307,0.5671-17.7475,0.8192 C318.5183,117.8646,289.6049,119.9146,282.6545,120.8288z M52.4754,154.0857c0.7336,0.1357,1.1615,0.2625,1.5952,0.2876 c3.4704,0.2012,6.9401,0.4374,10.4136,0.5554c3.2079,0.1089,6.4109,0.4243,9.628-0.1773c5.251-0.9818,10.5364-1.7781,15.7962-2.7146 c8.4883-1.5112,16.9652-3.0862,25.4516-4.6083c6.0161-1.0791,12.036-2.1372,18.0613-3.1633 c4.4394-0.756,8.9152-1.3183,13.3309-2.1895c10.1817-2.0088,20.0062-5.3449,29.9431-8.2616 c1.7728-0.5203,2.6411-1.7038,2.9238-3.4474c0.2885-1.7794,0.5334-3.5695,0.9137-5.3297c1.3181-6.101,2.6822-12.1921,4.0383-18.2848 c0.6685-3.0036,0.5471-3.2459-2.2626-4.2543c-2.2411-0.8044-4.5031-1.5558-6.7182-2.4263 c-12.6483-4.9703-25.8043-6.3838-39.2603-5.566c-12.0876,0.7346-24.1126,1.9652-35.9881,4.4906 c-11.1493,2.3709-22.1503,5.2856-33.0336,8.6442c-3.625,1.1187-6.4319,3.4397-8.3712,6.7649 c-1.2898,2.2116-1.9946,4.6002-2.3164,7.112C55.2388,132.301,53.8738,143.0868,52.4754,154.0857z M365.8219,173.6088 c-0.2517-0.1332-0.4064-0.2634-0.5807-0.3004c-7.7352-1.6437-15.476-3.2608-23.2074-4.9218 c-5.532-1.1885-11.0307-2.5109-16.669-3.1774c-7.2179-0.8532-14.4393-1.7078-21.4647-3.733 c-3.1475-0.9073-6.3713-1.5486-9.5573-2.3239c-5.806-1.4128-11.5993-2.8794-17.4178-4.2384 c-3.9395-0.9202-7.9084-1.7173-11.8747-2.5178c-0.9402-0.1898-1.9263-0.1399-2.8838-0.2597 c-0.892-0.1116-1.6041,0.1438-2.3088,0.7044c-3.1878,2.5361-5.0258,5.8081-5.4227,9.8554 c-0.4831,4.9268-0.8821,9.8619-1.3701,14.7882c-0.8056,8.1319-1.6207,16.2631-2.4951,24.3878 c-0.5778,5.368-2.4481,22.7358-2.7937,24.2802c-0.4888,2.1847,2.0849,1.3021,4.2853,0.7777 c0.2496-0.0594,0.4913-0.155,0.7333-0.2432c12.6743-4.6198,25.959-7.1497,38.6812-11.7919 c23.0362-8.4057,43.5402-20.5946,65.3251-31.5532C361.0275,181.2162,363.5578,177.5876,365.8219,173.6088z M198.4937,85.4005 c-2.598-0.1781-28.2586-3.7307-30.7178-4.1119c-6.8657-1.0641-13.7514-2.0485-20.6601-2.7686 c-4.4613-0.465-8.9935-0.742-13.4647-0.5184c-9.3234,0.4661-18.6307,1.278-27.938,2.03 c-5.7714,0.4663-11.5335,1.0767-17.1949,2.3592c-7.0289,1.5923-14.0532,3.2056-21.0711,4.846 c-4.5183,1.0562-8.9618,2.3726-13.2232,4.2304c-6.3801,2.7814-11.0694,7.2017-13.3516,13.9267 c-0.2685,0.7913-0.6026,1.5618-0.9323,2.3308c-2.929,6.8334-5.071,13.8853-6.318,21.2339 c-1.8197,10.7235-3.6712,21.4456-5.7685,32.1173c-3.824,19.4581-7.2116,38.9876-10.0102,58.6173 c-2.8804,20.204-5.6986,40.4171-8.4774,60.6353c-0.7891,5.7415-1.3287,11.514-1.2349,17.3287 c0.0361,2.2399,1.0186,3.9626,2.6624,5.3465c1.8735,1.5773,4.0559,2.1302,6.4925,1.8278c3.0493-0.3784,4.4634-1.678,4.9653-4.7049 c0.5466-3.2966,0.733-6.654,1.7846-9.8665c0.2754-0.8414,0.3861-1.7848,0.3498-2.6722c-0.1945-4.7549,0.8864-9.3405,1.747-13.9573 c1.5095-8.0974,3.1049-16.18,4.5055-24.2962c1.2362-7.1633,1.882-14.4217,3.5456-21.523c0.3051-1.3024,0.0563-2.8463-0.3214-4.1689 c-0.4723-1.6538-1.2487-3.2435-2.0582-4.774c-2.2858-4.3214-4.6533-8.5997-6.9953-12.8913 c-0.3082-0.5647-0.5955-1.1567-0.9973-1.6509c-0.703-0.8649-0.8406-1.8209-0.7928-2.8922 c0.1982-4.4455,1.6603-8.4464,4.2318-12.0402c1.3718-1.9171,1.6715-3.8917,1.1515-6.2092c-0.4883-2.176-0.7876-4.4576-0.7286-6.681 c0.1472-5.5444,2.4098-10.3307,5.763-14.6724c1.8155-2.3507,4.0086-4.1346,6.7608-5.2839c1.2965-0.5414,2.4988-1.3089,3.7428-1.9756 c1.4433-0.7734,2.0196-1.8988,1.9755-3.6077c-0.0763-2.9559-0.0784-5.9422,0.2546-8.8741c0.646-5.6885,1.4601-11.362,2.3721-17.0147 c0.5732-3.553,1.3279-7.0887,2.2258-10.5743c0.963-3.7388,3.0756-6.7929,6.336-8.9463c2.0413-1.3482,4.1118-2.6585,6.2247-3.8906 c3.4152-1.9916,7.0528-3.4001,10.9485-4.202c7.3743-1.5179,14.7358-3.1018,22.0842-4.7412 c10.5-2.3424,21.0139-4.5341,31.7808-5.3194c10.7725-0.7857,21.5266-0.6275,32.19,0.9788c5.9631,0.8982,11.8235,2.5184,17.6995,3.94 c4.2519,1.0287,8.4688,2.2129,12.671,3.4321c2.2149,0.6426,2.6382,1.4852,2.2925,3.7392c-0.039,0.2543-0.1112,0.5032-0.161,0.7561 c-1.3415,6.8214-2.7062,13.6383-4.0108,20.4667c-0.5191,2.7169-0.976,5.4502-1.3261,8.1934 c-0.2321,1.8186,0.5104,2.3939,2.2663,1.9724c1.69-0.4057,3.3697-0.8546,5.0558-1.2766c1.6283-0.4076,2.6529-1.3014,3.0961-3.0364 c1.6414-6.4249,3.5329-12.7883,5.0684-19.2372c2.0273-8.5143,3.8092-17.087,5.6909-25.6359 c0.0895-0.4067,0.1243-0.8254,0.1977-1.328C206.3865,80.6419,205.3311,85.8693,198.4937,85.4005z M34.0937,192.8526 c-4.4856,3.1796-5.7044,7.7025-2.859,12.505c2.06,3.4768,4.5173,6.7277,6.9281,9.9825c1.0234,1.3817,2.2456,2.6966,3.6162,3.7231 c2.4819,1.8586,4.8704,3.795,7.0541,5.999c0.9024,0.9108,1.8931,1.7687,2.9595,2.4757c3.2178,2.1333,6.4313,4.2848,9.7581,6.2393 c14.1223,8.2968,29.2219,14.8502,44.6705,20.2427c12.7507,4.4508,25.6603,8.5409,38.8568,11.4596 c8.1407,1.8005,16.4207,2.8393,24.6848,3.8827c7.7402,0.9772,15.8017,3.112,23.595,3.1598c2.1898,0.0135,4.38,0.0374,6.5696,0.0196 c2.6473-0.0216,3.7716-1.0084,4.1551-3.5801c0.0475-0.3186,0.0915-0.6378,0.1302-0.9576c0.627-5.1782,1.2552-10.3563,1.8779-15.5349 c0.2697-2.2431-0.3496-3.0081-2.5938-2.9903c-2.5119,0.02-5.0228,0.1567-7.5344,0.2318 c-6.9528,0.2079-13.8948-1.5927-20.8353-2.4714c-10.5848-1.3401-21.3545-2.7012-31.3004-6.7034 c-20.1908-8.1247-40.5027-14.0012-60.1646-23.3615c-6.6178-3.1505-13.1802-6.4186-19.8213-9.5185 c-4.8926-2.2837-9.8291-4.4873-14.8315-6.516c-2.8222-1.1445-5.6053-2.2561-7.9278-4.2844 c-0.2373-0.2073-0.5521-0.3259-0.8312-0.4853C38.2655,195.236,36.2807,194.1021,34.0937,192.8526z M245.3446,262.3852 c2.1746-0.35,4.0362-0.5314,5.8378-0.963c26.1445-6.2631,92.7638-34.6618,96.4785-36.425 c7.5025-3.5614,16.0795-10.1506,21.758-16.4165c1.5939-1.5849,3.1011-3.2578,4.6268-4.9101 c0.9124-0.9881,1.9754-1.8999,2.6462-3.0373c2.4518-4.1568,4.6349-8.4391,4.6607-13.2607 c-0.6456-0.7559-1.1634-1.3948-1.7183-1.9995c-0.3378-0.3682-0.7158-0.7051-1.1057-1.0188 c-0.8938-0.7193-1.8644-1.3537-2.6962-2.1369c-1.0891-1.0256-2.2091-1.3683-3.688-0.897c-2.8154,0.8972-5.3543,2.2284-7.393,4.3832 c-2.6064,2.7547-5.8876,4.5865-9.0547,6.5238c-29.8681,18.2696-62.3445,32.1607-95.9842,41.7969 c-1.5998,0.4583-3.1192,1.1902-4.7051,1.7057c-1.7116,0.5562-3.4858,0.9247-5.1849,1.5133c-3.1597,1.0945-3.6996,1.7617-3.771,4.754 c-0.1257,5.273-0.3653,10.5432-0.5551,15.8147C245.4462,259.211,245.4033,260.6105,245.3446,262.3852z M274.4604,146.1203 c-0.0057,0.2083-6.8501,1.6258-6.8558,1.8341c1.4705,0.4039,8.8719,1.1205,10.3573,1.4592 c3.638,0.8295,7.2832,1.6302,10.9362,2.3911c2.4505,0.5103,46.4367,7.8772,53.1312,9.1736 c6.0019,1.1623,12.0078,2.3133,18.1721,2.1959c3.0776-0.0586,7.0531-1.4562,10.1313-1.4444 c0.174-0.4069,0.3315-0.6892,0.4187-0.9917c1.3725-4.7617,2.7916-9.5111,4.0693-14.2983c0.4105-1.5378,0.5938-3.1743,0.6187-4.7698 c0.071-4.5324-2.1739-7.3139-6.5895-8.1669c-4.0657-0.7854-8.1816-1.0761-12.2913-0.3942 c-2.9156,0.4837-5.8027,1.1428-8.6968,1.7508c-4.6551,0.9778-9.2756,2.1597-13.9642,2.9293 c-8.6332,1.417-17.3002,2.6334-25.963,3.8642c-6.5011,0.9237-13.0178,1.7373-19.527,2.6032 C283.7582,144.8747,279.1095,145.4988,274.4604,146.1203z M396.194,115.3542c0.1782-0.7706,0.3464-1.445,0.4893-2.1248 c1.0321-4.9117,1.9815-9.8424,3.1131-14.731c0.8557-3.6967,2.0799-7.3095,2.8969-11.0133 c1.7048-7.7286,3.1415-15.5171,4.8899-23.2353c1.6618-7.3361,3.0811-14.7437,5.9785-21.7598c0.639-1.5475,0.702-3.3877,0.7659-5.103 c0.0692-1.858-0.1102-3.7336-0.2981-5.5897c-0.1218-1.2027-0.325-2.4287-0.7205-3.5647c-0.6122-1.7587-1.4165-3.4508-2.1476-5.1677 c-0.124-0.2911-0.2166-0.6715-0.4476-0.8288c-1.6392-1.1167-2.6098-2.7918-3.7465-4.3337c-0.2082-0.2824-0.5571-0.461-1.0046-0.8179 c-0.5459,2.9759-0.9869,5.7636-1.575,8.5199c-2.8206,13.2223-5.5973,26.4548-8.5505,39.6476 c-3.0512,13.6302-6.2901,27.2184-9.4384,40.8269c-0.2292,0.9903-0.3902,1.9963-0.5494,2.8212 c1.9203,1.0329,3.7117,1.8836,5.3827,2.9269C392.9069,112.8727,394.4617,114.1107,396.194,115.3542z M386.0232,177.4523 c0.0318-0.8427,0.0954-1.4634,0.0718-2.0809c-0.1058-2.765-0.1455-5.5368-0.3825-8.2913c-0.2641-3.0696-0.6766-6.1285-1.1017-9.1813 c-0.2206-1.5845-0.6509-3.1391-0.9014-4.7207c-0.125-0.7887-0.4872-1.3154-1.1841-1.6189c-0.4485-0.1954-1.3704-3.4529-1.3428-4.886 c-0.1455-0.0237-0.2909-0.0474-0.4363-0.071c-2.4264,7.1256-4.8527,14.2512-7.2183,21.1982 C377.2806,171.6828,381.4655,174.5325,386.0232,177.4523z"/></svg>`,`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 224.5497 355.9136" xml:space="preserve"><path fill="${color}" d="M186.7789,134.3081c12.0889-14.207,24.5889-28.8984,32.5664-49.2842c13.4658-34.3955-1.1465-63.2939-21.6025-76.6748 c-18.3994-12.0352-39.2061-10.9795-53.1504,2.6523c-1.3389-1.1348-3.0137-1.8545-4.8105-2.0439 c-3.4912,0.0117-6.8984,1.2402-9.5483,3.4248c-3.8784,2.5029-22.4419,15.9258-26.6543,19.5996 c-21.2388,0.0557-62.4707,9.335-82.7598,15.9883c-6.9751,1.9922-13.8701,4.499-20.4932,7.4502L0.1763,55.524 c-1.2607,1.2617,4.644,17.4307,4.896,18.1191c1.8887,5.1533,6.6606,17.4893,10.5425,21.7803 c-0.5498,9.1924,2.875,18.8438,9.6592,27.2031c6.3506,7.8252,15.2568,13.9805,24.4424,16.8936 c0.3218,0.2363,1.9512,1.668,3.8271,3.3164c13.7583,12.0869,26.9116,23.2529,30.1147,23.252c0.0293,0,0.0581-0.001,0.0859-0.0029 c0.3774-0.0254,0.5986-0.1953,0.7178-0.333c8.8774-10.249,46.7324-87.8701,47.2861-99.6006 c3.2964-2.6094,11.5024-10.2197,24.4009-22.6289c0.5254-0.5049,0.8848-0.8506,1.04-0.999l0.002,0.002 c1.7139-1.3789,3.1289-3.0518,4.2051-4.9697l0.0488-0.1221c0.6582-2.583,0.4395-5.3262-0.6113-7.7715 c8.6934-6.8301,15.6523-6.9551,24.7217-0.4814c8.0654,5.5879,13.2676,14.3906,14.2715,24.1406 c1.708,20.335-10.9346,38.2744-22.9189,53.4922c-5.7227,7.2637-10.9043,13.3262-15.915,19.1885 c-15.7607,18.4385-27.1484,31.7617-35.7886,60.0723c-7.9858,26.4863-9.564,54.8789-4.5469,82.1729l0.3198,1.041 c0.6509,2.0947,1.2656,4.0742,1.293,6.2979c0.2222,1.1885,0.4443,2.3574,0.6665,3.5264c0.374,1.9658,0.7476,3.9316,1.1372,6.0518 c0.3726,1.1562,0.606,2.3545,0.6958,3.5674c-25.041,7.5127-43.2969,27.5029-44.5254,48.7783 c-0.4009,0.4014-0.647,0.9238-0.6997,1.4951c-0.0596,0.6465,0.1367,1.2783,0.5522,1.7793c0.0957,0.1143,0.2021,0.2207,0.3477,0.3389 c6.8257,4.8047,14.3804,8.3271,22.4468,10.4658c10.3281,2.8838,21.6479,4.3242,33.6436,4.3242 c12.5166,0,25.7686-1.5693,39.3887-4.7051c4.3779-1.0059,8.6514-2.1094,13.3379-3.335c4.3154-0.7002,8.2588-2.6729,11.4502-5.752 c0.6641-0.8311,0.9736-1.9131,0.8516-2.915c-0.1855-25.5586-19.4297-47.0654-46.8447-52.4131 c-0.5176-3.2773-1.2402-6.8135-2.2646-11.0869l-0.0918-0.1865c-0.4443-0.8125-2.2891-7.8086-2.3174-8.4141l0.0137-0.0811 l-0.0137-0.0811c-5.4404-33.7744-3.9365-61.1514,4.5977-83.6943C162.2613,163.1226,174.7252,148.4742,186.7789,134.3081z  M126.584,66.2407c-3.1631,5.5215-5.8794,11.3457-8.0674,17.2959c-10.104,24.3867-21.7334,48.4375-34.5752,71.5059 C79.4307,132.2007,47.0523,82.898,9.108,57.9009c29.1929-8.8506,59.3008-15.4854,89.5679-19.7354 c1.8599-0.4922,3.7705-0.8545,5.6821-1.0781c0.8511,0.5869,1.3657,0.7012,1.8643,0.8125 c1.2368,0.2754,2.7764,0.6182,12.3896,10.5283c4.6021,4.7402,6.4971,12.2002,7.4082,15.7861 C126.2559,65.1431,126.4268,65.8159,126.584,66.2407z M24.3697,84.8902l2.6675,2.6631 c5.9946,5.9775,10.3257,10.2969,14.3179,15.0625c13.8691,16.5615,21.8442,27.292,23.7041,31.8926 c0.0195,0.0488,0.0386,0.0957,0.0571,0.1406l-3.7856,0.9453c-8.4912,0.9277-17.2222-2.4023-25.9512-9.9121 C19.7017,112.1929,17.9932,95.1001,24.3697,84.8902z M111.2994,33.9175c5.0166-4.0068,6.7915-5.3564,7.8672-6.1738 c1.2227-0.9287,1.479-1.124,4.5835-3.7842c4.0112-3.0205,8.2236-5.8711,12.522-8.4746c0.4121-0.1396,0.7637-0.2842,1.0781-0.415 c1.5625-0.6484,2.0322-0.8418,5.8125,2.9375c7.5244,6.4482,11.3398,11.8184,11.3398,15.959l0.0244,0.1553 c0.458,1.4033-0.2217,2.8955-1.5801,3.4717l-0.1172,0.0693c-3.2178,2.5732-19.0889,18.3564-22.458,21.7139 C127.2925,48.8306,120.5577,39.8394,111.2994,33.9175z M204.8873,54.354c-0.6729-10.7178-5.7432-20.8613-13.9102-27.8301 c-6.1084-5.2529-12.5781-7.9521-18.6885-7.9521c-3.2598,0-6.4189,0.7686-9.3633,2.3281c-1.9541,1.1064-3.7266,2.4854-5.2773,4.1055 c-0.0439-0.0234-0.0889-0.043-0.1357-0.0586c-2.0664-3.1338-4.5459-5.9717-7.3301-8.3945c-0.5205-0.584-1.1045-1.1064-1.7422-1.5576 c4.1562-3.1934,8.7861-5.6436,13.7715-7.2871c13.4014-3.9736,29.6807,1.5,41.4639,13.9453 c14.749,15.5772,18.6309,37.3291,10.6504,59.6797c-6.3975,17.9219-20.2334,34.6494-33.6123,50.8262 c-9.8145,11.8662-19.084,23.0742-25.3984,34.5098c-16.1885,29.3125-19.458,67.9102-9.7178,114.7207 c1.0625,5.0977,1.7344,7.8516,2.0957,9.3311c0.4463,1.8271,0.4463,1.8271,0.2637,2.3359l-0.0889,0.2549 c-1.085,1.5342-2.8447,2.4023-4.8154,2.335c-3.3066,0.4316-10.3311,0.1895-10.9541-3.3066 c-0.4824-2.6943-1.2192-5.9004-2.0723-9.6123c-3.0566-13.2969-7.6758-33.3926-6.4624-57.1162 c1.2373-17.3682,4.9746-34.4375,11.1069-50.7266c7.0254-17.9102,20.8076-34.2021,34.1367-49.958 C188.2779,101.9107,206.6685,80.1714,204.8873,54.354z M124.8985,294.5464c0.2935,0.749,0.9648,1.9248,1.5396,2.3232 c2.5034,3.6934,6.6514,5.9629,11.0801,6.0723c5.0889,0.5088,10.1934-0.8252,14.3799-3.7588l0.1436-0.1074 c1.6602-1.7637,2.7295-4.0244,3.0459-6.417c23.4492,5.3486,39.0635,23.0254,39.8994,45.2109 c-2.876,2.332-7.9209,3.4492-16.165,5.2744c-1.1045,0.2441-2.2666,0.501-3.4873,0.7754 c-20.0869,4.5176-43.9297,8.2725-68.4644,1.8633c-7.4766-1.9414-14.8403-4.5088-21.8936-7.6328 C85.8853,319.4546,102.5772,301.2339,124.8985,294.5464z"/></svg>`,`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 404.9558 269.009" xml:space="preserve"><path fill="${color}" d="M398.903,166.605c-0.7423-1.0947-1.4448-2.215-2.0738-3.3821c-0.8965-0.8903-1.7962-1.7777-2.6779-2.6844 c-1.3348-1.3726-2.6643-2.7479-3.8691-4.2384c-0.3639-0.4501-0.7121-0.9131-1.0636-1.3731c0.0081,0.0116-0.523-0.6721-0.6909-0.8876 c-0.5425-0.6958-1.0883-1.3891-1.6395-2.0783c-2.212-2.7637-4.5382-5.433-7.0411-7.9366c0.0013,0.0054,0.0022,0.0121,0.0035,0.0175 c-0.025-0.0294-0.0465-0.0596-0.0714-0.089c-0.2351-0.2346-0.4479-0.4902-0.6867-0.7213c-0.5532-0.5351-0.9662-1.1407-1.3172-1.7705 c-11.6082-15.0531-14.7266-31.7354-25.2201-48.2034c-2.0288-13.359-7.6252-25.923-16.199-36.3668 c-15.3878-16.8481-34.0082-30.4278-54.7526-39.9306c-6.1557-2.5108-12.5544-4.4549-20.0059-6.7227 c-26.6732-9.2504-55.0868-12.2583-83.0982-8.9172c-1.8919,0.5327-3.8251,0.7591-5.7773,0.8444 c-0.4205,0.1179-0.8448,0.2175-1.2576,0.3688c-0.193,0.0707-0.4024,0.0499-0.6006,0.0959l0.019,0.0756 c-8.7115,1.5599-17.2483,3.943-25.5367,7.0344c-0.3495,0.197-0.7017,0.3891-1.092,0.5159c-0.3807,0.2-0.7823,0.3231-1.1862,0.4378 c0.0299-0.004,0.0596-0.0082,0.0895-0.0121c-0.0531,0.0079-0.1033,0.0279-0.1565,0.0366c-0.1589,0.043-0.3189,0.0831-0.4815,0.113 c-0.6026,0.13-1.1939,0.2986-1.773,0.5099c-1.1476,0.5344-2.2807,1.0987-3.4323,1.6252c-0.5515,0.3198-1.1303,0.5398-1.7196,0.721 C112.54,22.9961,93.0231,39.3796,79.9254,60.536c-14.2725,6.3606-28.1721,13.5266-41.6317,21.4637 c-7.4341,3.266-14.586,7.14-21.3826,11.5823c-6.4237,4.0671-11.9384,9.4165-16.1991,15.7131c-0.9494,2.1121-0.9494,4.5295,0,6.6417 c1.9725,4.0137,4.726,7.5936,8.0995,10.5295c14.822,12.8782,22.3545,6.8036,50.541,47.0582 c14.4171,20.4918,19.6818,46.6531,37.7438,68.7649c12.7161,15.5512,19.0339,32.3981,48.5972,24.8656 c16.1991-4.0497,25.1086-11.0963,47.2201-17.0899c11.2585-2.9968,22.8407-5.1838,34.0992-8.5855 c69.8179-20.8969,53.3759-15.2271,101.163-22.0307c8.0995-1.2149,16.7661-3.0779,25.1086-4.3738 c14.6277-1.1958,29.3076-1.6284,43.9803-1.296c3.7803-0.9887,6.5539-4.2139,6.9657-8.0995c0.7084-4.2539,0.899-8.5783,0.567-12.8782 C405.5674,183.6539,403.4791,174.5241,398.903,166.605z M203.3614,5.6213l-0.0803,0.4049 c19.4962,0.7218,38.7965,4.1568,57.3445,10.2055c6.5848,1.8304,13.0728,3.9929,19.4388,6.4795 c19.8548,9.0687,37.6988,22.0109,52.485,38.0679c14.4171,17.0091,17.6569,39.1206,16.199,61.5564 c-1.053,13.5261-9.8006,22.3545-20.4109,30.9402c-1.1338-9.1525-16.1991-16.1991-24.9464-17.5761 c-1.2959,0-1.4579,0.486,2.0249-1.4579c6.2289-3.4578,11.2152-8.784,14.255-15.2271c1.1341-1.2149-0.7289-2.9157-1.7819-1.7008 c-8.8285,6.0746-13.5261,10.9344-25.4324,18.3858c-0.81,0-0.6481,1.9441-5.8317,1.7011c-7.2171-1.705-14.6156-2.521-22.0307-2.43 c-7.4356-18.7166-5.2582-39.8854,5.8317-56.6967c13.9312-18.7099,19.1958-11.9063,19.1958-15.3891 c0-5.4265-35.476,4.3738-35.0711,47.6253c0.2979,8.5477,2.6898,16.8914,6.9657,24.2986c-9.6355,0.4778-19.116,2.6149-28.0246,6.3176 c-1.8627-1.7008-9.6384,2.3489-14.6601,0c4.2823-14.4913,5.8744-29.6443,4.6979-44.7093 c-1.2097-8.9891-5.0091-17.4317-10.9344-24.2986c-6.614-7.5412-14.9491-13.376-24.2986-17.0091 c-19.2769-6.9657-25.8375,2.8349-37.2579,6.4795c-1.8919,0.636-3.9398,0.636-5.8317,0c-7.2895-2.3487-26.9715-8.0995-31.2643-1.5389 c-3.3208,4.9408,1.5389,12.2304,4.6979,17.738c3.1587,5.5079,4.2117,5.8317-1.053,19.1958 c-1.5681,4.4309-3.633,8.6695-6.1557,12.6352c-4.1308,4.2927-17.981,7.4517-20.5729,12.4733 c-5.2646,9.7193,14.7412,19.5199,18.4669,24.2986s10.2055,13.6071,13.6882,17.3329c13.2023,14.4171,45.5193,17.738,62.2854,12.3923 c8.0891-2.5489,15.3932-7.1209,21.2207-13.2831c5.1028,4.2927,4.1308,11.0152,2.7538,17.738 c-0.81,3.8876-4.9406,6.1555-8.0995,8.0995c-10.4032,6.7208-22.7213,9.8501-35.0708,8.9095 c-3.217-1.0426-6.3342-2.3707-9.3144-3.9689c-8.082-1.925-15.7964-5.1529-22.8407-9.5574 c-6.1186-6.1896-13.273-11.2609-21.1399-14.9842C74.4979,159.2693,67.2084,113.264,79.2768,77.14 C94.1799,31.2966,153.8734,4.7302,203.3614,5.6213z M171.6118,128.572c-10.5293-16.199-19.9248-10.5295-27.1335-14.2552 c-10.2052-5.3457-11.7442-11.3393-15.7939-14.255c-1.9445-1.2698-4.0765-2.2263-6.3176-2.8349 c1.8909-4.1182,3.0685-8.5276,3.4827-13.0404c-0.567-5.5076-9.4766-17.3329-8.0995-20.0058 c4.2927-2.0249,20.2488,2.43,24.7845,3.9689c8.6665,2.9157,18.6288-5.2646,26.2424-8.0995 c12.5544-4.1308,30.1302,6.4795,38.6349,16.199c13.8501,16.1991,10.7723,36.0427,6.6417,56.6967 c-2.254,20.0882-17.1682,36.4385-36.9499,40.5424C184.8598,159.6094,180.2688,141.3971,171.6118,128.572z M161.2445,148.4159 l-0.0811,0.4049c0.6481,1.1338-0.8908,2.6727-2.2679,1.2149c-2.1376-2.1109-3.0796-5.1497-2.5108-8.0995 c0.2726-2.9597,2.278-5.4743,5.1027-6.3987c2.187-0.7289,2.43,1.2959,1.62,1.944 C160.8109,140.6345,160.1215,144.6803,161.2445,148.4159z M397.4267,207.9473c-1.5389,1.5389-22.7597-1.7819-44.4666,1.377 c-8.0995,1.2149-16.7661,3.0779-25.1086,4.2117c-46.7342,6.6417-32.3981,1.2149-102.1349,22.2737 c-11.1774,3.3208-22.5977,5.5076-33.856,8.5047c-21.8688,5.9125-31.3451,13.1212-47.1393,17.009 c-25.1897,6.3176-29.5635-7.4517-42.1176-22.6788c-17.6569-21.5448-22.7596-47.3012-37.5817-68.2789 c-29.1583-41.2266-36.7719-35.0708-51.7561-47.8682c-2.9481-2.4307-5.3729-5.4342-7.1276-8.8285 c-0.5235-0.8723-0.5235-1.9623,0-2.8349c3.9492-4.8837,8.5875-9.1671,13.7693-12.7163c6.5646-4.3587,13.4719-8.1779,20.6537-11.4204 c11.1774-6.0746,26.1616-15.389,35.8811-19.6007c-18.3861,38.8776-11.8255,97.1943,34.0179,108.2095 c2.9249,0.9961,5.6626,2.4743,8.0995,4.3738c5.6814,5.2414,11.9295,9.8325,18.6291,13.6882 c5.5076,2.4298,11.7442,3.7257,17.252,5.7506c9.1038,5.3867,20.2224,6.1379,29.9681,2.0249 c8.9043-2.6836,17.171-7.1474,24.2986-13.1212c1.4925-1.5528,2.5294-3.4862,2.9968-5.5887 c1.4579-8.0995,2.106-15.632-4.0498-20.6537c4.3429-5.3284,7.6405-11.429,9.7195-17.981c2.821,1.0381,5.8653,1.3175,8.8284,0.81 c-12.1493,9.9623-8.5855,18.5477,7.0466,22.5167c15.0648,3.7319,30.6911,4.6383,46.0863,2.6727 c15.2272-1.3768,35.719-0.4859,48.0302-9.8814c12.3112-9.3955,24.7845-20.3296,26.3235-37.0957 c1.5389-16.7661-0.8911-20.6539,1.5389-15.389c4.7787,10.2052,8.5044,20.9777,14.012,30.6162 c9.3955,16.1991,26.8905,25.5945,29.4013,44.7093c0.5504,3.3764,0.8752,6.7858,0.9719,10.2055l-0.1617,0.4049 C399.4515,197.9039,400.4234,205.0315,397.4267,207.9473z M192.5896,116.9087c-3.7535,0.2833-7.4701,0.9343-11.0963,1.9439 c-3.8068,1.4579-7.1276,3.8068-5.2646,7.4515c2.3479,5.2132,5.9349,9.7734,10.4483,13.2832 c1.1339,1.2149,2.9158-0.567,1.7819-1.7819s-1.296-3.7258-5.8317-12.7163c3.8519-1.6691,7.5627-3.6464,11.0963-5.9126 c0.5599-0.4458,0.6523-1.2611,0.2065-1.8211C193.6108,116.9546,193.0854,116.7795,192.5896,116.9087z M176.1476,93.6631 c-4.4559-0.3944-8.3877,2.898-8.7821,7.3539c-0.1712,1.9347,0.3585,3.8666,1.4926,5.4434c0.1776,0.6933,0.8835,1.1114,1.5769,0.934 c0.4585-0.1174,0.8166-0.4754,0.934-0.934c0.0122-4.191,2.2271-8.067,5.8317-10.2054 C178.4154,95.364,178.1724,93.2582,176.1476,93.6631z"/></svg>`,`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 324.4626 437.1873" xml:space="preserve"><path fill="${color}" d="M314.5615,280.12l-0.1221-0.0781l-0.1416-0.0264c-2.1011-0.4004-4.563-0.9209-7.1699-1.4707 c-2.3726-0.501-4.813-1.0166-7.0459-1.4531c1.1011-1.2158,3-3.2051,5.1143-5.4199c4.8071-5.0352,10.2559-10.7422,11.2969-12.5078 l0.082-0.2012c4.2451-17.1533,4.0244-35.2285-0.6416-52.2832c-0.373-1.2852-1.4697-2.2412-2.7632-2.4297 c-6.5508-1.2451-13.0356-2.417-19.3081-3.5508c6.7437-6.8564,13.625-14.4033,20.2896-21.7119l4.1494-4.5469l0.1211-0.1768 c0.2261-0.4648,0.2515-0.9893,0.0757-1.4658c-0.0063-3.3955-0.2222-6.3066-0.4717-9.668c-0.0996-1.3428-0.2046-2.7598-0.3047-4.3154 c-0.0659-0.9551-0.8984-1.6846-1.7988-1.6143l-4.479,0.001c2.501-16.1504,2.4551-32.5166-0.1318-48.6211 c-0.186-1.709-1.6182-2.9922-3.3511-2.9922c-25.8887,0-52.6357,0-78.8623,0.7148c0.9086-0.0248,3.1514-2.9857,3.7876-3.6597 c1.2469-1.3213,2.4307-2.7021,3.5457-4.1365c2.2193-2.8552,4.1647-5.9226,5.8011-9.1475 c2.7466-5.4122,4.4689-11.4617,5.1633-17.5463c0.3618-3.17,0.4571-6.3691,0.3113-9.5559c-0.1384-3.0237-0.0939-6.319-1.1685-9.1845 c-0.5059-1.9346-1.0293-3.9336-1.77-5.8906l-0.2915-0.4268c-0.0801-0.1016-0.1602-0.2021-0.2368-0.3057l-0.355-0.4805 c-0.8755-1.1865-1.7808-2.415-2.8887-3.4834c-1.9292-1.8613-4.9795-2.9258-8.3779-2.9258c-0.0249,0-0.0498,0-0.0747,0 c-3.7017,0.0166-7.1689,0.9785-10.4028,1.9619c-1.9741,0.6006-3.5181,1.6348-4.8926,2.6631 c-0.4707,0.3525-1.3257,1.0498-2.2954,1.8428c-1.1392,0.9307-2.4663,2.0146-3.4731,2.7832 c0.0195-0.6523,0.0376-1.2949,0.0537-1.8984c0.0508-0.3271,0.0718-0.5869,0.0645-0.8135c-0.0176-0.6045-0.0176-1.209-0.0117-1.8105 l0.0229-1.1094c0.0986-2.0547,0.521-7.1543,0.9287-12.0859c0.3843-4.6455,0.7476-9.0332,0.7852-10.249 c0.0859-2.752-0.1006-3.4219-1.25-4.4824l-0.1143-0.0869c-1.9653-1.2168-4.1304-2.4658-6.1772-3.6348l-0.1343-0.0596 c-0.8179-0.2734-1.6592-0.5625-2.2729-0.8203c-1.771-0.7402-3.5498-1.4619-5.3379-2.1621 c-9.5117-3.7236-18.4141-6.5137-27.2153-8.5283l-0.9175-0.167v0.0605c-14.3589-2.2373-26.5107-0.1592-34.2363,2.0078 c-7.7882,2.1836-14.6115,5.5048-18.1097,8.7398c-0.7701,0.7121-1.2443,1.6768-1.3226,2.7227 c-0.7613,10.1703-5.1056,71.65-1.3816,103.2973c-22.0352,10.9541-60.4604,30.4434-82.7021,41.9492 c-1.1343,0.1641-1.5273,1.6562-1.876,2.9824c-0.1353,0.5127-0.2749,1.0439-0.4297,1.3916l-0.0444,0.1318 c-3.2485,13.7539-3.1084,28.2568,0.4053,41.9424c0.5605,2.1836,2.5312,3.6602,4.7568,3.625 c20.4482-0.4424,44.0698-1.0283,61.8652-1.5322l0.6704,5.7793c0.5542,4.7881,1.188,10.2705,1.6567,14.1787 c-4.3975,2.5986-41.8423,24.7422-59.7544,35.8389h-0.417l-2.1582,1.2959l-0.0933,0.2393c-0.2148,0.5518-0.2671,0.8359-0.3135,1.0869 c-0.0571,0.3086-0.1113,0.5996-0.7148,1.8057l-0.0508,0.1318c-4.089,14.4939-1.7088,41.2451-0.4694,52.2719 c0.3214,2.86,2.6858,5.0463,5.5621,5.1446c2.6319,0.09,5.7899,0.175,8.0977,0.1646c3.1919-0.0117,6.4673-0.0264,9.0278,0.0742 c-1.5786,1.1787-3.2075,2.3936-4.877,3.6377C36.186,342.3993,15.2661,357.992,0.5268,371.2381l-0.2354,0.2109l-0.0127,0.3164 c-0.7998,19.7598,0.1235,39.7178,2.7437,59.3203c0.4668,3.4932,3.4458,6.1025,6.9497,6.1016c0.0298,0,0.0596,0,0.0894,0 l55.3569-0.6895l0.2529-0.0439c1.9976-0.2725,4.1362-0.5312,6.269-0.5859l0.7217-0.0186l0.0044-0.3594 c52.3164-0.4209,98.0986-1.4023,139.9473-3.001l0.1846-0.0068l0.1602-0.0918c1.9395-1.1133,5.521-3.6338,5.6841-3.7715 c0.1313-0.1113,47.4155-49.0498,67.8521-68.6484l0.1226-0.1523c0.3936-0.6504,0.8564-1.1426,1.416-1.5039l0.0991-0.0762 c0.2217-0.2031,0.4844-0.3662,0.7544-0.5342c0.0293-0.0186,0.0552-0.0352,0.0767-0.0498l0.1724-0.1055 c0.0889-0.0449,0.1738-0.0967,0.3291-0.1943l0.1167-0.0879c9.9209-9.0498,30.1353-27.8506,31.9917-29.5771 c1.2422-0.3955,2.0684-1.8174,2.522-4.333C325.8818,313.4413,320.9037,284.1786,314.5615,280.12z M132.9423,428.5526 c-27.4438,0.75-58.5371,1.5986-123.4482,2.1982c-2.521-17.7588-3.7441-35.8457-3.6367-53.7822 c19.2725-0.3496,39.2217-0.6514,58.521-0.9434c50.5288-0.7656,102.77-1.5566,152.561-3.3105 c-0.0269,8.4502-0.4863,18.7588-0.9316,28.7393c-0.2852,6.4006-0.5773,12.9535-0.7504,18.9612 c-0.1075,3.7314-3.1558,6.7034-6.8886,6.7321C175.0173,427.4037,155.4093,427.9386,132.9423,428.5526z M301.539,293.1434 c-0.563-4.4238-1.3291-8.8525-2.2832-13.2031c2.6875,0.7686,8.73,2.3828,11.668,3.124L301.539,293.1434z M210.9599,67.0858 c0.0532-1.0312,1.2852-3.2041,2.2749-4.0098l0.354-0.29c0.4756-0.3906,0.9517-0.7822,1.4482-1.1455 c1.2749-0.9307,2.7383-1.5352,4.0015-2.0039c2.3232-0.8613,5.021-1.7129,7.4409-1.5273c1.437,0.1113,2.5234,0.6064,3.229,1.4697 c0.7007,0.8594,1.0869,1.958,1.2158,3.457c0.1089,1.2734-0.1406,2.5664-0.3813,3.8174c-0.334,1.7334-0.6528,3.124-1.0015,4.3633 l-0.0669,0.1846c-2.8394,11.6328-9.8379,21.5859-19.7764,28.1748c0.3428-8.3066,0.9043-21.9717,1.1826-30.1338 C210.8808,69.4422,210.9448,67.5086,210.9599,67.0858z M209.5063,112.1014c-0.1387-2.457-0.1284-4.9365,0.0308-7.3906 c14.8789-7.251,25.0464-21.9395,26.5713-38.415c0.8843-6.999-0.3945-11.4873-3.8013-13.3398 c-5.3799-2.9268-14.4175,1.752-21.0483,7.0166v-4.1924c10.1519-8.4229,17.6631-12.1133,22.333-10.9736 c2.2197,0.542,3.8633,2.1533,5.0239,4.9258c4.1265,9.8818,2.7461,24.748-3.5166,37.8721 C229.1786,100.0125,220.1157,108.6746,209.5063,112.1014z M205.2612,82.3211c-2.7446,50.2773-2.9688,54.3838-34.4341,57.9102 c-16.458,0.8496-45.1987-3.5098-48.5029-25.1445c-2.1153-30.3124-2.1547-61.0281-0.1195-91.3629 c0.0804-1.1988,1.3678-1.9345,2.4347-1.3821c22.5555,11.6791,51.6316,11.9906,82.6093,0.8685 c1.0217-0.3668,2.0795,0.4418,1.983,1.5231C207.1003,48.6391,206.0847,67.2389,205.2612,82.3211z M209.9326,115.9168 c5.5303-0.9404,10.8315-3.1543,15.3857-6.4287c4.0864,0.1064,55.5884,1.4443,81.2646,1.335 c0.0151,0.5879,0.0732,0.8809,0.2866,1.9199c0.0669,0.3252,0.1499,0.7295,0.2534,1.249 c-6.6211,3.9502-15.7915,9.4893-24.667,14.8496c-5.7192,3.4541-11.1997,6.7646-15.5376,9.3711l-0.1509,0.0908l-0.0947,0.1475 c-0.1216,0.1904-0.272,0.3506-0.4478,0.4756c-3.0962,2.2129-6.5122,4.4902-10.7515,7.167c-0.748,0.4717-1.4961,0.9629-2.2485,1.457 c-2.4956,1.6387-5.0767,3.333-7.8052,4.4033c-0.6436,0.2529-1.3242,0.4766-2.0801,0.6865l-10.2979,6.3184 c-59.3823-0.4727-122.5229-0.0391-183.5879,0.3809l-3.1484,0.0215l8.1304-4.1387c19.0615-9.6963,47.7681-24.2988,62.2563-32.001 c3.772,9.1104,12.7451,16.5293,25.3555,20.9414c11.9233,4.1709,25.708,5.1729,37.8203,2.75 C199.1537,143.0535,210.0737,131.7752,209.9326,115.9168z M255.9194,218.6912c-0.229,3.7295-0.4658,7.5859-0.603,11.126 c-0.0615,1.8145-1.5312,3.2598-3.3408,3.2891c-40.8267,0.3594-83.2827,2.1494-124.3413,3.8809 c-7.0537,0.2969-14.0767,0.5928-21.0552,0.8809c-0.354-2.3428-1.1855-8.835-1.9927-15.1357 c-0.7231-5.6465-1.4692-11.4688-1.937-14.8379c60.9082-1.8291,112.7104-3.6572,154.0015-5.4336 C256.6157,207.3563,256.2621,213.1141,255.9194,218.6912z M238.1288,164.6199l-0.0356-2.1064l12.6787-8.0527 c0.8452,10.374,1.9961,23.9023,2.8159,33.4951c-2.7554,1.5791-8.1909,4.7998-12.6025,7.4131 c-1.1899,0.7051-2.2905,1.3564-3.2197,1.9062C238.5024,186.6073,238.3207,175.9129,238.1288,164.6199z M268.4692,143.1434 c0.7241,4.9473,1.146,10.4346,1.5552,15.75c0.4707,6.1191,0.957,12.4395,1.9077,18.1924l-14.9951,9.4199 c-0.7017-9.8574-1.8062-24.2256-2.5542-33.9492L268.4692,143.1434z M275.2656,175.3221 c-1.3672-11.4365-3.0542-24.4551-4.2983-34.0518c0.5464-0.3652,1.4912-0.9707,2.8262-1.8252 c4.4966-2.8799,13.7744-8.8203,33.4712-21.9102c1.7061,13.6924,1.3818,27.5156-0.9648,41.1182 C297.2241,163.3621,284.435,170.0623,275.2656,175.3221z M36.2529,165.0379c20.9722,0.001,42.9395,0.0557,64.1899,0.1084 c43.772,0.1084,89.0273,0.2227,131.6113-0.1025c-0.374,11.6689-0.1699,23.4717,0.6064,35.1104 c-39.9194,0.0967-165.6279,2.4287-193.7407,3.0254c-1.5933,0.042-2.9624-1.0605-3.2969-2.6006 C33.0878,188.8983,33.3066,176.6209,36.2529,165.0379z M310.7582,256.411c-14.4663,15.5176-33.0771,35.543-49.8677,54.0254 c-0.0713-7.2988-0.5083-17.9111-0.8975-27.3672c-0.1963-4.7725-0.3794-9.2158-0.4937-12.7236 c1.437-1.3623,5.9414-6.2773,21.6147-24.0049c6.5737-7.4355,22.3965-25.4004,31.2686-36.0605 C315.1938,225.5106,314.6371,241.4188,310.7582,256.411z M89.1616,357.161v-31.3799c50.1206-0.749,105.0381-2.292,158.9253-4.4629 c-0.3247,5.8984-0.3584,13.1436-0.3911,20.1602c-0.0234,5.0537-0.0454,9.8438-0.1699,14.0586 c-31.2891-0.7129-126.2344,1.0332-157.6016,1.6094L89.1616,357.161z M253.9086,271.3631 c0.0215,8.0684,0.3735,21.2871,0.6582,31.9727c0.0972,3.6377,0.1875,7.0273,0.2568,9.9004 c0.0127,0.4014-0.1318,0.7832-0.4067,1.0762c-0.2754,0.292-0.6475,0.46-1.1201,0.4736 c-105.7769,3.2188-147.3345,5.4551-169.6611,6.6562c-20.5879,1.1074-22.4604,1.208-43.0654,0.1367 c-0.2036-1.7695-0.4243-3.5742-0.6484-5.4062c-1.8569-15.168-3.9585-32.3379,1.8843-46.9141 C50.79,269.4071,173.4721,271.4071,253.9086,271.3631z M50.4658,338.6571c5.1714-4.125,10.5166-8.3877,15.8125-12.5137h17.0884 v37.4688l14.6577-0.1738c42.5474-0.501,86.5171-1.0195,128.1582-2.3076c-2.2393,2.0547-4.0591,3.7588-7.0376,6.6758 c-64.1909,0.0059-190.5884,1.8555-210.0381,2.1455C23.3076,360.3192,37.1025,349.3163,50.4658,338.6571z M221.8759,373.4178 c4.5771-3.9893,8.9663-8.2871,13.0547-12.7812l17.168-0.5049v-0.584c0.4839-0.8037,3.8101-4.5654,7.9839-9.2852 c11.3101-12.7891,32.2349-36.4502,53.8257-64.9121c4.084,12.0498,5.7397,24.5977,4.9224,37.3193l-0.0073,0.1143 c-32.8408,26.1836-53.2886,48.9229-71.3345,68.9922c-9.4146,10.4697-18.3296,20.3838-27.96,29.5801 C220.2582,407.9491,221.3578,385.0409,221.8759,373.4178z M280.8564,239.5574c-9.3193,9.6582-18.1284,18.7871-24.6948,26.0713 c-61.7681-1.4502-125.3164-1.8262-186.7803-2.1904l-18.0122-0.1084c15.8315-9.0147,32.269-18.9444,48.1899-28.5625l0.8647-0.5225 l0.7544,5.6338c0.2979,2.2246,2.189,3.873,4.4478,3.8008c50.8872-1.29,149.5527-5.5801,150.5435-5.624l0.2842-0.0117l0.2046-0.1982 c9.8145-9.4873,32.0518-32.0098,34.9155-34.9121l19.104,4.9385C302.7661,216.8514,291.6337,228.3885,280.8564,239.5574z  M123.8964,13.8055c0.0615-0.0371,0.125-0.0742,0.1904-0.1133c26.2056-15.7051,55.293-7.8232,75.0874,1.5605l3.6292,2.1053 c0.7735,0.4487,0.6608,1.6107-0.1877,1.893c-13.6337,4.5356-27.6644,7.0177-39.8922,7.0242c-0.0195,0-0.0361,0-0.0557,0 C146.3061,26.2752,133.267,22.0809,123.8964,13.8055z"/></svg>`,`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 380.8211 348.8141" xml:space="preserve"><path fill="${color}" d="M135.4305,88.2194c-6.4214-0.8379-11.7383,0.5068-15.8071,3.9932c-4.772,4.0889-7.5146,11.0635-7.7231,19.6367 c-0.5073,19.1436,7.6392,41.3936,24.1914,46.8789c3.1401,1.04,6.0454,1.5596,8.709,1.5596 c4.4951-0.001,8.2988-1.4805,11.3633-4.4326c8.583-8.2695,9.0562-26.4316,5.0879-40.0986 C158.5257,106.3707,151.5462,90.3131,135.4305,88.2194z M137.3992,153.069l-0.501-0.1318 c-6.3159-2.0117-10.6728-8.6191-13.2363-13.8799c-3.0557-6.2705-5.2095-14.1221-5.6206-20.4922 c-0.6626-10.0312,0.7173-16.7998,4.2183-20.6953c2.1436-2.3838,5.1577-3.6709,8.9473-3.8232 c10.5146-0.3164,19.6016,8.4395,24.2407,23.3965c2.9131,9.3643,3.8901,25.7813-3.0576,32.9609 C148.9461,153.9615,143.9017,154.86,137.3992,153.069z M373.7405,335.2067l-0.6094-0.251l-0.1094,0.1064 c-9.5889-3.957-36.0703-14.8115-47.29-14.3086c-25.7412,1.1582-59.0508,2.084-91.2637,2.9785 c-23.3965,0.6494-45.4951,1.2637-63.7495,1.9365c-0.535,0.0222-1.0135,0.1936-1.4057,0.478 c-1.0808-5.2817-0.8754-12.2324-0.4136-21.1997c0.7072-13.8105,2.4611-27.6931,4.7127-41.4963 c0.4337,0.2854,0.9662,0.4614,1.57,0.4924c33.418,0.8584,81.7646-1.5352,112.5225-4.1191 c23.9746-1.6982,39.248-4.5156,46.3672-13.8906c5.4043-7.1182,7.2715-17.5156,0.8145-49.4209l0.2178-0.1816l-0.1201-0.5869 c-3.7852-18.5527-7.4434-39.8193-11.3164-62.335c-4.707-27.3652-9.5742-55.6621-14.959-80.5234l-0.5732-2.6523 c-9.4502-43.7617-11.4258-52.8672-67.7109-49.6436c-77.293,4.4326-141.769,9.9365-209.0601,17.8457 C-3.8097,22.5944-1.3571,46.8033,1.4837,74.8346l0.252,2.499c4.7529,46.7783,11.6108,94.9141,20.9653,147.1582 c0.2549,1.4307,0.4995,2.8623,0.7427,4.2871c3.0508,17.8643,6.2012,36.3203,29.8076,36.3193c0.6699,0,1.3569-0.0146,2.0601-0.0449 c0.4072-0.0156,41.1582-1.6982,44.6162-2.5918c0.1239-0.0327,0.2208-0.0715,0.3347-0.1064 c-8.9062,24.9736-16.1581,49.9233-16.3976,64.0508c-0.1475,8.4893,1.3804,14.0527,4.8096,17.5088 c4.3403,4.374,11.4287,4.8994,19.7769,4.8994c1.2954,0,2.6226-0.0127,3.9731-0.0254c7.041-0.0654,16.8496-0.4189,26.335-0.7607 c10.1689-0.3662,20.6846-0.7461,28.1587-0.7881c4.2819-0.0579,7.1047-1.3745,7.3376-3.3782 c3.69,1.7751,8.2173,2.7483,13.6755,2.9387c0.4951,0.0186,1.2583,0.0273,2.2642,0.0273c17.436-0.001,107.2544-2.584,117.3784-3.1504 c3.2098-0.1726,5.3986-0.583,6.6559-1.2561c-0.1925,0.4446-0.3918,0.8914-0.5778,1.3333c-0.7432,1.4111-0.2002,3.1621,1.209,3.9043 c0.4219,0.2227,0.8818,0.335,1.3447,0.335c0.2881,0,0.5762-0.043,0.8594-0.1309c0.7373-0.2285,1.3418-0.7305,1.6621-1.3457 c0.7178-1.1367,1.4043-2.2578,2.0889-3.4121l56.126,0.6787c2.8389,0.4189,3.6045-0.7402,3.8066-1.4688 C381.3401,340.1881,378.262,337.066,373.7405,335.2067z M359.3792,337.3522c-10.7588-0.2227-25.5645-0.3721-35.4287,0.1631 c1.0684-2.0322,1.8564-3.6777,2.5156-5.0537c1.5586-3.2539,2.0635-4.3076,3.4629-4.3076c0.6699,0,1.5449,0.2412,2.8398,0.5996 C341.6683,331.2252,350.596,334.111,359.3792,337.3522z M166.7615,340.0162h-0.0078c-0.0923,0-0.1846,0-0.2783,0 c-7.6133,0-18.4785,0.5049-28.9897,0.9932c-9.4155,0.4365-18.3091,0.8496-24.9082,0.9209 c-0.8804,0.0088-1.7363,0.0215-2.5679,0.0332c-7.4204,0.1055-12.7812,0.1865-15.7661-2.7812 c-2.2441-2.2314-3.2632-6.3193-3.2065-12.8662c0.2202-25.0254,17.9702-68.0449,32.2324-102.6123 c3.9826-9.6516,7.7441-18.7688,10.649-26.3833c0.5206,0.2568,1.1788,0.446,2.0346,0.5063 c4.8701,0.3447,30.2905,0.3057,42.5063,0.2852l1.4614-0.002c-8.6099,36.3027-16.4321,71.8213-18.2104,107.0957 c-0.5776,11.4932-1.2964,25.7979,6.3364,34.1094c0.2594,0.2825,0.5276,0.5557,0.8027,0.822 C168.2164,340.0673,167.5261,340.0233,166.7615,340.0162z M181.2606,222.694c1.5967-7.9775,3.2476-16.2275,4.7578-24.3135 c0.4092-2.2021,0.6641-4.126-0.3638-5.376c-1.0361-1.2607-2.9683-1.5098-6.4004-1.5459 c-6.5776-0.0723-23.3911,0.4316-36.8975,0.8359l-7.1387,0.2109c-0.9474,0.0278-1.8078,0.5229-2.3188,1.2305 c-0.169-0.1155-0.352-0.2188-0.5518-0.3047c-1.4521-0.627-3.498-0.2705-4.4258,1.6201l-0.562,1.1465l0.1685,0.0371 c-6.4485,13.0815-16.7826,37.2546-25.7792,61.9897c-0.5845-0.4321-1.3434-0.709-2.0748-0.7729 c-4.189-0.3867-12.436,0.0762-20.4121,0.5254c-5.8149,0.3281-11.3164,0.6328-14.6626,0.5801 c-1.8296-0.0303-3.5859-0.0215-5.272-0.0127c-16.5879,0.0859-25.7266,0.1279-31.4746-37.7236l-1.8325-12.2178 C19.6102,165.9108,12.9818,121.7653,8.411,77.9508c-0.2319-2.1963-0.4868-4.3789-0.7397-6.5381 C4.932,47.986,2.5662,27.7535,34.5594,23.9645C112.5789,14.7604,180.2337,9.276,235.6439,7.6656 c4.3496-0.127,8.3721-0.2822,12.0967-0.4268c39.6582-1.5371,44.7471-1.7295,54.375,47.3232 c4.2861,21.8828,8.1562,44.1709,11.8994,65.7246c4.8691,28.043,9.9043,57.04,15.8584,85.0967 c3.9453,18.6406,3.4912,29.8994-1.4727,36.5039c-6.458,8.5918-20.7959,9.6416-40.6396,11.0957 c-19.7021,1.4277-44.9795,2.376-69.4248,3.292c-15.6338,0.5859-30.4009,1.1387-42.9526,1.7891 c-0.3296,0.0166-0.6232,0.0898-0.9,0.1855C176.5388,246.2904,178.9167,234.4054,181.2606,222.694z M307.2318,337.3014 c-0.0801,0-0.1611,0-0.2422,0.001l-1.0098,0.0938v0.0098l-112.6025,2.3447c-10.0688,0.124-16.4736-1.6191-20.165-5.4619 c-0.8058-0.8386-1.4703-1.7856-2.0375-2.8218c19.2647,2.0713,126.5226-2.2058,149.723-3.4331 c-0.7061,1.5166-1.4248,3.0322-2.1436,4.5479c-1.1426,2.408-2.3047,4.8694-3.4124,7.3218 C314.5055,338.1967,310.7952,337.3014,307.2318,337.3014z"/></svg>`,`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 268.9163 285.106" xml:space="preserve"><path fill="${color}" d="M264.9344,91.9953c-9.3191-0.1343-9.4724,1.0161-9.2615-2.7129c0.6712-11.7737,0.9395-8.8494,10.6419-18.0918 c0.3643-0.345,0.3259-1.0928,0.4796-1.6489c-4.6691-1.189-10.3736,4.8416-11.7543,3.001c-7.6698-10.249-3.4993-7.0659-0.345-16.7302 c0.9202-2.8091-3.8829-2.6938-5.6662-0.7285c-2.8857,3.1829-4.765,5.6853-8.2164,3.7004c-2.4448-1.4187-9.5491,0.614-8.2163-7.3535 c0.4696-2.8281-4.8033-3.729-5.6279-0.46c-1.5244,6.0496-0.0383,7.2578-4.0939,8.5232 c-14.9852,4.6597-20.8144,29.606-13.0773-9.1846c1.4767-7.3726,2.8571-6.1072,8.9642-12.9045 c0.8438-0.9395-0.1917-2.646-1.3804-2.5693c-3.0584,0.2012-5.9155,3.7583-6.6826-1.438 c-1.9653-13.3362-9.0025-11.6008-5.4936-17.8037c6.5291-11.5435,3.7872-12.1379-5.8002-3.5571 c-2.7228,2.4255-3.279,1.4285-12.0609-0.4412c-4.3718-0.9299-3.0681-4.1511-3.4803-8.197c-0.3356-3.231-4.5924-3.1448-4.7841,0.23 c-0.4602,8.2642,1.3997,7.6509-5.1486,10.2202c-3.9212,1.5435-4.8511-0.3259-7.5262-3.0393 c-2.3295-2.3777-5.2059-0.6709-4.4771,2.6174c0.7285,3.2979,3.7679,3.6912-0.4602,7.0083 c-3.49,2.7324-10.9778,13.6909-12.2335,23.0483c-0.6906,5.1479-4.6691,7.4492-5.4745-3.1929 c-0.5559-7.3345,1.5627-6.3945,2.3585-7.7178c1.2368-2.0708,0.4029-3.7964-2.0516-3.6145 c-2.6365,0.1919-4.0268-0.9587-5.2826-3.1064c-2.4545-4.1704-1.0641-5.1963,0.6712-8.6091c1.0641-2.1094,0.067-4.4009-3.1734-2.4644 c-1.6299,0.9685-2.3011,3.6338-5.2252,2.4448c-12.5595-5.0811-4.6115-4.0647-7.6028-15.3491 c-0.6998-2.6558-6.644-2.6655-6.548,1.1121c0.2493,9.875,2.3105,9.8557-2.2819,10.5461 c-10.1053,1.5244-8.3986,7.0181-13.4992,3.0391c-6.2798-4.8989-9.8847-0.9587-5.321,5.0144c4.7937,6.2703-2.4158,5.436-4.88,18.6282 c-0.8052,4.3049-2.3585,3.2981-4.3814-0.4602c-0.2014-0.3643,1.3231-3.7485,1.4766-6.3372c0.0957-1.5532-1.812-3.8733-3.4036-1.074 c-0.163,0.2974-1.457,5.8772-4.5731,2.9148c-2.7805-2.6365,0.1343-16.5864-5.3786-14.947 c-2.3395,0.6907-2.3011,2.1477-2.7997,6.6633c-0.5656,5.1487-2.9337,3.3652-7.4492,3.8257 c-4.5924,0.4695-3.7776-2.5122-7.8714-8.1592c-2.2339-3.0869-5.8292-0.2109-5.6662,2.2053 c0.2493,3.5759,1.1888,4.2278,2.0326,5.6663c3.0487,5.2344-2.4735,6.0686-3.5473,8.2832c-3.3077,6.8359-8.8589,1.0933-9.9133,5.3979 c-1.2847,5.2246,4.5347,1.572,3.6526,8.8394c-0.9971,8.3123-0.6519,9.0503-4.3047,9.4912 c-4.5921,0.5562-1.5724,6.3948,0.4219,6.3948c5.3209-0.019,5.2443,3.7678,8.437,17.7463c2.8668,12.5403-0.4796,5.4744-9.5107,1.0356 c-5.7811-2.8381-3.2213-3.979-6.414-11.6777c-1.4571-3.5186-5.9538-1.7639-5.7812,1.4189c0.163,3.001,0.9971,4.3816,1.3614,5.9539 c0.4316,1.8601-3.25,3.9309-6.0494,1.6492c-2.7228-2.2148-5.2443-4.9185-7.7178-2.8955c-3.4037,2.7993,2.5598,6.9509,0.7478,9.1465 c-1.8216,2.1956-3.7199,4.4197-5.9538,6.1455c-2.3202,1.7832-4.765-3.3655-7.7371-0.4985 c-0.9012,0.8628-0.7479,2.0994,0.1917,2.9624c4.6884,4.3333,6.7976,1.563,5.5128,8.7148 c-0.6522,3.6338,0.4026,10.2395,0.5942,12.2334c0.4699,4.7844-4.4581,2.0903-3.9405,6.0691 c0.6329,4.8416,5.6279-0.2493,9.7793,7.6602c3.1638,6.0115,5.7429,6.7114,0.0574,9.2231c-3.8253,1.6873-4.1129,5.6279-0.0767,7.2192 c4.5061,1.7834,6.577-4.5154,11.1597,0.6711c0.1727,0.2014,10.7379,13.5759,10.8912,13.7676 c7.6508,9.6162,9.2998,10.6035,7.1042,14.5825c-4.3045,7.7849-1.6201,14.7742-1.4954,18.9351 c0.2396,7.7561-0.4412,26.8542,0.8052,32.4055c0.2109,0.9395-0.7479,4.4387-0.6712,6.5674 c0.7607,20.374,3.0329,28.9399,3.1394,32.5339c0.014,0.0693,0.0605,0.1396,0.0711,0.2087c0.2621,1.7375,0.7601,3.3438,1.2707,5.0095 c0.1559,0.2988,0.3046,0.6011,0.4708,0.8953c0.1574,0.2781,0.3347,0.5449,0.5085,0.8137c0.1954,0.1694,0.4789,0.4199,0.6472,0.6123 c0.7259,0.4163,1.4387,0.8513,2.1912,1.2244c0.0357,0.0178,0.0357,0.0127,0.0688,0.0286c0.4398,0.0085,0.8184,0.2468,0.6773,0.2571 c0.1545,0.0735,0.3242,0.157,0.4169,0.189c0.9468,0.3257,1.9097,0.6018,2.8796,0.8481c1.998,0.5073,4.0406,0.8176,6.0181,1.3953 c72.5146,0.9973,111.2438,2.0322,131.9529,3.136c1.5656-0.2954,3.1271-0.6479,4.6208-1.1555 c0.9828-0.5144,1.9284-1.0908,2.8328-1.7402c1.922-1.5337,3.7899-3.1885,5.3692-5.0503c0.5366-0.8127,1.0261-1.6523,1.4384-2.5295 c0.3143-0.7827,0.6407-1.5442,0.9837-2.2944c1.4521-11.8845,0.1738-14.6653,1.7526-29.1855 c1.0738-9.9133,2.3105-7.1523,1.5147-13.9495c-0.0383-0.3455,0.7765-42.3669,0.2876-43.968 c-1.6777-5.4744-3.6909-6.4524-4.688-7.3918c-2.0806-1.9463-1.1121-1.7832,11.543-16.5767c2.7324-3.1926,6.2797,2.186,12.1185-1.208 c1.6203-0.9395,1.7546-3.6621,0.2493-4.7456c-0.6326-0.4507-1.3997-0.7192-2.1093-1.0933 c-4.0075-2.0996-3.0583-2.6941-0.5176-6.4712c11.5624-17.1331,11.2171-18.5134,16.0398-18.571 c6.1264-0.0767,12.5978-4.4771,7.6698-6.3757c-2.9048-1.1311-6.548-1.1887-5.3976-3.7676 c7.6891-17.2478,7.1809-18.5903,10.7569-18.3215C262.8349,101.2856,275.3751,92.1584,264.9344,91.9953z M200.2675,251.5681 c0.0767,7.1426-0.4792,14.199-2.0037,21.2073c-1.3231,6.0305,0.115,5.158-100.6677,2.1284 c-44.7733-1.3423-44.8596,0.7097-45.6744-5.2058c-1.2657-9.1272-2.0039-17.1902-2.0902-17.3823 c-2.6555-6.3945,1.649-7.7847,16.0591-22.6643c2.3202-2.3967,4.6497-5.7429,6.644-7.4495 c7.2002-6.1648,18.3597,37.7073,33.9202,26.3269c12.6938-9.29,16.0588-15.0713,27.3335-26.4419 c3.7393-3.7678,3.7489,3.2214,17.2095,16.6533c3.8539,3.8445,5.3785,10.0283,11.639,6.5291 c6.5867-3.6816,17.4684-15.5796,21.6866-21.802c1.438-2.1282,3.231-3.1252,4.9183-0.9968 c16.9122,21.3796,10.8434,11.1404,11.0255,29.0977H200.2675z M201.9455,214.2348c-0.0577,0.6697-0.7441,1.2817-1.1473,1.9321 c-5.0102-3.3767-7.7824-10.9041-17.299-5.719c-9.9517,5.4167-14.9753,13.1826-15.5219,13.7288 c-8.9738,8.7727-5.7811,8.9165-12.9813-0.4026c-12.3008-15.9341-13.4609-15.7808-18.1683-17.4585 c-2.4448-0.8726-4.688-0.1152-5.9345,1.7446c-1.649,2.4644-4.0364,3.9407-6.0497,5.9155 c-22.7124,22.2812-22.7221,25.0234-25.2339,21.3989c-9.971-14.3809-18.3024-31.178-26.2407-27.7358 c-11.5624,5.0139-16.5193,14.9849-23.7002,20.9194c-3.5377,2.9336-2.6078-8.571-2.5215-43.3157 c0.0193-9.175,7.4111-6.2322,24.9466-9.0796c5.7618-0.9297,43.239-1.7639,43.4309-1.7639c44.1787,0,50.5735,2.9817,68.3965,4.7456 c8.2833,0.8247,10.0476,2.6558,16.4614,3.864c2.1189,0.4026,2.8284,0.9778,2.6941,3.1443 C202.5974,193.9094,203.9301,189.9306,201.9455,214.2348z M246.3539,94.9099c-2.3969,5.9731-3.5953,12.4062-6.8166,18.0918 c-15.5892,27.5635-8.389,15.2437-38.2057,58.1763c-4.88,7.0273-0.1919,3.3267-40.4492-2.3586 c-20.8621-2.9434-68.0129-3.0583-88.8944-0.2876c-28.9252,3.8347-20.0472,8.5999-28.5802-3.3174h-0.0287 c-21.236-29.644-26.1351-34.668-28.043-44.6196c-0.7382-3.8733-5.4362-8.1973,0.0573-19.9514 c4.1322-8.8301,16.8453-11.6008,25.8958-3.3174c17.4202,15.9536,14.6783,19.1079,20.1429,25.656 c1.3614,1.6204,4.8417,2.5981,4.6884,0.1726c-0.115-1.8599-14.966-51.3979-15.0236-51.5898 c-0.7862-2.4448,1.6203-4.5732-0.019-6.8167c-2.8764-3.9402-1.2464-17.4009,8.437-23.9299 c11.2171-7.5645,22.3002,3.7776,26.7487,16.96c9.7887,29.0596,6.1071,47.6877,15.5988,50.2668 c8.3027,2.2625-5.8292-38.7236-4.88-56.2207c1.8406-34.2075,34.2461-45.4248,40.8711-2.905 c1.553,9.9709-8.5903,7.8235-16.2124,41.2739c-6.1647,27.0459,1.3904,32.252,3.7103,23.9299 c3.2503-11.658,2.7997-44.8496,20.7375-56.5273c10.4886-6.8357,33.6232-8.3506,34.1311,28.5994 c0.2013,14.8315-7.6891,41.9448-5.9728,46.5371c4.3621,11.6584,14.0551-32.8848,14.3428-47.7356 c0.1533-8.1013-1.3997-14.0742-3.8829-20.2773c-2.4832-6.1648,6.3564,0.7576,12.5018-13.7097 c1.1121-2.6177-1.2847-4.2473-5.2632-1.8027c-8.6096,5.2922-8.2454,12.3101-11.1598,7.4878 c-3.9595-6.5479-10.2779-9.0503-17.2861-10.3923c-3.4706-0.6614-8.341,1.1121-7.1233-2.4832 c11.0255-32.5493,45.4252-33,46.8632-5.647c0.9588,18.2637-12.3965,56.5654-9.4724,62.0398 c5.3306,9.9709,15.7521-29.999,33.364-33.7476C243.7654,62.9262,252.6817,79.1386,246.3539,94.9099z M181.6488,39.1169 c-3.6144-0.8438-0.6998-9.3669,2.3777-8.1016C186.0494,31.8591,184.3715,39.7495,181.6488,39.1169z"/></svg>`][index]},reportIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 138.205 174.702"><path d="M133.959 24.22l-18.454-19.689C112.786 1.63 109.098 0 105.253 0H13.1C5.865 0 0 6.258 0 13.977v146.748c0 7.719 5.865 13.977 13.1 13.977h112.005c7.235 0 13.1-6.258 13.1-13.977V35.158C138.205 31.055 136.678 27.121 133.959 24.22zM110.481 138.596H26.823c-2.529 0-4.579-2.187-4.579-4.886s2.05-4.886 4.579-4.886h83.658c2.529 0 4.579 2.187 4.579 4.886S113.01 138.596 110.481 138.596zM110.481 106.992H26.823c-2.529 0-4.579-2.187-4.579-4.886s2.05-4.886 4.579-4.886h83.658c2.529 0 4.579 2.187 4.579 4.886S113.01 106.992 110.481 106.992zM110.481 75.388H26.823c-2.529 0-4.579-2.187-4.579-4.886s2.05-4.886 4.579-4.886h83.658c2.529 0 4.579 2.187 4.579 4.886S113.01 75.388 110.481 75.388z" fill="${color}"/></svg>`},interActionIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 446.1 446.1"><path class="st0" d="M446 437.3L414.4 193c-0.4-3.3-4.4-4.5-6.6-2.3L360 238.4c-0.7 0.7-1.8 0.7-2.5 0l-26.9-26.9 0 0L207.6 88.6c-0.7-0.7-0.7-1.8 0-2.5l47.7-47.7c2.3-2.3 1-6.2-2.3-6.6L8.8 0.1c-5-0.6-9.3 3.7-8.7 8.7l31.6 244.3c0.4 3.3 4.4 4.5 6.6 2.3L86 207.6c0.7-0.7 1.8-0.7 2.5 0l27 27 0 0 122.9 122.9c0.7 0.7 0.7 1.8 0 2.5l-47.7 47.7c-2.3 2.3-1 6.2 2.3 6.6L437.3 446C442.4 446.7 446.7 442.4 446 437.3z" fill="${color}"/></svg>`},okIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 545.677 545.677"><path class="st0" d="M272.839 0c-150.685 0-272.839 122.154-272.839 272.839s122.154 272.839 272.839 272.839 272.839-122.154 272.839-272.839S423.523 0 272.839 0zM433.643 193.855L241.566 405.315c-4.247 4.676-10.264 7.352-16.581 7.372 -0.024 0-0.049 0-0.074 0 -6.291 0-12.294-2.633-16.555-7.263L99.241 286.872c-8.416-9.143-7.825-23.377 1.318-31.792 9.143-8.416 23.377-7.826 31.792 1.318l92.45 100.446 175.532-193.246c8.355-9.198 22.584-9.881 31.783-1.526C441.315 170.426 441.999 184.656 433.643 193.855z" fill="${color}"/></svg>`},downloadIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 34.853 30.842"><path fill="${color}" d="M16.366 25.637c0.281 0.281 0.663 0.439 1.061 0.439s0.78-0.158 1.061-0.439L25.75 18.375c0.586-0.586 0.586-1.535 0-2.121s-1.535-0.586-2.121 0l-4.703 4.703V1.5c0-0.829-0.671-1.5-1.5-1.5s-1.5 0.671-1.5 1.5v19.456l-4.702-4.702c-0.586-0.586-1.535-0.586-2.121 0s-0.586 1.535 0 2.121L16.366 25.637z"/><path d="M25.45 27.83H9.403c-0.829 0-1.5 0.672-1.5 1.5s0.671 1.5 1.5 1.5h16.047c0.828 0 1.5-0.672 1.5-1.5S26.278 27.83 25.45 27.83z" fill="${color}"/></svg>`},escIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8.181 7.908"><path d="M7.893 6.239h-7.604C0.129 6.239 0 6.368 0 6.527v1.092c0 0.159 0.129 0.289 0.289 0.289h7.604c0.159 0 0.289-0.129 0.289-0.289V6.527C8.181 6.368 8.052 6.239 7.893 6.239z" fill="${AbstractNode.colorExtended.blue}"/><path d="M0.276 5.519h7.63c0.231 0 0.359-0.28 0.214-0.468l-3.763-4.917c-0.136-0.178-0.396-0.178-0.532 0l-3.764 4.917C-0.083 5.239 0.045 5.519 0.276 5.519z" fill="${color}"/></svg>`},checkIcon:function(color){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 59.044 59.04"><path d="M29.524 0c-16.307 0-29.524 13.217-29.524 29.52 0 16.306 13.217 29.52 29.524 29.52 16.303 0 29.52-13.214 29.52-29.52C59.044 13.217 45.826 0 29.524 0zM44.092 23.517L25.984 41.569c-0.515 0.515-1.188 0.772-1.865 0.772 -0.659 0-1.315-0.243-1.827-0.733l-8.164-7.79c-1.058-1.005-1.097-2.68-0.088-3.738 1.005-1.054 2.684-1.093 3.738-0.085l6.298 6.009 16.282-16.232c1.033-1.033 2.712-1.026 3.742 0.007C45.129 20.812 45.129 22.487 44.092 23.517z" fill="${color}"/></svg>`}};svgMaker=AbstractNode.svgMaker;static nodes={div:document.createElement("DIV"),img:document.createElement("IMG"),input:document.createElement("INPUT"),textarea:document.createElement("TEXTAREA"),a:document.createElement("A"),b:document.createElement("B"),label:document.createElement("LABEL"),iframe:document.createElement("IFRAME"),aside:document.createElement("ASIDE"),article:document.createElement("ARTICLE"),video:document.createElement("VIDEO"),source:document.createElement("SOURCE"),canvas:document.createElement("CANVAS"),figure:document.createElement("FIGURE"),code:document.createElement("CODE"),pre:document.createElement("PRE")};nodes=AbstractNode.nodes;static mediaCondition=CreateDom.mediaCondition;mediaCondition=AbstractNode.mediaCondition;static certificationToken="__abstract_cloud__certification_token__";static abstractCloudCertificationCollection="abstractCloudCertification";static certificationHistory=[];static mediaConditionToArray=(booleanMode=!1)=>{const{mediaCondition}=AbstractNode;let conditions,thisCondition,thisConditionBoo;conditions=[];for(let conditionArr of mediaCondition){if(!Array.isArray(conditionArr))throw new Error("invalid condition 0");if(2!==conditionArr.length)throw new Error("invalid condition 1");if(!conditionArr.every(n=>"number"==typeof n))throw new Error("invalid condition 2");thisCondition=`window.innerWidth <= ${String(conditionArr[0])} && window.innerWidth > ${String(conditionArr[1])}`,thisConditionBoo=!1,window.innerWidth<=conditionArr[0]&&window.innerWidth>conditionArr[1]&&(thisConditionBoo=!0),booleanMode?conditions.push(thisConditionBoo):conditions.push(thisCondition)}return conditions};static hangulToEnglish=(original,exeMode=!0)=>{const jamoMap={k4352:"g",k4353:"kk",k4354:"n",k4355:"d",k4356:"tt",k4357:"r",k4358:"m",k4359:"b",k4360:"pp",k4361:"s",k4362:"ss",k4363:"",k4364:"j",k4365:"jj",k4366:"ch",k4367:"k",k4368:"t",k4369:"p",k4370:"h",k4449:"a",k4450:"ae",k4451:"ya",k4452:"yae",k4453:"eo",k4454:"e",k4455:"yeo",k4456:"ye",k4457:"o",k4458:"wa",k4459:"wae",k4460:"oe",k4461:"yo",k4462:"oo",k4463:"wo",k4464:"we",k4465:"wi",k4466:"yu",k4467:"eu",k4468:"ui",k4469:"i",k4520:"k",k4521:"kk",k4522:"gs",k4523:"n",k4524:"nj",k4525:"nh",k4526:"d",k4527:"l",k4528:"lg",k4529:"lm",k4530:"lb",k4531:"ls",k4532:"lt",k4533:"lp",k4534:"lh",k4535:"m",k4536:"b",k4537:"bs",k4538:"s",k4539:"ss",k4540:"ng",k4541:"j",k4542:"ch",k4543:"k",k4544:"t",k4545:"p",k4546:"h"};let lastDotIndex,baseName,exe,normalizedBase,romanizedBase,lastCharWasMapped,thisKey;exeMode?(lastDotIndex=original.lastIndexOf("."),baseName=-1===lastDotIndex?original.replace(/[^\uAC00-\uD7A3\u1100-\u11FF\u3130-\u318F a-zA-Z0-9_]/gi,""):original.substring(0,lastDotIndex).replace(/[^\uAC00-\uD7A3\u1100-\u11FF\u3130-\u318F a-zA-Z0-9_]/gi,""),exe=-1===lastDotIndex?"":String(original.split(".").at(-1)).toLowerCase()):(baseName=original.replace(/[^\uAC00-\uD7A3\u1100-\u11FF\u3130-\u318F a-zA-Z0-9_]/gi,""),exe=""),baseName=baseName.replace(/\s/gi,""),normalizedBase=baseName.normalize("NFD"),romanizedBase="",lastCharWasMapped=!1;for(const char of normalizedBase)thisKey="k"+String(char.charCodeAt(0)),jamoMap[thisKey]?(romanizedBase+=jamoMap[thisKey],lastCharWasMapped=!0):char.match(/[a-zA-Z0-9]/)?(romanizedBase+=char,lastCharWasMapped=!1):char.match(/\s+/)?(romanizedBase+="_",lastCharWasMapped=!1):"-"!==char&&"_"!==char||(romanizedBase+=char,lastCharWasMapped=!1);return romanizedBase=romanizedBase.toLowerCase().trim(),romanizedBase=romanizedBase.replace(/[^a-z0-9\._-]/g,"_"),romanizedBase=romanizedBase.replace(/__+/g,"_"),romanizedBase=romanizedBase.replace(/^_+|_+$/g,""),exeMode&&""===romanizedBase&&original!==exe&&(romanizedBase="file"+AbstractNode.uniqueValue("hex")),exeMode||""!==exe?romanizedBase+"."+exe.trim().replace(/^\./,""):romanizedBase};static mediaReload=()=>{const{mediaCondition}=AbstractNode;let conditions;conditions=[];for(let conditionArr of mediaCondition)conditions.push(window.innerWidth<=conditionArr[0]&&window.innerWidth>conditionArr[1]);return conditions};static mediaQuery=code=>{const conditions=AbstractNode.mediaConditionToArray();let updateProto;updateProto="",updateProto+="AbstractNode.stacks.updateMiddleMedialQueryConditions",updateProto+=" = ",updateProto+="[";for(let i of conditions)updateProto+="(",updateProto+=i,updateProto+="),";return updateProto+="];\n",{conditions:updateProto,code:code=(code=code.replace(/[\n;]([^\n\;]*)\/\<\%\%\/,([^\%]+)\/\%\%\>\/[;]?/g,(match,p1,p2,offset,string)=>{let tempValue,tempArr,tempStr;if(tempValue=p1.replace(/[\n;]/g,"").replace(/\/\<\%\%\/,/g,"").trim(),tempArr=p2.replace(/\/\<\%\%\/,/g,"").replace(/\/\%\%\>\//g,"").trim().replace(/,$/,"").split(","),tempStr="",tempArr.length>conditions.length)throw new Error("parse error");for(let j=0;j<tempArr.length;j++)tempStr+=" } else if ("+conditions[j]+") { ",tempStr+="\n",tempStr+=tempValue,tempStr+=" ",tempStr+=tempArr[j],tempStr+=";\n";return tempStr="\n\n"+tempStr.slice(7)+" }\n\n",tempStr})).replace(/\/\<\&\&\/,([^\&]+)[, ]*\/\&\&\>\//g,(match,p1)=>{let tempArr;return tempArr=p1.replace(/\/\<\&\&\/,/g,"").replace(/[, ]*\/\&\&\>\//g,"").trim().replace(/,$/,"").split("|"),tempArr=tempArr.map(str=>str.trim()),`(${conditions[0]} ? ${tempArr[0]} : (${conditions[1]} ? ${tempArr[1]} : (${conditions[2]} ? ${tempArr[2]} : (${conditions[3]} ? ${tempArr[3]} : ${tempArr[4]}))))`})}};static mediaNumber=(bigDesktop,desktop,smallDesktop,tablet,mobile)=>{if("number"!=typeof bigDesktop)throw new Error("invalid big desktop value");if("number"!=typeof desktop)throw new Error("invalid normal desktop value");if("number"!=typeof smallDesktop)throw new Error("invalid small desktop value");if("number"!=typeof tablet)throw new Error("invalid tablet value");if("number"!=typeof mobile)throw new Error("invalid mobile value");const conditionMatrix=AbstractNode.mediaCondition;let finalValue;return finalValue=window.innerWidth<=conditionMatrix[0][0]&&window.innerWidth>conditionMatrix[0][1]?bigDesktop:window.innerWidth<=conditionMatrix[1][0]&&window.innerWidth>conditionMatrix[1][1]?desktop:window.innerWidth<=conditionMatrix[2][0]&&window.innerWidth>conditionMatrix[2][1]?smallDesktop:window.innerWidth<=conditionMatrix[3][0]&&window.innerWidth>conditionMatrix[3][1]?tablet:mobile,finalValue};static mediaString=(bigDesktop,desktop,smallDesktop,tablet,mobile)=>{if("string"!=typeof bigDesktop)throw new Error("invalid big desktop value");if("string"!=typeof desktop)throw new Error("invalid normal desktop value");if("string"!=typeof smallDesktop)throw new Error("invalid small desktop value");if("string"!=typeof tablet)throw new Error("invalid tablet value");if("string"!=typeof mobile)throw new Error("invalid mobile value");const conditionMatrix=AbstractNode.mediaCondition;let finalValue;return finalValue=window.innerWidth<=conditionMatrix[0][0]&&window.innerWidth>conditionMatrix[0][1]?bigDesktop:window.innerWidth<=conditionMatrix[1][0]&&window.innerWidth>conditionMatrix[1][1]?desktop:window.innerWidth<=conditionMatrix[2][0]&&window.innerWidth>conditionMatrix[2][1]?smallDesktop:window.innerWidth<=conditionMatrix[3][0]&&window.innerWidth>conditionMatrix[3][1]?tablet:mobile,finalValue};static mediaEa=()=>CreateDom.mediaEa();static colorParsing=str=>{if("string"==typeof str){let colorArr;if(str=str.trim(),/^\#/g.test(str)){if(str=str.trim().toLowerCase().replace(/^\#/g,"").trim(),/^\#/.test(str)&&7===str.length&&(str=str.slice(1)),6!==str.length&&""===str.replace(/[^0-9a-f]/gi,""))throw new Error("invaild input");colorArr=[str.slice(0,2),str.slice(2,4),str.slice(4)].map(s=>{let num;return num=0,/[a-z]/gi.test(s[1])?num+=s[1].charCodeAt(0)-97+10:num+=Number(s[1]),/[a-z]/gi.test(s[0])?num+=16*(s[0].charCodeAt(0)-97+10):num+=16*Number(s[0]),Number(num)})}else colorArr=str.replace(/[^0-9\.\-\,]/g,"").split(",").map(n=>Number(n)).slice(0,3);return colorArr}if(Array.isArray(str)){if(3!==str.length)throw new Error("invaild input");if("number"!=typeof str[0]||"number"!=typeof str[1]||"number"!=typeof str[2])throw new Error("invaild input");if(Number.isNaN(str[0])||Number.isNaN(str[1])||Number.isNaN(str[2]))throw new Error("invaild input");const convertNum=num=>{const convertStr=n=>n<10?String(n):String.fromCharCode(n+87);let first,second;return second=num%16,first=(num-second)/16,convertStr(first)+convertStr(second)};return"#"+str.map(convertNum).join("")}throw new Error("invaild input")};static colorToRGB=(hexColorString,opacity=1)=>{const colorArr=[(hexColorString=hexColorString.trim().toLowerCase().replace(/^\#/g,"").trim()).slice(0,2),hexColorString.slice(2,4),hexColorString.slice(4)].map(s=>{let num;return num=0,/[a-z]/gi.test(s[1])?num+=s[1].charCodeAt(0)-97+10:num+=Number(s[1]),/[a-z]/gi.test(s[0])?num+=16*(s[0].charCodeAt(0)-97+10):num+=16*Number(s[0]),Number(num)});return`rgba(${String(colorArr[0])}, ${String(colorArr[1])}, ${String(colorArr[2])}, ${String(opacity)})`};static ajaxPromise=async(data,url,option={})=>{const headers=new Headers({"Content-Type":"application/json"});if("object"==typeof option.headers&&null!==option.headers)for(const key in option.headers)headers.set(key,option.headers[key]);try{const specificTextAppTypes=new Set(["application/xhtml+xml","text/html","text/css","application/x-dtbncx+xml","application/xml","text/xml","application/json","application/javascript","application/ecmascript","text/plain","text/markdown","image/svg+xml","application/atom+xml"]),textExtensions=["txt","css","html","xhtml","xml","js","mjs","ts","opf","ncx","json","md","svg","log"];let response,thisMethod;thisMethod="post","object"==typeof option&&null!==option&&"string"==typeof option.method&&"get"===option.method?(thisMethod="get",response=await fetch(url)):response=await fetch(url,{method:"POST",headers,body:JSON.stringify(data)});const contentTypeHeader=response.headers.get("Content-Type")||"",mimeType=(Number(response.headers.get("Content-Length")),""===contentTypeHeader?"text/plain":contentTypeHeader.split(";")[0].trim().toLowerCase());if(!response.ok)throw{status:response.status,statusText:response.statusText,message:`HTTP error! Status: ${response.status}`};let dataToStore;return dataToStore=mimeType.startsWith("text/")||mimeType.endsWith("+xml")||mimeType.endsWith("+json")||specificTextAppTypes.has(mimeType)||"get"===thisMethod&&!/\?/gi.test(url)&&/\.[a-zA-Z0-9]+$/i.test(url)&&textExtensions.some(s=>new RegExp("."+s+"$","i").test(url))||"get"===thisMethod&&/\?/gi.test(url)&&/\.[a-zA-Z0-9]+$/i.test(url.split("?")[0])&&textExtensions.some(s=>new RegExp("."+s+"$","i").test(url.split("?")[0]))?await response.text():await response.blob(),dataToStore}catch(error){return error&&"object"==typeof error&&error.hasOwnProperty("status")?Promise.reject({status:error.status||0,statusText:error.statusText||"Unknown HTTP Error"}):error&&"object"==typeof error&&error.hasOwnProperty("error")?Promise.reject({status:0,statusText:error.error,details:error.details,response:error.response}):Promise.reject({status:0,statusText:error.message||"Fetch network failed"})}};static ajaxForm=(data,url,loadingDom=null)=>new Promise((resolve,reject)=>{const xhr=new XMLHttpRequest;xhr.open("POST",url),xhr.onload=function(){4===xhr.readyState&&(xhr.status>=200&&xhr.status<300?resolve(xhr.response):reject({status:xhr.status,statusText:xhr.statusText}))},xhr.onerror=function(){reject({status:xhr.status,statusText:xhr.statusText})},null!==loadingDom&&(xhr.upload.onprogress=function(e){void 0!==loadingDom.textContent&&null!==loadingDom.textContent&&(""!==loadingDom.textContent.trim()?0!==e.total&&e.lengthComputable&&(loadingDom.textContent=String(Math.round(e.loaded/e.total*100))+"%"):0!==e.total&&e.lengthComputable&&null!==loadingDom.firstChild&&(loadingDom.firstChild.textContent=String(Math.round(e.loaded/e.total*100))+"%"))}),xhr.send(data)});static ajaxFormStream=async(data,url,loadingDom=null,onChunk=chunk=>{},onEnd=()=>{})=>{try{const response=await fetch(url,{method:"POST",body:data});if(!response.ok||!response.body)throw new Error(`Request failed with status ${response.status}`);const decoder=new TextDecoder("utf-8"),contentLength=response.headers.get("Content-Length");let total,received,chunkText,last,percent;total=contentLength?parseInt(contentLength,10):0,received=0,chunkText="";for await(const chunk of response.body)received+=chunk.length,chunkText=decoder.decode(chunk,{stream:!0}),percent=Math.round(received/total*100),null!==loadingDom&&void 0!==loadingDom.textContent&&null!==loadingDom.textContent&&(""!==loadingDom.textContent.trim()?0!==total&&(loadingDom.textContent=String(percent)+"%"):0!==total&&null!==loadingDom.firstChild&&(loadingDom.firstChild.textContent=String(percent)+"%")),onChunk&&onChunk(chunkText);last=decoder.decode(),last&&onChunk(last),onEnd()}catch(e){throw console.log(e),new Error(e.message)}};static ajaxJson=async(data,url,option={})=>{const headers=new Headers({"Content-Type":"application/json"});if("object"==typeof option.headers&&null!==option.headers)for(const key in option.headers)headers.set(key,option.headers[key]);const fetchOptions={method:"POST",headers,body:JSON.stringify(data)};try{const response=await fetch(url,fetchOptions);if(!response.ok)throw{status:response.status,statusText:response.statusText,message:`HTTP error! Status: ${response.status}`};const jsonString=await response.text(),temp=jsonString.trim();if(""===temp)throw{error:"server must send json"};if("{"!==temp[0]&&"["!==temp[0])throw{error:"server must send json"};{JSON.parse(jsonString);const filtered=jsonString.replace(/(\"[0-9]+\-[0-9]+\-[0-9]+T[0-9]+\:[0-9]+\:[^Z]+Z\")/g,(match,p1)=>"new Date("+p1+")"),tempFunc=new Function("const obj = "+filtered+"; return obj;");return tempFunc()}}catch(error){return error&&"object"==typeof error&&error.hasOwnProperty("status")?Promise.reject({status:error.status||0,statusText:error.statusText||"Unknown HTTP Error"}):error&&"object"==typeof error&&error.hasOwnProperty("error")?Promise.reject({status:0,statusText:error.error,details:error.details,response:error.response}):Promise.reject({status:0,statusText:error.message||"Fetch network failed"})}};static equalJson=jsonString=>{const equal=jsonString=>{let filtered;"object"==typeof jsonString&&(jsonString=JSON.stringify(jsonString)),"string"!=typeof jsonString&&(jsonString=String(jsonString)),filtered=jsonString.replace(/(\"[0-9]+\-[0-9]+\-[0-9]+T[0-9]+\:[0-9]+\:[^Z]+Z\")/g,function(match,p1,offset,string){return"new Date("+p1+")"}),filtered=filtered.replace(/nbsp\;/g,"&nbsp;"),filtered=filtered.replace(/\&\&nbsp\;/g,"&nbsp;");const json=new Function("const obj = "+filtered+"; return obj;")();let temp,boo;if("object"==typeof json){if(Array.isArray(json)){for(let item of json)if("string"==typeof item&&/^[\{\[]/.test(item.trim())&&/[\}\]]$/.test(item.trim())){try{temp=JSON.parse(item),boo=!0}catch(e){boo=!1}boo&&(item=equal(item))}}else for(let i in json)if("string"==typeof json[i]&&/^[\{\[]/.test(json[i].trim())&&/[\}\]]$/.test(json[i].trim())){try{temp=JSON.parse(json[i]),boo=!0}catch(e){boo=!1}boo&&(json[i]=equal(json[i]))}return json}throw Error("invalid input")};return equal(jsonString)};static equalObject=jsonObject=>{if("object"==typeof jsonObject&&null!==jsonObject)return AbstractNode.equalJson(JSON.stringify(jsonObject));throw new Error("invalid input")};static networkSetString=()=>{let jsText;return jsText="",jsText+="const ajaxPromise = "+AbstractNode.ajaxPromise.toString().replace(/AbstractNode\./g,""),jsText+=";\n\n",jsText+="const ajaxJson = "+AbstractNode.ajaxJson.toString().replace(/AbstractNode\./g,""),jsText+=";\n\n",jsText+="const equalJson = "+AbstractNode.equalJson.toString().replace(/AbstractNode\./g,""),jsText+=";\n\n",jsText};static objectToFlatArray=obj=>{const innerFunc=o=>{const keys=Object.keys(o),resultArr=[];for(let k of keys)if("object"==typeof o[k]&&null!==o[k])if(Array.isArray(o[k]))for(let z of o[k])"object"==typeof z&&null!==z?resultArr.push(...innerFunc(z)):resultArr.push(z);else resultArr.push(...innerFunc(o[k]));else resultArr.push(o[k]);return resultArr};return innerFunc(obj)};static resolvePath=(...pathSegments)=>{const allParts=pathSegments.flatMap(segment=>segment.split("/"));let resolvedParts;resolvedParts=[];for(const part of allParts)".."===part?resolvedParts.pop():"."!==part&&""!==part&&resolvedParts.push(part);return"/"+resolvedParts.join("/")};static ajaxMultiple=matrix=>{let responseTong,number,workers,responseResult,intervalId,workerJsString,blob,blobUrl;return workerJsString=AbstractNode.networkSetString(),workerJsString+="\n\n",workerJsString+=String(`\n    const thisHost = "${window.location.protocol+"//"+window.location.host}";\n    const main = async function () {\n      try {\n        onmessage = async function (e) {\n          try {\n            if (e.data.data === undefined || e.data.url === undefined || e.data.number === undefined) {\n              throw new Error("invalid post message");\n            }\n            const { data, url, number } = equalJson(JSON.stringify(e.data));\n            let finalUrl;\n            if (/^\\//.test(url)) {\n              finalUrl = thisHost + url;\n            } else {\n              finalUrl = url;\n            }\n            const response = await ajaxJson(data, finalUrl, { equal: true }); \n            postMessage(JSON.stringify({ response, number }));\n          } catch (e) {\n            console.log(e);\n          }\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    }\n    main().catch((err) => { console.log(err); });\n    `).split("\n").map(s=>s.trim()).join("\n"),blob=new Blob([workerJsString],{type:"application/javascript"}),blobUrl=window.URL.createObjectURL(blob),responseResult=new Array(matrix.length).fill(0,0),workers=new Array(matrix.length).fill({}),responseTong=new Array(matrix.length).fill(0,0),new Promise((resolve,reject)=>{number=0;for(let[data,url]of matrix)workers[number]=new Worker(blobUrl),workers[number].addEventListener("message",e=>{const{response,number}=AbstractNode.equalJson(e.data);responseTong[number]=response,responseResult[number]=!0}),workers[number].addEventListener("error",e=>{reject(e)}),workers[number].postMessage({data,url,number}),number++;intervalId=setInterval(()=>{if(responseResult.every(boo=>!0===boo)){for(let i=0;i<matrix.length;i++)workers[i].terminate();clearInterval(intervalId),window.URL.revokeObjectURL(blobUrl),resolve(responseTong)}},1)})};static requestPromise=url=>new Promise((resolve,reject)=>{const xhr=new XMLHttpRequest;xhr.open("GET",url),xhr.onload=function(){4===xhr.readyState&&(xhr.status>=200&&xhr.status<300?resolve(xhr.response):reject({status:xhr.status,statusText:xhr.statusText}))},xhr.onerror=function(){reject({status:xhr.status,statusText:xhr.statusText})},xhr.send()});static setVisitDate=()=>(null===window.localStorage.getItem(AbstractNode.lastVisitToken)?window.localStorage.setItem(AbstractNode.lastVisitToken,JSON.stringify({date:new Date(2025,0,1)})):window.localStorage.setItem(AbstractNode.lastVisitToken,JSON.stringify({date:new Date})),!0);static lastVisitInspector=()=>{const lastInfoRaw=window.localStorage.getItem(AbstractNode.lastVisitToken);if(null!==lastInfoRaw){const now=new Date,visitInfo=AbstractNode.equalJson(lastInfoRaw);return 864e5<=Math.abs(visitInfo.date.getTime()-now.getTime())}return!0};static fileToMimetype=fileName=>{const extensionMimeTypeMap=AbstractNode.mimeTypes;if(!fileName||"string"!=typeof fileName)return"";const lastDotIndex=fileName.lastIndexOf(".");if(lastDotIndex<=0||lastDotIndex===fileName.length-1)return"";return extensionMimeTypeMap[fileName.substring(lastDotIndex+1).toLowerCase()]||"application/octet-stream"};static downloadBlob=(inputData,fileName,mimeType="application/octet-stream")=>{try{const removeTimeDelta=3e4;let finalBlobResult,blobUrl,aTag;return"string"!=typeof mimeType&&(mimeType="application/octet-stream"),finalBlobResult="string"==typeof inputData?new Blob([inputData],{type:mimeType}):inputData,console.log(finalBlobResult),blobUrl=URL.createObjectURL(finalBlobResult),aTag=document.createElement("a"),aTag.style.display="none",aTag.href=blobUrl,aTag.download=fileName,document.body.appendChild(aTag),aTag.click(),setTimeout(()=>{document.body.removeChild(aTag),URL.revokeObjectURL(blobUrl)},removeTimeDelta),finalBlobResult}catch(e){throw console.log(e),e}};static downloadFile=async(url,forceName=null,loadingDom=null)=>{try{const response=await fetch(url),contentTypeHeader=response.headers.get("Content-Type")||"",contentLength=Number(response.headers.get("Content-Length")),mimeType=""===contentTypeHeader?AbstractNode.fileToMimetype(url.split("/").at(-1)):contentTypeHeader.split(";")[0].trim().toLowerCase();if(!response.ok||null===response.body)throw{status:response.status,statusText:response.statusText,message:`HTTP error! Status: ${response.status}`};const reader=response.body.getReader(),chunks=[];let received,position,full,finalBlobResult,onProgress,filename;for(onProgress=percent=>{null!==loadingDom&&void 0!==loadingDom.textContent&&null!==loadingDom.textContent&&(loadingDom.textContent=String(Math.round(percent))+"%")},received=0;;){const{done,value}=await reader.read();if(done)break;if(value&&(chunks.push(value),received+=value.length,contentLength)){onProgress(received/contentLength*100)}}full=new Uint8Array(received),position=0;for(const chunk of chunks)full.set(chunk,position),position+=chunk.length;return finalBlobResult=new Blob([full],{type:mimeType}),filename="string"==typeof forceName?forceName:url.split("/").at(-1),AbstractNode.downloadBlob(finalBlobResult,filename,mimeType),finalBlobResult}catch(e){throw console.log(e),e}};static cryptoString=async(password,text)=>{try{const crypto=globalThis.crypto,iv=new Uint8Array(16),keyMaterial=await crypto.subtle.importKey("raw",(new TextEncoder).encode(password),{name:"PBKDF2"},!1,["deriveKey"]),key=await crypto.subtle.deriveKey({name:"PBKDF2",salt:(new TextEncoder).encode("salt"),iterations:1e5,hash:"SHA-256"},keyMaterial,{name:"AES-CBC",length:256},!0,["encrypt","decrypt"]),encrypted=await crypto.subtle.encrypt({name:"AES-CBC",iv},key,(new TextEncoder).encode(text));return Array.from(new Uint8Array(encrypted)).map(b=>b.toString(16).padStart(2,"0")).join("")}catch(e){throw console.log(e),new Error(e.message)}};static decryptoHash=async(password,hash)=>{try{const crypto=globalThis.crypto,iv=new Uint8Array(16),keyMaterial=await crypto.subtle.importKey("raw",(new TextEncoder).encode(password),{name:"PBKDF2"},!1,["deriveKey"]),key=await crypto.subtle.deriveKey({name:"PBKDF2",salt:(new TextEncoder).encode("salt"),iterations:1e5,hash:"SHA-256"},keyMaterial,{name:"AES-CBC",length:256},!0,["encrypt","decrypt"]),bytes=new Uint8Array(hash.match(/.{1,2}/g).map(b=>parseInt(b,16))),decrypted=await crypto.subtle.decrypt({name:"AES-CBC",iv},key,bytes);return(new TextDecoder).decode(decrypted)}catch(e){throw console.log(e),new Error(e.message)}};static createNode=mode=>"svg"===mode.mode?CreateDom.createSvg(mode):CreateDom.createDom(mode);static createNodes=arr=>{let result,pastNode;pastNode=null,result=[];for(let i=0;i<arr.length;i++)pastNode=CreateDom.createNode(arr[i]),result.push(pastNode);return result};static styleObjectToCss=(styleObject,className)=>{const extractTarget=(value,index,ignoreEa=!1)=>{if(new RegExp("^"+AbstractNode.mediaToken).test(String(value))){const thisList=String(value).replace(new RegExp(AbstractNode.mediaToken,"g"),"").split(":");return ignoreEa?thisList[index].replace(/[^0-9\-\.]/g,""):thisList[index]}return value},spreadStyle=(s,index)=>Object.entries(s).map(([key,value])=>{const cssKey=key.replace(/([A-Z])/g,"-$1").toLowerCase();return"font-weight"===cssKey||"z-index"===cssKey||"opacity"===cssKey||"line-height"===cssKey||"flex"===cssKey?`${cssKey}: ${extractTarget(String(value),index,!0)};`:`${cssKey}: ${extractTarget(String(value),index,!1)};`}).join(" ");let styleText;return styleText="@media (min-width: 1450px) {\n",styleText+="."+className+" {\n"+spreadStyle(styleObject,0)+"\n}\n",styleText+="}\n\n",styleText+="@media (min-width: 1100px) and (max-width: 1449px) {\n",styleText+="."+className+" {\n"+spreadStyle(styleObject,1)+"\n}\n",styleText+="}\n\n",styleText+="@media (min-width: 900px) and (max-width: 1099px) {\n",styleText+="."+className+" {\n"+spreadStyle(styleObject,2)+"\n}\n",styleText+="}\n\n",styleText+="@media (min-width: 760px) and (max-width: 899px) {\n",styleText+="."+className+" {\n"+spreadStyle(styleObject,3)+"\n}\n",styleText+="}\n\n",styleText+="@media (max-width: 759px) {\n",styleText+="."+className+" {\n"+spreadStyle(styleObject,4)+"\n}\n",styleText+="}\n\n",void 0!==globalThis.document&&(null===document.querySelector("style")?(document.querySelector("head")?.insertAdjacentElement("beforeend",document.createElement("style")),document.querySelector("style")?.insertAdjacentHTML("beforeend",styleText)):document.querySelector("style")?.insertAdjacentHTML("beforeend",styleText)),styleText};static createDom=domCommandObject=>CreateDom.createDom(domCommandObject);static createImageGroup=imageGroupCommandObject=>CreateDom.createImageGroup(imageGroupCommandObject);static createSvg=domCommandObject=>CreateDom.createSvg(domCommandObject);static createVideo=domCommandObject=>CreateDom.createVideo(domCommandObject);static createAbstract=domCommandObject=>(domCommandObject.mode="abstract-div",CreateDom.createDom(domCommandObject));static toOrigin=command=>CreateDom.toOrigin(command);static keyframeCallback=command=>CreateDom.keyframeCallback(command);static gradientCss=(fromColor,toColor,fromOpacity=1,toOpacity=1,deg=138)=>{const fromRgb=AbstractNode.colorParsing(fromColor),toRgb=AbstractNode.colorParsing(toColor);return`linear-gradient(${deg}deg, ${`rgba(${String(fromRgb[0])}, ${String(fromRgb[1])}, ${String(fromRgb[2])}, ${String(fromOpacity)})`} 0%, ${`rgba(${String(toRgb[0])}, ${String(toRgb[1])}, ${String(toRgb[2])}, ${String(toOpacity)})`} 100%)`};static getCharacterRects=rootNode=>{const allRects=[],textNodes=(rootNode=>{const textNodes=[],traverse=node=>{node.nodeType===Node.TEXT_NODE&&node.textContent?.trim()?textNodes.push(node):node.childNodes.forEach(traverse)};return traverse(rootNode),textNodes})(rootNode);for(const node of textNodes)for(let i=0;i<node.textContent.length;i++){const range=document.createRange();range.setStart(node,i),range.setEnd(node,i+1);const rect=range.getBoundingClientRect();allRects.push(rect)}return allRects};static promptPopup=(message,inputType="text",preValueOrInputLength="",color="mint",phoneMode=!1,streamMode=!0,fileTargetUrl="/generalFileUpload",mustNameInput=!0,generalCallback=async value=>"")=>{const{createAbstract,downloadFile,sleep,ajaxJson,createDom,grayLoading,selectByClass,dateToString,objectDeepCopy,selectByQuery,colorExtended,zeroAddition,withOut,setQueue,isMac,mediaNumber}=AbstractNode,ea=AbstractNode.mediaEa(),mobile="vw"===ea,desktop=!mobile;let whiteTongBase,whiteTong,grayBox,whiteWidth,paddingTop,paddingLeft,paddingBottom,size0,size1,marginLeft,bottomVisual,inputBoxHeight,input,inputIndent,inputBottomVisual,lineHeight,inputSize,questionWordVisualTopPlus,grayBoxBetween,specialBanEventMaker,mainColor,longBoxHeight,inputBoxHeightDate,questionMinusLeft,questionBetween,dateWordingBoxWidthSize,dateWordingValueBoxWidthSize0,dateWordingValueBoxWidthSize1,threeDateBoxBetween,matrixBetween,textareaVisualTop,submitButtonPadding,borderRadius,pastList,fileDescriptionSize,fileDescriptionWordSpacing,inputLength,fileFirstPromise,specialFilter,gap,fileWhiteTong,gridSetting,fileTitleDescription,fileTitleDescriptionVisualTop,fileInfo,valuesArr,listTarget,listItemInnerPadding;whiteWidth=mediaNumber(420,400,390,380,75),paddingTop=mediaNumber(20,19,18,17,3.5),paddingLeft=mediaNumber(23,22,21,20,3.9),paddingBottom=mediaNumber(23,22,21,20,4.1),size0=mediaNumber(14.5,14.5,14.5,14,3.1),size1=mediaNumber(16,16,15.5,15,3.4),inputSize=mediaNumber(15,15,14.5,14.5,3),fileTitleDescription=mediaNumber(14,14,13.5,13.5,2.7),marginLeft=mediaNumber(20,20,20,20,4.8),bottomVisual=mediaNumber(7,7,7,7,7),inputBoxHeight=mediaNumber(32,31,30,29,6.5),longBoxHeight=4*inputBoxHeight,inputBoxHeightDate=mediaNumber(29,28,27,26,6),inputIndent=mediaNumber(12,12,10,10,2.3),inputBottomVisual=0,lineHeight=1.5,questionWordVisualTopPlus=mediaNumber(1,1,.5,.5,0),grayBoxBetween=mediaNumber(6.5,6,5,5,1.2),questionMinusLeft=mediaNumber(-18.5,-18.5,-18,-17.5,-4.2),questionBetween=mediaNumber(18,16,16,16,3.6),dateWordingBoxWidthSize=mediaNumber(26,23,23,23,5),dateWordingValueBoxWidthSize0=mediaNumber(59,58,56,56,14),dateWordingValueBoxWidthSize1=mediaNumber(41,40,38,38,9),threeDateBoxBetween=mediaNumber(6,6,6,6,1),matrixBetween=mediaNumber(4,4,4,4,1),textareaVisualTop=mediaNumber(7,7,7,7,2),submitButtonPadding=mediaNumber(18,18,16,14,3.3),borderRadius=mediaNumber(12,12,10,9,2),mainColor=colorExtended[color]?colorExtended[color]:"black",fileDescriptionSize=mediaNumber(17,17,16,14.5,3.4),fileTitleDescriptionVisualTop=mediaNumber(-.3,-.3,-.3,-.3,-.1),fileDescriptionWordSpacing=mediaNumber(-6,-6,-5,-5,-1),gap=mediaNumber(4,3,3,2,.5),fileInfo=desktop?"클릭 또는 드래그하여 업로드..":"클릭하여 업로드",gridSetting="1fr","number"==typeof preValueOrInputLength&&(preValueOrInputLength>3&&preValueOrInputLength<=5?(gridSetting="1fr 1fr",whiteWidth=mediaNumber(820,800,800,780,94)):preValueOrInputLength>5&&(desktop?preValueOrInputLength%2==0?(gridSetting="1fr 1fr",whiteWidth=mediaNumber(820,800,800,780,94)):(gridSetting="1fr 1fr 1fr",whiteWidth=mediaNumber(1200,1080,880,770,94)):(gridSetting="1fr 1fr",whiteWidth=mediaNumber(820,800,800,780,94)))),specialFilter=s=>s.replace(/[\{\}\=\&<>\\|!\?\$\%\^\*\(\)\+]/gi,"").replace(/\n/gi,"").replace(/\t/gi,""),specialBanEventMaker=()=>e=>{const self=e.currentTarget;self.value=specialFilter(self.value)},pastList=selectByClass("promptAsideClassName");for(let dom of pastList)dom.remove();if(whiteTongBase=createAbstract({mode:"aside",mother:document.body,class:["promptAsideClassName"],event:{contextmenu:e=>{e.stopPropagation()},dblclick:e=>{e.stopPropagation()},drop:e=>{e.stopPropagation()},keyup:e=>{e.stopPropagation()},keydown:e=>{e.stopPropagation()}},style:{display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",top:String(0)+"vh",left:String(1)+"vw",width:String(98)+"vw",height:String(100)+"vh",background:"transparent",zIndex:900}}),whiteTong=createAbstract({mother:whiteTongBase,event:{click:e=>{e.stopPropagation()}},style:{display:"block",position:"relative",width:String(whiteWidth-2*paddingLeft)+ea,paddingTop:String(paddingTop)+ea,paddingBottom:String(paddingBottom)+ea,paddingLeft:String(paddingLeft)+ea,paddingRight:String(paddingLeft)+ea,borderRadius:String(5)+"px",boxShadow:"0px 3px 15px -9px "+colorExtended.shadow,background:colorExtended.white,animation:"fadeuporiginal 0.5s ease forwards"}}),createAbstract({mother:whiteTong,text:message,style:{position:"relative",marginLeft:String(marginLeft)+ea,fontFamily:"pretendard",fontSize:String(size1)+ea,fontWeight:String(700),color:colorExtended.black,lineHeight:String(1.5)},child:{text:"Q",style:{fontSize:String(size0)+ea,fontWeight:String(400),color:mainColor,position:"absolute",fontFamily:"altertypo",top:String(questionWordVisualTopPlus)+ea,left:String(questionMinusLeft)+ea,lineHeight:String(1.5)}}}),"text"===inputType){if(grayBox=createAbstract({mother:whiteTong,style:{left:String(marginLeft)+ea,width:withOut(marginLeft,ea),height:String(inputBoxHeight)+ea,borderRadius:String(5)+"px",background:colorExtended.gray1,marginTop:String(grayBoxBetween)+ea}}),input=createDom({mother:grayBox,mode:"input",attribute:{type:"text"},event:{keyup:specialBanEventMaker()},style:{position:"absolute",top:0,left:0,textIndent:String(inputIndent)+ea,width:withOut(2*inputIndent,ea),height:String(inputBoxHeight)+ea,background:"transparent",fontSize:String(inputSize)+ea,fontFamily:"pretendard",fontWeight:String(400),color:colorExtended.black,border:String(0),outline:String(0)}}),input.value="string"==typeof preValueOrInputLength?preValueOrInputLength:"",input.focus(),"string"==typeof preValueOrInputLength&&""!==input.value)try{input.select()}catch{}return new Promise((resolve,reject)=>{whiteTongBase.addEventListener("click",function(e){e.stopPropagation();const targets=[...document.querySelectorAll(".promptAsideClassName")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}resolve(null)}),input.addEventListener("keydown",function(e){if("Enter"===e.key){const finalValue=specialFilter(this.value.trim()),targets=[...document.querySelectorAll(".promptAsideClassName")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}resolve(finalValue)}else if("Escape"===e.key){const targets=[...document.querySelectorAll(".promptAsideClassName")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}resolve(null)}}),mobile?input.addEventListener("blur",function(e){if(null!==document.querySelector(".promptAsideClassName")){const finalValue=specialFilter(this.value.trim()),targets=[...document.querySelectorAll(".promptAsideClassName")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}resolve(""===finalValue?null:finalValue)}}):input.addEventListener("keydown",function(e){if("Tab"===e.key){e.preventDefault();const finalValue=specialFilter(this.value.trim()),targets=[...document.querySelectorAll(".promptAsideClassName")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}resolve(finalValue)}}),phoneMode&&(input.addEventListener("keyup",function(e){if(this.value=AbstractNode.autoHypenPhone(this.value).trim(),/0[0-9][0-9]\-[0-9][0-9][0-9][0-9]\-[0-9][0-9][0-9][0-9]/gi.test(this.value.trim())){const finalValue=this.value.trim(),targets=[...document.querySelectorAll(".promptAsideClassName")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}resolve(finalValue)}}),input.addEventListener("keydown",function(e){"-"===e.key&&e.preventDefault()}))})}if("file"===inputType)return inputLength="number"==typeof preValueOrInputLength?preValueOrInputLength:1,""===fileTargetUrl&&(streamMode=!1),whiteTongBase.addEventListener("dragstart",e=>{e.stopPropagation(),e.preventDefault()}),whiteTongBase.addEventListener("dragenter",e=>{e.stopPropagation(),e.preventDefault()}),whiteTongBase.addEventListener("dragleave",e=>{e.stopPropagation(),e.preventDefault()}),whiteTongBase.addEventListener("dragover",e=>{e.stopPropagation(),e.preventDefault()}),whiteTongBase.addEventListener("drop",e=>{e.stopPropagation(),e.preventDefault()}),whiteTong.addEventListener("dragstart",e=>{e.stopPropagation(),e.preventDefault()}),whiteTong.addEventListener("dragenter",e=>{e.stopPropagation(),e.preventDefault()}),whiteTong.addEventListener("dragleave",e=>{e.stopPropagation(),e.preventDefault()}),whiteTong.addEventListener("dragover",e=>{e.stopPropagation(),e.preventDefault()}),whiteTong.addEventListener("drop",e=>{e.stopPropagation(),e.preventDefault()}),fileWhiteTong=createAbstract({mother:whiteTong,style:{left:String(marginLeft)+ea,width:withOut(marginLeft,ea),borderRadius:String(5)+"px",marginTop:String(grayBoxBetween)+ea,display:"grid",gridTemplateColumns:gridSetting,placeContent:"center",gap}}),fileWhiteTong.addEventListener("dragstart",e=>{e.stopPropagation(),e.preventDefault()}),fileWhiteTong.addEventListener("dragenter",e=>{e.stopPropagation(),e.preventDefault()}),fileWhiteTong.addEventListener("dragleave",e=>{e.stopPropagation(),e.preventDefault()}),fileWhiteTong.addEventListener("dragover",e=>{e.stopPropagation(),e.preventDefault()}),fileWhiteTong.addEventListener("drop",e=>{e.stopPropagation(),e.preventDefault()}),fileFirstPromise=index=>{const tempGrayBoxClassName="tempGrayBoxClassName_"+AbstractNode.uniqueValue("hex"),tempFileInputClassName="tempFileInputClassName_"+AbstractNode.uniqueValue("hex");let fileChangeEvent,streamChunk,input,grayBox;return streamChunk="",input=createDom({mother:whiteTong,mode:"input",class:[tempFileInputClassName],attribute:{type:"file"},style:{display:"none",position:"absolute",top:0,left:0,border:String(0),outline:String(0)}}),grayBox=createAbstract({mother:fileWhiteTong,class:[tempGrayBoxClassName],attribute:{index:String(index)},style:{height:String(2*inputBoxHeight+gap)+ea,borderRadius:String(5)+"px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",overflow:"hidden"},children:[{style:{position:"absolute",top:0,left:0,width:withOut(0),height:withOut(0),display:"grid",gridTemplateColumns:"1fr",gridTemplateRows:mustNameInput?"1fr 1fr":"1fr",placeContent:"center",gap,opacity:0,transform:"translateY(10px)"},children:[{style:{borderRadius:String(5)+"px",background:mainColor,height:mustNameInput?inputBoxHeight:"",width:withOut(0),display:"flex",justifyContent:"center",alignItems:"center"},child:{text:"업로드 성공",style:{fontSize:mustNameInput?inputSize:fileDescriptionSize,fontFamily:"pretendard",fontWeight:400,color:colorExtended.white}}},{style:{height:inputBoxHeight,width:withOut(0),display:mustNameInput?"flex":"none",flexDirection:"row"},children:[{style:{height:inputBoxHeight,width:"auto",paddingLeft:0,paddingRight:2*gap,display:"inline-flex",justifyContent:"center",alignItems:"center",flexGrow:0},child:{text:"파일 명칭 : ",style:{fontSize:String(fileTitleDescription)+ea,fontFamily:"pretendard",fontWeight:String(700),color:colorExtended.black,position:"relative",top:fileTitleDescriptionVisualTop}}},{style:{borderRadius:String(5)+"px",background:colorExtended.gray1,height:inputBoxHeight,flexGrow:1,display:"inline-flex",justifyContent:"center",alignItems:"center",position:"relative"},child:{mode:"input",attribute:{type:"text"},event:{keyup:specialBanEventMaker()},style:{position:"absolute",top:0,left:0,textIndent:String(inputIndent)+ea,width:withOut(2*inputIndent,ea),height:String(inputBoxHeight)+ea,background:"transparent",fontSize:String(inputSize)+ea,fontFamily:"pretendard",fontWeight:String(400),color:colorExtended.black,border:String(0),outline:String(0)}}}]}]},{class:["prompt_fileDropAreaClassName"],event:{selectstart:e=>e.preventDefault(),dragenter$dragover$dragstart$dragleave:e=>{e.preventDefault()},click$contextmenu:e=>{e.preventDefault(),input.click()}},style:{width:withOut(0),height:withOut(0),background:colorExtended.gray1,cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center"},child:{event:{selectstart:e=>e.preventDefault()},text:fileInfo,style:{fontSize:fileDescriptionSize,wordSpacing:fileDescriptionWordSpacing,fontWeight:300,color:colorExtended.deactive}}}]}),new Promise((resolve,reject)=>{const grayBox=document.querySelector("."+tempGrayBoxClassName),input=document.querySelector("."+tempFileInputClassName),cancelEvent=e=>{e.stopPropagation(),setTimeout(()=>{resolve(null)},10)};streamChunk="",whiteTongBase.addEventListener("click",cancelEvent),fileChangeEvent=inputTarget=>async()=>{const fileList=inputTarget.files,formData=new FormData,rawFile=fileList[0],originalBlob=rawFile,callBackFileName=await generalCallback("fileName"),newFileName="string"==typeof callBackFileName&&""!==callBackFileName?callBackFileName:"s"+AbstractNode.uniqueValue("short").slice(0,6)+"_"+AbstractNode.hangulToEnglish(rawFile.name.replace(/[\\\/:\*\?"<>\| ]/gi,"_")),newFileOptions={type:rawFile.type,lastModified:rawFile.lastModified},targetFile=new File([originalBlob],newFileName,newFileOptions);formData.append("names",'[ "/test_'+AbstractNode.uniqueValue("hex")+'.xhtml" ]'),formData.append("file",targetFile);const loading=AbstractNode.grayLoading();streamChunk="";const onEndEvent=()=>{const finalChunkString=streamMode?streamChunk:targetFile.name,grayBox=document.querySelector("."+tempGrayBoxClassName);targetFile.name;whiteTongBase.removeEventListener("click",cancelEvent),loading.remove(),grayBox.lastChild.style.animation="fadedowndelay 0.3s ease forwards",grayBox.firstChild.style.animation="fadeupdelay 0.3s ease forwards",setTimeout(()=>{if(mustNameInput){const targets=[...grayBox.querySelectorAll(".prompt_fileDropAreaClassName")];for(let z=0;z<targets.length;z++)try{const targetInput=targets[z].previousElementSibling.querySelector("input");targets[z].previousElementSibling.style.animation="fadeupdelay 0.3s ease forwards",targets[z].previousElementSibling.firstChild.firstChild.textContent="업로드 성공",targetInput.focus(),targets[z].remove(),targetInput.addEventListener("keydown",function(e){if("Enter"===e.key){let finalValue;finalValue=specialFilter(this.value.trim()),""===finalValue&&(finalValue="file_"+AbstractNode.dateToString(new Date).replace(/[^0-9]/gi,"")),resolve(streamMode?JSON.stringify({title:finalValue,data:finalChunkString}):targetFile)}}),mobile?targetInput.addEventListener("blur",function(e){if(null!==document.querySelector(".promptAsideClassName")){let finalValue;finalValue=specialFilter(this.value.trim()),""===finalValue&&(finalValue="file_"+AbstractNode.dateToString(new Date).replace(/[^0-9]/gi,"")),resolve(streamMode?JSON.stringify({title:finalValue,data:finalChunkString}):targetFile)}}):(targetInput.addEventListener("blur",function(e){if(null!==document.querySelector(".promptAsideClassName")){let finalValue;finalValue=specialFilter(this.value.trim()),""===finalValue&&(finalValue="file_"+AbstractNode.dateToString(new Date).replace(/[^0-9]/gi,"")),resolve(streamMode?JSON.stringify({title:finalValue,data:finalChunkString}):targetFile)}}),targetInput.addEventListener("keydown",function(e){if("Tab"===e.key){let finalValue;e.preventDefault(),finalValue=specialFilter(this.value.trim()),""===finalValue&&(finalValue="file_"+AbstractNode.dateToString(new Date).replace(/[^0-9]/gi,"")),resolve(streamMode?JSON.stringify({title:finalValue,data:finalChunkString}):targetFile)}}))}catch{}}else{const targets=[...grayBox.querySelectorAll(".prompt_fileDropAreaClassName")];for(let z=0;z<targets.length;z++)try{const targetInput=targets[z].previousElementSibling.querySelector("input");targets[z].previousElementSibling.style.animation="fadeupdelay 0.3s ease forwards",targets[z].previousElementSibling.firstChild.firstChild.textContent="업로드 성공",targetInput.focus(),targets[z].remove()}catch{}resolve(streamMode?JSON.stringify({title:"index_"+String(index),data:finalChunkString}):targetFile)}},301)};streamMode?await AbstractNode.ajaxFormStream(formData,fileTargetUrl,null,chunk=>{streamChunk+=String(chunk)},onEndEvent):onEndEvent()},input.addEventListener("change",async e=>{if(null!==input.files&&input.files.length>0){const inspectResult=await generalCallback(input.files[0].name);if(!1===inspectResult||null===inspectResult)await AbstractNode.blackAlert("올바른 파일 형식으로 올려주세요!");else{const eventFunction=fileChangeEvent(input);await eventFunction()}}}),grayBox.lastChild.addEventListener("drop",async e=>{if(e.preventDefault(),e.dataTransfer.files.length>0){const files=e.dataTransfer.files,inspectResult=await generalCallback(files[0].name);if(!1===inspectResult||null===inspectResult)await AbstractNode.blackAlert("올바른 파일 형식으로 올려주세요!");else{input.files=files;const eventFunction=fileChangeEvent(input);await eventFunction()}}})})},"number"==typeof preValueOrInputLength?preValueOrInputLength<=1?(async()=>{let finalValue;finalValue=await fileFirstPromise(0);const targets=[...document.querySelectorAll(".promptAsideClassName")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}return"string"==typeof finalValue||null===finalValue?finalValue:[finalValue]})():(async()=>{let promiseArr,finalValue,finalStringValue,stringBoo,tempValue,finalBlobValue;stringBoo=!0,promiseArr=[];for(let i=0;i<preValueOrInputLength;i++)tempValue=fileFirstPromise(i),promiseArr.push(tempValue);if(finalValue=await Promise.all(promiseArr),finalValue.some(o=>o instanceof Blob)||finalValue.some(o=>o instanceof File)){finalBlobValue=[];for(let i=0;i<finalValue.length;i++)finalValue[i]instanceof Blob||finalValue[i]instanceof File?finalBlobValue.push(finalValue[i]):finalBlobValue.push(new Blob([]));const targets=[...document.querySelectorAll(".promptAsideClassName")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}return finalBlobValue}{finalStringValue=JSON.stringify(finalValue);const targets=[...document.querySelectorAll(".promptAsideClassName")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}return finalStringValue}})():(async()=>{let finalValue;finalValue=await fileFirstPromise(0);const targets=[...document.querySelectorAll(".promptAsideClassName")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}return"string"==typeof finalValue||null===finalValue?finalValue:[finalValue]})();if("select"===inputType){if("string"!=typeof preValueOrInputLength)throw new Error("invalid pre value must be => value$value$value");if(preValueOrInputLength=String(preValueOrInputLength),!/\$/gi.test(preValueOrInputLength))throw new Error("invalid pre value must be => value$value$value");if(valuesArr=preValueOrInputLength.split("$").map(s=>s.trim()).filter(s=>""!==s),0===valuesArr.length)throw new Error("invalid pre value must be => value$value$value");return grayBox=createAbstract({mother:whiteTong,style:{display:"grid",gridTemplateColumns:1===valuesArr.length?"1fr":valuesArr.length%2==0?"1fr 1fr":"1fr 1fr 1fr",placeContent:"center",gap,left:String(marginLeft)+ea,width:withOut(marginLeft,ea),borderRadius:String(5)+"px",marginTop:String(grayBoxBetween)+ea}}),new Promise((resolve,reject)=>{whiteTongBase.addEventListener("click",function(e){e.stopPropagation();const targets=[...document.querySelectorAll(".promptAsideClassName")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}resolve(null)});for(let v of valuesArr)createAbstract({mother:grayBox,attribute:{value:v},event:{click:async e=>{e.preventDefault();const self=e.currentTarget,value=String(self.getAttribute("value")),targets=[...document.querySelectorAll(".promptAsideClassName")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}resolve(value)},contextmenu:async e=>{e.preventDefault();const self=e.currentTarget,value=String(self.getAttribute("value"));await generalCallback(value)}},style:{height:inputBoxHeight,display:"inline-flex",justifyContent:"center",alignItems:"center",background:mainColor,borderRadius:String(5)+"px"},child:{text:v,style:{fontFamily:"pretendard",fontSize:inputSize,fontWeight:600,color:colorExtended.white}}})})}if("list"===inputType){if("string"!=typeof preValueOrInputLength)throw new Error("invalid pre value must be => json stringify arr");try{listTarget=JSON.parse(preValueOrInputLength)}catch{throw new Error("invalid pre value must be => json stringify arr")}if(!Array.isArray(listTarget))throw new Error("invalid pre value must be => json stringify arr");return listTarget.length>1&&(whiteWidth=mediaNumber(580,560,540,500,80)),listItemInnerPadding=mediaNumber(20,20,18,16,2),whiteTong.style.minWidth=whiteTong.style.width,whiteTong.style.width="",inputSize-=desktop?1.5:0,inputBoxHeight+=desktop?1:0,grayBox=createAbstract({mother:whiteTong,style:{marginLeft:String(marginLeft)+ea,maxHeight:6*inputBoxHeight+5*gap,borderRadius:String(5)+"px",marginTop:String(grayBoxBetween)+ea,overflow:"scroll"},child:{style:{display:"grid",gridTemplateColumns:1===listTarget.length?"1fr":"1fr 1fr",placeContent:"center",gap,width:withOut(0,ea)}}}),new Promise((resolve,reject)=>{whiteTongBase.addEventListener("click",function(e){e.stopPropagation();const targets=[...document.querySelectorAll(".promptAsideClassName")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}resolve(null)});const grayMother=grayBox.firstChild,reloadItems=listTarget=>{const originalListTarget=listTarget;AbstractNode.cleanChildren(grayMother);for(let v of listTarget)createAbstract({mother:grayBox.firstChild,attribute:{value:v.value},event:{click:async e=>{e.preventDefault();const self=e.currentTarget,value=String(self.getAttribute("value")),targets=[...document.querySelectorAll(".promptAsideClassName")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}resolve(value)},contextmenu:async e=>{e.preventDefault();const self=e.currentTarget,value=String(self.getAttribute("value")),reloadValue=await generalCallback(value);if("string"==typeof reloadValue&&""!==reloadValue){let listTarget;try{listTarget=JSON.parse(reloadValue),reloadItems(listTarget)}catch{reloadItems(originalListTarget)}}else reloadValue&&reloadItems(originalListTarget)}},style:{height:inputBoxHeight,display:"inline-flex",justifyContent:"center",alignItems:"center",background:mainColor,borderRadius:String(5)+"px",paddingLeft:listItemInnerPadding,paddingRight:listItemInnerPadding},child:{text:v.title,style:{fontFamily:"pretendard",fontSize:inputSize,fontWeight:600,color:colorExtended.white}}})};reloadItems(listTarget)})}throw new Error("invalid input type")};static colorPicker=(message,preValue="#000001")=>{const{createAbstract,downloadFile,sleep,ajaxJson,createDom,grayLoading,selectByClass,dateToString,objectDeepCopy,selectByQuery,colorExtended,zeroAddition,withOut,setQueue,isMac,mediaNumber}=AbstractNode,ea=AbstractNode.mediaEa(),colorPicker=new Coloris,desktop=!("vw"===ea);let whiteTongBase,whiteTong,grayBox,whiteWidth,paddingTop,paddingLeft,paddingBottom,size0,size1,marginLeft,bottomVisual,inputBoxHeight,inputIndent,inputBottomVisual,lineHeight,inputSize,questionWordVisualTopPlus,grayBoxBetween,mainColor,longBoxHeight,inputBoxHeightDate,questionMinusLeft,questionBetween,dateWordingBoxWidthSize,dateWordingValueBoxWidthSize0,dateWordingValueBoxWidthSize1,threeDateBoxBetween,matrixBetween,textareaVisualTop,submitButtonPadding,borderRadius,pastList,fileDescriptionSize,fileDescriptionWordSpacing,gap,gridSetting,fileTitleDescription,fileTitleDescriptionVisualTop,fileInfo;whiteWidth=mediaNumber(420,400,390,380,75),paddingTop=mediaNumber(20,19,18,17,3.5),paddingLeft=mediaNumber(23,22,21,20,3.9),paddingBottom=mediaNumber(23,22,21,20,4.1),size0=mediaNumber(14.5,14.5,14.5,14,3.1),size1=mediaNumber(16,16,15.5,15,3.4),inputSize=mediaNumber(15,15,14.5,14.5,3),fileTitleDescription=mediaNumber(14,14,13.5,13.5,2.7),marginLeft=mediaNumber(20,20,20,20,4.8),bottomVisual=mediaNumber(7,7,7,7,7),inputBoxHeight=mediaNumber(32,31,30,29,6.5),longBoxHeight=4*inputBoxHeight,inputBoxHeightDate=mediaNumber(29,28,27,26,6),inputIndent=mediaNumber(12,12,10,10,2.3),inputBottomVisual=0,lineHeight=1.5,questionWordVisualTopPlus=mediaNumber(1,1,.5,.5,0),grayBoxBetween=mediaNumber(6.5,6,5,5,1.2),questionMinusLeft=mediaNumber(-18.5,-18.5,-18,-17.5,-4.2),questionBetween=mediaNumber(18,16,16,16,3.6),dateWordingBoxWidthSize=mediaNumber(26,23,23,23,5),dateWordingValueBoxWidthSize0=mediaNumber(59,58,56,56,14),dateWordingValueBoxWidthSize1=mediaNumber(41,40,38,38,9),threeDateBoxBetween=mediaNumber(6,6,6,6,1),matrixBetween=mediaNumber(4,4,4,4,1),textareaVisualTop=mediaNumber(7,7,7,7,2),submitButtonPadding=mediaNumber(18,18,16,14,3.3),borderRadius=mediaNumber(12,12,10,9,2),mainColor="black",fileDescriptionSize=mediaNumber(17,17,16,14.5,3.4),fileTitleDescriptionVisualTop=mediaNumber(-.3,-.3,-.3,-.3,-.1),fileDescriptionWordSpacing=mediaNumber(-6,-6,-5,-5,-1),gap=mediaNumber(4,3,3,2,.5),fileInfo=desktop?"클릭 또는 드래그하여 업로드..":"클릭하여 업로드",gridSetting="1fr",pastList=selectByClass("colorPickerAsideClassName");for(let dom of pastList)dom.remove();return whiteTongBase=createAbstract({mode:"aside",mother:document.body,class:["colorPickerAsideClassName"],event:{contextmenu:e=>{e.stopPropagation()},dblclick:e=>{e.stopPropagation()},drop:e=>{e.stopPropagation()},keyup:e=>{e.stopPropagation()},keydown:e=>{e.stopPropagation()}},style:{display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",top:String(0)+"vh",left:String(1)+"vw",width:String(98)+"vw",height:String(100)+"vh",background:"transparent",zIndex:900}}),whiteTong=createAbstract({mother:whiteTongBase,event:{click:e=>{e.stopPropagation()}},style:{display:"block",position:"relative",width:String(whiteWidth-2*paddingLeft)+ea,paddingTop:String(paddingTop)+ea,paddingBottom:String(paddingBottom)+ea,paddingLeft:String(paddingLeft)+ea,paddingRight:String(paddingLeft)+ea,borderRadius:String(5)+"px",boxShadow:"0px 3px 15px -9px "+colorExtended.shadow,background:colorExtended.white,animation:"fadeuporiginal 0.5s ease forwards"}}),createAbstract({mother:whiteTong,text:message,style:{position:"relative",marginLeft:String(marginLeft)+ea,fontFamily:"pretendard",fontSize:String(size1)+ea,fontWeight:String(700),color:colorExtended.black,lineHeight:String(1.5)},child:{text:"Q",style:{fontSize:String(size0)+ea,fontWeight:String(400),color:"black",position:"absolute",fontFamily:"altertypo",top:String(questionWordVisualTopPlus)+ea,left:String(questionMinusLeft)+ea,lineHeight:String(1.5)}}}),grayBox=createAbstract({mother:whiteTong,style:{left:0,width:withOut(0),marginTop:grayBoxBetween,overflow:"hidden"}}),new Promise((resolve,reject)=>{whiteTongBase.addEventListener("click",function(e){e.stopPropagation(),whiteTongBase.style.animation="fadedown 0.3s ease forwards",setTimeout(()=>{const targets=[...document.querySelectorAll(".colorPickerAsideClassName")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}resolve(null)},300)}),colorPicker.injectionPicker(grayBox,preValue,{}).then(result=>{whiteTongBase.style.animation="fadedown 0.3s ease forwards",setTimeout(()=>{const targets=[...document.querySelectorAll(".colorPickerAsideClassName")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}resolve(result)},300)})})};static contextmenuPopup=(event,callback=async(popupBase,numbersDictionay)=>"",smallMode=!1)=>{event.preventDefault();const{createAbstract,downloadFile,sleep,ajaxJson,gradientCss,pixelUnit,createDom,grayLoading,selectByClass,dateToString,objectDeepCopy,selectByQuery,colorExtended,zeroAddition,withOut,setQueue,isMac,mediaNumber}=AbstractNode,ea=AbstractNode.mediaEa(),visualHeight=mediaNumber(400,400,360,320,300),position={x:event.pageX,y:event.pageY},desktop=!("vw"===ea);let cancelBack,contextPopup,removeEvent,boxWidth,overflow,boxPadding,numbersDictionay,gap,buttonHeight,groupHeight,buttonSize,groupSize,groupBetween,groupWeight,boldVisualTop,boldVisualRight,paddingTop,buttonWeight;return gap=mediaNumber(2,2,2,2,.5),buttonHeight=mediaNumber(29,29,29,29,5.6),groupHeight=mediaNumber(28,28,28,28,5.1),buttonSize=mediaNumber(12.5,12.5,12.5,12.5,2.8),groupSize=mediaNumber(12.5,12.5,12.5,12.5,2.8),groupBetween=mediaNumber(1,1,1,1,.1),buttonWeight=600,groupWeight=600,boldVisualTop=mediaNumber(-1,-1,-1,-1,-.1),boldVisualRight=mediaNumber(2,2,2,2,-.5),paddingTop=mediaNumber(2,2.5,2.5,3.5,1),boxWidth=mediaNumber(320,320,320,320,58),smallMode&&(boxWidth=mediaNumber(200,200,200,200,42)),boxPadding=mediaNumber(12,12,12,12,2.4),overflow=position.x+(desktop?boxWidth:boxWidth/100*window.innerWidth)>window.innerWidth,numbersDictionay={gap,buttonHeight,groupHeight,buttonSize,groupSize,groupBetween,buttonWeight:600,groupWeight:600,boldVisualTop,boldVisualRight,paddingTop,boxWidth,boxPadding},new Promise((resolve,reject)=>{removeEvent=e=>{e.preventDefault();selectByClass("contextmenuPromptAsideClassName").forEach(d=>d.remove()),resolve("")},cancelBack=createAbstract({mother:document.body,class:["contextmenuPromptAsideClassName"],event:{click:removeEvent,dblclick:removeEvent,contextmenu:removeEvent},style:{zIndex:900,top:0,left:0,width:String(100)+"vw",height:String(100)+"vh",position:"fixed",background:colorExtended.transparent}}),contextPopup=createAbstract({mother:document.body,class:["contextmenuPromptAsideClassName"],style:{zIndex:900,width:boxWidth,background:gradientCss(colorExtended.white,colorExtended.white,.7,.5),"backdrop-filter":"blur(2px)",animation:"fadeuporiginal 0.3s ease forwards",position:"absolute",left:pixelUnit(overflow?position.x-(desktop?boxWidth:boxWidth/100*window.innerWidth):position.x),top:window.innerHeight>=visualHeight+position.y?pixelUnit(position.y):"",bottom:window.innerHeight>=visualHeight+position.y?"":pixelUnit(window.innerHeight-position.y),boxShadow:"0px 3px 22px -12px "+colorExtended.shadow,borderRadius:desktop?10:2,justifyContent:"center",alignItems:"center",padding:boxPadding,border:0}}),callback(contextPopup,numbersDictionay).then(result=>{selectByClass("contextmenuPromptAsideClassName").forEach(d=>d.remove()),resolve(result)}).catch(e=>{reject(e)})})};static setDomColor=(target,color)=>{target.style.color=color,target.style["-webkit-text-fill-color"]=color};static currentCssList=(documentOrShadow=document)=>{const styleSheetList=documentOrShadow.styleSheets;let result;result=[];for(let i=0;i<styleSheetList.length;i++){const sheet=styleSheetList[i];if(sheet.ownerNode instanceof HTMLStyleElement)try{if(sheet.cssRules){const cssRulesArray=Array.from(sheet.cssRules).map(rule=>rule.cssText.trim());result=result.concat(cssRulesArray)}}catch{}}return result=[...new Set(result)],result};static domCssDictionary=(dom,documentOrShadow,cascadingMode=!1)=>{const{objectDeepCopy}=AbstractNode,styleSheetList=documentOrShadow.styleSheets,exceptionProperty=["--pseudo-opacity","--pseudo-padding-bottom","--pseudo-margin-bottom"],thisSelf=dom,shallowShell=thisSelf.cloneNode(!1),styleList=[],mediaBlockMatrix=[];let thisBlockOutHtml,thisClassName,thisDomId,thisNodeName,totalDictionaryArr,styleDictionary,thisStyleString,thisStyleArr,thisSelector,inlineStyleString,inlineStyleArr,middleDictionary,middleMap,cssDictionary,finalDictionaryArr,mediaDictionaryArr,onlyMediaDictionaryArr,result,nonMediaStyle,pureMediaStyle,mediaStyle,pastType,thisOnlyClassName,final,finalBefore,selectorSet,thisPureSelector,thisPureStyleString,thisPureStyleArr,pureStyleDictionary,onlyMediaTargetSelectors,shallowShellOuterHtml,thisClassList,pastSelector="";thisBlockOutHtml="",thisClassName=[],thisOnlyClassName=[],thisDomId="",thisNodeName="";const injectionCss=(thisBlockText,mediaMode=!1)=>{let mediaBoo,selectorsArr,mediaBlockArr,selectors="",rawText="",mediaCondition="";if(mediaBoo=/^@media/gis.test(thisBlockText),mediaMode&&(mediaBoo=!1),mediaBoo)mediaBlockArr=[],mediaCondition="",rawText=thisBlockText.replace(/^@media\s+([^@]+?)\s*\{\s*/gis,(match,p1)=>(mediaCondition=p1.trim(),"")).replace(/\}\s*$/gis,""),rawText.replace(/\s*([^\{]+\{[^\}]*\})/gis,(match,p1)=>(mediaBlockArr.push(p1.trim()),match)),mediaBlockMatrix.push(mediaBlockArr.map(k=>"@media "+mediaCondition+" {\n"+k+"\n\n}"));else{rawText=thisBlockText.replace(/^@media\s+([^@]+?)\s*\{\s*/gis,"").replace(/\}\s*$/gis,""),selectors="",rawText.replace(/^\s*([^\{]+)\s*\{/gis,(match,p1)=>(selectors=p1.trim(),match)),selectorsArr=selectors.split(",").map(s=>s.trim()).filter(s=>""!==s),(selectorsArr.includes(thisSelf.nodeName.toLowerCase())||selectorsArr.some(a=>new RegExp(thisSelf.nodeName.toLowerCase()+"(::?[^:\\s]*)?$").test(a))||selectorsArr.some(a=>new RegExp("body\\s+"+thisSelf.nodeName.toLowerCase()+" ","gis").test(a))||selectorsArr.some(a=>new RegExp("html\\s+"+thisSelf.nodeName.toLowerCase()+" ","gis").test(a))||selectorsArr.some(a=>new RegExp("body\\s+>\\s+"+thisSelf.nodeName.toLowerCase()+" ","gis").test(a)))&&styleList.push(thisBlockText);for(let c of thisClassName)/shadow__doms__tempclassname/gi.test(c)||(selectorsArr.includes(c)||selectorsArr.includes(thisSelf.nodeName.toLowerCase()+c)||selectorsArr.some(a=>new RegExp(c+"(::?[^:\\s]*)?$").test(a))||selectorsArr.some(a=>new RegExp("body\\s+"+c,"gis").test(a))||selectorsArr.some(a=>new RegExp("html\\s+"+c,"gis").test(a))||selectorsArr.some(a=>new RegExp("body\\s+>\\s+"+c,"gis").test(a))||selectorsArr.some(a=>new RegExp("body\\s+"+thisSelf.nodeName.toLowerCase()+c,"gis").test(a))||selectorsArr.some(a=>new RegExp("html\\s+"+thisSelf.nodeName.toLowerCase()+c,"gis").test(a))||selectorsArr.some(a=>new RegExp("body\\s+>\\s+"+thisSelf.nodeName.toLowerCase()+c,"gis").test(a)))&&styleList.push(thisBlockText)}};thisBlockOutHtml=thisSelf.outerHTML,shallowShellOuterHtml=shallowShell.outerHTML,thisClassName=[...thisSelf.classList].map(c=>"."+c),"string"==typeof thisSelf.id&&""!==thisSelf.id&&(thisDomId="#"+thisSelf.id,thisClassName.push("#"+thisSelf.id)),thisNodeName=thisSelf.nodeName.toLowerCase(),thisClassList=thisClassName.filter(s=>/^\./gi.test(s));for(let i=0;i<styleSheetList.length;i++){const sheet=styleSheetList[i];if(sheet.ownerNode instanceof HTMLStyleElement)try{if(sheet.cssRules){const cssRulesArray=Array.from(sheet.cssRules).map(rule=>rule.cssText.trim());cssRulesArray.filter(s=>new RegExp(thisSelf.nodeName.toLowerCase(),"gi").test(s)).forEach(s=>{injectionCss(s,!1)});for(let c of thisClassName)cssRulesArray.filter(s=>new RegExp(c,"g").test(s)).forEach(s=>{injectionCss(s,!1)})}}catch{}}for(let arr of mediaBlockMatrix)for(let s of arr)injectionCss(s.trim(),!0);nonMediaStyle=[...new Set(styleList.filter(s=>!/^@/.test(s.trim())))],pureMediaStyle=[...new Set(styleList.filter(s=>/^@/.test(s.trim())))],totalDictionaryArr=[];for(let styleBlock of nonMediaStyle){styleDictionary={},thisStyleString="",thisSelector="",styleBlock.replace(/^\s*([^\{]+)\s*\{([^\}]*)\}\s*$/gis,(match,p1,p2)=>(thisSelector=p1,thisStyleString=p2,match)),thisStyleArr=thisStyleString.split(";").map(s=>s.trim()).filter(s=>""!==s);for(let s of thisStyleArr){const[p,v]=s.split(":").map(k=>k.trim());styleDictionary[p.trim()]=v.trim()}totalDictionaryArr.push({selector:thisSelector.trim(),style:styleDictionary})}onlyMediaTargetSelectors=[];for(let pureMediaString of pureMediaStyle)if(pureStyleDictionary={},thisPureSelector="",thisPureStyleString="",pureMediaString=pureMediaString.trim().replace(/^@media\s+.+?\s*\{/gis,"").replace(/\}$/gis,""),pureMediaString.replace(/^\s*([^\{]+)\s*\{([^\}]*)\}\s*$/gis,(match,p1,p2)=>(thisPureSelector=p1.trim(),thisPureStyleString=p2,match)),""!==thisPureSelector){thisPureStyleArr=thisPureStyleString.split(";").map(s=>s.trim()).filter(s=>""!==s);for(let s of thisPureStyleArr){const[p,v]=s.split(":").map(k=>k.trim());pureStyleDictionary[p.trim()]=v.trim()}totalDictionaryArr.map(s=>s.selector).includes(thisPureSelector)||(totalDictionaryArr.push({selector:thisPureSelector,style:pureStyleDictionary}),onlyMediaTargetSelectors.push(thisPureSelector))}middleDictionary={};for(let{selector,style}of totalDictionaryArr)for(let key in style)middleDictionary[key]={selector,value:style[key]};inlineStyleString="",(/style\s*\=\s*["][^"]*["]/.test(shallowShellOuterHtml)||/style\s*\=\s*['][^']*[']/.test(shallowShellOuterHtml))&&thisBlockOutHtml.replace(/style\s*\=\s*["]([^"]*)["]/,(match,p1)=>(inlineStyleString=p1,match)).replace(/style\s*\=\s*[']([^']*)[']/,(match,p1)=>(inlineStyleString=p1,match)),/^\s*[^\{]+\{/gis.test(inlineStyleString)&&(inlineStyleString=inlineStyleString.replace(/^\s*[^\{]+\{/gis,"")),/^\s*;/gis.test(inlineStyleString)&&(inlineStyleString=inlineStyleString.replace(/^\s*;/gis,"")),inlineStyleArr=inlineStyleString.split(";").map(s=>s.trim()).filter(s=>""!==s);for(let s of inlineStyleArr){const[p,v]=s.split(":").map(k=>k.trim());try{middleDictionary[p.trim()]={selector:"inline",value:v.trim()}}catch{}}middleMap=new Map;const filterFunc=s=>{const sArr=s.trim().split(",").map(k=>k.trim()).filter(k=>""!==k);let boo;if(boo=!1,thisClassName.includes(s)||thisNodeName.toLowerCase().trim()===s.toLowerCase().trim()||""!==thisDomId&&thisDomId===s)return!0;if(sArr.length>0){for(let selector of thisClassName)sArr.some(k=>new RegExp(selector+"(::?[^:\\s]*)?$","g").test(k))&&(boo=!0);sArr.some(k=>new RegExp(thisNodeName.toLowerCase().trim()+"(::?[^:\\s]*)?$","g").test(k))&&(boo=!0)}return boo},injectionFinalDictionary=(callback,type)=>{for(let key in middleDictionary){callback(middleDictionary[key].selector.split(",").map(s=>s.trim()).filter(filterFunc))&&(middleDictionary[key].type=type,middleMap.set(key,middleDictionary[key]))}};injectionFinalDictionary(selectors=>0===selectors.length,"inline"),injectionFinalDictionary(selectors=>selectors.length>0&&new RegExp(thisNodeName+"(::?[^:\\s]*)?$","i").test(selectors[0]),"tag"),injectionFinalDictionary(selectors=>selectors.length>0&&thisClassList.map(s=>new RegExp(s.replace(/\./g,"\\.")+"(::?[^:\\s]*)?$")).some(r=>r.test(selectors[0])),"class"),""!==thisDomId&&injectionFinalDictionary(selectors=>selectors.length>0&&/\#[^\#\s:]+(::?[^:\s]*)?$/i.test(selectors[0]),"id");const rawOriginal=totalDictionaryArr;if(!cascadingMode)for(let originalCss of rawOriginal){const propertyArr=Object.keys(originalCss.style);for(let property of propertyArr)if(!exceptionProperty.includes(property.toLowerCase().trim())){const cascadingObject=middleMap.get(property),cascadingFinalSelector=cascadingObject.selector,thisSelector=originalCss.selector;try{if(!/^\[/gi.test(cascadingFinalSelector))throw new Error("no array");const selectorArr=JSON.parse(cascadingFinalSelector);let thisIsNewOne;if(thisIsNewOne=selectorArr.every(cascadingFinalSelector=>{const a0Arr=cascadingFinalSelector.split(",").map(s=>s.trim()),a1Arr=thisSelector.split(",").map(s=>s.trim());return a0Arr.sort(),a1Arr.sort(),cascadingFinalSelector!==thisSelector&&a0Arr.join(",")!==a1Arr.join(",")}),thisIsNewOne){selectorArr.push(thisSelector),cascadingObject.selector=JSON.stringify(selectorArr);const copied=objectDeepCopy(cascadingObject);"string"!=typeof copied.selector&&(copied.selector=JSON.stringify(copied.selector)),middleMap.set(property,copied)}}catch{const a0Arr=cascadingFinalSelector.split(",").map(s=>s.trim()),a1Arr=thisSelector.split(",").map(s=>s.trim());if(a0Arr.sort(),a1Arr.sort(),cascadingFinalSelector===thisSelector||a0Arr.join(",")===a1Arr.join(","));else{cascadingObject.selector=JSON.stringify([cascadingFinalSelector,thisSelector]);const copied=objectDeepCopy(cascadingObject);"string"!=typeof copied.selector&&(copied.selector=JSON.stringify(copied.selector)),middleMap.set(property,copied)}}}}for(let p of exceptionProperty)middleMap.delete(p);pastSelector="",pastType="inline",finalDictionaryArr=[],cssDictionary={},selectorSet=[],middleMap.forEach((value,key)=>{/^\[/.test(value.selector)||(value.selector=JSON.stringify([value.selector]))}),middleMap.forEach((value,key)=>{try{selectorSet=selectorSet.concat(JSON.parse(value.selector))}catch{}}),selectorSet=[...new Set(selectorSet)].map(s=>s.trim()).filter(s=>""!==s);for(let selector of selectorSet){let selectorType="inline";if("inline"===selector)selectorType="inline";else if(/,/gi.test(selector)){const selectorGroup=selector.split(",").map(s=>s.trim()).filter(s=>""!==s);""!==thisSelf.id&&selectorGroup.some(s=>new RegExp(thisSelf.id+"(::?[^:\\s]*)?$").test(s))?(console.log(thisSelf.id),selectorType="id"):selectorType=selectorGroup.some(targetSelector=>thisClassList.map(s=>new RegExp(s.replace(/\./g,"\\.")+"(::?[^:\\s]*)?$")).some(r=>r.test(targetSelector)))?"class":"tag"}else selectorType=""!==thisSelf.id&&new RegExp(thisSelf.id+"(::?[^:\\s]*)?$").test(selector)?"id":thisClassList.map(s=>new RegExp(s.replace(/\./g,"\\.")+"(::?[^:\\s]*)?$")).some(r=>r.test(selector))?"class":"tag";finalDictionaryArr.push({selector,css:{},media:"",type:selectorType})}for(let[cssProperty,value]of middleMap.entries()){const{selector:selectorArrRaw,value:cssValue,type:cssType}=value,selectorArr=JSON.parse(selectorArrRaw);for(const selector of selectorArr){const targetObj=finalDictionaryArr.find(o=>o.selector===selector);if("inline"===selector)targetObj.css[cssProperty]=cssValue;else if(cascadingMode)targetObj.css[cssProperty]=cssValue;else{const original=rawOriginal.findLast(o=>o.selector===selector);original.style[cssProperty]!==cssValue?targetObj.css[cssProperty]=original.style[cssProperty]:targetObj.css[cssProperty]=cssValue}}}finalDictionaryArr=finalDictionaryArr.filter(d=>0!==Object.keys(d).length),mediaDictionaryArr=[],onlyMediaDictionaryArr=[],mediaStyle=[...new Set(styleList.filter(s=>/^@/.test(s.trim())))],thisOnlyClassName=thisClassName.filter(k=>/^\./.test(k));for(let mediaBlock of mediaStyle){let thisMediaCondition,thisCssBlock,thisSelector,thisStyleString,thisStyleArr,cssDictionary;thisMediaCondition="",thisCssBlock="",mediaBlock.replace(/^@media\s+([^@]+?)\s*\{\s*([\S\s]*)\s*\}\s*$/gis,(match,p1,p2)=>(thisMediaCondition=p1.trim(),thisCssBlock=p2,match)),mediaBlock.replace(/^\s*@media\s*\(min\-width:\s*8px\)/gis,(match,p1,p2)=>(thisMediaCondition="(prefers-color-scheme: dark)",match)),thisSelector="",thisStyleString="",thisCssBlock.replace(/^\s*([^\{]+)\s*\{([^\}]*)\}\s*$/gis,(match,p1,p2)=>(thisSelector=p1,thisStyleString=p2,match)),thisStyleArr=thisStyleString.split(";").map(s=>s.trim()).filter(s=>""!==s),cssDictionary={};for(let s of thisStyleArr){const[p,v]=s.split(":").map(k=>k.trim());cssDictionary[p.trim()]=v.trim()}const foundTarget=finalDictionaryArr.find(o=>{const sArr=thisSelector.trim().split(",").map(k=>k.trim()).filter(k=>""!==k);let boo;return boo=!1,o.selector===thisSelector.trim()&&(boo=!0),sArr.length>0&&sArr.some(k=>new RegExp(o.selector+"$","g").test(k))&&(boo=!0),boo});if(void 0!==foundTarget)mediaDictionaryArr.push({media:thisMediaCondition.trim(),selector:thisSelector.trim(),css:cssDictionary,type:foundTarget.type});else{const s=thisSelector.trim(),sArr=s.split(",").map(k=>k.trim()).filter(k=>""!==k);sArr.some(k=>thisOnlyClassName.some(j=>new RegExp(j+"$","g").test(k)))?onlyMediaDictionaryArr.push({media:thisMediaCondition.trim(),selector:thisSelector.trim(),css:cssDictionary,type:"class"}):thisNodeName.toLowerCase().trim()===s.toLowerCase().trim()?onlyMediaDictionaryArr.push({media:thisMediaCondition.trim(),selector:thisSelector.trim(),css:cssDictionary,type:"tag"}):""!==thisDomId&&thisDomId===s&&onlyMediaDictionaryArr.push({media:thisMediaCondition.trim(),selector:thisSelector.trim(),css:cssDictionary,type:"id"})}}result=[];for(let obj of finalDictionaryArr){const thisTargets=mediaDictionaryArr.filter(o=>o.selector===obj.selector);result.push(objectDeepCopy(obj));for(let obj2 of thisTargets)result.push(objectDeepCopy(obj2))}for(let obj of onlyMediaDictionaryArr)result.push(objectDeepCopy(obj));result=result.filter(k=>""!==k.selector.trim()&&Object.keys(k.css).length>0),finalBefore=[];for(let c of result){const dict=objectDeepCopy(c),thisSelector=dict.selector,thisMedia=dict.media;if(""===thisMedia&&onlyMediaTargetSelectors.includes(thisSelector));else if([...documentOrShadow.querySelectorAll(thisSelector.replace(/\:\:?checked/gi,""))].map(d=>d).includes(dom))if(finalBefore.map(o=>o.selector).includes(thisSelector)){const index=finalBefore.findIndex(o=>o.selector===thisSelector);if(thisMedia===finalBefore[index].media){const copied=objectDeepCopy(finalBefore[index]);finalBefore[index]={selector:thisSelector,type:copied.type,media:copied.media,css:{...copied.css,...dict.css}}}else finalBefore.push(dict)}else finalBefore.push(dict)}return final=[],final.push(finalBefore.filter(o=>"inline"===o.type)),final.push(finalBefore.filter(o=>"id"===o.type)),final.push(finalBefore.filter(o=>"class"===o.type)),final.push(finalBefore.filter(o=>"tag"===o.type)),final};static getUserPhone=async()=>{try{const back=new FrontBackMaker;await back.connect(AbstractNode.abstractCloudCertificationCollection);const rows=await back.frontRead(AbstractNode.abstractCloudCertificationCollection,{});return rows.sort((a,b)=>b.date.valueOf()-a.date.valueOf()),rows.length>0&&rows[0].phone?rows[0].phone:""}catch(e){return console.log(e),""}};static certificationSave=async(phone,session="",loginMode=!1)=>{const back=new FrontBackMaker,collection=AbstractNode.abstractCloudCertificationCollection,{ajaxJson,uniqueValue}=AbstractNode;return await back.connect(collection),""===(session=session.trim())&&(session="session_"+uniqueValue("hex")),await back.frontCreate(collection,{date:new Date,phone,session}),!loginMode||(await ajaxJson({phone,date:new Date,session,force:1,mobile:0},"/onlineCheck"),!0)};static certificationNumbers=()=>{let randomArr,randomValue,randomKey,randomStr;randomValue="";try{if(randomArr=window.crypto.getRandomValues(new Uint32Array(10)),randomKey=randomArr[Math.floor(10*Math.random())],randomStr=String(randomKey),randomStr.length>6)randomValue=randomStr.slice(0,6);else{randomValue=randomStr;for(let i=randomStr.length;i<6;i++)randomValue+=String(Math.floor(10*Math.random()));randomValue=randomStr}}catch(e){randomValue="";for(let i=0;i<6;i++)randomValue+=String(Math.floor(10*Math.random()))}return randomValue};static certificationPopup=async(phone="",color="mint",loginMode=!0,mustDo=!1,mustCerificationMode=!1,noSessionMode=!1)=>{const{createAbstract,downloadFile,promptPopup,sleep,ajaxJson,createDom,grayLoading,selectByClass,dateToString,objectDeepCopy,selectByQuery,colorExtended,zeroAddition,withOut,setQueue,isMac,mediaNumber}=AbstractNode,ea=AbstractNode.mediaEa(),mobile="vw"===ea;try{let whiteTongBase,whiteTong,grayBox,whiteWidth,paddingTop,paddingLeft,paddingBottom,size0,size1,marginLeft,bottomVisual,inputBoxHeight,input,inputIndent,inputBottomVisual,lineHeight,inputSize,questionWordVisualTopPlus,grayBoxBetween,specialBanEventMaker,mainColor,longBoxHeight,inputBoxHeightDate,questionMinusLeft,questionBetween,dateWordingBoxWidthSize,dateWordingValueBoxWidthSize0,dateWordingValueBoxWidthSize1,threeDateBoxBetween,matrixBetween,textareaVisualTop,submitButtonPadding,borderRadius,pastList,randomValue,promptResult,formPromise,safeIndex,formResult,lastDate,isValuePhoneResult,back,thisSession,failNumber,whereQuery;whiteWidth=mediaNumber(420,400,390,350,72),paddingTop=mediaNumber(20,19,18,16,3.5),paddingLeft=mediaNumber(23,22,21,19,3.9),paddingBottom=mediaNumber(23,22,21,19,4.1),size0=mediaNumber(15.5,15,14.5,14,3.3),size1=mediaNumber(16.5,16,15.5,15,3.5),inputSize=mediaNumber(15,15,14.5,14,3.1),marginLeft=mediaNumber(20,20,20,20,4.8),bottomVisual=mediaNumber(7,7,7,7,7),inputBoxHeight=mediaNumber(32,29,29,29,6.5),longBoxHeight=4*inputBoxHeight,inputBoxHeightDate=mediaNumber(29,26,26,26,6),inputIndent=mediaNumber(12,10,10,10,2.3),inputBottomVisual=0,lineHeight=1.5,questionWordVisualTopPlus=mediaNumber(.5,.5,.5,.5,0),grayBoxBetween=mediaNumber(6,5,5,5,1.2),questionMinusLeft=mediaNumber(-18.5,-18.5,-18,-17.5,-4.2),questionBetween=mediaNumber(18,16,16,16,3.6),dateWordingBoxWidthSize=mediaNumber(26,23,23,23,5),dateWordingValueBoxWidthSize0=mediaNumber(59,56,56,56,14),dateWordingValueBoxWidthSize1=mediaNumber(41,38,38,38,9),threeDateBoxBetween=mediaNumber(6,6,6,6,1),matrixBetween=mediaNumber(4,4,4,4,1),textareaVisualTop=mediaNumber(7,7,7,7,2),submitButtonPadding=mediaNumber(18,18,16,14,3.3),borderRadius=mediaNumber(12,12,10,9,2),mainColor=colorExtended[color]?colorExtended[color]:"black",failNumber=0,thisSession="",lastDate=new Date(1800,0,1),back=null,back=new FrontBackMaker,await back.connect(AbstractNode.abstractCloudCertificationCollection),whereQuery=""===phone?{}:{phone};const rows=await back.frontRead(AbstractNode.abstractCloudCertificationCollection,whereQuery);if(rows.sort((a,b)=>b.date.valueOf()-a.date.valueOf()),rows.length>0){if(lastDate=new Date(JSON.stringify(rows[0].date).slice(1,-1)),Math.abs(lastDate.valueOf()-(new Date).valueOf())<15552e6){if(noSessionMode&&!mustCerificationMode)return!0;if(rows[0].phone&&rows[0].session&&!mustDo){const checkResult=await ajaxJson({phone:rows[0].phone,date:new Date,session:rows[0].session,mobile:mobile?1:0},"/onlineCheck");if("string"!=typeof checkResult.message||"resolve"!==checkResult.message&&"true"!==checkResult.message&&"success"!==checkResult.message){const rs=await back.frontRead(AbstractNode.abstractCloudCertificationCollection,{}),promiseArr=[];for(let r of rs)promiseArr.push(back.frontDelete(AbstractNode.abstractCloudCertificationCollection,{_id:r._id}));await Promise.all(promiseArr)}else if(!mustCerificationMode)return!0}}"string"==typeof rows[0].phone&&("string"!=typeof phone||"string"==typeof phone&&phone.replace(/[^0-9]/gi,"").length<9)&&(phone=rows[0].phone),"string"==typeof rows[0].session&&rows[0].session&&(thisSession=rows[0].session)}for(specialBanEventMaker=()=>e=>{const self=e.currentTarget;self.value=self.value.replace(/[\{\}\[\]\=\&<>\\|]/gi,"")},formPromise=phone=>{randomValue=AbstractNode.certificationNumbers(),ajaxJson({phone,certification:randomValue},"/sendCertification").catch(e=>console.log(e)),pastList=selectByClass("promptAsideClassName2");for(let dom of pastList)dom.remove();return whiteTongBase=createAbstract({mode:"aside",mother:document.body,class:["promptAsideClassName2"],event:{contextmenu:e=>{e.stopPropagation()},dblclick:e=>{e.stopPropagation()},drop:e=>{e.stopPropagation()},keyup:e=>{e.stopPropagation()},keydown:e=>{e.stopPropagation()}},style:{display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",top:String(0)+"vh",left:String(1)+"vw",width:String(98)+"vw",height:String(100)+"vh",background:"transparent",zIndex:900}}),whiteTong=createAbstract({mother:whiteTongBase,event:{click:e=>{e.stopPropagation()}},style:{display:"block",position:"relative",width:String(whiteWidth-2*paddingLeft)+ea,paddingTop:String(paddingTop)+ea,paddingBottom:String(paddingBottom)+ea,paddingLeft:String(paddingLeft)+ea,paddingRight:String(paddingLeft)+ea,borderRadius:String(5)+"px",boxShadow:"0px 3px 15px -9px "+colorExtended.shadow,background:colorExtended.white,animation:"fadeuporiginal 0.5s ease forwards"}}),createAbstract({mother:whiteTong,text:"인증번호를 입력하여 주세요!",style:{position:"relative",marginLeft:String(marginLeft)+ea,fontFamily:"pretendard",fontSize:String(size1)+ea,fontWeight:String(700),color:colorExtended.black,lineHeight:String(lineHeight)},child:{text:"Q",style:{fontSize:String(size0)+ea,fontWeight:String(400),color:mainColor,position:"absolute",fontFamily:"altertypo",top:String(questionWordVisualTopPlus)+ea,left:String(questionMinusLeft)+ea,lineHeight:String(lineHeight)}}}),grayBox=createAbstract({mother:whiteTong,style:{left:String(marginLeft)+ea,width:withOut(marginLeft,ea),height:String(inputBoxHeight)+ea,borderRadius:String(5)+"px",background:colorExtended.gray1,marginTop:String(grayBoxBetween)+ea}}),input=createDom({mother:grayBox,mode:"input",attribute:{type:"text"},event:{keyup:specialBanEventMaker()},style:{position:"absolute",top:0,left:0,textIndent:String(inputIndent)+ea,width:withOut(2*inputIndent,ea),height:String(inputBoxHeight)+ea,background:"transparent",fontSize:String(inputSize)+ea,fontFamily:"pretendard",fontWeight:String(400),color:colorExtended.black,border:String(0),outline:String(0)}}),input.focus(),new Promise((resolve,reject)=>{whiteTongBase.addEventListener("click",function(e){if(e.stopPropagation(),loginMode&&failNumber<2)if(input.value.length>5)if(input.value===randomValue){const targets=[...document.querySelectorAll(".promptAsideClassName2")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}resolve(!0)}else window.alert("인증번호를 정확히 입력해주세요!"),input.value="",failNumber++;else window.alert("인증번호를 정확히 입력해주세요!"),input.value="",failNumber++;else{const targets=[...document.querySelectorAll(".promptAsideClassName2")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}resolve(!1)}}),input.addEventListener("keyup",function(e){if(this.value.length>5)if(this.value===randomValue){const targets=[...document.querySelectorAll(".promptAsideClassName2")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}resolve(!0)}else window.alert("인증번호를 정확히 입력해주세요!"),this.value=""}),mobile&&input.addEventListener("blur",function(e){if(this.value.length>5)if(this.value===randomValue){const targets=[...document.querySelectorAll(".promptAsideClassName2")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}resolve(!0)}else window.alert("인증번호를 정확히 입력해주세요!"),this.value=""})})},promptResult=phone,safeIndex=0;"string"==typeof promptResult&&promptResult.replace(/[^0-9]/gi,"").length<9||null===promptResult;){if(promptResult=await promptPopup("전화번호를 입력해주세요!","text","",color,!0),safeIndex>0)throw new Error("phone fail");safeIndex++}if("string"!=typeof promptResult)throw new Error("prompt result fail");if(phone=promptResult,loginMode&&(isValuePhoneResult=await ajaxJson({phone},"/isValidPhone"),1!==isValuePhoneResult.valid))throw new Error("invalid user");if(await AbstractNode.sleep(100),formResult=await formPromise(phone),!formResult)throw new Error("form fail");if(thisSession||(thisSession="session_"+AbstractNode.uniqueValue("hex")),await AbstractNode.certificationSave(phone,thisSession,!1),!noSessionMode){const checkResult=await ajaxJson({phone,date:new Date,session:thisSession,force:1,mobile:mobile?1:0},"/onlineCheck");if("string"!=typeof checkResult.message||"resolve"!==checkResult.message&&"true"!==checkResult.message&&"success"!==checkResult.message){const rs=await back.frontRead(AbstractNode.abstractCloudCertificationCollection,{}),promiseArr=[];for(let r of rs)promiseArr.push(back.frontDelete(AbstractNode.abstractCloudCertificationCollection,{_id:r._id}));throw await Promise.all(promiseArr),new Error("reject")}return!0}return formResult}catch(e){console.log(e);try{window.alert("인증에 실패하였습니다!")}catch{}const pastList=selectByClass("promptAsideClassName2");for(let dom of pastList)dom.remove();return!1}};static autoLogin=async()=>{const{createAbstract,downloadFile,promptPopup,sleep,ajaxJson,createDom,grayLoading,selectByClass,dateToString,objectDeepCopy,selectByQuery,colorExtended,zeroAddition,withOut,setQueue,isMac,mediaNumber}=AbstractNode,mobile="vw"===AbstractNode.mediaEa();try{let lastDate,back,thisSession,failNumber,whereQuery;failNumber=0,thisSession="",lastDate=new Date(1800,0,1),back=null,back=new FrontBackMaker,await back.connect(AbstractNode.abstractCloudCertificationCollection),whereQuery={};const rows=await back.frontRead(AbstractNode.abstractCloudCertificationCollection,whereQuery);if(rows.sort((a,b)=>b.date.valueOf()-a.date.valueOf()),rows.length>0&&(lastDate=new Date(JSON.stringify(rows[0].date).slice(1,-1)),Math.abs(lastDate.valueOf()-(new Date).valueOf())<15552e6&&rows[0].phone&&rows[0].session)){const checkResult=await ajaxJson({phone:rows[0].phone,date:new Date,session:rows[0].session,mobile:mobile?1:0},"/onlineCheck");if("string"!=typeof checkResult.message||"resolve"!==checkResult.message&&"true"!==checkResult.message&&"success"!==checkResult.message){const rs=await back.frontRead(AbstractNode.abstractCloudCertificationCollection,{}),promiseArr=[];for(let r of rs)promiseArr.push(back.frontDelete(AbstractNode.abstractCloudCertificationCollection,{_id:r._id}));return await Promise.all(promiseArr),""}return rows[0].phone}return""}catch(e){return""}};static formPopup=formInput=>{const{createAbstract,downloadFile,sleep,ajaxJson,createDom,grayLoading,selectByClass,dateToString,objectDeepCopy,selectByQuery,colorExtended,zeroAddition,withOut,setQueue,isMac,mediaNumber}=AbstractNode,ea=AbstractNode.mediaEa(),desktop=!("vw"===ea),originalOrder=objectDeepCopy(formInput);let whiteTongBase,whiteTong,grayBox,grayBox2,grayBox3,whiteWidth,paddingTop,paddingLeft,paddingBottom,size0,size1,marginLeft,bottomVisual,inputBoxHeight,input,inputIndent,inputBottomVisual,lineHeight,inputSize,questionWordVisualTopPlus,grayBoxBetween,index,questionMinusLeft,questionBetween,rowMotherBox,inputBoxHeightDate,dateWordingBoxWidthSize,dateWordingValueBoxWidthSize0,dateWordingValueBoxWidthSize1,threeDateBoxBetween,matrixBetween,longBoxHeight,onlyNumberEventMaker,specialBanEventMaker,mainColor,textareaVisualTop,submitButtonPadding,submitButton,pastList,borderRadius;whiteWidth=mediaNumber(480,460,450,440,80),paddingTop=mediaNumber(27,26,25,24,5),paddingLeft=mediaNumber(27,26,25,24,5),paddingBottom=mediaNumber(28,27,26,25,5),size0=mediaNumber(15,14,14,14,3),size1=mediaNumber(15,15,15,15,3.3),inputSize=mediaNumber(14.5,14,14,14,3),marginLeft=mediaNumber(32,30,30,30,6.4),bottomVisual=mediaNumber(7,7,7,7,7),inputBoxHeight=mediaNumber(32,30,30,29,6),longBoxHeight=4*inputBoxHeight,inputBoxHeightDate=mediaNumber(29,27,27,26,6),inputIndent=mediaNumber(12,10,10,10,2.3),inputBottomVisual=0,lineHeight=1.5,questionWordVisualTopPlus=mediaNumber(.5,.5,.5,.5,0),grayBoxBetween=mediaNumber(5,4,4,4,1),questionMinusLeft=mediaNumber(-29,-29,-29,-29,-6.2),questionBetween=mediaNumber(18,16,16,16,3.6),dateWordingBoxWidthSize=mediaNumber(26,23,23,23,5),dateWordingValueBoxWidthSize0=mediaNumber(59,56,56,56,14),dateWordingValueBoxWidthSize1=mediaNumber(41,38,38,38,9),threeDateBoxBetween=mediaNumber(6,6,6,6,1),matrixBetween=mediaNumber(4,4,4,4,1),textareaVisualTop=mediaNumber(7,7,7,7,2),submitButtonPadding=mediaNumber(18,18,16,15,3.3),borderRadius=mediaNumber(12,12,10,9,2),mainColor=formInput.color&&colorExtended[formInput.color]?colorExtended[formInput.color]:"black",onlyNumberEventMaker=()=>e=>{const self=e.currentTarget;""===self.value.replace(/[^0-9\-\.]/gi,"")?self.value="":self.value=self.value.replace(/[^0-9\-\.]/gi,"")},specialBanEventMaker=()=>e=>{const self=e.currentTarget;self.value=self.value.replace(/[\{\}\[\]\=\&<>\\|]/gi,"")},pastList=selectByClass("promptAsideClassName");for(let dom of pastList)dom.remove();whiteTongBase=createAbstract({mode:"aside",mother:document.body,class:["promptAsideClassName"],event:{contextmenu:e=>{e.stopPropagation()},dblclick:e=>{e.stopPropagation()},drop:e=>{e.stopPropagation()},keyup:e=>{e.stopPropagation()},keydown:e=>{e.stopPropagation()}},style:{display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",top:String(0)+"vh",left:String(1)+"vw",width:String(98)+"vw",height:String(100)+"vh",background:"transparent",zIndex:900}}),whiteTong=createAbstract({mother:whiteTongBase,event:{click:e=>{e.stopPropagation()}},style:{display:"block",position:"relative",width:String(whiteWidth-2*paddingLeft)+ea,paddingTop:String(paddingTop)+ea,paddingBottom:String(paddingBottom)+ea,paddingLeft:String(paddingLeft)+ea,paddingRight:String(paddingLeft)+ea,borderRadius:String(8)+"px",boxShadow:"0px 3px 15px -9px "+colorExtended.shadow,background:colorExtended.white,animation:"fadeuporiginal 0.5s ease forwards"}}),index=0;for(let obj of formInput.form){if(createAbstract({mother:whiteTong,text:obj.question,style:{position:"relative",marginLeft:String(marginLeft)+ea,fontFamily:"pretendard",fontSize:String(size1)+ea,fontWeight:String(700),color:colorExtended.black,lineHeight:String(1.5),marginTop:0===index?"":String(questionBetween)+ea},child:{text:"Q"+String(index+1),style:{fontSize:String(size0)+ea,fontWeight:String(400),color:mainColor,position:"absolute",fontFamily:"altertypo",top:String(questionWordVisualTopPlus)+ea,left:String(questionMinusLeft)+ea,lineHeight:String(1.5)}}}),"string"===obj.valueType)grayBox=createAbstract({mother:whiteTong,style:{left:String(marginLeft)+ea,width:withOut(marginLeft,ea),height:String(inputBoxHeight)+ea,borderRadius:String(5)+"px",background:colorExtended.gray1,marginTop:String(grayBoxBetween)+ea}}),input=createDom({mother:grayBox,mode:"input",class:["formPopupInputClassName"],attribute:{type:"text",placeholder:obj.placeHolder?String(obj.placeHolder):"",property:obj.property,name:obj.property},event:{keyup:specialBanEventMaker()},style:{position:"absolute",top:0,left:0,textIndent:String(inputIndent)+ea,width:withOut(2*inputIndent,ea),height:String(inputBoxHeight)+ea,background:"transparent",fontSize:String(inputSize)+ea,fontFamily:"pretendard",fontWeight:String(400),color:colorExtended.black,border:String(0),outline:String(0)}});else if("number"===obj.valueType)rowMotherBox=createAbstract({mother:whiteTong,style:{left:String(marginLeft)+ea,width:withOut(marginLeft,ea),height:String(inputBoxHeightDate)+ea,display:"flex",justifyContent:"start",alignItems:"center",flexDirection:"row",marginTop:String(grayBoxBetween)+ea}}),grayBox=createAbstract({mother:rowMotherBox,style:{display:"inline-flex",height:withOut(0),width:dateWordingValueBoxWidthSize0,borderRadius:String(5)+"px",background:colorExtended.gray1}}),input=createDom({mother:grayBox,mode:"input",class:["formPopupInputClassName"],attribute:{type:"text",placeholder:obj.placeHolder?String(obj.placeHolder):"",property:obj.property},event:{keyup:onlyNumberEventMaker()},style:{position:"absolute",top:0,left:0,width:withOut(0),height:withOut(0),textAlign:"center",background:"transparent",fontSize:String(inputSize)+ea,fontFamily:"pretendard",fontWeight:String(400),color:colorExtended.black,border:String(0),outline:String(0)}}),createAbstract({mother:rowMotherBox,style:{width:dateWordingBoxWidthSize,height:withOut(0),justifyContent:"center",alignItems:"center"},child:{text:obj.numberEa?obj.numberEa:"",style:{fontSize:String(size1)+ea,fontFamily:"pretendard",fontWeight:String(400),color:colorExtended.black}}});else if("threeDate"===obj.valueType)rowMotherBox=createAbstract({mother:whiteTong,style:{left:String(marginLeft)+ea,width:withOut(marginLeft,ea),height:String(inputBoxHeightDate)+ea,display:"flex",justifyContent:"start",alignItems:"center",flexDirection:"row",marginTop:String(grayBoxBetween)+ea}}),grayBox=createAbstract({mother:rowMotherBox,style:{display:"inline-flex",height:withOut(0),width:dateWordingValueBoxWidthSize0,borderRadius:String(5)+"px",background:colorExtended.gray1}}),input=createDom({mother:grayBox,mode:"input",class:["formPopupInputClassName"],attribute:{type:"text",placeholder:String((new Date).getFullYear()),property:obj.property,index:"0"},event:{keyup:onlyNumberEventMaker()},style:{position:"absolute",top:0,left:0,width:withOut(0),height:withOut(0),textAlign:"center",background:"transparent",fontSize:String(inputSize)+ea,fontFamily:"pretendard",fontWeight:String(400),color:colorExtended.black,border:String(0),outline:String(0)}}),createAbstract({mother:rowMotherBox,style:{width:dateWordingBoxWidthSize,height:withOut(0),justifyContent:"center",alignItems:"center",marginRight:threeDateBoxBetween},child:{text:"년",style:{fontSize:String(size1)+ea,fontFamily:"pretendard",fontWeight:String(400),color:colorExtended.black}}}),grayBox2=createAbstract({mother:rowMotherBox,style:{display:"inline-flex",height:withOut(0),width:dateWordingValueBoxWidthSize1,borderRadius:String(5)+"px",background:colorExtended.gray1}}),input=createDom({mother:grayBox2,mode:"input",class:["formPopupInputClassName"],attribute:{type:"text",placeholder:zeroAddition((new Date).getMonth()+1),property:obj.property,index:"1"},event:{keyup:onlyNumberEventMaker()},style:{position:"absolute",top:0,left:0,width:withOut(0),height:withOut(0),textAlign:"center",background:"transparent",fontSize:String(inputSize)+ea,fontFamily:"pretendard",fontWeight:String(400),color:colorExtended.black,border:String(0),outline:String(0)}}),createAbstract({mother:rowMotherBox,style:{width:dateWordingBoxWidthSize,height:withOut(0),justifyContent:"center",alignItems:"center",marginRight:threeDateBoxBetween},child:{text:"월",style:{fontSize:String(size1)+ea,fontFamily:"pretendard",fontWeight:String(400),color:colorExtended.black}}}),grayBox3=createAbstract({mother:rowMotherBox,style:{display:"inline-flex",height:withOut(0),width:dateWordingValueBoxWidthSize1,borderRadius:String(5)+"px",background:colorExtended.gray1}}),input=createDom({mother:grayBox3,mode:"input",class:["formPopupInputClassName"],attribute:{type:"text",placeholder:zeroAddition((new Date).getDate()),property:obj.property,index:"2"},event:{keyup:onlyNumberEventMaker()},style:{position:"absolute",top:0,left:0,width:withOut(0),height:withOut(0),textAlign:"center",background:"transparent",fontSize:String(inputSize)+ea,fontFamily:"pretendard",fontWeight:String(400),color:colorExtended.black,border:String(0),outline:String(0)}}),createAbstract({mother:rowMotherBox,style:{width:dateWordingBoxWidthSize,height:withOut(0),justifyContent:"center",alignItems:"center",marginRight:threeDateBoxBetween},child:{text:"일",style:{fontSize:String(size1)+ea,fontFamily:"pretendard",fontWeight:String(400),color:colorExtended.black}}});else if("threeMatrix"===obj.valueType){rowMotherBox=createAbstract({mother:whiteTong,style:{left:String(marginLeft)+ea,width:withOut(marginLeft,ea),height:String(inputBoxHeight)+ea,display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gridTemplateRows:"1fr",placeContent:"center",gap:matrixBetween,marginTop:String(grayBoxBetween)+ea}});for(let i=0;i<3;i++)createAbstract({mother:rowMotherBox,style:{display:"inline-flex",height:withOut(0),borderRadius:String(5)+"px",background:colorExtended.gray1},child:{mode:"input",class:["formPopupInputClassName"],attribute:{type:"text",placeholder:obj.placeHolder?String(obj.placeHolder).split(",").at(i):"",property:obj.property,index:String(i)},event:{keyup:specialBanEventMaker()},style:{position:"absolute",top:0,left:0,width:withOut(0),height:withOut(0),textAlign:"center",background:"transparent",fontSize:String(inputSize)+ea,fontFamily:"pretendard",fontWeight:String(400),color:colorExtended.black,border:String(0),outline:String(0)}}})}else"long"===obj.valueType&&(grayBox=createAbstract({mother:whiteTong,style:{left:String(marginLeft)+ea,width:withOut(marginLeft,ea),height:String(longBoxHeight)+ea,borderRadius:String(5)+"px",background:colorExtended.gray1,marginTop:String(grayBoxBetween)+ea}}),input=createDom({mother:grayBox,mode:"textarea",class:["formPopupInputClassName"],attribute:{type:"text",property:obj.property},style:{position:"absolute",top:textareaVisualTop,left:1.3*inputIndent,width:withOut(1.3*inputIndent*2,ea),height:withOut(textareaVisualTop,ea),lineHeight:1.7,background:"transparent",fontSize:String(inputSize)+ea,fontFamily:"pretendard",fontWeight:String(400),color:colorExtended.black,border:String(0),outline:String(0)}}));index++}return submitButton=createAbstract({mother:whiteTong,style:{display:"flex",flexDirection:"row",justifyContent:"end",alignItems:"end",width:withOut(0),height:inputBoxHeight,marginTop:questionBetween},child:{style:{paddingLeft:submitButtonPadding,paddingRight:submitButtonPadding,height:inputBoxHeight+(desktop?1.5:0),borderRadius,background:mainColor,display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},child:{text:formInput.button,style:{fontFamily:"pretendard",fontSize:String(desktop?size1:size0)+ea,fontWeight:String(800),color:colorExtended.white}}}}),new Promise((resolve,reject)=>{whiteTongBase.addEventListener("click",e=>{e.stopPropagation();const targets=[...document.querySelectorAll(".promptAsideClassName")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}resolve(!1)}),submitButton.addEventListener("click",async e=>{try{const[baseMother]=selectByQuery(".promptAsideClassName"),inputList=Array.from(baseMother.querySelectorAll(".formPopupInputClassName"));let propertyList,tempObj,inputMatrix,thisType,thisRequired,tempList,temp,defaultValue;propertyList=[];for(let dom of inputList)propertyList.push(dom.getAttribute("property"));propertyList=[...new Set(propertyList)],inputMatrix=[];for(let p of propertyList){tempList=[],temp=inputList.filter(d=>d.getAttribute("property")===p);for(let i of temp)tempList.push(i);thisType=originalOrder.form.find(o=>o.property===p).valueType,thisRequired=originalOrder.form.find(o=>o.property===p).required,tempObj={property:p,valueType:thisType,domList:tempList,required:thisRequired,finalValue:""},inputMatrix.push(tempObj);try{inputMatrix.at(-1).domList.sort((a,b)=>{let aIndex,bIndex;return aIndex=0,bIndex=0,null!==a.getAttribute("index")&&(aIndex=Number(a.getAttribute("index"))),null!==b.getAttribute("index")&&(bIndex=Number(b.getAttribute("index"))),aIndex-bIndex})}catch{}if("string"===thisType||"long"===thisType?inputMatrix.at(-1).finalValue=inputMatrix.at(-1).domList.reduce((acc,curr)=>acc+String(curr.value).replace(/[\{\}\[\]\=\&<>\\|]/gi,"").trim(),"").trim():"number"===thisType?inputMatrix.at(-1).domList.every(i=>""!==i.value)&&(inputMatrix.at(-1).finalValue=inputMatrix.at(-1).domList.reduce((acc,curr)=>acc+Number(String(curr.value).trim().replace(/[^0-9\-\.]/gi,"")),0)):"threeMatrix"===thisType?inputMatrix.at(-1).domList.some(i=>""!==i.value)&&(inputMatrix.at(-1).finalValue=inputMatrix.at(-1).domList.map(i=>String(i.value).replace(/[\{\}\[\]\=\&<>\\|]/gi,"")).join(", ")):"threeDate"===thisType&&inputMatrix.at(-1).domList.every(i=>""!==i.value)&&(inputMatrix.at(-1).finalValue=inputMatrix.at(-1).domList.map(i=>zeroAddition(Number(String(i.value).replace(/[^0-9\-\.]/gi,"")))).join("-")),thisRequired){if("string"==typeof inputMatrix.at(-1).finalValue&&""===inputMatrix.at(-1).finalValue)throw new Error("모든 항목을 채워주세요!")}else"string"==typeof inputMatrix.at(-1).finalValue&&""===inputMatrix.at(-1).finalValue&&originalOrder.form.find(o=>o.property===p)?.default&&(defaultValue=originalOrder.form.find(o=>o.property===p).default,"string"==typeof defaultValue||"number"==typeof defaultValue?inputMatrix.at(-1).finalValue=defaultValue:defaultValue instanceof Date?inputMatrix.at(-1).finalValue=dateToString(defaultValue):Array.isArray(defaultValue)&&(defaultValue.every(s=>"string"==typeof s)?inputMatrix.at(-1).finalValue=defaultValue.join(", "):inputMatrix.at(-1).finalValue=defaultValue.reduce((acc,curr)=>acc+curr,0)))}const loading=grayLoading();if(window.localStorage.setItem(AbstractNode.formPopupInputMatrixTempToken,JSON.stringify(inputMatrix.map(o=>(o.domList=[],o)))),!0===formInput.noAjax);else{const result=await ajaxJson({data:inputMatrix.map(o=>(o.domList=[],o))},(""!==originalOrder.submitHost&&void 0!==ADDRESS[originalOrder.submitHost]?ADDRESS[originalOrder.submitHost]:"")+originalOrder.submitUrl);await downloadFile(result.url)}await sleep(100),loading.remove();const targets=[...document.querySelectorAll(".promptAsideClassName")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}resolve(!0)}catch(e){window.alert(e.message),console.log(e)}})})};static ordinalNumber=(ordinalStringOrNumber,mode="english")=>{const unitCardinals={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9},tensCardinals={twenty:20,thirty:30,forty:40,fifty:50,sixty:60,seventy:70,eighty:80,ninety:90},ordinalsMap={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,thirtieth:30,fortieth:40,fiftieth:50,sixtieth:60,seventieth:70,eightieth:80,ninetieth:90,hundredth:100,thousandth:1e3},unitOrdinalKeys=new Set(["first","second","third","fourth","fifth","sixth","seventh","eighth","ninth"]),unitCardinalPattern=Object.keys(unitCardinals).join("|"),tensCardinalPattern=Object.keys(tensCardinals).join("|"),unitOrdinalKeysPattern=Object.keys(ordinalsMap).filter(k=>unitOrdinalKeys.has(k)).join("|"),combinableOrdinalKeys=Object.keys(ordinalsMap).filter(k=>"hundredth"!==k&&"thousandth"!==k);if("string"==typeof ordinalStringOrNumber){const cleanedInput=ordinalStringOrNumber.toLowerCase().trim().replace(/_/g," ").replace(/\-/g," ").replace(/\s+and\s+/g," ").replace(/\s+/g," ").trim();if(""===cleanedInput)return-1;if("english"===(mode=/[a-z]/gi.test(cleanedInput)?"english":"korean")){if("thousandth"===cleanedInput)return 1e3;const hundredthPattern=new RegExp(`^(?:(${unitCardinalPattern})\\s+)?hundredth$`),hundredthMatch=cleanedInput.match(hundredthPattern);if(hundredthMatch)return hundredthMatch[1]?100*unitCardinals[hundredthMatch[1]]:100;const mainPattern=new RegExp(`^(?:(?<h_val>${unitCardinalPattern})\\s+hundred\\s*)?(?:(?:(?<t_val>${tensCardinalPattern})\\s*(?<o_val_unit>${unitOrdinalKeysPattern}))|(?<o_val_other>${combinableOrdinalKeys.join("|")}))$`),match=cleanedInput.match(mainPattern);if(!match||!match.groups)return-1;const groups=match.groups;let finalOrdinalKey,total=0,finalOrdinalValue=0;if(finalOrdinalKey=groups.o_val_unit||groups.o_val_other,!finalOrdinalKey||!(finalOrdinalKey in ordinalsMap))return-1;if(finalOrdinalValue=ordinalsMap[finalOrdinalKey],groups.t_val&&!groups.o_val_unit)return-1;if(groups.h_val){if(!(groups.h_val in unitCardinals))return-1;total+=100*unitCardinals[groups.h_val]}if(groups.t_val){if(!(groups.t_val in tensCardinals))return-1;total+=tensCardinals[groups.t_val]}return total+=finalOrdinalValue,total<1||total>1e3||groups.h_val&&total<100||groups.t_val&&total<20||!groups.h_val&&!groups.t_val&&total>=100&&"hundredth"!==finalOrdinalKey&&"thousandth"!==finalOrdinalKey?-1:total}{const koreanToNumber=ordinalStr=>{const sinoDigits={일:1,이:2,삼:3,사:4,오:5,육:6,칠:7,팔:8,구:9},nativeTens={열:10,스물:20,서른:30,마흔:40,쉰:50,예순:60,일흔:70,여든:80,아흔:90},modifierValues={첫:1,한:1,두:2,세:3,네:4,스무:20},unitLookup={하나:1,둘:2,셋:3,넷:4,다섯:5,여섯:6,일곱:7,여덟:8,아홉:9,...modifierValues},tensLookup={...nativeTens,...modifierValues},base=ordinalStr.trim().replace(/번째/gi,"").trim().trim().replace(/\s+/g," ");if(!base)return-1;const parseNative=nativeStr=>{if(!nativeStr)return 0;if(tensLookup[nativeStr])return tensLookup[nativeStr];if(unitLookup[nativeStr])return unitLookup[nativeStr];let total=0,remainingStr=nativeStr,foundTens=!1;for(const tenKey in nativeTens)if(remainingStr.startsWith(tenKey)){total+=nativeTens[tenKey],remainingStr=remainingStr.substring(tenKey.length).trim(),foundTens=!0;break}if(remainingStr){if(!unitLookup[remainingStr])return-1;{const unitValue=unitLookup[remainingStr];if(foundTens&&nativeTens[Object.keys(nativeTens).find(tk=>nativeStr.startsWith(tk))]+unitValue>=100)return-1;total+=unitValue}}return total>0&&total<100?total:-1};if("천"===base)return 1e3;let total=0,currentBase=base;const baekIndex=currentBase.indexOf("백");if(-1!==baekIndex){const beforeBaek=currentBase.substring(0,baekIndex).trim(),afterBaek=currentBase.substring(baekIndex+1).trim();let hundredsMultiplier=1;if(beforeBaek){if(!sinoDigits[beforeBaek])return-1;hundredsMultiplier=sinoDigits[beforeBaek]}if(total+=100*hundredsMultiplier,afterBaek){const remainderValue=parseNative(afterBaek);if(-1===remainderValue||0===remainderValue)return-1;total+=remainderValue}}else{const nativeValue=parseNative(currentBase);if(-1===nativeValue)return-1;total=nativeValue}return total<1||total>1e3?-1:total};return koreanToNumber(cleanedInput)}}if(ordinalStringOrNumber<1||ordinalStringOrNumber>1e3||!Number.isInteger(ordinalStringOrNumber))return console.log("limit error"),"";if("english"===mode){const num=ordinalStringOrNumber,numToUnitCardinal={},numToOrdinal={},numToTensCardinal={};for(const key in unitCardinals)numToUnitCardinal[unitCardinals[key]]=key;for(const key in ordinalsMap)numToOrdinal[ordinalsMap[key]]=key;for(const key in tensCardinals)numToTensCardinal[tensCardinals[key]]=key;const convertLessThan100ToOrdinal=n=>{if(n<=0||n>=100)return"";if(numToOrdinal[n])return numToOrdinal[n];{const tensDigitValue=10*Math.floor(n/10),unitDigitValue=n%10;return numToTensCardinal[tensDigitValue]&&numToOrdinal[unitDigitValue]?`${numToTensCardinal[tensDigitValue]}-${numToOrdinal[unitDigitValue]}`:""}};if(1e3===num)return numToOrdinal[1e3];const hundredsDigit=Math.floor(num/100),remainder=num%100;if(0===remainder&&hundredsDigit>0)return numToUnitCardinal[hundredsDigit]?numToUnitCardinal[hundredsDigit]+"_hundredth":"";if(0===hundredsDigit)return convertLessThan100ToOrdinal(remainder);if(hundredsDigit>0&&remainder>0){if(numToUnitCardinal[hundredsDigit]){const hundredsPart=numToUnitCardinal[hundredsDigit]+"_hundred",remainderPart=convertLessThan100ToOrdinal(remainder);return remainderPart?`${hundredsPart}_and_${remainderPart}`:""}return""}return""}{const numberToKorean=n=>{const nativeUnits={1:"하나",2:"둘",3:"셋",4:"넷",5:"다섯",6:"여섯",7:"일곱",8:"여덟",9:"아홉"},nativeUnitsMod={1:"한",2:"두",3:"세",4:"네"},nativeTens={10:"열",20:"스물",30:"서른",40:"마흔",50:"쉰",60:"예순",70:"일흔",80:"여든",90:"아흔"},sinoDigits={1:"일",2:"이",3:"삼",4:"사",5:"오",6:"육",7:"칠",8:"팔",9:"구"},sinoPlaces_100="백";if(1===n)return"첫";if(2===n)return"두";if(3===n)return"세";if(4===n)return"네";if(20===n)return"스무";if(1e3===n)return"천";const parts=[],h=Math.floor(n/100),remainder=n%100;if(h>0&&parts.push((h>1?sinoDigits[h]:"")+sinoPlaces_100),remainder>0){h>0&&parts.push(" ");const rt=Math.floor(remainder/10),ru=remainder%10,remainderParts=[];if(rt>0){const tenVal=10*rt;remainderParts.push(nativeTens[tenVal])}ru>0&&remainderParts.push(nativeUnitsMod[ru]||nativeUnits[ru]),parts.push(remainderParts.join(""))}return parts.join("")};return numberToKorean(ordinalStringOrNumber)+" 번째"}};static markdownBlocks=async(scrollTong,key,data,binaryPath,linkCallback,mainColor="blue",noListMode=!1,childInstance=null,HighlightJs=null)=>{const colorChip=AbstractNode.colorExtended,ea=AbstractNode.mediaEa(),media=AbstractNode.mediaReload(),{percent,sleep,pixelUnit,formPopup,animateDom,mediaEa,variableArray,scrollAfter,divideBetween,divideBlock,withOut,createDom,createAbstract,mediaNumber,isMac,svgMaker,cssCalc,blankHref,downloadFile,stringToLink,ajaxJson,linkToString,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,objectDeepCopy,cleanChildren}=AbstractNode,mobile=media[4],desktop=!mobile;media[0]||media[1]||media[2];try{const titleToken="____title____",blocksRaw=data,titleIndex=blocksRaw.findIndex(o=>/heading_/.test(o.type)),titleRaw=-1!==titleIndex?blocksRaw[titleIndex].contents:"Untitle";let blockMother,basicPadding,fontSize,referenceSize,basicWeight,boldWeight,minHeight,circleTop,circleSize,indent,inlineMargin,numberInlineMargin,headingSize1,headingSize2,headingSize3,headingSize,headWeight,titlePaddingTop,dividerTop,thisImagePath,imageHeight,imageRadius,lineHeight,thisImage,thisImageBox,num,twinsBoo,title,specialPaddingLeft,thisCodeText,thisCodeTextArr,thisLanguage,black,blocks,blockStartIndex,titleMarginBottomRatio,titleLineMarginRatio,firstIndentVisual,firstIndentVisualValue,tempStringArr,divideImageList,divideNumber,divideBetweenValue,divideBlockRadius,imagePadding,shadowMode,normalMode,whiteModeBetweenRatio,thisMarginRatioRaw,thisMarginRatioArr,thisMarginRatio,anchorSize,anchorTop,anchorMarginRight,consecutiveReferenceBoo,blockMothers,linkStartTextTop,middleTextSize,color,heightBlockMother,heightArr,numberRange,startNumber,endNumber,bookImageList,bookPath,bookImageWidth,bookTongTarget,keyframes,durationMove,durationDelay,bookTong,bookMaxNumber,streamMode,previousStreamMode,titleImage,titleDom,titleHangulSize,titleEnglishVisualTop,imageRoot,listButtonWidth,listButtonHeight,listButtonSize,listButtonWeight,titleBarHeight,entireWidth,textTempRaw,textTempRaw2,blackWeight,thisDoms,thisDomTemp,textTempRaw3,flexLeftRatio,rightBoxVisualTop,childMethodBoo,childMethodResult,codeTextSize,codeBoxDelta,thisButtonText,thisFormInputJsonString,buttonTextVisualTop,buttonHeight,buttonPadding,buttonTitleString,targetString,thisColor,eventFunction,engMarkTextSize,engMarkTextVisualTop,answerTextSize,answerTextVisualTop;thisColor=mainColor,blocks=blocksRaw.slice(-1!==titleIndex?titleIndex+1:0),blockStartIndex=blocks.findIndex(o=>""!==o.contents),-1!==blockStartIndex&&(blocks=blocks.slice(blockStartIndex)),color=/^\#/gi.test(thisColor)||/^rgba/g.test(thisColor)?thisColor:colorChip[thisColor],black=colorChip.ultimateBlack,imageRoot=binaryPath+"/"+key.toLowerCase(),basicPadding=0,fontSize=mediaNumber(16,15,14.5,14,3.5),codeTextSize=mediaNumber(15,14,13,13,2.8),codeBoxDelta=mediaNumber(8,8,7,6,1.2),middleTextSize=mediaNumber(18,17,15.5,14,3.7),engMarkTextSize=mediaNumber(20,19,17,15.5,4),engMarkTextVisualTop=mediaNumber(.5,.5,.5,.5,.1),answerTextSize=mediaNumber(17,16,15,14,3.5),answerTextVisualTop=mediaNumber(1,1,1,1,.2),basicWeight=mediaNumber(500,500,500,500,500),boldWeight=mediaNumber(700,700,700,700,700),blackWeight=mediaNumber(800,800,800,800,800),minHeight=mediaNumber(30,27,25,25,6),imagePadding=mediaNumber(7,6,5,4,1),circleTop=mediaNumber(isMac()?-3.5:-3,isMac()?-3.5:-3,isMac()?-3.5:-3,isMac()?-3.5:-3,-.8),circleSize=mediaNumber(5,5,4,4,.9),indent=mediaNumber(16,16,15,14,3),firstIndentVisualValue=mediaNumber(3,3,2.5,2,.5),inlineMargin=mediaNumber(2,2,2,2,.3),numberInlineMargin=mediaNumber(8,8,8,8,1),headingSize1=mediaNumber(30,28,25,22,4.2),titleHangulSize=mediaNumber(27,25,22,20,3.9),titleEnglishVisualTop=mediaNumber(2,2,1.5,1.5,1.5),headingSize2=mediaNumber(30,28,25,22,4.3),headingSize3=mediaNumber(24,22,19,17,4),headingSize=[headingSize1,headingSize2,headingSize3],titlePaddingTop=mediaNumber(34,32,30,28,4.2),dividerTop=mediaNumber(10,10,10,10,2.5),headWeight=mediaNumber(800,800,800,800,800),imageHeight=mediaNumber(400,400,350,340,43),imageRadius=mediaNumber(10,10,10,10,1.2),specialPaddingLeft=mediaNumber(3,3,2,1,.4),titleMarginBottomRatio=mediaNumber(2.7,2.6,2.2,2.2,1.7),titleLineMarginRatio=mediaNumber(1.5,1.4,1.5,1.2,.9),titleBarHeight=mediaNumber(58,55,48,42,9),divideBlockRadius=mediaNumber(10,10,10,10,1.5),divideBetweenValue=mediaNumber(5,5,4,3,.8),whiteModeBetweenRatio=mediaNumber(9,8,8,8,2),anchorSize=mediaNumber(10,9,8.5,7.5,2.1),anchorTop=mediaNumber(-7.5,-6.5,-6,-6,-1.2),anchorMarginRight=mediaNumber(2,1.5,1,.5,.2),referenceSize=mediaNumber(13,12.5,11.5,10.5,2.4),linkStartTextTop=mediaNumber(-1.5,-1.5,-1,-1,-.2),listButtonWidth=mediaNumber(118,110,100,92,20),listButtonHeight=mediaNumber(40,37,35,32,7.2),listButtonSize=mediaNumber(17.5,17,16,15,3.3),listButtonWeight=mediaNumber(800,800,800,800,800),rightBoxVisualTop=mediaNumber(-4,-3,-2,-1,-.1),flexLeftRatio=mediaNumber(26,26,26,25,20),buttonTextVisualTop=mediaNumber(-.5,-.5,-.5,-.5,-.1),buttonHeight=mediaNumber(37,35,34,31,8),buttonPadding=mediaNumber(19,18,16,15,3.6),entireWidth=scrollTong.getBoundingClientRect().width,mobile&&(entireWidth=entireWidth/window.innerWidth*100),""!==scrollTong.style.paddingLeft&&(entireWidth-=Number(scrollTong.style.paddingLeft.replace(/[^0-9\.]/gi,""))),""!==scrollTong.style.paddingRight&&(entireWidth-=Number(scrollTong.style.paddingRight.replace(/[^0-9\.]/gi,""))),bookImageWidth=mediaNumber((entireWidth-.5*minHeight-divideBetweenValue)/2,(entireWidth-.5*minHeight-divideBetweenValue)/2,(entireWidth-.5*minHeight)/1,(entireWidth-.5*minHeight)/1,(entireWidth-.5*minHeight)/1),durationMove=800,durationDelay=3e3,lineHeight=1.7,title=titleRaw,cleanChildren(scrollTong),titleImage="",childMethodBoo=!1,/\(/gi.test(title)&&/\)/gi.test(title)&&(title=title.replace(/\(([^\)]+)\)/g,(match,p1)=>{const pureName=p1.trim().replace(/^[\"\']/g,"").replace(/[\"\']$/g,"").replace(/^[ ]*\/[ ]*/gi,"").trim();return/\.[a-zA-Z0-9]+[ ]*$/gi.test(pureName)?(titleImage=imageRoot+"/"+pureName,childMethodBoo=!1):(titleImage=pureName,childMethodBoo=!0,"no_title"===titleImage&&(childMethodBoo=!1)),""}).trim()),titleDom=createAbstract({mother:scrollTong,text:title,style:{display:"no_title"===titleImage?"none":"block",width:withOut(2*basicPadding,ea),paddingLeft:basicPadding,paddingRight:basicPadding,fontSize:titleHangulSize,fontWeight:headWeight,color:black,wordSpacing:pixelUnit(-2)},special:{fontSize:headingSize[0],fontWeight:headWeight,color,position:"relative",top:pixelUnit(titleEnglishVisualTop),paddingLeft:specialPaddingLeft},bold:{fontSize:headingSize[0],fontWeight:headWeight,color,position:"relative",top:pixelUnit(titleEnglishVisualTop),paddingRight:specialPaddingLeft},italic:{fontSize:headingSize[0],fontWeight:headWeight,color,position:"relative",top:pixelUnit(titleEnglishVisualTop),paddingRight:specialPaddingLeft},next:{style:{display:"no_title"===titleImage?"none":"block",width:withOut(2*basicPadding,ea),height:titleBarHeight,minHeight:titleBarHeight,paddingLeft:basicPadding,paddingRight:basicPadding},child:{style:{display:"block",borderBottom:"1px solid "+colorChip.gray4,top:dividerTop*titleLineMarginRatio,opacity:.5,lineHeight}}}}),""!==titleImage&&"no_title"!==titleImage&&(childMethodBoo?"function"==typeof childInstance[titleImage]&&(childMethodResult=await childInstance[titleImage](scrollTong),childMethodResult.style.marginBottom=String(minHeight*(desktop?1.5:1))+mediaEa()):createDom({mother:scrollTong,mode:"img",source:titleImage,style:{display:"block",width:withOut(0),borderRadius:imageRadius,marginBottom:minHeight*(desktop?1.5:1)}})),num=0,consecutiveReferenceBoo=!1,streamMode=!1,previousStreamMode=!1,blockMothers=[],thisDoms=[];for(let obj of blocks){if("matrix"===obj.type&&createDom({mother:scrollTong,style:{display:"block",width:withOut(2*basicPadding,ea),minHeight,paddingLeft:basicPadding,paddingRight:basicPadding}}),thisDomTemp=null,blockMother=createDom({mother:scrollTong,style:{display:"block",width:withOut(2*basicPadding,ea),minHeight,paddingLeft:basicPadding,paddingRight:basicPadding}}),"paragraph"===obj.type)if(/^\>__/gi.test(obj.contents))if(consecutiveReferenceBoo=!1,/image/gi.test(obj.contents))thisImagePath=binaryPath+obj.contents.split("(")[1].replace(/\)/gi,"").trim(),thisImage=createDom(desktop?{mother:blockMother,class:["imageTargetClassName","imageTargetClassName_"+String(num)],mode:"img",attribute:{src:thisImagePath},style:{display:"block",height:imageHeight,borderRadius:imageRadius,marginTop:minHeight,marginBottom:minHeight,lineHeight}}:{mother:blockMother,mode:"img",attribute:{src:thisImagePath},style:{display:"block",height:"auto",width:withOut(0),borderRadius:imageRadius,marginTop:minHeight,marginBottom:minHeight,lineHeight}});else if(/consecutive/gi.test(obj.contents))thisImagePath=binaryPath+obj.contents.split("(")[1].replace(/\)/gi,"").trim(),thisImage=createDom(desktop?{mother:blockMother,class:["imageTargetClassName","imageTargetClassName_"+String(num)],mode:"img",attribute:{src:thisImagePath},style:{display:"block",height:imageHeight,borderRadius:imageRadius,marginTop:minHeight/6,marginBottom:minHeight,lineHeight}}:{mother:blockMother,mode:"img",attribute:{src:thisImagePath},style:{display:"block",height:"auto",width:withOut(0),borderRadius:imageRadius,marginTop:minHeight/6,marginBottom:minHeight,lineHeight}});else if(/above/gi.test(obj.contents))thisImagePath=binaryPath+obj.contents.split("(")[1].replace(/\)/gi,"").trim(),thisImage=createDom(desktop?{mother:blockMother,class:["imageTargetClassName","imageTargetClassName_"+String(num)],mode:"img",attribute:{src:thisImagePath},style:{display:"block",height:imageHeight,borderRadius:imageRadius,marginTop:minHeight,marginBottom:minHeight/6,lineHeight}}:{mother:blockMother,mode:"img",attribute:{src:thisImagePath},style:{display:"block",height:"auto",width:withOut(0),borderRadius:imageRadius,marginTop:minHeight,marginBottom:minHeight/6,lineHeight}});else if(/hundred/gi.test(obj.contents))thisImagePath=binaryPath+obj.contents.split("(")[1].replace(/\)/gi,"").trim(),thisImage=createDom({mother:blockMother,mode:"img",attribute:{src:thisImagePath},style:{display:"block",height:"auto",width:withOut(0),borderRadius:imageRadius,marginTop:minHeight,marginBottom:minHeight,lineHeight}});else if(/indent/gi.test(obj.contents))thisImagePath=binaryPath+obj.contents.split("(")[1].replace(/\)/gi,"").trim(),thisImage=createDom(desktop?{mother:blockMother,class:["imageTargetClassName","imageTargetClassName_"+String(num)],mode:"img",attribute:{src:thisImagePath},style:{display:"block",height:imageHeight,borderRadius:imageRadius,marginTop:minHeight/2,marginBottom:minHeight,marginLeft:indent,lineHeight}}:{mother:blockMother,mode:"img",attribute:{src:thisImagePath},style:{display:"block",height:"auto",width:withOut(indent),borderRadius:imageRadius,marginTop:minHeight/2,marginBottom:minHeight,marginLeft:indent,lineHeight}});else if(/hwins/gi.test(obj.contents))if(twinsBoo=void 0!==blocks[num-1]&&"string"==typeof blocks[num-1].contents&&/hwins/gi.test(blocks[num-1].contents),thisImagePath=binaryPath+obj.contents.split("(")[1].replace(/\)/gi,"").trim(),desktop)if(twinsBoo){for(thisImage=createDom({mother:blockMother.previousElementSibling,class:["imageTargetClassName","imageTargetClassName_"+String(num)],mode:"img",attribute:{src:thisImagePath},style:{display:"inline-block",height:imageHeight,borderRadius:imageRadius,marginTop:minHeight/2,marginBottom:minHeight,marginLeft:indent/3,lineHeight}});0===thisImage.getBoundingClientRect().width;)await sleep(10);blockMother.getBoundingClientRect().width-2*basicPadding-10<2*thisImage.getBoundingClientRect().width+indent*(4/3)&&(thisImage.style.width=cssCalc(cssCalc(percent(),"-",indent*(4/3)),"/",2),thisImage.style.height="auto"),blockMother.remove()}else{for(thisImage=createDom({mother:blockMother,class:["imageTargetClassName","imageTargetClassName_"+String(num)],mode:"img",attribute:{src:thisImagePath},style:{display:"inline-block",height:imageHeight,borderRadius:imageRadius,marginTop:minHeight/2,marginBottom:minHeight,marginLeft:0,lineHeight}});0===thisImage.getBoundingClientRect().width;)await sleep(10);blockMother.getBoundingClientRect().width-2*basicPadding-10<2*thisImage.getBoundingClientRect().width+indent*(4/3)&&(thisImage.style.width=cssCalc(cssCalc(percent(),"-",indent*(4/3)),"/",2),thisImage.style.height="auto")}else twinsBoo?(thisImage=createDom({mother:blockMother.previousElementSibling,mode:"img",attribute:{src:thisImagePath},style:{display:"inline-block",height:"auto",width:cssCalc(cssCalc(percent(),"-",indent/3),"/",2),borderRadius:imageRadius,marginTop:minHeight/2,marginBottom:minHeight,marginLeft:indent/3,lineHeight}}),blockMother.remove()):thisImage=createDom({mother:blockMother,mode:"img",attribute:{src:thisImagePath},style:{display:"inline-block",height:"auto",width:cssCalc(cssCalc(percent(),"-",indent/3),"/",2),borderRadius:imageRadius,marginTop:minHeight/2,marginBottom:minHeight,lineHeight}});else if(/awins/gi.test(obj.contents))if(twinsBoo=void 0!==blocks[num-1]&&"string"==typeof blocks[num-1].contents&&/awins/gi.test(blocks[num-1].contents),thisImagePath=binaryPath+obj.contents.split("(")[1].replace(/\)/gi,"").trim(),desktop)if(twinsBoo){for(thisImage=createDom({mother:blockMother.previousElementSibling,class:["imageTargetClassName","imageTargetClassName_"+String(num)],mode:"img",attribute:{src:thisImagePath},style:{display:"inline-block",height:imageHeight,borderRadius:imageRadius,marginTop:minHeight/4,marginBottom:minHeight,marginLeft:indent/3,lineHeight}});0===thisImage.getBoundingClientRect().width;)await sleep(10);blockMother.getBoundingClientRect().width-2*basicPadding-10<2*thisImage.getBoundingClientRect().width+indent*(4/3)&&(thisImage.style.width=cssCalc(cssCalc(percent(),"-",indent*(4/3)),"/",2),thisImage.style.height="auto"),blockMother.remove()}else{for(thisImage=createDom({mother:blockMother,class:["imageTargetClassName","imageTargetClassName_"+String(num)],mode:"img",attribute:{src:thisImagePath},style:{display:"inline-block",height:imageHeight,borderRadius:imageRadius,marginTop:minHeight/4,marginBottom:minHeight,marginLeft:0,lineHeight}});0===thisImage.getBoundingClientRect().width;)await sleep(10);blockMother.getBoundingClientRect().width-2*basicPadding-10<2*thisImage.getBoundingClientRect().width+indent*(4/3)&&(thisImage.style.width=cssCalc(cssCalc(percent(),"-",indent*(4/3)),"/",2),thisImage.style.height="auto")}else twinsBoo?(thisImage=createDom({mother:blockMother.previousElementSibling,mode:"img",attribute:{src:thisImagePath},style:{display:"inline-block",height:"auto",width:cssCalc(cssCalc(percent(),"-",indent/3),"/",2),borderRadius:imageRadius,marginTop:minHeight/4,marginBottom:minHeight,marginLeft:indent/3,lineHeight}}),blockMother.remove()):thisImage=createDom({mother:blockMother,mode:"img",attribute:{src:thisImagePath},style:{display:"inline-block",height:"auto",width:cssCalc(cssCalc(percent(),"-",indent/3),"/",2),borderRadius:imageRadius,marginTop:minHeight/4,marginBottom:minHeight,lineHeight}});else if(/margin/gi.test(obj.contents))thisMarginRatioRaw=obj.contents.split("(")[1].replace(/\)/gi,"").trim().replace(/[^\-0-9\.,]/gi,""),thisMarginRatioArr=thisMarginRatioRaw.split(",").map(s=>s.trim()).map(s=>Number(s)),thisMarginRatio=thisMarginRatioArr[0],5!==thisMarginRatioArr.length?1!==thisMarginRatioArr.length&&mobile&&(thisMarginRatio=thisMarginRatioArr[1]):thisMarginRatio=thisMarginRatioArr[media.findIndex(b=>b)],blockMother.style.minHeight="",thisDomTemp=createAbstract({mother:blockMother,style:{width:withOut(0),height:minHeight*thisMarginRatio}});else if(/desktop/gi.test(obj.contents))mobile&&(blockMother.style.minHeight="",thisDomTemp=createAbstract({mother:blockMother,style:{width:withOut(0),height:0}}));else if(/mobile/gi.test(obj.contents))thisMarginRatioRaw=obj.contents.split("(")[1].replace(/\)/gi,"").trim().replace(/[^\-0-9\.,]/gi,""),thisMarginRatioArr=thisMarginRatioRaw.split(",").map(s=>s.trim()).map(s=>Number(s)),thisMarginRatio=thisMarginRatioArr[0],1!==thisMarginRatioArr.length&&mobile&&(thisMarginRatio=thisMarginRatioArr[1]),mobile&&(blockMother.style.minHeight="",thisDomTemp=createAbstract({mother:blockMother,style:{width:withOut(0),height:minHeight*thisMarginRatio}}));else if(/twins/gi.test(obj.contents))if(twinsBoo=void 0!==blocks[num-1]&&"string"==typeof blocks[num-1].contents&&/twins/gi.test(blocks[num-1].contents),thisImagePath=binaryPath+obj.contents.split("(")[1].replace(/\)/gi,"").trim(),desktop)if(twinsBoo){for(thisImage=createDom({mother:blockMother.previousElementSibling,class:["imageTargetClassName","imageTargetClassName_"+String(num)],mode:"img",attribute:{src:thisImagePath},style:{display:"inline-block",height:imageHeight,borderRadius:imageRadius,marginTop:minHeight/2,marginBottom:minHeight,marginLeft:indent/3,lineHeight}});0===thisImage.getBoundingClientRect().width;)await sleep(10);blockMother.getBoundingClientRect().width-2*basicPadding-10<2*thisImage.getBoundingClientRect().width+indent*(4/3)&&(thisImage.style.width=cssCalc(cssCalc(percent(),"-",indent*(4/3)),"/",2),thisImage.style.height="auto"),blockMother.remove()}else{for(thisImage=createDom({mother:blockMother,class:["imageTargetClassName","imageTargetClassName_"+String(num)],mode:"img",attribute:{src:thisImagePath},style:{display:"inline-block",height:imageHeight,borderRadius:imageRadius,marginTop:minHeight/2,marginBottom:minHeight,marginLeft:indent,lineHeight}});0===thisImage.getBoundingClientRect().width;)await sleep(10);blockMother.getBoundingClientRect().width-2*basicPadding-10<2*thisImage.getBoundingClientRect().width+indent*(4/3)&&(thisImage.style.width=cssCalc(cssCalc(percent(),"-",indent*(4/3)),"/",2),thisImage.style.height="auto")}else twinsBoo?(thisImage=createDom({mother:blockMother.previousElementSibling,mode:"img",attribute:{src:thisImagePath},style:{display:"inline-block",height:"auto",width:cssCalc(cssCalc(percent(),"-",indent/3),"/",2),borderRadius:imageRadius,marginTop:minHeight/2,marginBottom:minHeight,marginLeft:indent/3,lineHeight}}),blockMother.remove()):thisImage=createDom({mother:blockMother,mode:"img",attribute:{src:thisImagePath},style:{display:"inline-block",height:"auto",width:cssCalc(cssCalc(percent(),"-",indent/3),"/",2),borderRadius:imageRadius,marginTop:minHeight/2,marginBottom:minHeight,lineHeight}});else if(/divide/gi.test(obj.contents)){if(tempStringArr=obj.contents.split("(")[1].replace(/\)/gi,"").split("|").map(s=>s.trim()),3!==tempStringArr.length)throw new Error("invalid order");try{JSON.parse(tempStringArr[0]),JSON.parse(tempStringArr[1])}catch(e){throw new Error("invalid order: "+e.message)}streamMode&&(previousStreamMode=!0),normalMode="normal"===tempStringArr[2]||"shadow"===tempStringArr[2],shadowMode="shadow"===tempStringArr[2],streamMode="stream"===tempStringArr[2],divideImageList=JSON.parse(tempStringArr[0]).map(s=>imageRoot+"/"+s.replace(/^[ ]*\/[ ]*/gi,"")),divideNumber=JSON.parse(tempStringArr[1]),streamMode&&(normalMode=!0),createAbstract({mother:blockMother,style:{display:"block",width:withOut(0),paddingTop:previousStreamMode?"":normalMode?imagePadding:1.5*imagePadding,paddingBottom:streamMode?divideBetweenValue:desktop?minHeight/4:""},children:divideImageList.slice(...0===divideNumber[media.findIndex(b=>b)][1]?[0]:[0,-1*divideNumber[media.findIndex(b=>b)][1]]).map((source,index)=>({mode:"img",source,style:{display:"inline-block",marginRight:divideBetween(divideNumber[media.findIndex(b=>b)][0],normalMode?divideBetweenValue:divideBetweenValue*whiteModeBetweenRatio,index),marginBottom:streamMode?"":divideBetweenValue,width:divideBlock(divideNumber[media.findIndex(b=>b)][0],normalMode?divideBetweenValue:divideBetweenValue*whiteModeBetweenRatio),borderRadius:normalMode?divideBlockRadius:0,boxShadow:shadowMode?"0px 5px 21px -9px "+colorChip.shadow:""}}))})}else if(/video_media/gi.test(obj.contents)){tempStringArr=obj.contents.split("(")[1].replace(/\)/gi,"").split("|").map(s=>s.trim());try{JSON.parse(tempStringArr[0])}catch(e){throw new Error("invalid order: "+e.message)}divideImageList=JSON.parse(tempStringArr[0]).map(s=>imageRoot+"/"+s.replace(/^[ ]*\/[ ]*/gi,"")),createAbstract({mother:blockMother,style:{display:"block",width:withOut(0),paddingTop:imagePadding,paddingBottom:desktop?minHeight/4:"",overflow:"hidden",borderRadius:divideBlockRadius},child:{mode:"video",source:divideImageList[media.findIndex(b=>b)],attribute:{autoplay:"true",loop:"true",controls:"true"},style:{display:"inline-block",width:withOut(0),transform:AbstractNode.transformCss({scale:1.01}),transformOrigin:"50% 50%"}}})}else if(/video_message/gi.test(obj.contents)){tempStringArr=obj.contents.split("(")[1].replace(/\)/gi,"").split("|").map(s=>s.trim());try{JSON.parse(tempStringArr[0])}catch(e){throw new Error("invalid order: "+e.message)}divideImageList=JSON.parse(tempStringArr[0]).map(s=>"/"+s.replace(/^\s*\/\s*/gi,""));const oneMode=/video_message_one/gi.test(obj.contents);createAbstract({mother:blockMother,style:{display:"block",width:withOut(0),paddingTop:imagePadding,paddingBottom:desktop?minHeight/4:"",overflow:"hidden",borderRadius:divideBlockRadius},child:{mode:"video",event:{loadedmetadata:e=>{const self=e.currentTarget,oneMode="true"===self.getAttribute("one");self.currentTime=oneMode?1:0}},source:divideImageList[0],attribute:{one:oneMode?"true":"false",autoplay:"false",loop:"false",controls:"true"},style:{display:"inline-block",width:withOut(0),transform:AbstractNode.transformCss({scaleX:1.01,scaleY:1.022}),transformOrigin:"50% 50%"}}})}else if(/media/gi.test(obj.contents)){tempStringArr=obj.contents.split("(")[1].replace(/\)/gi,"").split("|").map(s=>s.trim());try{JSON.parse(tempStringArr[0])}catch(e){throw new Error("invalid order: "+e.message)}divideImageList=JSON.parse(tempStringArr[0]).map(s=>imageRoot+"/"+s.replace(/^[ ]*\/[ ]*/gi,"")),thisDomTemp=createAbstract({mother:blockMother,style:{display:"block",width:withOut(0),paddingTop:imagePadding,paddingBottom:desktop?minHeight/4:""},child:{mode:"img",source:divideImageList[media.findIndex(b=>b)],style:{display:"inline-block",width:withOut(0),borderRadius:divideBlockRadius}}})}else if(/books/gi.test(obj.contents)){tempStringArr=obj.contents.split("(")[1].replace(/\)/gi,"").split(",").map(s=>s.trim()),bookMaxNumber=1;for(let tempString of tempStringArr)numberRange="",tempString.replace(/\[([0-9\-]+)\]/gi,(match,p1)=>(numberRange=p1,"")),[startNumber,endNumber]=numberRange.split("-").map(s=>s.trim()).map(s=>Number(s.replace(/[^0-9]/g,""))),bookMaxNumber=endNumber-startNumber+2;bookTong=createAbstract({mother:blockMother,style:{display:"block",width:withOut(.5*minHeight),paddingTop:minHeight/4,paddingBottom:minHeight/4-divideBetweenValue,background:color,borderRadius:divideBlockRadius,paddingRight:minHeight/4,paddingLeft:minHeight/4},child:{style:{display:"block",width:withOut(0),overflow:"hidden"},child:{style:{display:"block",transformOrigin:"0% 0%",width:1.5*bookImageWidth*bookMaxNumber}}}}).firstChild?.firstChild,bookImageList=[];for(let tempString of tempStringArr){if(!/\[/gi.test(tempString))throw new Error("invalid order");if(!/\]/gi.test(tempString))throw new Error("invalid order");if(numberRange="",tempString.replace(/\[([0-9\-]+)\]/gi,(match,p1)=>(numberRange=p1,"")),bookPath=tempString.trim().replace(/^['"]/g,"").replace(/['"]$/g,""),!/\-/gi.test(numberRange))throw new Error("invalid order");[startNumber,endNumber]=numberRange.split("-").map(s=>s.trim()).map(s=>Number(s.replace(/[^0-9]/g,""))),bookImageList=[];for(let i=startNumber;i<endNumber+1;i++)bookImageList.push(imageRoot+"/"+bookPath.replace(/\[([0-9\-]+)\]/gi,(match,p1)=>(numberRange=p1,String(i))));for(let i=0;i<2;i++)bookImageList=bookImageList.concat(bookImageList);bookImageList=bookImageList.concat(bookImageList),bookTongTarget=createAbstract({mother:bookTong,style:{display:"block",transformOrigin:"0% 0%",width:1.5*bookImageWidth*bookImageList.length,marginBottom:divideBetweenValue},children:bookImageList.map((source,index)=>({mode:"img",source,style:{display:"inline-block",marginRight:divideBetweenValue,width:bookImageWidth,borderRadius:divideBlockRadius,boxShadow:"0px 5px 21px -9px "+colorChip.shadow}}))})}keyframes=[];for(let i=0;i<bookImageList.length-2;i++)keyframes.push({duration:durationMove,animation:{ease:"power1.inOut"},transform:{x:(bookImageWidth+divideBetweenValue)*(-1*(1+i))}}),keyframes.push({duration:durationDelay,transform:{x:(bookImageWidth+divideBetweenValue)*(-1*(1+i))}});animateDom(bookTong,{keyframe:keyframes,time:{startDelay:2*durationDelay,repeat:-1}}).catch(e=>console.log(e))}else if(/height/gi.test(obj.contents)){if(tempStringArr=obj.contents.split("(")[1].replace(/\)/gi,"").split("|").map(s=>s.trim()),3!==tempStringArr.length)throw new Error("invalid order");try{JSON.parse(tempStringArr[0]),JSON.parse(tempStringArr[1]),JSON.parse(tempStringArr[2])}catch(e){throw new Error("invalid order: "+e.message)}divideImageList=JSON.parse(tempStringArr[0]).map(s=>imageRoot+"/"+s.replace(/^[ ]*\/[ ]*/gi,"")),divideNumber=JSON.parse(tempStringArr[1]),heightArr=JSON.parse(tempStringArr[2]),heightBlockMother=createAbstract({mother:blockMother,style:{display:"flex",width:withOut(0),flexDirection:"row",justifyContent:"center",alignItems:"stretch",height:heightArr[media.findIndex(b=>b)],paddingTop:imagePadding,paddingBottom:desktop?minHeight/4:""},children:divideImageList.slice(...0===divideNumber[media.findIndex(b=>b)][1]?[0]:[0,-1*divideNumber[media.findIndex(b=>b)][1]]).map((source,index)=>({mode:"img",source,style:{marginRight:divideBetween(divideNumber[media.findIndex(b=>b)][0],divideBetweenValue,index),marginBottom:divideBetweenValue,display:"inline-block",borderRadius:divideBlockRadius}}))})}else/listButton/gi.test(obj.contents)?(blockMother.style.display="flex",blockMother.style.justifyContent="center",blockMother.style.alignItems="center",thisDomTemp=createAbstract({mother:blockMother,style:{display:noListMode?"none":"inline-flex",justifyContent:"center",alignItems:"center",width:listButtonWidth,height:listButtonHeight,borderRadius:listButtonHeight,cursor:"pointer",background:color},event:{click:async e=>{"function"==typeof AbstractNode.events.whiteCloseEvent&&AbstractNode.events.whiteCloseEvent.call(e.currentTarget,e)}},child:{text:"목록으로",style:{fontSize:listButtonSize,fontWeight:listButtonWeight,color:colorChip.white}}})):/title_number/gi.test(obj.contents)?(textTempRaw="",textTempRaw2=obj.contents.replace(/[ ]*\>__title_number[ ]*\([ ]*([0-9]+)[ ]*\)[ ]*\:/gi,(match,p1)=>(textTempRaw=p1,"")).trim(),textTempRaw2=textTempRaw+". "+textTempRaw2,thisDomTemp=createAbstract({mother:blockMother,text:textTempRaw2,style:{display:"block",fontFamily:"pretendard",fontSize:middleTextSize,fontWeight:blackWeight,color:black,lineHeight}})):/title_just/gi.test(obj.contents)?(textTempRaw2=obj.contents.replace(/[ ]*\>__title_just[ ]*\([ ]*\)[ ]*\:/gi,(match,p1)=>"").trim(),thisDomTemp=createAbstract({mother:blockMother,text:textTempRaw2,style:{display:"block",fontFamily:"pretendard",fontSize:middleTextSize,fontWeight:blackWeight,color:black,lineHeight}})):/middle_bold/gi.test(obj.contents)?(textTempRaw2=obj.contents.replace(/[ ]*\>__middle_bold[ ]*\:/gi,match=>"").trim(),thisDomTemp=createAbstract({mother:blockMother,text:textTempRaw2,style:{display:"block",fontFamily:"pretendard",fontSize:middleTextSize,fontWeight:blackWeight,color:black,lineHeight},bold:{fontFamily:"pretendard",fontSize:middleTextSize,fontWeight:basicWeight,color:colorChip.deactive,lineHeight}})):/question/gi.test(obj.contents)?(textTempRaw2=obj.contents.replace(/[ ]*\>__question[ ]*\:/gi,match=>"").trim(),thisDomTemp=createAbstract({mother:blockMother,text:"<u%Q. %u>"+textTempRaw2,style:{display:"block",fontFamily:"pretendard",fontSize:middleTextSize,fontWeight:blackWeight,color:black,lineHeight},bold:{fontFamily:"pretendard",fontSize:middleTextSize,fontWeight:basicWeight,color:colorChip.deactive,lineHeight},under:{fontFamily:"cabinet",fontSize:engMarkTextSize,fontWeight:700,color:colorChip[mainColor],marginRight:2*divideBetweenValue,position:"relative",top:engMarkTextVisualTop,lineHeight}})):/answer/gi.test(obj.contents)?(textTempRaw2=obj.contents.replace(/[ ]*\>__answer[ ]*\:/gi,match=>"").trim(),thisDomTemp=createAbstract({mother:blockMother,text:"<u%A. %u>"+textTempRaw2,style:{display:"block",fontFamily:"pretendard",fontSize:answerTextSize,fontWeight:400,color:black,lineHeight},bold:{fontFamily:"pretendard",fontSize:answerTextSize,fontWeight:boldWeight,color:black,lineHeight},under:{fontFamily:"cabinet",fontSize:engMarkTextSize,fontWeight:700,color:colorChip[mainColor],marginRight:2*divideBetweenValue,position:"relative",top:answerTextVisualTop,lineHeight}})):/big_big/gi.test(obj.contents)?(textTempRaw2=obj.contents.replace(/[ ]*\>__big_big[ ]*\:/gi,match=>"").trim(),thisDomTemp=createAbstract({mother:blockMother,text:textTempRaw2,style:{display:"block",fontFamily:"pretendard",fontSize:1.2*middleTextSize,fontWeight:900,color:black,lineHeight},bold:{fontFamily:"pretendard",fontSize:1.2*middleTextSize,fontWeight:900,color:colorChip.deactive,lineHeight}})):/middle_big/gi.test(obj.contents)?(textTempRaw2=obj.contents.replace(/[ ]*\>__middle_big[ ]*\:/gi,match=>"").trim(),thisDomTemp=createAbstract({mother:blockMother,text:textTempRaw2,style:{display:"block",fontFamily:"pretendard",fontSize:1.2*middleTextSize,fontWeight:blackWeight,color:black,lineHeight},bold:{fontFamily:"pretendard",fontSize:1.2*middleTextSize,fontWeight:basicWeight,color:colorChip.deactive,lineHeight}})):/small_bold/gi.test(obj.contents)?(textTempRaw2=obj.contents.replace(/[ ]*\>__small_bold[ ]*\:/gi,match=>"").trim(),thisDomTemp=createAbstract({mother:blockMother,text:textTempRaw2,style:{display:"block",fontFamily:"pretendard",fontSize,fontWeight:blackWeight,color:black,lineHeight},bold:{fontFamily:"pretendard",fontSize,fontWeight:basicWeight,color:colorChip.deactive,lineHeight}})):/gray_description/gi.test(obj.contents)?(textTempRaw2=obj.contents.replace(/[ ]*\>__gray_description[ ]*\:/gi,match=>"").trim(),thisDomTemp=createAbstract({mother:blockMother,text:textTempRaw2,style:{display:"block",fontFamily:"pretendard",fontSize,fontWeight:basicWeight,color,lineHeight}})):/button_anchor/gi.test(obj.contents)?(buttonTitleString="",targetString="",obj.contents.replace(/[ ]*\>__button_anchor[ ]*\(([^\|]+)\|([^\)]+)\)/gi,(match,p1,p2)=>(buttonTitleString=p1.trim(),targetString=p2.trim(),"")).trim(),thisDomTemp=createAbstract({mother:blockMother,style:{display:"block",cursor:"pointer"},child:{attribute:{data:JSON.stringify({target:targetString})},event:{click:async e=>{const self=e.currentTarget;try{const thisData=JSON.parse(self.getAttribute("data"));setTimeout(()=>{AbstractNode.blankHref(thisData.target)},0)}catch(e){console.log(e)}}},style:{paddingLeft:buttonPadding,paddingRight:buttonPadding,height:buttonHeight,background:colorChip[thisColor],borderRadius:imageRadius,display:"inline-flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},child:{text:buttonTitleString,style:{fontSize,fontWeight:800,color:colorChip.white,top:buttonTextVisualTop}}}})):/popup_iframe/gi.test(obj.contents)?(buttonTitleString="",targetString="",obj.contents.replace(/[ ]*\>__popup_iframe[ ]*\(([^\|]+)\|([^\)]+)\)/gi,(match,p1,p2)=>(buttonTitleString=p1.trim(),targetString=p2.trim(),"")).trim(),thisDomTemp=createAbstract({mother:blockMother,style:{display:"block",cursor:"pointer"},child:{attribute:{data:JSON.stringify({target:targetString})},event:{click:async e=>{const self=e.currentTarget;try{eventFunction=AbstractNode.whiteCardEvent(async scrollTong=>{scrollTong.style.padding="",scrollTong.style.width=withOut(0),scrollTong.style.height=withOut(0),scrollTong.parentElement.style.overflow="hidden",createDom({mother:scrollTong,mode:"iframe",attribute:{src:JSON.parse(String(self.getAttribute("data"))).target},style:{top:0,left:0,border:0,outline:0,width:withOut(0),height:withOut(0)}})},!0,!0),await eventFunction(e)}catch(e){console.log(e)}}},style:{paddingLeft:buttonPadding,paddingRight:buttonPadding,height:buttonHeight,background:colorChip[thisColor],borderRadius:imageRadius,display:"inline-flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},child:{text:buttonTitleString,style:{fontSize,fontWeight:800,color:colorChip.white,top:buttonTextVisualTop}}}})):/link_anchor/gi.test(obj.contents)?(textTempRaw2=obj.contents.replace(/[ ]*\>__link_anchor[ ]*\:/gi,match=>"").trim(),thisDomTemp=createAbstract({mother:blockMother,text:textTempRaw2,style:{display:"block",fontFamily:"pretendard",fontSize,fontWeight:basicWeight,color:black,lineHeight},bold:{fontFamily:"pretendard",fontSize,fontWeight:boldWeight,color:black,lineHeight},anchor:{fontFamily:"pretendard",fontSize,fontWeight:300,color,lineHeight,zIndex:String(1)}}),[...thisDomTemp.querySelectorAll("b")].map(d=>d).forEach(d=>{if(d.style.zIndex===String(1)){let tempArr,thisLink,thisText;thisLink=d.innerHTML,thisText=thisLink,/\|/gi.test(thisLink)?(tempArr=thisLink.split("|").map(s=>s.trim()),thisText=tempArr[0],thisLink=tempArr[1]):thisText=thisLink,d.innerHTML=`<a\n                  style="\n                    display: inline;\n                    font-size: inherit;\n                    font-weight: inherit;\n                    font-family: inherit;\n                    color: inherit;\n                    position: relative;\n                  "\n                  target="_blank"\n                  rel="noopener"\n                  href="${thisLink}">${thisText}</a>`}})):/next_flex/gi.test(obj.contents)?desktop?(textTempRaw="",textTempRaw3="",textTempRaw2=obj.contents.replace(/[ ]*\>__next_flex[ ]*\([ ]*([0-9]+),[ ]*([0-9]+)[ ]*\)/gi,(match,p1,p2)=>(textTempRaw=p1.trim().replace(/[^0-9]/gi,""),textTempRaw3=p2.trim().replace(/[^0-9]/gi,""),"")).trim(),thisDomTemp=createAbstract({mother:blockMother,attribute:{start:textTempRaw,end:textTempRaw3},class:["c__next_flexClassName"],text:"",style:{display:"block",fontFamily:"pretendard",fontSize,fontWeight:blackWeight,color:black,lineHeight,opacity:0}})):(blockMother.style.minHeight="",thisDomTemp=createAbstract({mother:blockMother,style:{width:withOut(0),height:0*minHeight}})):/variation_flex/gi.test(obj.contents)?(textTempRaw="",textTempRaw3="",textTempRaw2=obj.contents.replace(/[ ]*\>__variation_flex[ ]*\([ ]*([0-9]+),[ ]*([0-9]+)[ ]*\)/gi,(match,p1,p2)=>(textTempRaw=p1.trim().replace(/[^0-9]/gi,""),textTempRaw3=p2.trim().replace(/[^0-9]/gi,""),"")).trim(),thisDomTemp=createAbstract({mother:blockMother,attribute:{start:textTempRaw,end:textTempRaw3},class:["c__variation_flexClassName"],text:"",style:{display:"block",fontFamily:"pretendard",fontSize,fontWeight:blackWeight,color:black,lineHeight,opacity:0}})):thisDomTemp=createAbstract({mother:blockMother,text:obj.contents,style:{display:"block",fontFamily:"pretendard",fontSize,fontWeight:basicWeight,color:black,lineHeight},italic:{fontSize,fontFamily:"pretendard",fontWeight:basicWeight,color:black},bold:{fontSize,fontFamily:"pretendard",fontWeight:boldWeight,color:black},under:{display:"inline-block",position:"relative",marginRight:numberInlineMargin,marginLeft:indent,fontSize,fontFamily:"pretendard",fontWeight:basicWeight,color},special:{display:"inline-block",position:"relative",marginRight:numberInlineMargin,fontSize,fontFamily:"pretendard",fontWeight:basicWeight,color},code:{display:"inline-block",position:"relative",marginRight:inlineMargin,fontSize,fontFamily:"pretendard",fontWeight:basicWeight,color}});else/^[ ]*\<r\%[ ]*/.test(obj.contents)?(consecutiveReferenceBoo?void 0!==blockMothers[num-1]&&(Array.from(blockMothers[num-1].children).at(-1)?.remove(),Array.from(blockMothers[num-1].children).at(-1).style.paddingBottom=""):createDom({mother:blockMother,style:{display:"block",borderBottom:"1px solid "+colorChip.gray4,opacity:.5,marginTop:minHeight/2}}),createDom({mother:blockMother,text:obj.contents,style:{display:"block",fontSize,fontWeight:basicWeight,fontFamily:"pretendard",color:black,paddingLeft:0,width:withOut(0),lineHeight:desktop?1.33:1.25,paddingTop:consecutiveReferenceBoo?"":.5*minHeight,paddingBottom:.4*minHeight},italic:{display:"inline",position:"relative",fontSize,fontWeight:basicWeight,fontFamily:"pretendard",color:black},bold:{display:"inline",position:"relative",fontSize,fontWeight:boldWeight,fontFamily:"pretendard",color:black},reference:{display:"inline",position:"relative",fontSize:referenceSize,fontFamily:"pretendard",fontWeight:400,color},anchor:{display:"inline",position:"relative",fontSize:anchorSize,fontWeight:boldWeight,fontFamily:"pretendard",color,top:anchorTop,marginRight:anchorMarginRight}}),createDom({mother:blockMother,style:{display:"block",borderBottom:"1px solid "+colorChip.gray4,opacity:.5,marginBottom:minHeight}}),consecutiveReferenceBoo=!0):(consecutiveReferenceBoo=!1,firstIndentVisual=/^\<u\%[ ]*1\.[ ]*/.test(obj.contents)?firstIndentVisualValue:0,thisDomTemp=createAbstract({mother:blockMother,text:obj.contents,style:{display:"block",fontFamily:"pretendard",fontSize,fontWeight:basicWeight,color:black,paddingLeft:(/^\<u/gi.test(obj.contents),0),width:withOut((/^\<u/gi.test(obj.contents),0)),lineHeight},italic:{display:"inline",position:"relative",fontFamily:"pretendard",fontSize:middleTextSize,fontWeight:boldWeight,color:black},bold:{display:"inline",position:"relative",fontFamily:"pretendard",fontSize,fontWeight:boldWeight,color:black},under:{display:"inline-block",position:"relative",fontFamily:"pretendard",minWidth:indent,marginRight:numberInlineMargin-firstIndentVisual,paddingLeft:firstIndentVisual,fontSize,fontWeight:basicWeight,color},special:{display:"inline-block",position:"relative",fontFamily:"pretendard",width:indent,marginRight:numberInlineMargin,paddingLeft:firstIndentVisual,fontSize,fontWeight:basicWeight,color},reference:{display:"inline",position:"relative",fontFamily:"pretendard",fontSize:referenceSize,fontWeight:400,color},anchor:{display:"inline",position:"relative",fontFamily:"pretendard",fontSize:anchorSize,fontWeight:boldWeight,color,top:anchorTop,marginRight:anchorMarginRight},code:{display:"inline-block",position:"relative",width:indent,marginRight:inlineMargin,fontSize,fontWeight:basicWeight,color}}));else"bulleted_list_item"===obj.type?(consecutiveReferenceBoo=!1,thisDomTemp=createAbstract({mother:blockMother,text:"<u%%u> "+obj.contents,style:{display:"block",fontSize,fontFamily:"pretendard",fontWeight:basicWeight,color:black,paddingLeft:0,width:withOut(0),lineHeight},italic:{display:"inline",fontSize,fontFamily:"pretendard",fontWeight:basicWeight,color:black},bold:{display:"inline",fontSize,fontFamily:"pretendard",fontWeight:boldWeight,color:black},under:{display:"inline-block",position:"relative",top:circleTop,width:circleSize,height:circleSize,"border-radius":circleSize,marginRight:inlineMargin,fontWeight:basicWeight,background:color},special:{display:"inline",fontSize,fontFamily:"pretendard",fontWeight:boldWeight,color},code:{display:"inline-block",position:"relative",marginRight:inlineMargin,fontSize,fontFamily:"pretendard",fontWeight:basicWeight,color},anchor:{display:"inline",position:"relative",fontSize:anchorSize,fontFamily:"pretendard",fontWeight:boldWeight,color,top:anchorTop,marginRight:anchorMarginRight}})):/heading_/gi.test(obj.type)?(consecutiveReferenceBoo=!1,thisDomTemp=createAbstract({mother:blockMother,text:obj.contents,style:{display:"block",fontFamily:"pretendard",fontSize:headingSize[Number(obj.type.replace(/[^0-9]/gi,""))-1],fontWeight:headWeight,color:black,lineHeight},italic:{fontSize:headingSize[Number(obj.type.replace(/[^0-9]/gi,""))-1],fontWeight:headWeight,fontFamily:"pretendard",color:black},bold:{fontSize:headingSize[Number(obj.type.replace(/[^0-9]/gi,""))-1],fontWeight:boldWeight,fontFamily:"pretendard",color:black},under:{display:"inline-block",position:"relative",marginRight:numberInlineMargin,marginLeft:indent,fontSize:headingSize[Number(obj.type.replace(/[^0-9]/gi,""))-1],fontWeight:basicWeight,fontFamily:"pretendard",color},special:{display:"inline-block",position:"relative",marginRight:numberInlineMargin,fontSize:headingSize[Number(obj.type.replace(/[^0-9]/gi,""))-1],fontWeight:basicWeight,fontFamily:"pretendard",color},code:{display:"inline-block",position:"relative",marginRight:inlineMargin,fontSize:headingSize[Number(obj.type.replace(/[^0-9]/gi,""))-1],fontWeight:basicWeight,fontFamily:"pretendard",color}})):"divider"===obj.type?(consecutiveReferenceBoo=!1,thisDomTemp=createAbstract({mother:blockMother,style:{display:"block",borderBottom:"1px solid "+colorChip.gray4,top:dividerTop,opacity:.5,lineHeight}})):"link"===obj.type?(consecutiveReferenceBoo=!1,thisDomTemp=createAbstract({mother:blockMother,text:"<b%>%b> "+obj.contents.split(titleToken).at(-1),attribute:{target:obj.contents.split(titleToken).at(0),title:obj.contents.split(titleToken).at(-1)},event:{click:async e=>{const target=String(e.currentTarget.getAttribute("target")),title=String(e.currentTarget.getAttribute("title"));await scrollAfter(),await linkCallback(target,title)}},style:{display:"block",fontSize,fontWeight:basicWeight,color,paddingLeft:/^\<u/gi.test(obj.contents)?indent:0,width:withOut(/^\<u/gi.test(obj.contents)?indent:0),lineHeight,cursor:"pointer"},bold:{display:"inline",fontSize,fontWeight:300,color,top:linkStartTextTop,lineHeight},italic:{display:"inline",fontSize,fontWeight:basicWeight,color,lineHeight}})):"code"===obj.type&&(thisCodeText=obj.contents.split("\n").map(s=>s.replace(/^ /gi,"__tap__").replace(/^ /gi,"__tap__").replace(/^ /gi,"__tap__").replace(/^ /gi,"__tap__").replace(/^ /gi,"__tap__").replace(/^ /gi,"__tap__").replace(/^ /gi,"__tap__").replace(/^ /gi,"__tap__").replace(/^ /gi,"__tap__")).join("\n"),thisLanguage=/__lang__\(([^\)]+)\)/.exec(thisCodeText)[1],"form"===thisLanguage?(thisButtonText=/__button__\(([^\)]+)\)/.exec(thisCodeText)[1],thisCodeText=thisCodeText.replace(/__button__\(([^\)]+)\)/gi,"").trim(),thisCodeText=thisCodeText.replace(/__lang__\(([^\)]+)\)/gi,"").trim(),thisCodeText="const thisFormOrder = "+thisCodeText.replace(/__tap__/gi,"    ")+"\n\nreturn thisFormOrder",thisFormInputJsonString=JSON.stringify(new Function(thisCodeText)()),thisDomTemp=createAbstract({mother:blockMother,style:{display:"block",cursor:"pointer"},child:{attribute:{data:thisFormInputJsonString},event:{click:async e=>{const self=e.currentTarget;try{const thisData=JSON.parse(self.getAttribute("data"));await formPopup(thisData)}catch(e){console.log(e)}}},style:{paddingLeft:buttonPadding,paddingRight:buttonPadding,height:buttonHeight,background:colorChip[thisColor],borderRadius:imageRadius,display:"inline-flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},child:{text:thisButtonText,style:{fontSize,fontWeight:800,color:colorChip.white,top:buttonTextVisualTop}}}})):null!==HighlightJs&&(consecutiveReferenceBoo=!1,thisCodeText=thisCodeText.replace(/__lang__\(([^\)]+)\)/gi,"").trim(),thisCodeTextArr=HighlightJs.highlight(thisCodeText,{language:thisLanguage}).value.split("\n"),thisCodeText=thisCodeTextArr.join("\n"),thisCodeText=thisCodeText.replace(/__tap__/gi,"&nbsp;&nbsp;&nbsp;&nbsp;"),thisDomTemp=createAbstract({mother:blockMother,text:thisCodeText,style:{display:"block",fontSize:codeTextSize,fontFamily:"redditmono",fontWeight:400,paddingTop:indent,paddingBottom:indent,paddingLeft:indent+codeBoxDelta,paddingRight:indent+codeBoxDelta,width:withOut(2*(indent+codeBoxDelta)),lineHeight,background:colorChip.gray1,borderRadius:desktop?8:1.8},italic:{fontSize:codeTextSize,fontFamily:"redditmono",fontWeight:400},bold:{fontSize:codeTextSize,fontFamily:"redditmono",fontWeight:boldWeight},under:{display:"inline-block",position:"relative",marginRight:numberInlineMargin,fontSize:codeTextSize,fontFamily:"redditmono",fontWeight:400},special:{display:"inline-block",position:"relative",marginRight:numberInlineMargin,fontSize:codeTextSize,fontFamily:"redditmono",fontWeight:400},code:{display:"inline-block",position:"relative",marginRight:inlineMargin,fontSize:codeTextSize,fontFamily:"redditmono",fontWeight:400}})));consecutiveReferenceBoo&&(blockMother.style.minHeight=""),blockMothers.push(blockMother),null!==thisDomTemp&&thisDoms.push(thisDomTemp),num++}desktop?thisDoms.forEach((dom,i)=>{if("c__next_flexClassName"===dom.className.trim()||"c__variation_flexClassName"===dom.className.trim()){const startNumber=Number(String(dom.getAttribute("start"))),endNumber=Number(String(dom.getAttribute("end"))),delta=2;let pastParentDoms,targetsLeft,targetsRight;targetsLeft=thisDoms.slice(i+1,i+startNumber+delta),targetsRight=thisDoms.slice(i+startNumber+delta,i+endNumber+delta),dom.style.display="flex",dom.style.flexDirection="row",dom.style.justifyContent="start",dom.style.alignItems="start";const leftMother=createAbstract({mother:dom,style:{display:"inline-flex",width:String(flexLeftRatio)+"%",flexDirection:"column"}}),rightMother=createAbstract({mother:dom,style:{display:"inline-flex",width:String(100-flexLeftRatio)+"%",flexDirection:"column",position:"relative",top:rightBoxVisualTop}});pastParentDoms=[];for(let d of targetsLeft)d.style.minHeight=String(d.parentElement.style.minHeight),pastParentDoms.push(d.parentElement),leftMother.appendChild(d);for(let d of targetsRight)d.style.minHeight=String(d.parentElement.style.minHeight),pastParentDoms.push(d.parentElement),rightMother.appendChild(d);for(let d of pastParentDoms)d.remove();dom.style.opacity=""}}):thisDoms.forEach((dom,i)=>{if("c__variation_flexClassName"===dom.className.trim()){const startNumber=Number(String(dom.getAttribute("start"))),endNumber=Number(String(dom.getAttribute("end"))),delta=2;let pastParentDoms,targetsLeft,targetsRight;targetsLeft=thisDoms.slice(i+1,i+startNumber+delta),targetsRight=thisDoms.slice(i+startNumber+delta,i+endNumber+delta),dom.style.display="flex",dom.style.flexDirection="column",dom.style.justifyContent="start",dom.style.alignItems="start";const leftMother=createAbstract({mother:dom,style:{display:"flex",width:withOut(0),flexDirection:"column"}});pastParentDoms=[];for(let i=0;i<targetsLeft.length;i++){const d=targetsLeft[i];d.style.minHeight=String(d.parentElement.style.minHeight),d.style.color=colorChip[thisColor],null!==d.querySelector("b")&&(d.querySelector("b").style.color=colorChip[thisColor],d.querySelector("b").style["-webkit-text-fill-color"]=colorChip[thisColor]),pastParentDoms.push(d.parentElement),leftMother.appendChild(d);const e=targetsRight[i];void 0!==e&&(e.style.minHeight=String(e.parentElement.style.minHeight),e.style.marginBottom=String(1.5)+"vw",pastParentDoms.push(e.parentElement),leftMother.appendChild(e))}for(let d of pastParentDoms)d.remove();dom.style.opacity=""}}),setQueue(()=>{const imageTargets=selectByClass("imageTargetClassName");for(let thisImage of imageTargets)thisImageBox=thisImage.getBoundingClientRect(),thisImageBox.width>blockMother.getBoundingClientRect().width-2*basicPadding&&(thisImage.style.height="auto",thisImage.style.width=withOut(0))},100)}catch(e){console.log(e)}};static fromAttribute=(event,key)=>event.currentTarget.getAttribute(key);static toAttribute=(event,key,value)=>{event.currentTarget.setAttribute(key,value)};static nodeQueue=obj=>new Promise((resolve,reject)=>{if("object"==typeof obj&&null!==obj)try{resolve(AbstractNode.createNode(obj))}catch(e){reject(e)}});static withOut=(percent,num,ea)=>{const thisEa=AbstractNode.mediaEa();if("number"==typeof percent&&"number"==typeof num&&"string"==typeof ea)return"calc("+String(percent)+"% - "+String(num)+ea+")";if("number"==typeof percent&&"number"==typeof num&&void 0===ea)return"calc("+String(percent)+"% - "+String(num)+thisEa+")";if("number"==typeof percent&&"string"==typeof num&&void 0===ea)return"calc("+String(100)+"% - "+String(percent)+num+")";if("number"==typeof percent&&void 0===num&&void 0===ea)return"calc("+String(100)+"% - "+String(percent)+thisEa+")";if("string"==typeof percent&&"number"==typeof num&&void 0===ea)return"calc("+percent+" - "+String(num)+thisEa+")";throw new Error("invaild arguments")};static vwConvert=num=>num/100*window.innerWidth;static findByFunction=(targetList,callback)=>{const result=targetList.find(callback);return void 0===result?null:result};static setRelativeDate=(date,delta,mode="date")=>{if(!(date instanceof Date))throw new Error("invalid input 0");if("number"!=typeof delta)throw new Error("invalid input 1");let copiedDate;if("string"!=typeof mode&&(mode="date"),copiedDate=new Date(JSON.stringify(date).slice(1,-1)),"date"===mode)copiedDate.setDate(copiedDate.getDate()+delta);else if("hour"===mode)copiedDate.setHours(copiedDate.getHours()+delta);else if("minute"===mode)copiedDate.setMinutes(copiedDate.getMinutes()+delta);else if("second"===mode)copiedDate.setSeconds(copiedDate.getSeconds()+delta);else if("month"===mode)copiedDate.setMonth(copiedDate.getMonth()+delta);else{if("year"!==mode)throw new Error("invalid mode");copiedDate.setFullYear(copiedDate.getFullYear()+delta)}return copiedDate};static getDateDelta=(fromDate,toDate,mode="date")=>{if(!(fromDate instanceof Date))throw new Error("invalid input 0");if(!(toDate instanceof Date))throw new Error("invalid input 0");let delta,fromValue,toValue;if("string"!=typeof mode&&(mode="date"),fromValue=fromDate.valueOf(),toValue=toDate.valueOf(),"date"===mode)delta=Math.round((fromValue-toValue)/1e3/60/60/24);else if("hour"===mode)delta=Math.round((fromValue-toValue)/1e3/60/60);else if("minute"===mode)delta=Math.round((fromValue-toValue)/1e3/60);else if("second"===mode)delta=Math.round((fromValue-toValue)/1e3);else if("month"===mode)delta=Math.round((fromValue-toValue)/1e3/60/60/24/30);else{if("year"!==mode)throw new Error("invalid mode");delta=Math.round((fromValue-toValue)/1e3/60/60/24/365)}return Math.abs(delta)};static autoHypenPhone=m=>{let tmp,str=m.trim();return str=str.replace(/[^0-9]/g,""),tmp="",str.length<4?str:str.length<7?(tmp+=str.slice(0,3),tmp+="-",tmp+=str.slice(3),tmp):str.length<11?(tmp+=str.slice(0,3),tmp+="-",tmp+=str.slice(3,6),tmp+="-",tmp+=str.slice(6),tmp):(tmp+=str.slice(0,3),tmp+="-",tmp+=str.slice(3,7),tmp+="-",tmp+=str.slice(7),tmp)};static returnGet=()=>{let obj={},target=document.location.search,decode=str=>decodeURIComponent(str.split("+").join(" "));return target.replace(/\??(?:([^=]+)=([^&]*)&?)/g,(origin,p1,p2)=>(obj[decode(p1)]=decode(p2),"")),obj};static parsingPath=()=>document.location.pathname.split("/").slice(1);static specialFilter=(target,liteMode=!1)=>liteMode?target.replace(/[\*\^\:\&\<\>\;\=\#\$\[\]\\\|\(\)\`\'\"\{\}]/gi,"").trim():target.replace(/[\*\!\?\~\^\:\/\%\&\+\<\>\;\=\#\$\[\]\\\|\(\)\`\'\"\{\}]/gi,"").trim();static stringifyError=e=>{if(e instanceof Error)return`errorMessage: ${e.message}\nstack: ${e.stack||""}`;try{return JSON.stringify(e)}catch{return String(e)}};static objectToMatrix=obj=>{let tong,tempArr;tong=[];for(let key in obj)tempArr=new Array(2),tempArr[0]=key,tempArr[1]=obj[key],tong.push(tempArr);return tong};static parseRatio=options=>{let ratio_raw,number0,number1,result,result_return,obj=options,srcArr=obj.source.split("_"),ratio=0;for(let i=0;i<srcArr.length;i++)/^[0-9]+rspot/.test(srcArr[i])&&(ratio_raw=srcArr[i].split("rspot"),number0=Number(ratio_raw[0]),number1=void 0===ratio_raw[1]||0===ratio_raw[1].length?0:1===ratio_raw[1].length?Number(ratio_raw[1])/10:2===ratio_raw[1].length?Number(ratio_raw[1])/100:3===ratio_raw[1].length?Number(ratio_raw[1])/1e3:0,ratio=number0+number1);return result="height"===obj.method?ratio*obj.target:obj.target/ratio,result_return=result,"string"===obj.result&&(result_return=String(result)),result_return};static addHrefEvent=(dom,to)=>{dom.addEventListener("click",function(e){window.location.href=to})};static addScrollXEvent=(node,name="")=>{const today=new Date,todayConst=String(today.getFullYear())+String(today.getMonth()+1)+String(today.getDate());""===name&&(name=node.nodeName+"_"+String(today.getTime()+Math.round(1e3*Math.random())));const keyName=name+"_"+todayConst,variablesName={isDown:"isDown_"+keyName,startX:"startX_"+keyName,scrollLeft:"scrollLeft_"+keyName,mouseDown:"mouseDown_"+keyName,mouseLeave:"mouseLeave_"+keyName,mouseUp:"mouseUp_"+keyName,mouseMove:"mouseMove_"+keyName,events:[{target:"mousedown",name:"mouseDown_"+keyName},{target:"mouseleave",name:"mouseLeave_"+keyName},{target:"mouseup",name:"mouseUp_"+keyName},{target:"mousemove",name:"mouseMove_"+keyName}]};return AbstractNode.stacks[variablesName.isDown]=!1,AbstractNode.stacks[variablesName.startX]=0,AbstractNode.stacks[variablesName.scrollLeft]=0,AbstractNode.events[variablesName.mouseDown]=function(e){AbstractNode.stacks[variablesName.isDown]=!0,AbstractNode.stacks[variablesName.startX]=e.pageX-node.offsetLeft,AbstractNode.stacks[variablesName.scrollLeft]=node.scrollLeft,node.style.cursor="grabbing"},AbstractNode.events[variablesName.mouseLeave]=function(){AbstractNode.stacks[variablesName.isDown]=!1,node.style.cursor="pointer"},AbstractNode.events[variablesName.mouseUp]=function(){AbstractNode.stacks[variablesName.isDown]=!1,node.style.cursor="pointer"},AbstractNode.events[variablesName.mouseMove]=function(e){let x,walk;AbstractNode.stacks[variablesName.isDown]&&(e.preventDefault(),x=e.pageX-node.offsetLeft,walk=x-AbstractNode.stacks[variablesName.startX],node.scrollLeft=AbstractNode.stacks[variablesName.scrollLeft]-walk,node.style.cursor="grabbing")},node.addEventListener("mousedown",AbstractNode.events[variablesName.mouseDown]),node.addEventListener("mouseleave",AbstractNode.events[variablesName.mouseLeave]),node.addEventListener("mouseup",AbstractNode.events[variablesName.mouseUp]),node.addEventListener("mousemove",AbstractNode.events[variablesName.mouseMove]),variablesName};static getDateMatrix=(year,month)=>{let tempObj,tempArr,tempArr2,tempArr3;if(void 0===year&&(year=new Date),"today"===year||void 0===year&&void 0===month?(tempObj=new Date,year=tempObj.getFullYear(),month=tempObj.getMonth()):"string"==typeof year&&void 0===month&&/\-/g.test(year)?(10===year.length?(tempArr=year.split("-"),tempObj=new Date(Number(tempArr[0]),Number(tempArr[1].replace(/^0/,""))-1,Number(tempArr[2].replace(/^0/,"")))):(tempArr=year.split(" "),tempArr2=tempArr[0].split("-"),tempArr3=tempArr[1].split(":"),tempObj=new Date(Number(tempArr2[0]),Number(tempArr2[1].replace(/^0/,""))-1,Number(tempArr2[2].replace(/^0/,"")),Number(tempArr3[0].replace(/^0/,"")),Number(tempArr3[1].replace(/^0/,"")),Number(tempArr3[2].replace(/^0/,"")))),year=tempObj.getFullYear(),month=tempObj.getMonth()):"object"==typeof year&&null!==year&&year instanceof Date&&(month=year.getMonth(),year=year.getFullYear()),year=Number(year),month=Number(month),Number.isNaN(year)||Number.isNaN(month))throw new Error("invalid input");const firstDay=new Date(year,month,1).getDay(),lastDate=((year,month)=>{const today=new Date(year,month,1);let newMonth,lastDate;lastDate=-1;for(let i=27;i<33;i++)if(today.setDate(i),newMonth=today.getMonth(),month!==newMonth){lastDate=i-1;break}return lastDate})(year,month);let tempDate,arr,tong,pastLength,result,num,matrixResult;if(result=new DateMatrix(year,month),tong=[],arr=[],0!==firstDay)for(let i=0;i<firstDay-1;i++)arr.push(null);else for(let i=0;i<6;i++)arr.push(null);for(let i=1;i<lastDate+1;i++)tempDate=new Date(year,month,i),arr.push(tempDate.getDay()),arr.length%7==0&&(tong.push(arr),arr=[]);if(7!==arr.length&&0!==arr.length){pastLength=arr.length;for(let i=0;i<7-pastLength;i++)arr.push(null);tong.push(arr)}matrixResult=[],num=1;for(let arr of tong){const thisWeek=[];for(let i=0;i<arr.length;i++)if(null!==arr[i]){const thisFactor=new DateFactor(year,month,num,i);thisWeek.push(thisFactor),num++}else thisWeek.push(null);matrixResult.push(thisWeek)}return result.matrix=matrixResult,result};static sleep=time=>{let timeoutId=null;return new Promise((resolve,reject)=>{timeoutId=setTimeout(function(){resolve("awake"),clearTimeout(timeoutId),timeoutId=null},time)})};static downloadString=(text,fileName,fileType="plain")=>{let blob,a,timeoutId;fileType=/csv/gi.test(fileType)?"text/csv":/json/gi.test(fileType)?"application/json":/js/gi.test(fileType)?"application/js":/svg/gi.test(fileType)?"image/svg+xml":/xml/gi.test(fileType)?"application/xml":/html/gi.test(fileType)?"text/html":/pdf/gi.test(fileType)?"application/pdf":"text/plain",blob=new Blob([text],{type:fileType}),a=document.createElement("A"),a.download=fileName,a.href=URL.createObjectURL(blob),a.dataset.downloadurl=[fileType,a.download,a.href].join(":"),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),timeoutId=setTimeout(()=>{URL.revokeObjectURL(a.href),clearTimeout(timeoutId)},1e3)};static blankHref=(link,downloadMode=!1,fileName="downloadFile")=>{let a;a=document.createElement("A"),a.style.display="none",a.href=link,downloadMode&&(a.download=fileName),a.setAttribute("target","_blank"),document.body.appendChild(a),a.click(),document.body.removeChild(a)};static selfHref=link=>{window.location.assign(link)};static styleInjection=(dom,styleObj)=>{let thisStyleKey;for(let i in styleObj)thisStyleKey=i,dom.style[thisStyleKey]=styleObj[i]};static cssInjection=cssString=>{const style=document.querySelector("style");null!==style&&style.insertAdjacentHTML("beforeend",cssString)};static uniqueValue=(type="number")=>{if("number"===type)return Number(String((new Date).valueOf())+String(Math.round(1e4*Math.random())));if("string"===type)return String((new Date).valueOf())+String(Math.round(1e4*Math.random()));if("date"===type){const zeroAddition=num=>num<10?`0${String(num)}`:String(num),date=new Date;return`${String(date.getFullYear())}${zeroAddition(date.getMonth()+1)}${zeroAddition(date.getDate())}${zeroAddition(date.getHours())}${zeroAddition(date.getMinutes())}${zeroAddition(date.getSeconds())}`}if("hex"===type){const x=16,length=11,uniqueNumber=(new Date).valueOf(),hexChars=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],randomKeyWords=["A","B","C","D","E","F"];let uniqueNumber_copied,maxExponent,cArr,temp,hexString;for(uniqueNumber_copied=uniqueNumber,maxExponent=0;Math.pow(x,maxExponent)<=uniqueNumber;)maxExponent++;cArr=[];for(let i=0;i<maxExponent;i++)temp=uniqueNumber_copied/Math.pow(x,i)%x,cArr.push(temp),uniqueNumber_copied-=temp*Math.pow(x,i);hexString=cArr.map(index=>hexChars[index]).join("");for(let i=0;i<length;i++)hexString+=hexChars[Math.floor(hexChars.length*Math.random())];return randomKeyWords[Math.floor(randomKeyWords.length*Math.random())]+randomKeyWords[Math.floor(randomKeyWords.length*Math.random())]+hexChars[Math.floor(hexChars.length*Math.random())]+randomKeyWords[Math.floor(randomKeyWords.length*Math.random())]+String(uniqueNumber)+"A"+hexString}if("short"===type){const lengthDelta=8,alphabet="abcdefghijklmnopqrstuvwxyz0123456789",alphabetLength=alphabet.length,buffer=new Uint8Array(lengthDelta);window.crypto.getRandomValues(buffer);let id="";for(let i=0;i<lengthDelta;i++){id+=alphabet[buffer[i]%alphabetLength]}return id}return String((new Date).valueOf())+String(Math.round(1e4*Math.random()))};static animateDom=async(args,option=null)=>await CreateDom.animate(args,option);static copyText=async str=>{try{await window.navigator.clipboard.writeText(str)}catch(e){console.log(e)}};static isMac=()=>!/Windows/gi.test(window.navigator.userAgent);static isIphone=()=>/iPhone/gi.test(window.navigator.userAgent);static cleanChildren=dom=>{if(Array.isArray(dom))for(let d of dom)for(;null!==d.firstChild&&void 0!==d.firstChild;)d.removeChild(d.firstChild);else for(;null!==dom.firstChild&&void 0!==dom.firstChild;)dom.removeChild(dom.firstChild)};static objectDeepCopy=obj=>AbstractNode.equalJson(JSON.stringify(obj));static pixelUnit=num=>`${String(num)}px`;static eaUnit=num=>{const thisEa=AbstractNode.mediaEa();return`${String(num)}${thisEa}`};static percent=num=>void 0===num||"number"!=typeof num?"100%":`${String(num)}%`;static hexaJson=async(input,middleMode=!1)=>{const tokenStart="__hexaFunctionStart__<<<",tokenEnd=">>>__hexaFunctionEnd__",hexaFunction=async input=>{try{const hexEncode=str=>{let hex,result="";for(let i=0;i<str.length;i++)hex=str.charCodeAt(i).toString(16),result+=String("000"+hex).slice(-4);return result},hexDecode=hash=>{let hexes=hash.match(/.{1,4}/g)||[],back="";for(let j=0;j<hexes.length;j++)back+=String.fromCharCode(parseInt(hexes[j],16));return back},toHex=str=>new Promise((resolve,reject)=>{resolve(hexEncode(str))}),toFunction=hash=>new Promise((resolve,reject)=>{resolve(hexDecode(hash))});let functionString,functionString_copied,argString,argArr,decodeFunction,asyncBoo;if("function"==typeof input)return tokenStart+await toHex(input.toString())+tokenEnd;if("string"==typeof input){if(new RegExp("^"+tokenStart).test(input)&&new RegExp(tokenEnd+"$").test(input)){if(input=input.replace(new RegExp("^"+tokenStart),"").replace(new RegExp(tokenEnd+"$"),""),functionString=await toFunction(input),functionString_copied=String(functionString).trim(),argString="",asyncBoo=/^async/.test(functionString_copied),/^(async function|function)/i.test(functionString_copied)?functionString_copied.replace(/^(async function|function) [^\(]*\(([^\)]*)\)[ ]*\{/,(match,p1,p2)=>(argString=p2.trim(),"")):functionString_copied.replace(/^(async \(|\()([^\)]*)\)[ ]*\=\>[ ]*\{/,(match,p1,p2)=>(argString=p2.trim(),"")),argString=argString.replace(/[ ]*\=[ ]*[\{\[][^\=]*[\}\]]/gi,""),argString=argString.replace(/[ ]*\=[ ]*[^,]+/gi,""),argArr=argString.split(",").map(str=>str.trim()),argArr.some(str=>/ /gi.test(str)))throw new Error("invaild argument name");return decodeFunction=asyncBoo?new AsyncFunction(...argArr,functionString.trim().replace(/^(async[ ]*function[ ]*[^\(]*\([^\)]*\)[ ]*\{|async[ ]*\([^\)]*\)[ ]*\=\>[ ]*\{)/,"").replace(/\}$/,"")):new Function(...argArr,functionString.trim().replace(/^(function[ ]*[^\(]*\([^\)]*\)[ ]*\{|\([^\)]*\)[ ]*\=\>[ ]*\{)/,"").replace(/\}$/,"")),decodeFunction}return input}throw new Error("invaild input")}catch(e){console.log(e)}};try{if("function"==typeof input)return await hexaFunction(input);if("object"==typeof input){if(null===input)return null;{const toJson=async function(obj){try{for(let i in obj)"function"==typeof obj[i]?obj[i]=await hexaFunction(obj[i]):"object"==typeof obj[i]&&null!==obj[i]&&(obj[i]=await toJson(obj[i]));return obj}catch(e){return obj}};return middleMode?await toJson(input):JSON.stringify(await toJson(input))}}if("string"==typeof input){if(new RegExp("^"+tokenStart).test(input))return await hexaFunction(input);{const toObj=async function(obj){try{for(let i in obj)"string"==typeof obj[i]&&new RegExp("^"+tokenStart).test(obj[i])?obj[i]=await hexaFunction(obj[i]):"object"==typeof obj[i]&&null!==obj[i]&&(obj[i]=await toObj(obj[i]));return obj}catch(e){return obj}};return await toObj(AbstractNode.equalJson(input))}}return null}catch(e){return console.log(e),null}};static autoComma=(str,manVersion=!1)=>{let minus,count,countArr,execResult,temp,tempArr;if("number"==typeof str&&(str=String(Math.floor(str))),/e/gi.test(str))throw new Error("is too heavy");if(execResult=/\-/g.exec(str),minus=null!==execResult?execResult[0]:"",""===(str=str.replace(/[^0-9]/g,"")))throw new Error("invaild number");manVersion&&(str=String(Math.floor(Number(str)/1e4))),count=Math.ceil(str.length/3),countArr=[];for(let i=0;i<count;i++)countArr.push([3*i,3*(i+1)]);if(0===countArr.length)throw new Error("invaild number");tempArr=[];for(let arr of countArr){temp="";for(let i=arr[0];i<arr[1];i++)str.length-1-i<0?temp+="":temp=str[str.length-1-i]+temp;""!==temp&&tempArr.unshift(temp)}return manVersion?minus+tempArr.join(",")+"만":minus+tempArr.join(",")};static dateToString=(date,detail=!1,dayOption=!1)=>{const dayday=["일","월","화","수","목","금","토"];null==detail&&(detail=!1);const zeroAddition=num=>num<10?`0${String(num)}`:String(num),emptyDateValue=new Date(1900,0,1).valueOf(),futureDateValue=new Date(3e3,0,1).valueOf();return date.valueOf()<=emptyDateValue?"해당 없음":date.valueOf()>=futureDateValue?"예정":detail?dayOption?`${String(date.getFullYear())}-${zeroAddition(date.getMonth()+1)}-${zeroAddition(date.getDate())} ${zeroAddition(date.getHours())}:${zeroAddition(date.getMinutes())}:${zeroAddition(date.getSeconds())} ${dayday[date.getDay()]}요일`:`${String(date.getFullYear())}-${zeroAddition(date.getMonth()+1)}-${zeroAddition(date.getDate())} ${zeroAddition(date.getHours())}:${zeroAddition(date.getMinutes())}:${zeroAddition(date.getSeconds())}`:`${String(date.getFullYear())}-${zeroAddition(date.getMonth()+1)}-${zeroAddition(date.getDate())}`};static dateToHangul=(date,shortYear=!1)=>{const emptyDateValue=new Date(1900,0,1).valueOf(),futureDateValue=new Date(3e3,0,1).valueOf();return date.valueOf()<=emptyDateValue?"해당 없음":date.valueOf()>=futureDateValue?"예정":shortYear?`${String(date.getFullYear()).slice(2)}년 ${String(date.getMonth()+1)}월 ${String(date.getDate())}일`:`${String(date.getFullYear())}년 ${String(date.getMonth()+1)}월 ${String(date.getDate())}일`};static zeroAddition=num=>num<10?`0${String(num)}`:String(num);static stringToDate=str=>{if(str instanceof Date)return str;if("number"==typeof str)return new Date(str);if("string"!=typeof str)throw new Error("invaild input");if(""===str.trim()||"-"===str.trim()||/없음/gi.test(str))return new Date(1800,0,1);if("예정"===str.trim()||"진행중"===str.trim()||"미정"===str.trim())return new Date(3800,0,1);const zeroAddition=function(num){return num<10?`0${String(num)}`:String(num)};let tempArr,tempArr2,tempArr3,tempArr4,tempArr5;if(str=str.trim().replace(/[\~\t]/gi,"").trim(),/T/g.test(str)&&/Z$/.test(str)&&/^[0-9]/.test(str)&&/\-/g.test(str)&&/\:/g.test(str)&&!Number.isNaN(new Date(str).getTime()))return new Date(str);if(!/^[0-9][0-9][0-9][0-9]\-[0-9][0-9]\-[0-9][0-9]$/.test(str)&&!/^[0-9][0-9][0-9][0-9]\-[0-9][0-9]\-[0-9][0-9] [0-9][0-9]\:[0-9][0-9]\:[0-9][0-9]$/.test(str))if(/^[0-9][0-9][ ]*\-[ ]*[0-9][0-9][ ]*\-[ ]*[0-9][0-9]$/.test(str))str="20"+(str=str.split("-").map(s=>s.trim()).join("-"));else if(/^[0-9][0-9][0-9][0-9][ ]*\-[ ]*[0-9][0-9]$/.test(str))str=str.split("-").map(s=>s.trim()).join("-"),str+="-01";else if(/^[0-9][0-9][ ]*\-[ ]*[0-9][0-9]$/.test(str))str="20"+(str=str.split("-").map(s=>s.trim()).join("-"))+"-01";else if(/^[0-9][0-9][ ]*[년][ ]*[0-9]/.test(str))tempArr=str.split("년").map(s=>s.trim()),/월/gi.test(str)?(tempArr4=tempArr[1].trim().split("월"),str=/일/gi.test(str)?String(Number(tempArr[0].replace(/[^0-9]/gi,""))+2e3)+"-"+zeroAddition(Number(tempArr4[0].replace(/[^0-9]/gi,"")))+"-"+zeroAddition(Number(tempArr4[1].split("일")[0].replace(/[^0-9]/gi,""))):String(Number(tempArr[0].replace(/[^0-9]/gi,""))+2e3)+"-"+zeroAddition(Number(tempArr4[0].replace(/[^0-9]/gi,"")))+"-01"):str=String(Number(tempArr[0].replace(/[^0-9]/gi,""))+2e3)+"-"+zeroAddition(Number(tempArr[1].replace(/[^0-9]/gi,"")))+"-01";else if(/^[0-9][0-9][0-9][0-9][ ]*[년][ ]*[0-9]/.test(str))tempArr=str.split("년").map(s=>s.trim()),/월/gi.test(str)?(tempArr4=tempArr[1].trim().split("월"),str=/일/gi.test(str)?String(Number(tempArr[0].replace(/[^0-9]/gi,"")))+"-"+zeroAddition(Number(tempArr4[0].replace(/[^0-9]/gi,"")))+"-"+zeroAddition(Number(tempArr4[1].split("일")[0].replace(/[^0-9]/gi,""))):String(Number(tempArr[0].replace(/[^0-9]/gi,"")))+"-"+zeroAddition(Number(tempArr4[0].replace(/[^0-9]/gi,"")))+"-01"):str=String(Number(tempArr[0].replace(/[^0-9]/gi,"")))+"-"+zeroAddition(Number(tempArr[1].replace(/[^0-9]/gi,"")))+"-01";else if(/^[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]$/.test(str.trim()))str=str.slice(0,4)+"-"+str.slice(4,6)+"-"+str.slice(6);else if(/^[0-9][0-9][0-9][0-9][0-9][0-9]$/.test(str.trim()))str="20"+str.slice(0,2)+"-"+str.slice(2,4)+"-"+str.slice(4);else if(/^[0-9][0-9][ ]*\-[ ]*[0-9]$/.test(str))tempArr5=(str=str.split("-").map(s=>s.trim()).join("-")).split("-"),str="20"+tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-01";else if(/^[0-9][0-9][0-9][0-9][ ]*\-[ ]*[0-9]$/.test(str))tempArr5=(str=str.split("-").map(s=>s.trim()).join("-")).split("-"),str=tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-01";else if(/^[0-9][0-9][ ]+[0-9][0-9]$/.test(str))tempArr5=(str=str.split(" ").map(s=>s.trim()).filter(s=>""!==s).join(" ")).split(" "),str="20"+tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-01";else if(/^[0-9][0-9][0-9][0-9][ ]+[0-9]$/.test(str))tempArr5=(str=str.split(" ").map(s=>s.trim()).filter(s=>""!==s).join(" ")).split(" "),str=tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-01";else if(/^[0-9][0-9][ ]+[0-9]$/.test(str))tempArr5=(str=str.split(" ").map(s=>s.trim()).filter(s=>""!==s).join(" ")).split(" "),str="20"+tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-01";else if(/^[0-9][0-9][0-9][0-9][ ]+[0-9]$/.test(str))tempArr5=(str=str.split(" ").map(s=>s.trim()).filter(s=>""!==s).join(" ")).split(" "),str=tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-01";else if(/^[0-9][0-9][0-9][0-9][ ]+[0-9][0-9][ ]+[0-9][0-9]$/.test(str))tempArr5=(str=str.split(" ").map(s=>s.trim()).filter(s=>""!==s).join(" ")).split(" "),str=tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][0-9][0-9][ ]+[0-9][ ]+[0-9][0-9]$/.test(str))tempArr5=(str=str.split(" ").map(s=>s.trim()).filter(s=>""!==s).join(" ")).split(" "),str=tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][0-9][0-9][ ]+[0-9][0-9][ ]+[0-9]$/.test(str))tempArr5=(str=str.split(" ").map(s=>s.trim()).filter(s=>""!==s).join(" ")).split(" "),str=tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][0-9][0-9][ ]+[0-9][ ]+[0-9]$/.test(str))tempArr5=(str=str.split(" ").map(s=>s.trim()).filter(s=>""!==s).join(" ")).split(" "),str=tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][ ]+[0-9][0-9][ ]+[0-9][0-9]$/.test(str))tempArr5=(str=str.split(" ").map(s=>s.trim()).filter(s=>""!==s).join(" ")).split(" "),str="20"+tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][ ]+[0-9][ ]+[0-9][0-9]$/.test(str))tempArr5=(str=str.split(" ").map(s=>s.trim()).filter(s=>""!==s).join(" ")).split(" "),str="20"+tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][ ]+[0-9][0-9][ ]+[0-9]$/.test(str))tempArr5=(str=str.split(" ").map(s=>s.trim()).filter(s=>""!==s).join(" ")).split(" "),str="20"+tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][ ]+[0-9][ ]+[0-9]$/.test(str))tempArr5=(str=str.split(" ").map(s=>s.trim()).filter(s=>""!==s).join(" ")).split(" "),str="20"+tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][ ]*\/[ ]*[0-9][0-9]$/.test(str))tempArr5=(str=str.split("/").map(s=>s.trim()).join("/")).split("/"),str="20"+tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-01";else if(/^[0-9][0-9][0-9][0-9][ ]*\/[ ]*[0-9][0-9]$/.test(str))tempArr5=(str=str.split("/").map(s=>s.trim()).join("/")).split("/"),str=tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-01";else if(/^[0-9][0-9][ ]*\/[ ]*[0-9]$/.test(str))tempArr5=(str=str.split("/").map(s=>s.trim()).join("/")).split("/"),str="20"+tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-01";else if(/^[0-9][0-9][0-9][0-9][ ]*\/[ ]*[0-9]$/.test(str))tempArr5=(str=str.split("/").map(s=>s.trim()).join("/")).split("/"),str=tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-01";else if(/^[0-9][0-9][0-9][0-9][ ]*\/[ ]*[0-9][0-9][ ]*\/[ ]*[0-9][0-9]$/.test(str))tempArr5=(str=str.split("/").map(s=>s.trim()).join("/")).split("/"),str=tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][0-9][0-9][ ]*\/[ ]*[0-9][ ]*\/[ ]*[0-9][0-9]$/.test(str))tempArr5=(str=str.split("/").map(s=>s.trim()).join("/")).split("/"),str=tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][0-9][0-9][ ]*\/[ ]*[0-9][0-9][ ]*\/[ ]*[0-9]$/.test(str))tempArr5=(str=str.split("/").map(s=>s.trim()).join("/")).split("/"),str=tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][0-9][0-9][ ]*\/[ ]*[0-9][ ]*\/[ ]*[0-9]$/.test(str))tempArr5=(str=str.split("/").map(s=>s.trim()).join("/")).split("/"),str=tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][ ]*\/[ ]*[0-9][0-9][ ]*\/[ ]*[0-9][0-9]$/.test(str))tempArr5=(str=str.split("/").map(s=>s.trim()).join("/")).split("/"),str="20"+tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][ ]*\/[ ]*[0-9][ ]*\/[ ]*[0-9][0-9]$/.test(str))tempArr5=(str=str.split("/").map(s=>s.trim()).join("/")).split("/"),str="20"+tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][ ]*\/[ ]*[0-9][0-9][ ]*\/[ ]*[0-9]$/.test(str))tempArr5=(str=str.split("/").map(s=>s.trim()).join("/")).split("/"),str="20"+tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][ ]*\/[ ]*[0-9][ ]*\/[ ]*[0-9]$/.test(str))tempArr5=(str=str.split("/").map(s=>s.trim()).join("/")).split("/"),str="20"+tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][ ]*\.[ ]*[0-9][0-9][ ]*\.?[ ]*$/.test(str))tempArr5=(str=str.split(".").map(s=>s.trim()).join(".")).split("."),str="20"+tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-01";else if(/^[0-9][0-9][0-9][0-9]\.[0-9][0-9][ ]*\.?[ ]*$/.test(str))tempArr5=(str=str.split(".").map(s=>s.trim()).join(".")).split("."),str=tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-01";else if(/^[0-9][0-9][ ]*\.[ ]*[0-9][ ]*\.?[ ]*$/.test(str))tempArr5=(str=str.split(".").map(s=>s.trim()).join(".")).split("."),str="20"+tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-01";else if(/^[0-9][0-9][0-9][0-9][ ]*\.[ ]*[0-9][ ]*\.?[ ]*$/.test(str))tempArr5=(str=str.split(".").map(s=>s.trim()).join(".")).split("."),str=tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-01";else if(/^[0-9][0-9][0-9][0-9][ ]*\.[ ]*[0-9][0-9][ ]*\.[ ]*[0-9][0-9]$/.test(str))tempArr5=(str=str.split(".").map(s=>s.trim()).join(".")).split("."),str=tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][0-9][0-9][ ]*\.[ ]*[0-9][ ]*\.[ ]*[0-9][0-9]$/.test(str))tempArr5=(str=str.split(".").map(s=>s.trim()).join(".")).split("."),str=tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][0-9][0-9][ ]*\.[ ]*[0-9][0-9][ ]*\.[ ]*[0-9]$/.test(str))tempArr5=(str=str.split(".").map(s=>s.trim()).join(".")).split("."),str=tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][0-9][0-9][ ]*\.[ ]*[0-9][ ]*\.[ ]*[0-9]$/.test(str))tempArr5=(str=str.split(".").map(s=>s.trim()).join(".")).split("."),str=tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][ ]*\.[ ]*[0-9][0-9][ ]*\.[ ]*[0-9][0-9]$/.test(str))tempArr5=(str=str.split(".").map(s=>s.trim()).join(".")).split("."),str="20"+tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][ ]*\.[ ]*[0-9][ ]*\.[ ]*[0-9][0-9]$/.test(str))tempArr5=(str=str.split(".").map(s=>s.trim()).join(".")).split("."),str="20"+tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][ ]*\.[ ]*[0-9][0-9][ ]*\.[ ]*[0-9]$/.test(str))tempArr5=(str=str.split(".").map(s=>s.trim()).join(".")).split("."),str="20"+tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][ ]*\.[ ]*[0-9][ ]*\.[ ]*[0-9]$/.test(str))tempArr5=(str=str.split(".").map(s=>s.trim()).join(".")).split("."),str="20"+tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9]\. [0-9][0-9][ ]*\.?[ ]*$/.test(str))tempArr5=str.split(". "),str="20"+tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-01";else if(/^[0-9][0-9][0-9][0-9]\. [0-9][0-9][ ]*\.?[ ]*$/.test(str))tempArr5=str.split(". "),str=tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-01";else if(/^[0-9][0-9]\. [0-9][ ]*\.?[ ]*$/.test(str))tempArr5=str.split(". "),str="20"+tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-01";else if(/^[0-9][0-9][0-9][0-9]\. [0-9]\.?$/.test(str))tempArr5=str.split(". "),str=tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-01";else if(/^[0-9][0-9][0-9][0-9]\. [0-9][0-9]\. [0-9][0-9]$/.test(str))tempArr5=str.split(". "),str=tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][0-9][0-9]\. [0-9]\. [0-9][0-9]$/.test(str))tempArr5=str.split(". "),str=tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][0-9][0-9]\. [0-9][0-9]\. [0-9]$/.test(str))tempArr5=str.split(". "),str=tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9][0-9][0-9]\. [0-9]\. [0-9]$/.test(str))tempArr5=str.split(". "),str=tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9]\. [0-9][0-9]\. [0-9][0-9]$/.test(str))tempArr5=str.split(". "),str="20"+tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9]\. [0-9]\. [0-9][0-9]$/.test(str))tempArr5=str.split(". "),str="20"+tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else if(/^[0-9][0-9]\. [0-9][0-9]\. [0-9]$/.test(str))tempArr5=str.split(". "),str="20"+tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]));else{if(!/^[0-9][0-9]\. [0-9]\. [0-9]$/.test(str))throw new Error("not date string : "+str);tempArr5=str.split(". "),str="20"+tempArr5[0]+"-"+zeroAddition(Number(tempArr5[1]))+"-"+zeroAddition(Number(tempArr5[2]))}return/^[0-9][0-9][0-9][0-9]\-[0-9][0-9]\-[0-9][0-9]$/.test(str)?(tempArr=str.split("-"),new Date(Number(tempArr[0]),Number(tempArr[1])-1,Number(tempArr[2]))):(tempArr=str.split(" "),tempArr2=tempArr[0].split("-"),tempArr3=tempArr[1].split(":"),new Date(Number(tempArr2[0]),Number(tempArr2[1])-1,Number(tempArr2[2]),Number(tempArr3[0]),Number(tempArr3[1]),Number(tempArr3[2])))};static belowFixedIcon=(motherDom=null,clickEvent=async e=>{},contextEvent=async e=>{})=>{const colorChip=AbstractNode.colorExtended,{createAbstract,mediaNumber,withOut}=AbstractNode;let fixedIcon,baseWidth,right,bottom,iconWidth,visual;if(null===motherDom&&null!==document.getElementById("totalcontents")&&(motherDom=document.getElementById("totalcontents")),null===motherDom)throw new Error("invalid mother");return baseWidth=mediaNumber(55,55,52,48,12),right=mediaNumber(40,40,40,40,6),bottom=mediaNumber(41,41,41,41,6.4),iconWidth=mediaNumber(27,27,24,20,5.4),visual=mediaNumber(.5,.5,.5,.5,.15),fixedIcon=createAbstract({mother:motherDom,class:["contextPopupClassName"],event:{dblclick$contextmenu$selectstart:e=>e.preventDefault(),click$dblclick:clickEvent,contextmenu:contextEvent},style:{display:"flex",position:"fixed",cursor:"pointer",width:baseWidth,height:baseWidth,bottom,right,borderRadius:baseWidth,background:colorChip.gradientMint2,backdropFilter:"blur(3px)",animation:"talkfade 1.2s ease forwards",zIndex:String(112),justifyContent:"center",alignItems:"center",textAlign:"center"},children:[{style:{display:"flex",position:"relative",top:0,left:0,width:withOut(0),height:withOut(0),justifyContent:"center",alignItems:"center",textAlign:"center"},child:{mode:"svg",source:AbstractNode.svgMaker.smileDocuments(colorChip.white),style:{display:"inline-block",position:"relative",width:iconWidth,cursor:"pointer",left:visual}}}]}),{dom:fixedIcon,box:{width:baseWidth,height:baseWidth,bottom,right}}};static rangeToDate=str=>{if(!/ ~ /gi.test(str))throw new Error("invalid input");const[start,end]=str.split(" ~ ").map(s=>s.trim()).map(s=>AbstractNode.stringToDate(s));return new DateRange(start,end)};static loadExternalScript=(src,windowModuleName)=>new Promise((resolve,reject)=>{if(window[windowModuleName])return resolve(window[windowModuleName]);const script=document.createElement("script");script.src=src,/\.mjs$/i.test(src)&&(script.type="module"),script.onload=()=>{resolve(window[windowModuleName])},script.onerror=()=>{reject(new Error(`Failed to load script: ${src}`))},document.head.appendChild(script)});static linkToString=link=>{const nameToToken=name=>`_____${name}_____`,tokens={equal:nameToToken("equal"),amp:nameToToken("amp"),question:nameToToken("question"),hypen:nameToToken("hypen"),slash:nameToToken("slash"),colon:nameToToken("colon"),back:nameToToken("back"),sharp:nameToToken("sharp"),plus:nameToToken("plus"),percent:nameToToken("percent"),dot:nameToToken("dot"),wave:nameToToken("wave"),hat:nameToToken("hat"),angleBracketOpen:nameToToken("angleBracketOpen"),angleBracketClose:nameToToken("angleBracketClose"),questionMark:nameToToken("questionMark"),pipe:nameToToken("pipe"),doubleQuote:nameToToken("doubleQuote"),semicolon:nameToToken("semicolon")};let linkArr,protocol,host,pathName,search,getObj,filteredLink;if(/^http/.test(link)){if(linkArr=link.split("/"),linkArr.length<3)throw new Error("invalid link");protocol=linkArr[0].replace(/[\:]/gi,""),host=linkArr[2],pathName="/"+linkArr.slice(3).join("/"),/[\?]/gi.test(pathName)?(search=pathName.split("?")[1],pathName=pathName.split("?")[0]):search="",getObj=""!==search?search.split("&").map(str=>({key:str.split("=")[0],value:str.split("=")[1]})):[],pathName=pathName.split("/").map(str=>globalThis.encodeURIComponent(str)).join("/"),filteredLink=""===getObj.map(obj=>`${obj.key}=${obj.value}`).join("&")?protocol+"://"+host+pathName:protocol+"://"+host+pathName+"?"+getObj.map(obj=>`${obj.key}=${obj.value}`).join("&")}else pathName=link,pathName=pathName.split("/").map(str=>globalThis.encodeURIComponent(str)).join("/"),filteredLink=pathName;return filteredLink=filteredLink.replace(/[\=]/gi,tokens.equal),filteredLink=filteredLink.replace(/[\&]/gi,tokens.amp),filteredLink=filteredLink.replace(/[\?]/gi,tokens.question),filteredLink=filteredLink.replace(/[\-]/gi,tokens.hypen),filteredLink=filteredLink.replace(/[\/]/gi,tokens.slash),filteredLink=filteredLink.replace(/[\:]/gi,tokens.colon),filteredLink=filteredLink.replace(/[\\]/gi,tokens.back),filteredLink=filteredLink.replace(/[\#]/gi,tokens.sharp),filteredLink=filteredLink.replace(/[\+]/gi,tokens.plus),filteredLink=filteredLink.replace(/[\%]/gi,tokens.percent),filteredLink=filteredLink.replace(/[\.]/gi,tokens.dot),filteredLink=filteredLink.replace(/[\~]/gi,tokens.wave),filteredLink=filteredLink.replace(/[\^]/gi,tokens.hat),filteredLink=filteredLink.replace(/[<]/gi,tokens.angleBracketOpen),filteredLink=filteredLink.replace(/[>]/gi,tokens.angleBracketClose),filteredLink=filteredLink.replace(/[\?]/gi,tokens.questionMark),filteredLink=filteredLink.replace(/[\|]/gi,tokens.pipe),filteredLink=filteredLink.replace(/["]/gi,tokens.doubleQuote),filteredLink=filteredLink.replace(/[;]/gi,tokens.semicolon),filteredLink};static promiseTogether=promiseArr=>{if(!promiseArr.every(obj=>obj instanceof Promise))throw new Error("invaild input");return new Promise((resolve,reject)=>{const workLength=promiseArr.length;let promiseTong,interval,timeout;promiseTong=[];for(let i=0;i<workLength;i++)promiseArr[i].then(()=>{promiseTong.push(!0)}).catch(err=>{reject(err)});interval=setInterval(()=>{promiseTong.length>=workLength&&(timeout=setTimeout(()=>{resolve(!0),clearTimeout(timeout)},0),clearInterval(interval))},100)})};static stringToLink=string=>{const nameToToken=name=>`_____${name}_____`,tokens={equal:nameToToken("equal"),amp:nameToToken("amp"),question:nameToToken("question"),hypen:nameToToken("hypen"),slash:nameToToken("slash"),colon:nameToToken("colon"),back:nameToToken("back"),sharp:nameToToken("sharp"),plus:nameToToken("plus"),percent:nameToToken("percent"),dot:nameToToken("dot"),wave:nameToToken("wave"),hat:nameToToken("hat"),angleBracketOpen:nameToToken("angleBracketOpen"),angleBracketClose:nameToToken("angleBracketClose"),questionMark:nameToToken("questionMark"),pipe:nameToToken("pipe"),doubleQuote:nameToToken("doubleQuote"),semicolon:nameToToken("semicolon")};let filteredLink;return filteredLink=string,filteredLink=filteredLink.replace(new RegExp(tokens.equal,"gi"),"="),filteredLink=filteredLink.replace(new RegExp(tokens.amp,"gi"),"&"),filteredLink=filteredLink.replace(new RegExp(tokens.question,"gi"),"?"),filteredLink=filteredLink.replace(new RegExp(tokens.hypen,"gi"),"-"),filteredLink=filteredLink.replace(new RegExp(tokens.slash,"gi"),"/"),filteredLink=filteredLink.replace(new RegExp(tokens.colon,"gi"),":"),filteredLink=filteredLink.replace(new RegExp(tokens.back,"gi"),"\\"),filteredLink=filteredLink.replace(new RegExp(tokens.sharp,"gi"),"#"),filteredLink=filteredLink.replace(new RegExp(tokens.plus,"gi"),"+"),filteredLink=filteredLink.replace(new RegExp(tokens.percent,"gi"),"%"),filteredLink=filteredLink.replace(new RegExp(tokens.dot,"gi"),"."),filteredLink=filteredLink.replace(new RegExp(tokens.wave,"gi"),"~"),filteredLink=filteredLink.replace(new RegExp(tokens.hat,"gi"),"^"),filteredLink=filteredLink.replace(new RegExp(tokens.angleBracketOpen,"gi"),"<"),filteredLink=filteredLink.replace(new RegExp(tokens.angleBracketClose,"gi"),">"),filteredLink=filteredLink.replace(new RegExp(tokens.questionMark,"gi"),"?"),filteredLink=filteredLink.replace(new RegExp(tokens.pipe,"gi"),"|"),filteredLink=filteredLink.replace(new RegExp(tokens.doubleQuote,"gi"),'"'),filteredLink=filteredLink.replace(new RegExp(tokens.semicolon,"gi"),";"),filteredLink};static xyConverting=original=>{if(!Array.isArray(original))throw new Error("input must be array");if(original.length>0&&!original.every(arr=>Array.isArray(arr)))throw new Error("input must be matrix");let converted,tempArr;if(converted=[],original.length>0)for(let i=0;i<original[0].length;i++){tempArr=[];for(let arr of original)tempArr.push(arr[i]);converted.push(tempArr)}return converted};static prettyCalc=cssString=>{cssString=(cssString=(cssString=(cssString=(cssString=(cssString=(cssString=(cssString=(cssString=(cssString=(cssString=(cssString=(cssString=(cssString=cssString.replace(/^calc\(/gi,"(").replace(/\s+/g," ").trim()).replace(/calc/gi,"")).replace(/[^\s\+\-\/\*\(\)]+ \* [^\s\+\-\/\*\(\)]+/gi,match=>"("+match+")")).replace(/[^\s\+\-\/\*\(\)]+ \/ [^\s\+\-\/\*\(\)]+/gi,match=>"("+match+")")).replace(/([^\s\(\)\-\+\*\/])\+/gi,(match,p1)=>p1+" +")).replace(/([^\s\(\)\-\+\*\/])\-/gi,(match,p1)=>p1+" -")).replace(/([^\s\(\)\-\+\*\/])\*/gi,(match,p1)=>p1+" *")).replace(/([^\s\(\)\-\+\*\/])\//gi,(match,p1)=>p1+" /")).replace(/\+([^\s\(\)\-\+\*\/])/gi,(match,p1)=>"+ "+p1)).replace(/\-([^\s\(\)\-\+\*\/])/gi,(match,p1)=>"- "+p1)).replace(/\*([^\s\(\)\-\+\*\/])/gi,(match,p1)=>"* "+p1)).replace(/\/([^\s\(\)\-\+\*\/])/gi,(match,p1)=>"/ "+p1)).replace(/\s+/g," ").trim()).replace(/\s+\-\s+\-(\s*[0-9\.])/gi,(match,p1)=>" + "+p1.trim());const singleCalc=(target,minusMode=!1)=>{let result,thisMode,thisUnit,pastUnit,thisNumber,pastNumber,thisArr,rawArr,middleArr,justNumbers,pastStatus,doCut,minusArr,plusMiddleArr,middleMiddle;target=(target=(target=(target=(target=(target=(target=(target=(target=(target=target.replace(/\s+/g," ")).replace(/([^\s\(\)\-\+\*\/])\+/gi,(match,p1)=>p1+" +")).replace(/([^\s\(\)\-\+\*\/])\-/gi,(match,p1)=>p1+" -")).replace(/([^\s\(\)\-\+\*\/])\*/gi,(match,p1)=>p1+" *")).replace(/([^\s\(\)\-\+\*\/])\//gi,(match,p1)=>p1+" /")).replace(/\+([^\s\(\)\-\+\*\/])/gi,(match,p1)=>"+ "+p1)).replace(/\-([^\s\(\)\-\+\*\/])/gi,(match,p1)=>"- "+p1)).replace(/\*([^\s\(\)\-\+\*\/])/gi,(match,p1)=>"* "+p1)).replace(/\/([^\s\(\)\-\+\*\/])/gi,(match,p1)=>"/ "+p1)).replace(/\s+/g," "),minusMode||(target=(target=target.replace(/ \+\s+\-\s+([0-9]+)/gis,(match,p1)=>" + -"+p1)).replace(/ \- ([0-9]+)/gis,(match,p1)=>" + -"+p1)),rawArr=(target=(target=target.replace(/\s+\-\s+\-(\s*[0-9\.])/gi,(match,p1)=>" + "+p1.trim())).replace(/\s+/g," ").trim()).split(" "),middleArr=[],doCut=!0,pastStatus=!1,rawArr.forEach((s,i)=>{pastStatus?["+"].includes(s.trim())?pastStatus=!1:["-"].includes(s.trim())?(middleArr=middleArr.slice(0,-1),middleArr.push("+"),pastStatus=!1):["*","/"].includes(s.trim())?(middleArr=middleArr.slice(0,-1),middleArr.push(s),pastStatus=!0,doCut=!1):(doCut&&(middleArr=middleArr.slice(0,-1)),middleArr.push("-"+s),pastStatus=!1,doCut=!1):(middleArr.push(s),pastStatus=["-"].includes(s.trim()),doCut=!0)}),minusMode?(minusArr=[],pastStatus=!1,middleArr.forEach((s,i,arr)=>{["-","+","*","/"].includes(s.trim())||"string"==typeof arr[i-1]&&(["-","+","*","/"].includes(arr[i-1].trim())||minusArr.push("+")),minusArr.push(s)}),thisArr=minusArr):(pastStatus=!1,middleArr.some(s=>["*","/"].includes(s.trim()))?(justNumbers=middleArr,plusMiddleArr=middleArr):(justNumbers=middleArr.filter(s=>!["-","+","*","/"].includes(s.trim())),justNumbers.sort((a,b)=>String(a.replace(/[0-9\-\.]/gi,"")).charCodeAt(0)-String(b.replace(/[0-9\-\.]/gi,"")).charCodeAt(0)),plusMiddleArr=justNumbers.map(s=>s.trim()).filter(s=>""!==s).join(" + ").split(" ")),thisArr=plusMiddleArr),result="",thisUnit="",pastUnit="",thisNumber=0,pastNumber=0,thisMode="none";for(let t of thisArr)if("-"===t)thisMode="minus";else if("+"===t)thisMode="plus";else if("*"===t)thisMode="multiply";else if("/"===t)thisMode="divide";else if(thisUnit=t.replace(/[\-\.0-9]/gi,"").trim(),thisNumber=Number(t.replace(/[^\-\.0-9]/gi,"").trim()),"plus"===thisMode)0===thisNumber||(pastUnit===thisUnit?(result=1===result.split(" ").length?String(pastNumber+thisNumber)+thisUnit:result.split(" ").slice(0,-1).join(" ")+" "+String(pastNumber+thisNumber)+thisUnit,pastUnit=thisUnit,pastNumber+=thisNumber):(result=result+" + "+String(thisNumber)+thisUnit,pastUnit=thisUnit,pastNumber=thisNumber));else if("minus"===thisMode)0===thisNumber||(pastUnit===thisUnit?(result=1===result.split(" ").length?String(pastNumber-thisNumber)+thisUnit:result.split(" ").slice(0,-1).join(" ")+" "+String(pastNumber-thisNumber)+thisUnit,pastUnit=thisUnit,pastNumber-=thisNumber):(result=result+" - "+String(thisNumber)+thisUnit,pastUnit=thisUnit,pastNumber=thisNumber));else if("multiply"===thisMode)if(0===thisNumber)result=String(0),pastUnit="",pastNumber=0;else if(""===thisUnit||pastUnit===thisUnit){if(1!==result.split(" ").length)throw new Error("impossible case");result=String(pastNumber*thisNumber)+pastUnit,pastNumber*=thisNumber,pastUnit=thisUnit}else result=result+" * "+String(thisNumber)+thisUnit,pastUnit=thisUnit,pastNumber=thisNumber;else if("divide"===thisMode){if(0===thisNumber)throw new Error("impossible case");if(""===thisUnit||pastUnit===thisUnit){if(1!==result.split(" ").length)throw new Error("impossible case");result=String(pastNumber/thisNumber)+pastUnit,pastNumber/=thisNumber,pastUnit=thisUnit}else result=result+" / "+String(thisNumber)+thisUnit,pastUnit=thisUnit,pastNumber=thisNumber}else result=String(thisNumber)+thisUnit,pastUnit=thisUnit,pastNumber=thisNumber;if(middleMiddle="",result=result.trim(),0===Number(result.replace(/[^0-9\-\.]/gi,"")))return"  0  ";if(result="  "+result+"  ",minusMode){middleMiddle=" "+result.split(" ").map(s=>s.trim()).filter(s=>""!==s).map((s,index,arr)=>["+","-","*","/"].includes(s.trim())?"+"===s?"-":"-"===s?"+":s:"string"==typeof arr[index-1]&&["-"].includes(arr[index-1])||"string"==typeof arr[index-1]&&["+"].includes(arr[index-1])?s:/^\-/gis.test(s)?s.replace(/^\-/gis,""):"-"+s).join(" ")+" "}else middleMiddle=result;return middleMiddle=middleMiddle.replace(/\s+\-\s+\-(\s*[0-9\.])/gi,(match,p1)=>" + "+p1.trim()),middleMiddle},distributiveDivide=target=>{let innerTarget,innerTargetArr,coreNumber;if(target=target.replace(/\s+/g," ").trim(),innerTarget="",target.replace(/(\()([^\(\)]+)(\))/gis,(match,p1,p2,p3)=>(innerTarget=p2.trim(),match)),innerTargetArr=innerTarget.split(" "),coreNumber=Number(target.split(" ").at(-1)),Number.isNaN(coreNumber))throw new Error("invalid status");if(0===coreNumber)throw new Error("impossible case");return innerTargetArr=innerTargetArr.map(s=>/[0-9]/gi.test(s)?String(Number(s.replace(/[^0-9\-\.]/gis,""))/coreNumber)+s.replace(/[0-9\-\.]/gis,""):s),"(  "+innerTargetArr.join(" ").trim()+"  )"},distributiveMultiply=target=>{let innerTarget,innerTargetArr,coreNumber;if(target=target.replace(/\s+/g," ").trim(),innerTarget="",target.replace(/(\()([^\(\)]+)(\))/gis,(match,p1,p2,p3)=>(innerTarget=p2.trim(),match)),innerTargetArr=innerTarget.split(" "),coreNumber=Number(target.split(" ").at(-1)),Number.isNaN(coreNumber))throw new Error("invalid status");return innerTargetArr=innerTargetArr.map(s=>/[0-9]/gi.test(s)?String(Number(s.replace(/[^0-9\-\.]/gis,""))*coreNumber)+s.replace(/[0-9\-\.]/gis,""):s),"(  "+innerTargetArr.join(" ").trim()+"  )"};let pastResult,thisResult,moreBoo,safeNum;for(moreBoo=!0,pastResult="-1",thisResult="",safeNum=0;moreBoo;){if(safeNum>1e4)throw new Error("calculation fail");thisResult=cssString=(cssString=(cssString=(cssString=(cssString=(cssString=cssString.replace(/([^\s\-\+\*\/]\s*)(\-)(\s*)(\()([^\(\)]+)(\))/gis,(match,p1,p2,p3,p4,p5,p6)=>p1+" + "+p3+" ("+singleCalc(p5,!0)+") ")).replace(/\s+/g," ").trim().replace(/\s+\)/g,")").replace(/\(\s+/g,"(").trim()).replace(/([^\s\-\+\*\/]\s*)(\+)(\s*)(\-)(\s*)(\()([^\(\)]+)(\))/gis,(match,p1,p2,p3,p4,p5,p6,p7,p8)=>p1+" +   ("+singleCalc(p7,!0)+") ")).replace(/\s+/g," ").trim().replace(/\s+\)/g,")").replace(/\(\s+/g,"(").trim()).replace(/([^0-9\.]*)\s*([0-9\-\.]+)(\s*)(\*|\/)(\s*)(\()([^\(\)]+)(\))/gis,(match,p0,p1,p2,p3,p4,p5,p6,p7)=>"/"===p3.trim()?distributiveDivide("("+singleCalc(p6)+") "+p3.trim()+" "+p1.replace(/\s/gis,"").trim()):distributiveMultiply("("+singleCalc(p6)+") "+p3.trim()+" "+p1.replace(/\s/gis,"").trim()))).replace(/(\()([^\(\)]+)(\))(\s*)(\*|\/)?(\s*)?(\-?\s*[0-9\.]+)?/gis,(match,p1,p2,p3,p4,p5,p6,p7)=>"string"==typeof p5?"/"===p5.trim()?distributiveDivide("("+singleCalc(p2)+") "+p5.trim()+" "+p7.replace(/\s/gis,"").trim()):distributiveMultiply("("+singleCalc(p2)+") "+p5.trim()+" "+p7.replace(/\s/gis,"").trim()):singleCalc(p2)+("string"==typeof p7?" "+p7:"")),thisResult=thisResult.replace(/\s+/g," ").replace(/\s+\)/g,")").replace(/\(\s+/g,"("),moreBoo=thisResult!==pastResult,pastResult=thisResult,safeNum++}const realFinal=thisResult.trim().replace(/ \+ \-([0-9]+)/gis,(match,p1)=>" - "+p1);return/\s/gi.test(realFinal)?"calc("+realFinal+")":realFinal};static cssCalc=(x,mode,y,prettyMode=!1)=>{if("string"!=typeof mode)throw new Error("invalid mode => plus, minus, multiple, divide");const thisEa=AbstractNode.mediaEa();let targetX,targetY,resultString;if("string"==typeof x)targetX=x;else{if("number"!=typeof x)throw new Error("invalid input x");targetX=String(x)+thisEa}if("string"==typeof y)targetY=y;else{if("number"!=typeof y)throw new Error("invalid input y");targetY="divide"===mode||"/"===mode||"multiple"===mode||"*"===mode?String(y):String(y)+thisEa}if(resultString="calc(","plus"===mode||"add"===mode||"+"===mode||"addition"===mode)resultString+=targetX+" + "+targetY+")";else if("minus"===mode||"-"===mode)resultString+=targetX+" - "+targetY+")";else if("multiple"===mode||"*"===mode)resultString+=targetX+" * "+targetY+")";else{if("divide"!==mode&&"/"!==mode)throw new Error("invalid mode");resultString+=targetX+" / "+targetY+")"}return prettyMode?AbstractNode.prettyCalc(resultString):resultString};static jsonToString=json=>{if("string"!=typeof json&&"object"!=typeof json)throw new Error("invalid input");if(null===json)throw new Error("invalid input2");"object"==typeof json&&(void 0!==json._id&&delete json._id,json=JSON.stringify(json));const nameToToken=name=>`_____${name}_____`,tokens={colon:nameToToken("colon"),middler:nameToToken("middler"),middlel:nameToToken("middlel"),bigr:nameToToken("bigr"),bigl:nameToToken("bigl"),back:nameToToken("back"),double:nameToToken("double")};let filteredJson;return filteredJson=json,filteredJson=filteredJson.replace(/[\:]/gi,tokens.colon),filteredJson=filteredJson.replace(/[\}]/gi,tokens.middler),filteredJson=filteredJson.replace(/[\{]/gi,tokens.middlel),filteredJson=filteredJson.replace(/[\]]/gi,tokens.bigr),filteredJson=filteredJson.replace(/[\[]/gi,tokens.bigl),filteredJson=filteredJson.replace(/[\\]/gi,tokens.back),filteredJson=filteredJson.replace(/[\"]/gi,tokens.double),filteredJson};static stringToJson=string=>{const nameToToken=name=>`_____${name}_____`,tokens={colon:nameToToken("colon"),middler:nameToToken("middler"),middlel:nameToToken("middlel"),bigr:nameToToken("bigr"),bigl:nameToToken("bigl"),back:nameToToken("back"),double:nameToToken("double")};let filteredJson;filteredJson=string,filteredJson=filteredJson.replace(new RegExp(tokens.colon,"gi"),":"),filteredJson=filteredJson.replace(new RegExp(tokens.middler,"gi"),"}"),filteredJson=filteredJson.replace(new RegExp(tokens.middlel,"gi"),"{"),filteredJson=filteredJson.replace(new RegExp(tokens.bigr,"gi"),"]"),filteredJson=filteredJson.replace(new RegExp(tokens.bigl,"gi"),"["),filteredJson=filteredJson.replace(new RegExp(tokens.back,"gi"),"\\"),filteredJson=filteredJson.replace(new RegExp(tokens.double,"gi"),'"');try{return JSON.parse(filteredJson),AbstractNode.equalJson(filteredJson)}catch{return filteredJson}};static findByAttribute=(domList,attributeName,attributeValue)=>{if("string"!=typeof attributeName&&!Array.isArray(attributeName))throw new Error("input must be => [ HTMLCollections, attribute name, attribute value ]");if("string"==typeof attributeValue||Array.isArray(attributeValue)||(attributeValue=String(attributeValue)),Array.isArray(attributeName)){if(!Array.isArray(attributeValue))throw new Error("if multiple attribute name, attribute value must be same array");if(attributeName.length!==attributeValue.length)throw new Error("if multiple attribute name, attribute value must be same array")}let targets,resultMiddle;if(targets=[...domList].map(d=>d),Array.isArray(attributeName)&&Array.isArray(attributeValue)){for(let i=0;i<attributeName.length;i++)targets=targets.filter(d=>new RegExp(attributeValue[i],"g").test(String(d.getAttribute(attributeName[i]))));return 0!==targets.length?targets[0]:null}return resultMiddle=targets.find(d=>new RegExp(attributeValue,"g").test(String(d.getAttribute(attributeName)))),void 0===resultMiddle?null:resultMiddle};static appendQuery=obj=>{if(!Object.values(obj).every(str=>"string"==typeof str))throw new Error("invaild object factor, must be string");let now,title,original;now=new Date,title=String(now.valueOf())+String(Math.round(1e4*Math.random())),original=window.location.href,/\?/gi.test(original)?/\=/gi.test(original)&&(/\&$/gi.test(original)||(original+="&")):original+="?";for(let key in obj)original+=key,original+="=",original+=String(obj[key]),original+="&";/\&$/gi.test(original)&&(original=original.slice(0,-1)),window.history.replaceState({},title,original)};static removeQuery=key=>{const decode=function(str){return decodeURIComponent(str.split("+").join(" "))};let now,title,original,obj,newUrl;if(now=new Date,title=String(now.valueOf())+String(Math.round(1e4*Math.random())),original=window.location.search,newUrl=window.location.protocol+"//"+window.location.host+window.location.pathname+"?",/\?/gi.test(original)){obj={},original.replace(/\??(?:([^=]+)=([^&]*)&?)/g,(origin,name,value)=>(obj[decode(name)]=decode(value),""));for(let str in obj)str!==key&&(newUrl+=str,newUrl+="=",newUrl+=String(obj[str]),newUrl+="&");/\&$/gi.test(newUrl)&&(newUrl=newUrl.slice(0,-1)),window.history.replaceState({},title,newUrl)}};static hasQuery=key=>{let original,obj,keys;return original=window.location.search,""!==original&&(original=original.slice(1),obj={},original.replace(/\??(?:([^=]+)=([^&]*)&?)/g,function(origin,name,value){let decode=function(str){return decodeURIComponent(str.split("+").join(" "))};return obj[decode(name)]=decode(value),""}),keys=Object.keys(obj),keys.includes(key))};static setQuery=obj=>{let keyList;keyList=Object.keys(obj);try{for(let k of keyList)AbstractNode.hasQuery(k)&&AbstractNode.removeQuery(k);return AbstractNode.appendQuery(obj),!0}catch(e){return console.log(e),!1}};static toOriginKeyframe=duration=>CreateDom.toOriginKeyframe(duration);static transformCss=command=>CreateDom.transformCss(command);static querySetting=obj=>AbstractNode.setQuery(obj);static setCookie=(obj,day=730,del=!1)=>{"boolean"==typeof day&&(del=day,day=730);const today=new Date;let totalString,expires;today.setTime(today.getTime()+24*day*60*60*1e3),expires=del?"expires=Thu, 01 Jan 1970 00:00:00 UTC":"expires="+today.toUTCString();for(let i in obj)totalString="",totalString+=encodeURIComponent(i.replace(/\=\;/g,"")),totalString+="=",totalString+=encodeURIComponent(String(obj[i]).replace(/\=\;/g,"")),totalString+=";",totalString+=expires+";path=/",document.cookie=totalString};static getCookiesAll=()=>{let tempArr0,tempArr1,resultObj;resultObj={},tempArr0=window.decodeURIComponent(document.cookie).split(";");for(let i of tempArr0)tempArr1=i.split("="),tempArr1.length>1&&(resultObj[tempArr1[0].trim()]=tempArr1[1].trim());return resultObj};static getCookieById=key=>{const cookiesObj=AbstractNode.getCookiesAll();return Object.keys(cookiesObj).includes(key)?cookiesObj[key]:null};static setMetaData=obj=>{if("string"!=typeof obj.title||"string"!=typeof obj.description||"string"!=typeof obj.image)throw new Error("invaild input");const metas=[...(document.querySelector("head")||new HTMLElement).querySelectorAll("meta")];if(metas.length<3)throw new Error("invalid html");const title=metas.find(dom=>"og:title"===dom.getAttribute("property")),title2=document.querySelector("title"),description=metas.find(dom=>"og:description"===dom.getAttribute("property")),description2=metas.find(dom=>"description"===dom.getAttribute("name")),image=metas.find(dom=>"og:image"===dom.getAttribute("property"));if(void 0===title||null===title2||void 0===description||void 0===description2||void 0===image)throw new Error("invalid meta setting");let description3,firstTarget;return null!==document.body.firstChild?(firstTarget=document.body.children[0],description3="totalcontents"!==firstTarget.id&&"none"===firstTarget.style.display?document.body.firstChild:null):description3=null,title.setAttribute("content",obj.title),title2.textContent=obj.title,description.setAttribute("content",obj.description),description2.setAttribute("content",obj.description),null!==description3&&(description3.textContent=obj.description),image.setAttribute("content",obj.image),"success"};static injectVideo=obj=>{if("object"!=typeof obj.dom||"string"!=typeof obj.id||"string"!=typeof obj.dom.style.width||"string"!=typeof obj.dom.style.height)throw new Error("invaild input");const{id,dom}=obj;let htmlString,targetDom,width,height,ea,widthStr,heightStr;if(widthStr=dom.style.width,heightStr=dom.style.height,width=Number(widthStr.replace(/[^0-9\-\.]/gi,"")),height=Number(heightStr.replace(/[^0-9\-\.]/gi,"")),ea=widthStr.replace(/[0-9\-\.]/gi,""),""===ea||Number.isNaN(width)||Number.isNaN(height))throw new Error("invalid width, height value");return targetDom=AbstractNode.createDom(dom),targetDom.style.display="inline-flex",targetDom.style.position="relative",targetDom.style.overflow="hidden",targetDom.style.justifyContent="center",targetDom.style.alignItems="center","px"!==ea&&(width=targetDom.getBoundingClientRect().width,height=targetDom.getBoundingClientRect().height),width+=10,height+=height/width*10,htmlString=`<iframe width="${String(width)}" height="${String(height)}" src="https://www.youtube.com/embed/${id}?controls=1&autoplay=1&mute=1&modestbranding=1&amp;playlist=${id}&loop=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`,targetDom.insertAdjacentHTML("beforeend",htmlString),targetDom};static randomSleep=async()=>await new Promise(r=>setTimeout(()=>r(!0),Math.round(300+1200*Math.random())));static removeByClass=className=>{const targets=[...document.querySelectorAll("."+className)];for(let dom of targets)dom.remove()};static selectByClass=(className,areaMother=document)=>{let targets,thisMother;if(thisMother=areaMother,targets=[],"string"==typeof className)targets=[...thisMother.querySelectorAll("."+className)];else{if(!Array.isArray(className))throw new Error("invalid input");targets=[];for(let c of className)targets=targets.concat([...thisMother.querySelectorAll("."+c)])}return targets.length>0?targets:[]};static selectByQuery=(query,areaMother=document)=>Array.from(areaMother.querySelectorAll(query)).map(d=>d);static setArray=(targetList=[])=>{if(!Array.isArray(targetList))throw new Error("invalid input");if(!targetList.every(s=>"string"==typeof s))throw new Error("invalid input 2");return[...new Set(targetList)]};static findStringToArr=(regex,targetString,setMode=!0)=>{let matchResult,matchList;return matchResult=targetString.matchAll(regex),matchList=[...matchResult].map(a=>a[0]),setMode?[...new Set(matchList)]:matchList};static fireEvent=(dom,eventName)=>{"object"==typeof dom&&null!==dom&&("click"!==eventName&&"focus"!==eventName&&"blur"!==eventName?dom.dispatchEvent(new Event(eventName,{bubbles:!0})):"click"===eventName?dom.click():"blur"===eventName?(dom.dispatchEvent(new Event(eventName,{bubbles:!0})),"function"==typeof dom.blur&&dom.blur()):"focus"===eventName&&dom.focus())};static getRealBox=(dom,original="attribute")=>{let box,widthVisual;return widthVisual=!(window.innerWidth<=900)?AbstractNode.isMac()?.97:.84:1,dom.style.display="inline-block",dom.style.position="relative",dom.style.width="auto",dom.style.height="auto",box=dom.getBoundingClientRect(),box=JSON.parse(JSON.stringify(box)),box.width=box.width*widthVisual,null!==original&&"object"==typeof original?("string"==typeof original.display&&(dom.style.display=original.display),"string"==typeof original.position&&(dom.style.position=original.position),"string"==typeof original.width&&(dom.style.width=original.width),"string"==typeof original.height&&(dom.style.height=original.height)):"attribute"===original&&(null!==dom.getAttribute("display")&&(dom.style.display=dom.getAttribute("display")||""),null!==dom.getAttribute("position")&&(dom.style.position=dom.getAttribute("position")||""),null!==dom.getAttribute("width")&&(dom.style.width=dom.getAttribute("width")||""),null!==dom.getAttribute("height")&&(dom.style.height=dom.getAttribute("height")||"")),box};static capitalizeString=str=>{if("string"!=typeof str)throw new Error("invalid input");return 0===str.length||1===str.length?0===str.length?"":str.toUpperCase():str.slice(0,1).toUpperCase()+str.slice(1)};static arrayPromise=promiseArr=>new Promise((resolve,reject)=>{Promise.all(promiseArr).then(values=>{resolve(values)}).catch(err=>{reject(err)})});static dropToFiles=async e=>{try{let readDroppedItems,promiseArr,resultArr,result;e.preventDefault(),promiseArr=[];for await(const item of e.dataTransfer.items)promiseArr.push(item.getAsFileSystemHandle());return resultArr=await AbstractNode.arrayPromise(promiseArr),readDroppedItems=async items=>{try{let tong,fileEntry;tong=[];const readFolderRecursively=async(entry,motherName=null)=>{let motherStart;if("file"===entry.kind){const file=await entry.getFile();null!==file&&".DS_Store"!==file.name&&(file.relativePath=motherName+"/"+file.name,file.motherFolder=file.relativePath.split("/").slice(0,-1).join("/"),tong.push(file))}else if("directory"===entry.kind){motherStart=null!==motherName?motherName+"/"+entry.name:"/"+entry.name;const values=entry.values();for await(const handle of values)await readFolderRecursively(handle,motherStart)}};for(const handle of items)try{"file"===handle.kind?(fileEntry=await handle.getFile(),null!==fileEntry&&".DS_Store"!==fileEntry.name&&(fileEntry.relativePath="/"+fileEntry.name,fileEntry.motherFolder=fileEntry.relativePath.split("/").slice(0,-1).join("/"),tong.push(fileEntry))):"directory"===handle.kind&&await readFolderRecursively(handle)}catch{}return tong}catch(e){return console.log(e),null}},result={},result.fromArray=await readDroppedItems(resultArr),result.toArray=result.fromArray.map(obj=>obj.motherFolder+"/"+obj.name.replace(/ /gi,"_").replace(/\n/gi,"_").replace(/\t/gi,"_").replace(/[\/\\\=\&\:\,\!\@\#\$\%\^\+\*\(\)\[\]\{\}\+\?\<\>]/gi,"")),result}catch(e){return console.log(e),{}}};static dropToForm=async(e,motherPath=null)=>{try{let formData,files,toArr;formData=new FormData,files=await AbstractNode.dropToFiles(e);for(let i=0;i<files.fromArray.length;i++)formData.append("upload"+String(i),files.fromArray[i]);toArr=[];for(let i=0;i<files.fromArray.length;i++)toArr.push((null===motherPath?"":motherPath)+files.toArray[i]);return formData.append("toArr",JSON.stringify(toArr)),formData}catch(e){return console.log(e),new FormData}};static tempScrollBan=scrollBanTarget=>{scrollBanTarget.addEventListener("DOMMouseScroll",AbstractNode.stacks.__temporaryPreventDefaultEvent),scrollBanTarget.addEventListener("wheel",AbstractNode.stacks.__temporaryPreventDefaultEvent),scrollBanTarget.addEventListener("mousewheel",AbstractNode.stacks.__temporaryPreventDefaultEvent),scrollBanTarget.addEventListener("touchmove",AbstractNode.stacks.__temporaryPreventDefaultEvent)};static tempScrollRelease=scrollBanTarget=>{scrollBanTarget.removeEventListener("DOMMouseScroll",AbstractNode.stacks.__temporaryPreventDefaultEvent),scrollBanTarget.removeEventListener("wheel",AbstractNode.stacks.__temporaryPreventDefaultEvent),scrollBanTarget.removeEventListener("mousewheel",AbstractNode.stacks.__temporaryPreventDefaultEvent),scrollBanTarget.removeEventListener("touchmove",AbstractNode.stacks.__temporaryPreventDefaultEvent)};static blackAlert=async(message,callback=async()=>{},mannerMode=!1)=>{try{const blackAlertOuterClassName="blackAlertOuterClassName",blackAlertInnerClassName="blackAlertInnerClassName",{mediaNumber,mediaEa}=AbstractNode,zIndex=901;let div_clone,div_clone2,ea,margin,wordWidth,width,borderRadius,blackHeight,textSize,textTop,boxBottom;if(ea=mediaEa(),margin=mediaNumber(28,26,26,25,24),borderRadius=mediaNumber(15,15,14,12,3),blackHeight=mediaNumber(46,45,42,38,9.2),textSize=mediaNumber(17,16,15,14,3.5),textTop=mediaNumber(-.5,-.5,-.5,-.5,-.1),boxBottom=mediaNumber(30,30,26,24,6),!mannerMode){if(void 0!==AbstractNode.timeouts.blackAlertLevel0_TimeOut&&null!==AbstractNode.timeouts.blackAlertLevel0_TimeOut){AbstractNode.stacks.blackAlert_blackBox.style.animation="fadedowndelay 0.3s ease forwards",await AbstractNode.sleep(301);const removeTargets=[...document.querySelectorAll("."+blackAlertOuterClassName)];for(let r of removeTargets)try{r.remove()}catch{}clearTimeout(AbstractNode.timeouts.blackAlertLevel1_TimeOut),clearTimeout(AbstractNode.timeouts.blackAlertLevel0_TimeOut),AbstractNode.timeouts.blackAlertLevel1_TimeOut=null,AbstractNode.timeouts.blackAlertLevel0_TimeOut=null}void 0!==AbstractNode.timeouts.blackAlertLevel3_TimeOut&&null!==AbstractNode.timeouts.blackAlertLevel3_TimeOut&&clearTimeout(AbstractNode.timeouts.blackAlertLevel3_TimeOut),AbstractNode.timeouts.blackAlertLevel3_TimeOut=window.setTimeout(()=>{const removeTargets=[...document.querySelectorAll("."+blackAlertOuterClassName)];for(let r of removeTargets)try{r.remove()}catch{}clearTimeout(AbstractNode.timeouts.blackAlertLevel3_TimeOut),AbstractNode.timeouts.blackAlertLevel3_TimeOut=null},1e3)}mannerMode&&void 0!==AbstractNode.timeouts.blackAlertLevel0_TimeOut&&null!==AbstractNode.timeouts.blackAlertLevel0_TimeOut||(AbstractNode.timeouts.blackAlertLevel2_TimeOut=null,div_clone=AbstractNode.createDom({mother:document.body,class:[blackAlertOuterClassName],style:{position:"fixed",background:AbstractNode.colorExtended.ultimateBlack,borderRadius:blackHeight,height:blackHeight,bottom:boxBottom,opacity:0,width:2e3,transition:"all 0s ease",zIndex}}),AbstractNode.stacks.blackAlert_blackBox=div_clone,div_clone2=AbstractNode.createDom({mother:div_clone,class:[blackAlertInnerClassName],style:{justifyContent:"center",alignItems:"center",position:"absolute",textAlign:"center",color:AbstractNode.colorExtended.white,height:AbstractNode.withOut(0),fontSize:textSize,fontFamily:"pretendard",wordSpacing:0,fontWeight:800,top:textTop}}),div_clone2.textContent=message,wordWidth=div_clone2.getBoundingClientRect().width,width=wordWidth+2*Number(margin),div_clone.style.width=String(width)+"px",div_clone.style.left="calc(50% - "+String(width/2)+"px)",div_clone2.style.width=String(100)+"%",div_clone.style.animation="fadeupdelay 0.5s ease forwards",AbstractNode.timeouts.blackAlertLevel0_TimeOut=setTimeout(()=>{div_clone.style.animation="fadedowndelay 0.3s ease forwards",AbstractNode.timeouts.blackAlertLevel1_TimeOut=setTimeout(()=>{const innerTarget=document.body.querySelector("."+blackAlertInnerClassName),outerTarget=document.body.querySelector("."+blackAlertOuterClassName);null!==innerTarget&&innerTarget.remove(),null!==outerTarget&&outerTarget.remove(),clearTimeout(AbstractNode.timeouts.blackAlertLevel1_TimeOut),AbstractNode.timeouts.blackAlertLevel1_TimeOut=null,clearTimeout(AbstractNode.timeouts.blackAlertLevel0_TimeOut),AbstractNode.timeouts.blackAlertLevel0_TimeOut=null},301)},3e3),AbstractNode.timeouts.blackAlertLevel2_TimeOut=setTimeout(async()=>{await callback(),clearTimeout(AbstractNode.timeouts.blackAlertLevel2_TimeOut),AbstractNode.timeouts.blackAlertLevel2_TimeOut=null},501))}catch(e){console.log(e)}};static returnLoadingIcon=(color=AbstractNode.colorExtended.darkShadow,color2=AbstractNode.colorExtended.black)=>{let icon=SvgTong.stringParsing(AbstractNode.svgMaker.returnLoading(color,color2)).source;return icon.classList.add("loading"),icon};static generalCss=fontFamily=>{const styleTag=document.querySelector("style"),css=`\n    html {\n      -webkit-text-size-adjust:100%;\n      -webkit-font-smoothing: antialiased;\n      -moz-osx-font-smoothing: grayscale;\n      -ms-touch-action: manipulation;\n      touch-action: manipulation;\n      background-color: white;\n      color: ${AbstractNode.colorExtended.black};\n    }\n    @media (prefers-color-scheme: dark) {\n      :root {\n        color-scheme: light !important;\n      }\n    }\n    *{margin:0;padding:0;transition:all 0.3s ease;font-family:${fontFamily};-webkit-tap-highlight-color: transparent;}\n    *::-webkit-scrollbar{display:none;}\n    input::placeholder {color: ${AbstractNode.colorExtended.black};opacity:0.3;}\n    textarea::placeholder {color: ${AbstractNode.colorExtended.black};opacity:0.3;}\n    body,div {\n      font-size:0;\n      background-color: white;\n      color: ${AbstractNode.colorExtended.black};\n      margin:0;\n      font-family:${fontFamily};\n    }\n    a{text-decoration:inherit;color:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);background:0 0;outline:0}\n    textarea{resize:none}\n    b,strong{font-weight:inherit;display:inline;}\n    img{border:0}\n    button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}\n    button,html input[type=button],input[type=submit]{-webkit-appearance:button;cursor:pointer;box-sizing:border-box;white-space: normal}\n    input[type=text],input[type=password],textarea{-webkit-appearance:none;appearance: none;box-sizing:border-box;background-color:${AbstractNode.colorExtended.white}}\n    input{line-height:normal}\n    input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}\n    input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}\n    input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}\n    iframe{border:0;outline:0}\n    p{overflow:hidden;}\n    b{color:${AbstractNode.colorExtended.grayDeactive};}\n    label{cursor:pointer}\n    span{font-family:redditmono}\n    article,section{margin:0;}\n    #totalcontents{display:block;position:relative;left:0;top:0;height:100vh;width:100%;background-color:${AbstractNode.colorExtended.white};}\n    .hiddenobject{display: none;position: absolute; opacity: 0;font-size:0px}\n    .hoverDefault_lite{cursor:pointer;opacity:1}\n    .hoverDefault_lite:hover{opacity:0.75;}\n    .hoverDefault{cursor:pointer;opacity:1}\n    .hoverDefault:hover{opacity:0.5;}\n    .hoverdefault_reverse{opacity: 0;transition:all 0.5s ease;cursor: pointer;}\n    .hoverdefault_reverse:hover{opacity: 0.4;}\n    .hoverdefault_lite_reverse{opacity: 0.7;transition:all 0.5s ease;cursor: pointer;}\n    .hoverdefault_lite_reverse:hover{opacity: 0.95;}\n    .backblurdefault {-webkit-backdrop-filter: blur(10px);backdrop-filter: blur(10px);}\n    .backblurdefault_lite {-webkit-backdrop-filter: blur(5px);backdrop-filter: blur(5px);}\n    .backblurwhite {-webkit-backdrop-filter: blur(4px);backdrop-filter: blur(4px);background: rgb(255, 255, 255, 0.8);}\n    .backblurwhite_lite {-webkit-backdrop-filter: blur(5px);backdrop-filter: blur(5px);background: rgb(255, 255, 255, 0.82);}\n    .backblurgray {-webkit-backdrop-filter: blur(10px);backdrop-filter: blur(10px);background: rgb(236, 236, 236, 0.9);}\n    .backblurtransparent {-webkit-backdrop-filter: blur(4px);backdrop-filter: blur(4px);background: rgb(255, 255, 255, 0.3);}\n    .backblurblack {-webkit-backdrop-filter: blur(5px);backdrop-filter: blur(5px);background: linear-gradient(256deg, rgba(20, 20, 20, 0.65) 0%, rgba(28, 28, 28, 0.7) 100%);}\n    @keyframes in{from{opacity:0;transform:translateY(8px);}to{opacity:1;transform:translateY(0px);}}\n    @keyframes fa{from{opacity:0;}to{opacity:1;}}\n    @keyframes flash{from,80%,to{opacity:0}30%,50%{opacity:0.85}}\n    @keyframes justfadeinoriginal{from{opacity:0;}to{opacity:1;}}\n    @keyframes justfadeoutoriginal{from{opacity:1;}to{opacity:0;}}\n    @keyframes justfadeinnine{from{opacity:0;}to{opacity:0.9;}}\n    @keyframes justfadeoutnine{from{opacity:0.9;}to{opacity:0;}}\n    @keyframes justfadeineight{from{opacity:0;}to{opacity:0.8;}}\n    @keyframes justfadeouteight{from{opacity:0.8;}to{opacity:0;}}\n    @keyframes justfadeinseven{from{opacity:0;}to{opacity:0.7;}}\n    @keyframes justfadeoutseven{from{opacity:0.7;}to{opacity:0;}}\n    @keyframes justfadeinmiddle{from{opacity:0;}to{opacity:0.6;}}\n    @keyframes justfadeoutmiddle{from{opacity:0.6;}to{opacity:0;}}\n    @keyframes justfadeinsmall{from{opacity:0;}to{opacity:0.4;}}\n    @keyframes justfadeoutsmall{from{opacity:0.4;}to{opacity:0;}}\n    @keyframes justfadeinmini{from{opacity:0;}to{opacity:0.12;}}\n    @keyframes justfadeoutmini{from{opacity:0.12;}to{opacity:0;}}\n    @keyframes justfadein{from{opacity:0;}to{opacity:0.3;}}\n    @keyframes justfadeout{from{opacity:0.3;}to{opacity:0;}}\n    @keyframes loadingfadein{from{opacity:0;}to{opacity:0.7;}}\n    @keyframes loadingfadeout{from{opacity:0.7;}to{opacity:0;}}\n    @keyframes invisible{from{opacity:0;}to{opacity:0;}}\n    @keyframes fadedown{from{opacity:1;transform:translateY(0px);}to{opacity:0;transform:translateY(20px);}}\n    @keyframes fadeup{from{opacity:0;transform:translateY(20px);}to{opacity:0.95;transform:translateY(0px);}}\n    @keyframes fadeupfixcenter{from{opacity:0;transform:translateY(calc(-50% + 20px));}to{opacity:1;transform:translateY(calc(-50% + 0px));}}\n    @keyframes fadedownfixcenter{from{opacity:1;transform:translateY(calc(-50% + 0px));}to{opacity:0;transform:translateY(calc(-50% + 20px));}}\n    @keyframes fadeuporiginal{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0px);}}\n    @keyframes fadeuporiginalbigmiddle{from{opacity:0;transform:translateY(35px);}to{opacity:1;transform:translateY(0px);}}\n    @keyframes fadeoutoriginalbigmiddle{from{opacity:1;transform:translateY(0px);}to{opacity:0;transform:translateY(35px);}}\n    @keyframes fadedownreverse{from{opacity:1;transform:translateY(0px);}to{opacity:0;transform:translateY(-15px);}}\n    @keyframes fadeuporiginalreverse{from{opacity:0;transform:translateY(-15px);}to{opacity:1;transform:translateY(0px);}}\n    @keyframes fadeuporiginalbig{from{opacity:0;transform:translateY(50px);}to{opacity:1;transform:translateY(0px);}}\n    @keyframes fadeoutoriginalbig{from{opacity:1;transform:translateY(0px);}to{opacity:0;transform:translateY(50px);}}\n    @keyframes fadeupprofilewhitetong0 {\n      from{opacity:0;transform:scale(1) translateY(-15px);}\n      to{opacity:1;transform:scale(1) translateY(0px);}\n    }\n    @keyframes fadeupprofilewhitetong1 {\n      from{opacity:0;transform:scale(0.96) translateY(-15px);}\n      to{opacity:1;transform:scale(0.96) translateY(0px);}\n    }\n    @keyframes fadeupprofilewhitetong2 {\n      from{opacity:0;transform:scale(0.9) translateY(-15px);}\n      to{opacity:1;transform:scale(0.9) translateY(0px);}\n    }\n    @keyframes fadeupprofilewhitetong3 {\n      from{opacity:0;transform:scale(0.85) translateY(-15px);}\n      to{opacity:1;transform:scale(0.85) translateY(0px);}\n    }\n\n    @keyframes justfadeindelay{from,33%{opacity:0;}to{opacity:0.3;}}\n    @keyframes justfadeoutdelay{from,33%{opacity:0.3;}to{opacity:0;}}\n    @keyframes justfadeouttiny{from{opacity:0.3;}to{opacity:0;}}\n    @keyframes fadeupentire{from{transform:translateY(100%);}to{transform:translateY(0%);}}\n    @keyframes fadedownentire{from{transform:translateY(0%);}to{transform:translateY(100%);}}\n    @keyframes fadeinslide{from{opacity:0;transform:translateX(-15px);}to{opacity:1;transform:translateX(0px);}}\n    @keyframes fadeoutslide{from{opacity:1;transform:translateX(0px);}to{opacity:0;transform:translateX(15px);}}\n    @keyframes fadeinslidereverse{from{opacity:0;transform:translateX(15px);}to{opacity:1;transform:translateX(0px);}}\n    @keyframes fadeoutslidereverse{from{opacity:1;transform:translateX(0px);}to{opacity:0;transform:translateX(-15px);}}\n    @keyframes fadeupdelay{from,10%{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0px);}}\n    @keyframes fadeupdelaymiddle{from,30%{opacity:0;transform:translateY(10px);}to{opacity:0.4;transform:translateY(0px);}}\n    @keyframes fadeupdelay2{from,30%{opacity:0;transform:translateY(30px);}to{opacity:1;transform:translateY(0px);}}\n    @keyframes fadeuplitereverse{from{opacity:0;transform:translateY(-10px);}to{opacity:0.95;transform:translateY(0px);}}\n    @keyframes fadeuplite{from{opacity:0;transform:translateY(10px);}to{opacity:0.95;transform:translateY(0px);}}\n    @keyframes fadeupnine{from{opacity:0;transform:translateY(5px);}to{opacity:0.91;transform:translateY(0px);}}\n    @keyframes fadeuphard{from{opacity:0;transform:translateY(5px);}to{opacity:1;transform:translateY(0px);}}\n    @keyframes fadedownlite{from{opacity:0.95;transform:translateY(0px);}to{opacity:0;transform:translateY(10px);}}\n    @keyframes fadeupmini{from{opacity:0;transform:translateY(5px);}to{opacity:1;transform:translateY(0px);}}\n    @keyframes fadedownmini{from{opacity:0.95;transform:translateY(0px);}to{opacity:0;transform:translateY(5px);}}\n    @keyframes fadeupmiddle{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0px);}}\n    @keyframes fadedownmiddle{from{opacity:1;transform:translateY(0px);}to{opacity:0;transform:translateY(10px);}}\n    @keyframes fadeupbacklite{from{opacity:0;transform:translateY(5px);}to{opacity:0.2;transform:translateY(0px);}}\n    @keyframes loginfadeup0{from{opacity:0;}to{opacity:0.1;}}\n    @keyframes loginfadeup1{from{opacity:0;backdrop-filter: blur(0px);}to{opacity:0.6;backdrop-filter: blur(4px);}}\n    @keyframes loginfadedown0{from{opacity:0.1;}to{opacity:0;}}\n    @keyframes loginfadedown1{from{opacity:0.6;backdrop-filter: blur(4px);}to{opacity:0;backdrop-filter: blur(0px);}}\n    @keyframes profilefadeup{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0px);}}\n    @keyframes communicationfadeup{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0px);}}\n    @keyframes fadedowndelay{from{opacity:1;transform:translateY(0px);}70%,to{opacity:0;transform:translateY(-5px);}}\n    @keyframes fadeout{from{opacity:1;transform:translateX(0px);}to{opacity:0;transform:translateX(-30px);}}\n    @keyframes fadein{from{opacity:0;transform:translateX(30px);}to{opacity:1;transform:translateX(0px);}}\n    @keyframes fadeoutlite{from{opacity:1;transform:translateX(0px);}to{opacity:0;transform:translateX(-20px);}}\n    @keyframes fadeoutlite2{from{opacity:1;transform:translateX(0px);}to{opacity:0;transform:translateX(20px);}}\n    @keyframes fadeinlite{from{opacity:0;transform:translateX(20px);}to{opacity:1;transform:translateX(0px);}}\n    @keyframes fadeinlite2{from{opacity:0;transform:translateX(-20px);}to{opacity:1;transform:translateX(0px);}}\n    @keyframes loadingrotate{from{transform:rotate(0deg);}to{transform:rotate(360deg);}}\n    @keyframes fadecancel{from{opacity:0}to{opacity:0.2}}\n    @keyframes twinkle {from {opacity: 1;}49% {opacity: 1;}50% {opacity: 0;}99% {opacity: 0;}to {opacity: 1;}}\n    @keyframes focusProgress {from {transform: scale(0deg);opacity: 1;}25% {transform: scale(0.92);opacity: 0.9;}50% {transform: scale(1.08);opacity: 1;}75% {transform: scale(0.92);opacity: 0.9;}to {transform: scale(1);opacity: 1;}}\n    @keyframes blackToBlack {from {background-color: ${AbstractNode.colorExtended.darkBlack};opacity: 1;}25% {background-color: ${AbstractNode.colorExtended.ultimateBlack};opacity: 1;}50% {background-color: ${AbstractNode.colorExtended.darkBlack};opacity: 1;}75% {background-color: ${AbstractNode.colorExtended.ultimateBlack};opacity: 1;}to {background-color: ${AbstractNode.colorExtended.darkBlack};opacity: 1;}}\n    @keyframes garoProgress {from {transform: scaleX(0);}to {transform: scaleX(1);}}\n    @keyframes rotateProgress {from {transform: rotate(0deg);opacity: 1;}25% {transform: rotate(90deg);}50% {transform: rotate(180deg);opacity: 0.92;}75% {transform: rotate(270deg);}to {transform: rotate(360deg);opacity: 1;}}\n    @keyframes rotateProgress2 {from {transform: rotate(0deg);opacity: 1;}25% {transform: rotate(90deg);}50% {transform: rotate(180deg);opacity: 0.8;}75% {transform: rotate(270deg);}to {transform: rotate(360deg);opacity: 1;}}\n    @keyframes opacityProgress {from {opacity: 1;}50% {opacity: 0.85;}to {opacity: 1;}}\n    @keyframes talkfade {from,30%{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0px)}}\n    @keyframes talkwhitefade {from,85%{opacity:0;transform:translateX(8px)} to{opacity:1;transform:translateX(0px)}}\n    @keyframes talkwhitefadein {from{opacity:0;transform:translateX(8px)} to{opacity:1;transform:translateX(0px)}}\n    @keyframes talkwhitefadeout {from{opacity:1;transform:translateX(0px)} 50%{opacity:0;transform:translateX(0px)} to{opacity:0;transform:translateX(8px)}}\n    @keyframes talkwhitefadeconvert {from,10%{opacity:0;transform:translateX(12px)} to{opacity:1;transform:translateX(0px)}}\n    @keyframes talksecondfadein {from,50%{opacity:0;transform:translateY(8px)} to{opacity:1;transform:translateY(0px)}}\n    @keyframes talksecondfadeout {from{opacity:1;transform:translateY(0px)} 50%{opacity:0;transform:translateY(0px)} to{opacity:0;transform:translateY(8px)}}\n    @keyframes marginPaddingBorderBoxClassName_animation {\n      from{opacity:1;}\n      to{opacity:0;}\n    }\n    @keyframes marginPaddingBorderBoxClassName_animation_out {\n      from{opacity:0;}\n      to{opacity:1;}\n    }\n\n    .justfadeinoriginal{animation:justfadeinoriginal 0.3s ease forwards;}\n    .justfadeoutoriginal{animation:justfadeoutoriginal 0.3s ease forwards;}\n    .justfadein{animation:justfadein 0.3s ease forwards;}\n    .justfadeout{animation:justfadeout 0.3s ease forwards;}\n    .fadeout{animation:fadeout 0.3s ease forwards;}\n    .fadein{animation:fadein 0.3s ease forwards;}\n    .fadedown{animation:fadedown 0.3s ease forwards;}\n    .fadeup{animation:fadeup 0.3s ease forwards;}\n    .fadeupfixcenter{animation:fadeupfixcenter 0.3s ease forwards;}\n\n    .loading{\n    position:absolute;\n    left:50%;\n    transform:rotate(0deg);\n    transform-origin:50% 50%;animation:loadingrotate 1.7s linear infinite;\n    mix-blend-mode: multiply\n    }`;if(null!==styleTag)styleTag.insertAdjacentHTML("beforeend",css);else{const styleDummy=window.document.createElement("STYLE");window.document.head.appendChild(styleDummy),styleDummy.insertAdjacentHTML("beforeend",css)}return css};static loadingRun=(navi=null)=>{const{createAbstract}=AbstractNode,ea="px",naviHeight=null===navi||Number.isNaN(Number(navi))?CreateDom.getNaviheight():Number(navi);let loading,width,height;return width=48,height=48,loading=null===document.getElementById("______pre_loading_id_uuid__p")?createAbstract({mother:document.body,style:{position:"fixed",width:String(100)+"vw",height:"calc(100vh - "+String(naviHeight)+"px)",top:String(naviHeight)+ea,left:0,background:"rgb(255, 255, 255)",zIndex:102,opacity:1,transition:"all 0s ease"},child:{mode:"svg",source:AbstractNode.svgMaker.returnLoading(AbstractNode.colorExtended.darkShadow,AbstractNode.colorExtended.black),class:["loading"],style:{position:"fixed",width:String(48)+ea,height:String(48)+ea,top:"calc(calc(100vh - "+String(0)+"px) / 2 - "+String(Number(48)/2)+"px)",left:"calc(50vw - "+String(Number(48)/2)+"px)"}}}):document.getElementById("______pre_loading_id_uuid__p"),"function"!=typeof loading.delayRemove&&(loading.delayRemove=(callback=async()=>{},delta=200)=>{const instance=loading;return new Promise(resolve=>{0!==delta?(instance.style.opacity=String(1),setTimeout(()=>{instance.style.animation="justfadeoutoriginal "+String(delta/1e3)+"s ease forwards",setTimeout(async()=>{await callback(),instance.remove(),resolve(!0)},delta+1),setTimeout(async()=>{instance.remove()},delta+1)},delta)):setTimeout(async()=>{await callback(),instance.remove(),resolve(!0)},0)})}),new Promise((resolve,reject)=>{resolve(loading)})};static grayLoading=(mother=null,whiteMode=!1)=>{const{createNode,colorExtended,withOut,mediaNumber,mediaEa,createDom,createSvg}=AbstractNode;let width,ea,cancel,loading;ea="px",width=mediaNumber(50,50,50,50,50);return null==mother&&(mother=document.body),cancel=createDom({mother,style:{position:"fixed",top:String(0),left:String(0),width:String(100)+"%",height:String(100)+"%",background:whiteMode?"transparent":colorExtended.black,zIndex:990,opacity:String(.3)}}),loading=createSvg({mother,source:AbstractNode.svgMaker.returnLoading(),class:["loading"],style:{position:"fixed",top:withOut(50,Number(width)/2,"px"),left:withOut(50,Number(width)/2,"px"),width:String(width)+"px",height:String(width)+"px",zIndex:990}}),new class GrayLoading{cancel;loading;constructor(cancel,loading){this.cancel=cancel,this.loading=loading}remove=()=>{this.loading.remove(),this.cancel.remove()}}(cancel,loading.source)};static whiteProgressLoading=(mother=null,emptyProgress=!1,transparentBackground=!1,injectionZIndex=990,whiteIconMode=!1)=>{const{createNode,createSvg,colorExtended,withOut,mediaNumber,mediaEa,createDom}=AbstractNode,zIndex=injectionZIndex;let width,ea,cancel,loading,progressBox,progressWidth,progressSize,progressWeight,progressHeight,progressPadding;return ea=mediaEa(),width=mediaNumber(50,50,48,40,10),progressWidth=mediaNumber(200,200,200,200,20),progressHeight=mediaNumber(40,40,36,32,4),progressSize=mediaNumber(17,17,17,15,3.5),progressWeight=mediaNumber(400,400,400,400,400),progressPadding=mediaNumber(20,20,20,17,3.9),null==mother&&(mother=document.body),cancel=createDom({mother,style:{position:"fixed",top:String(0),left:String(0),width:String(100)+"%",height:String(100)+"%",background:transparentBackground?"transparent":colorExtended.white,zIndex,animation:"loadingfadein 0.2s ease forwards",opacity:0}}),loading=createSvg({mother,mode:"svg",source:whiteIconMode?AbstractNode.svgMaker.returnLoading(AbstractNode.colorExtended.white,AbstractNode.colorExtended.white):AbstractNode.svgMaker.returnLoading(),class:["loading"],style:{position:"fixed",top:withOut(50,Number(width)/2+Number(progressPadding)),left:withOut(50,Number(width)/2),width,height:width,zIndex,mixBlendMode:whiteIconMode?"normal":"multiply",opacity:whiteIconMode?.6:1}}),progressBox=createDom({mother,style:{display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",height:progressHeight,width:progressWidth,top:withOut(50,Number(progressHeight)/2-Number(progressPadding)),left:withOut(50,Number(progressWidth)/2),zIndex},child:{text:"0%",style:{display:emptyProgress?"none":"inline-block",position:"relative",fontSize:progressSize,fontWeight:progressWeight,fontFamily:"cabinet",color:colorExtended.black}}}),new WhiteLoading(cancel,loading,progressBox)};static setPolling=(data,url,interval,callback)=>{let worker,workerJsString,blob,blobUrl;workerJsString=AbstractNode.networkSetString(),workerJsString+="\n\n",workerJsString+=String(`\n    const thisHost = "${window.location.protocol+"//"+window.location.host}";\n    const main = async function () {\n      try {\n        onmessage = async function (e) {\n          try {\n            if (e.data.data === undefined || e.data.url === undefined || e.data.interval === undefined) {\n              throw new Error("invalid post message");\n            }\n            const { data, url, interval } = equalJson(JSON.stringify(e.data));\n            let finalUrl;\n            let response;\n\n            if (/^\\//.test(url)) {\n              finalUrl = thisHost + url;\n            } else {\n              finalUrl = url;\n            }\n\n            setInterval(async () => {\n              try {\n                response = await ajaxJson(data, finalUrl);\n                postMessage(JSON.stringify({ response }));\n              } catch (e) {\n                console.log(e);\n              }\n            }, Number(interval));\n            response = await ajaxJson(data, finalUrl);\n            postMessage(JSON.stringify({ response }));\n\n          } catch (e) {\n            console.log(e);\n          }\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    }\n    main().catch((err) => { console.log(err); });\n    `).split("\n").map(s=>s.trim()).join("\n"),blob=new Blob([workerJsString],{type:"application/javascript"}),blobUrl=window.URL.createObjectURL(blob),worker=new Worker(blobUrl),worker.addEventListener("message",async e=>{try{const{response}=AbstractNode.equalJson(e.data);await callback(response)}catch(e){console.log(e)}}),worker.addEventListener("error",e=>{console.log(e)}),worker.postMessage({data,url,interval})};static ajaxSse=async(data,url)=>{try{const finalPostData={data:{...data}};return await AbstractNode.ajaxJson(finalPostData,url,{equal:!0})}catch(e){const nullPromise=()=>new Promise((resolve,reject)=>{resolve({error:e.message})});return await nullPromise()}};static pwaDetection=()=>{try{const currentGetQuery=()=>{let obj={},target=window.document.location.search,decode=str=>decodeURIComponent(str.split("+").join(" "));return target.replace(/\??(?:([^=]+)=([^&]*)&?)/g,(origin,p1,p2)=>(obj[decode(p1)]=decode(p2),"")),obj},isStandalone=window.matchMedia("(display-mode: standalone)").matches,isFullscreen=window.matchMedia("(display-mode: fullscreen)").matches,isMinimalUI=window.matchMedia("(display-mode: minimal-ui)").matches,isIOSPWA=!0===window.navigator?.standalone,isLocalhost=/localhost\:[0-9]+/gi.test(window.location.host),isDevhost=new RegExp(ADDRESS.DEVHOST.split("/").filter(s=>""!==s.trim()).filter(s=>!/https?\:/gi.test(s))[0],"gi").test(window.location.host),isPwaDisableMode="true"===currentGetQuery().pwadisable,isElectron=/Electron/gi.test(window.navigator.userAgent);return isStandalone||isFullscreen||isMinimalUI||isIOSPWA||isLocalhost||isDevhost||isPwaDisableMode||isElectron}catch{return!1}};static backgroundSse=(url,callback)=>{let worker,workerJsString,blob,blobUrl;workerJsString=AbstractNode.networkSetString(),workerJsString+="\n\n",workerJsString+=String(`\n    const thisHost = "${window.location.protocol+"//"+window.location.host}";\n    const main = async function () {\n      try {\n        onmessage = async function (e) {\n          try {\n            if (e.data.url === undefined) {\n              throw new Error("invalid post message");\n            }\n            const { url } = e.data;\n            let finalUrl;\n\n            if (/^\\//.test(url)) {\n              finalUrl = thisHost + url;\n            } else {\n              finalUrl = url;\n            }\n\n            const sseSrouce = new EventSource(finalUrl);\n            sseSrouce.addEventListener("message", (e) => {\n              postMessage(e.data);\n            });\n            sseSrouce.addEventListener("error", (e) => {\n              console.log(e);\n            });\n            \n          } catch (e) {\n            console.log(e);\n          }\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    }\n    main().catch((err) => { console.log(err); });\n    `).split("\n").map(s=>s.trim()).join("\n"),blob=new Blob([workerJsString],{type:"application/javascript"}),blobUrl=window.URL.createObjectURL(blob),worker=new Worker(blobUrl),worker.addEventListener("message",async e=>{try{const response=AbstractNode.equalJson(e.data);await callback(response)}catch(e){console.log(e)}}),worker.addEventListener("error",e=>{console.log(e)}),worker.postMessage({url})};static scrollTo=(from,valueOrTo,visualSpecific=0,noSmoothMode=!1,callback=async()=>{})=>{const tempEventName="__tempScrollYOberserEventFromScrollTo__",tempTimeoutScrollToName="__tempTimeoutScrollToNameScrollTo__",tempTimeoutScrollCallBack="__tempTimeoutScrollCallBack__";if(from instanceof HTMLElement)if("number"!=typeof valueOrTo){if("object"!=typeof valueOrTo)throw new Error("invaild input");{let thisValueNumber;thisValueNumber=from.scrollTop+valueOrTo.getBoundingClientRect().top,from.scrollTop=thisValueNumber-visualSpecific}}else from.scrollTop=valueOrTo-visualSpecific;else"number"==typeof valueOrTo?noSmoothMode?window.scroll({top:valueOrTo-visualSpecific,left:0}):window.scroll({top:valueOrTo-visualSpecific,left:0,behavior:"smooth"}):noSmoothMode?window.scroll({top:Math.abs(document.body.getBoundingClientRect().top-valueOrTo.getBoundingClientRect().top)-visualSpecific,left:0}):window.scroll({top:Math.abs(document.body.getBoundingClientRect().top-valueOrTo.getBoundingClientRect().top)-visualSpecific,left:0,behavior:"smooth"});from!==window||0!==valueOrTo||noSmoothMode?from!==window||noSmoothMode||"number"==typeof valueOrTo||(void 0!==AbstractNode.stacks[tempTimeoutScrollToName]&&clearTimeout(AbstractNode.stacks[tempTimeoutScrollToName]),void 0!==AbstractNode.stacks[tempEventName]&&window.removeEventListener("scroll",AbstractNode.stacks[tempEventName]),AbstractNode.stacks[tempTimeoutScrollCallBack]=0,Math.floor(window.scrollY)>Math.abs(document.body.getBoundingClientRect().top-valueOrTo.getBoundingClientRect().top)-visualSpecific?AbstractNode.stacks[tempTimeoutScrollToName]=setTimeout(async()=>{0===AbstractNode.stacks[tempTimeoutScrollCallBack]&&await callback(),AbstractNode.stacks[tempTimeoutScrollCallBack]=1,window.removeEventListener("scroll",AbstractNode.stacks[tempEventName])},800):AbstractNode.stacks[tempTimeoutScrollToName]=setTimeout(async()=>{0===AbstractNode.stacks[tempTimeoutScrollCallBack]&&(await AbstractNode.sleep(50),await callback()),AbstractNode.stacks[tempTimeoutScrollCallBack]=1,window.removeEventListener("scroll",AbstractNode.stacks[tempEventName])},800)):(void 0!==AbstractNode.stacks[tempTimeoutScrollToName]&&clearTimeout(AbstractNode.stacks[tempTimeoutScrollToName]),void 0!==AbstractNode.stacks[tempEventName]&&window.removeEventListener("scroll",AbstractNode.stacks[tempEventName]),AbstractNode.stacks[tempTimeoutScrollCallBack]=0,0!==Math.floor(window.scrollY)?AbstractNode.stacks[tempTimeoutScrollToName]=setTimeout(async()=>{window.scroll({top:0,left:0,behavior:"smooth"}),0===AbstractNode.stacks[tempTimeoutScrollCallBack]&&await callback(),AbstractNode.stacks[tempTimeoutScrollCallBack]=1,window.removeEventListener("scroll",AbstractNode.stacks[tempEventName])},800):(0===AbstractNode.stacks[tempTimeoutScrollCallBack]&&callback().catch(err=>{console.log(err)}),AbstractNode.stacks[tempTimeoutScrollCallBack]=1))};static scrollAfter=()=>new Promise((resolve,reject)=>{try{AbstractNode.scrollTo(window,0,0,!1,async()=>{await new Promise(resolve=>setTimeout(()=>resolve(!0),100)),resolve(!0)})}catch(e){reject(e)}});static cacheImage=async urls=>{const caching=async url=>{const cache=await caches.open("image-cache"),cachedResponse=await cache.match(url);if(void 0!==cachedResponse){if("string"==typeof cachedResponse.headers.get("Last-Modified"))return!0;{await cache.delete(url);const response=await fetch(url,{mode:"cors",cache:"reload"});return await cache.put(url,response),!1}}try{const response=await fetch(url,{mode:"cors",cache:"reload"});return await cache.put(url,response),!1}catch(error){return console.error(`Failed to cache image: ${url}`,error),!1}};let resultBoolean,tempBoolean;resultBoolean=!0;for(let url of urls)tempBoolean=await caching(url),tempBoolean||(resultBoolean=!1);return AbstractNode.lastVisitInspector()&&(resultBoolean=!1),resultBoolean};static safeLoadImage=async(url,sleepMode=!1)=>{try{const tempId="temp_safe_load_image"+String(Math.round(100*Math.random()))+AbstractNode.uniqueValue("hex");return CreateDom.createDom({mother:window.document.body,id:tempId,mode:"img",source:url,style:{zIndex:-2,opacity:0,width:AbstractNode.pixelUnit(50),position:"absolute",bottom:0,right:0,transition:"all 0s ease"}}),setTimeout(()=>{const targetId=window.document.getElementById(tempId);if(targetId)try{targetId.remove()}catch{}},3e3),sleepMode&&await(delta=10,new Promise(resolve=>setTimeout(resolve,delta))),!0}catch(e){return console.log(e),!1}var delta};static setQueue=(callback,delay)=>{if("function"!=typeof callback)throw new Error("invaild input");let propertyName;"number"!=typeof delay&&(delay=0),propertyName="tempQueue_"+String((new Date).valueOf())+String(Math.round(1e4*Math.random())),AbstractNode.timeouts[propertyName]=setTimeout(()=>{callback(),clearTimeout(AbstractNode.timeouts[propertyName]),AbstractNode.timeouts[propertyName]=null},delay)};static setDebounce=(callback,name="__null__",delay=-1)=>{if("__null__"===name&&console.log("must set debounce name"),null===AbstractNode.timeouts[name]&&void 0===AbstractNode.timeouts[name]||window.clearTimeout(AbstractNode.timeouts[name]),-1===delay){delay="vw"===AbstractNode.mediaEa()?20:30}AbstractNode.timeouts[name]=window.setTimeout(()=>{callback().then(()=>{window.clearTimeout(AbstractNode.timeouts[name]),AbstractNode.timeouts[name]=null}).catch(e=>{window.clearTimeout(AbstractNode.timeouts[name]),AbstractNode.timeouts[name]=null})},delay)};static scrollSetting=(positionWatch=!1,initDelta=500,zeroException=!1)=>{zeroException||AbstractNode.setQueue(()=>{AbstractNode.scrollTo(window,0)});const eventFunction=async e=>{AbstractNode.setDebounce(async()=>{let newScrollEventsArray,executeResult,index;positionWatch&&console.log(window.scrollY,CreateDom.scrollEvents),newScrollEventsArray=[],index=0;for(let callback of CreateDom.scrollEvents)executeResult=await callback(window.scrollY),executeResult||newScrollEventsArray.push(callback),index++;CreateDom.scrollEvents=newScrollEventsArray},"____scroll_default_events_array_default____")};AbstractNode.setQueue(()=>{eventFunction().catch(e=>console.log(e)),window.addEventListener("scroll",eventFunction)},initDelta)};static scrollAppear=async(targetDom,injectionDelta=[.72,.75])=>{const desktop="vw"!==AbstractNode.mediaEa(),delta=desktop?injectionDelta[0]:injectionDelta[1],tempEventName="scroll_after_"+AbstractNode.uniqueValue("short")+"_"+String((new Date).valueOf()),tempEventBooToken=tempEventName+"_run_boo";let safeNumber;for(safeNumber=0;0===targetDom.getBoundingClientRect().top&&0===targetDom.getBoundingClientRect().height&&0===targetDom.getBoundingClientRect().width&&!(safeNumber>20);)await AbstractNode.sleep(10),safeNumber++;return AbstractNode.stacks[tempEventName]=null,AbstractNode.stacks[tempEventBooToken]=!1,Array.isArray(AbstractNode.stacks.scrollAppear_targets)||(AbstractNode.stacks.scrollAppear_targets=[]),setTimeout(()=>{targetDom.style.opacity=String(0),AbstractNode.stacks.scrollAppear_targets.push(targetDom),window.removeEventListener("scroll",AbstractNode.stacks[tempEventName]),AbstractNode.stacks[tempEventBooToken]=!1,AbstractNode.stacks[tempEventName]=async e=>{AbstractNode.setDebounce(async()=>{const targetDomTop=targetDom.getBoundingClientRect().top+window.scrollY-window.innerHeight*delta;window.scrollY>targetDomTop&&(AbstractNode.stacks[tempEventBooToken]=!0,targetDom.style.animation="fadeuporiginal 0.6s ease forwards",AbstractNode.stacks.scrollAppear_targets=AbstractNode.stacks.scrollAppear_targets.filter(d=>d!==targetDom),window.removeEventListener("scroll",AbstractNode.stacks[tempEventName]),AbstractNode.stacks[tempEventName]=null,AbstractNode.stacks[tempEventBooToken]=!1)},"__debounce_name"+tempEventName)},window.addEventListener("scroll",AbstractNode.stacks[tempEventName])},500),setTimeout(()=>{window.removeEventListener("scroll",AbstractNode.stacks[tempEventName]),window.addEventListener("scroll",AbstractNode.stacks[tempEventName])},800),"number"==typeof AbstractNode.timeouts.scrollAppear_targets_delayTimeout&&window.clearTimeout(AbstractNode.timeouts.scrollAppear_targets_delayTimeout),AbstractNode.timeouts.scrollAppear_targets_delayTimeout=window.setTimeout(()=>{if(Array.isArray(AbstractNode.stacks.scrollAppear_targets)){const targetList=AbstractNode.stacks.scrollAppear_targets;for(let dom of targetList)dom.style.animation="fadeuporiginal 0.6s ease forwards"}window.clearTimeout(AbstractNode.timeouts.scrollAppear_targets_delayTimeout),AbstractNode.timeouts.scrollAppear_targets_delayTimeout=null},6e4),tempEventName};static scrollLoad=async(standardDom,loadCallback,injectionDelta=[.72,.75])=>{const desktop="vw"!==AbstractNode.mediaEa(),delta=desktop?injectionDelta[0]:injectionDelta[1],tempEventName="scroll_load_async_"+AbstractNode.uniqueValue("short")+"_"+String((new Date).valueOf()),tempEventBooToken=tempEventName+"_run_boo";let safeNumber;for(safeNumber=0;0===standardDom.getBoundingClientRect().top&&0===standardDom.getBoundingClientRect().height&&0===standardDom.getBoundingClientRect().width&&!(safeNumber>20);)await AbstractNode.sleep(10),safeNumber++;return AbstractNode.stacks[tempEventName]=null,AbstractNode.stacks[tempEventBooToken]=!1,setTimeout(()=>{window.removeEventListener("scroll",AbstractNode.stacks[tempEventName]),AbstractNode.stacks[tempEventBooToken]=!1,AbstractNode.stacks[tempEventName]=async e=>{AbstractNode.setDebounce(async()=>{const targetDomTop=standardDom.getBoundingClientRect().top+window.scrollY-window.innerHeight*delta;window.scrollY>targetDomTop&&(AbstractNode.stacks[tempEventBooToken]||(AbstractNode.stacks[tempEventBooToken]=!0,await loadCallback(window.scrollY)),window.removeEventListener("scroll",AbstractNode.stacks[tempEventName]),AbstractNode.stacks[tempEventName]=null,AbstractNode.stacks[tempEventBooToken]=!1)},"__debounce_name"+tempEventName)},window.addEventListener("scroll",AbstractNode.stacks[tempEventName])},500),tempEventName};static scrollFlush=()=>{CreateDom.scrollEvents=[]};static whiteCardEvent=(callback=async s=>{},fullSizeMode=!1,noScrollCloseMode=!1,relativeCardMode=!1,injectionZIndex=-1,cancelPatchCallback=async e=>{await new Promise(resolve=>setTimeout(()=>{resolve()},500))})=>{const{withOut,createAbstract,pixelUnit,createDom,createSvg,mediaNumber,mediaString,colorExtended,isMac,isIphone,svgMaker,blankHref,stringToLink,setDebounce,linkToString,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,objectDeepCopy,swipePatch}=AbstractNode,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(!1),naviHeight=CreateDom.getNaviheight(),totalContents=document.getElementById("totalcontents"),standardWidth=mediaNumber(...AbstractNode.standardWidthArray);return AbstractNode.events.scrollCloseEvent=async e=>{if(e.stopImmediatePropagation(),e.stopPropagation(),1===AbstractNode.stacks.__temporaryPreventScroll)e.preventDefault();else if(null!==document.querySelector(".whitePopupClassName"))if(e.preventDefault(),"number"!=typeof AbstractNode.stacks.__temporaryScrollStack)AbstractNode.stacks.__temporaryScrollStack=0;else if(AbstractNode.stacks.__temporaryScrollStack<40)AbstractNode.stacks.__temporaryScrollStack=AbstractNode.stacks.__temporaryScrollStack+1;else{const motherArr=AbstractNode.selectByClass("whitePopupClassName");if(motherArr.length>1){AbstractNode.stacks.__temporaryPreventScroll=1;const[cancel,whiteBase]=motherArr;1===AbstractNode.stacks.initScrollStatus?(cancel.style.animation="justfadeoutsmall 0.5s ease forwards",whiteBase.style.animation="fadedownlite 0.5s ease forwards"):(cancel.style.animation="justfadeoutsmall 0.5s ease forwards",whiteBase.style.animation="fadedownentire 0.5s ease forwards"),AbstractNode.stacks.initScrollStatus=0,await AbstractNode.sleep(500),AbstractNode.stacks.__temporaryPreventScroll=0,AbstractNode.removeByClass("whitePopupClassName"),AbstractNode.stacks.__temporaryScrollStack=0,window.removeEventListener("scroll",AbstractNode.events.scrollCloseEvent)}}},async function(e){try{const zIndex=-1===injectionZIndex?104:injectionZIndex;let cancelBack,whiteBase,contentsPaddingBottom,whiteBaseRadius,tongMargin,tongMarginTop,whiteCloseEvent,whiteAsyncCloseEvent,whiteCardWidth,whiteCardLeft,whiteCardHeight,whiteCardAnimation,whiteCardTop,whiteCardBorderTopLeftRadius,whiteCardBorderTopRightRadius,whiteCardBorderBottomLeftRadius,whiteCardBorderBottomRightRadius,whiteCardAnimationOut;if(contentsPaddingBottom=mediaNumber(140,130,120,100,16),whiteBaseRadius=mediaNumber(15,15,15,15,2.5),tongMargin=mediaNumber(48,40,36,32,5.2),tongMarginTop=mediaNumber(52,44,40,36,6),whiteCardWidth=media[0]?pixelUnit(standardWidth):withOut(0),whiteCardLeft=media[0]?withOut(50,standardWidth/2,ea):String(0),whiteCardHeight=withOut(naviHeight,"px"),whiteCardAnimation="fadeupentire 0.5s ease forwards",whiteCardTop=pixelUnit(naviHeight),whiteCardBorderTopLeftRadius=whiteBaseRadius,whiteCardBorderTopRightRadius=whiteBaseRadius,whiteCardBorderBottomLeftRadius=0,whiteCardBorderBottomRightRadius=0,whiteCardAnimationOut="fadedownentire 0.5s ease forwards",fullSizeMode)whiteCardWidth=withOut(0),whiteCardLeft=String(0);else if(relativeCardMode){const outerMargin=mediaNumber(.36*naviHeight,.34*naviHeight,.32*naviHeight,.3*naviHeight,.3*naviHeight);whiteCardTop=pixelUnit(outerMargin),whiteCardWidth=withOut(2*outerMargin,"px"),whiteCardLeft=pixelUnit(outerMargin),whiteCardHeight=withOut(2*outerMargin,"px"),whiteCardBorderTopLeftRadius=whiteBaseRadius,whiteCardBorderTopRightRadius=whiteBaseRadius,whiteCardBorderBottomLeftRadius=whiteBaseRadius,whiteCardBorderBottomRightRadius=whiteBaseRadius,whiteCardAnimation="fadeuporiginalbig 0.5s ease forwards",whiteCardAnimationOut="fadeoutoriginalbig 0.5s ease forwards"}window.history.pushState({mode:"white"},""),whiteCloseEvent=e=>{cancelPatchCallback(e).catch(err=>console.log(err));const motherArr=[...document.querySelectorAll(".whitePopupClassName")];if(motherArr.length>1){const[cancel,whiteBase]=motherArr.map(d=>d);cancel.style.animation="justfadeoutsmall 0.5s ease forwards",whiteBase.style.animation=whiteCardAnimationOut,setQueue(()=>{removeByClass("whitePopupClassName"),window.removeEventListener("scroll",AbstractNode.events.scrollCloseEvent)},500),window.history.pushState({mode:"base"},"")}},AbstractNode.events.whiteCloseEvent=whiteCloseEvent,whiteAsyncCloseEvent=e=>new Promise((resolve,reject)=>{try{const motherArr=[...document.querySelectorAll(".whitePopupClassName")];if(motherArr.length>1){const[cancel,whiteBase]=motherArr.map(d=>d);cancel.style.animation="justfadeoutsmall 0.5s ease forwards",whiteBase.style.animation=whiteCardAnimationOut,cancelPatchCallback(e).then(()=>{removeByClass("whitePopupClassName"),window.removeEventListener("scroll",AbstractNode.events.scrollCloseEvent),resolve()}).catch(err=>console.log(err)),window.history.pushState({mode:"base"},"")}else resolve()}catch(err){reject(err)}}),AbstractNode.events.whiteAsyncCloseEvent=whiteAsyncCloseEvent,cancelBack=createAbstract({mother:totalContents,class:["whitePopupClassName"],event:{click:whiteCloseEvent},style:{position:"fixed",top:0,left:0,width:withOut(0),height:withOut(0),opacity:0,animation:"justfadeinsmall 0.4s ease forwards",background:colorExtended.black,zIndex,cursor:"default"}}),whiteBase=createAbstract({mother:totalContents,class:["whitePopupClassName"],style:{position:"fixed",width:whiteCardWidth,height:whiteCardHeight,top:whiteCardTop,left:whiteCardLeft,borderTopLeftRadius:whiteCardBorderTopLeftRadius,borderTopRightRadius:whiteCardBorderTopRightRadius,borderBottomLeftRadius:whiteCardBorderBottomLeftRadius,borderBottomRightRadius:whiteCardBorderBottomRightRadius,background:colorExtended.white,animation:whiteCardAnimation,zIndex,flexDirection:"column",overflow:"hidden"},child:{style:{display:"block",width:withOut(0),height:withOut(0),overflow:"scroll"},child:{style:{display:"block",width:withOut(2*tongMargin),height:"auto",paddingLeft:tongMargin,paddingRight:tongMargin,paddingTop:tongMarginTop,paddingBottom:contentsPaddingBottom}}}}).firstChild,await callback(whiteBase.firstChild),noScrollCloseMode||(desktop?(AbstractNode.stacks.__temporaryScrollStack=0,window.addEventListener("scroll",AbstractNode.events.scrollCloseEvent)):(swipePatch("down",whiteCloseEvent,whiteBase,"swipeStack_whiteBlock_down_",null,()=>whiteBase.scrollTop<=10),swipePatch({up:whiteCloseEvent,right:whiteCloseEvent},()=>{},whiteBase.parentElement.parentElement,"swipeStack_whiteBlock_bottom_",whiteBase,()=>Math.floor(Math.abs(whiteBase.firstChild.getBoundingClientRect().height-window.innerHeight))-2<=Math.floor(Math.abs(whiteBase.firstChild.getBoundingClientRect().top)))))}catch(e){console.log(e)}}};static initSetting=(flushMode=!0)=>{flushMode&&AbstractNode.scrollFlush();const media=AbstractNode.mediaConditionToArray(!0),ea=AbstractNode.mediaEa(),mobile=media[4],desktop=!mobile,big=media[0]||media[1]||media[2];return{ea,media,mobile,desktop,big,small:!big}};static setThrottle=(callback,ms=100)=>{let timeout,waiting;return waiting=!1,function(){waiting||(callback(),waiting=!0,timeout=setTimeout(function(){waiting=!1,clearTimeout(timeout)},ms))}};static delayLaunching=(callback,ms=100)=>{let timer=0;return function(){0!==timer&&clearTimeout(timer),timer=setTimeout(callback,ms)}};static swipePatch=(direction,callback=function(e){},dom=document,stackConst="swipeStack_",scrollBanTarget=null,conditionFunc=()=>!0)=>{const xDiff="xDiff",yDiff="yDiff",getNearestAttribute=function(el,attributeName,defaultValue){let attributeValue;for(;el&&el!==document.documentElement;){if(attributeValue=el instanceof HTMLElement||el instanceof SVGElement?el.getAttribute(attributeName):null,attributeValue)return attributeValue;el=el.parentNode}return defaultValue};if("string"==typeof direction){if(!["up","down","left","right"].includes(direction))throw new Error("must be direction: [ up, down, left, right ]");if("function"!=typeof callback)throw new Error("must be function input");AbstractNode.stacks[stackConst+direction]=callback.bind(dom)}else{if("object"!=typeof direction)throw new Error("invaild input");for(let i in direction){if(!["up","down","left","right"].includes(i))throw new Error("must be direction: [ up, down, left, right ]");if("function"!=typeof direction[i])throw new Error("must be function input");AbstractNode.stacks[stackConst+i]=direction[i].bind(dom)}}"function"==typeof AbstractNode.stacks[stackConst+"handleTouchStart"]&&dom.removeEventListener("touchstart",AbstractNode.stacks[stackConst+"handleTouchStart"]),"function"==typeof AbstractNode.stacks[stackConst+"handleTouchMove"]&&dom.removeEventListener("touchmove",AbstractNode.stacks[stackConst+"handleTouchMove"]),"function"==typeof AbstractNode.stacks[stackConst+"handleTouchEnd"]&&dom.removeEventListener("touchend",AbstractNode.stacks[stackConst+"handleTouchEnd"]),AbstractNode.stacks[stackConst+"xDown"]=null,AbstractNode.stacks[stackConst+"yDown"]=null,AbstractNode.stacks[stackConst+xDiff]=null,AbstractNode.stacks[stackConst+yDiff]=null,AbstractNode.stacks[stackConst+"timeDown"]=null,AbstractNode.stacks[stackConst+"startElement"]=null,AbstractNode.stacks[stackConst+"handleTouchStart"]=function(e){conditionFunc()&&(AbstractNode.stacks[stackConst+"startElement"]=e.target,AbstractNode.stacks[stackConst+"timeDown"]=Date.now(),AbstractNode.stacks[stackConst+"xDown"]=e.touches[0].clientX,AbstractNode.stacks[stackConst+"yDown"]=e.touches[0].clientY,AbstractNode.stacks[stackConst+xDiff]=0,AbstractNode.stacks[stackConst+yDiff]=0,null!==scrollBanTarget&&(scrollBanTarget.addEventListener("DOMMouseScroll",AbstractNode.stacks.__temporaryPreventDefaultEvent),scrollBanTarget.addEventListener("wheel",AbstractNode.stacks.__temporaryPreventDefaultEvent),scrollBanTarget.addEventListener("mousewheel",AbstractNode.stacks.__temporaryPreventDefaultEvent),scrollBanTarget.addEventListener("touchmove",AbstractNode.stacks.__temporaryPreventDefaultEvent)),dom.addEventListener("DOMMouseScroll",AbstractNode.stacks.__temporaryPreventDefaultEvent),dom.addEventListener("wheel",AbstractNode.stacks.__temporaryPreventDefaultEvent),dom.addEventListener("mousewheel",AbstractNode.stacks.__temporaryPreventDefaultEvent),dom.addEventListener("touchmove",AbstractNode.stacks.__temporaryPreventDefaultEvent))},AbstractNode.stacks[stackConst+"handleTouchMove"]=function(e){let swipeThreshold,direction;if(conditionFunc()){if(swipeThreshold=parseInt(getNearestAttribute(AbstractNode.stacks[stackConst+"startElement"],"data-swipe-threshold",String(2)),10),!AbstractNode.stacks[stackConst+"xDown"]||!AbstractNode.stacks[stackConst+"yDown"])return;AbstractNode.stacks[stackConst+xDiff]=AbstractNode.stacks[stackConst+"xDown"]-e.touches[0].clientX,AbstractNode.stacks[stackConst+yDiff]=AbstractNode.stacks[stackConst+"yDown"]-e.touches[0].clientY,direction=null,Math.abs(AbstractNode.stacks[stackConst+xDiff])>Math.abs(AbstractNode.stacks[stackConst+yDiff])?Math.abs(AbstractNode.stacks[stackConst+xDiff])>swipeThreshold&&(direction=AbstractNode.stacks[stackConst+xDiff]>0?"left":"right"):Math.abs(AbstractNode.stacks[stackConst+yDiff])>swipeThreshold&&(direction=AbstractNode.stacks[stackConst+yDiff]>0?"up":"down"),null!==direction&&"function"!=typeof AbstractNode.stacks[stackConst+direction]&&(null!==scrollBanTarget&&(scrollBanTarget.removeEventListener("DOMMouseScroll",AbstractNode.stacks.__temporaryPreventDefaultEvent),scrollBanTarget.removeEventListener("wheel",AbstractNode.stacks.__temporaryPreventDefaultEvent),scrollBanTarget.removeEventListener("mousewheel",AbstractNode.stacks.__temporaryPreventDefaultEvent),scrollBanTarget.removeEventListener("touchmove",AbstractNode.stacks.__temporaryPreventDefaultEvent)),dom.removeEventListener("DOMMouseScroll",AbstractNode.stacks.__temporaryPreventDefaultEvent),dom.removeEventListener("wheel",AbstractNode.stacks.__temporaryPreventDefaultEvent),dom.removeEventListener("mousewheel",AbstractNode.stacks.__temporaryPreventDefaultEvent),dom.removeEventListener("touchmove",AbstractNode.stacks.__temporaryPreventDefaultEvent))}},AbstractNode.stacks[stackConst+"handleTouchEnd"]=function(e){if(conditionFunc()){if(null!==scrollBanTarget&&(scrollBanTarget.removeEventListener("DOMMouseScroll",AbstractNode.stacks.__temporaryPreventDefaultEvent),scrollBanTarget.removeEventListener("wheel",AbstractNode.stacks.__temporaryPreventDefaultEvent),scrollBanTarget.removeEventListener("mousewheel",AbstractNode.stacks.__temporaryPreventDefaultEvent),scrollBanTarget.removeEventListener("touchmove",AbstractNode.stacks.__temporaryPreventDefaultEvent)),dom.removeEventListener("DOMMouseScroll",AbstractNode.stacks.__temporaryPreventDefaultEvent),dom.removeEventListener("wheel",AbstractNode.stacks.__temporaryPreventDefaultEvent),dom.removeEventListener("mousewheel",AbstractNode.stacks.__temporaryPreventDefaultEvent),dom.removeEventListener("touchmove",AbstractNode.stacks.__temporaryPreventDefaultEvent),AbstractNode.stacks[stackConst+"startElement"]!==e.target)return;const thresholdKey="data-swipe-threshold",timeoutKey="data-swipe-timeout",thresholdValue=20,timeoutValue=500;let swipeThreshold,swipeTimeout,timeDiff,direction,changedTouches,eventData;swipeThreshold=parseInt(getNearestAttribute(AbstractNode.stacks[stackConst+"startElement"],thresholdKey,String(thresholdValue)),10),swipeTimeout=parseInt(getNearestAttribute(AbstractNode.stacks[stackConst+"startElement"],timeoutKey,String(timeoutValue)),10),timeDiff=Date.now()-AbstractNode.stacks[stackConst+"timeDown"],changedTouches=e.changedTouches||e.touches||[],direction=null,Math.abs(AbstractNode.stacks[stackConst+xDiff])>Math.abs(AbstractNode.stacks[stackConst+yDiff])?Math.abs(AbstractNode.stacks[stackConst+xDiff])>swipeThreshold&&timeDiff<swipeTimeout&&(direction=AbstractNode.stacks[stackConst+xDiff]>0?"left":"right"):Math.abs(AbstractNode.stacks[stackConst+yDiff])>swipeThreshold&&timeDiff<swipeTimeout&&(direction=AbstractNode.stacks[stackConst+yDiff]>0?"up":"down"),null!==direction&&(eventData={direction,start:[parseInt(AbstractNode.stacks[stackConst+"xDown"],10),parseInt(AbstractNode.stacks[stackConst+"yDown"],10)],end:[parseInt((changedTouches[0]||{}).clientX||-1,10),parseInt((changedTouches[0]||{}).clientY||-1,10)],y:AbstractNode.stacks[stackConst+yDiff],x:AbstractNode.stacks[stackConst+xDiff],top:AbstractNode.stacks[stackConst+yDiff],left:AbstractNode.stacks[stackConst+xDiff]},"function"==typeof AbstractNode.stacks[stackConst+direction]&&AbstractNode.stacks[stackConst+direction](eventData)),AbstractNode.stacks[stackConst+"xDown"]=null,AbstractNode.stacks[stackConst+"yDown"]=null,AbstractNode.stacks[stackConst+"timeDown"]=null}},dom.addEventListener("touchstart",AbstractNode.stacks[stackConst+"handleTouchStart"],!1),dom.addEventListener("touchmove",AbstractNode.stacks[stackConst+"handleTouchMove"],!1),dom.addEventListener("touchend",AbstractNode.stacks[stackConst+"handleTouchEnd"],!1)};static variableArray=(length,callback=i=>i)=>{if("number"!=typeof length)throw new Error("invaild input");let targetArray=[];for(let i=0;i<length;i++)"function"==typeof callback?targetArray.push(callback(i)):targetArray.push(i);return targetArray};static range=(length,callback=i=>i)=>{if("number"!=typeof length)throw new Error("invaild input");let targetArray=[];for(let i=0;i<length;i++)"function"==typeof callback?targetArray.push(callback(i)):targetArray.push(i);return targetArray};static divideBetween=(divideLength,divideBetween,currentIndex)=>divideLength<2||currentIndex%divideLength===divideLength-1?0:divideBetween;static divideBlock=(divideLength,divideBetween,sidePadding=0,multiply=1)=>{if("number"!=typeof divideLength||"number"!=typeof divideBetween)throw new Error("invalid input");if(divideLength<2)return"calc(100% * "+String(divideLength)+")";const{mediaEa,percent}=AbstractNode;let ea,finalString,entireArea,calcString;return ea=mediaEa(),entireArea="calc("+percent()+" - "+String(2*sidePadding)+ea+")",calcString="calc(calc("+entireArea+" - "+String(divideBetween*(divideLength-1))+ea+") / "+String(divideLength)+")",finalString=1===multiply?calcString:"calc(calc("+calcString+" * "+String(multiply)+") + "+String(divideBetween*(multiply-1))+ea+")",finalString};static getChildrenArray=targetDom=>{if(void 0===targetDom.children||null===targetDom.children)throw new Error("invalid input");try{return Array.from(targetDom.children).map(d=>d)}catch(e){return console.log(e),[]}};static blackTalk=async(eventFunction=async e=>{},iconString="profileLogo",iconWidth=22,iconTop=-1,iconLeft=0)=>{const{mediaEa}=AbstractNode,colorChip=(mediaEa(),AbstractNode.colorExtended),{createNode,createNodes,svgMaker,createSvg,selectByClass,createDom,mediaNumber,withOut,isMac,isIphone,blankHref,setQueue,selfHref,cleanChildren}=AbstractNode,totalContents=document.getElementById("totalcontents");try{let baseWidth,bottom,right,blackBase,talkIcon,iconVisualTop,iconVisualLeft,pastDoms;baseWidth=mediaNumber(56,56,53,50,10),bottom=mediaNumber(35,35,33,28,4.8),right=mediaNumber(35,35,32,27,4.2),22===iconWidth&&(iconWidth=mediaNumber(22,22,20,18,3.8)),iconVisualTop=-1===iconTop?mediaNumber(-1,-1,-1,-1,-.1):iconTop,iconVisualLeft=iconLeft,pastDoms=selectByClass("blackTalkClassName");for(let dom of pastDoms)dom.remove();blackBase=createDom({mother:totalContents,class:["blackTalkClassName"],event:{click:eventFunction},style:{position:"fixed",cursor:"pointer",width:baseWidth,height:baseWidth,bottom,right,zIndex:2,borderRadius:baseWidth,background:colorChip.darkDarkRealBlack,justifyContent:"center",alignItems:"center",textAlign:"center",animation:"talkfade 1.2s ease forwards"},child:{style:{top:0,left:0,width:withOut(0),height:withOut(0),justifyContent:"center",alignItems:"center",textAlign:"center"}}}).firstChild,talkIcon=createSvg({mother:blackBase,mode:"svg",source:svgMaker[iconString](colorChip.white),style:{display:"inline-block",width:iconWidth,top:iconVisualTop,left:iconVisualLeft,cursor:"pointer"}})}catch(e){console.log(e)}};mediaConditionToArray(){return AbstractNode.mediaConditionToArray()}mediaQuery(code){return AbstractNode.mediaQuery(code)}mediaNumber(bigDesktop,desktop,smallDesktop,tablet,mobile){return AbstractNode.mediaNumber(bigDesktop,desktop,smallDesktop,tablet,mobile)}mediaString(bigDesktop,desktop,smallDesktop,tablet,mobile){return AbstractNode.mediaString(bigDesktop,desktop,smallDesktop,tablet,mobile)}mediaEa(){return AbstractNode.mediaEa()}colorParsing(str){return AbstractNode.colorParsing(str)}async ajaxPromise(data,url,option={}){return await AbstractNode.ajaxPromise(data,url,option)}currentCssList(documentOrShadow){return AbstractNode.currentCssList(documentOrShadow)}async ajaxForm(data,url,loadingDom=null){return await AbstractNode.ajaxForm(data,url,loadingDom)}async ajaxFormStream(data,url,loadingDom=null,onChunk=chunk=>{}){await AbstractNode.ajaxFormStream(data,url,loadingDom,onChunk)}async ajaxJson(data,url,option={}){return await AbstractNode.ajaxJson(data,url,option)}equalJson(jsonString){return AbstractNode.equalJson(jsonString)}equalObject=jsonObject=>{if("object"==typeof jsonObject&&null!==jsonObject)return AbstractNode.equalJson(JSON.stringify(jsonObject));throw new Error("invalid input")};setDomColor=(target,color)=>{AbstractNode.setDomColor(target,color)};toOrigin(command){return CreateDom.toOrigin(command)}keyframeCallback(command){return CreateDom.keyframeCallback(command)}async cacheImage(urls){return await AbstractNode.cacheImage(urls)}networkSetString(){return AbstractNode.networkSetString()}async ajaxMultiple(matrix){return await AbstractNode.ajaxMultiple(matrix)}async requestPromise(url){return await AbstractNode.requestPromise(url)}downloadBlob(inputData,fileName,mimeType="application/octet-stream"){return AbstractNode.downloadBlob(inputData,fileName,mimeType)}async downloadFile(url,forceName=null,loadingDom=null){return await AbstractNode.downloadFile(url,forceName,loadingDom)}createNode(mode){return AbstractNode.createNode(mode)}createNodes(arr){return AbstractNode.createNodes(arr)}createDom(domCommandObject){return AbstractNode.createDom(domCommandObject)}createImageGroup(imageGroupCommandObject){return CreateDom.createImageGroup(imageGroupCommandObject)}createAbstract=domCommandObject=>(domCommandObject.mode="abstract-div",AbstractNode.createDom(domCommandObject));mediaReload(){return this.media=AbstractNode.mediaReload(),this.media}createSvg(domCommandObject){return AbstractNode.createSvg(domCommandObject)}createVideo=domCommandObject=>CreateDom.createVideo(domCommandObject);async nodeQueue(obj){return await AbstractNode.nodeQueue(obj)}withOut(percent,num,ea){return AbstractNode.withOut(percent,num,ea)}specialFilter(target,liteMode=!1){return AbstractNode.specialFilter(target,liteMode)}vwConvert(num){return AbstractNode.vwConvert(num)}hangulToEnglish(original,exeMode=!0){return AbstractNode.hangulToEnglish(original,exeMode)}async ajaxSse(data,url){return await AbstractNode.ajaxSse(data,url)}setVisitDate(){return AbstractNode.setVisitDate()}autoHypenPhone(m){return AbstractNode.autoHypenPhone(m)}returnGet(){return AbstractNode.returnGet()}parsingPath(){return AbstractNode.parsingPath()}parseRatio(options){return AbstractNode.parseRatio(options)}addHrefEvent(dom,to){return AbstractNode.addHrefEvent(dom,to)}addScrollXEvent(node,name=""){return AbstractNode.addScrollXEvent(node,name)}getDateMatrix(year,month){return AbstractNode.getDateMatrix(year,month)}async sleep(time){return await AbstractNode.sleep(time)}stringifyError=e=>AbstractNode.stringifyError(e);downloadString(text,fileName,fileType="plain"){return AbstractNode.downloadString(text,fileName,fileType)}blankHref(link,downloadMode=!1,fileName="downloadFile"){return AbstractNode.blankHref(link,downloadMode,fileName)}lastVisitInspector(){return AbstractNode.lastVisitInspector()}selectByQuery(query,areaMother=document){return AbstractNode.selectByQuery(query,areaMother)}selfHref(link){return AbstractNode.selfHref(link)}styleInjection(dom,styleObj){return AbstractNode.styleInjection(dom,styleObj)}getCharacterRects=rootNode=>AbstractNode.getCharacterRects(rootNode);cssInjection(cssString){return AbstractNode.cssInjection(cssString)}uniqueValue(type="number"){return AbstractNode.uniqueValue(type)}async copyText(str){return await AbstractNode.copyText(str)}isMac(){return AbstractNode.isMac()}isIphone(){return AbstractNode.isIphone()}cleanChildren(dom){return AbstractNode.cleanChildren(dom)}objectDeepCopy(obj){return AbstractNode.objectDeepCopy(obj)}pixelUnit(num){return AbstractNode.pixelUnit(num)}eaUnit(num){return AbstractNode.eaUnit(num)}percent(num){return AbstractNode.percent(num)}async hexaJson(input,middleMode=!1){return await AbstractNode.hexaJson(input,middleMode)}async randomSleep(){return await AbstractNode.randomSleep()}findByFunction(targetList,callback){const result=targetList.find(callback);return void 0===result?null:result}autoComma(str,manVersion=!1){return AbstractNode.autoComma(str,manVersion)}dateToString(date,detail=!1,dayOption=!1){return AbstractNode.dateToString(date,detail,dayOption)}dateToHangul(date,shortYear=!1){return AbstractNode.dateToHangul(date,shortYear)}zeroAddition(num){return AbstractNode.zeroAddition(num)}stringToDate(str){return AbstractNode.stringToDate(str)}rangeToDate(str){return AbstractNode.rangeToDate(str)}linkToString(link){return AbstractNode.linkToString(link)}async promiseTogether(promiseArr){return await AbstractNode.promiseTogether(promiseArr)}stringToLink(string){return AbstractNode.stringToLink(string)}xyConverting(original){return AbstractNode.xyConverting(original)}cssCalc(x,mode,y){return AbstractNode.cssCalc(x,mode,y)}jsonToString(json){return AbstractNode.jsonToString(json)}stringToJson(string){return AbstractNode.stringToJson(string)}findByAttribute(domList,attributeName,attributeValue){return AbstractNode.findByAttribute(domList,attributeName,attributeValue)}appendQuery(obj){return AbstractNode.appendQuery(obj)}removeQuery(key){return AbstractNode.removeQuery(key)}hasQuery(key){return AbstractNode.hasQuery(key)}setQuery(obj){return AbstractNode.setQuery(obj)}querySetting(obj){return AbstractNode.querySetting(obj)}setCookie(obj,day=730,del=!1){return AbstractNode.setCookie(obj,day,del)}getCookiesAll(){return AbstractNode.getCookiesAll()}getCookieById(key){return AbstractNode.getCookieById(key)}objectToMatrix=obj=>AbstractNode.objectToMatrix(obj);setMetaData(obj){return AbstractNode.setMetaData(obj)}injectVideo(obj){return AbstractNode.injectVideo(obj)}removeByClass(className){return AbstractNode.removeByClass(className)}selectByClass(className,areaMother=document){return AbstractNode.selectByClass(className,areaMother)}fireEvent(dom,eventName){return AbstractNode.fireEvent(dom,eventName)}scrollFlush(){CreateDom.scrollEvents=[]}scrollAppear=async(targetDom,injectionDelta=[.6,.8])=>await AbstractNode.scrollAppear(targetDom,injectionDelta);scrollLoad=async(standardDom,loadCallback,injectionDelta=[.72,.75])=>await AbstractNode.scrollLoad(standardDom,loadCallback,injectionDelta);getRealBox(dom,original="attribute"){return AbstractNode.getRealBox(dom,original)}capitalizeString(str){return AbstractNode.capitalizeString(str)}toOriginKeyframe(duration){return CreateDom.toOriginKeyframe(duration)}transformCss(command){return CreateDom.transformCss(command)}async arrayPromise(promiseArr){return await AbstractNode.arrayPromise(promiseArr)}async dropToFiles(e){return await AbstractNode.dropToFiles(e)}async dropToForm(e,motherPath=null){return await AbstractNode.dropToForm(e,motherPath)}tempScrollBan(scrollBanTarget){return AbstractNode.tempScrollBan(scrollBanTarget)}tempScrollRelease(scrollBanTarget){return AbstractNode.tempScrollRelease(scrollBanTarget)}async cryptoString(password,string){return await AbstractNode.cryptoString(password,string)}async decryptoHash(password,hash){return await AbstractNode.decryptoHash(password,hash)}async blackAlert(message,callback=async()=>{},mannerMode=!1){return await AbstractNode.blackAlert(message,callback,mannerMode)}returnLoadingIcon(color=AbstractNode.colorExtended.darkShadow,color2=AbstractNode.colorExtended.black){return AbstractNode.returnLoadingIcon(color,color2)}objectToFlatArray=obj=>AbstractNode.objectToFlatArray(obj);generalCss(fontFamily){return AbstractNode.generalCss(fontFamily)}async loadingRun(navi=null){return await AbstractNode.loadingRun(navi)}prettyCalc(cssString){return AbstractNode.prettyCalc(cssString)}grayLoading(mother=null,whiteMode=!1){return AbstractNode.grayLoading(mother,whiteMode)}whiteProgressLoading(mother=null,emptyProgress=!1,transparentBackground=!1,injectionZIndex=990,whiteProgressLoading=!1){return AbstractNode.whiteProgressLoading(mother,emptyProgress,transparentBackground,injectionZIndex,whiteProgressLoading)}setPolling(data,url,interval,callback){return AbstractNode.setPolling(data,url,interval,callback)}backgroundSse(url,callback){return AbstractNode.backgroundSse(url,callback)}scrollTo(from,valueOrTo,visualSpecific=0,noSmoothMode=!1,callback=async()=>{}){return AbstractNode.scrollTo(from,valueOrTo,visualSpecific,noSmoothMode,callback)}setQueue(callback,delay){return AbstractNode.setQueue(callback,delay)}setDebounce(callback,name="__null__",delay=300){return AbstractNode.setDebounce(callback,name,delay)}setThrottle(callback,ms=100){return AbstractNode.setThrottle(callback,ms)}delayLaunching(callback,ms=100){return AbstractNode.delayLaunching(callback,ms)}swipePatch(direction,callback=function(e){},dom=document,stackConst="swipeStack_",scrollBanTarget=null,conditionFunc=()=>!0){return AbstractNode.swipePatch(direction,callback,dom,stackConst,scrollBanTarget,conditionFunc)}async scrollAfter(){return await AbstractNode.scrollAfter()}variableArray(length,callback=i=>i){return AbstractNode.variableArray(length,callback)}range(length,callback=i=>i){return AbstractNode.variableArray(length,callback)}setRelativeDate=(date,delta,mode="date")=>AbstractNode.setRelativeDate(date,delta,mode);getDateDelta=(fromDate,toDate,mode="date")=>AbstractNode.getDateDelta(fromDate,toDate,mode);gradientCss=(fromColor,toColor,fromOpacity=1,toOpacity=1,deg=138)=>AbstractNode.gradientCss(fromColor,toColor,fromOpacity,toOpacity,deg);async blackTalk(eventFunction=async e=>{},iconString="profileLogo",iconWidth=22,iconTop=0,iconLeft=0){await AbstractNode.blackTalk(eventFunction,iconString,iconWidth,iconTop,iconLeft)}divideBetween=(divideLength,divideBetween,currentIndex)=>AbstractNode.divideBetween(divideLength,divideBetween,currentIndex);divideBlock=(divideLength,divideBetween,sidePadding=0,multiply=1)=>AbstractNode.divideBlock(divideLength,divideBetween,sidePadding,multiply);fromAttribute=(event,key)=>AbstractNode.fromAttribute(event,key);toAttribute=(event,key,value)=>{AbstractNode.toAttribute(event,key,value)};scrollSetting(){AbstractNode.scrollSetting()}pwaDetection(){return AbstractNode.pwaDetection()}async safeLoadImage(url){return await AbstractNode.safeLoadImage(url)}ordinalNumber=ordinalStringOrNumber=>AbstractNode.ordinalNumber(ordinalStringOrNumber);whiteCardEvent(callback=async s=>{},fullSizeMode=!1,noScrollCloseMode=!1,relativeCardMode=!1,injectionZIndex=-1,cancelPatchCallback=async e=>{}){return AbstractNode.whiteCardEvent(callback,fullSizeMode,noScrollCloseMode,relativeCardMode,injectionZIndex,cancelPatchCallback)}initSetting(){return AbstractNode.initSetting()}animateDom=async(args,option=null)=>await CreateDom.animate(args,option);promptPopup=async(message,inputType="text",preValueOrInputLength="",color="mint",phoneMode=!1,streamMode=!0,fileTargetUrl="/generalFileUpload",mustNameInput=!0,generalCallback=async value=>{})=>await AbstractNode.promptPopup(message,inputType,preValueOrInputLength,color,phoneMode,streamMode,fileTargetUrl,mustNameInput,generalCallback);autoLogin=async()=>await AbstractNode.autoLogin();contextmenuPopup=async(event,callback)=>await AbstractNode.contextmenuPopup(event,callback);prompt=async(message,inputType="text",preValueOrInputLength="",color="mint",phoneMode=!1,streamMode=!0,fileTargetUrl="/generalFileUpload",mustNameInput=!0,generalCallback=async value=>{})=>await AbstractNode.promptPopup(message,inputType,preValueOrInputLength,color,phoneMode,streamMode,fileTargetUrl,mustNameInput,generalCallback);formPopup=async formInput=>await AbstractNode.formPopup(formInput);form=async formInput=>await AbstractNode.formPopup(formInput);certification=async(phone,color="mint")=>await AbstractNode.certificationPopup(phone,color);loadExternalScript=(src,windowModuleName)=>AbstractNode.loadExternalScript(src,windowModuleName);certificationSave=async(phone,session="",loginMode=!1)=>await AbstractNode.certificationSave(phone,session,loginMode);certificationNumbers=()=>AbstractNode.certificationNumbers();certificationPopup=async(phone="",color="mint",loginMode=!0,mustDo=!1,mustCerificationMode=!1,noSessionMode=!1)=>await AbstractNode.certificationPopup(phone,color,loginMode,mustDo,mustCerificationMode,noSessionMode);getUserPhone=async()=>await AbstractNode.getUserPhone();markdownBlocks=async(scrollTong,key,data,binaryPath,linkCallback,mainColor="blue",noListMode=!1,childInstance=null,HighlightJs=null)=>{await AbstractNode.markdownBlocks(scrollTong,key,data,binaryPath,linkCallback,mainColor,noListMode,childInstance,HighlightJs)};resolvePath(...pathSegments){return AbstractNode.resolvePath(...pathSegments)}domCssDictionary=(dom,documentOrShadow)=>AbstractNode.domCssDictionary(dom,documentOrShadow);colorPicker=async(message,preValue="#000001")=>await AbstractNode.colorPicker(message,preValue);setGeneralProperties(){const instance=this,{mediaEa,mediaCondition,mediaNumber,mediaString,mediaConditionToArray}=AbstractNode;instance.naviHeight=CreateDom.getNaviheight(),instance.totalContents=document.getElementById("totalcontents"),instance.userNameToken="____userName____",instance.mode=mediaString("bigDesktop","smallDesktop","tablet","tablet","mobile"),instance.ea=mediaEa(),instance.standardWidth=mediaNumber(...AbstractNode.standardWidthArray),instance.modeMinus=mediaNumber(0,1,1,1,1),instance.backHeight=mediaNumber(860,830,670,640,80),instance.margin=20-instance.modeMinus;const subBoxMargin={};subBoxMargin.top=mediaNumber(30,30,26,20,10.5),subBoxMargin.bottom=mediaNumber(31,31,27,26,31),subBoxMargin.left=mediaNumber(30,30,30,24,4.5),instance.subBoxMargin=subBoxMargin,instance.media=mediaConditionToArray(!0),instance.firstPageViewTime=new Date,null!==instance.totalContents&&(instance.totalContents.style.height="auto")}fileToMimetype=fileName=>AbstractNode.fileToMimetype(fileName);belowFixedIcon=(motherDom=null,clickEvent=async e=>{},contextEvent=async e=>{})=>AbstractNode.belowFixedIcon(motherDom,clickEvent,contextEvent);setBaseTong=(selfBaseTop=null)=>{const{ea,media,totalContents,standardWidth,naviHeight}=this,{colorExtended,withOut,mediaNumber,mediaEa,createDom}=AbstractNode,mobile=media[4],desktop=!mobile;let baseTong,baseTop;baseTop=CreateDom.getBaseTop(),null!==selfBaseTop&&(baseTop=selfBaseTop),baseTong=createDom({mother:totalContents,style:{position:"relative",width:String(standardWidth)+ea,left:"calc(50% - "+String(standardWidth/2)+ea+")",paddingTop:desktop?String(baseTop)+ea:"calc("+String(naviHeight)+"px + "+String(baseTop)+ea+")",animation:mobile?"":"fadeupdelay 0.5s ease forwards"}}),this.baseTop=baseTop,this.baseTong=baseTong,this.rootElement=baseTong};async main(resizeMode=!1){const instance=this,{ajaxJson}=AbstractNode;try{return resizeMode||instance.generalCss('"bergen", "pretendard"'),instance.setGeneralProperties(),!0}catch(e){return console.log(e),!1}}async launching(){const instance=this;try{await instance.main();try{await window.navigator.serviceWorker.register("/service-worker.js"),console.log("service worker ready")}catch{try{await window.navigator.serviceWorker.register(ADDRESS.ABSTRACTHOST+"/service-worker.js"),console.log("service worker ready")}catch{}}window.document.addEventListener("error",e=>{console.log(e),window.localStorage.clear(),window.location.reload()});try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{}return!0}catch(e){return console.log(e),!1}}}var Au=Object.create,At=Object.defineProperty,vu=Object.getOwnPropertyDescriptor,Bu=Object.getOwnPropertyNames,wu=Object.getPrototypeOf,_u=Object.prototype.hasOwnProperty,dr=e=>{throw TypeError(e)},pr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),vt=(e,t)=>{for(var r in t)At(e,r,{get:t[r],enumerable:!0})},Me=(e,t,r)=>(r=null!=e?Au(wu(e)):{},((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of Bu(t))!_u.call(e,u)&&u!==r&&At(e,u,{get:()=>t[u],enumerable:!(n=vu(t,u))||n.enumerable});return e})(!t&&e&&e.__esModule?r:At(r,"default",{value:e,enumerable:!0}),e)),pe=(e,t,r)=>(((e,t,r)=>{t.has(e)||dr("Cannot "+r)})(e,t,"access private method"),r),ot=pr((Da,mn)=>{var Fn=new Proxy(String,{get:()=>Fn});mn.exports=Fn}),$n=pr(ur=>{Object.defineProperty(ur,"__esModule",{value:!0});var Wn=/\r\n|[\n\r\u2028\u2029]/;ur.codeFrameColumns=function xi(e,t,r={}){let u=function wi(){return new Proxy({},{get:()=>e=>e})}(),i=e.split(Wn),{start:o,end:s,markerLines:a}=function _i(e,t,r){let n=Object.assign({column:0,line:-1},e.start),u=Object.assign({},n,e.end),{linesAbove:i=2,linesBelow:o=3}=r||{},s=n.line,a=n.column,D=u.line,l=u.column,p=Math.max(s-(i+1),0),f=Math.min(t.length,D+o);-1===s&&(p=0),-1===D&&(f=t.length);let d=D-s,c={};if(d)for(let F=0;F<=d;F++){let m=F+s;if(a)if(0===F){let h=t[m-1].length;c[m]=[a,h-a+1]}else if(F===d)c[m]=[0,l];else{let h=t[m-F].length;c[m]=[0,h]}else c[m]=!0}else c[s]=a===l?!a||[a,0]:[a,l-a];return{start:p,end:f,markerLines:c}}(t,i,r),D=t.start&&"number"==typeof t.start.column,l=String(s).length,f=e.split(Wn,s).slice(o,s).map((d,c)=>{let F=o+1+c,h=` ${` ${F}`.slice(-l)} |`,C=a[F],v=!a[F+1];if(C){let E="";if(Array.isArray(C)){let g=d.slice(0,Math.max(C[0]-1,0)).replace(/[^\t]/g," "),j=C[1]||1;E=["\n ",u.gutter(h.replace(/\d/g," "))," ",g,u.marker("^").repeat(j)].join(""),v&&r.message&&(E+=" "+u.message(r.message))}return[u.marker(">"),u.gutter(h),d.length>0?` ${d}`:"",E].join("")}return` ${u.gutter(h)}${d.length>0?` ${d}`:""}`}).join("\n");return r.message&&!D&&(f=`${" ".repeat(l+1)}${r.message}\n${f}`),f}}),fr={};vt(fr,{__debug:()=>lo,check:()=>ao,doc:()=>Dr,format:()=>yu,formatWithCursor:()=>gu,getSupportInfo:()=>Do,util:()=>cr,version:()=>cu});var ne=(e,t,r,n)=>{if(!e||null!=t)return t.replaceAll?t.replaceAll(r,n):r.global?t.replace(r,n):t.split(r).join(n)};function U(){}function mr(e,t,r,n,u){for(var o,i=[];t;)i.push(t),o=t.previousComponent,delete t.previousComponent,t=o;i.reverse();for(var s=0,a=i.length,D=0,l=0;s<a;s++){var p=i[s];if(p.removed)p.value=e.join(n.slice(l,l+p.count)),l+=p.count;else{if(!p.added&&u){var f=r.slice(D,D+p.count);f=f.map(function(d,c){var F=n[l+c];return F.length>d.length?F:d}),p.value=e.join(f)}else p.value=e.join(r.slice(D,D+p.count));D+=p.count,p.added||(l+=p.count)}}return i}U.prototype={diff:function(t,r){var n,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=u.callback;"function"==typeof u&&(i=u,u={});var o=this;function s(E){return E=o.postProcess(E,u),i?(setTimeout(function(){i(E)},0),!0):E}t=this.castInput(t,u),r=this.castInput(r,u),t=this.removeEmpty(this.tokenize(t,u));var a=(r=this.removeEmpty(this.tokenize(r,u))).length,D=t.length,l=1,p=a+D;null!=u.maxEditLength&&(p=Math.min(p,u.maxEditLength));var f=null!==(n=u.timeout)&&void 0!==n?n:1/0,d=Date.now()+f,c=[{oldPos:-1,lastComponent:void 0}],F=this.extractCommon(c[0],r,t,0,u);if(c[0].oldPos+1>=D&&F+1>=a)return s(mr(o,c[0].lastComponent,r,t,o.useLongestToken));var m=-1/0,h=1/0;function C(){for(var E=Math.max(m,-l);E<=Math.min(h,l);E+=2){var g=void 0,j=c[E-1],b=c[E+1];j&&(c[E-1]=void 0);var X=!1;if(b){var ae=b.oldPos-E;X=b&&0<=ae&&ae<a}var $e=j&&j.oldPos+1<D;if(X||$e){if(g=!$e||X&&j.oldPos<b.oldPos?o.addToPath(b,!0,!1,0,u):o.addToPath(j,!1,!0,1,u),F=o.extractCommon(g,r,t,E,u),g.oldPos+1>=D&&F+1>=a)return s(mr(o,g.lastComponent,r,t,o.useLongestToken));c[E]=g,g.oldPos+1>=D&&(h=Math.min(h,E-1)),F+1>=a&&(m=Math.max(m,E+1))}else c[E]=void 0}l++}if(i)!function E(){setTimeout(function(){if(l>p||Date.now()>d)return i();C()||E()},0)}();else for(;l<=p&&Date.now()<=d;){var v=C();if(v)return v}},addToPath:function(t,r,n,u,i){var o=t.lastComponent;return o&&!i.oneChangePerToken&&o.added===r&&o.removed===n?{oldPos:t.oldPos+u,lastComponent:{count:o.count+1,added:r,removed:n,previousComponent:o.previousComponent}}:{oldPos:t.oldPos+u,lastComponent:{count:1,added:r,removed:n,previousComponent:o}}},extractCommon:function(t,r,n,u,i){for(var o=r.length,s=n.length,a=t.oldPos,D=a-u,l=0;D+1<o&&a+1<s&&this.equals(n[a+1],r[D+1],i);)D++,a++,l++,i.oneChangePerToken&&(t.lastComponent={count:1,previousComponent:t.lastComponent,added:!1,removed:!1});return l&&!i.oneChangePerToken&&(t.lastComponent={count:l,previousComponent:t.lastComponent,added:!1,removed:!1}),t.oldPos=a,D},equals:function(t,r,n){return n.comparator?n.comparator(t,r):t===r||n.ignoreCase&&t.toLowerCase()===r.toLowerCase()},removeEmpty:function(t){for(var r=[],n=0;n<t.length;n++)t[n]&&r.push(t[n]);return r},castInput:function(t){return t},tokenize:function(t){return Array.from(t)},join:function(t){return t.join("")},postProcess:function(t){return t}};new U;function hr(e,t){var r;for(r=0;r<e.length&&r<t.length;r++)if(e[r]!=t[r])return e.slice(0,r);return e.slice(0,r)}function Er(e,t){var r;if(!e||!t||e[e.length-1]!=t[t.length-1])return"";for(r=0;r<e.length&&r<t.length;r++)if(e[e.length-(r+1)]!=t[t.length-(r+1)])return e.slice(-r);return e.slice(-r)}function Bt(e,t,r){if(e.slice(0,t.length)!=t)throw Error("string ".concat(JSON.stringify(e)," doesn't start with prefix ").concat(JSON.stringify(t),"; this is a bug"));return r+e.slice(t.length)}function wt(e,t,r){if(!t)return e+r;if(e.slice(-t.length)!=t)throw Error("string ".concat(JSON.stringify(e)," doesn't end with suffix ").concat(JSON.stringify(t),"; this is a bug"));return e.slice(0,-t.length)+r}function _e(e,t){return Bt(e,t,"")}function Ve(e,t){return wt(e,t,"")}function Cr(e,t){return t.slice(0,function Ou(e,t){var r=0;e.length>t.length&&(r=e.length-t.length);var n=t.length;e.length<t.length&&(n=e.length);var u=Array(n),i=0;u[0]=0;for(var o=1;o<n;o++){for(t[o]==t[i]?u[o]=u[i]:u[o]=i;i>0&&t[o]!=t[i];)i=u[i];t[o]==t[i]&&i++}i=0;for(var s=r;s<e.length;s++){for(;i>0&&e[s]!=t[i];)i=u[i];e[s]==t[i]&&i++}return i}(e,t))}var Ue="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",Su=new RegExp("[".concat(Ue,"]+|\\s+|[^").concat(Ue,"]"),"ug"),Ge=new U;function gr(e,t,r,n){if(t&&r){var u=t.value.match(/^\s*/)[0],i=t.value.match(/\s*$/)[0],o=r.value.match(/^\s*/)[0],s=r.value.match(/\s*$/)[0];if(e){var a=hr(u,o);e.value=wt(e.value,o,a),t.value=_e(t.value,a),r.value=_e(r.value,a)}if(n){var D=Er(i,s);n.value=Bt(n.value,s,D),t.value=Ve(t.value,D),r.value=Ve(r.value,D)}}else if(r)e&&(r.value=r.value.replace(/^\s*/,"")),n&&(n.value=n.value.replace(/^\s*/,""));else if(e&&n){var l=n.value.match(/^\s*/)[0],p=t.value.match(/^\s*/)[0],f=t.value.match(/\s*$/)[0],d=hr(l,p);t.value=_e(t.value,d);var c=Er(_e(l,d),f);t.value=Ve(t.value,c),n.value=Bt(n.value,l,c),e.value=wt(e.value,l,l.slice(0,l.length-c.length))}else if(n){var F=n.value.match(/^\s*/)[0],h=Cr(t.value.match(/\s*$/)[0],F);t.value=Ve(t.value,h)}else if(e){var E=Cr(e.value.match(/\s*$/)[0],t.value.match(/^\s*/)[0]);t.value=_e(t.value,E)}}Ge.equals=function(e,t,r){return r.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e.trim()===t.trim()},Ge.tokenize=function(e){var r,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.intlSegmenter){if("word"!=t.intlSegmenter.resolvedOptions().granularity)throw new Error('The segmenter passed must have a granularity of "word"');r=Array.from(t.intlSegmenter.segment(e),function(i){return i.segment})}else r=e.match(Su)||[];var n=[],u=null;return r.forEach(function(i){/\s/.test(i)?null==u?n.push(i):n.push(n.pop()+i):/\s/.test(u)?n[n.length-1]==u?n.push(n.pop()+i):n.push(u+i):n.push(i),u=i}),n},Ge.join=function(e){return e.map(function(t,r){return 0==r?t:t.replace(/^\s+/,"")}).join("")},Ge.postProcess=function(e,t){if(!e||t.oneChangePerToken)return e;var r=null,n=null,u=null;return e.forEach(function(i){i.added?n=i:i.removed?u=i:((n||u)&&gr(r,u,n,i),r=i,n=null,u=null)}),(n||u)&&gr(r,u,n,null),e},(new U).tokenize=function(e){var t=new RegExp("(\\r?\\n)|[".concat(Ue,"]+|[^\\S\\n\\r]+|[^").concat(Ue,"]"),"ug");return e.match(t)||[]};var bt=new U;function _t(e){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_t(e)}bt.tokenize=function(e,t){t.stripTrailingCr&&(e=e.replace(/\r\n/g,"\n"));var r=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var u=0;u<n.length;u++){var i=n[u];u%2&&!t.newlineIsToken?r[r.length-1]+=i:r.push(i)}return r},bt.equals=function(e,t,r){return r.ignoreWhitespace?((!r.newlineIsToken||!e.includes("\n"))&&(e=e.trim()),(!r.newlineIsToken||!t.includes("\n"))&&(t=t.trim())):r.ignoreNewlineAtEof&&!r.newlineIsToken&&(e.endsWith("\n")&&(e=e.slice(0,-1)),t.endsWith("\n")&&(t=t.slice(0,-1))),U.prototype.equals.call(this,e,t,r)},(new U).tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)},(new U).tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};var xe=new U;function xt(e,t,r,n,u){var i,o;for(t=t||[],r=r||[],n&&(e=n(u,e)),i=0;i<t.length;i+=1)if(t[i]===e)return r[i];if("[object Array]"===Object.prototype.toString.call(e)){for(t.push(e),o=new Array(e.length),r.push(o),i=0;i<e.length;i+=1)o[i]=xt(e[i],t,r,n,u);return t.pop(),r.pop(),o}if(e&&e.toJSON&&(e=e.toJSON()),"object"===_t(e)&&null!==e){t.push(e),o={},r.push(o);var a,s=[];for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&s.push(a);for(s.sort(),i=0;i<s.length;i+=1)o[a=s[i]]=xt(e[a],t,r,n,a);t.pop(),r.pop()}else o=e;return o}xe.useLongestToken=!0,xe.tokenize=bt.tokenize,xe.castInput=function(e,t){var r=t.undefinedReplacement,n=t.stringifyReplacer,u=void 0===n?function(i,o){return typeof o>"u"?r:o}:n;return"string"==typeof e?e:JSON.stringify(xt(e,null,null,u),u,"  ")},xe.equals=function(e,t,r){return U.prototype.equals.call(xe,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"),r)};var ze=new U;function be(e){switch(e){case"cr":return"\r";case"crlf":return"\r\n";default:return"\n"}}function Nt(e,t){let r;switch(t){case"\n":r=/\n/gu;break;case"\r":r=/\r/gu;break;case"\r\n":r=/\r\n/gu;break;default:throw new Error(`Unexpected "eol" ${JSON.stringify(t)}.`)}let n=e.match(r);return n?n.length:0}ze.tokenize=function(e){return e.slice()},ze.join=ze.removeEmpty=function(e){return e};var $="string",H="array",z="cursor",T="indent",k="align",L="trim",B="group",N="fill",w="if-break",P="indent-if-break",I="line-suffix",R="line-suffix-boundary",y="line",O="label",_="break-parent",Ke=new Set([z,T,k,L,B,N,w,P,I,R,y,O,_]),A=(e,t,r)=>{if(!e||null!=t)return Array.isArray(t)||"string"==typeof t?t[r<0?t.length+r:r]:t.at(r)};var M=function Iu(e){if("string"==typeof e)return $;if(Array.isArray(e))return H;if(!e)return;let{type:t}=e;return Ke.has(t)?t:void 0};function Yu(e){let t=null===e?"null":typeof e;if("string"!==t&&"object"!==t)return`Unexpected doc '${t}', \nExpected it to be 'string' or 'object'.`;if(M(e))throw new Error("doc is valid.");let r=Object.prototype.toString.call(e);if("[object Object]"!==r)return`Unexpected doc '${r}'.`;let n=(e=>new Intl.ListFormat("en-US",{type:"disjunction"}).format(e))([...Ke].map(u=>`'${u}'`));return`Unexpected doc.type '${e.type}'.\nExpected it to be ${n}.`}var Ot=class extends Error{name="InvalidDocError";constructor(t){super(Yu(t)),this.doc=t}},Q=Ot,Br={};var Fe=function ju(e,t,r,n){let u=[e];for(;u.length>0;){let i=u.pop();if(i===Br){r(u.pop());continue}r&&u.push(i,Br);let o=M(i);if(!o)throw new Q(i);if(!1!==(null==t?void 0:t(i)))switch(o){case H:case N:{let s=o===H?i:i.parts;for(let D=s.length-1;D>=0;--D)u.push(s[D]);break}case w:u.push(i.flatContents,i.breakContents);break;case B:if(n&&i.expandedStates)for(let a=i.expandedStates.length-1;a>=0;--a)u.push(i.expandedStates[a]);else u.push(i.contents);break;case k:case T:case P:case O:case I:u.push(i.contents);break;case $:case z:case L:case R:case y:case _:break;default:throw new Q(i)}}};function Oe(e,t){if("string"==typeof e)return t(e);let r=new Map;return n(e);function n(i){if(r.has(i))return r.get(i);let o=function u(i){switch(M(i)){case H:return t(i.map(n));case N:return t({...i,parts:i.parts.map(n)});case w:return t({...i,breakContents:n(i.breakContents),flatContents:n(i.flatContents)});case B:{let{expandedStates:o,contents:s}=i;return o?(o=o.map(n),s=o[0]):s=n(s),t({...i,contents:s,expandedStates:o})}case k:case T:case P:case O:case I:return t({...i,contents:n(i.contents)});case $:case z:case L:case R:case y:case _:return t(i);default:throw new Q(i)}}(i);return r.set(i,o),o}}function Je(e,t,r){let n=r,u=!1;return Fe(e,function i(o){if(u)return!1;let s=t(o);void 0!==s&&(u=!0,n=s)}),n}function Hu(e){if(e.type===B&&e.break||e.type===y&&e.hard||e.type===_)return!0}function wr(e){if(e.length>0){let t=A(!1,e,-1);!t.expandedStates&&!t.break&&(t.break="propagated")}return null}function Wu(e){return e.type!==y||e.hard?e.type===w?e.flatContents:e:e.soft?"":" "}function _r(e){for(e=[...e];e.length>=2&&A(!1,e,-2).type===y&&A(!1,e,-1).type===_;)e.length-=2;if(e.length>0){let t=Ne(A(!1,e,-1));e[e.length-1]=t}return e}function Ne(e){switch(M(e)){case T:case P:case B:case I:case O:{let t=Ne(e.contents);return{...e,contents:t}}case w:return{...e,breakContents:Ne(e.breakContents),flatContents:Ne(e.flatContents)};case N:return{...e,parts:_r(e.parts)};case H:return _r(e);case $:return e.replace(/[\n\r]*$/u,"");case k:case z:case L:case R:case y:case _:break;default:throw new Q(e)}return e}function qe(e){return Ne(function Mu(e){return Oe(e,t=>function $u(e){switch(M(e)){case N:if(e.parts.every(t=>""===t))return"";break;case B:if(!(e.contents||e.id||e.break||e.expandedStates))return"";if(e.contents.type===B&&e.contents.id===e.id&&e.contents.break===e.break&&e.contents.expandedStates===e.expandedStates)return e.contents;break;case k:case T:case P:case I:if(!e.contents)return"";break;case w:if(!e.flatContents&&!e.breakContents)return"";break;case H:{let t=[];for(let r of e){if(!r)continue;let[n,...u]=Array.isArray(r)?r:[r];"string"==typeof n&&"string"==typeof A(!1,t,-1)?t[t.length-1]+=n:t.push(n),t.push(...u)}return 0===t.length?"":1===t.length?t[0]:t}case $:case z:case L:case R:case y:case O:case _:break;default:throw new Q(e)}return e}(t))}(e))}function Vu(e){if(e.type===y)return!0}function me(e,t){return e.type===O?{...e,contents:t(e.contents)}:t(e)}var St=()=>{},G=St,Tt=St,Tr=St;function le(e){return G(e),{type:T,contents:e}}function De(e,t){return G(t),{type:k,contents:t,n:e}}function kt(e,t={}){return G(e),Tt(t.expandedStates,!0),{type:B,id:t.id,contents:e,break:!!t.shouldBreak,expandedStates:t.expandedStates}}function Te(e){return G(e),{type:I,contents:e}}var Hr={type:R},he={type:_},Wr={type:L},ke={type:y,hard:!0},Lt={type:y,hard:!0,literal:!0},Qe={type:y},$r={type:y,soft:!0},K=[ke,he],Xe=[Lt,he],Z={type:z};function Se(e,t){G(e),Tt(t);let r=[];for(let n=0;n<t.length;n++)0!==n&&r.push(e),r.push(t[n]);return r}function Ze(e,t,r){G(e);let n=e;if(t>0){for(let u=0;u<Math.floor(t/r);++u)n=le(n);n=De(t%r,n),n=De(Number.NEGATIVE_INFINITY,n)}return n}function ee(e){var t;if(!e)return"";if(Array.isArray(e)){let r=[];for(let n of e)if(Array.isArray(n))r.push(...ee(n));else{let u=ee(n);""!==u&&r.push(u)}return r}return e.type===w?{...e,breakContents:ee(e.breakContents),flatContents:ee(e.flatContents)}:e.type===B?{...e,contents:ee(e.contents),expandedStates:null==(t=e.expandedStates)?void 0:t.map(ee)}:e.type===N?{type:"fill",parts:e.parts.map(ee)}:e.contents?{...e,contents:ee(e.contents)}:e}var Kr=e=>!(function zr(e){return 12288===e||e>=65281&&e<=65376||e>=65504&&e<=65510}(e)||function Gr(e){return e>=4352&&e<=4447||8986===e||8987===e||9001===e||9002===e||e>=9193&&e<=9196||9200===e||9203===e||9725===e||9726===e||9748===e||9749===e||e>=9776&&e<=9783||e>=9800&&e<=9811||9855===e||e>=9866&&e<=9871||9875===e||9889===e||9898===e||9899===e||9917===e||9918===e||9924===e||9925===e||9934===e||9940===e||9962===e||9970===e||9971===e||9973===e||9978===e||9981===e||9989===e||9994===e||9995===e||10024===e||10060===e||10062===e||e>=10067&&e<=10069||10071===e||e>=10133&&e<=10135||10160===e||10175===e||11035===e||11036===e||11088===e||11093===e||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12287||e>=12289&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12591||e>=12593&&e<=12686||e>=12688&&e<=12773||e>=12783&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=94176&&e<=94180||94192===e||94193===e||e>=94208&&e<=100343||e>=100352&&e<=101589||e>=101631&&e<=101640||e>=110576&&e<=110579||e>=110581&&e<=110587||110589===e||110590===e||e>=110592&&e<=110882||110898===e||e>=110928&&e<=110930||110933===e||e>=110948&&e<=110951||e>=110960&&e<=111355||e>=119552&&e<=119638||e>=119648&&e<=119670||126980===e||127183===e||127374===e||e>=127377&&e<=127386||e>=127488&&e<=127490||e>=127504&&e<=127547||e>=127552&&e<=127560||127568===e||127569===e||e>=127584&&e<=127589||e>=127744&&e<=127776||e>=127789&&e<=127797||e>=127799&&e<=127868||e>=127870&&e<=127891||e>=127904&&e<=127946||e>=127951&&e<=127955||e>=127968&&e<=127984||127988===e||e>=127992&&e<=128062||128064===e||e>=128066&&e<=128252||e>=128255&&e<=128317||e>=128331&&e<=128334||e>=128336&&e<=128359||128378===e||128405===e||128406===e||128420===e||e>=128507&&e<=128591||e>=128640&&e<=128709||128716===e||e>=128720&&e<=128722||e>=128725&&e<=128727||e>=128732&&e<=128735||128747===e||128748===e||e>=128756&&e<=128764||e>=128992&&e<=129003||129008===e||e>=129292&&e<=129338||e>=129340&&e<=129349||e>=129351&&e<=129535||e>=129648&&e<=129660||e>=129664&&e<=129673||e>=129679&&e<=129734||e>=129742&&e<=129756||e>=129759&&e<=129769||e>=129776&&e<=129784||e>=131072&&e<=196605||e>=196608&&e<=262141}(e)),Uu=/[^\x20-\x7F]/u;var Le=function zu(e){if(!e)return 0;if(!Uu.test(e))return e.length;e=e.replace(/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC2\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g,"  ");let t=0;for(let r of e){let n=r.codePointAt(0);n<=31||n>=127&&n<=159||n>=768&&n<=879||(t+=Kr(n)?1:2)}return t},Y=Symbol("MODE_BREAK"),J=Symbol("MODE_FLAT"),Ee=Symbol("cursor"),Pt=Symbol("DOC_FILL_PRINTED_LENGTH");function Gu(e,t){return It(e,{type:"indent"},t)}function Ku(e,t,r){return t===Number.NEGATIVE_INFINITY?e.root||{value:"",length:0,queue:[]}:t<0?It(e,{type:"dedent"},r):t?"root"===t.type?{...e,root:e}:It(e,{type:"string"==typeof t?"stringAlign":"numberAlign",n:t},r):e}function It(e,t,r){let n="dedent"===t.type?e.queue.slice(0,-1):[...e.queue,t],u="",i=0,o=0,s=0;for(let c of n)switch(c.type){case"indent":l(),r.useTabs?a(1):D(r.tabWidth);break;case"stringAlign":l(),u+=c.n,i+=c.n.length;break;case"numberAlign":o+=1,s+=c.n;break;default:throw new Error(`Unexpected type '${c.type}'`)}return f(),{...e,value:u,length:i,queue:n};function a(c){u+="\t".repeat(c),i+=r.tabWidth*c}function D(c){u+=" ".repeat(c),i+=c}function l(){r.useTabs?function p(){o>0&&a(o),d()}():f()}function f(){s>0&&D(s),d()}function d(){o=0,s=0}}function Rt(e){let t=0,r=0,n=e.length;e:for(;n--;){let u=e[n];if(u!==Ee)for(let i=u.length-1;i>=0;i--){let o=u[i];if(" "!==o&&"\t"!==o){e[n]=u.slice(0,i+1);break e}t++}else r++}if(t>0||r>0)for(e.length=n+1;r-- >0;)e.push(Ee);return t}function et(e,t,r,n,u,i){if(r===Number.POSITIVE_INFINITY)return!0;let o=t.length,s=[e],a=[];for(;r>=0;){if(0===s.length){if(0===o)return!0;s.push(t[--o]);continue}let{mode:D,doc:l}=s.pop(),p=M(l);switch(p){case $:a.push(l),r-=Le(l);break;case H:case N:{let f=p===H?l:l.parts,d=l[Pt]??0;for(let c=f.length-1;c>=d;c--)s.push({mode:D,doc:f[c]});break}case T:case k:case P:case O:s.push({mode:D,doc:l.contents});break;case L:r+=Rt(a);break;case B:{if(i&&l.break)return!1;let f=l.break?Y:D,d=l.expandedStates&&f===Y?A(!1,l.expandedStates,-1):l.contents;s.push({mode:f,doc:d});break}case w:{let d=(l.groupId?u[l.groupId]||J:D)===Y?l.breakContents:l.flatContents;d&&s.push({mode:D,doc:d});break}case y:if(D===Y||l.hard)return!0;l.soft||(a.push(" "),r--);break;case I:n=!0;break;case R:if(n)return!1}}return!1}function Ce(e,t){let r={},n=t.printWidth,u=be(t.endOfLine),i=0,o=[{ind:{value:"",length:0,queue:[]},mode:Y,doc:e}],s=[],a=!1,D=[],l=0;for(function br(e){let t=new Set,r=[];Fe(e,function n(i){if(i.type===_&&wr(r),i.type===B){if(r.push(i),t.has(i))return!1;t.add(i)}},function u(i){i.type===B&&r.pop().break&&wr(r)},!0)}(e);o.length>0;){let{ind:f,mode:d,doc:c}=o.pop();switch(M(c)){case $:{let F="\n"!==u?ne(!1,c,"\n",u):c;s.push(F),o.length>0&&(i+=Le(F));break}case H:for(let F=c.length-1;F>=0;F--)o.push({ind:f,mode:d,doc:c[F]});break;case z:if(l>=2)throw new Error("There are too many 'cursor' in doc.");s.push(Ee),l++;break;case T:o.push({ind:Gu(f,t),mode:d,doc:c.contents});break;case k:o.push({ind:Ku(f,c.n,t),mode:d,doc:c.contents});break;case L:i-=Rt(s);break;case B:switch(d){case J:if(!a){o.push({ind:f,mode:c.break?Y:J,doc:c.contents});break}case Y:{a=!1;let F={ind:f,mode:J,doc:c.contents},m=n-i,h=D.length>0;if(!c.break&&et(F,o,m,h,r))o.push(F);else if(c.expandedStates){let C=A(!1,c.expandedStates,-1);if(c.break){o.push({ind:f,mode:Y,doc:C});break}for(let v=1;v<c.expandedStates.length+1;v++){if(v>=c.expandedStates.length){o.push({ind:f,mode:Y,doc:C});break}{let E=c.expandedStates[v],g={ind:f,mode:J,doc:E};if(et(g,o,m,h,r)){o.push(g);break}}}}else o.push({ind:f,mode:Y,doc:c.contents});break}}c.id&&(r[c.id]=A(!1,o,-1).mode);break;case N:{let F=n-i,m=c[Pt]??0,{parts:h}=c,C=h.length-m;if(0===C)break;let v=h[m+0],E=h[m+1],g={ind:f,mode:J,doc:v},j={ind:f,mode:Y,doc:v},b=et(g,[],F,D.length>0,r,!0);if(1===C){b?o.push(g):o.push(j);break}let X={ind:f,mode:J,doc:E},ae={ind:f,mode:Y,doc:E};if(2===C){b?o.push(X,g):o.push(ae,j);break}let $e=h[m+2],yt={ind:f,mode:d,doc:{...c,[Pt]:m+2}};et({ind:f,mode:J,doc:[v,E,$e]},[],F,D.length>0,r,!0)?o.push(yt,X,g):b?o.push(yt,ae,g):o.push(yt,ae,j);break}case w:case P:{let F=c.groupId?r[c.groupId]:d;if(F===Y){let m=c.type===w?c.breakContents:c.negate?c.contents:le(c.contents);m&&o.push({ind:f,mode:d,doc:m})}if(F===J){let m=c.type===w?c.flatContents:c.negate?le(c.contents):c.contents;m&&o.push({ind:f,mode:d,doc:m})}break}case I:D.push({ind:f,mode:d,doc:c.contents});break;case R:D.length>0&&o.push({ind:f,mode:d,doc:ke});break;case y:switch(d){case J:if(!c.hard){c.soft||(s.push(" "),i+=1);break}a=!0;case Y:if(D.length>0){o.push({ind:f,mode:d,doc:c},...D.reverse()),D.length=0;break}c.literal?f.root?(s.push(u,f.root.value),i=f.root.length):(s.push(u),i=0):(i-=Rt(s),s.push(u+f.value),i=f.length)}break;case O:o.push({ind:f,mode:d,doc:c.contents});break;case _:break;default:throw new Q(c)}0===o.length&&D.length>0&&(o.push(...D.reverse()),D.length=0)}let p=s.indexOf(Ee);if(-1!==p){let f=s.indexOf(Ee,p+1);if(-1===f)return{formatted:s.filter(m=>m!==Ee).join("")};let d=s.slice(0,p).join(""),c=s.slice(p+1,f).join("");return{formatted:d+c+s.slice(f+1).join(""),cursorNodeStart:d.length,cursorNodeText:c}}return{formatted:s.join("")}}var te,jt,tt,ge=function Ju(e,t,r=0){let n=0;for(let u=r;u<e.length;++u)"\t"===e[u]?n=n+t-n%t:n++;return n};te=new WeakSet,jt=function(t){let{stack:r}=this;for(let n=r.length-1;n>=0;n-=2)if(!Array.isArray(r[n])&&--t<0)return n;return-1},tt=function*(){let{stack:t}=this;for(let r=t.length-3;r>=0;r-=2){let n=t[r];Array.isArray(n)||(yield n)}};var qr=class{constructor(t){((e,t,r)=>{t.has(e)?dr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r)})(this,te),this.stack=[t]}get key(){let{stack:t,siblings:r}=this;return A(!1,t,null===r?-2:-4)??null}get index(){return null===this.siblings?null:A(!1,this.stack,-2)}get node(){return A(!1,this.stack,-1)}get parent(){return this.getNode(1)}get grandparent(){return this.getNode(2)}get isInArray(){return null!==this.siblings}get siblings(){let{stack:t}=this,r=A(!1,t,-3);return Array.isArray(r)?r:null}get next(){let{siblings:t}=this;return null===t?null:t[this.index+1]}get previous(){let{siblings:t}=this;return null===t?null:t[this.index-1]}get isFirst(){return 0===this.index}get isLast(){let{siblings:t,index:r}=this;return null!==t&&r===t.length-1}get isRoot(){return 1===this.stack.length}get root(){return this.stack[0]}get ancestors(){return[...pe(this,te,tt).call(this)]}getName(){let{stack:t}=this,{length:r}=t;return r>1?A(!1,t,-2):null}getValue(){return A(!1,this.stack,-1)}getNode(t=0){let r=pe(this,te,jt).call(this,t);return-1===r?null:this.stack[r]}getParentNode(t=0){return this.getNode(t+1)}call(t,...r){let{stack:n}=this,{length:u}=n,i=A(!1,n,-1);for(let o of r)i=i[o],n.push(o,i);try{return t(this)}finally{n.length=u}}callParent(t,r=0){let n=pe(this,te,jt).call(this,r+1),u=this.stack.splice(n+1);try{return t(this)}finally{this.stack.push(...u)}}each(t,...r){let{stack:n}=this,{length:u}=n,i=A(!1,n,-1);for(let o of r)i=i[o],n.push(o,i);try{for(let o=0;o<i.length;++o)n.push(o,i[o]),t(this,o,i),n.length-=2}finally{n.length=u}}map(t,...r){let n=[];return this.each((u,i,o)=>{n[i]=t(u,i,o)},...r),n}match(...t){let r=this.stack.length-1,n=null,u=this.stack[r--];for(let i of t){if(void 0===u)return!1;let o=null;if("number"==typeof n&&(o=n,n=this.stack[r--],u=this.stack[r--]),i&&!i(u,n,o))return!1;n=this.stack[r--],u=this.stack[r--]}return!0}findAncestor(t){for(let r of pe(this,te,tt).call(this))if(t(r))return r}hasAncestor(t){for(let r of pe(this,te,tt).call(this))if(t(r))return!0;return!1}},Xr=new Proxy(()=>{},{get:()=>Xr}),Pe=Xr;var Qr=function qu(e){return null!==e&&"object"==typeof e};function*ye(e,t){let{getVisitorKeys:r,filter:n=()=>!0}=t,u=i=>Qr(i)&&n(i);for(let i of r(e)){let o=e[i];if(Array.isArray(o))for(let s of o)u(s)&&(yield s);else u(o)&&(yield o)}}function Ae(e){return(t,r,n)=>{let u=!(null==n||!n.backwards);if(!1===r)return!1;let{length:i}=t,o=r;for(;o>=0&&o<i;){let s=t.charAt(o);if(e instanceof RegExp){if(!e.test(s))return o}else if(!e.includes(s))return o;u?o--:o++}return(-1===o||o===i)&&o}}var tn=Ae(/\s/u),S=Ae(" \t"),rt=Ae(",; \t"),nt=Ae(/[^\n\r]/u);var W=function Xu(e,t,r){let n=!(null==r||!r.backwards);if(!1===t)return!1;let u=e.charAt(t);if(n){if("\r"===e.charAt(t-1)&&"\n"===u)return t-2;if("\n"===u||"\r"===u||"\u2028"===u||"\u2029"===u)return t-1}else{if("\r"===u&&"\n"===e.charAt(t+1))return t+2;if("\n"===u||"\r"===u||"\u2028"===u||"\u2029"===u)return t+1}return t};var V=function Qu(e,t,r={}){let n=S(e,r.backwards?t-1:t,r);return n!==W(e,n,r)};var Ht=function Zu(e){return Array.isArray(e)&&e.length>0},rn=new Set(["tokens","comments","parent","enclosingNode","precedingNode","followingNode"]),ei=e=>Object.keys(e).filter(t=>!rn.has(t));var q=function ti(e){return e?t=>e(t,rn):ei};function Wt(e,t){(e.comments??(e.comments=[])).push(t),t.printed=!1,t.nodeDescription=function ri(e){let t=e.type||e.kind||"(unknown type)",r=String(e.name||e.id&&("object"==typeof e.id?e.id.name:e.id)||e.key&&("object"==typeof e.key?e.key.name:e.key)||e.value&&("object"==typeof e.value?"":String(e.value))||e.operator||"");return r.length>20&&(r=r.slice(0,19)+"…"),t+(r?" "+r:"")}(e)}function ue(e,t){t.leading=!0,t.trailing=!1,Wt(e,t)}function re(e,t,r){t.leading=!1,t.trailing=!1,r&&(t.marker=r),Wt(e,t)}function ie(e,t){t.leading=!1,t.trailing=!0,Wt(e,t)}var $t=new WeakMap;function ut(e,t){if($t.has(e))return $t.get(e);let{printer:{getCommentChildNodes:r,canAttachComment:n,getVisitorKeys:u},locStart:i,locEnd:o}=t;if(!n)return[];let s=((null==r?void 0:r(e,t))??[...ye(e,{getVisitorKeys:q(u)})]).flatMap(a=>n(a)?[a]:ut(a,t));return s.sort((a,D)=>i(a)-i(D)||o(a)-o(D)),$t.set(e,s),s}function un(e,t,r,n){let D,l,{locStart:u,locEnd:i}=r,o=u(t),s=i(t),a=ut(e,r),p=0,f=a.length;for(;p<f;){let d=p+f>>1,c=a[d],F=u(c),m=i(c);if(F<=o&&s<=m)return un(c,t,r,c);if(m<=o)D=c,p=d+1;else{if(!(s<=F))throw new Error("Comment location overlaps with node location");l=c,f=d}}if("TemplateLiteral"===(null==n?void 0:n.type)){let{quasis:d}=n,c=Vt(d,t,r);D&&Vt(d,D,r)!==c&&(D=null),l&&Vt(d,l,r)!==c&&(l=null)}return{enclosingNode:n,precedingNode:D,followingNode:l}}var Mt=()=>!1;var sn=e=>!/[\S\n\u2028\u2029]/u.test(e);function ni(e,t,r,n){let{comment:u,precedingNode:i}=r[n],{locStart:o,locEnd:s}=t,a=o(u);if(i)for(let D=n-1;D>=0;D--){let{comment:l,precedingNode:p}=r[D];if(p!==i||!sn(e.slice(s(l),a)))break;a=o(l)}return V(e,a,{backwards:!0})}function ui(e,t,r,n){let{comment:u,followingNode:i}=r[n],{locStart:o,locEnd:s}=t,a=s(u);if(i)for(let D=n+1;D<r.length;D++){let{comment:l,followingNode:p}=r[D];if(p!==i||!sn(e.slice(a,o(l))))break;a=s(l)}return V(e,a)}function nn(e,t){var s,a;let r=e.length;if(0===r)return;let o,{precedingNode:n,followingNode:u}=e[0],i=t.locStart(u);for(o=r;o>0;--o){let{comment:D,precedingNode:l,followingNode:p}=e[o-1];Pe.strictEqual(l,n),Pe.strictEqual(p,u);let f=t.originalText.slice(t.locEnd(D),i);if(!((null==(a=(s=t.printer).isGap)?void 0:a.call(s,f,t))??/^[\s(]*$/u.test(f)))break;i=t.locStart(D)}for(let[D,{comment:l}]of e.entries())D<o?ie(n,l):ue(u,l);for(let D of[n,u])D.comments&&D.comments.length>1&&D.comments.sort((l,p)=>t.locStart(l)-t.locStart(p));e.length=0}function Vt(e,t,r){let n=r.locStart(t)-1;for(let u=1;u<e.length;++u)if(n<r.locStart(e[u]))return u-1;return 0}var Ie=function ii(e,t){let r=t-1;return r=S(e,r,{backwards:!0}),r=W(e,r,{backwards:!0}),r=S(e,r,{backwards:!0}),r!==W(e,r,{backwards:!0})};function an(e,t){return e.node.printed=!0,t.printer.printComment(e,t)}function ai(e,t){let r=e.node;if(!r)return{};let n=t[Symbol.for("printedComments")];if(0===(r.comments||[]).filter(a=>!n.has(a)).length)return{leading:"",trailing:""};let s,i=[],o=[];return e.each(()=>{let a=e.node;if(null!=n&&n.has(a))return;let{leading:D,trailing:l}=a;D?i.push(function oi(e,t){var l;let r=e.node,n=[an(e,t)],{printer:u,originalText:i,locStart:o,locEnd:s}=t;if(null==(l=u.isBlockComment)?void 0:l.call(u,r)){let p=V(i,s(r))?V(i,o(r),{backwards:!0})?K:Qe:" ";n.push(p)}else n.push(K);let D=W(i,S(i,s(r)));return!1!==D&&V(i,D)&&n.push(K),n}(e,t)):l&&(s=function si(e,t,r){var D;let n=e.node,u=an(e,t),{printer:i,originalText:o,locStart:s}=t,a=null==(D=i.isBlockComment)?void 0:D.call(i,n);if(null!=r&&r.hasLineSuffix&&(null==r||!r.isBlock)||V(o,s(n),{backwards:!0})){let l=Ie(o,s(n));return{doc:Te([K,l?K:"",u]),isBlock:a,hasLineSuffix:!0}}return!a||null!=r&&r.hasLineSuffix?{doc:[Te([" ",u]),he],isBlock:a,hasLineSuffix:!0}:{doc:[" ",u],isBlock:a,hasLineSuffix:!1}}(e,t,s),o.push(s.doc))},"comments"),{leading:i,trailing:o}}var cn=function Di(e){return()=>{}},Re=class extends Error{name="ConfigError"},Ye=class extends Error{name="UndefinedParserError"},fn={cursorOffset:{category:"Special",type:"int",default:-1,range:{start:-1,end:1/0,step:1},description:"Print (to stderr) where a cursor at the given position would move to after formatting.",cliCategory:"Editor"},endOfLine:{category:"Global",type:"choice",default:"lf",description:"Which end of line characters to apply.",choices:[{value:"lf",description:"Line Feed only (\\n), common on Linux and macOS as well as inside git repos"},{value:"crlf",description:"Carriage Return + Line Feed characters (\\r\\n), common on Windows"},{value:"cr",description:"Carriage Return character only (\\r), used very rarely"},{value:"auto",description:"Maintain existing\n(mixed values within one file are normalised by looking at what's used after the first line)"}]},filepath:{category:"Special",type:"path",description:"Specify the input filepath. This will be used to do parser inference.",cliName:"stdin-filepath",cliCategory:"Other",cliDescription:"Path to the file to pretend that stdin comes from."},insertPragma:{category:"Special",type:"boolean",default:!1,description:"Insert @format pragma into file's first docblock comment.",cliCategory:"Other"},parser:{category:"Global",type:"choice",default:void 0,description:"Which parser to use.",exception:e=>"string"==typeof e||"function"==typeof e,choices:[{value:"flow",description:"Flow"},{value:"babel",description:"JavaScript"},{value:"babel-flow",description:"Flow"},{value:"babel-ts",description:"TypeScript"},{value:"typescript",description:"TypeScript"},{value:"acorn",description:"JavaScript"},{value:"espree",description:"JavaScript"},{value:"meriyah",description:"JavaScript"},{value:"css",description:"CSS"},{value:"less",description:"Less"},{value:"scss",description:"SCSS"},{value:"json",description:"JSON"},{value:"json5",description:"JSON5"},{value:"jsonc",description:"JSON with Comments"},{value:"json-stringify",description:"JSON.stringify"},{value:"graphql",description:"GraphQL"},{value:"markdown",description:"Markdown"},{value:"mdx",description:"MDX"},{value:"vue",description:"Vue"},{value:"yaml",description:"YAML"},{value:"glimmer",description:"Ember / Handlebars"},{value:"html",description:"HTML"},{value:"angular",description:"Angular"},{value:"lwc",description:"Lightning Web Components"}]},plugins:{type:"path",array:!0,default:[{value:[]}],category:"Global",description:"Add a plugin. Multiple plugins can be passed as separate `--plugin`s.",exception:e=>"string"==typeof e||"object"==typeof e,cliName:"plugin",cliCategory:"Config"},printWidth:{category:"Global",type:"int",default:80,description:"The line length where Prettier will try wrap.",range:{start:0,end:1/0,step:1}},rangeEnd:{category:"Special",type:"int",default:1/0,range:{start:0,end:1/0,step:1},description:"Format code ending at a given character offset (exclusive).\nThe range will extend forwards to the end of the selected statement.",cliCategory:"Editor"},rangeStart:{category:"Special",type:"int",default:0,range:{start:0,end:1/0,step:1},description:"Format code starting at a given character offset.\nThe range will extend backwards to the start of the first line containing the selected statement.",cliCategory:"Editor"},requirePragma:{category:"Special",type:"boolean",default:!1,description:"Require either '@prettier' or '@format' to be present in the file's first docblock comment\nin order for it to be formatted.",cliCategory:"Other"},tabWidth:{type:"int",category:"Global",default:2,description:"Number of spaces per indentation level.",range:{start:0,end:1/0,step:1}},useTabs:{category:"Global",type:"boolean",default:!1,description:"Indent with tabs instead of spaces."},embeddedLanguageFormatting:{category:"Global",type:"choice",default:"auto",description:"Control how Prettier formats quoted code embedded in the file.",choices:[{value:"auto",description:"Format embedded code if Prettier can automatically identify it."},{value:"off",description:"Never automatically format embedded code."}]}};function it({plugins:e=[],showDeprecated:t=!1}={}){let r=e.flatMap(u=>u.languages??[]),n=[];for(let u of function ci(e){let t=[];for(let[r,n]of Object.entries(e)){let u={name:r,...n};Array.isArray(u.default)&&(u.default=A(!1,u.default,-1).value),t.push(u)}return t}(Object.assign({},...e.map(({options:i})=>i),fn)))!t&&u.deprecated||(Array.isArray(u.choices)&&(t||(u.choices=u.choices.filter(i=>!i.deprecated)),"parser"===u.name&&(u.choices=[...u.choices,...li(u.choices,r,e)])),u.pluginDefaults=Object.fromEntries(e.filter(i=>{var o;return void 0!==(null==(o=i.defaultOptions)?void 0:o[u.name])}).map(i=>[i.name,i.defaultOptions[u.name]])),n.push(u));return{languages:r,options:n}}function*li(e,t,r){let n=new Set(e.map(u=>u.value));for(let u of t)if(u.parsers)for(let i of u.parsers)if(!n.has(i)){n.add(i);let o=r.find(a=>a.parsers&&Object.prototype.hasOwnProperty.call(a.parsers,i)),s=u.name;null!=o&&o.name&&(s+=` (plugin: ${o.name})`),yield{value:i,description:s}}}function dn(e,t){if(!t)return;let r=(e=>String(e).split(/[/\\]/u).pop())(t).toLowerCase();return e.find(({filenames:n})=>null==n?void 0:n.some(u=>u.toLowerCase()===r))??e.find(({extensions:n})=>null==n?void 0:n.some(u=>r.endsWith(u)))}var pn=function pi(e,t){let r=e.plugins.flatMap(u=>u.languages??[]),n=function di(e,t){if(t)return e.find(({name:r})=>r.toLowerCase()===t)??e.find(({aliases:r})=>null==r?void 0:r.includes(t))??e.find(({extensions:r})=>null==r?void 0:r.includes(`.${t}`))}(r,t.language)??dn(r,t.physicalFile)??dn(r,t.file)??void t.physicalFile;return null==n?void 0:n.parsers[0]},oe={key:e=>/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(e)?e:JSON.stringify(e),value(e){if(null===e||"object"!=typeof e)return JSON.stringify(e);if(Array.isArray(e))return`[${e.map(r=>oe.value(r)).join(", ")}]`;let t=Object.keys(e);return 0===t.length?"{}":`{ ${t.map(r=>`${oe.key(r)}: ${oe.value(e[r])}`).join(", ")} }`},pair:({key:e,value:t})=>oe.value({[e]:t})},Ut=Me(ot(),1),ce=Me(ot(),1),st=Symbol.for("vnopts.VALUE_NOT_EXIST"),ve=Symbol.for("vnopts.VALUE_UNCHANGED"),En=" ".repeat(2);function Cn(e,t,r,n){return[`Invalid ${ce.default.red(n.key(e))} value.`,`Expected ${ce.default.blue(r)},`,`but received ${t===st?ce.default.gray("nothing"):ce.default.red(n.value(t))}.`].join(" ")}function yn({text:e,list:t},r){let n=[];return e&&n.push(`- ${ce.default.blue(e)}`),t&&n.push([`- ${ce.default.blue(t.title)}:`].concat(t.values.map(u=>yn(u,r-En.length).replace(/^|\n/g,`$&${En}`))).join("\n")),An(n,r)}function An(e,t){if(1===e.length)return e[0];let[r,n]=e,[u,i]=e.map(o=>o.split("\n",1)[0].length);return u>t&&u>i?n:r}var Kt=Me(ot(),1),zt=[],vn=[];var at=(e,t,{descriptor:r,logger:n,schemas:u})=>{let i=[`Ignored unknown option ${Kt.default.yellow(r.pair({key:e,value:t}))}.`],o=Object.keys(u).sort().find(s=>function Gt(e,t){if(e===t)return 0;let r=e;e.length>t.length&&(e=t,t=r);let n=e.length,u=t.length;for(;n>0&&e.charCodeAt(~-n)===t.charCodeAt(~-u);)n--,u--;let i=0;for(;i<n&&e.charCodeAt(i)===t.charCodeAt(i);)i++;if(n-=i,u-=i,0===n)return u;let o,s,a,D,l=0,p=0;for(;l<n;)vn[l]=e.charCodeAt(i+l),zt[l]=++l;for(;p<u;)for(o=t.charCodeAt(i+p),a=p++,s=p,l=0;l<n;l++)D=o===vn[l]?a:a+1,a=zt[l],s=zt[l]=a>s?D>s?s+1:D:D>a?a+1:D;return s}(e,s)<3);o&&i.push(`Did you mean ${Kt.default.blue(r.key(o))}?`),n.warn(i.join(" "))},Fi=["default","expected","validate","deprecated","forward","redirect","overlap","preprocess","postprocess"];var x=class{static create(t){return function mi(e,t){let r=new e(t),n=Object.create(r);for(let u of Fi)u in t&&(n[u]=hi(t[u],r,x.prototype[u].length));return n}(this,t)}constructor(t){this.name=t.name}default(t){}expected(t){return"nothing"}validate(t,r){return!1}deprecated(t,r){return!1}forward(t,r){}redirect(t,r){}overlap(t,r,n){return t}preprocess(t,r){return t}postprocess(t,r){return ve}};function hi(e,t,r){return"function"==typeof e?(...n)=>e(...n.slice(0,r-1),t,...n.slice(r-1)):()=>e}var Dt=class extends x{constructor(t){super(t),this._sourceName=t.sourceName}expected(t){return t.schemas[this._sourceName].expected(t)}validate(t,r){return r.schemas[this._sourceName].validate(t,r)}redirect(t,r){return this._sourceName}},lt=class extends x{expected(){return"anything"}validate(){return!0}},ct=class extends x{constructor({valueSchema:t,name:r=t.name,...n}){super({...n,name:r}),this._valueSchema=t}expected(t){let{text:r,list:n}=t.normalizeExpectedResult(this._valueSchema.expected(t));return{text:r&&`an array of ${r}`,list:n&&{title:"an array of the following values",values:[{list:n}]}}}validate(t,r){if(!Array.isArray(t))return!1;let n=[];for(let u of t){let i=r.normalizeValidateResult(this._valueSchema.validate(u,r),u);!0!==i&&n.push(i.value)}return 0===n.length||{value:n}}deprecated(t,r){let n=[];for(let u of t){let i=r.normalizeDeprecatedResult(this._valueSchema.deprecated(u,r),u);!1!==i&&n.push(...i.map(({value:o})=>({value:[o]})))}return n}forward(t,r){let n=[];for(let u of t){let i=r.normalizeForwardResult(this._valueSchema.forward(u,r),u);n.push(...i.map(Bn))}return n}redirect(t,r){let n=[],u=[];for(let i of t){let o=r.normalizeRedirectResult(this._valueSchema.redirect(i,r),i);"remain"in o&&n.push(o.remain),u.push(...o.redirect.map(Bn))}return 0===n.length?{redirect:u}:{redirect:u,remain:n}}overlap(t,r){return t.concat(r)}};function Bn({from:e,to:t}){return{from:[e],to:t}}var ft=class extends x{expected(){return"true or false"}validate(t){return"boolean"==typeof t}};function _n(e,t){let r=Object.create(null);for(let n of e){let u=n[t];if(r[u])throw new Error(`Duplicate ${t} ${JSON.stringify(u)}`);r[u]=n}return r}function Sn(e,t){if(e===t)return 0;let r=typeof e,n=typeof t,u=["undefined","object","boolean","number","string"];return r!==n?u.indexOf(r)-u.indexOf(n):"string"!==r?Number(e)-Number(t):e.localeCompare(t)}function Jt(e){return void 0===e?{}:e}function qt(e){if("string"==typeof e)return{text:e};let{text:t,list:r}=e;return function Ei(e,t){if(!e)throw new Error(t)}(void 0!==(t||r),"Unexpected `expected` result, there should be at least one field."),r?{text:t,list:{title:r.title,values:r.values.map(qt)}}:{text:t}}function Xt(e,t){return!0===e||(!1===e?{value:t}:e)}function Qt(e,t,r=!1){return!1!==e&&(!0===e?!!r||[{value:t}]:"value"in e?[e]:0!==e.length&&e)}function wn(e,t){return"string"==typeof e||"key"in e?{from:t,to:e}:"from"in e?{from:e.from,to:e.to}:{from:t,to:e.to}}function dt(e,t){return void 0===e?[]:Array.isArray(e)?e.map(r=>wn(r,t)):[wn(e,t)]}function Zt(e,t){let r=dt("object"==typeof e&&"redirect"in e?e.redirect:e,t);return 0===r.length?{remain:t,redirect:r}:"object"==typeof e&&"remain"in e?{remain:e.remain,redirect:r}:{redirect:r}}var er,pt=class extends x{constructor(t){super(t),this._choices=function xn(e,t){let r=new Map;for(let n of e){let u=n[t];if(r.has(u))throw new Error(`Duplicate ${t} ${JSON.stringify(u)}`);r.set(u,n)}return r}(t.choices.map(r=>r&&"object"==typeof r?r:{value:r}),"value")}expected({descriptor:t}){let r=Array.from(this._choices.keys()).map(o=>this._choices.get(o)).filter(({hidden:o})=>!o).map(o=>o.value).sort(Sn).map(t.value),n=r.slice(0,-2),u=r.slice(-2);return{text:n.concat(u.join(" or ")).join(", "),list:{title:"one of the following values",values:r}}}validate(t){return this._choices.has(t)}deprecated(t){let r=this._choices.get(t);return!(!r||!r.deprecated)&&{value:t}}forward(t){let r=this._choices.get(t);return r?r.forward:void 0}redirect(t){let r=this._choices.get(t);return r?r.redirect:void 0}},Ft=class extends x{expected(){return"a number"}validate(t,r){return"number"==typeof t}},mt=class extends Ft{expected(){return"an integer"}validate(t,r){return!0===r.normalizeValidateResult(super.validate(t,r),t)&&function On(e){return e===Math.floor(e)}(t)}},je=class extends x{expected(){return"a string"}validate(t){return"string"==typeof t}},kn=oe,Ln=at,Pn=(e,t,r)=>{let{text:n,list:u}=r.normalizeExpectedResult(r.schemas[e].expected(r)),i=[];return n&&i.push(Cn(e,t,n,r.descriptor)),u&&i.push([Cn(e,t,u.title,r.descriptor)].concat(u.values.map(o=>yn(o,r.loggerPrintWidth))).join("\n")),An(i,r.loggerPrintWidth)},In=(e,t,{descriptor:r})=>{let n=[`${Ut.default.yellow("string"==typeof e?r.key(e):r.pair(e))} is deprecated`];return t&&n.push(`we now treat it as ${Ut.default.blue("string"==typeof t?r.key(t):r.pair(t))}`),n.join("; ")+"."},ht=class{constructor(t,r){let{logger:n=console,loggerPrintWidth:u=80,descriptor:i=kn,unknown:o=Ln,invalid:s=Pn,deprecated:a=In,missing:D=()=>!1,required:l=()=>!1,preprocess:p=d=>d,postprocess:f=()=>ve}=r||{};this._utils={descriptor:i,logger:n||{warn:()=>{}},loggerPrintWidth:u,schemas:_n(t,"name"),normalizeDefaultResult:Jt,normalizeExpectedResult:qt,normalizeDeprecatedResult:Qt,normalizeForwardResult:dt,normalizeRedirectResult:Zt,normalizeValidateResult:Xt},this._unknownHandler=o,this._invalidHandler=function Tn(e){return(...t)=>{let r=e(...t);return"string"==typeof r?new Error(r):r}}(s),this._deprecatedHandler=a,this._identifyMissing=(d,c)=>!(d in c)||D(d,c),this._identifyRequired=l,this._preprocess=p,this._postprocess=f,this.cleanHistory()}cleanHistory(){this._hasDeprecationWarned=function bn(){let e=Object.create(null);return t=>{let r=JSON.stringify(t);return!!e[r]||(e[r]=!0,!1)}}()}normalize(t){let r={},u=[this._preprocess(t,this._utils)],i=()=>{for(;0!==u.length;){let o=u.shift(),s=this._applyNormalization(o,r);u.push(...s)}};i();for(let o of Object.keys(this._utils.schemas)){let s=this._utils.schemas[o];if(!(o in r)){let a=Jt(s.default(this._utils));"value"in a&&u.push({[o]:a.value})}}i();for(let o of Object.keys(this._utils.schemas)){if(!(o in r))continue;let s=this._utils.schemas[o],a=r[o],D=s.postprocess(a,this._utils);D!==ve&&(this._applyValidation(D,o,s),r[o]=D)}return this._applyPostprocess(r),this._applyRequiredCheck(r),r}_applyNormalization(t,r){let n=[],{knownKeys:u,unknownKeys:i}=this._partitionOptionKeys(t);for(let o of u){let s=this._utils.schemas[o],a=s.preprocess(t[o],this._utils);this._applyValidation(a,o,s);let D=({from:d,to:c})=>{n.push("string"==typeof c?{[c]:d}:{[c.key]:c.value})},l=({value:d,redirectTo:c})=>{let F=Qt(s.deprecated(d,this._utils),a,!0);if(!1!==F)if(!0===F)this._hasDeprecationWarned(o)||this._utils.logger.warn(this._deprecatedHandler(o,c,this._utils));else for(let{value:m}of F){let h={key:o,value:m};if(!this._hasDeprecationWarned(h)){let C="string"==typeof c?{key:c,value:m}:c;this._utils.logger.warn(this._deprecatedHandler(h,C,this._utils))}}};dt(s.forward(a,this._utils),a).forEach(D);let f=Zt(s.redirect(a,this._utils),a);if(f.redirect.forEach(D),"remain"in f){let d=f.remain;r[o]=o in r?s.overlap(r[o],d,this._utils):d,l({value:d})}for(let{from:d,to:c}of f.redirect)l({value:d,redirectTo:c})}for(let o of i){let s=t[o];this._applyUnknownHandler(o,s,r,(a,D)=>{n.push({[a]:D})})}return n}_applyRequiredCheck(t){for(let r of Object.keys(this._utils.schemas))if(this._identifyMissing(r,t)&&this._identifyRequired(r))throw this._invalidHandler(r,st,this._utils)}_partitionOptionKeys(t){let[r,n]=function Nn(e,t){let r=[],n=[];for(let u of e)t(u)?r.push(u):n.push(u);return[r,n]}(Object.keys(t).filter(u=>!this._identifyMissing(u,t)),u=>u in this._utils.schemas);return{knownKeys:r,unknownKeys:n}}_applyValidation(t,r,n){let u=Xt(n.validate(t,this._utils),t);if(!0!==u)throw this._invalidHandler(r,u.value,this._utils)}_applyUnknownHandler(t,r,n,u){let i=this._unknownHandler(t,r,this._utils);if(i)for(let o of Object.keys(i)){if(this._identifyMissing(o,i))continue;let s=i[o];o in this._utils.schemas?u(o,s):n[o]=s}}_applyPostprocess(t){let r=this._postprocess(t,this._utils);if(r!==ve){if(r.delete)for(let n of r.delete)delete t[n];if(r.override){let{knownKeys:n,unknownKeys:u}=this._partitionOptionKeys(r.override);for(let i of n){let o=r.override[i];this._applyValidation(o,i,this._utils.schemas[i]),t[i]=o}for(let i of u){let o=r.override[i];this._applyUnknownHandler(i,o,t,(s,a)=>{let D=this._utils.schemas[s];this._applyValidation(a,s,D),t[s]=a})}}}}};function Ai(e,{isCLI:t,optionInfos:r,FlagSchema:n}){let o,{name:u}=e,i={name:u},s={};switch(e.type){case"int":o=mt,t&&(i.preprocess=Number);break;case"string":case"path":o=je;break;case"choice":o=pt,i.choices=e.choices.map(a=>null!=a&&a.redirect?{...a,redirect:{to:{key:e.name,value:a.redirect}}}:a);break;case"boolean":o=ft;break;case"flag":o=n,i.flags=r.flatMap(a=>[a.alias,a.description&&a.name,a.oppositeDescription&&`no-${a.name}`].filter(Boolean));break;default:throw new Error(`Unexpected type ${e.type}`)}if(e.exception?i.validate=(a,D,l)=>e.exception(a)||D.validate(a,l):i.validate=(a,D,l)=>void 0===a||D.validate(a,l),e.redirect&&(s.redirect=a=>a?{to:"string"==typeof e.redirect?e.redirect:{key:e.redirect.option,value:e.redirect.value}}:void 0),e.deprecated&&(s.deprecated=!0),t&&!e.array){let a=i.preprocess||(D=>D);i.preprocess=(D,l,p)=>l.preprocess(a(Array.isArray(D)?A(!1,D,-1):D),p)}return e.array?ct.create({...t?{preprocess:a=>Array.isArray(a)?a:[a]}:{},...s,valueSchema:o.create(i)}):o.create({...i,...s})}var Rn=function gi(e,t,{logger:r=!1,isCLI:n=!1,passThrough:u=!1,FlagSchema:i,descriptor:o}={}){if(n){if(!i)throw new Error("'FlagSchema' option is required.");if(!o)throw new Error("'descriptor' option is required.")}else o=oe;let s=u?Array.isArray(u)?(f,d)=>u.includes(f)?{[f]:d}:void 0:(f,d)=>({[f]:d}):(f,d,c)=>{let{_:F,...m}=c.schemas;return at(f,d,{...c,schemas:m})},a=function yi(e,{isCLI:t,FlagSchema:r}){let n=[];t&&n.push(lt.create({name:"_"}));for(let u of e)n.push(Ai(u,{isCLI:t,optionInfos:e,FlagSchema:r})),u.alias&&t&&n.push(Dt.create({name:u.alias,sourceName:u.name}));return n}(t,{isCLI:n,FlagSchema:i}),D=new ht(a,{logger:r,unknown:s,descriptor:o}),l=!1!==r;l&&er&&(D._hasDeprecationWarned=er);let p=D.normalize(e);return l&&(er=D._hasDeprecationWarned),p},tr=(e,t,r)=>{if(!e||null!=t){if(t.findLast)return t.findLast(r);for(let n=t.length-1;n>=0;n--){let u=t[n];if(r(u,n,t))return u}}};function rr(e,t){if(!t)throw new Error("parserName is required.");let r=tr(!1,e,u=>u.parsers&&Object.prototype.hasOwnProperty.call(u.parsers,t));if(r)return r;let n=`Couldn't resolve parser "${t}".`;throw n+=" Plugins must be explicitly added to the standalone bundle.",new Re(n)}function Et({plugins:e,parser:t}){return nr(rr(e,t),t)}function nr(e,t){let r=e.parsers[t];return"function"==typeof r?r():r}var Hn={astFormat:"estree",printer:{},originalText:void 0,locStart:null,locEnd:null};var se=async function Bi(e,t={}){var p;let r={...e};if(!r.parser){if(!r.filepath)throw new Ye("No parser and no file path given, couldn't infer a parser.");if(r.parser=pn(r,{physicalFile:r.filepath}),!r.parser)throw new Ye(`No parser could be inferred for file "${r.filepath}".`)}let n=it({plugins:e.plugins,showDeprecated:!0}).options,u={...Hn,...Object.fromEntries(n.filter(f=>void 0!==f.default).map(f=>[f.name,f.default]))},i=rr(r.plugins,r.parser),o=await nr(i,r.parser);r.astFormat=o.astFormat,r.locEnd=o.locEnd,r.locStart=o.locStart;let s=null!=(p=i.printers)&&p[o.astFormat]?i:function Yn(e,t){if(!t)throw new Error("astFormat is required.");let r=tr(!1,e,u=>u.printers&&Object.prototype.hasOwnProperty.call(u.printers,t));if(r)return r;let n=`Couldn't find plugin for AST format "${t}".`;throw n+=" Plugins must be explicitly added to the standalone bundle.",new Re(n)}(r.plugins,o.astFormat),a=await function jn(e,t){let r=e.printers[t];return"function"==typeof r?r():r}(s,o.astFormat);r.printer=a;let l={...u,...s.defaultOptions?Object.fromEntries(Object.entries(s.defaultOptions).filter(([,f])=>void 0!==f)):{}};for(let[f,d]of Object.entries(l))(null===r[f]||void 0===r[f])&&(r[f]=d);return"json"===r.parser&&(r.trailingComma="none"),Rn(r,n,{passThrough:Object.keys(Hn),...t})},Mn=Me($n(),1);var fe=async function bi(e,t){let u,r=await Et(t),n=r.preprocess?r.preprocess(e,t):e;t.originalText=n;try{u=await r.parse(n,t,t)}catch(i){!function Ni(e,t){let{loc:r}=e;if(r){let n=(0,Mn.codeFrameColumns)(t,r,{highlightCode:!0});throw e.message+="\n"+n,e.codeFrame=n,e}throw e}(i,e)}return{text:n,ast:u}};async function Vn(e,t,r,n,u){let{embeddedLanguageFormatting:i,printer:{embed:o,hasPrettierIgnore:s=()=>!1,getVisitorKeys:a}}=r;if(!o||"auto"!==i)return;if(o.length>2)throw new Error("printer.embed has too many parameters. The API changed in Prettier v3. Please update your plugin. See https://prettier.io/docs/plugins#optional-embed");let D=q(o.getVisitorKeys??a),l=[];!function d(){let{node:c}=e;if(null===c||"object"!=typeof c||s(e))return;for(let m of D(c))Array.isArray(c[m])?e.each(d,m):e.call(d,m);let F=o(e,r);if(F){if("function"==typeof F)return void l.push({print:F,node:c,pathStack:[...e.stack]});u.set(c,F)}}();let p=e.stack;for(let{print:c,node:F,pathStack:m}of l)try{e.stack=m;let h=await c(f,t,e,r);h&&u.set(F,h)}catch(h){if(globalThis.PRETTIER_DEBUG)throw h}function f(c,F){return async function Oi(e,t,r,n){let u=await se({...r,...t,parentParser:r.parser,originalText:e},{passThrough:!0}),{ast:i}=await fe(e,u),o=await n(i,u);return qe(o)}(c,F,r,n)}e.stack=p}var Un=function Si(e,t){let{originalText:r,[Symbol.for("comments")]:n,locStart:u,locEnd:i,[Symbol.for("printedComments")]:o}=t,{node:s}=e,a=u(s),D=i(s);for(let l of n)u(l)>=a&&i(l)<=D&&o.add(l);return r.slice(a,D)};async function He(e,t){({ast:e}=await ir(e,t));let r=new Map,n=new qr(e),u=cn(t),i=new Map;await Vn(n,s,t,He,i);let o=await zn(n,t,s,void 0,i);return function ln(e){let{[Symbol.for("comments")]:t,[Symbol.for("printedComments")]:r}=e;for(let n of t){if(!n.printed&&!r.has(n))throw new Error('Comment "'+n.value.trim()+'" was not printed. Please report this error!');delete n.printed}}(t),t.nodeAfterCursor&&!t.nodeBeforeCursor?[Z,o]:t.nodeBeforeCursor&&!t.nodeAfterCursor?[o,Z]:o;function s(D,l){return void 0===D||D===n?a(l):Array.isArray(D)?n.call(()=>a(l),...D):n.call(()=>a(l),D)}function a(D){u(n);let l=n.node;if(null==l)return"";let p=l&&"object"==typeof l&&void 0===D;if(p&&r.has(l))return r.get(l);let f=zn(n,t,s,D,i);return p&&r.set(l,f),f}}function zn(e,t,r,n,u){var a;let s,{node:i}=e,{printer:o}=t;switch(s=null!=(a=o.hasPrettierIgnore)&&a.call(o,e)?Un(e,t):u.has(i)?u.get(i):o.print(e,t,r,n),i){case t.cursorNode:s=me(s,D=>[Z,D,Z]);break;case t.nodeBeforeCursor:s=me(s,D=>[D,Z]);break;case t.nodeAfterCursor:s=me(s,D=>[Z,D])}return o.printComment&&(!o.willPrintOwnComments||!o.willPrintOwnComments(e,t))&&(s=function Dn(e,t,r){let{leading:n,trailing:u}=ai(e,r);return n||u?me(t,i=>[n,i,u]):t}(e,s,t)),s}async function ir(e,t){let r=e.comments??[];t[Symbol.for("comments")]=r,t[Symbol.for("tokens")]=e.tokens??[],t[Symbol.for("printedComments")]=new Set,function on(e,t){let{comments:r}=e;if(delete e.comments,!Ht(r)||!t.printer.canAttachComment)return;let n=[],{locStart:u,locEnd:i,printer:{experimentalFeatures:{avoidAstMutation:o=!1}={},handleComments:s={}},originalText:a}=t,{ownLine:D=Mt,endOfLine:l=Mt,remaining:p=Mt}=s,f=r.map((d,c)=>({...un(e,d,t),comment:d,text:a,options:t,ast:e,isLastComment:r.length-1===c}));for(let[d,c]of f.entries()){let b,{comment:F,precedingNode:m,enclosingNode:h,followingNode:C,text:v,options:E,ast:g,isLastComment:j}=c;if("json"===E.parser||"json5"===E.parser||"jsonc"===E.parser||"__js_expression"===E.parser||"__ts_expression"===E.parser||"__vue_expression"===E.parser||"__vue_ts_expression"===E.parser){if(u(F)-u(g)<=0){ue(g,F);continue}if(i(F)-i(g)>=0){ie(g,F);continue}}if(o?b=[c]:(F.enclosingNode=h,F.precedingNode=m,F.followingNode=C,b=[F,v,E,g,j]),ni(v,E,f,d))F.placement="ownLine",D(...b)||(C?ue(C,F):m?ie(m,F):re(h||g,F));else if(ui(v,E,f,d))F.placement="endOfLine",l(...b)||(m?ie(m,F):C?ue(C,F):re(h||g,F));else if(F.placement="remaining",!p(...b))if(m&&C){let X=n.length;X>0&&n[X-1].followingNode!==C&&nn(n,E),n.push(c)}else m?ie(m,F):C?ue(C,F):re(h||g,F)}if(nn(n,t),!o)for(let d of r)delete d.precedingNode,delete d.enclosingNode,delete d.followingNode}(e,t);let{printer:{preprocess:n}}=t;return{ast:e=n?await n(e,t):e,comments:r}}var Gn=function Ti(e,t){let{cursorOffset:r,locStart:n,locEnd:u}=t,i=q(t.printer.getVisitorKeys),o=d=>n(d)<=r&&u(d)>=r,s=e,a=[e];for(let d of function*Zr(e,t){let r=[e];for(let n=0;n<r.length;n++){let u=r[n];for(let i of ye(u,t))yield i,r.push(i)}}(e,{getVisitorKeys:i,filter:o}))a.push(d),s=d;if(function en(e,t){return ye(e,t).next().done}(s,{getVisitorKeys:i}))return{cursorNode:s};let D,l,p=-1,f=Number.POSITIVE_INFINITY;for(;a.length>0&&(void 0===D||void 0===l);){s=a.pop();let d=void 0!==D,c=void 0!==l;for(let F of ye(s,{getVisitorKeys:i})){if(!d){let m=u(F);m<=r&&m>p&&(D=F,p=m)}if(!c){let m=n(F);m>=r&&m<f&&(l=F,f=m)}}}return{nodeBeforeCursor:D,nodeAfterCursor:l}};var Kn=function ki(e,t){let{printer:{massageAstNode:r,getVisitorKeys:n}}=t;if(!r)return e;let u=q(n),i=r.ignoredProperties??new Set;return function o(s,a){if(null===s||"object"!=typeof s)return s;if(Array.isArray(s))return s.map(f=>o(f,a)).filter(Boolean);let D={},l=new Set(u(s));for(let f in s)!Object.prototype.hasOwnProperty.call(s,f)||i.has(f)||(l.has(f)?D[f]=o(s[f],s):D[f]=s[f]);let p=r(s,D,a);if(null!==p)return p??D}(e)},Jn=(e,t,r)=>{if(!e||null!=t){if(t.findLastIndex)return t.findLastIndex(r);for(let n=t.length-1;n>=0;n--){if(r(t[n],n,t))return n}return-1}};function qn(e){let t=Jn(!1,e,r=>"Program"!==r.type&&"File"!==r.type);return-1===t?e:e.slice(0,t+1)}function or(e,t,r,n,u=[],i){let{locStart:o,locEnd:s}=r,a=o(e),D=s(e);if(!(t>D||t<a||"rangeEnd"===i&&t===a||"rangeStart"===i&&t===D)){for(let l of ut(e,r)){let p=or(l,t,r,n,[e,...u],i);if(p)return p}if(!n||n(e,u[0]))return{node:e,parentNodes:u}}}var Qn=new Set(["JsonRoot","ObjectExpression","ArrayExpression","StringLiteral","NumericLiteral","BooleanLiteral","NullLiteral","UnaryExpression","TemplateLiteral"]),ji=new Set(["OperationDefinition","FragmentDefinition","VariableDefinition","TypeExtensionDefinition","ObjectTypeDefinition","FieldDefinition","DirectiveDefinition","EnumTypeDefinition","EnumValueDefinition","InputValueDefinition","InputObjectTypeDefinition","SchemaDefinition","OperationTypeDefinition","InterfaceTypeDefinition","UnionTypeDefinition","ScalarTypeDefinition"]);function Xn(e,t,r){if(!t)return!1;switch(e.parser){case"flow":case"babel":case"babel-flow":case"babel-ts":case"typescript":case"acorn":case"espree":case"meriyah":case"__babel_estree":return function Yi(e,t){return"DeclareExportDeclaration"!==t&&"TypeParameterDeclaration"!==e&&("Directive"===e||"TypeAlias"===e||"TSExportAssignment"===e||e.startsWith("Declare")||e.startsWith("TSDeclare")||e.endsWith("Statement")||e.endsWith("Declaration"))}(t.type,null==r?void 0:r.type);case"json":case"json5":case"jsonc":case"json-stringify":return Qn.has(t.type);case"graphql":return ji.has(t.kind);case"vue":return"root"!==t.tag}return!1}function Zn(e,t,r){let{rangeStart:n,rangeEnd:u,locStart:i,locEnd:o}=t;Pe.ok(u>n);let s=e.slice(n,u).search(/\S/u),a=-1===s;if(!a)for(n+=s;u>n&&!/\S/u.test(e[u-1]);--u);let p,f,D=or(r,n,t,(d,c)=>Xn(t,d,c),[],"rangeStart"),l=a?D:or(r,u,t,d=>Xn(t,d),[],"rangeEnd");if(!D||!l)return{rangeStart:0,rangeEnd:0};if((({parser:e})=>"json"===e||"json5"===e||"jsonc"===e||"json-stringify"===e)(t)){let d=function Ii(e,t){let r=[e.node,...e.parentNodes],n=new Set([t.node,...t.parentNodes]);return r.find(u=>Qn.has(u.type)&&n.has(u))}(D,l);p=d,f=d}else({startNode:p,endNode:f}=function Ri(e,t,{locStart:r,locEnd:n}){let u=e.node,i=t.node;if(u===i)return{startNode:u,endNode:i};let o=r(e.node);for(let a of qn(t.parentNodes)){if(!(r(a)>=o))break;i=a}let s=n(t.node);for(let a of qn(e.parentNodes)){if(!(n(a)<=s))break;if(u=a,u===i)break}return{startNode:u,endNode:i}}(D,l,t));return{rangeStart:Math.min(i(p),i(f)),rangeEnd:Math.max(o(p),o(f))}}var eu=Symbol("cursor");async function uu(e,t,r=0){if(!e||0===e.trim().length)return{formatted:"",cursorOffset:-1,comments:[]};let{ast:n,text:u}=await fe(e,t);t.cursorOffset>=0&&(t={...t,...Gn(n,t)});let i=await He(n,t);r>0&&(i=Ze([K,i],r,t.tabWidth));let o=Ce(i,t);if(r>0){let a=o.formatted.trim();void 0!==o.cursorNodeStart&&(o.cursorNodeStart-=o.formatted.indexOf(a),o.cursorNodeStart<0&&(o.cursorNodeStart=0,o.cursorNodeText=o.cursorNodeText.trimStart()),o.cursorNodeStart+o.cursorNodeText.length>a.length&&(o.cursorNodeText=o.cursorNodeText.trimEnd())),o.formatted=a+be(t.endOfLine)}let s=t[Symbol.for("comments")];if(t.cursorOffset>=0){let a,D,l,p;if((t.cursorNode||t.nodeBeforeCursor||t.nodeAfterCursor)&&o.cursorNodeText)if(l=o.cursorNodeStart,p=o.cursorNodeText,t.cursorNode)a=t.locStart(t.cursorNode),D=u.slice(a,t.locEnd(t.cursorNode));else{if(!t.nodeBeforeCursor&&!t.nodeAfterCursor)throw new Error("Cursor location must contain at least one of cursorNode, nodeBeforeCursor, nodeAfterCursor");a=t.nodeBeforeCursor?t.locEnd(t.nodeBeforeCursor):0;let h=t.nodeAfterCursor?t.locStart(t.nodeAfterCursor):u.length;D=u.slice(a,h)}else a=0,D=u,l=0,p=o.formatted;let f=t.cursorOffset-a;if(D===p)return{formatted:o.formatted,cursorOffset:l+f,comments:s};let d=D.split("");d.splice(f,0,eu);let F=function yr(e,t,r){return ze.diff(e,t,r)}(d,p.split("")),m=l;for(let h of F)if(h.removed){if(h.value.includes(eu))break}else m+=h.count;return{formatted:o.formatted,cursorOffset:m,comments:s}}return{formatted:o.formatted,cursorOffset:-1,comments:s}}function sr(e,t,r){return"number"!=typeof t||Number.isNaN(t)||t<0||t>e.length?r:t}function tu(e,t){let{cursorOffset:r,rangeStart:n,rangeEnd:u}=t;return r=sr(e,r,-1),n=sr(e,n,0),u=sr(e,u,e.length),{...t,cursorOffset:r,rangeStart:n,rangeEnd:u}}function iu(e,t){let{cursorOffset:r,rangeStart:n,rangeEnd:u,endOfLine:i}=tu(e,t),o="\ufeff"===e.charAt(0);if(o&&(e=e.slice(1),r--,n--,u--),"auto"===i&&(i=function Ar(e){let t=e.indexOf("\r");return-1!==t?"\n"===e.charAt(t+1)?"crlf":"cr":"lf"}(e)),e.includes("\r")){let s=a=>Nt(e.slice(0,Math.max(a,0)),"\r\n");r-=s(r),n-=s(n),u-=s(u),e=function vr(e){return ne(!1,e,/\r\n?/gu,"\n")}(e)}return{hasBOM:o,text:e,options:tu(e,{...t,cursorOffset:r,rangeStart:n,rangeEnd:u,endOfLine:i})}}async function ru(e,t){let r=await Et(t);return!r.hasPragma||r.hasPragma(e)}async function ar(e,t){let i,{hasBOM:r,text:n,options:u}=iu(e,await se(t));return u.rangeStart>=u.rangeEnd&&""!==n||u.requirePragma&&!await ru(n,u)?{formatted:e,cursorOffset:t.cursorOffset,comments:[]}:(u.rangeStart>0||u.rangeEnd<n.length?i=await async function Hi(e,t){let{ast:r,text:n}=await fe(e,t),{rangeStart:u,rangeEnd:i}=Zn(n,t,r),o=n.slice(u,i),s=Math.min(u,n.lastIndexOf("\n",u)+1),a=n.slice(s,u).match(/^\s*/u)[0],D=ge(a,t.tabWidth),l=await uu(o,{...t,rangeStart:0,rangeEnd:Number.POSITIVE_INFINITY,cursorOffset:t.cursorOffset>u&&t.cursorOffset<=i?t.cursorOffset-u:-1,endOfLine:"lf"},D),p=l.formatted.trimEnd(),{cursorOffset:f}=t;f>i?f+=p.length-o.length:l.cursorOffset>=0&&(f=l.cursorOffset+u);let d=n.slice(0,u)+p+n.slice(i);if("lf"!==t.endOfLine){let c=be(t.endOfLine);f>=0&&"\r\n"===c&&(f+=Nt(d.slice(0,f),"\n")),d=ne(!1,d,"\n",c)}return{formatted:d,cursorOffset:f,comments:l.comments}}(n,u):(!u.requirePragma&&u.insertPragma&&u.printer.insertPragma&&!await ru(n,u)&&(n=u.printer.insertPragma(n)),i=await uu(n,u)),r&&(i.formatted="\ufeff"+i.formatted,i.cursorOffset>=0&&i.cursorOffset++),i)}var Dr={};vt(Dr,{builders:()=>$i,printer:()=>Mi,utils:()=>Vi});var $i={join:Se,line:Qe,softline:$r,hardline:K,literalline:Xe,group:kt,conditionalGroup:function Ir(e,t){return kt(e[0],{...t,expandedStates:e})},fill:function Rr(e){return Tr(e),{type:N,parts:e}},lineSuffix:Te,lineSuffixBoundary:Hr,cursor:Z,breakParent:he,ifBreak:function Yr(e,t="",r={}){return G(e),""!==t&&G(t),{type:w,breakContents:e,flatContents:t,groupId:r.groupId}},trim:Wr,indent:le,indentIfBreak:function jr(e,t){return G(e),{type:P,contents:e,groupId:t.groupId,negate:t.negate}},align:De,addAlignmentToDoc:Ze,markAsRoot:function Lr(e){return De({type:"root"},e)},dedentToRoot:function kr(e){return De(Number.NEGATIVE_INFINITY,e)},dedent:function Pr(e){return De(-1,e)},hardlineWithoutBreakParent:ke,literallineWithoutBreakParent:Lt,label:function Mr(e,t){return G(t),e?{type:O,label:e,contents:t}:t},concat:e=>e},Mi={printDocToString:Ce},Vi={willBreak:function xr(e){return Je(e,Hu,!1)},traverseDoc:Fe,findInDoc:Je,mapDoc:Oe,removeLines:function Nr(e){return Oe(e,Wu)},stripTrailingHardline:qe,replaceEndOfLine:function Or(e,t=Xe){return Oe(e,r=>"string"==typeof r?Se(t,r.split("\n")):r)},canBreak:function Sr(e){return Je(e,Vu,!1)}},cu="3.5.3",cr={};vt(cr,{addDanglingComment:()=>re,addLeadingComment:()=>ue,addTrailingComment:()=>ie,getAlignmentSize:()=>ge,getIndentSize:()=>fu,getMaxContinuousCount:()=>du,getNextNonSpaceNonCommentCharacter:()=>pu,getNextNonSpaceNonCommentCharacterIndex:()=>no,getPreferredQuote:()=>mu,getStringWidth:()=>Le,hasNewline:()=>V,hasNewlineInRange:()=>hu,hasSpaces:()=>Eu,isNextLineEmpty:()=>so,isNextLineEmptyAfterIndex:()=>Ct,isPreviousLineEmpty:()=>io,makeString:()=>Cu,skip:()=>Ae,skipEverythingButNewLine:()=>nt,skipInlineComment:()=>Be,skipNewline:()=>W,skipSpaces:()=>S,skipToLineEnd:()=>rt,skipTrailingComment:()=>we,skipWhitespace:()=>tn});var Be=function Ui(e,t){if(!1===t)return!1;if("/"===e.charAt(t)&&"*"===e.charAt(t+1))for(let r=t+2;r<e.length;++r)if("*"===e.charAt(r)&&"/"===e.charAt(r+1))return r+2;return t};var we=function zi(e,t){return!1!==t&&("/"===e.charAt(t)&&"/"===e.charAt(t+1)?nt(e,t):t)};var We=function Gi(e,t){let r=null,n=t;for(;n!==r;)r=n,n=S(e,n),n=Be(e,n),n=we(e,n),n=W(e,n);return n};var Ct=function Ki(e,t){let r=null,n=t;for(;n!==r;)r=n,n=rt(e,n),n=Be(e,n),n=S(e,n);return n=we(e,n),n=W(e,n),!1!==n&&V(e,n)};var fu=function Ji(e,t){let r=e.lastIndexOf("\n");return-1===r?0:ge(e.slice(r+1).match(/^[\t ]*/u)[0],t)};var du=function qi(e,t){let r=e.match(new RegExp(`(${function lr(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(t)})+`,"gu"));return null===r?0:r.reduce((n,u)=>Math.max(n,u.length/t.length),0)};var pu=function Xi(e,t){let r=We(e,t);return!1===r?"":e.charAt(r)};var mu=function Qi(e,t){let r=!0===t||"'"===t?"'":'"',n="'"===r?'"':"'",u=0,i=0;for(let o of e)o===r?u++:o===n&&i++;return u>i?n:r};var hu=function Zi(e,t,r){for(let n=t;n<r;++n)if("\n"===e.charAt(n))return!0;return!1};var Eu=function eo(e,t,r={}){return S(e,r.backwards?t-1:t,r)!==t};var Cu=function to(e,t,r){let n='"'===t?"'":'"',i=ne(!1,e,/\\(.)|(["'])/gsu,(o,s,a)=>s===n?s:a===t?"\\"+a:a||(r&&/^[^\n\r"'0-7\\bfnrt-vx\u2028\u2029]$/u.test(s)?s:"\\"+s));return t+i+t};function no(e,t){return 2===arguments.length||"number"==typeof t?We(e,t):function ro(e,t,r){return We(e,r(t))}(...arguments)}function io(e,t){return 2===arguments.length||"number"==typeof t?Ie(e,t):function uo(e,t,r){return Ie(e,r(t))}(...arguments)}function so(e,t){return 2===arguments.length||"number"==typeof t?Ct(e,t):function oo(e,t,r){return Ct(e,r(t))}(...arguments)}function de(e,t=1){return async(...r)=>{let n=r[t]??{},u=n.plugins??[];return r[t]={...n,plugins:Array.isArray(u)?u:Object.values(u)},e(...r)}}var gu=de(ar);async function yu(e,t){let{formatted:r}=await gu(e,{...t,cursorOffset:-1});return r}async function ao(e,t){return await yu(e,t)===e}var Do=de(it,0),lo={parse:de(async function ou(e,t,r){let{text:n,options:u}=iu(e,await se(t)),i=await fe(n,u);return r&&(r.preprocessForPrint&&(i.ast=await ir(i.ast,u)),r.massage&&(i.ast=Kn(i.ast,u))),i}),formatAST:de(async function su(e,t){return t=await se(t),Ce(await He(e,t),t)}),formatDoc:de(async function au(e,t){let r=function Vr(e){let t=Object.create(null),r=new Set;return function n(i,o,s){var a,D;if("string"==typeof i)return JSON.stringify(i);if(Array.isArray(i)){let l=i.map(n).filter(Boolean);return 1===l.length?l[0]:`[${l.join(", ")}]`}if(i.type===y){let l=(null==(a=null==s?void 0:s[o+1])?void 0:a.type)===_;return i.literal?l?"literalline":"literallineWithoutBreakParent":i.hard?l?"hardline":"hardlineWithoutBreakParent":i.soft?"softline":"line"}if(i.type===_)return(null==(D=null==s?void 0:s[o-1])?void 0:D.type)===y&&s[o-1].hard?void 0:"breakParent";if(i.type===L)return"trim";if(i.type===T)return"indent("+n(i.contents)+")";if(i.type===k)return i.n===Number.NEGATIVE_INFINITY?"dedentToRoot("+n(i.contents)+")":i.n<0?"dedent("+n(i.contents)+")":"root"===i.n.type?"markAsRoot("+n(i.contents)+")":"align("+JSON.stringify(i.n)+", "+n(i.contents)+")";if(i.type===w)return"ifBreak("+n(i.breakContents)+(i.flatContents?", "+n(i.flatContents):"")+(i.groupId?(i.flatContents?"":', ""')+`, { groupId: ${u(i.groupId)} }`:"")+")";if(i.type===P){let l=[];i.negate&&l.push("negate: true"),i.groupId&&l.push(`groupId: ${u(i.groupId)}`);let p=l.length>0?`, { ${l.join(", ")} }`:"";return`indentIfBreak(${n(i.contents)}${p})`}if(i.type===B){let l=[];i.break&&"propagated"!==i.break&&l.push("shouldBreak: true"),i.id&&l.push(`id: ${u(i.id)}`);let p=l.length>0?`, { ${l.join(", ")} }`:"";return i.expandedStates?`conditionalGroup([${i.expandedStates.map(f=>n(f)).join(",")}]${p})`:`group(${n(i.contents)}${p})`}if(i.type===N)return`fill([${i.parts.map(l=>n(l)).join(", ")}])`;if(i.type===I)return"lineSuffix("+n(i.contents)+")";if(i.type===R)return"lineSuffixBoundary";if(i.type===O)return`label(${JSON.stringify(i.label)}, ${n(i.contents)})`;throw new Error("Unknown doc type "+i.type)}(ee(e));function u(i){if("symbol"!=typeof i)return JSON.stringify(String(i));if(i in t)return t[i];let o=i.description||"symbol";for(let s=0;;s++){let a=o+(s>0?` #${s}`:"");if(!r.has(a))return r.add(a),t[i]=`Symbol.for(${JSON.stringify(a)})`}}}(e),{formatted:n}=await ar(r,{...t,parser:"__js_expression"});return n}),printToDoc:de(async function Du(e,t){t=await se(t);let{ast:r}=await fe(e,t);return He(r,t)}),printDocToString:de(async function lu(e,t){return Ce(e,await se(t))})},mc=fr,postcss=__webpack_require__(631);class prettier_Parser{static unformatted=["span","bdo","em","strong","dfn","code","samp","kbd","var","cite","abbr","acronym","q","sub","sup","tt","i","b","big","small","u","s","strike","font","ins","del","pre","address","dt"];static voidElements=new Set(["img","br","hr","input","area","base","col","embed","link","meta","param","source","track","wbr"]);static blockTagsForSpacing=new Set(["p","div","ul","ol","table","li","th","td","h1","h2","h3","h4","h5","h6","blockquote","pre","section","article","aside","nav","header","footer","figure","figcaption","summary","li","tr","tbody","thead","tfoot","dl","hr","title"]);static inHeadTag=new Set(["link","meta","title"]);static inlineTarget=new Set(["span","b","strong","em","i","u","a","q","cite","code","abbr","acronym","sub","sup"]);pos;token;current_mode;tags;tag_type;token_text;last_token;last_text;token_type;Utils;indent_size;indent_level;max_char;line_char_count;input;indent_character;indent_string;brace_style;output;inBodyFiledLevel;constructor(){this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text="",this.last_token="",this.last_text="",this.token_type="",this.input="",this.output=[],this.indent_character=" ",this.indent_size=2,this.indent_string=String(this.indent_character).repeat(this.indent_size),this.brace_style="collapse",this.indent_level=0,this.max_char=9e3,this.line_char_count=0,this.inBodyFiledLevel=2,this.Utils={whitespace:"\n\r\t ".split(""),single_token:"br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed,?php,?,?=".split(","),extra_liners:"head,body,/html".split(","),in_array:function(what,arr){for(let i=0;i<arr.length;i++)if(what===arr[i])return!0;return!1}}}get_content=function(){let input_char="",content=[],space=!1;for(;"<"!==this.input.charAt(this.pos);){if(this.pos>=this.input.length)return content.length?content.join(""):["","TK_EOF"];if(input_char=this.input.charAt(this.pos),this.pos++,this.line_char_count++,this.Utils.in_array(input_char,this.Utils.whitespace))content.length&&(space=!0),this.line_char_count--;else{if(space){if(this.line_char_count>=this.max_char){content.push("\n");for(let i=0;i<this.indent_level;i++)content.push(this.indent_string);this.line_char_count=0}else content.push(" "),this.line_char_count++;space=!1}content.push(input_char)}}return content.length?content.join(""):""};get_contents_to=function(name){if(this.pos===this.input.length)return["","TK_EOF"];let reg_array,end_script,content="",reg_match=new RegExp("</"+name+"\\s*>","igm");return reg_match.lastIndex=this.pos,reg_array=reg_match.exec(this.input),end_script=null!==reg_array?reg_array.index:this.input.length,this.pos<end_script&&(content=this.input.substring(this.pos,end_script),this.pos=end_script),content};record_tag=function(tag){this.tags[tag+"count"]?(this.tags[tag+"count"]++,this.tags[tag+this.tags[tag+"count"]]=this.indent_level):(this.tags[tag+"count"]=1,this.tags[tag+this.tags[tag+"count"]]=this.indent_level),this.tags[tag+this.tags[tag+"count"]+"parent"]=this.tags.parent,this.tags.parent=tag+this.tags[tag+"count"]};retrieve_tag=function(tag){if(this.tags[tag+"count"]){let temp_parent=this.tags.parent;for(;temp_parent&&tag+this.tags[tag+"count"]!==temp_parent;)temp_parent=this.tags[temp_parent+"parent"];temp_parent&&(this.indent_level=this.tags[tag+this.tags[tag+"count"]],this.tags.parent=this.tags[temp_parent+"parent"]),delete this.tags[tag+this.tags[tag+"count"]+"parent"],delete this.tags[tag+this.tags[tag+"count"]],1==this.tags[tag+"count"]?delete this.tags[tag+"count"]:this.tags[tag+"count"]--}};get_tag=function(){let tag_start,tag_end,input_char="",content=[],space=!1;tag_start=this.pos-1;do{if(this.pos>=this.input.length)return content.length?content.join(""):["","TK_EOF"];input_char=this.input.charAt(this.pos),this.pos++,this.line_char_count++,this.Utils.in_array(input_char,this.Utils.whitespace)?(space=!0,this.line_char_count--):("'"!==input_char&&'"'!==input_char||content[1]&&"!"===content[1]||(input_char+=this.get_unformatted(input_char),space=!0),"="===input_char&&(space=!1),content.length&&"="!==content[content.length-1]&&">"!==input_char&&space&&(this.line_char_count>=this.max_char?(this.print_newline(!1,content),this.line_char_count=0):(content.push(" "),this.line_char_count++),space=!1),"<"===input_char&&(tag_start=this.pos-1),content.push(input_char))}while(">"!==input_char);let tag_index,tag_complete=content.join("");tag_index=-1!==tag_complete.indexOf(" ")?tag_complete.indexOf(" "):tag_complete.indexOf(">");let tag_check=tag_complete.substring(1,tag_index).toLowerCase();if("/"===tag_complete.charAt(tag_complete.length-2)||this.Utils.in_array(tag_check,this.Utils.single_token))this.tag_type="SINGLE";else if("script"===tag_check)this.record_tag(tag_check),this.tag_type="SCRIPT";else if("style"===tag_check)this.record_tag(tag_check),this.tag_type="STYLE";else if(this.Utils.in_array(tag_check,prettier_Parser.unformatted)){let comment=this.get_unformatted("</"+tag_check+">",tag_complete);content.push(comment),tag_start>0&&this.Utils.in_array(this.input.charAt(tag_start-1),this.Utils.whitespace)&&content.splice(0,0,this.input.charAt(tag_start-1)),tag_end=this.pos-1,this.Utils.in_array(this.input.charAt(tag_end+1),this.Utils.whitespace)&&content.push(this.input.charAt(tag_end+1)),this.tag_type="SINGLE"}else if("!"===tag_check.charAt(0))if(-1!=tag_check.indexOf("[if")){if(-1!=tag_complete.indexOf("!IE")){let comment=this.get_unformatted("--\x3e",tag_complete);content.push(comment)}this.tag_type="START"}else if(-1!=tag_check.indexOf("[endif"))this.tag_type="END",this.unindent();else if(-1!=tag_check.indexOf("[cdata[")){let comment=this.get_unformatted("]]>",tag_complete);content.push(comment),this.tag_type="SINGLE"}else{let comment=this.get_unformatted("--\x3e",tag_complete);content.push(comment),this.tag_type="SINGLE"}else"/"===tag_check.charAt(0)?(this.retrieve_tag(tag_check.substring(1)),this.tag_type="END"):(this.record_tag(tag_check),this.tag_type="START");return content.join("")};get_unformatted=function(delimiter,orig_tag){if(orig_tag&&-1!==orig_tag.toLowerCase().indexOf(delimiter))return"";let input_char="",content="",space=!0;do{if(this.pos>=this.input.length)return content;if(input_char=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(input_char,this.Utils.whitespace)){if(!space){this.line_char_count--;continue}if("\n"===input_char||"\r"===input_char){content+="\n",this.line_char_count=0;continue}}content+=input_char,this.line_char_count++,space=!0}while(-1==content.toLowerCase().indexOf(delimiter));return content};get_token=function(){let token;if("TK_TAG_SCRIPT"===this.last_token||"TK_TAG_STYLE"===this.last_token){let type=this.last_token.substr(7);return token=this.get_contents_to(type),"string"!=typeof token?token:[token,"TK_"+type]}if("CONTENT"===this.current_mode)return token=this.get_content(),"string"!=typeof token?token:[token,"TK_CONTENT"];if("TAG"===this.current_mode){if(token=this.get_tag(),"string"!=typeof token)return token;return[token,"TK_TAG_"+this.tag_type]}};get_full_indent=function(level){return(level=this.indent_level+level||0)<1?"":String(this.indent_string).repeat(level)};print_newline=function(ignore,arr){if(this.line_char_count=0,arr&&arr.length){if(!ignore)for(;this.Utils.in_array(arr[arr.length-1],this.Utils.whitespace);)arr.pop();arr.push("\n");for(let i=0;i<this.indent_level;i++)arr.push(this.indent_string)}};print_token=function(text){this.output.push(text)};indent=function(){this.indent_level++};unindent=function(){this.indent_level>0&&this.indent_level--};printer=function(source,indent_character,indent_size,max_char,brace_style){this.input=source,this.output=[],this.indent_character=indent_character,this.indent_size=indent_size,this.brace_style=brace_style,this.indent_level=0,this.max_char=max_char,this.line_char_count=0}}class PrettyHtml{static launching=async html_source=>{const multi_parser=new prettier_Parser;for(multi_parser.printer(html_source," ",2,9e3,"collapse");;){let t=multi_parser.get_token();if(multi_parser.token_text=t[0],multi_parser.token_type=t[1],"TK_EOF"===multi_parser.token_type)break;switch(/<\s*body/gi.test(multi_parser.token_text)&&(multi_parser.inBodyFiledLevel=multi_parser.indent_level+1),multi_parser.token_type){case"TK_TAG_START":{const startTagNameMatch=multi_parser.token_text.match(/^<([\w\-]+)/i),startTagName=startTagNameMatch?startTagNameMatch[1].toLowerCase():"",isBlockStart=prettier_Parser.blockTagsForSpacing.has(startTagName),isVoidStart=prettier_Parser.voidElements.has(startTagName);multi_parser.print_newline(!1,multi_parser.output),multi_parser.print_token(multi_parser.token_text),isBlockStart&&!isVoidStart&&multi_parser.output.push("\n"),multi_parser.indent(),multi_parser.current_mode="CONTENT";break}case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":multi_parser.print_newline(!1,multi_parser.output),multi_parser.print_token(multi_parser.token_text),multi_parser.current_mode="CONTENT";break;case"TK_TAG_END":{const endTagNameMatch=multi_parser.token_text.match(/^<\/([\w\-]+)/i),endTagName=endTagNameMatch?endTagNameMatch[1].toLowerCase():"",isBlockEnd=prettier_Parser.blockTagsForSpacing.has(endTagName),inHead=prettier_Parser.inHeadTag.has(endTagName);"TK_CONTENT"===multi_parser.last_token&&isBlockEnd&&multi_parser.output.push("\n"),prettier_Parser.inlineTarget.has(endTagName)||multi_parser.print_newline(!1,multi_parser.output),multi_parser.print_token(multi_parser.token_text),isBlockEnd&&(inHead||multi_parser.inBodyFiledLevel===multi_parser.indent_level&&multi_parser.print_newline(!1,multi_parser.output)),multi_parser.current_mode="CONTENT";break}case"TK_TAG_SINGLE":{let tag_check=multi_parser.token_text.match(/^\s*<([a-z]+)/i),tagName=tag_check?tag_check[1].toLowerCase():"";const isUnformatted=multi_parser.Utils.in_array(tagName,prettier_Parser.unformatted),isBlockSingle=prettier_Parser.voidElements.has(tagName),inHead=prettier_Parser.inHeadTag.has(tagName);tag_check&&multi_parser.Utils.in_array(tagName,prettier_Parser.unformatted)||multi_parser.print_newline(!1,multi_parser.output),prettier_Parser.voidElements.has(tagName)&&(multi_parser.token_text.endsWith("/>")||(multi_parser.token_text=(multi_parser.token_text.endsWith(">")?multi_parser.token_text.slice(0,-1):multi_parser.token_text).trimEnd()+" />")),multi_parser.print_token(multi_parser.token_text),isBlockSingle&&!isUnformatted&&(inHead||multi_parser.inBodyFiledLevel===multi_parser.indent_level&&multi_parser.print_newline(!1,multi_parser.output)),multi_parser.current_mode="CONTENT";break}case"TK_CONTENT":{const originalText=multi_parser.token_text;if(""!==multi_parser.token_text.trim()){if(multi_parser.last_token.startsWith("TK_TAG")){let tag_check,tagName;tag_check=multi_parser.last_text.trim().match(/^\s*<\/?([^>\s]+)/i),tagName=tag_check?tag_check[1].toLowerCase():"",prettier_Parser.inlineTarget.has(tagName)||multi_parser.output.push(multi_parser.get_full_indent(0))}else multi_parser.output.push(" ");multi_parser.print_token(originalText)}multi_parser.current_mode="TAG";break}case"TK_STYLE":case"TK_SCRIPT":if(""!==multi_parser.token_text){multi_parser.output.push("\n");let script_indent_level,text=multi_parser.token_text;script_indent_level=1;let indentation=multi_parser.get_full_indent(script_indent_level),_level=text.match(/^\s*/)[0].match(/[^\n\r]*$/)[0].split(multi_parser.indent_string).length-1,reindent=multi_parser.get_full_indent(script_indent_level-_level);text=text.replace(/^\s*/,indentation).replace(/\r\n|\r|\n/g,"\n"+reindent).replace(/\s*$/,""),text&&(multi_parser.print_token(text),multi_parser.print_newline(!0,multi_parser.output))}multi_parser.current_mode="TAG"}multi_parser.last_token=multi_parser.token_type,multi_parser.last_text=multi_parser.token_text}return multi_parser.output.join("").replace(/(<\s*title[^>]*>)\s*(.*?)\s*(<\/\s*title\s*>)/gi,(match,p1,p2,p3)=>p1+p2.trim()+p3).replace(/(style\s*=\s*)(["'])(.*?)(\2)/gi,(match,p1,p2,p3,p4)=>p1+p2+p3.trim().split(";").map(s=>s.trim()).filter(s=>""!==s).map(s=>s.replace(/;$/,"")+";").join(" ")+p4).replace(/(<\s*p[^>]*>)\s*(\&#160;)\s*(<\/\s*p\s*>)/gi,(match,p1,p2,p3)=>p1+p2.trim()+p3).replace(/([ ]*\n+)([ ]*)(<\s*\/body\s*>)/gi,(match,p1,p2,p3)=>p2+p3).replace(/([ ]*)(<\s*\/?[^>]+>)(<\s*\/a\s*>)/gi,(match,p1,p2,p3)=>{const originalBlank=p1;let anchorBlank;return anchorBlank=p1.length>2?p1.slice(0,-2):"",originalBlank+p2+"\n"+anchorBlank+p3}).replace(/<li>.*?<\/li>/gs,(match,p1,p2,p3)=>(match.split("\n").map(s=>s.trim()).filter(s=>""!==s).join(""),match.split("\n").map(s=>s.trim()).filter(s=>""!==s).join(""))).replace(/<th>.*?<\/th>/gs,(match,p1,p2,p3)=>(match.split("\n").map(s=>s.trim()).filter(s=>""!==s).join(""),match.split("\n").map(s=>s.trim()).filter(s=>""!==s).join(""))).replace(/<td>.*?<\/td>/gs,(match,p1,p2,p3)=>(match.split("\n").map(s=>s.trim()).filter(s=>""!==s).join(""),match.split("\n").map(s=>s.trim()).filter(s=>""!==s).join(""))).replace(/(\s*<\s*div[^>]*class\="[^"]*margin"\s*>)\s*(<\s*p[^>]*>)(.*?)(<\s*\/\s*p\s*>)\s*(<\s*\/\s*div\s*>)/gis,(match,p1,p2,p3,p4,p5)=>p1+p2+p3+p4+p5).replace(/(<\s*br\s*\/\s*>)(\s*)(\S)/gi,(match,p1,p2,p3)=>p1+"\n"+p2+p3).replace(/(>)(\s*<\!\-\-)/gi,(match,p1,p2,p3)=>p1+"\n"+p2)}}class PrettyCss{static launching=async source=>{let prettyResult=await mc.format(source,{parser:"css",singleQuote:!0,tabWidth:2,plugins:[postcss]});return prettyResult=prettyResult.replace(/\:\s*0px;/gis,": 0;"),prettyResult}}const UNDEFINED_CODE_POINTS=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]);var CODE_POINTS;!function(CODE_POINTS){CODE_POINTS[CODE_POINTS.EOF=-1]="EOF",CODE_POINTS[CODE_POINTS.NULL=0]="NULL",CODE_POINTS[CODE_POINTS.TABULATION=9]="TABULATION",CODE_POINTS[CODE_POINTS.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",CODE_POINTS[CODE_POINTS.LINE_FEED=10]="LINE_FEED",CODE_POINTS[CODE_POINTS.FORM_FEED=12]="FORM_FEED",CODE_POINTS[CODE_POINTS.SPACE=32]="SPACE",CODE_POINTS[CODE_POINTS.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",CODE_POINTS[CODE_POINTS.QUOTATION_MARK=34]="QUOTATION_MARK",CODE_POINTS[CODE_POINTS.AMPERSAND=38]="AMPERSAND",CODE_POINTS[CODE_POINTS.APOSTROPHE=39]="APOSTROPHE",CODE_POINTS[CODE_POINTS.HYPHEN_MINUS=45]="HYPHEN_MINUS",CODE_POINTS[CODE_POINTS.SOLIDUS=47]="SOLIDUS",CODE_POINTS[CODE_POINTS.DIGIT_0=48]="DIGIT_0",CODE_POINTS[CODE_POINTS.DIGIT_9=57]="DIGIT_9",CODE_POINTS[CODE_POINTS.SEMICOLON=59]="SEMICOLON",CODE_POINTS[CODE_POINTS.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",CODE_POINTS[CODE_POINTS.EQUALS_SIGN=61]="EQUALS_SIGN",CODE_POINTS[CODE_POINTS.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",CODE_POINTS[CODE_POINTS.QUESTION_MARK=63]="QUESTION_MARK",CODE_POINTS[CODE_POINTS.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",CODE_POINTS[CODE_POINTS.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",CODE_POINTS[CODE_POINTS.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",CODE_POINTS[CODE_POINTS.GRAVE_ACCENT=96]="GRAVE_ACCENT",CODE_POINTS[CODE_POINTS.LATIN_SMALL_A=97]="LATIN_SMALL_A",CODE_POINTS[CODE_POINTS.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"}(CODE_POINTS||(CODE_POINTS={}));const SEQUENCES_DASH_DASH="--",SEQUENCES_CDATA_START="[CDATA[",SEQUENCES_DOCTYPE="doctype",SEQUENCES_SCRIPT="script",SEQUENCES_PUBLIC="public",SEQUENCES_SYSTEM="system";function isSurrogate(cp){return cp>=55296&&cp<=57343}function isControlCodePoint(cp){return 32!==cp&&10!==cp&&13!==cp&&9!==cp&&12!==cp&&cp>=1&&cp<=31||cp>=127&&cp<=159}function isUndefinedCodePoint(cp){return cp>=64976&&cp<=65007||UNDEFINED_CODE_POINTS.has(cp)}var ERR;!function(ERR){ERR.controlCharacterInInputStream="control-character-in-input-stream",ERR.noncharacterInInputStream="noncharacter-in-input-stream",ERR.surrogateInInputStream="surrogate-in-input-stream",ERR.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",ERR.endTagWithAttributes="end-tag-with-attributes",ERR.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",ERR.unexpectedSolidusInTag="unexpected-solidus-in-tag",ERR.unexpectedNullCharacter="unexpected-null-character",ERR.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",ERR.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",ERR.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",ERR.missingEndTagName="missing-end-tag-name",ERR.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",ERR.unknownNamedCharacterReference="unknown-named-character-reference",ERR.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",ERR.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",ERR.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",ERR.eofBeforeTagName="eof-before-tag-name",ERR.eofInTag="eof-in-tag",ERR.missingAttributeValue="missing-attribute-value",ERR.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",ERR.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",ERR.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",ERR.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",ERR.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",ERR.missingDoctypePublicIdentifier="missing-doctype-public-identifier",ERR.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",ERR.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",ERR.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",ERR.cdataInHtmlContent="cdata-in-html-content",ERR.incorrectlyOpenedComment="incorrectly-opened-comment",ERR.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",ERR.eofInDoctype="eof-in-doctype",ERR.nestedComment="nested-comment",ERR.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",ERR.eofInComment="eof-in-comment",ERR.incorrectlyClosedComment="incorrectly-closed-comment",ERR.eofInCdata="eof-in-cdata",ERR.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",ERR.nullCharacterReference="null-character-reference",ERR.surrogateCharacterReference="surrogate-character-reference",ERR.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",ERR.controlCharacterReference="control-character-reference",ERR.noncharacterCharacterReference="noncharacter-character-reference",ERR.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",ERR.missingDoctypeName="missing-doctype-name",ERR.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",ERR.duplicateAttribute="duplicate-attribute",ERR.nonConformingDoctype="non-conforming-doctype",ERR.missingDoctype="missing-doctype",ERR.misplacedDoctype="misplaced-doctype",ERR.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",ERR.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",ERR.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",ERR.openElementsLeftAfterEof="open-elements-left-after-eof",ERR.abandonedHeadElementChild="abandoned-head-element-child",ERR.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",ERR.nestedNoscriptInHead="nested-noscript-in-head",ERR.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"}(ERR||(ERR={}));class Preprocessor{handler;html="";pos=-1;lastGapPos=-2;gapStack=[];skipNextNewLine=!1;lastChunkWritten=!1;endOfChunkHit=!1;bufferWaterline=65536;isEol=!1;lineStartPos=0;droppedBufferSize=0;line=1;constructor(handler){this.handler=handler}get col(){return this.pos-this.lineStartPos+Number(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(code,cpOffset){const{line,col,offset}=this,startCol=col+cpOffset,startOffset=offset+cpOffset;return{code,startLine:line,endLine:line,startCol,endCol:startCol,startOffset,endOffset:startOffset}}lastErrOffset=-1;_err(code){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(code,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(cp){if(this.pos!==this.html.length-1){const nextCp=this.html.charCodeAt(this.pos+1);if(function isSurrogatePair(cp){return cp>=56320&&cp<=57343}(nextCp))return this.pos++,this._addGap(),function getSurrogatePairCodePoint(cp1,cp2){return 1024*(cp1-55296)+9216+cp2}(cp,nextCp)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,CODE_POINTS.EOF;return this._err(ERR.surrogateInInputStream),cp}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(chunk,isLastChunk){this.html.length>0?this.html+=chunk:this.html=chunk,this.endOfChunkHit=!1,this.lastChunkWritten=isLastChunk}insertHtmlAtCurrentPos(chunk){this.html=this.html.substring(0,this.pos+1)+chunk+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(pattern,caseSensitive){if(this.pos+pattern.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(caseSensitive)return this.html.startsWith(pattern,this.pos);for(let i=0;i<pattern.length;i++){if((32|this.html.charCodeAt(this.pos+i))!==pattern.charCodeAt(i))return!1}return!0}peek(offset){const pos=this.pos+offset;if(pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,CODE_POINTS.EOF;const code=this.html.charCodeAt(pos);return code===CODE_POINTS.CARRIAGE_RETURN?CODE_POINTS.LINE_FEED:code}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,CODE_POINTS.EOF;let cp=this.html.charCodeAt(this.pos);if(cp===CODE_POINTS.CARRIAGE_RETURN)return this.isEol=!0,this.skipNextNewLine=!0,CODE_POINTS.LINE_FEED;if(cp===CODE_POINTS.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine))return this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance();this.skipNextNewLine=!1,isSurrogate(cp)&&(cp=this._processSurrogate(cp));return null===this.handler.onParseError||cp>31&&cp<127||cp===CODE_POINTS.LINE_FEED||cp===CODE_POINTS.CARRIAGE_RETURN||cp>159&&cp<64976||this._checkForProblematicCharacters(cp),cp}_checkForProblematicCharacters(cp){isControlCodePoint(cp)?this._err(ERR.controlCharacterInInputStream):isUndefinedCodePoint(cp)&&this._err(ERR.noncharacterInInputStream)}retreat(count){for(this.pos-=count;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var TokenType;function getTokenAttr(token,attrName){for(let i=token.attrs.length-1;i>=0;i--)if(token.attrs[i].name===attrName)return token.attrs[i].value;return null}!function(TokenType){TokenType[TokenType.CHARACTER=0]="CHARACTER",TokenType[TokenType.NULL_CHARACTER=1]="NULL_CHARACTER",TokenType[TokenType.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",TokenType[TokenType.START_TAG=3]="START_TAG",TokenType[TokenType.END_TAG=4]="END_TAG",TokenType[TokenType.COMMENT=5]="COMMENT",TokenType[TokenType.DOCTYPE=6]="DOCTYPE",TokenType[TokenType.EOF=7]="EOF",TokenType[TokenType.HIBERNATION=8]="HIBERNATION"}(TokenType||(TokenType={}));const decode_data_html_htmlDecodeTree=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(c=>c.charCodeAt(0)));var _a;const decodeMap=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);_a=String.fromCodePoint;function replaceCodePoint(codePoint){var _a;return codePoint>=55296&&codePoint<=57343||codePoint>1114111?65533:null!==(_a=decodeMap.get(codePoint))&&void 0!==_a?_a:codePoint}var CharCodes;!function(CharCodes){CharCodes[CharCodes.NUM=35]="NUM",CharCodes[CharCodes.SEMI=59]="SEMI",CharCodes[CharCodes.EQUALS=61]="EQUALS",CharCodes[CharCodes.ZERO=48]="ZERO",CharCodes[CharCodes.NINE=57]="NINE",CharCodes[CharCodes.LOWER_A=97]="LOWER_A",CharCodes[CharCodes.LOWER_F=102]="LOWER_F",CharCodes[CharCodes.LOWER_X=120]="LOWER_X",CharCodes[CharCodes.LOWER_Z=122]="LOWER_Z",CharCodes[CharCodes.UPPER_A=65]="UPPER_A",CharCodes[CharCodes.UPPER_F=70]="UPPER_F",CharCodes[CharCodes.UPPER_Z=90]="UPPER_Z"}(CharCodes||(CharCodes={}));var BinTrieFlags,EntityDecoderState,DecodingMode;function isNumber(code){return code>=CharCodes.ZERO&&code<=CharCodes.NINE}function isHexadecimalCharacter(code){return code>=CharCodes.UPPER_A&&code<=CharCodes.UPPER_F||code>=CharCodes.LOWER_A&&code<=CharCodes.LOWER_F}function isEntityInAttributeInvalidEnd(code){return code===CharCodes.EQUALS||function isAsciiAlphaNumeric(code){return code>=CharCodes.UPPER_A&&code<=CharCodes.UPPER_Z||code>=CharCodes.LOWER_A&&code<=CharCodes.LOWER_Z||isNumber(code)}(code)}!function(BinTrieFlags){BinTrieFlags[BinTrieFlags.VALUE_LENGTH=49152]="VALUE_LENGTH",BinTrieFlags[BinTrieFlags.BRANCH_LENGTH=16256]="BRANCH_LENGTH",BinTrieFlags[BinTrieFlags.JUMP_TABLE=127]="JUMP_TABLE"}(BinTrieFlags||(BinTrieFlags={})),function(EntityDecoderState){EntityDecoderState[EntityDecoderState.EntityStart=0]="EntityStart",EntityDecoderState[EntityDecoderState.NumericStart=1]="NumericStart",EntityDecoderState[EntityDecoderState.NumericDecimal=2]="NumericDecimal",EntityDecoderState[EntityDecoderState.NumericHex=3]="NumericHex",EntityDecoderState[EntityDecoderState.NamedEntity=4]="NamedEntity"}(EntityDecoderState||(EntityDecoderState={})),function(DecodingMode){DecodingMode[DecodingMode.Legacy=0]="Legacy",DecodingMode[DecodingMode.Strict=1]="Strict",DecodingMode[DecodingMode.Attribute=2]="Attribute"}(DecodingMode||(DecodingMode={}));class EntityDecoder{constructor(decodeTree,emitCodePoint,errors){this.decodeTree=decodeTree,this.emitCodePoint=emitCodePoint,this.errors=errors,this.state=EntityDecoderState.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=DecodingMode.Strict}startEntity(decodeMode){this.decodeMode=decodeMode,this.state=EntityDecoderState.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(input,offset){switch(this.state){case EntityDecoderState.EntityStart:return input.charCodeAt(offset)===CharCodes.NUM?(this.state=EntityDecoderState.NumericStart,this.consumed+=1,this.stateNumericStart(input,offset+1)):(this.state=EntityDecoderState.NamedEntity,this.stateNamedEntity(input,offset));case EntityDecoderState.NumericStart:return this.stateNumericStart(input,offset);case EntityDecoderState.NumericDecimal:return this.stateNumericDecimal(input,offset);case EntityDecoderState.NumericHex:return this.stateNumericHex(input,offset);case EntityDecoderState.NamedEntity:return this.stateNamedEntity(input,offset)}}stateNumericStart(input,offset){return offset>=input.length?-1:(32|input.charCodeAt(offset))===CharCodes.LOWER_X?(this.state=EntityDecoderState.NumericHex,this.consumed+=1,this.stateNumericHex(input,offset+1)):(this.state=EntityDecoderState.NumericDecimal,this.stateNumericDecimal(input,offset))}addToNumericResult(input,start,end,base){if(start!==end){const digitCount=end-start;this.result=this.result*Math.pow(base,digitCount)+Number.parseInt(input.substr(start,digitCount),base),this.consumed+=digitCount}}stateNumericHex(input,offset){const startIndex=offset;for(;offset<input.length;){const char=input.charCodeAt(offset);if(!isNumber(char)&&!isHexadecimalCharacter(char))return this.addToNumericResult(input,startIndex,offset,16),this.emitNumericEntity(char,3);offset+=1}return this.addToNumericResult(input,startIndex,offset,16),-1}stateNumericDecimal(input,offset){const startIndex=offset;for(;offset<input.length;){const char=input.charCodeAt(offset);if(!isNumber(char))return this.addToNumericResult(input,startIndex,offset,10),this.emitNumericEntity(char,2);offset+=1}return this.addToNumericResult(input,startIndex,offset,10),-1}emitNumericEntity(lastCp,expectedLength){var _a;if(this.consumed<=expectedLength)return null===(_a=this.errors)||void 0===_a||_a.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(lastCp===CharCodes.SEMI)this.consumed+=1;else if(this.decodeMode===DecodingMode.Strict)return 0;return this.emitCodePoint(replaceCodePoint(this.result),this.consumed),this.errors&&(lastCp!==CharCodes.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(input,offset){const{decodeTree}=this;let current=decodeTree[this.treeIndex],valueLength=(current&BinTrieFlags.VALUE_LENGTH)>>14;for(;offset<input.length;offset++,this.excess++){const char=input.charCodeAt(offset);if(this.treeIndex=determineBranch(decodeTree,current,this.treeIndex+Math.max(1,valueLength),char),this.treeIndex<0)return 0===this.result||this.decodeMode===DecodingMode.Attribute&&(0===valueLength||isEntityInAttributeInvalidEnd(char))?0:this.emitNotTerminatedNamedEntity();if(current=decodeTree[this.treeIndex],valueLength=(current&BinTrieFlags.VALUE_LENGTH)>>14,0!==valueLength){if(char===CharCodes.SEMI)return this.emitNamedEntityData(this.treeIndex,valueLength,this.consumed+this.excess);this.decodeMode!==DecodingMode.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var _a;const{result,decodeTree}=this,valueLength=(decodeTree[result]&BinTrieFlags.VALUE_LENGTH)>>14;return this.emitNamedEntityData(result,valueLength,this.consumed),null===(_a=this.errors)||void 0===_a||_a.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(result,valueLength,consumed){const{decodeTree}=this;return this.emitCodePoint(1===valueLength?decodeTree[result]&~BinTrieFlags.VALUE_LENGTH:decodeTree[result+1],consumed),3===valueLength&&this.emitCodePoint(decodeTree[result+2],consumed),consumed}end(){var _a;switch(this.state){case EntityDecoderState.NamedEntity:return 0===this.result||this.decodeMode===DecodingMode.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case EntityDecoderState.NumericDecimal:return this.emitNumericEntity(0,2);case EntityDecoderState.NumericHex:return this.emitNumericEntity(0,3);case EntityDecoderState.NumericStart:return null===(_a=this.errors)||void 0===_a||_a.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case EntityDecoderState.EntityStart:return 0}}}function determineBranch(decodeTree,current,nodeIndex,char){const branchCount=(current&BinTrieFlags.BRANCH_LENGTH)>>7,jumpOffset=current&BinTrieFlags.JUMP_TABLE;if(0===branchCount)return 0!==jumpOffset&&char===jumpOffset?nodeIndex:-1;if(jumpOffset){const value=char-jumpOffset;return value<0||value>=branchCount?-1:decodeTree[nodeIndex+value]-1}let lo=nodeIndex,hi=lo+branchCount-1;for(;lo<=hi;){const mid=lo+hi>>>1,midValue=decodeTree[mid];if(midValue<char)lo=mid+1;else{if(!(midValue>char))return decodeTree[mid+branchCount];hi=mid-1}}return-1}var NS,ATTRS,DOCUMENT_MODE,TAG_NAMES,TAG_ID;!function(NS){NS.HTML="http://www.w3.org/1999/xhtml",NS.MATHML="http://www.w3.org/1998/Math/MathML",NS.SVG="http://www.w3.org/2000/svg",NS.XLINK="http://www.w3.org/1999/xlink",NS.XML="http://www.w3.org/XML/1998/namespace",NS.XMLNS="http://www.w3.org/2000/xmlns/"}(NS||(NS={})),function(ATTRS){ATTRS.TYPE="type",ATTRS.ACTION="action",ATTRS.ENCODING="encoding",ATTRS.PROMPT="prompt",ATTRS.NAME="name",ATTRS.COLOR="color",ATTRS.FACE="face",ATTRS.SIZE="size"}(ATTRS||(ATTRS={})),function(DOCUMENT_MODE){DOCUMENT_MODE.NO_QUIRKS="no-quirks",DOCUMENT_MODE.QUIRKS="quirks",DOCUMENT_MODE.LIMITED_QUIRKS="limited-quirks"}(DOCUMENT_MODE||(DOCUMENT_MODE={})),function(TAG_NAMES){TAG_NAMES.A="a",TAG_NAMES.ADDRESS="address",TAG_NAMES.ANNOTATION_XML="annotation-xml",TAG_NAMES.APPLET="applet",TAG_NAMES.AREA="area",TAG_NAMES.ARTICLE="article",TAG_NAMES.ASIDE="aside",TAG_NAMES.B="b",TAG_NAMES.BASE="base",TAG_NAMES.BASEFONT="basefont",TAG_NAMES.BGSOUND="bgsound",TAG_NAMES.BIG="big",TAG_NAMES.BLOCKQUOTE="blockquote",TAG_NAMES.BODY="body",TAG_NAMES.BR="br",TAG_NAMES.BUTTON="button",TAG_NAMES.CAPTION="caption",TAG_NAMES.CENTER="center",TAG_NAMES.CODE="code",TAG_NAMES.COL="col",TAG_NAMES.COLGROUP="colgroup",TAG_NAMES.DD="dd",TAG_NAMES.DESC="desc",TAG_NAMES.DETAILS="details",TAG_NAMES.DIALOG="dialog",TAG_NAMES.DIR="dir",TAG_NAMES.DIV="div",TAG_NAMES.DL="dl",TAG_NAMES.DT="dt",TAG_NAMES.EM="em",TAG_NAMES.EMBED="embed",TAG_NAMES.FIELDSET="fieldset",TAG_NAMES.FIGCAPTION="figcaption",TAG_NAMES.FIGURE="figure",TAG_NAMES.FONT="font",TAG_NAMES.FOOTER="footer",TAG_NAMES.FOREIGN_OBJECT="foreignObject",TAG_NAMES.FORM="form",TAG_NAMES.FRAME="frame",TAG_NAMES.FRAMESET="frameset",TAG_NAMES.H1="h1",TAG_NAMES.H2="h2",TAG_NAMES.H3="h3",TAG_NAMES.H4="h4",TAG_NAMES.H5="h5",TAG_NAMES.H6="h6",TAG_NAMES.HEAD="head",TAG_NAMES.HEADER="header",TAG_NAMES.HGROUP="hgroup",TAG_NAMES.HR="hr",TAG_NAMES.HTML="html",TAG_NAMES.I="i",TAG_NAMES.IMG="img",TAG_NAMES.IMAGE="image",TAG_NAMES.INPUT="input",TAG_NAMES.IFRAME="iframe",TAG_NAMES.KEYGEN="keygen",TAG_NAMES.LABEL="label",TAG_NAMES.LI="li",TAG_NAMES.LINK="link",TAG_NAMES.LISTING="listing",TAG_NAMES.MAIN="main",TAG_NAMES.MALIGNMARK="malignmark",TAG_NAMES.MARQUEE="marquee",TAG_NAMES.MATH="math",TAG_NAMES.MENU="menu",TAG_NAMES.META="meta",TAG_NAMES.MGLYPH="mglyph",TAG_NAMES.MI="mi",TAG_NAMES.MO="mo",TAG_NAMES.MN="mn",TAG_NAMES.MS="ms",TAG_NAMES.MTEXT="mtext",TAG_NAMES.NAV="nav",TAG_NAMES.NOBR="nobr",TAG_NAMES.NOFRAMES="noframes",TAG_NAMES.NOEMBED="noembed",TAG_NAMES.NOSCRIPT="noscript",TAG_NAMES.OBJECT="object",TAG_NAMES.OL="ol",TAG_NAMES.OPTGROUP="optgroup",TAG_NAMES.OPTION="option",TAG_NAMES.P="p",TAG_NAMES.PARAM="param",TAG_NAMES.PLAINTEXT="plaintext",TAG_NAMES.PRE="pre",TAG_NAMES.RB="rb",TAG_NAMES.RP="rp",TAG_NAMES.RT="rt",TAG_NAMES.RTC="rtc",TAG_NAMES.RUBY="ruby",TAG_NAMES.S="s",TAG_NAMES.SCRIPT="script",TAG_NAMES.SEARCH="search",TAG_NAMES.SECTION="section",TAG_NAMES.SELECT="select",TAG_NAMES.SOURCE="source",TAG_NAMES.SMALL="small",TAG_NAMES.SPAN="span",TAG_NAMES.STRIKE="strike",TAG_NAMES.STRONG="strong",TAG_NAMES.STYLE="style",TAG_NAMES.SUB="sub",TAG_NAMES.SUMMARY="summary",TAG_NAMES.SUP="sup",TAG_NAMES.TABLE="table",TAG_NAMES.TBODY="tbody",TAG_NAMES.TEMPLATE="template",TAG_NAMES.TEXTAREA="textarea",TAG_NAMES.TFOOT="tfoot",TAG_NAMES.TD="td",TAG_NAMES.TH="th",TAG_NAMES.THEAD="thead",TAG_NAMES.TITLE="title",TAG_NAMES.TR="tr",TAG_NAMES.TRACK="track",TAG_NAMES.TT="tt",TAG_NAMES.U="u",TAG_NAMES.UL="ul",TAG_NAMES.SVG="svg",TAG_NAMES.VAR="var",TAG_NAMES.WBR="wbr",TAG_NAMES.XMP="xmp"}(TAG_NAMES||(TAG_NAMES={})),function(TAG_ID){TAG_ID[TAG_ID.UNKNOWN=0]="UNKNOWN",TAG_ID[TAG_ID.A=1]="A",TAG_ID[TAG_ID.ADDRESS=2]="ADDRESS",TAG_ID[TAG_ID.ANNOTATION_XML=3]="ANNOTATION_XML",TAG_ID[TAG_ID.APPLET=4]="APPLET",TAG_ID[TAG_ID.AREA=5]="AREA",TAG_ID[TAG_ID.ARTICLE=6]="ARTICLE",TAG_ID[TAG_ID.ASIDE=7]="ASIDE",TAG_ID[TAG_ID.B=8]="B",TAG_ID[TAG_ID.BASE=9]="BASE",TAG_ID[TAG_ID.BASEFONT=10]="BASEFONT",TAG_ID[TAG_ID.BGSOUND=11]="BGSOUND",TAG_ID[TAG_ID.BIG=12]="BIG",TAG_ID[TAG_ID.BLOCKQUOTE=13]="BLOCKQUOTE",TAG_ID[TAG_ID.BODY=14]="BODY",TAG_ID[TAG_ID.BR=15]="BR",TAG_ID[TAG_ID.BUTTON=16]="BUTTON",TAG_ID[TAG_ID.CAPTION=17]="CAPTION",TAG_ID[TAG_ID.CENTER=18]="CENTER",TAG_ID[TAG_ID.CODE=19]="CODE",TAG_ID[TAG_ID.COL=20]="COL",TAG_ID[TAG_ID.COLGROUP=21]="COLGROUP",TAG_ID[TAG_ID.DD=22]="DD",TAG_ID[TAG_ID.DESC=23]="DESC",TAG_ID[TAG_ID.DETAILS=24]="DETAILS",TAG_ID[TAG_ID.DIALOG=25]="DIALOG",TAG_ID[TAG_ID.DIR=26]="DIR",TAG_ID[TAG_ID.DIV=27]="DIV",TAG_ID[TAG_ID.DL=28]="DL",TAG_ID[TAG_ID.DT=29]="DT",TAG_ID[TAG_ID.EM=30]="EM",TAG_ID[TAG_ID.EMBED=31]="EMBED",TAG_ID[TAG_ID.FIELDSET=32]="FIELDSET",TAG_ID[TAG_ID.FIGCAPTION=33]="FIGCAPTION",TAG_ID[TAG_ID.FIGURE=34]="FIGURE",TAG_ID[TAG_ID.FONT=35]="FONT",TAG_ID[TAG_ID.FOOTER=36]="FOOTER",TAG_ID[TAG_ID.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",TAG_ID[TAG_ID.FORM=38]="FORM",TAG_ID[TAG_ID.FRAME=39]="FRAME",TAG_ID[TAG_ID.FRAMESET=40]="FRAMESET",TAG_ID[TAG_ID.H1=41]="H1",TAG_ID[TAG_ID.H2=42]="H2",TAG_ID[TAG_ID.H3=43]="H3",TAG_ID[TAG_ID.H4=44]="H4",TAG_ID[TAG_ID.H5=45]="H5",TAG_ID[TAG_ID.H6=46]="H6",TAG_ID[TAG_ID.HEAD=47]="HEAD",TAG_ID[TAG_ID.HEADER=48]="HEADER",TAG_ID[TAG_ID.HGROUP=49]="HGROUP",TAG_ID[TAG_ID.HR=50]="HR",TAG_ID[TAG_ID.HTML=51]="HTML",TAG_ID[TAG_ID.I=52]="I",TAG_ID[TAG_ID.IMG=53]="IMG",TAG_ID[TAG_ID.IMAGE=54]="IMAGE",TAG_ID[TAG_ID.INPUT=55]="INPUT",TAG_ID[TAG_ID.IFRAME=56]="IFRAME",TAG_ID[TAG_ID.KEYGEN=57]="KEYGEN",TAG_ID[TAG_ID.LABEL=58]="LABEL",TAG_ID[TAG_ID.LI=59]="LI",TAG_ID[TAG_ID.LINK=60]="LINK",TAG_ID[TAG_ID.LISTING=61]="LISTING",TAG_ID[TAG_ID.MAIN=62]="MAIN",TAG_ID[TAG_ID.MALIGNMARK=63]="MALIGNMARK",TAG_ID[TAG_ID.MARQUEE=64]="MARQUEE",TAG_ID[TAG_ID.MATH=65]="MATH",TAG_ID[TAG_ID.MENU=66]="MENU",TAG_ID[TAG_ID.META=67]="META",TAG_ID[TAG_ID.MGLYPH=68]="MGLYPH",TAG_ID[TAG_ID.MI=69]="MI",TAG_ID[TAG_ID.MO=70]="MO",TAG_ID[TAG_ID.MN=71]="MN",TAG_ID[TAG_ID.MS=72]="MS",TAG_ID[TAG_ID.MTEXT=73]="MTEXT",TAG_ID[TAG_ID.NAV=74]="NAV",TAG_ID[TAG_ID.NOBR=75]="NOBR",TAG_ID[TAG_ID.NOFRAMES=76]="NOFRAMES",TAG_ID[TAG_ID.NOEMBED=77]="NOEMBED",TAG_ID[TAG_ID.NOSCRIPT=78]="NOSCRIPT",TAG_ID[TAG_ID.OBJECT=79]="OBJECT",TAG_ID[TAG_ID.OL=80]="OL",TAG_ID[TAG_ID.OPTGROUP=81]="OPTGROUP",TAG_ID[TAG_ID.OPTION=82]="OPTION",TAG_ID[TAG_ID.P=83]="P",TAG_ID[TAG_ID.PARAM=84]="PARAM",TAG_ID[TAG_ID.PLAINTEXT=85]="PLAINTEXT",TAG_ID[TAG_ID.PRE=86]="PRE",TAG_ID[TAG_ID.RB=87]="RB",TAG_ID[TAG_ID.RP=88]="RP",TAG_ID[TAG_ID.RT=89]="RT",TAG_ID[TAG_ID.RTC=90]="RTC",TAG_ID[TAG_ID.RUBY=91]="RUBY",TAG_ID[TAG_ID.S=92]="S",TAG_ID[TAG_ID.SCRIPT=93]="SCRIPT",TAG_ID[TAG_ID.SEARCH=94]="SEARCH",TAG_ID[TAG_ID.SECTION=95]="SECTION",TAG_ID[TAG_ID.SELECT=96]="SELECT",TAG_ID[TAG_ID.SOURCE=97]="SOURCE",TAG_ID[TAG_ID.SMALL=98]="SMALL",TAG_ID[TAG_ID.SPAN=99]="SPAN",TAG_ID[TAG_ID.STRIKE=100]="STRIKE",TAG_ID[TAG_ID.STRONG=101]="STRONG",TAG_ID[TAG_ID.STYLE=102]="STYLE",TAG_ID[TAG_ID.SUB=103]="SUB",TAG_ID[TAG_ID.SUMMARY=104]="SUMMARY",TAG_ID[TAG_ID.SUP=105]="SUP",TAG_ID[TAG_ID.TABLE=106]="TABLE",TAG_ID[TAG_ID.TBODY=107]="TBODY",TAG_ID[TAG_ID.TEMPLATE=108]="TEMPLATE",TAG_ID[TAG_ID.TEXTAREA=109]="TEXTAREA",TAG_ID[TAG_ID.TFOOT=110]="TFOOT",TAG_ID[TAG_ID.TD=111]="TD",TAG_ID[TAG_ID.TH=112]="TH",TAG_ID[TAG_ID.THEAD=113]="THEAD",TAG_ID[TAG_ID.TITLE=114]="TITLE",TAG_ID[TAG_ID.TR=115]="TR",TAG_ID[TAG_ID.TRACK=116]="TRACK",TAG_ID[TAG_ID.TT=117]="TT",TAG_ID[TAG_ID.U=118]="U",TAG_ID[TAG_ID.UL=119]="UL",TAG_ID[TAG_ID.SVG=120]="SVG",TAG_ID[TAG_ID.VAR=121]="VAR",TAG_ID[TAG_ID.WBR=122]="WBR",TAG_ID[TAG_ID.XMP=123]="XMP"}(TAG_ID||(TAG_ID={}));const TAG_NAME_TO_ID=new Map([[TAG_NAMES.A,TAG_ID.A],[TAG_NAMES.ADDRESS,TAG_ID.ADDRESS],[TAG_NAMES.ANNOTATION_XML,TAG_ID.ANNOTATION_XML],[TAG_NAMES.APPLET,TAG_ID.APPLET],[TAG_NAMES.AREA,TAG_ID.AREA],[TAG_NAMES.ARTICLE,TAG_ID.ARTICLE],[TAG_NAMES.ASIDE,TAG_ID.ASIDE],[TAG_NAMES.B,TAG_ID.B],[TAG_NAMES.BASE,TAG_ID.BASE],[TAG_NAMES.BASEFONT,TAG_ID.BASEFONT],[TAG_NAMES.BGSOUND,TAG_ID.BGSOUND],[TAG_NAMES.BIG,TAG_ID.BIG],[TAG_NAMES.BLOCKQUOTE,TAG_ID.BLOCKQUOTE],[TAG_NAMES.BODY,TAG_ID.BODY],[TAG_NAMES.BR,TAG_ID.BR],[TAG_NAMES.BUTTON,TAG_ID.BUTTON],[TAG_NAMES.CAPTION,TAG_ID.CAPTION],[TAG_NAMES.CENTER,TAG_ID.CENTER],[TAG_NAMES.CODE,TAG_ID.CODE],[TAG_NAMES.COL,TAG_ID.COL],[TAG_NAMES.COLGROUP,TAG_ID.COLGROUP],[TAG_NAMES.DD,TAG_ID.DD],[TAG_NAMES.DESC,TAG_ID.DESC],[TAG_NAMES.DETAILS,TAG_ID.DETAILS],[TAG_NAMES.DIALOG,TAG_ID.DIALOG],[TAG_NAMES.DIR,TAG_ID.DIR],[TAG_NAMES.DIV,TAG_ID.DIV],[TAG_NAMES.DL,TAG_ID.DL],[TAG_NAMES.DT,TAG_ID.DT],[TAG_NAMES.EM,TAG_ID.EM],[TAG_NAMES.EMBED,TAG_ID.EMBED],[TAG_NAMES.FIELDSET,TAG_ID.FIELDSET],[TAG_NAMES.FIGCAPTION,TAG_ID.FIGCAPTION],[TAG_NAMES.FIGURE,TAG_ID.FIGURE],[TAG_NAMES.FONT,TAG_ID.FONT],[TAG_NAMES.FOOTER,TAG_ID.FOOTER],[TAG_NAMES.FOREIGN_OBJECT,TAG_ID.FOREIGN_OBJECT],[TAG_NAMES.FORM,TAG_ID.FORM],[TAG_NAMES.FRAME,TAG_ID.FRAME],[TAG_NAMES.FRAMESET,TAG_ID.FRAMESET],[TAG_NAMES.H1,TAG_ID.H1],[TAG_NAMES.H2,TAG_ID.H2],[TAG_NAMES.H3,TAG_ID.H3],[TAG_NAMES.H4,TAG_ID.H4],[TAG_NAMES.H5,TAG_ID.H5],[TAG_NAMES.H6,TAG_ID.H6],[TAG_NAMES.HEAD,TAG_ID.HEAD],[TAG_NAMES.HEADER,TAG_ID.HEADER],[TAG_NAMES.HGROUP,TAG_ID.HGROUP],[TAG_NAMES.HR,TAG_ID.HR],[TAG_NAMES.HTML,TAG_ID.HTML],[TAG_NAMES.I,TAG_ID.I],[TAG_NAMES.IMG,TAG_ID.IMG],[TAG_NAMES.IMAGE,TAG_ID.IMAGE],[TAG_NAMES.INPUT,TAG_ID.INPUT],[TAG_NAMES.IFRAME,TAG_ID.IFRAME],[TAG_NAMES.KEYGEN,TAG_ID.KEYGEN],[TAG_NAMES.LABEL,TAG_ID.LABEL],[TAG_NAMES.LI,TAG_ID.LI],[TAG_NAMES.LINK,TAG_ID.LINK],[TAG_NAMES.LISTING,TAG_ID.LISTING],[TAG_NAMES.MAIN,TAG_ID.MAIN],[TAG_NAMES.MALIGNMARK,TAG_ID.MALIGNMARK],[TAG_NAMES.MARQUEE,TAG_ID.MARQUEE],[TAG_NAMES.MATH,TAG_ID.MATH],[TAG_NAMES.MENU,TAG_ID.MENU],[TAG_NAMES.META,TAG_ID.META],[TAG_NAMES.MGLYPH,TAG_ID.MGLYPH],[TAG_NAMES.MI,TAG_ID.MI],[TAG_NAMES.MO,TAG_ID.MO],[TAG_NAMES.MN,TAG_ID.MN],[TAG_NAMES.MS,TAG_ID.MS],[TAG_NAMES.MTEXT,TAG_ID.MTEXT],[TAG_NAMES.NAV,TAG_ID.NAV],[TAG_NAMES.NOBR,TAG_ID.NOBR],[TAG_NAMES.NOFRAMES,TAG_ID.NOFRAMES],[TAG_NAMES.NOEMBED,TAG_ID.NOEMBED],[TAG_NAMES.NOSCRIPT,TAG_ID.NOSCRIPT],[TAG_NAMES.OBJECT,TAG_ID.OBJECT],[TAG_NAMES.OL,TAG_ID.OL],[TAG_NAMES.OPTGROUP,TAG_ID.OPTGROUP],[TAG_NAMES.OPTION,TAG_ID.OPTION],[TAG_NAMES.P,TAG_ID.P],[TAG_NAMES.PARAM,TAG_ID.PARAM],[TAG_NAMES.PLAINTEXT,TAG_ID.PLAINTEXT],[TAG_NAMES.PRE,TAG_ID.PRE],[TAG_NAMES.RB,TAG_ID.RB],[TAG_NAMES.RP,TAG_ID.RP],[TAG_NAMES.RT,TAG_ID.RT],[TAG_NAMES.RTC,TAG_ID.RTC],[TAG_NAMES.RUBY,TAG_ID.RUBY],[TAG_NAMES.S,TAG_ID.S],[TAG_NAMES.SCRIPT,TAG_ID.SCRIPT],[TAG_NAMES.SEARCH,TAG_ID.SEARCH],[TAG_NAMES.SECTION,TAG_ID.SECTION],[TAG_NAMES.SELECT,TAG_ID.SELECT],[TAG_NAMES.SOURCE,TAG_ID.SOURCE],[TAG_NAMES.SMALL,TAG_ID.SMALL],[TAG_NAMES.SPAN,TAG_ID.SPAN],[TAG_NAMES.STRIKE,TAG_ID.STRIKE],[TAG_NAMES.STRONG,TAG_ID.STRONG],[TAG_NAMES.STYLE,TAG_ID.STYLE],[TAG_NAMES.SUB,TAG_ID.SUB],[TAG_NAMES.SUMMARY,TAG_ID.SUMMARY],[TAG_NAMES.SUP,TAG_ID.SUP],[TAG_NAMES.TABLE,TAG_ID.TABLE],[TAG_NAMES.TBODY,TAG_ID.TBODY],[TAG_NAMES.TEMPLATE,TAG_ID.TEMPLATE],[TAG_NAMES.TEXTAREA,TAG_ID.TEXTAREA],[TAG_NAMES.TFOOT,TAG_ID.TFOOT],[TAG_NAMES.TD,TAG_ID.TD],[TAG_NAMES.TH,TAG_ID.TH],[TAG_NAMES.THEAD,TAG_ID.THEAD],[TAG_NAMES.TITLE,TAG_ID.TITLE],[TAG_NAMES.TR,TAG_ID.TR],[TAG_NAMES.TRACK,TAG_ID.TRACK],[TAG_NAMES.TT,TAG_ID.TT],[TAG_NAMES.U,TAG_ID.U],[TAG_NAMES.UL,TAG_ID.UL],[TAG_NAMES.SVG,TAG_ID.SVG],[TAG_NAMES.VAR,TAG_ID.VAR],[TAG_NAMES.WBR,TAG_ID.WBR],[TAG_NAMES.XMP,TAG_ID.XMP]]);function getTagID(tagName){return TAG_NAME_TO_ID.get(tagName)??TAG_ID.UNKNOWN}const html_$=TAG_ID,SPECIAL_ELEMENTS={[NS.HTML]:new Set([html_$.ADDRESS,html_$.APPLET,html_$.AREA,html_$.ARTICLE,html_$.ASIDE,html_$.BASE,html_$.BASEFONT,html_$.BGSOUND,html_$.BLOCKQUOTE,html_$.BODY,html_$.BR,html_$.BUTTON,html_$.CAPTION,html_$.CENTER,html_$.COL,html_$.COLGROUP,html_$.DD,html_$.DETAILS,html_$.DIR,html_$.DIV,html_$.DL,html_$.DT,html_$.EMBED,html_$.FIELDSET,html_$.FIGCAPTION,html_$.FIGURE,html_$.FOOTER,html_$.FORM,html_$.FRAME,html_$.FRAMESET,html_$.H1,html_$.H2,html_$.H3,html_$.H4,html_$.H5,html_$.H6,html_$.HEAD,html_$.HEADER,html_$.HGROUP,html_$.HR,html_$.HTML,html_$.IFRAME,html_$.IMG,html_$.INPUT,html_$.LI,html_$.LINK,html_$.LISTING,html_$.MAIN,html_$.MARQUEE,html_$.MENU,html_$.META,html_$.NAV,html_$.NOEMBED,html_$.NOFRAMES,html_$.NOSCRIPT,html_$.OBJECT,html_$.OL,html_$.P,html_$.PARAM,html_$.PLAINTEXT,html_$.PRE,html_$.SCRIPT,html_$.SECTION,html_$.SELECT,html_$.SOURCE,html_$.STYLE,html_$.SUMMARY,html_$.TABLE,html_$.TBODY,html_$.TD,html_$.TEMPLATE,html_$.TEXTAREA,html_$.TFOOT,html_$.TH,html_$.THEAD,html_$.TITLE,html_$.TR,html_$.TRACK,html_$.UL,html_$.WBR,html_$.XMP]),[NS.MATHML]:new Set([html_$.MI,html_$.MO,html_$.MN,html_$.MS,html_$.MTEXT,html_$.ANNOTATION_XML]),[NS.SVG]:new Set([html_$.TITLE,html_$.FOREIGN_OBJECT,html_$.DESC]),[NS.XLINK]:new Set,[NS.XML]:new Set,[NS.XMLNS]:new Set},NUMBERED_HEADERS=new Set([html_$.H1,html_$.H2,html_$.H3,html_$.H4,html_$.H5,html_$.H6]),UNESCAPED_TEXT=new Set([TAG_NAMES.STYLE,TAG_NAMES.SCRIPT,TAG_NAMES.XMP,TAG_NAMES.IFRAME,TAG_NAMES.NOEMBED,TAG_NAMES.NOFRAMES,TAG_NAMES.PLAINTEXT]);const TokenizerMode_RCDATA=1,TokenizerMode_RAWTEXT=2,TokenizerMode_SCRIPT_DATA=3,TokenizerMode_PLAINTEXT=4;function isAsciiUpper(cp){return cp>=CODE_POINTS.LATIN_CAPITAL_A&&cp<=CODE_POINTS.LATIN_CAPITAL_Z}function isAsciiLetter(cp){return function isAsciiLower(cp){return cp>=CODE_POINTS.LATIN_SMALL_A&&cp<=CODE_POINTS.LATIN_SMALL_Z}(cp)||isAsciiUpper(cp)}function tokenizer_isAsciiAlphaNumeric(cp){return isAsciiLetter(cp)||function isAsciiDigit(cp){return cp>=CODE_POINTS.DIGIT_0&&cp<=CODE_POINTS.DIGIT_9}(cp)}function toAsciiLower(cp){return cp+32}function isWhitespace(cp){return cp===CODE_POINTS.SPACE||cp===CODE_POINTS.LINE_FEED||cp===CODE_POINTS.TABULATION||cp===CODE_POINTS.FORM_FEED}function isScriptDataDoubleEscapeSequenceEnd(cp){return isWhitespace(cp)||cp===CODE_POINTS.SOLIDUS||cp===CODE_POINTS.GREATER_THAN_SIGN}class Tokenizer{options;handler;preprocessor;paused=!1;inLoop=!1;inForeignNode=!1;lastStartTagName="";active=!1;state=0;returnState=0;entityDecoder;entityStartPos=0;consumedAfterSnapshot=-1;currentLocation;currentCharacterToken=null;currentToken=null;currentAttr={name:"",value:""};constructor(options,handler){this.options=options,this.handler=handler,this.preprocessor=new Preprocessor(handler),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new EntityDecoder(decode_data_html_htmlDecodeTree,(cp,consumed)=>{this.preprocessor.pos=this.entityStartPos+consumed-1,this._flushCodePointConsumedAsCharacterReference(cp)},handler.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(ERR.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:consumed=>{this._err(ERR.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+consumed)},validateNumericCharacterReference:code=>{const error=function getErrorForNumericCharacterReference(code){return code===CODE_POINTS.NULL?ERR.nullCharacterReference:code>1114111?ERR.characterReferenceOutsideUnicodeRange:isSurrogate(code)?ERR.surrogateCharacterReference:isUndefinedCodePoint(code)?ERR.noncharacterCharacterReference:isControlCodePoint(code)||code===CODE_POINTS.CARRIAGE_RETURN?ERR.controlCharacterReference:null}(code);error&&this._err(error,1)}}:void 0)}_err(code,cpOffset=0){this.handler.onParseError?.(this.preprocessor.getError(code,cpOffset))}getCurrentLocation(offset){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-offset,startOffset:this.preprocessor.offset-offset,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const cp=this._consume();this._ensureHibernation()||this._callState(cp)}this.inLoop=!1}}pause(){this.paused=!0}resume(writeCallback){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,this.inLoop||(this._runParsingLoop(),this.paused||writeCallback?.())}write(chunk,isLastChunk,writeCallback){this.active=!0,this.preprocessor.write(chunk,isLastChunk),this._runParsingLoop(),this.paused||writeCallback?.()}insertHtmlAtCurrentPos(chunk){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(chunk),this._runParsingLoop()}_ensureHibernation(){return!!this.preprocessor.endOfChunkHit&&(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0)}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(count){this.consumedAfterSnapshot+=count;for(let i=0;i<count;i++)this.preprocessor.advance()}_consumeSequenceIfMatch(pattern,caseSensitive){return!!this.preprocessor.startsWith(pattern,caseSensitive)&&(this._advanceBy(pattern.length-1),!0)}_createStartTagToken(){this.currentToken={type:TokenType.START_TAG,tagName:"",tagID:TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:TokenType.END_TAG,tagName:"",tagID:TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(offset){this.currentToken={type:TokenType.COMMENT,data:"",location:this.getCurrentLocation(offset)}}_createDoctypeToken(initialName){this.currentToken={type:TokenType.DOCTYPE,name:initialName,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(type,chars){this.currentCharacterToken={type,chars,location:this.currentLocation}}_createAttr(attrNameFirstCh){this.currentAttr={name:attrNameFirstCh,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){const token=this.currentToken;if(null===getTokenAttr(token,this.currentAttr.name)){if(token.attrs.push(this.currentAttr),token.location&&this.currentLocation){(token.location.attrs??=Object.create(null))[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(ERR.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(ct){this._emitCurrentCharacterToken(ct.location),this.currentToken=null,ct.location&&(ct.location.endLine=this.preprocessor.line,ct.location.endCol=this.preprocessor.col+1,ct.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const ct=this.currentToken;this.prepareToken(ct),ct.tagID=getTagID(ct.tagName),ct.type===TokenType.START_TAG?(this.lastStartTagName=ct.tagName,this.handler.onStartTag(ct)):(ct.attrs.length>0&&this._err(ERR.endTagWithAttributes),ct.selfClosing&&this._err(ERR.endTagWithTrailingSolidus),this.handler.onEndTag(ct)),this.preprocessor.dropParsedChunk()}emitCurrentComment(ct){this.prepareToken(ct),this.handler.onComment(ct),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(ct){this.prepareToken(ct),this.handler.onDoctype(ct),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(nextLocation){if(this.currentCharacterToken){switch(nextLocation&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=nextLocation.startLine,this.currentCharacterToken.location.endCol=nextLocation.startCol,this.currentCharacterToken.location.endOffset=nextLocation.startOffset),this.currentCharacterToken.type){case TokenType.CHARACTER:this.handler.onCharacter(this.currentCharacterToken);break;case TokenType.NULL_CHARACTER:this.handler.onNullCharacter(this.currentCharacterToken);break;case TokenType.WHITESPACE_CHARACTER:this.handler.onWhitespaceCharacter(this.currentCharacterToken)}this.currentCharacterToken=null}}_emitEOFToken(){const location=this.getCurrentLocation(0);location&&(location.endLine=location.startLine,location.endCol=location.startCol,location.endOffset=location.startOffset),this._emitCurrentCharacterToken(location),this.handler.onEof({type:TokenType.EOF,location}),this.active=!1}_appendCharToCurrentCharacterToken(type,ch){if(this.currentCharacterToken){if(this.currentCharacterToken.type===type)return void(this.currentCharacterToken.chars+=ch);this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk()}this._createCharacterToken(type,ch)}_emitCodePoint(cp){const type=isWhitespace(cp)?TokenType.WHITESPACE_CHARACTER:cp===CODE_POINTS.NULL?TokenType.NULL_CHARACTER:TokenType.CHARACTER;this._appendCharToCurrentCharacterToken(type,String.fromCodePoint(cp))}_emitChars(ch){this._appendCharToCurrentCharacterToken(TokenType.CHARACTER,ch)}_startCharacterReference(){this.returnState=this.state,this.state=71,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?DecodingMode.Attribute:DecodingMode.Legacy)}_isCharacterReferenceInAttribute(){return 35===this.returnState||36===this.returnState||37===this.returnState}_flushCodePointConsumedAsCharacterReference(cp){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(cp):this._emitCodePoint(cp)}_callState(cp){switch(this.state){case 0:this._stateData(cp);break;case 1:this._stateRcdata(cp);break;case 2:this._stateRawtext(cp);break;case 3:this._stateScriptData(cp);break;case 4:this._statePlaintext(cp);break;case 5:this._stateTagOpen(cp);break;case 6:this._stateEndTagOpen(cp);break;case 7:this._stateTagName(cp);break;case 8:this._stateRcdataLessThanSign(cp);break;case 9:this._stateRcdataEndTagOpen(cp);break;case 10:this._stateRcdataEndTagName(cp);break;case 11:this._stateRawtextLessThanSign(cp);break;case 12:this._stateRawtextEndTagOpen(cp);break;case 13:this._stateRawtextEndTagName(cp);break;case 14:this._stateScriptDataLessThanSign(cp);break;case 15:this._stateScriptDataEndTagOpen(cp);break;case 16:this._stateScriptDataEndTagName(cp);break;case 17:this._stateScriptDataEscapeStart(cp);break;case 18:this._stateScriptDataEscapeStartDash(cp);break;case 19:this._stateScriptDataEscaped(cp);break;case 20:this._stateScriptDataEscapedDash(cp);break;case 21:this._stateScriptDataEscapedDashDash(cp);break;case 22:this._stateScriptDataEscapedLessThanSign(cp);break;case 23:this._stateScriptDataEscapedEndTagOpen(cp);break;case 24:this._stateScriptDataEscapedEndTagName(cp);break;case 25:this._stateScriptDataDoubleEscapeStart(cp);break;case 26:this._stateScriptDataDoubleEscaped(cp);break;case 27:this._stateScriptDataDoubleEscapedDash(cp);break;case 28:this._stateScriptDataDoubleEscapedDashDash(cp);break;case 29:this._stateScriptDataDoubleEscapedLessThanSign(cp);break;case 30:this._stateScriptDataDoubleEscapeEnd(cp);break;case 31:this._stateBeforeAttributeName(cp);break;case 32:this._stateAttributeName(cp);break;case 33:this._stateAfterAttributeName(cp);break;case 34:this._stateBeforeAttributeValue(cp);break;case 35:this._stateAttributeValueDoubleQuoted(cp);break;case 36:this._stateAttributeValueSingleQuoted(cp);break;case 37:this._stateAttributeValueUnquoted(cp);break;case 38:this._stateAfterAttributeValueQuoted(cp);break;case 39:this._stateSelfClosingStartTag(cp);break;case 40:this._stateBogusComment(cp);break;case 41:this._stateMarkupDeclarationOpen(cp);break;case 42:this._stateCommentStart(cp);break;case 43:this._stateCommentStartDash(cp);break;case 44:this._stateComment(cp);break;case 45:this._stateCommentLessThanSign(cp);break;case 46:this._stateCommentLessThanSignBang(cp);break;case 47:this._stateCommentLessThanSignBangDash(cp);break;case 48:this._stateCommentLessThanSignBangDashDash(cp);break;case 49:this._stateCommentEndDash(cp);break;case 50:this._stateCommentEnd(cp);break;case 51:this._stateCommentEndBang(cp);break;case 52:this._stateDoctype(cp);break;case 53:this._stateBeforeDoctypeName(cp);break;case 54:this._stateDoctypeName(cp);break;case 55:this._stateAfterDoctypeName(cp);break;case 56:this._stateAfterDoctypePublicKeyword(cp);break;case 57:this._stateBeforeDoctypePublicIdentifier(cp);break;case 58:this._stateDoctypePublicIdentifierDoubleQuoted(cp);break;case 59:this._stateDoctypePublicIdentifierSingleQuoted(cp);break;case 60:this._stateAfterDoctypePublicIdentifier(cp);break;case 61:this._stateBetweenDoctypePublicAndSystemIdentifiers(cp);break;case 62:this._stateAfterDoctypeSystemKeyword(cp);break;case 63:this._stateBeforeDoctypeSystemIdentifier(cp);break;case 64:this._stateDoctypeSystemIdentifierDoubleQuoted(cp);break;case 65:this._stateDoctypeSystemIdentifierSingleQuoted(cp);break;case 66:this._stateAfterDoctypeSystemIdentifier(cp);break;case 67:this._stateBogusDoctype(cp);break;case 68:this._stateCdataSection(cp);break;case 69:this._stateCdataSectionBracket(cp);break;case 70:this._stateCdataSectionEnd(cp);break;case 71:this._stateCharacterReference();break;case 72:this._stateAmbiguousAmpersand(cp);break;default:throw new Error("Unknown state")}}_stateData(cp){switch(cp){case CODE_POINTS.LESS_THAN_SIGN:this.state=5;break;case CODE_POINTS.AMPERSAND:this._startCharacterReference();break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this._emitCodePoint(cp);break;case CODE_POINTS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(cp)}}_stateRcdata(cp){switch(cp){case CODE_POINTS.AMPERSAND:this._startCharacterReference();break;case CODE_POINTS.LESS_THAN_SIGN:this.state=8;break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this._emitChars("�");break;case CODE_POINTS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(cp)}}_stateRawtext(cp){switch(cp){case CODE_POINTS.LESS_THAN_SIGN:this.state=11;break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this._emitChars("�");break;case CODE_POINTS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(cp)}}_stateScriptData(cp){switch(cp){case CODE_POINTS.LESS_THAN_SIGN:this.state=14;break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this._emitChars("�");break;case CODE_POINTS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(cp)}}_statePlaintext(cp){switch(cp){case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this._emitChars("�");break;case CODE_POINTS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(cp)}}_stateTagOpen(cp){if(isAsciiLetter(cp))this._createStartTagToken(),this.state=7,this._stateTagName(cp);else switch(cp){case CODE_POINTS.EXCLAMATION_MARK:this.state=41;break;case CODE_POINTS.SOLIDUS:this.state=6;break;case CODE_POINTS.QUESTION_MARK:this._err(ERR.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=40,this._stateBogusComment(cp);break;case CODE_POINTS.EOF:this._err(ERR.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break;default:this._err(ERR.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=0,this._stateData(cp)}}_stateEndTagOpen(cp){if(isAsciiLetter(cp))this._createEndTagToken(),this.state=7,this._stateTagName(cp);else switch(cp){case CODE_POINTS.GREATER_THAN_SIGN:this._err(ERR.missingEndTagName),this.state=0;break;case CODE_POINTS.EOF:this._err(ERR.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break;default:this._err(ERR.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=40,this._stateBogusComment(cp)}}_stateTagName(cp){const token=this.currentToken;switch(cp){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:this.state=31;break;case CODE_POINTS.SOLIDUS:this.state=39;break;case CODE_POINTS.GREATER_THAN_SIGN:this.state=0,this.emitCurrentTagToken();break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),token.tagName+="�";break;case CODE_POINTS.EOF:this._err(ERR.eofInTag),this._emitEOFToken();break;default:token.tagName+=String.fromCodePoint(isAsciiUpper(cp)?toAsciiLower(cp):cp)}}_stateRcdataLessThanSign(cp){cp===CODE_POINTS.SOLIDUS?this.state=9:(this._emitChars("<"),this.state=1,this._stateRcdata(cp))}_stateRcdataEndTagOpen(cp){isAsciiLetter(cp)?(this.state=10,this._stateRcdataEndTagName(cp)):(this._emitChars("</"),this.state=1,this._stateRcdata(cp))}handleSpecialEndTag(_cp){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();this.currentToken.tagName=this.lastStartTagName;switch(this.preprocessor.peek(this.lastStartTagName.length)){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=31,!1;case CODE_POINTS.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=39,!1;case CODE_POINTS.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=0,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(cp){this.handleSpecialEndTag(cp)&&(this._emitChars("</"),this.state=1,this._stateRcdata(cp))}_stateRawtextLessThanSign(cp){cp===CODE_POINTS.SOLIDUS?this.state=12:(this._emitChars("<"),this.state=2,this._stateRawtext(cp))}_stateRawtextEndTagOpen(cp){isAsciiLetter(cp)?(this.state=13,this._stateRawtextEndTagName(cp)):(this._emitChars("</"),this.state=2,this._stateRawtext(cp))}_stateRawtextEndTagName(cp){this.handleSpecialEndTag(cp)&&(this._emitChars("</"),this.state=2,this._stateRawtext(cp))}_stateScriptDataLessThanSign(cp){switch(cp){case CODE_POINTS.SOLIDUS:this.state=15;break;case CODE_POINTS.EXCLAMATION_MARK:this.state=17,this._emitChars("<!");break;default:this._emitChars("<"),this.state=3,this._stateScriptData(cp)}}_stateScriptDataEndTagOpen(cp){isAsciiLetter(cp)?(this.state=16,this._stateScriptDataEndTagName(cp)):(this._emitChars("</"),this.state=3,this._stateScriptData(cp))}_stateScriptDataEndTagName(cp){this.handleSpecialEndTag(cp)&&(this._emitChars("</"),this.state=3,this._stateScriptData(cp))}_stateScriptDataEscapeStart(cp){cp===CODE_POINTS.HYPHEN_MINUS?(this.state=18,this._emitChars("-")):(this.state=3,this._stateScriptData(cp))}_stateScriptDataEscapeStartDash(cp){cp===CODE_POINTS.HYPHEN_MINUS?(this.state=21,this._emitChars("-")):(this.state=3,this._stateScriptData(cp))}_stateScriptDataEscaped(cp){switch(cp){case CODE_POINTS.HYPHEN_MINUS:this.state=20,this._emitChars("-");break;case CODE_POINTS.LESS_THAN_SIGN:this.state=22;break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this._emitChars("�");break;case CODE_POINTS.EOF:this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(cp)}}_stateScriptDataEscapedDash(cp){switch(cp){case CODE_POINTS.HYPHEN_MINUS:this.state=21,this._emitChars("-");break;case CODE_POINTS.LESS_THAN_SIGN:this.state=22;break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this.state=19,this._emitChars("�");break;case CODE_POINTS.EOF:this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=19,this._emitCodePoint(cp)}}_stateScriptDataEscapedDashDash(cp){switch(cp){case CODE_POINTS.HYPHEN_MINUS:this._emitChars("-");break;case CODE_POINTS.LESS_THAN_SIGN:this.state=22;break;case CODE_POINTS.GREATER_THAN_SIGN:this.state=3,this._emitChars(">");break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this.state=19,this._emitChars("�");break;case CODE_POINTS.EOF:this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=19,this._emitCodePoint(cp)}}_stateScriptDataEscapedLessThanSign(cp){cp===CODE_POINTS.SOLIDUS?this.state=23:isAsciiLetter(cp)?(this._emitChars("<"),this.state=25,this._stateScriptDataDoubleEscapeStart(cp)):(this._emitChars("<"),this.state=19,this._stateScriptDataEscaped(cp))}_stateScriptDataEscapedEndTagOpen(cp){isAsciiLetter(cp)?(this.state=24,this._stateScriptDataEscapedEndTagName(cp)):(this._emitChars("</"),this.state=19,this._stateScriptDataEscaped(cp))}_stateScriptDataEscapedEndTagName(cp){this.handleSpecialEndTag(cp)&&(this._emitChars("</"),this.state=19,this._stateScriptDataEscaped(cp))}_stateScriptDataDoubleEscapeStart(cp){if(this.preprocessor.startsWith(SEQUENCES_SCRIPT,!1)&&isScriptDataDoubleEscapeSequenceEnd(this.preprocessor.peek(SEQUENCES_SCRIPT.length))){this._emitCodePoint(cp);for(let i=0;i<SEQUENCES_SCRIPT.length;i++)this._emitCodePoint(this._consume());this.state=26}else this._ensureHibernation()||(this.state=19,this._stateScriptDataEscaped(cp))}_stateScriptDataDoubleEscaped(cp){switch(cp){case CODE_POINTS.HYPHEN_MINUS:this.state=27,this._emitChars("-");break;case CODE_POINTS.LESS_THAN_SIGN:this.state=29,this._emitChars("<");break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this._emitChars("�");break;case CODE_POINTS.EOF:this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(cp)}}_stateScriptDataDoubleEscapedDash(cp){switch(cp){case CODE_POINTS.HYPHEN_MINUS:this.state=28,this._emitChars("-");break;case CODE_POINTS.LESS_THAN_SIGN:this.state=29,this._emitChars("<");break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this.state=26,this._emitChars("�");break;case CODE_POINTS.EOF:this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=26,this._emitCodePoint(cp)}}_stateScriptDataDoubleEscapedDashDash(cp){switch(cp){case CODE_POINTS.HYPHEN_MINUS:this._emitChars("-");break;case CODE_POINTS.LESS_THAN_SIGN:this.state=29,this._emitChars("<");break;case CODE_POINTS.GREATER_THAN_SIGN:this.state=3,this._emitChars(">");break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this.state=26,this._emitChars("�");break;case CODE_POINTS.EOF:this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=26,this._emitCodePoint(cp)}}_stateScriptDataDoubleEscapedLessThanSign(cp){cp===CODE_POINTS.SOLIDUS?(this.state=30,this._emitChars("/")):(this.state=26,this._stateScriptDataDoubleEscaped(cp))}_stateScriptDataDoubleEscapeEnd(cp){if(this.preprocessor.startsWith(SEQUENCES_SCRIPT,!1)&&isScriptDataDoubleEscapeSequenceEnd(this.preprocessor.peek(SEQUENCES_SCRIPT.length))){this._emitCodePoint(cp);for(let i=0;i<SEQUENCES_SCRIPT.length;i++)this._emitCodePoint(this._consume());this.state=19}else this._ensureHibernation()||(this.state=26,this._stateScriptDataDoubleEscaped(cp))}_stateBeforeAttributeName(cp){switch(cp){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.SOLIDUS:case CODE_POINTS.GREATER_THAN_SIGN:case CODE_POINTS.EOF:this.state=33,this._stateAfterAttributeName(cp);break;case CODE_POINTS.EQUALS_SIGN:this._err(ERR.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=32;break;default:this._createAttr(""),this.state=32,this._stateAttributeName(cp)}}_stateAttributeName(cp){switch(cp){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:case CODE_POINTS.SOLIDUS:case CODE_POINTS.GREATER_THAN_SIGN:case CODE_POINTS.EOF:this._leaveAttrName(),this.state=33,this._stateAfterAttributeName(cp);break;case CODE_POINTS.EQUALS_SIGN:this._leaveAttrName(),this.state=34;break;case CODE_POINTS.QUOTATION_MARK:case CODE_POINTS.APOSTROPHE:case CODE_POINTS.LESS_THAN_SIGN:this._err(ERR.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(cp);break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this.currentAttr.name+="�";break;default:this.currentAttr.name+=String.fromCodePoint(isAsciiUpper(cp)?toAsciiLower(cp):cp)}}_stateAfterAttributeName(cp){switch(cp){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.SOLIDUS:this.state=39;break;case CODE_POINTS.EQUALS_SIGN:this.state=34;break;case CODE_POINTS.GREATER_THAN_SIGN:this.state=0,this.emitCurrentTagToken();break;case CODE_POINTS.EOF:this._err(ERR.eofInTag),this._emitEOFToken();break;default:this._createAttr(""),this.state=32,this._stateAttributeName(cp)}}_stateBeforeAttributeValue(cp){switch(cp){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.QUOTATION_MARK:this.state=35;break;case CODE_POINTS.APOSTROPHE:this.state=36;break;case CODE_POINTS.GREATER_THAN_SIGN:this._err(ERR.missingAttributeValue),this.state=0,this.emitCurrentTagToken();break;default:this.state=37,this._stateAttributeValueUnquoted(cp)}}_stateAttributeValueDoubleQuoted(cp){switch(cp){case CODE_POINTS.QUOTATION_MARK:this.state=38;break;case CODE_POINTS.AMPERSAND:this._startCharacterReference();break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this.currentAttr.value+="�";break;case CODE_POINTS.EOF:this._err(ERR.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(cp)}}_stateAttributeValueSingleQuoted(cp){switch(cp){case CODE_POINTS.APOSTROPHE:this.state=38;break;case CODE_POINTS.AMPERSAND:this._startCharacterReference();break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this.currentAttr.value+="�";break;case CODE_POINTS.EOF:this._err(ERR.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(cp)}}_stateAttributeValueUnquoted(cp){switch(cp){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:this._leaveAttrValue(),this.state=31;break;case CODE_POINTS.AMPERSAND:this._startCharacterReference();break;case CODE_POINTS.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=0,this.emitCurrentTagToken();break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this.currentAttr.value+="�";break;case CODE_POINTS.QUOTATION_MARK:case CODE_POINTS.APOSTROPHE:case CODE_POINTS.LESS_THAN_SIGN:case CODE_POINTS.EQUALS_SIGN:case CODE_POINTS.GRAVE_ACCENT:this._err(ERR.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(cp);break;case CODE_POINTS.EOF:this._err(ERR.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(cp)}}_stateAfterAttributeValueQuoted(cp){switch(cp){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:this._leaveAttrValue(),this.state=31;break;case CODE_POINTS.SOLIDUS:this._leaveAttrValue(),this.state=39;break;case CODE_POINTS.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=0,this.emitCurrentTagToken();break;case CODE_POINTS.EOF:this._err(ERR.eofInTag),this._emitEOFToken();break;default:this._err(ERR.missingWhitespaceBetweenAttributes),this.state=31,this._stateBeforeAttributeName(cp)}}_stateSelfClosingStartTag(cp){switch(cp){case CODE_POINTS.GREATER_THAN_SIGN:this.currentToken.selfClosing=!0,this.state=0,this.emitCurrentTagToken();break;case CODE_POINTS.EOF:this._err(ERR.eofInTag),this._emitEOFToken();break;default:this._err(ERR.unexpectedSolidusInTag),this.state=31,this._stateBeforeAttributeName(cp)}}_stateBogusComment(cp){const token=this.currentToken;switch(cp){case CODE_POINTS.GREATER_THAN_SIGN:this.state=0,this.emitCurrentComment(token);break;case CODE_POINTS.EOF:this.emitCurrentComment(token),this._emitEOFToken();break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),token.data+="�";break;default:token.data+=String.fromCodePoint(cp)}}_stateMarkupDeclarationOpen(cp){this._consumeSequenceIfMatch(SEQUENCES_DASH_DASH,!0)?(this._createCommentToken(SEQUENCES_DASH_DASH.length+1),this.state=42):this._consumeSequenceIfMatch(SEQUENCES_DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(SEQUENCES_DOCTYPE.length+1),this.state=52):this._consumeSequenceIfMatch(SEQUENCES_CDATA_START,!0)?this.inForeignNode?this.state=68:(this._err(ERR.cdataInHtmlContent),this._createCommentToken(SEQUENCES_CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=40):this._ensureHibernation()||(this._err(ERR.incorrectlyOpenedComment),this._createCommentToken(2),this.state=40,this._stateBogusComment(cp))}_stateCommentStart(cp){switch(cp){case CODE_POINTS.HYPHEN_MINUS:this.state=43;break;case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptClosingOfEmptyComment),this.state=0;const token=this.currentToken;this.emitCurrentComment(token);break}default:this.state=44,this._stateComment(cp)}}_stateCommentStartDash(cp){const token=this.currentToken;switch(cp){case CODE_POINTS.HYPHEN_MINUS:this.state=50;break;case CODE_POINTS.GREATER_THAN_SIGN:this._err(ERR.abruptClosingOfEmptyComment),this.state=0,this.emitCurrentComment(token);break;case CODE_POINTS.EOF:this._err(ERR.eofInComment),this.emitCurrentComment(token),this._emitEOFToken();break;default:token.data+="-",this.state=44,this._stateComment(cp)}}_stateComment(cp){const token=this.currentToken;switch(cp){case CODE_POINTS.HYPHEN_MINUS:this.state=49;break;case CODE_POINTS.LESS_THAN_SIGN:token.data+="<",this.state=45;break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),token.data+="�";break;case CODE_POINTS.EOF:this._err(ERR.eofInComment),this.emitCurrentComment(token),this._emitEOFToken();break;default:token.data+=String.fromCodePoint(cp)}}_stateCommentLessThanSign(cp){const token=this.currentToken;switch(cp){case CODE_POINTS.EXCLAMATION_MARK:token.data+="!",this.state=46;break;case CODE_POINTS.LESS_THAN_SIGN:token.data+="<";break;default:this.state=44,this._stateComment(cp)}}_stateCommentLessThanSignBang(cp){cp===CODE_POINTS.HYPHEN_MINUS?this.state=47:(this.state=44,this._stateComment(cp))}_stateCommentLessThanSignBangDash(cp){cp===CODE_POINTS.HYPHEN_MINUS?this.state=48:(this.state=49,this._stateCommentEndDash(cp))}_stateCommentLessThanSignBangDashDash(cp){cp!==CODE_POINTS.GREATER_THAN_SIGN&&cp!==CODE_POINTS.EOF&&this._err(ERR.nestedComment),this.state=50,this._stateCommentEnd(cp)}_stateCommentEndDash(cp){const token=this.currentToken;switch(cp){case CODE_POINTS.HYPHEN_MINUS:this.state=50;break;case CODE_POINTS.EOF:this._err(ERR.eofInComment),this.emitCurrentComment(token),this._emitEOFToken();break;default:token.data+="-",this.state=44,this._stateComment(cp)}}_stateCommentEnd(cp){const token=this.currentToken;switch(cp){case CODE_POINTS.GREATER_THAN_SIGN:this.state=0,this.emitCurrentComment(token);break;case CODE_POINTS.EXCLAMATION_MARK:this.state=51;break;case CODE_POINTS.HYPHEN_MINUS:token.data+="-";break;case CODE_POINTS.EOF:this._err(ERR.eofInComment),this.emitCurrentComment(token),this._emitEOFToken();break;default:token.data+="--",this.state=44,this._stateComment(cp)}}_stateCommentEndBang(cp){const token=this.currentToken;switch(cp){case CODE_POINTS.HYPHEN_MINUS:token.data+="--!",this.state=49;break;case CODE_POINTS.GREATER_THAN_SIGN:this._err(ERR.incorrectlyClosedComment),this.state=0,this.emitCurrentComment(token);break;case CODE_POINTS.EOF:this._err(ERR.eofInComment),this.emitCurrentComment(token),this._emitEOFToken();break;default:token.data+="--!",this.state=44,this._stateComment(cp)}}_stateDoctype(cp){switch(cp){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:this.state=53;break;case CODE_POINTS.GREATER_THAN_SIGN:this.state=53,this._stateBeforeDoctypeName(cp);break;case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),this._createDoctypeToken(null);const token=this.currentToken;token.forceQuirks=!0,this.emitCurrentDoctype(token),this._emitEOFToken();break}default:this._err(ERR.missingWhitespaceBeforeDoctypeName),this.state=53,this._stateBeforeDoctypeName(cp)}}_stateBeforeDoctypeName(cp){if(isAsciiUpper(cp))this._createDoctypeToken(String.fromCharCode(toAsciiLower(cp))),this.state=54;else switch(cp){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),this._createDoctypeToken("�"),this.state=54;break;case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingDoctypeName),this._createDoctypeToken(null);const token=this.currentToken;token.forceQuirks=!0,this.emitCurrentDoctype(token),this.state=0;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),this._createDoctypeToken(null);const token=this.currentToken;token.forceQuirks=!0,this.emitCurrentDoctype(token),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(cp)),this.state=54}}_stateDoctypeName(cp){const token=this.currentToken;switch(cp){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:this.state=55;break;case CODE_POINTS.GREATER_THAN_SIGN:this.state=0,this.emitCurrentDoctype(token);break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),token.name+="�";break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),token.forceQuirks=!0,this.emitCurrentDoctype(token),this._emitEOFToken();break;default:token.name+=String.fromCodePoint(isAsciiUpper(cp)?toAsciiLower(cp):cp)}}_stateAfterDoctypeName(cp){const token=this.currentToken;switch(cp){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.GREATER_THAN_SIGN:this.state=0,this.emitCurrentDoctype(token);break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),token.forceQuirks=!0,this.emitCurrentDoctype(token),this._emitEOFToken();break;default:this._consumeSequenceIfMatch(SEQUENCES_PUBLIC,!1)?this.state=56:this._consumeSequenceIfMatch(SEQUENCES_SYSTEM,!1)?this.state=62:this._ensureHibernation()||(this._err(ERR.invalidCharacterSequenceAfterDoctypeName),token.forceQuirks=!0,this.state=67,this._stateBogusDoctype(cp))}}_stateAfterDoctypePublicKeyword(cp){const token=this.currentToken;switch(cp){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:this.state=57;break;case CODE_POINTS.QUOTATION_MARK:this._err(ERR.missingWhitespaceAfterDoctypePublicKeyword),token.publicId="",this.state=58;break;case CODE_POINTS.APOSTROPHE:this._err(ERR.missingWhitespaceAfterDoctypePublicKeyword),token.publicId="",this.state=59;break;case CODE_POINTS.GREATER_THAN_SIGN:this._err(ERR.missingDoctypePublicIdentifier),token.forceQuirks=!0,this.state=0,this.emitCurrentDoctype(token);break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),token.forceQuirks=!0,this.emitCurrentDoctype(token),this._emitEOFToken();break;default:this._err(ERR.missingQuoteBeforeDoctypePublicIdentifier),token.forceQuirks=!0,this.state=67,this._stateBogusDoctype(cp)}}_stateBeforeDoctypePublicIdentifier(cp){const token=this.currentToken;switch(cp){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.QUOTATION_MARK:token.publicId="",this.state=58;break;case CODE_POINTS.APOSTROPHE:token.publicId="",this.state=59;break;case CODE_POINTS.GREATER_THAN_SIGN:this._err(ERR.missingDoctypePublicIdentifier),token.forceQuirks=!0,this.state=0,this.emitCurrentDoctype(token);break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),token.forceQuirks=!0,this.emitCurrentDoctype(token),this._emitEOFToken();break;default:this._err(ERR.missingQuoteBeforeDoctypePublicIdentifier),token.forceQuirks=!0,this.state=67,this._stateBogusDoctype(cp)}}_stateDoctypePublicIdentifierDoubleQuoted(cp){const token=this.currentToken;switch(cp){case CODE_POINTS.QUOTATION_MARK:this.state=60;break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),token.publicId+="�";break;case CODE_POINTS.GREATER_THAN_SIGN:this._err(ERR.abruptDoctypePublicIdentifier),token.forceQuirks=!0,this.emitCurrentDoctype(token),this.state=0;break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),token.forceQuirks=!0,this.emitCurrentDoctype(token),this._emitEOFToken();break;default:token.publicId+=String.fromCodePoint(cp)}}_stateDoctypePublicIdentifierSingleQuoted(cp){const token=this.currentToken;switch(cp){case CODE_POINTS.APOSTROPHE:this.state=60;break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),token.publicId+="�";break;case CODE_POINTS.GREATER_THAN_SIGN:this._err(ERR.abruptDoctypePublicIdentifier),token.forceQuirks=!0,this.emitCurrentDoctype(token),this.state=0;break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),token.forceQuirks=!0,this.emitCurrentDoctype(token),this._emitEOFToken();break;default:token.publicId+=String.fromCodePoint(cp)}}_stateAfterDoctypePublicIdentifier(cp){const token=this.currentToken;switch(cp){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:this.state=61;break;case CODE_POINTS.GREATER_THAN_SIGN:this.state=0,this.emitCurrentDoctype(token);break;case CODE_POINTS.QUOTATION_MARK:this._err(ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),token.systemId="",this.state=64;break;case CODE_POINTS.APOSTROPHE:this._err(ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),token.systemId="",this.state=65;break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),token.forceQuirks=!0,this.emitCurrentDoctype(token),this._emitEOFToken();break;default:this._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier),token.forceQuirks=!0,this.state=67,this._stateBogusDoctype(cp)}}_stateBetweenDoctypePublicAndSystemIdentifiers(cp){const token=this.currentToken;switch(cp){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.GREATER_THAN_SIGN:this.emitCurrentDoctype(token),this.state=0;break;case CODE_POINTS.QUOTATION_MARK:token.systemId="",this.state=64;break;case CODE_POINTS.APOSTROPHE:token.systemId="",this.state=65;break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),token.forceQuirks=!0,this.emitCurrentDoctype(token),this._emitEOFToken();break;default:this._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier),token.forceQuirks=!0,this.state=67,this._stateBogusDoctype(cp)}}_stateAfterDoctypeSystemKeyword(cp){const token=this.currentToken;switch(cp){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:this.state=63;break;case CODE_POINTS.QUOTATION_MARK:this._err(ERR.missingWhitespaceAfterDoctypeSystemKeyword),token.systemId="",this.state=64;break;case CODE_POINTS.APOSTROPHE:this._err(ERR.missingWhitespaceAfterDoctypeSystemKeyword),token.systemId="",this.state=65;break;case CODE_POINTS.GREATER_THAN_SIGN:this._err(ERR.missingDoctypeSystemIdentifier),token.forceQuirks=!0,this.state=0,this.emitCurrentDoctype(token);break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),token.forceQuirks=!0,this.emitCurrentDoctype(token),this._emitEOFToken();break;default:this._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier),token.forceQuirks=!0,this.state=67,this._stateBogusDoctype(cp)}}_stateBeforeDoctypeSystemIdentifier(cp){const token=this.currentToken;switch(cp){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.QUOTATION_MARK:token.systemId="",this.state=64;break;case CODE_POINTS.APOSTROPHE:token.systemId="",this.state=65;break;case CODE_POINTS.GREATER_THAN_SIGN:this._err(ERR.missingDoctypeSystemIdentifier),token.forceQuirks=!0,this.state=0,this.emitCurrentDoctype(token);break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),token.forceQuirks=!0,this.emitCurrentDoctype(token),this._emitEOFToken();break;default:this._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier),token.forceQuirks=!0,this.state=67,this._stateBogusDoctype(cp)}}_stateDoctypeSystemIdentifierDoubleQuoted(cp){const token=this.currentToken;switch(cp){case CODE_POINTS.QUOTATION_MARK:this.state=66;break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),token.systemId+="�";break;case CODE_POINTS.GREATER_THAN_SIGN:this._err(ERR.abruptDoctypeSystemIdentifier),token.forceQuirks=!0,this.emitCurrentDoctype(token),this.state=0;break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),token.forceQuirks=!0,this.emitCurrentDoctype(token),this._emitEOFToken();break;default:token.systemId+=String.fromCodePoint(cp)}}_stateDoctypeSystemIdentifierSingleQuoted(cp){const token=this.currentToken;switch(cp){case CODE_POINTS.APOSTROPHE:this.state=66;break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter),token.systemId+="�";break;case CODE_POINTS.GREATER_THAN_SIGN:this._err(ERR.abruptDoctypeSystemIdentifier),token.forceQuirks=!0,this.emitCurrentDoctype(token),this.state=0;break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),token.forceQuirks=!0,this.emitCurrentDoctype(token),this._emitEOFToken();break;default:token.systemId+=String.fromCodePoint(cp)}}_stateAfterDoctypeSystemIdentifier(cp){const token=this.currentToken;switch(cp){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.GREATER_THAN_SIGN:this.emitCurrentDoctype(token),this.state=0;break;case CODE_POINTS.EOF:this._err(ERR.eofInDoctype),token.forceQuirks=!0,this.emitCurrentDoctype(token),this._emitEOFToken();break;default:this._err(ERR.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=67,this._stateBogusDoctype(cp)}}_stateBogusDoctype(cp){const token=this.currentToken;switch(cp){case CODE_POINTS.GREATER_THAN_SIGN:this.emitCurrentDoctype(token),this.state=0;break;case CODE_POINTS.NULL:this._err(ERR.unexpectedNullCharacter);break;case CODE_POINTS.EOF:this.emitCurrentDoctype(token),this._emitEOFToken()}}_stateCdataSection(cp){switch(cp){case CODE_POINTS.RIGHT_SQUARE_BRACKET:this.state=69;break;case CODE_POINTS.EOF:this._err(ERR.eofInCdata),this._emitEOFToken();break;default:this._emitCodePoint(cp)}}_stateCdataSectionBracket(cp){cp===CODE_POINTS.RIGHT_SQUARE_BRACKET?this.state=70:(this._emitChars("]"),this.state=68,this._stateCdataSection(cp))}_stateCdataSectionEnd(cp){switch(cp){case CODE_POINTS.GREATER_THAN_SIGN:this.state=0;break;case CODE_POINTS.RIGHT_SQUARE_BRACKET:this._emitChars("]");break;default:this._emitChars("]]"),this.state=68,this._stateCdataSection(cp)}}_stateCharacterReference(){let length=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(length<0){if(!this.preprocessor.lastChunkWritten)return this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,void(this.preprocessor.endOfChunkHit=!0);length=this.entityDecoder.end()}0===length?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(CODE_POINTS.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&tokenizer_isAsciiAlphaNumeric(this.preprocessor.peek(1))?72:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(cp){tokenizer_isAsciiAlphaNumeric(cp)?this._flushCodePointConsumedAsCharacterReference(cp):(cp===CODE_POINTS.SEMICOLON&&this._err(ERR.unknownNamedCharacterReference),this.state=this.returnState,this._callState(cp))}}const IMPLICIT_END_TAG_REQUIRED=new Set([TAG_ID.DD,TAG_ID.DT,TAG_ID.LI,TAG_ID.OPTGROUP,TAG_ID.OPTION,TAG_ID.P,TAG_ID.RB,TAG_ID.RP,TAG_ID.RT,TAG_ID.RTC]),IMPLICIT_END_TAG_REQUIRED_THOROUGHLY=new Set([...IMPLICIT_END_TAG_REQUIRED,TAG_ID.CAPTION,TAG_ID.COLGROUP,TAG_ID.TBODY,TAG_ID.TD,TAG_ID.TFOOT,TAG_ID.TH,TAG_ID.THEAD,TAG_ID.TR]),SCOPING_ELEMENTS_HTML=new Set([TAG_ID.APPLET,TAG_ID.CAPTION,TAG_ID.HTML,TAG_ID.MARQUEE,TAG_ID.OBJECT,TAG_ID.TABLE,TAG_ID.TD,TAG_ID.TEMPLATE,TAG_ID.TH]),SCOPING_ELEMENTS_HTML_LIST=new Set([...SCOPING_ELEMENTS_HTML,TAG_ID.OL,TAG_ID.UL]),SCOPING_ELEMENTS_HTML_BUTTON=new Set([...SCOPING_ELEMENTS_HTML,TAG_ID.BUTTON]),SCOPING_ELEMENTS_MATHML=new Set([TAG_ID.ANNOTATION_XML,TAG_ID.MI,TAG_ID.MN,TAG_ID.MO,TAG_ID.MS,TAG_ID.MTEXT]),SCOPING_ELEMENTS_SVG=new Set([TAG_ID.DESC,TAG_ID.FOREIGN_OBJECT,TAG_ID.TITLE]),TABLE_ROW_CONTEXT=new Set([TAG_ID.TR,TAG_ID.TEMPLATE,TAG_ID.HTML]),TABLE_BODY_CONTEXT=new Set([TAG_ID.TBODY,TAG_ID.TFOOT,TAG_ID.THEAD,TAG_ID.TEMPLATE,TAG_ID.HTML]),TABLE_CONTEXT=new Set([TAG_ID.TABLE,TAG_ID.TEMPLATE,TAG_ID.HTML]),TABLE_CELLS=new Set([TAG_ID.TD,TAG_ID.TH]);class OpenElementStack{treeAdapter;handler;items=[];tagIDs=[];current;stackTop=-1;tmplCount=0;currentTagId=TAG_ID.UNKNOWN;get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(document,treeAdapter,handler){this.treeAdapter=treeAdapter,this.handler=handler,this.current=document}_indexOf(element){return this.items.lastIndexOf(element,this.stackTop)}_isInTemplate(){return this.currentTagId===TAG_ID.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===NS.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(element,tagID){this.stackTop++,this.items[this.stackTop]=element,this.current=element,this.tagIDs[this.stackTop]=tagID,this.currentTagId=tagID,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(element,tagID,!0)}pop(){const popped=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(popped,!0)}replace(oldElement,newElement){const idx=this._indexOf(oldElement);this.items[idx]=newElement,idx===this.stackTop&&(this.current=newElement)}insertAfter(referenceElement,newElement,newElementID){const insertionIdx=this._indexOf(referenceElement)+1;this.items.splice(insertionIdx,0,newElement),this.tagIDs.splice(insertionIdx,0,newElementID),this.stackTop++,insertionIdx===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,insertionIdx===this.stackTop)}popUntilTagNamePopped(tagName){let targetIdx=this.stackTop+1;do{targetIdx=this.tagIDs.lastIndexOf(tagName,targetIdx-1)}while(targetIdx>0&&this.treeAdapter.getNamespaceURI(this.items[targetIdx])!==NS.HTML);this.shortenToLength(Math.max(targetIdx,0))}shortenToLength(idx){for(;this.stackTop>=idx;){const popped=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(popped,this.stackTop<idx)}}popUntilElementPopped(element){const idx=this._indexOf(element);this.shortenToLength(Math.max(idx,0))}popUntilPopped(tagNames,targetNS){const idx=this._indexOfTagNames(tagNames,targetNS);this.shortenToLength(Math.max(idx,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(NUMBERED_HEADERS,NS.HTML)}popUntilTableCellPopped(){this.popUntilPopped(TABLE_CELLS,NS.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(tagNames,namespace){for(let i=this.stackTop;i>=0;i--)if(tagNames.has(this.tagIDs[i])&&this.treeAdapter.getNamespaceURI(this.items[i])===namespace)return i;return-1}clearBackTo(tagNames,targetNS){const idx=this._indexOfTagNames(tagNames,targetNS);this.shortenToLength(idx+1)}clearBackToTableContext(){this.clearBackTo(TABLE_CONTEXT,NS.HTML)}clearBackToTableBodyContext(){this.clearBackTo(TABLE_BODY_CONTEXT,NS.HTML)}clearBackToTableRowContext(){this.clearBackTo(TABLE_ROW_CONTEXT,NS.HTML)}remove(element){const idx=this._indexOf(element);idx>=0&&(idx===this.stackTop?this.pop():(this.items.splice(idx,1),this.tagIDs.splice(idx,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(element,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===TAG_ID.BODY?this.items[1]:null}contains(element){return this._indexOf(element)>-1}getCommonAncestor(element){const elementIdx=this._indexOf(element)-1;return elementIdx>=0?this.items[elementIdx]:null}isRootHtmlElementCurrent(){return 0===this.stackTop&&this.tagIDs[0]===TAG_ID.HTML}hasInDynamicScope(tagName,htmlScope){for(let i=this.stackTop;i>=0;i--){const tn=this.tagIDs[i];switch(this.treeAdapter.getNamespaceURI(this.items[i])){case NS.HTML:if(tn===tagName)return!0;if(htmlScope.has(tn))return!1;break;case NS.SVG:if(SCOPING_ELEMENTS_SVG.has(tn))return!1;break;case NS.MATHML:if(SCOPING_ELEMENTS_MATHML.has(tn))return!1}}return!0}hasInScope(tagName){return this.hasInDynamicScope(tagName,SCOPING_ELEMENTS_HTML)}hasInListItemScope(tagName){return this.hasInDynamicScope(tagName,SCOPING_ELEMENTS_HTML_LIST)}hasInButtonScope(tagName){return this.hasInDynamicScope(tagName,SCOPING_ELEMENTS_HTML_BUTTON)}hasNumberedHeaderInScope(){for(let i=this.stackTop;i>=0;i--){const tn=this.tagIDs[i];switch(this.treeAdapter.getNamespaceURI(this.items[i])){case NS.HTML:if(NUMBERED_HEADERS.has(tn))return!0;if(SCOPING_ELEMENTS_HTML.has(tn))return!1;break;case NS.SVG:if(SCOPING_ELEMENTS_SVG.has(tn))return!1;break;case NS.MATHML:if(SCOPING_ELEMENTS_MATHML.has(tn))return!1}}return!0}hasInTableScope(tagName){for(let i=this.stackTop;i>=0;i--)if(this.treeAdapter.getNamespaceURI(this.items[i])===NS.HTML)switch(this.tagIDs[i]){case tagName:return!0;case TAG_ID.TABLE:case TAG_ID.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let i=this.stackTop;i>=0;i--)if(this.treeAdapter.getNamespaceURI(this.items[i])===NS.HTML)switch(this.tagIDs[i]){case TAG_ID.TBODY:case TAG_ID.THEAD:case TAG_ID.TFOOT:return!0;case TAG_ID.TABLE:case TAG_ID.HTML:return!1}return!0}hasInSelectScope(tagName){for(let i=this.stackTop;i>=0;i--)if(this.treeAdapter.getNamespaceURI(this.items[i])===NS.HTML)switch(this.tagIDs[i]){case tagName:return!0;case TAG_ID.OPTION:case TAG_ID.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;IMPLICIT_END_TAG_REQUIRED.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;IMPLICIT_END_TAG_REQUIRED_THOROUGHLY.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(exclusionId){for(;this.currentTagId!==exclusionId&&IMPLICIT_END_TAG_REQUIRED_THOROUGHLY.has(this.currentTagId);)this.pop()}}var EntryType;!function(EntryType){EntryType[EntryType.Marker=0]="Marker",EntryType[EntryType.Element=1]="Element"}(EntryType||(EntryType={}));const MARKER={type:EntryType.Marker};class FormattingElementList{treeAdapter;entries=[];bookmark=null;constructor(treeAdapter){this.treeAdapter=treeAdapter}_getNoahArkConditionCandidates(newElement,neAttrs){const candidates=[],neAttrsLength=neAttrs.length,neTagName=this.treeAdapter.getTagName(newElement),neNamespaceURI=this.treeAdapter.getNamespaceURI(newElement);for(let i=0;i<this.entries.length;i++){const entry=this.entries[i];if(entry.type===EntryType.Marker)break;const{element}=entry;if(this.treeAdapter.getTagName(element)===neTagName&&this.treeAdapter.getNamespaceURI(element)===neNamespaceURI){const elementAttrs=this.treeAdapter.getAttrList(element);elementAttrs.length===neAttrsLength&&candidates.push({idx:i,attrs:elementAttrs})}}return candidates}_ensureNoahArkCondition(newElement){if(this.entries.length<3)return;const neAttrs=this.treeAdapter.getAttrList(newElement),candidates=this._getNoahArkConditionCandidates(newElement,neAttrs);if(candidates.length<3)return;const neAttrsMap=new Map(neAttrs.map(neAttr=>[neAttr.name,neAttr.value]));let validCandidates=0;for(let i=0;i<candidates.length;i++){const candidate=candidates[i];candidate.attrs.every(cAttr=>neAttrsMap.get(cAttr.name)===cAttr.value)&&(validCandidates+=1,validCandidates>=3&&this.entries.splice(candidate.idx,1))}}insertMarker(){this.entries.unshift(MARKER)}pushElement(element,token){this._ensureNoahArkCondition(element),this.entries.unshift({type:EntryType.Element,element,token})}insertElementAfterBookmark(element,token){const bookmarkIdx=this.entries.indexOf(this.bookmark);this.entries.splice(bookmarkIdx,0,{type:EntryType.Element,element,token})}removeEntry(entry){const entryIndex=this.entries.indexOf(entry);-1!==entryIndex&&this.entries.splice(entryIndex,1)}clearToLastMarker(){const markerIdx=this.entries.indexOf(MARKER);-1===markerIdx?this.entries.length=0:this.entries.splice(0,markerIdx+1)}getElementEntryInScopeWithTagName(tagName){const entry=this.entries.find(entry=>entry.type===EntryType.Marker||this.treeAdapter.getTagName(entry.element)===tagName);return entry&&entry.type===EntryType.Element?entry:null}getElementEntry(element){return this.entries.find(entry=>entry.type===EntryType.Element&&entry.element===element)}}const defaultTreeAdapter={createDocument:()=>({nodeName:"#document",mode:DOCUMENT_MODE.NO_QUIRKS,childNodes:[]}),createDocumentFragment:()=>({nodeName:"#document-fragment",childNodes:[]}),createElement:(tagName,namespaceURI,attrs)=>({nodeName:tagName,tagName,attrs,namespaceURI,childNodes:[],parentNode:null}),createCommentNode:data=>({nodeName:"#comment",data,parentNode:null}),createTextNode:value=>({nodeName:"#text",value,parentNode:null}),appendChild(parentNode,newNode){parentNode.childNodes.push(newNode),newNode.parentNode=parentNode},insertBefore(parentNode,newNode,referenceNode){const insertionIdx=parentNode.childNodes.indexOf(referenceNode);parentNode.childNodes.splice(insertionIdx,0,newNode),newNode.parentNode=parentNode},setTemplateContent(templateElement,contentElement){templateElement.content=contentElement},getTemplateContent:templateElement=>templateElement.content,setDocumentType(document,name,publicId,systemId){const doctypeNode=document.childNodes.find(node=>"#documentType"===node.nodeName);if(doctypeNode)doctypeNode.name=name,doctypeNode.publicId=publicId,doctypeNode.systemId=systemId;else{const node={nodeName:"#documentType",name,publicId,systemId,parentNode:null};defaultTreeAdapter.appendChild(document,node)}},setDocumentMode(document,mode){document.mode=mode},getDocumentMode:document=>document.mode,detachNode(node){if(node.parentNode){const idx=node.parentNode.childNodes.indexOf(node);node.parentNode.childNodes.splice(idx,1),node.parentNode=null}},insertText(parentNode,text){if(parentNode.childNodes.length>0){const prevNode=parentNode.childNodes[parentNode.childNodes.length-1];if(defaultTreeAdapter.isTextNode(prevNode))return void(prevNode.value+=text)}defaultTreeAdapter.appendChild(parentNode,defaultTreeAdapter.createTextNode(text))},insertTextBefore(parentNode,text,referenceNode){const prevNode=parentNode.childNodes[parentNode.childNodes.indexOf(referenceNode)-1];prevNode&&defaultTreeAdapter.isTextNode(prevNode)?prevNode.value+=text:defaultTreeAdapter.insertBefore(parentNode,defaultTreeAdapter.createTextNode(text),referenceNode)},adoptAttributes(recipient,attrs){const recipientAttrsMap=new Set(recipient.attrs.map(attr=>attr.name));for(let j=0;j<attrs.length;j++)recipientAttrsMap.has(attrs[j].name)||recipient.attrs.push(attrs[j])},getFirstChild:node=>node.childNodes[0],getChildNodes:node=>node.childNodes,getParentNode:node=>node.parentNode,getAttrList:element=>element.attrs,getTagName:element=>element.tagName,getNamespaceURI:element=>element.namespaceURI,getTextNodeContent:textNode=>textNode.value,getCommentNodeContent:commentNode=>commentNode.data,getDocumentTypeNodeName:doctypeNode=>doctypeNode.name,getDocumentTypeNodePublicId:doctypeNode=>doctypeNode.publicId,getDocumentTypeNodeSystemId:doctypeNode=>doctypeNode.systemId,isTextNode:node=>"#text"===node.nodeName,isCommentNode:node=>"#comment"===node.nodeName,isDocumentTypeNode:node=>"#documentType"===node.nodeName,isElementNode:node=>Object.prototype.hasOwnProperty.call(node,"tagName"),setNodeSourceCodeLocation(node,location){node.sourceCodeLocation=location},getNodeSourceCodeLocation:node=>node.sourceCodeLocation,updateNodeSourceCodeLocation(node,endLocation){node.sourceCodeLocation={...node.sourceCodeLocation,...endLocation}}},QUIRKS_MODE_PUBLIC_ID_PREFIXES=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],QUIRKS_MODE_NO_SYSTEM_ID_PUBLIC_ID_PREFIXES=[...QUIRKS_MODE_PUBLIC_ID_PREFIXES,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],QUIRKS_MODE_PUBLIC_IDS=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),LIMITED_QUIRKS_PUBLIC_ID_PREFIXES=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],LIMITED_QUIRKS_WITH_SYSTEM_ID_PUBLIC_ID_PREFIXES=[...LIMITED_QUIRKS_PUBLIC_ID_PREFIXES,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function hasPrefix(publicId,prefixes){return prefixes.some(prefix=>publicId.startsWith(prefix))}const MIME_TYPES_TEXT_HTML="text/html",MIME_TYPES_APPLICATION_XML="application/xhtml+xml",SVG_ATTRS_ADJUSTMENT_MAP=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(attr=>[attr.toLowerCase(),attr])),XML_ATTRS_ADJUSTMENT_MAP=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:NS.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:NS.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:NS.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:NS.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:NS.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:NS.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:NS.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:NS.XML}],["xml:space",{prefix:"xml",name:"space",namespace:NS.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:NS.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:NS.XMLNS}]]),SVG_TAG_NAMES_ADJUSTMENT_MAP=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(tn=>[tn.toLowerCase(),tn])),EXITS_FOREIGN_CONTENT=new Set([TAG_ID.B,TAG_ID.BIG,TAG_ID.BLOCKQUOTE,TAG_ID.BODY,TAG_ID.BR,TAG_ID.CENTER,TAG_ID.CODE,TAG_ID.DD,TAG_ID.DIV,TAG_ID.DL,TAG_ID.DT,TAG_ID.EM,TAG_ID.EMBED,TAG_ID.H1,TAG_ID.H2,TAG_ID.H3,TAG_ID.H4,TAG_ID.H5,TAG_ID.H6,TAG_ID.HEAD,TAG_ID.HR,TAG_ID.I,TAG_ID.IMG,TAG_ID.LI,TAG_ID.LISTING,TAG_ID.MENU,TAG_ID.META,TAG_ID.NOBR,TAG_ID.OL,TAG_ID.P,TAG_ID.PRE,TAG_ID.RUBY,TAG_ID.S,TAG_ID.SMALL,TAG_ID.SPAN,TAG_ID.STRONG,TAG_ID.STRIKE,TAG_ID.SUB,TAG_ID.SUP,TAG_ID.TABLE,TAG_ID.TT,TAG_ID.U,TAG_ID.UL,TAG_ID.VAR]);function adjustTokenMathMLAttrs(token){for(let i=0;i<token.attrs.length;i++)if("definitionurl"===token.attrs[i].name){token.attrs[i].name="definitionURL";break}}function adjustTokenSVGAttrs(token){for(let i=0;i<token.attrs.length;i++){const adjustedAttrName=SVG_ATTRS_ADJUSTMENT_MAP.get(token.attrs[i].name);null!=adjustedAttrName&&(token.attrs[i].name=adjustedAttrName)}}function adjustTokenXMLAttrs(token){for(let i=0;i<token.attrs.length;i++){const adjustedAttrEntry=XML_ATTRS_ADJUSTMENT_MAP.get(token.attrs[i].name);adjustedAttrEntry&&(token.attrs[i].prefix=adjustedAttrEntry.prefix,token.attrs[i].name=adjustedAttrEntry.name,token.attrs[i].namespace=adjustedAttrEntry.namespace)}}function isIntegrationPoint(tn,ns,attrs,foreignNS){return(!foreignNS||foreignNS===NS.HTML)&&function isHtmlIntegrationPoint(tn,ns,attrs){if(ns===NS.MATHML&&tn===TAG_ID.ANNOTATION_XML)for(let i=0;i<attrs.length;i++)if(attrs[i].name===ATTRS.ENCODING){const value=attrs[i].value.toLowerCase();return value===MIME_TYPES_TEXT_HTML||value===MIME_TYPES_APPLICATION_XML}return ns===NS.SVG&&(tn===TAG_ID.FOREIGN_OBJECT||tn===TAG_ID.DESC||tn===TAG_ID.TITLE)}(tn,ns,attrs)||(!foreignNS||foreignNS===NS.MATHML)&&function isMathMLTextIntegrationPoint(tn,ns){return ns===NS.MATHML&&(tn===TAG_ID.MI||tn===TAG_ID.MO||tn===TAG_ID.MN||tn===TAG_ID.MS||tn===TAG_ID.MTEXT)}(tn,ns)}var InsertionMode;!function(InsertionMode){InsertionMode[InsertionMode.INITIAL=0]="INITIAL",InsertionMode[InsertionMode.BEFORE_HTML=1]="BEFORE_HTML",InsertionMode[InsertionMode.BEFORE_HEAD=2]="BEFORE_HEAD",InsertionMode[InsertionMode.IN_HEAD=3]="IN_HEAD",InsertionMode[InsertionMode.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",InsertionMode[InsertionMode.AFTER_HEAD=5]="AFTER_HEAD",InsertionMode[InsertionMode.IN_BODY=6]="IN_BODY",InsertionMode[InsertionMode.TEXT=7]="TEXT",InsertionMode[InsertionMode.IN_TABLE=8]="IN_TABLE",InsertionMode[InsertionMode.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",InsertionMode[InsertionMode.IN_CAPTION=10]="IN_CAPTION",InsertionMode[InsertionMode.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",InsertionMode[InsertionMode.IN_TABLE_BODY=12]="IN_TABLE_BODY",InsertionMode[InsertionMode.IN_ROW=13]="IN_ROW",InsertionMode[InsertionMode.IN_CELL=14]="IN_CELL",InsertionMode[InsertionMode.IN_SELECT=15]="IN_SELECT",InsertionMode[InsertionMode.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",InsertionMode[InsertionMode.IN_TEMPLATE=17]="IN_TEMPLATE",InsertionMode[InsertionMode.AFTER_BODY=18]="AFTER_BODY",InsertionMode[InsertionMode.IN_FRAMESET=19]="IN_FRAMESET",InsertionMode[InsertionMode.AFTER_FRAMESET=20]="AFTER_FRAMESET",InsertionMode[InsertionMode.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",InsertionMode[InsertionMode.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"}(InsertionMode||(InsertionMode={}));const BASE_LOC={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},TABLE_STRUCTURE_TAGS=new Set([TAG_ID.TABLE,TAG_ID.TBODY,TAG_ID.TFOOT,TAG_ID.THEAD,TAG_ID.TR]),defaultParserOptions={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:defaultTreeAdapter,onParseError:null};class parser_Parser{fragmentContext;scriptHandler;treeAdapter;onParseError;currentToken=null;options;document;constructor(options,document,fragmentContext=null,scriptHandler=null){this.fragmentContext=fragmentContext,this.scriptHandler=scriptHandler,this.options={...defaultParserOptions,...options},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=document??this.treeAdapter.createDocument(),this.tokenizer=new Tokenizer(this.options,this),this.activeFormattingElements=new FormattingElementList(this.treeAdapter),this.fragmentContextID=fragmentContext?getTagID(this.treeAdapter.getTagName(fragmentContext)):TAG_ID.UNKNOWN,this._setContextModes(fragmentContext??this.document,this.fragmentContextID),this.openElements=new OpenElementStack(this.document,this.treeAdapter,this)}static parse(html,options){const parser=new this(options);return parser.tokenizer.write(html,!0),parser.document}static getFragmentParser(fragmentContext,options){const opts={...defaultParserOptions,...options};fragmentContext??=opts.treeAdapter.createElement(TAG_NAMES.TEMPLATE,NS.HTML,[]);const documentMock=opts.treeAdapter.createElement("documentmock",NS.HTML,[]),parser=new this(opts,documentMock,fragmentContext);return parser.fragmentContextID===TAG_ID.TEMPLATE&&parser.tmplInsertionModeStack.unshift(InsertionMode.IN_TEMPLATE),parser._initTokenizerForFragmentParsing(),parser._insertFakeRootElement(),parser._resetInsertionMode(),parser._findFormInFragmentContext(),parser}getFragment(){const rootElement=this.treeAdapter.getFirstChild(this.document),fragment=this.treeAdapter.createDocumentFragment();return this._adoptNodes(rootElement,fragment),fragment}tokenizer;stopped=!1;insertionMode=InsertionMode.INITIAL;originalInsertionMode=InsertionMode.INITIAL;fragmentContextID;headElement=null;formElement=null;openElements;activeFormattingElements;currentNotInHTML=!1;tmplInsertionModeStack=[];pendingCharacterTokens=[];hasNonWhitespacePendingCharacterToken=!1;framesetOk=!0;skipNextNewLine=!1;fosterParentingEnabled=!1;_err(token,code,beforeToken){if(!this.onParseError)return;const loc=token.location??BASE_LOC,err={code,startLine:loc.startLine,startCol:loc.startCol,startOffset:loc.startOffset,endLine:beforeToken?loc.startLine:loc.endLine,endCol:beforeToken?loc.startCol:loc.endCol,endOffset:beforeToken?loc.startOffset:loc.endOffset};this.onParseError(err)}onItemPush(node,tid,isTop){this.treeAdapter.onItemPush?.(node),isTop&&this.openElements.stackTop>0&&this._setContextModes(node,tid)}onItemPop(node,isTop){if(this.options.sourceCodeLocationInfo&&this._setEndLocation(node,this.currentToken),this.treeAdapter.onItemPop?.(node,this.openElements.current),isTop){let current,currentTagId;0===this.openElements.stackTop&&this.fragmentContext?(current=this.fragmentContext,currentTagId=this.fragmentContextID):({current,currentTagId}=this.openElements),this._setContextModes(current,currentTagId)}}_setContextModes(current,tid){const isHTML=current===this.document||this.treeAdapter.getNamespaceURI(current)===NS.HTML;this.currentNotInHTML=!isHTML,this.tokenizer.inForeignNode=!isHTML&&!this._isIntegrationPoint(tid,current)}_switchToTextParsing(currentToken,nextTokenizerState){this._insertElement(currentToken,NS.HTML),this.tokenizer.state=nextTokenizerState,this.originalInsertionMode=this.insertionMode,this.insertionMode=InsertionMode.TEXT}switchToPlaintextParsing(){this.insertionMode=InsertionMode.TEXT,this.originalInsertionMode=InsertionMode.IN_BODY,this.tokenizer.state=TokenizerMode_PLAINTEXT}_getAdjustedCurrentElement(){return 0===this.openElements.stackTop&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let node=this.fragmentContext;for(;node;){if(this.treeAdapter.getTagName(node)===TAG_NAMES.FORM){this.formElement=node;break}node=this.treeAdapter.getParentNode(node)}}_initTokenizerForFragmentParsing(){if(this.fragmentContext&&this.treeAdapter.getNamespaceURI(this.fragmentContext)===NS.HTML)switch(this.fragmentContextID){case TAG_ID.TITLE:case TAG_ID.TEXTAREA:this.tokenizer.state=TokenizerMode_RCDATA;break;case TAG_ID.STYLE:case TAG_ID.XMP:case TAG_ID.IFRAME:case TAG_ID.NOEMBED:case TAG_ID.NOFRAMES:case TAG_ID.NOSCRIPT:this.tokenizer.state=TokenizerMode_RAWTEXT;break;case TAG_ID.SCRIPT:this.tokenizer.state=TokenizerMode_SCRIPT_DATA;break;case TAG_ID.PLAINTEXT:this.tokenizer.state=TokenizerMode_PLAINTEXT}}_setDocumentType(token){const name=token.name||"",publicId=token.publicId||"",systemId=token.systemId||"";if(this.treeAdapter.setDocumentType(this.document,name,publicId,systemId),token.location){const docTypeNode=this.treeAdapter.getChildNodes(this.document).find(node=>this.treeAdapter.isDocumentTypeNode(node));docTypeNode&&this.treeAdapter.setNodeSourceCodeLocation(docTypeNode,token.location)}}_attachElementToTree(element,location){if(this.options.sourceCodeLocationInfo){const loc=location&&{...location,startTag:location};this.treeAdapter.setNodeSourceCodeLocation(element,loc)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(element);else{const parent=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(parent,element)}}_appendElement(token,namespaceURI){const element=this.treeAdapter.createElement(token.tagName,namespaceURI,token.attrs);this._attachElementToTree(element,token.location)}_insertElement(token,namespaceURI){const element=this.treeAdapter.createElement(token.tagName,namespaceURI,token.attrs);this._attachElementToTree(element,token.location),this.openElements.push(element,token.tagID)}_insertFakeElement(tagName,tagID){const element=this.treeAdapter.createElement(tagName,NS.HTML,[]);this._attachElementToTree(element,null),this.openElements.push(element,tagID)}_insertTemplate(token){const tmpl=this.treeAdapter.createElement(token.tagName,NS.HTML,token.attrs),content=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(tmpl,content),this._attachElementToTree(tmpl,token.location),this.openElements.push(tmpl,token.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(content,null)}_insertFakeRootElement(){const element=this.treeAdapter.createElement(TAG_NAMES.HTML,NS.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(element,null),this.treeAdapter.appendChild(this.openElements.current,element),this.openElements.push(element,TAG_ID.HTML)}_appendCommentNode(token,parent){const commentNode=this.treeAdapter.createCommentNode(token.data);this.treeAdapter.appendChild(parent,commentNode),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(commentNode,token.location)}_insertCharacters(token){let parent,beforeElement;if(this._shouldFosterParentOnInsertion()?(({parent,beforeElement}=this._findFosterParentingLocation()),beforeElement?this.treeAdapter.insertTextBefore(parent,token.chars,beforeElement):this.treeAdapter.insertText(parent,token.chars)):(parent=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(parent,token.chars)),!token.location)return;const siblings=this.treeAdapter.getChildNodes(parent),textNodeIdx=beforeElement?siblings.lastIndexOf(beforeElement):siblings.length,textNode=siblings[textNodeIdx-1];if(this.treeAdapter.getNodeSourceCodeLocation(textNode)){const{endLine,endCol,endOffset}=token.location;this.treeAdapter.updateNodeSourceCodeLocation(textNode,{endLine,endCol,endOffset})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(textNode,token.location)}_adoptNodes(donor,recipient){for(let child=this.treeAdapter.getFirstChild(donor);child;child=this.treeAdapter.getFirstChild(donor))this.treeAdapter.detachNode(child),this.treeAdapter.appendChild(recipient,child)}_setEndLocation(element,closingToken){if(this.treeAdapter.getNodeSourceCodeLocation(element)&&closingToken.location){const ctLoc=closingToken.location,tn=this.treeAdapter.getTagName(element),endLoc=closingToken.type===TokenType.END_TAG&&tn===closingToken.tagName?{endTag:{...ctLoc},endLine:ctLoc.endLine,endCol:ctLoc.endCol,endOffset:ctLoc.endOffset}:{endLine:ctLoc.startLine,endCol:ctLoc.startCol,endOffset:ctLoc.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(element,endLoc)}}shouldProcessStartTagTokenInForeignContent(token){if(!this.currentNotInHTML)return!1;let current,currentTagId;return 0===this.openElements.stackTop&&this.fragmentContext?(current=this.fragmentContext,currentTagId=this.fragmentContextID):({current,currentTagId}=this.openElements),(token.tagID!==TAG_ID.SVG||this.treeAdapter.getTagName(current)!==TAG_NAMES.ANNOTATION_XML||this.treeAdapter.getNamespaceURI(current)!==NS.MATHML)&&(this.tokenizer.inForeignNode||(token.tagID===TAG_ID.MGLYPH||token.tagID===TAG_ID.MALIGNMARK)&&!this._isIntegrationPoint(currentTagId,current,NS.HTML))}_processToken(token){switch(token.type){case TokenType.CHARACTER:this.onCharacter(token);break;case TokenType.NULL_CHARACTER:this.onNullCharacter(token);break;case TokenType.COMMENT:this.onComment(token);break;case TokenType.DOCTYPE:this.onDoctype(token);break;case TokenType.START_TAG:this._processStartTag(token);break;case TokenType.END_TAG:this.onEndTag(token);break;case TokenType.EOF:this.onEof(token);break;case TokenType.WHITESPACE_CHARACTER:this.onWhitespaceCharacter(token)}}_isIntegrationPoint(tid,element,foreignNS){return isIntegrationPoint(tid,this.treeAdapter.getNamespaceURI(element),this.treeAdapter.getAttrList(element),foreignNS)}_reconstructActiveFormattingElements(){const listLength=this.activeFormattingElements.entries.length;if(listLength){const endIndex=this.activeFormattingElements.entries.findIndex(entry=>entry.type===EntryType.Marker||this.openElements.contains(entry.element));for(let i=-1===endIndex?listLength-1:endIndex-1;i>=0;i--){const entry=this.activeFormattingElements.entries[i];this._insertElement(entry.token,this.treeAdapter.getNamespaceURI(entry.element)),entry.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=InsertionMode.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(TAG_ID.P),this.openElements.popUntilTagNamePopped(TAG_ID.P)}_resetInsertionMode(){for(let i=this.openElements.stackTop;i>=0;i--)switch(0===i&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[i]){case TAG_ID.TR:return void(this.insertionMode=InsertionMode.IN_ROW);case TAG_ID.TBODY:case TAG_ID.THEAD:case TAG_ID.TFOOT:return void(this.insertionMode=InsertionMode.IN_TABLE_BODY);case TAG_ID.CAPTION:return void(this.insertionMode=InsertionMode.IN_CAPTION);case TAG_ID.COLGROUP:return void(this.insertionMode=InsertionMode.IN_COLUMN_GROUP);case TAG_ID.TABLE:return void(this.insertionMode=InsertionMode.IN_TABLE);case TAG_ID.BODY:return void(this.insertionMode=InsertionMode.IN_BODY);case TAG_ID.FRAMESET:return void(this.insertionMode=InsertionMode.IN_FRAMESET);case TAG_ID.SELECT:return void this._resetInsertionModeForSelect(i);case TAG_ID.TEMPLATE:return void(this.insertionMode=this.tmplInsertionModeStack[0]);case TAG_ID.HTML:return void(this.insertionMode=this.headElement?InsertionMode.AFTER_HEAD:InsertionMode.BEFORE_HEAD);case TAG_ID.TD:case TAG_ID.TH:if(i>0)return void(this.insertionMode=InsertionMode.IN_CELL);break;case TAG_ID.HEAD:if(i>0)return void(this.insertionMode=InsertionMode.IN_HEAD)}this.insertionMode=InsertionMode.IN_BODY}_resetInsertionModeForSelect(selectIdx){if(selectIdx>0)for(let i=selectIdx-1;i>0;i--){const tn=this.openElements.tagIDs[i];if(tn===TAG_ID.TEMPLATE)break;if(tn===TAG_ID.TABLE)return void(this.insertionMode=InsertionMode.IN_SELECT_IN_TABLE)}this.insertionMode=InsertionMode.IN_SELECT}_isElementCausesFosterParenting(tn){return TABLE_STRUCTURE_TAGS.has(tn)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let i=this.openElements.stackTop;i>=0;i--){const openElement=this.openElements.items[i];switch(this.openElements.tagIDs[i]){case TAG_ID.TEMPLATE:if(this.treeAdapter.getNamespaceURI(openElement)===NS.HTML)return{parent:this.treeAdapter.getTemplateContent(openElement),beforeElement:null};break;case TAG_ID.TABLE:{const parent=this.treeAdapter.getParentNode(openElement);return parent?{parent,beforeElement:openElement}:{parent:this.openElements.items[i-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(element){const location=this._findFosterParentingLocation();location.beforeElement?this.treeAdapter.insertBefore(location.parent,element,location.beforeElement):this.treeAdapter.appendChild(location.parent,element)}_isSpecialElement(element,id){const ns=this.treeAdapter.getNamespaceURI(element);return SPECIAL_ELEMENTS[ns].has(id)}onCharacter(token){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode)(function characterInForeignContent(p,token){p._insertCharacters(token),p.framesetOk=!1})(this,token);else switch(this.insertionMode){case InsertionMode.INITIAL:tokenInInitialMode(this,token);break;case InsertionMode.BEFORE_HTML:tokenBeforeHtml(this,token);break;case InsertionMode.BEFORE_HEAD:tokenBeforeHead(this,token);break;case InsertionMode.IN_HEAD:tokenInHead(this,token);break;case InsertionMode.IN_HEAD_NO_SCRIPT:tokenInHeadNoScript(this,token);break;case InsertionMode.AFTER_HEAD:tokenAfterHead(this,token);break;case InsertionMode.IN_BODY:case InsertionMode.IN_CAPTION:case InsertionMode.IN_CELL:case InsertionMode.IN_TEMPLATE:characterInBody(this,token);break;case InsertionMode.TEXT:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:this._insertCharacters(token);break;case InsertionMode.IN_TABLE:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:characterInTable(this,token);break;case InsertionMode.IN_TABLE_TEXT:characterInTableText(this,token);break;case InsertionMode.IN_COLUMN_GROUP:tokenInColumnGroup(this,token);break;case InsertionMode.AFTER_BODY:tokenAfterBody(this,token);break;case InsertionMode.AFTER_AFTER_BODY:tokenAfterAfterBody(this,token)}}onNullCharacter(token){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode)(function nullCharacterInForeignContent(p,token){token.chars="�",p._insertCharacters(token)})(this,token);else switch(this.insertionMode){case InsertionMode.INITIAL:tokenInInitialMode(this,token);break;case InsertionMode.BEFORE_HTML:tokenBeforeHtml(this,token);break;case InsertionMode.BEFORE_HEAD:tokenBeforeHead(this,token);break;case InsertionMode.IN_HEAD:tokenInHead(this,token);break;case InsertionMode.IN_HEAD_NO_SCRIPT:tokenInHeadNoScript(this,token);break;case InsertionMode.AFTER_HEAD:tokenAfterHead(this,token);break;case InsertionMode.TEXT:this._insertCharacters(token);break;case InsertionMode.IN_TABLE:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:characterInTable(this,token);break;case InsertionMode.IN_COLUMN_GROUP:tokenInColumnGroup(this,token);break;case InsertionMode.AFTER_BODY:tokenAfterBody(this,token);break;case InsertionMode.AFTER_AFTER_BODY:tokenAfterAfterBody(this,token)}}onComment(token){if(this.skipNextNewLine=!1,this.currentNotInHTML)appendComment(this,token);else switch(this.insertionMode){case InsertionMode.INITIAL:case InsertionMode.BEFORE_HTML:case InsertionMode.BEFORE_HEAD:case InsertionMode.IN_HEAD:case InsertionMode.IN_HEAD_NO_SCRIPT:case InsertionMode.AFTER_HEAD:case InsertionMode.IN_BODY:case InsertionMode.IN_TABLE:case InsertionMode.IN_CAPTION:case InsertionMode.IN_COLUMN_GROUP:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:case InsertionMode.IN_CELL:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:case InsertionMode.IN_TEMPLATE:case InsertionMode.IN_FRAMESET:case InsertionMode.AFTER_FRAMESET:appendComment(this,token);break;case InsertionMode.IN_TABLE_TEXT:tokenInTableText(this,token);break;case InsertionMode.AFTER_BODY:!function appendCommentToRootHtmlElement(p,token){p._appendCommentNode(token,p.openElements.items[0])}(this,token);break;case InsertionMode.AFTER_AFTER_BODY:case InsertionMode.AFTER_AFTER_FRAMESET:!function appendCommentToDocument(p,token){p._appendCommentNode(token,p.document)}(this,token)}}onDoctype(token){switch(this.skipNextNewLine=!1,this.insertionMode){case InsertionMode.INITIAL:!function doctypeInInitialMode(p,token){p._setDocumentType(token);const mode=token.forceQuirks?DOCUMENT_MODE.QUIRKS:function getDocumentMode(token){if("html"!==token.name)return DOCUMENT_MODE.QUIRKS;const{systemId}=token;if(systemId&&"http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd"===systemId.toLowerCase())return DOCUMENT_MODE.QUIRKS;let{publicId}=token;if(null!==publicId){if(publicId=publicId.toLowerCase(),QUIRKS_MODE_PUBLIC_IDS.has(publicId))return DOCUMENT_MODE.QUIRKS;let prefixes=null===systemId?QUIRKS_MODE_NO_SYSTEM_ID_PUBLIC_ID_PREFIXES:QUIRKS_MODE_PUBLIC_ID_PREFIXES;if(hasPrefix(publicId,prefixes))return DOCUMENT_MODE.QUIRKS;if(prefixes=null===systemId?LIMITED_QUIRKS_PUBLIC_ID_PREFIXES:LIMITED_QUIRKS_WITH_SYSTEM_ID_PUBLIC_ID_PREFIXES,hasPrefix(publicId,prefixes))return DOCUMENT_MODE.LIMITED_QUIRKS}return DOCUMENT_MODE.NO_QUIRKS}(token);(function isConforming(token){return"html"===token.name&&null===token.publicId&&(null===token.systemId||"about:legacy-compat"===token.systemId)})(token)||p._err(token,ERR.nonConformingDoctype);p.treeAdapter.setDocumentMode(p.document,mode),p.insertionMode=InsertionMode.BEFORE_HTML}(this,token);break;case InsertionMode.BEFORE_HEAD:case InsertionMode.IN_HEAD:case InsertionMode.IN_HEAD_NO_SCRIPT:case InsertionMode.AFTER_HEAD:this._err(token,ERR.misplacedDoctype);break;case InsertionMode.IN_TABLE_TEXT:tokenInTableText(this,token)}}onStartTag(token){this.skipNextNewLine=!1,this.currentToken=token,this._processStartTag(token),token.selfClosing&&!token.ackSelfClosing&&this._err(token,ERR.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(token){this.shouldProcessStartTagTokenInForeignContent(token)?function startTagInForeignContent(p,token){if(function causesExit(startTagToken){const tn=startTagToken.tagID;return tn===TAG_ID.FONT&&startTagToken.attrs.some(({name})=>name===ATTRS.COLOR||name===ATTRS.SIZE||name===ATTRS.FACE)||EXITS_FOREIGN_CONTENT.has(tn)}(token))popUntilHtmlOrIntegrationPoint(p),p._startTagOutsideForeignContent(token);else{const current=p._getAdjustedCurrentElement(),currentNs=p.treeAdapter.getNamespaceURI(current);currentNs===NS.MATHML?adjustTokenMathMLAttrs(token):currentNs===NS.SVG&&(!function adjustTokenSVGTagName(token){const adjustedTagName=SVG_TAG_NAMES_ADJUSTMENT_MAP.get(token.tagName);null!=adjustedTagName&&(token.tagName=adjustedTagName,token.tagID=getTagID(token.tagName))}(token),adjustTokenSVGAttrs(token)),adjustTokenXMLAttrs(token),token.selfClosing?p._appendElement(token,currentNs):p._insertElement(token,currentNs),token.ackSelfClosing=!0}}(this,token):this._startTagOutsideForeignContent(token)}_startTagOutsideForeignContent(token){switch(this.insertionMode){case InsertionMode.INITIAL:tokenInInitialMode(this,token);break;case InsertionMode.BEFORE_HTML:!function startTagBeforeHtml(p,token){token.tagID===TAG_ID.HTML?(p._insertElement(token,NS.HTML),p.insertionMode=InsertionMode.BEFORE_HEAD):tokenBeforeHtml(p,token)}(this,token);break;case InsertionMode.BEFORE_HEAD:!function startTagBeforeHead(p,token){switch(token.tagID){case TAG_ID.HTML:startTagInBody(p,token);break;case TAG_ID.HEAD:p._insertElement(token,NS.HTML),p.headElement=p.openElements.current,p.insertionMode=InsertionMode.IN_HEAD;break;default:tokenBeforeHead(p,token)}}(this,token);break;case InsertionMode.IN_HEAD:startTagInHead(this,token);break;case InsertionMode.IN_HEAD_NO_SCRIPT:!function startTagInHeadNoScript(p,token){switch(token.tagID){case TAG_ID.HTML:startTagInBody(p,token);break;case TAG_ID.BASEFONT:case TAG_ID.BGSOUND:case TAG_ID.HEAD:case TAG_ID.LINK:case TAG_ID.META:case TAG_ID.NOFRAMES:case TAG_ID.STYLE:startTagInHead(p,token);break;case TAG_ID.NOSCRIPT:p._err(token,ERR.nestedNoscriptInHead);break;default:tokenInHeadNoScript(p,token)}}(this,token);break;case InsertionMode.AFTER_HEAD:!function startTagAfterHead(p,token){switch(token.tagID){case TAG_ID.HTML:startTagInBody(p,token);break;case TAG_ID.BODY:p._insertElement(token,NS.HTML),p.framesetOk=!1,p.insertionMode=InsertionMode.IN_BODY;break;case TAG_ID.FRAMESET:p._insertElement(token,NS.HTML),p.insertionMode=InsertionMode.IN_FRAMESET;break;case TAG_ID.BASE:case TAG_ID.BASEFONT:case TAG_ID.BGSOUND:case TAG_ID.LINK:case TAG_ID.META:case TAG_ID.NOFRAMES:case TAG_ID.SCRIPT:case TAG_ID.STYLE:case TAG_ID.TEMPLATE:case TAG_ID.TITLE:p._err(token,ERR.abandonedHeadElementChild),p.openElements.push(p.headElement,TAG_ID.HEAD),startTagInHead(p,token),p.openElements.remove(p.headElement);break;case TAG_ID.HEAD:p._err(token,ERR.misplacedStartTagForHeadElement);break;default:tokenAfterHead(p,token)}}(this,token);break;case InsertionMode.IN_BODY:startTagInBody(this,token);break;case InsertionMode.IN_TABLE:startTagInTable(this,token);break;case InsertionMode.IN_TABLE_TEXT:tokenInTableText(this,token);break;case InsertionMode.IN_CAPTION:!function startTagInCaption(p,token){const tn=token.tagID;TABLE_VOID_ELEMENTS.has(tn)?p.openElements.hasInTableScope(TAG_ID.CAPTION)&&(p.openElements.generateImpliedEndTags(),p.openElements.popUntilTagNamePopped(TAG_ID.CAPTION),p.activeFormattingElements.clearToLastMarker(),p.insertionMode=InsertionMode.IN_TABLE,startTagInTable(p,token)):startTagInBody(p,token)}(this,token);break;case InsertionMode.IN_COLUMN_GROUP:startTagInColumnGroup(this,token);break;case InsertionMode.IN_TABLE_BODY:startTagInTableBody(this,token);break;case InsertionMode.IN_ROW:startTagInRow(this,token);break;case InsertionMode.IN_CELL:!function startTagInCell(p,token){const tn=token.tagID;TABLE_VOID_ELEMENTS.has(tn)?(p.openElements.hasInTableScope(TAG_ID.TD)||p.openElements.hasInTableScope(TAG_ID.TH))&&(p._closeTableCell(),startTagInRow(p,token)):startTagInBody(p,token)}(this,token);break;case InsertionMode.IN_SELECT:startTagInSelect(this,token);break;case InsertionMode.IN_SELECT_IN_TABLE:!function startTagInSelectInTable(p,token){const tn=token.tagID;tn===TAG_ID.CAPTION||tn===TAG_ID.TABLE||tn===TAG_ID.TBODY||tn===TAG_ID.TFOOT||tn===TAG_ID.THEAD||tn===TAG_ID.TR||tn===TAG_ID.TD||tn===TAG_ID.TH?(p.openElements.popUntilTagNamePopped(TAG_ID.SELECT),p._resetInsertionMode(),p._processStartTag(token)):startTagInSelect(p,token)}(this,token);break;case InsertionMode.IN_TEMPLATE:!function startTagInTemplate(p,token){switch(token.tagID){case TAG_ID.BASE:case TAG_ID.BASEFONT:case TAG_ID.BGSOUND:case TAG_ID.LINK:case TAG_ID.META:case TAG_ID.NOFRAMES:case TAG_ID.SCRIPT:case TAG_ID.STYLE:case TAG_ID.TEMPLATE:case TAG_ID.TITLE:startTagInHead(p,token);break;case TAG_ID.CAPTION:case TAG_ID.COLGROUP:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:p.tmplInsertionModeStack[0]=InsertionMode.IN_TABLE,p.insertionMode=InsertionMode.IN_TABLE,startTagInTable(p,token);break;case TAG_ID.COL:p.tmplInsertionModeStack[0]=InsertionMode.IN_COLUMN_GROUP,p.insertionMode=InsertionMode.IN_COLUMN_GROUP,startTagInColumnGroup(p,token);break;case TAG_ID.TR:p.tmplInsertionModeStack[0]=InsertionMode.IN_TABLE_BODY,p.insertionMode=InsertionMode.IN_TABLE_BODY,startTagInTableBody(p,token);break;case TAG_ID.TD:case TAG_ID.TH:p.tmplInsertionModeStack[0]=InsertionMode.IN_ROW,p.insertionMode=InsertionMode.IN_ROW,startTagInRow(p,token);break;default:p.tmplInsertionModeStack[0]=InsertionMode.IN_BODY,p.insertionMode=InsertionMode.IN_BODY,startTagInBody(p,token)}}(this,token);break;case InsertionMode.AFTER_BODY:!function startTagAfterBody(p,token){token.tagID===TAG_ID.HTML?startTagInBody(p,token):tokenAfterBody(p,token)}(this,token);break;case InsertionMode.IN_FRAMESET:!function startTagInFrameset(p,token){switch(token.tagID){case TAG_ID.HTML:startTagInBody(p,token);break;case TAG_ID.FRAMESET:p._insertElement(token,NS.HTML);break;case TAG_ID.FRAME:p._appendElement(token,NS.HTML),token.ackSelfClosing=!0;break;case TAG_ID.NOFRAMES:startTagInHead(p,token)}}(this,token);break;case InsertionMode.AFTER_FRAMESET:!function startTagAfterFrameset(p,token){switch(token.tagID){case TAG_ID.HTML:startTagInBody(p,token);break;case TAG_ID.NOFRAMES:startTagInHead(p,token)}}(this,token);break;case InsertionMode.AFTER_AFTER_BODY:!function startTagAfterAfterBody(p,token){token.tagID===TAG_ID.HTML?startTagInBody(p,token):tokenAfterAfterBody(p,token)}(this,token);break;case InsertionMode.AFTER_AFTER_FRAMESET:!function startTagAfterAfterFrameset(p,token){switch(token.tagID){case TAG_ID.HTML:startTagInBody(p,token);break;case TAG_ID.NOFRAMES:startTagInHead(p,token)}}(this,token)}}onEndTag(token){this.skipNextNewLine=!1,this.currentToken=token,this.currentNotInHTML?function endTagInForeignContent(p,token){if(token.tagID===TAG_ID.P||token.tagID===TAG_ID.BR)return popUntilHtmlOrIntegrationPoint(p),void p._endTagOutsideForeignContent(token);for(let i=p.openElements.stackTop;i>0;i--){const element=p.openElements.items[i];if(p.treeAdapter.getNamespaceURI(element)===NS.HTML){p._endTagOutsideForeignContent(token);break}const tagName=p.treeAdapter.getTagName(element);if(tagName.toLowerCase()===token.tagName){token.tagName=tagName,p.openElements.shortenToLength(i);break}}}(this,token):this._endTagOutsideForeignContent(token)}_endTagOutsideForeignContent(token){switch(this.insertionMode){case InsertionMode.INITIAL:tokenInInitialMode(this,token);break;case InsertionMode.BEFORE_HTML:!function endTagBeforeHtml(p,token){const tn=token.tagID;tn!==TAG_ID.HTML&&tn!==TAG_ID.HEAD&&tn!==TAG_ID.BODY&&tn!==TAG_ID.BR||tokenBeforeHtml(p,token)}(this,token);break;case InsertionMode.BEFORE_HEAD:!function endTagBeforeHead(p,token){const tn=token.tagID;tn===TAG_ID.HEAD||tn===TAG_ID.BODY||tn===TAG_ID.HTML||tn===TAG_ID.BR?tokenBeforeHead(p,token):p._err(token,ERR.endTagWithoutMatchingOpenElement)}(this,token);break;case InsertionMode.IN_HEAD:!function endTagInHead(p,token){switch(token.tagID){case TAG_ID.HEAD:p.openElements.pop(),p.insertionMode=InsertionMode.AFTER_HEAD;break;case TAG_ID.BODY:case TAG_ID.BR:case TAG_ID.HTML:tokenInHead(p,token);break;case TAG_ID.TEMPLATE:templateEndTagInHead(p,token);break;default:p._err(token,ERR.endTagWithoutMatchingOpenElement)}}(this,token);break;case InsertionMode.IN_HEAD_NO_SCRIPT:!function endTagInHeadNoScript(p,token){switch(token.tagID){case TAG_ID.NOSCRIPT:p.openElements.pop(),p.insertionMode=InsertionMode.IN_HEAD;break;case TAG_ID.BR:tokenInHeadNoScript(p,token);break;default:p._err(token,ERR.endTagWithoutMatchingOpenElement)}}(this,token);break;case InsertionMode.AFTER_HEAD:!function endTagAfterHead(p,token){switch(token.tagID){case TAG_ID.BODY:case TAG_ID.HTML:case TAG_ID.BR:tokenAfterHead(p,token);break;case TAG_ID.TEMPLATE:templateEndTagInHead(p,token);break;default:p._err(token,ERR.endTagWithoutMatchingOpenElement)}}(this,token);break;case InsertionMode.IN_BODY:endTagInBody(this,token);break;case InsertionMode.TEXT:!function endTagInText(p,token){token.tagID===TAG_ID.SCRIPT&&p.scriptHandler?.(p.openElements.current);p.openElements.pop(),p.insertionMode=p.originalInsertionMode}(this,token);break;case InsertionMode.IN_TABLE:endTagInTable(this,token);break;case InsertionMode.IN_TABLE_TEXT:tokenInTableText(this,token);break;case InsertionMode.IN_CAPTION:!function endTagInCaption(p,token){const tn=token.tagID;switch(tn){case TAG_ID.CAPTION:case TAG_ID.TABLE:p.openElements.hasInTableScope(TAG_ID.CAPTION)&&(p.openElements.generateImpliedEndTags(),p.openElements.popUntilTagNamePopped(TAG_ID.CAPTION),p.activeFormattingElements.clearToLastMarker(),p.insertionMode=InsertionMode.IN_TABLE,tn===TAG_ID.TABLE&&endTagInTable(p,token));break;case TAG_ID.BODY:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:case TAG_ID.TBODY:case TAG_ID.TD:case TAG_ID.TFOOT:case TAG_ID.TH:case TAG_ID.THEAD:case TAG_ID.TR:break;default:endTagInBody(p,token)}}(this,token);break;case InsertionMode.IN_COLUMN_GROUP:!function endTagInColumnGroup(p,token){switch(token.tagID){case TAG_ID.COLGROUP:p.openElements.currentTagId===TAG_ID.COLGROUP&&(p.openElements.pop(),p.insertionMode=InsertionMode.IN_TABLE);break;case TAG_ID.TEMPLATE:templateEndTagInHead(p,token);break;case TAG_ID.COL:break;default:tokenInColumnGroup(p,token)}}(this,token);break;case InsertionMode.IN_TABLE_BODY:endTagInTableBody(this,token);break;case InsertionMode.IN_ROW:endTagInRow(this,token);break;case InsertionMode.IN_CELL:!function endTagInCell(p,token){const tn=token.tagID;switch(tn){case TAG_ID.TD:case TAG_ID.TH:p.openElements.hasInTableScope(tn)&&(p.openElements.generateImpliedEndTags(),p.openElements.popUntilTagNamePopped(tn),p.activeFormattingElements.clearToLastMarker(),p.insertionMode=InsertionMode.IN_ROW);break;case TAG_ID.TABLE:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:case TAG_ID.TR:p.openElements.hasInTableScope(tn)&&(p._closeTableCell(),endTagInRow(p,token));break;case TAG_ID.BODY:case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:break;default:endTagInBody(p,token)}}(this,token);break;case InsertionMode.IN_SELECT:endTagInSelect(this,token);break;case InsertionMode.IN_SELECT_IN_TABLE:!function endTagInSelectInTable(p,token){const tn=token.tagID;tn===TAG_ID.CAPTION||tn===TAG_ID.TABLE||tn===TAG_ID.TBODY||tn===TAG_ID.TFOOT||tn===TAG_ID.THEAD||tn===TAG_ID.TR||tn===TAG_ID.TD||tn===TAG_ID.TH?p.openElements.hasInTableScope(tn)&&(p.openElements.popUntilTagNamePopped(TAG_ID.SELECT),p._resetInsertionMode(),p.onEndTag(token)):endTagInSelect(p,token)}(this,token);break;case InsertionMode.IN_TEMPLATE:!function endTagInTemplate(p,token){token.tagID===TAG_ID.TEMPLATE&&templateEndTagInHead(p,token)}(this,token);break;case InsertionMode.AFTER_BODY:endTagAfterBody(this,token);break;case InsertionMode.IN_FRAMESET:!function endTagInFrameset(p,token){token.tagID!==TAG_ID.FRAMESET||p.openElements.isRootHtmlElementCurrent()||(p.openElements.pop(),p.fragmentContext||p.openElements.currentTagId===TAG_ID.FRAMESET||(p.insertionMode=InsertionMode.AFTER_FRAMESET))}(this,token);break;case InsertionMode.AFTER_FRAMESET:!function endTagAfterFrameset(p,token){token.tagID===TAG_ID.HTML&&(p.insertionMode=InsertionMode.AFTER_AFTER_FRAMESET)}(this,token);break;case InsertionMode.AFTER_AFTER_BODY:tokenAfterAfterBody(this,token)}}onEof(token){switch(this.insertionMode){case InsertionMode.INITIAL:tokenInInitialMode(this,token);break;case InsertionMode.BEFORE_HTML:tokenBeforeHtml(this,token);break;case InsertionMode.BEFORE_HEAD:tokenBeforeHead(this,token);break;case InsertionMode.IN_HEAD:tokenInHead(this,token);break;case InsertionMode.IN_HEAD_NO_SCRIPT:tokenInHeadNoScript(this,token);break;case InsertionMode.AFTER_HEAD:tokenAfterHead(this,token);break;case InsertionMode.IN_BODY:case InsertionMode.IN_TABLE:case InsertionMode.IN_CAPTION:case InsertionMode.IN_COLUMN_GROUP:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:case InsertionMode.IN_CELL:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:eofInBody(this,token);break;case InsertionMode.TEXT:!function eofInText(p,token){p._err(token,ERR.eofInElementThatCanContainOnlyText),p.openElements.pop(),p.insertionMode=p.originalInsertionMode,p.onEof(token)}(this,token);break;case InsertionMode.IN_TABLE_TEXT:tokenInTableText(this,token);break;case InsertionMode.IN_TEMPLATE:eofInTemplate(this,token);break;case InsertionMode.AFTER_BODY:case InsertionMode.IN_FRAMESET:case InsertionMode.AFTER_FRAMESET:case InsertionMode.AFTER_AFTER_BODY:case InsertionMode.AFTER_AFTER_FRAMESET:stopParsing(this,token)}}onWhitespaceCharacter(token){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,token.chars.charCodeAt(0)===CODE_POINTS.LINE_FEED)){if(1===token.chars.length)return;token.chars=token.chars.substr(1)}if(this.tokenizer.inForeignNode)this._insertCharacters(token);else switch(this.insertionMode){case InsertionMode.IN_HEAD:case InsertionMode.IN_HEAD_NO_SCRIPT:case InsertionMode.AFTER_HEAD:case InsertionMode.TEXT:case InsertionMode.IN_COLUMN_GROUP:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:case InsertionMode.IN_FRAMESET:case InsertionMode.AFTER_FRAMESET:this._insertCharacters(token);break;case InsertionMode.IN_BODY:case InsertionMode.IN_CAPTION:case InsertionMode.IN_CELL:case InsertionMode.IN_TEMPLATE:case InsertionMode.AFTER_BODY:case InsertionMode.AFTER_AFTER_BODY:case InsertionMode.AFTER_AFTER_FRAMESET:whitespaceCharacterInBody(this,token);break;case InsertionMode.IN_TABLE:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:characterInTable(this,token);break;case InsertionMode.IN_TABLE_TEXT:whitespaceCharacterInTableText(this,token)}}}function aaObtainFormattingElementEntry(p,token){let formattingElementEntry=p.activeFormattingElements.getElementEntryInScopeWithTagName(token.tagName);return formattingElementEntry?p.openElements.contains(formattingElementEntry.element)?p.openElements.hasInScope(token.tagID)||(formattingElementEntry=null):(p.activeFormattingElements.removeEntry(formattingElementEntry),formattingElementEntry=null):genericEndTagInBody(p,token),formattingElementEntry}function aaObtainFurthestBlock(p,formattingElementEntry){let furthestBlock=null,idx=p.openElements.stackTop;for(;idx>=0;idx--){const element=p.openElements.items[idx];if(element===formattingElementEntry.element)break;p._isSpecialElement(element,p.openElements.tagIDs[idx])&&(furthestBlock=element)}return furthestBlock||(p.openElements.shortenToLength(Math.max(idx,0)),p.activeFormattingElements.removeEntry(formattingElementEntry)),furthestBlock}function aaInnerLoop(p,furthestBlock,formattingElement){let lastElement=furthestBlock,nextElement=p.openElements.getCommonAncestor(furthestBlock);for(let i=0,element=nextElement;element!==formattingElement;i++,element=nextElement){nextElement=p.openElements.getCommonAncestor(element);const elementEntry=p.activeFormattingElements.getElementEntry(element),counterOverflow=elementEntry&&i>=3;!elementEntry||counterOverflow?(counterOverflow&&p.activeFormattingElements.removeEntry(elementEntry),p.openElements.remove(element)):(element=aaRecreateElementFromEntry(p,elementEntry),lastElement===furthestBlock&&(p.activeFormattingElements.bookmark=elementEntry),p.treeAdapter.detachNode(lastElement),p.treeAdapter.appendChild(element,lastElement),lastElement=element)}return lastElement}function aaRecreateElementFromEntry(p,elementEntry){const ns=p.treeAdapter.getNamespaceURI(elementEntry.element),newElement=p.treeAdapter.createElement(elementEntry.token.tagName,ns,elementEntry.token.attrs);return p.openElements.replace(elementEntry.element,newElement),elementEntry.element=newElement,newElement}function aaInsertLastNodeInCommonAncestor(p,commonAncestor,lastElement){const tid=getTagID(p.treeAdapter.getTagName(commonAncestor));if(p._isElementCausesFosterParenting(tid))p._fosterParentElement(lastElement);else{const ns=p.treeAdapter.getNamespaceURI(commonAncestor);tid===TAG_ID.TEMPLATE&&ns===NS.HTML&&(commonAncestor=p.treeAdapter.getTemplateContent(commonAncestor)),p.treeAdapter.appendChild(commonAncestor,lastElement)}}function aaReplaceFormattingElement(p,furthestBlock,formattingElementEntry){const ns=p.treeAdapter.getNamespaceURI(formattingElementEntry.element),{token}=formattingElementEntry,newElement=p.treeAdapter.createElement(token.tagName,ns,token.attrs);p._adoptNodes(furthestBlock,newElement),p.treeAdapter.appendChild(furthestBlock,newElement),p.activeFormattingElements.insertElementAfterBookmark(newElement,token),p.activeFormattingElements.removeEntry(formattingElementEntry),p.openElements.remove(formattingElementEntry.element),p.openElements.insertAfter(furthestBlock,newElement,token.tagID)}function callAdoptionAgency(p,token){for(let i=0;i<8;i++){const formattingElementEntry=aaObtainFormattingElementEntry(p,token);if(!formattingElementEntry)break;const furthestBlock=aaObtainFurthestBlock(p,formattingElementEntry);if(!furthestBlock)break;p.activeFormattingElements.bookmark=formattingElementEntry;const lastElement=aaInnerLoop(p,furthestBlock,formattingElementEntry.element),commonAncestor=p.openElements.getCommonAncestor(formattingElementEntry.element);p.treeAdapter.detachNode(lastElement),commonAncestor&&aaInsertLastNodeInCommonAncestor(p,commonAncestor,lastElement),aaReplaceFormattingElement(p,furthestBlock,formattingElementEntry)}}function appendComment(p,token){p._appendCommentNode(token,p.openElements.currentTmplContentOrNode)}function stopParsing(p,token){if(p.stopped=!0,token.location){const target=p.fragmentContext?0:2;for(let i=p.openElements.stackTop;i>=target;i--)p._setEndLocation(p.openElements.items[i],token);if(!p.fragmentContext&&p.openElements.stackTop>=0){const htmlElement=p.openElements.items[0],htmlLocation=p.treeAdapter.getNodeSourceCodeLocation(htmlElement);if(htmlLocation&&!htmlLocation.endTag&&(p._setEndLocation(htmlElement,token),p.openElements.stackTop>=1)){const bodyElement=p.openElements.items[1],bodyLocation=p.treeAdapter.getNodeSourceCodeLocation(bodyElement);bodyLocation&&!bodyLocation.endTag&&p._setEndLocation(bodyElement,token)}}}}function tokenInInitialMode(p,token){p._err(token,ERR.missingDoctype,!0),p.treeAdapter.setDocumentMode(p.document,DOCUMENT_MODE.QUIRKS),p.insertionMode=InsertionMode.BEFORE_HTML,p._processToken(token)}function tokenBeforeHtml(p,token){p._insertFakeRootElement(),p.insertionMode=InsertionMode.BEFORE_HEAD,p._processToken(token)}function tokenBeforeHead(p,token){p._insertFakeElement(TAG_NAMES.HEAD,TAG_ID.HEAD),p.headElement=p.openElements.current,p.insertionMode=InsertionMode.IN_HEAD,p._processToken(token)}function startTagInHead(p,token){switch(token.tagID){case TAG_ID.HTML:startTagInBody(p,token);break;case TAG_ID.BASE:case TAG_ID.BASEFONT:case TAG_ID.BGSOUND:case TAG_ID.LINK:case TAG_ID.META:p._appendElement(token,NS.HTML),token.ackSelfClosing=!0;break;case TAG_ID.TITLE:p._switchToTextParsing(token,TokenizerMode_RCDATA);break;case TAG_ID.NOSCRIPT:p.options.scriptingEnabled?p._switchToTextParsing(token,TokenizerMode_RAWTEXT):(p._insertElement(token,NS.HTML),p.insertionMode=InsertionMode.IN_HEAD_NO_SCRIPT);break;case TAG_ID.NOFRAMES:case TAG_ID.STYLE:p._switchToTextParsing(token,TokenizerMode_RAWTEXT);break;case TAG_ID.SCRIPT:p._switchToTextParsing(token,TokenizerMode_SCRIPT_DATA);break;case TAG_ID.TEMPLATE:p._insertTemplate(token),p.activeFormattingElements.insertMarker(),p.framesetOk=!1,p.insertionMode=InsertionMode.IN_TEMPLATE,p.tmplInsertionModeStack.unshift(InsertionMode.IN_TEMPLATE);break;case TAG_ID.HEAD:p._err(token,ERR.misplacedStartTagForHeadElement);break;default:tokenInHead(p,token)}}function templateEndTagInHead(p,token){p.openElements.tmplCount>0?(p.openElements.generateImpliedEndTagsThoroughly(),p.openElements.currentTagId!==TAG_ID.TEMPLATE&&p._err(token,ERR.closingOfElementWithOpenChildElements),p.openElements.popUntilTagNamePopped(TAG_ID.TEMPLATE),p.activeFormattingElements.clearToLastMarker(),p.tmplInsertionModeStack.shift(),p._resetInsertionMode()):p._err(token,ERR.endTagWithoutMatchingOpenElement)}function tokenInHead(p,token){p.openElements.pop(),p.insertionMode=InsertionMode.AFTER_HEAD,p._processToken(token)}function tokenInHeadNoScript(p,token){const errCode=token.type===TokenType.EOF?ERR.openElementsLeftAfterEof:ERR.disallowedContentInNoscriptInHead;p._err(token,errCode),p.openElements.pop(),p.insertionMode=InsertionMode.IN_HEAD,p._processToken(token)}function tokenAfterHead(p,token){p._insertFakeElement(TAG_NAMES.BODY,TAG_ID.BODY),p.insertionMode=InsertionMode.IN_BODY,modeInBody(p,token)}function modeInBody(p,token){switch(token.type){case TokenType.CHARACTER:characterInBody(p,token);break;case TokenType.WHITESPACE_CHARACTER:whitespaceCharacterInBody(p,token);break;case TokenType.COMMENT:appendComment(p,token);break;case TokenType.START_TAG:startTagInBody(p,token);break;case TokenType.END_TAG:endTagInBody(p,token);break;case TokenType.EOF:eofInBody(p,token)}}function whitespaceCharacterInBody(p,token){p._reconstructActiveFormattingElements(),p._insertCharacters(token)}function characterInBody(p,token){p._reconstructActiveFormattingElements(),p._insertCharacters(token),p.framesetOk=!1}function areaStartTagInBody(p,token){p._reconstructActiveFormattingElements(),p._appendElement(token,NS.HTML),p.framesetOk=!1,token.ackSelfClosing=!0}function isHiddenInput(token){const inputType=getTokenAttr(token,ATTRS.TYPE);return null!=inputType&&"hidden"===inputType.toLowerCase()}function rawTextStartTagInBody(p,token){p._switchToTextParsing(token,TokenizerMode_RAWTEXT)}function genericStartTagInBody(p,token){p._reconstructActiveFormattingElements(),p._insertElement(token,NS.HTML)}function startTagInBody(p,token){switch(token.tagID){case TAG_ID.I:case TAG_ID.S:case TAG_ID.B:case TAG_ID.U:case TAG_ID.EM:case TAG_ID.TT:case TAG_ID.BIG:case TAG_ID.CODE:case TAG_ID.FONT:case TAG_ID.SMALL:case TAG_ID.STRIKE:case TAG_ID.STRONG:!function bStartTagInBody(p,token){p._reconstructActiveFormattingElements(),p._insertElement(token,NS.HTML),p.activeFormattingElements.pushElement(p.openElements.current,token)}(p,token);break;case TAG_ID.A:!function aStartTagInBody(p,token){const activeElementEntry=p.activeFormattingElements.getElementEntryInScopeWithTagName(TAG_NAMES.A);activeElementEntry&&(callAdoptionAgency(p,token),p.openElements.remove(activeElementEntry.element),p.activeFormattingElements.removeEntry(activeElementEntry)),p._reconstructActiveFormattingElements(),p._insertElement(token,NS.HTML),p.activeFormattingElements.pushElement(p.openElements.current,token)}(p,token);break;case TAG_ID.H1:case TAG_ID.H2:case TAG_ID.H3:case TAG_ID.H4:case TAG_ID.H5:case TAG_ID.H6:!function numberedHeaderStartTagInBody(p,token){p.openElements.hasInButtonScope(TAG_ID.P)&&p._closePElement(),NUMBERED_HEADERS.has(p.openElements.currentTagId)&&p.openElements.pop(),p._insertElement(token,NS.HTML)}(p,token);break;case TAG_ID.P:case TAG_ID.DL:case TAG_ID.OL:case TAG_ID.UL:case TAG_ID.DIV:case TAG_ID.DIR:case TAG_ID.NAV:case TAG_ID.MAIN:case TAG_ID.MENU:case TAG_ID.ASIDE:case TAG_ID.CENTER:case TAG_ID.FIGURE:case TAG_ID.FOOTER:case TAG_ID.HEADER:case TAG_ID.HGROUP:case TAG_ID.DIALOG:case TAG_ID.DETAILS:case TAG_ID.ADDRESS:case TAG_ID.ARTICLE:case TAG_ID.SEARCH:case TAG_ID.SECTION:case TAG_ID.SUMMARY:case TAG_ID.FIELDSET:case TAG_ID.BLOCKQUOTE:case TAG_ID.FIGCAPTION:!function addressStartTagInBody(p,token){p.openElements.hasInButtonScope(TAG_ID.P)&&p._closePElement(),p._insertElement(token,NS.HTML)}(p,token);break;case TAG_ID.LI:case TAG_ID.DD:case TAG_ID.DT:!function listItemStartTagInBody(p,token){p.framesetOk=!1;const tn=token.tagID;for(let i=p.openElements.stackTop;i>=0;i--){const elementId=p.openElements.tagIDs[i];if(tn===TAG_ID.LI&&elementId===TAG_ID.LI||(tn===TAG_ID.DD||tn===TAG_ID.DT)&&(elementId===TAG_ID.DD||elementId===TAG_ID.DT)){p.openElements.generateImpliedEndTagsWithExclusion(elementId),p.openElements.popUntilTagNamePopped(elementId);break}if(elementId!==TAG_ID.ADDRESS&&elementId!==TAG_ID.DIV&&elementId!==TAG_ID.P&&p._isSpecialElement(p.openElements.items[i],elementId))break}p.openElements.hasInButtonScope(TAG_ID.P)&&p._closePElement(),p._insertElement(token,NS.HTML)}(p,token);break;case TAG_ID.BR:case TAG_ID.IMG:case TAG_ID.WBR:case TAG_ID.AREA:case TAG_ID.EMBED:case TAG_ID.KEYGEN:areaStartTagInBody(p,token);break;case TAG_ID.HR:!function hrStartTagInBody(p,token){p.openElements.hasInButtonScope(TAG_ID.P)&&p._closePElement(),p._appendElement(token,NS.HTML),p.framesetOk=!1,token.ackSelfClosing=!0}(p,token);break;case TAG_ID.RB:case TAG_ID.RTC:!function rbStartTagInBody(p,token){p.openElements.hasInScope(TAG_ID.RUBY)&&p.openElements.generateImpliedEndTags(),p._insertElement(token,NS.HTML)}(p,token);break;case TAG_ID.RT:case TAG_ID.RP:!function rtStartTagInBody(p,token){p.openElements.hasInScope(TAG_ID.RUBY)&&p.openElements.generateImpliedEndTagsWithExclusion(TAG_ID.RTC),p._insertElement(token,NS.HTML)}(p,token);break;case TAG_ID.PRE:case TAG_ID.LISTING:!function preStartTagInBody(p,token){p.openElements.hasInButtonScope(TAG_ID.P)&&p._closePElement(),p._insertElement(token,NS.HTML),p.skipNextNewLine=!0,p.framesetOk=!1}(p,token);break;case TAG_ID.XMP:!function xmpStartTagInBody(p,token){p.openElements.hasInButtonScope(TAG_ID.P)&&p._closePElement(),p._reconstructActiveFormattingElements(),p.framesetOk=!1,p._switchToTextParsing(token,TokenizerMode_RAWTEXT)}(p,token);break;case TAG_ID.SVG:!function svgStartTagInBody(p,token){p._reconstructActiveFormattingElements(),adjustTokenSVGAttrs(token),adjustTokenXMLAttrs(token),token.selfClosing?p._appendElement(token,NS.SVG):p._insertElement(token,NS.SVG),token.ackSelfClosing=!0}(p,token);break;case TAG_ID.HTML:!function htmlStartTagInBody(p,token){0===p.openElements.tmplCount&&p.treeAdapter.adoptAttributes(p.openElements.items[0],token.attrs)}(p,token);break;case TAG_ID.BASE:case TAG_ID.LINK:case TAG_ID.META:case TAG_ID.STYLE:case TAG_ID.TITLE:case TAG_ID.SCRIPT:case TAG_ID.BGSOUND:case TAG_ID.BASEFONT:case TAG_ID.TEMPLATE:startTagInHead(p,token);break;case TAG_ID.BODY:!function bodyStartTagInBody(p,token){const bodyElement=p.openElements.tryPeekProperlyNestedBodyElement();bodyElement&&0===p.openElements.tmplCount&&(p.framesetOk=!1,p.treeAdapter.adoptAttributes(bodyElement,token.attrs))}(p,token);break;case TAG_ID.FORM:!function formStartTagInBody(p,token){const inTemplate=p.openElements.tmplCount>0;p.formElement&&!inTemplate||(p.openElements.hasInButtonScope(TAG_ID.P)&&p._closePElement(),p._insertElement(token,NS.HTML),inTemplate||(p.formElement=p.openElements.current))}(p,token);break;case TAG_ID.NOBR:!function nobrStartTagInBody(p,token){p._reconstructActiveFormattingElements(),p.openElements.hasInScope(TAG_ID.NOBR)&&(callAdoptionAgency(p,token),p._reconstructActiveFormattingElements()),p._insertElement(token,NS.HTML),p.activeFormattingElements.pushElement(p.openElements.current,token)}(p,token);break;case TAG_ID.MATH:!function mathStartTagInBody(p,token){p._reconstructActiveFormattingElements(),adjustTokenMathMLAttrs(token),adjustTokenXMLAttrs(token),token.selfClosing?p._appendElement(token,NS.MATHML):p._insertElement(token,NS.MATHML),token.ackSelfClosing=!0}(p,token);break;case TAG_ID.TABLE:!function tableStartTagInBody(p,token){p.treeAdapter.getDocumentMode(p.document)!==DOCUMENT_MODE.QUIRKS&&p.openElements.hasInButtonScope(TAG_ID.P)&&p._closePElement(),p._insertElement(token,NS.HTML),p.framesetOk=!1,p.insertionMode=InsertionMode.IN_TABLE}(p,token);break;case TAG_ID.INPUT:!function inputStartTagInBody(p,token){p._reconstructActiveFormattingElements(),p._appendElement(token,NS.HTML),isHiddenInput(token)||(p.framesetOk=!1),token.ackSelfClosing=!0}(p,token);break;case TAG_ID.PARAM:case TAG_ID.TRACK:case TAG_ID.SOURCE:!function paramStartTagInBody(p,token){p._appendElement(token,NS.HTML),token.ackSelfClosing=!0}(p,token);break;case TAG_ID.IMAGE:!function imageStartTagInBody(p,token){token.tagName=TAG_NAMES.IMG,token.tagID=TAG_ID.IMG,areaStartTagInBody(p,token)}(p,token);break;case TAG_ID.BUTTON:!function buttonStartTagInBody(p,token){p.openElements.hasInScope(TAG_ID.BUTTON)&&(p.openElements.generateImpliedEndTags(),p.openElements.popUntilTagNamePopped(TAG_ID.BUTTON)),p._reconstructActiveFormattingElements(),p._insertElement(token,NS.HTML),p.framesetOk=!1}(p,token);break;case TAG_ID.APPLET:case TAG_ID.OBJECT:case TAG_ID.MARQUEE:!function appletStartTagInBody(p,token){p._reconstructActiveFormattingElements(),p._insertElement(token,NS.HTML),p.activeFormattingElements.insertMarker(),p.framesetOk=!1}(p,token);break;case TAG_ID.IFRAME:!function iframeStartTagInBody(p,token){p.framesetOk=!1,p._switchToTextParsing(token,TokenizerMode_RAWTEXT)}(p,token);break;case TAG_ID.SELECT:!function selectStartTagInBody(p,token){p._reconstructActiveFormattingElements(),p._insertElement(token,NS.HTML),p.framesetOk=!1,p.insertionMode=p.insertionMode===InsertionMode.IN_TABLE||p.insertionMode===InsertionMode.IN_CAPTION||p.insertionMode===InsertionMode.IN_TABLE_BODY||p.insertionMode===InsertionMode.IN_ROW||p.insertionMode===InsertionMode.IN_CELL?InsertionMode.IN_SELECT_IN_TABLE:InsertionMode.IN_SELECT}(p,token);break;case TAG_ID.OPTION:case TAG_ID.OPTGROUP:!function optgroupStartTagInBody(p,token){p.openElements.currentTagId===TAG_ID.OPTION&&p.openElements.pop(),p._reconstructActiveFormattingElements(),p._insertElement(token,NS.HTML)}(p,token);break;case TAG_ID.NOEMBED:case TAG_ID.NOFRAMES:rawTextStartTagInBody(p,token);break;case TAG_ID.FRAMESET:!function framesetStartTagInBody(p,token){const bodyElement=p.openElements.tryPeekProperlyNestedBodyElement();p.framesetOk&&bodyElement&&(p.treeAdapter.detachNode(bodyElement),p.openElements.popAllUpToHtmlElement(),p._insertElement(token,NS.HTML),p.insertionMode=InsertionMode.IN_FRAMESET)}(p,token);break;case TAG_ID.TEXTAREA:!function textareaStartTagInBody(p,token){p._insertElement(token,NS.HTML),p.skipNextNewLine=!0,p.tokenizer.state=TokenizerMode_RCDATA,p.originalInsertionMode=p.insertionMode,p.framesetOk=!1,p.insertionMode=InsertionMode.TEXT}(p,token);break;case TAG_ID.NOSCRIPT:p.options.scriptingEnabled?rawTextStartTagInBody(p,token):genericStartTagInBody(p,token);break;case TAG_ID.PLAINTEXT:!function plaintextStartTagInBody(p,token){p.openElements.hasInButtonScope(TAG_ID.P)&&p._closePElement(),p._insertElement(token,NS.HTML),p.tokenizer.state=TokenizerMode_PLAINTEXT}(p,token);break;case TAG_ID.COL:case TAG_ID.TH:case TAG_ID.TD:case TAG_ID.TR:case TAG_ID.HEAD:case TAG_ID.FRAME:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:case TAG_ID.CAPTION:case TAG_ID.COLGROUP:break;default:genericStartTagInBody(p,token)}}function genericEndTagInBody(p,token){const tn=token.tagName,tid=token.tagID;for(let i=p.openElements.stackTop;i>0;i--){const element=p.openElements.items[i],elementId=p.openElements.tagIDs[i];if(tid===elementId&&(tid!==TAG_ID.UNKNOWN||p.treeAdapter.getTagName(element)===tn)){p.openElements.generateImpliedEndTagsWithExclusion(tid),p.openElements.stackTop>=i&&p.openElements.shortenToLength(i);break}if(p._isSpecialElement(element,elementId))break}}function endTagInBody(p,token){switch(token.tagID){case TAG_ID.A:case TAG_ID.B:case TAG_ID.I:case TAG_ID.S:case TAG_ID.U:case TAG_ID.EM:case TAG_ID.TT:case TAG_ID.BIG:case TAG_ID.CODE:case TAG_ID.FONT:case TAG_ID.NOBR:case TAG_ID.SMALL:case TAG_ID.STRIKE:case TAG_ID.STRONG:callAdoptionAgency(p,token);break;case TAG_ID.P:!function pEndTagInBody(p){p.openElements.hasInButtonScope(TAG_ID.P)||p._insertFakeElement(TAG_NAMES.P,TAG_ID.P),p._closePElement()}(p);break;case TAG_ID.DL:case TAG_ID.UL:case TAG_ID.OL:case TAG_ID.DIR:case TAG_ID.DIV:case TAG_ID.NAV:case TAG_ID.PRE:case TAG_ID.MAIN:case TAG_ID.MENU:case TAG_ID.ASIDE:case TAG_ID.BUTTON:case TAG_ID.CENTER:case TAG_ID.FIGURE:case TAG_ID.FOOTER:case TAG_ID.HEADER:case TAG_ID.HGROUP:case TAG_ID.DIALOG:case TAG_ID.ADDRESS:case TAG_ID.ARTICLE:case TAG_ID.DETAILS:case TAG_ID.SEARCH:case TAG_ID.SECTION:case TAG_ID.SUMMARY:case TAG_ID.LISTING:case TAG_ID.FIELDSET:case TAG_ID.BLOCKQUOTE:case TAG_ID.FIGCAPTION:!function addressEndTagInBody(p,token){const tn=token.tagID;p.openElements.hasInScope(tn)&&(p.openElements.generateImpliedEndTags(),p.openElements.popUntilTagNamePopped(tn))}(p,token);break;case TAG_ID.LI:!function liEndTagInBody(p){p.openElements.hasInListItemScope(TAG_ID.LI)&&(p.openElements.generateImpliedEndTagsWithExclusion(TAG_ID.LI),p.openElements.popUntilTagNamePopped(TAG_ID.LI))}(p);break;case TAG_ID.DD:case TAG_ID.DT:!function ddEndTagInBody(p,token){const tn=token.tagID;p.openElements.hasInScope(tn)&&(p.openElements.generateImpliedEndTagsWithExclusion(tn),p.openElements.popUntilTagNamePopped(tn))}(p,token);break;case TAG_ID.H1:case TAG_ID.H2:case TAG_ID.H3:case TAG_ID.H4:case TAG_ID.H5:case TAG_ID.H6:!function numberedHeaderEndTagInBody(p){p.openElements.hasNumberedHeaderInScope()&&(p.openElements.generateImpliedEndTags(),p.openElements.popUntilNumberedHeaderPopped())}(p);break;case TAG_ID.BR:!function brEndTagInBody(p){p._reconstructActiveFormattingElements(),p._insertFakeElement(TAG_NAMES.BR,TAG_ID.BR),p.openElements.pop(),p.framesetOk=!1}(p);break;case TAG_ID.BODY:!function bodyEndTagInBody(p,token){if(p.openElements.hasInScope(TAG_ID.BODY)&&(p.insertionMode=InsertionMode.AFTER_BODY,p.options.sourceCodeLocationInfo)){const bodyElement=p.openElements.tryPeekProperlyNestedBodyElement();bodyElement&&p._setEndLocation(bodyElement,token)}}(p,token);break;case TAG_ID.HTML:!function htmlEndTagInBody(p,token){p.openElements.hasInScope(TAG_ID.BODY)&&(p.insertionMode=InsertionMode.AFTER_BODY,endTagAfterBody(p,token))}(p,token);break;case TAG_ID.FORM:!function formEndTagInBody(p){const inTemplate=p.openElements.tmplCount>0,{formElement}=p;inTemplate||(p.formElement=null),(formElement||inTemplate)&&p.openElements.hasInScope(TAG_ID.FORM)&&(p.openElements.generateImpliedEndTags(),inTemplate?p.openElements.popUntilTagNamePopped(TAG_ID.FORM):formElement&&p.openElements.remove(formElement))}(p);break;case TAG_ID.APPLET:case TAG_ID.OBJECT:case TAG_ID.MARQUEE:!function appletEndTagInBody(p,token){const tn=token.tagID;p.openElements.hasInScope(tn)&&(p.openElements.generateImpliedEndTags(),p.openElements.popUntilTagNamePopped(tn),p.activeFormattingElements.clearToLastMarker())}(p,token);break;case TAG_ID.TEMPLATE:templateEndTagInHead(p,token);break;default:genericEndTagInBody(p,token)}}function eofInBody(p,token){p.tmplInsertionModeStack.length>0?eofInTemplate(p,token):stopParsing(p,token)}function characterInTable(p,token){if(TABLE_STRUCTURE_TAGS.has(p.openElements.currentTagId))switch(p.pendingCharacterTokens.length=0,p.hasNonWhitespacePendingCharacterToken=!1,p.originalInsertionMode=p.insertionMode,p.insertionMode=InsertionMode.IN_TABLE_TEXT,token.type){case TokenType.CHARACTER:characterInTableText(p,token);break;case TokenType.WHITESPACE_CHARACTER:whitespaceCharacterInTableText(p,token)}else tokenInTable(p,token)}function startTagInTable(p,token){switch(token.tagID){case TAG_ID.TD:case TAG_ID.TH:case TAG_ID.TR:!function tdStartTagInTable(p,token){p.openElements.clearBackToTableContext(),p._insertFakeElement(TAG_NAMES.TBODY,TAG_ID.TBODY),p.insertionMode=InsertionMode.IN_TABLE_BODY,startTagInTableBody(p,token)}(p,token);break;case TAG_ID.STYLE:case TAG_ID.SCRIPT:case TAG_ID.TEMPLATE:startTagInHead(p,token);break;case TAG_ID.COL:!function colStartTagInTable(p,token){p.openElements.clearBackToTableContext(),p._insertFakeElement(TAG_NAMES.COLGROUP,TAG_ID.COLGROUP),p.insertionMode=InsertionMode.IN_COLUMN_GROUP,startTagInColumnGroup(p,token)}(p,token);break;case TAG_ID.FORM:!function formStartTagInTable(p,token){p.formElement||0!==p.openElements.tmplCount||(p._insertElement(token,NS.HTML),p.formElement=p.openElements.current,p.openElements.pop())}(p,token);break;case TAG_ID.TABLE:!function tableStartTagInTable(p,token){p.openElements.hasInTableScope(TAG_ID.TABLE)&&(p.openElements.popUntilTagNamePopped(TAG_ID.TABLE),p._resetInsertionMode(),p._processStartTag(token))}(p,token);break;case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:!function tbodyStartTagInTable(p,token){p.openElements.clearBackToTableContext(),p._insertElement(token,NS.HTML),p.insertionMode=InsertionMode.IN_TABLE_BODY}(p,token);break;case TAG_ID.INPUT:!function inputStartTagInTable(p,token){isHiddenInput(token)?p._appendElement(token,NS.HTML):tokenInTable(p,token),token.ackSelfClosing=!0}(p,token);break;case TAG_ID.CAPTION:!function captionStartTagInTable(p,token){p.openElements.clearBackToTableContext(),p.activeFormattingElements.insertMarker(),p._insertElement(token,NS.HTML),p.insertionMode=InsertionMode.IN_CAPTION}(p,token);break;case TAG_ID.COLGROUP:!function colgroupStartTagInTable(p,token){p.openElements.clearBackToTableContext(),p._insertElement(token,NS.HTML),p.insertionMode=InsertionMode.IN_COLUMN_GROUP}(p,token);break;default:tokenInTable(p,token)}}function endTagInTable(p,token){switch(token.tagID){case TAG_ID.TABLE:p.openElements.hasInTableScope(TAG_ID.TABLE)&&(p.openElements.popUntilTagNamePopped(TAG_ID.TABLE),p._resetInsertionMode());break;case TAG_ID.TEMPLATE:templateEndTagInHead(p,token);break;case TAG_ID.BODY:case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:case TAG_ID.TBODY:case TAG_ID.TD:case TAG_ID.TFOOT:case TAG_ID.TH:case TAG_ID.THEAD:case TAG_ID.TR:break;default:tokenInTable(p,token)}}function tokenInTable(p,token){const savedFosterParentingState=p.fosterParentingEnabled;p.fosterParentingEnabled=!0,modeInBody(p,token),p.fosterParentingEnabled=savedFosterParentingState}function whitespaceCharacterInTableText(p,token){p.pendingCharacterTokens.push(token)}function characterInTableText(p,token){p.pendingCharacterTokens.push(token),p.hasNonWhitespacePendingCharacterToken=!0}function tokenInTableText(p,token){let i=0;if(p.hasNonWhitespacePendingCharacterToken)for(;i<p.pendingCharacterTokens.length;i++)tokenInTable(p,p.pendingCharacterTokens[i]);else for(;i<p.pendingCharacterTokens.length;i++)p._insertCharacters(p.pendingCharacterTokens[i]);p.insertionMode=p.originalInsertionMode,p._processToken(token)}const TABLE_VOID_ELEMENTS=new Set([TAG_ID.CAPTION,TAG_ID.COL,TAG_ID.COLGROUP,TAG_ID.TBODY,TAG_ID.TD,TAG_ID.TFOOT,TAG_ID.TH,TAG_ID.THEAD,TAG_ID.TR]);function startTagInColumnGroup(p,token){switch(token.tagID){case TAG_ID.HTML:startTagInBody(p,token);break;case TAG_ID.COL:p._appendElement(token,NS.HTML),token.ackSelfClosing=!0;break;case TAG_ID.TEMPLATE:startTagInHead(p,token);break;default:tokenInColumnGroup(p,token)}}function tokenInColumnGroup(p,token){p.openElements.currentTagId===TAG_ID.COLGROUP&&(p.openElements.pop(),p.insertionMode=InsertionMode.IN_TABLE,p._processToken(token))}function startTagInTableBody(p,token){switch(token.tagID){case TAG_ID.TR:p.openElements.clearBackToTableBodyContext(),p._insertElement(token,NS.HTML),p.insertionMode=InsertionMode.IN_ROW;break;case TAG_ID.TH:case TAG_ID.TD:p.openElements.clearBackToTableBodyContext(),p._insertFakeElement(TAG_NAMES.TR,TAG_ID.TR),p.insertionMode=InsertionMode.IN_ROW,startTagInRow(p,token);break;case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:p.openElements.hasTableBodyContextInTableScope()&&(p.openElements.clearBackToTableBodyContext(),p.openElements.pop(),p.insertionMode=InsertionMode.IN_TABLE,startTagInTable(p,token));break;default:startTagInTable(p,token)}}function endTagInTableBody(p,token){const tn=token.tagID;switch(token.tagID){case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:p.openElements.hasInTableScope(tn)&&(p.openElements.clearBackToTableBodyContext(),p.openElements.pop(),p.insertionMode=InsertionMode.IN_TABLE);break;case TAG_ID.TABLE:p.openElements.hasTableBodyContextInTableScope()&&(p.openElements.clearBackToTableBodyContext(),p.openElements.pop(),p.insertionMode=InsertionMode.IN_TABLE,endTagInTable(p,token));break;case TAG_ID.BODY:case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:case TAG_ID.TD:case TAG_ID.TH:case TAG_ID.TR:break;default:endTagInTable(p,token)}}function startTagInRow(p,token){switch(token.tagID){case TAG_ID.TH:case TAG_ID.TD:p.openElements.clearBackToTableRowContext(),p._insertElement(token,NS.HTML),p.insertionMode=InsertionMode.IN_CELL,p.activeFormattingElements.insertMarker();break;case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:case TAG_ID.TR:p.openElements.hasInTableScope(TAG_ID.TR)&&(p.openElements.clearBackToTableRowContext(),p.openElements.pop(),p.insertionMode=InsertionMode.IN_TABLE_BODY,startTagInTableBody(p,token));break;default:startTagInTable(p,token)}}function endTagInRow(p,token){switch(token.tagID){case TAG_ID.TR:p.openElements.hasInTableScope(TAG_ID.TR)&&(p.openElements.clearBackToTableRowContext(),p.openElements.pop(),p.insertionMode=InsertionMode.IN_TABLE_BODY);break;case TAG_ID.TABLE:p.openElements.hasInTableScope(TAG_ID.TR)&&(p.openElements.clearBackToTableRowContext(),p.openElements.pop(),p.insertionMode=InsertionMode.IN_TABLE_BODY,endTagInTableBody(p,token));break;case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:(p.openElements.hasInTableScope(token.tagID)||p.openElements.hasInTableScope(TAG_ID.TR))&&(p.openElements.clearBackToTableRowContext(),p.openElements.pop(),p.insertionMode=InsertionMode.IN_TABLE_BODY,endTagInTableBody(p,token));break;case TAG_ID.BODY:case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:case TAG_ID.TD:case TAG_ID.TH:break;default:endTagInTable(p,token)}}function startTagInSelect(p,token){switch(token.tagID){case TAG_ID.HTML:startTagInBody(p,token);break;case TAG_ID.OPTION:p.openElements.currentTagId===TAG_ID.OPTION&&p.openElements.pop(),p._insertElement(token,NS.HTML);break;case TAG_ID.OPTGROUP:p.openElements.currentTagId===TAG_ID.OPTION&&p.openElements.pop(),p.openElements.currentTagId===TAG_ID.OPTGROUP&&p.openElements.pop(),p._insertElement(token,NS.HTML);break;case TAG_ID.HR:p.openElements.currentTagId===TAG_ID.OPTION&&p.openElements.pop(),p.openElements.currentTagId===TAG_ID.OPTGROUP&&p.openElements.pop(),p._appendElement(token,NS.HTML),token.ackSelfClosing=!0;break;case TAG_ID.INPUT:case TAG_ID.KEYGEN:case TAG_ID.TEXTAREA:case TAG_ID.SELECT:p.openElements.hasInSelectScope(TAG_ID.SELECT)&&(p.openElements.popUntilTagNamePopped(TAG_ID.SELECT),p._resetInsertionMode(),token.tagID!==TAG_ID.SELECT&&p._processStartTag(token));break;case TAG_ID.SCRIPT:case TAG_ID.TEMPLATE:startTagInHead(p,token)}}function endTagInSelect(p,token){switch(token.tagID){case TAG_ID.OPTGROUP:p.openElements.stackTop>0&&p.openElements.currentTagId===TAG_ID.OPTION&&p.openElements.tagIDs[p.openElements.stackTop-1]===TAG_ID.OPTGROUP&&p.openElements.pop(),p.openElements.currentTagId===TAG_ID.OPTGROUP&&p.openElements.pop();break;case TAG_ID.OPTION:p.openElements.currentTagId===TAG_ID.OPTION&&p.openElements.pop();break;case TAG_ID.SELECT:p.openElements.hasInSelectScope(TAG_ID.SELECT)&&(p.openElements.popUntilTagNamePopped(TAG_ID.SELECT),p._resetInsertionMode());break;case TAG_ID.TEMPLATE:templateEndTagInHead(p,token)}}function eofInTemplate(p,token){p.openElements.tmplCount>0?(p.openElements.popUntilTagNamePopped(TAG_ID.TEMPLATE),p.activeFormattingElements.clearToLastMarker(),p.tmplInsertionModeStack.shift(),p._resetInsertionMode(),p.onEof(token)):stopParsing(p,token)}function endTagAfterBody(p,token){if(token.tagID===TAG_ID.HTML){if(p.fragmentContext||(p.insertionMode=InsertionMode.AFTER_AFTER_BODY),p.options.sourceCodeLocationInfo&&p.openElements.tagIDs[0]===TAG_ID.HTML){p._setEndLocation(p.openElements.items[0],token);const bodyElement=p.openElements.items[1];bodyElement&&!p.treeAdapter.getNodeSourceCodeLocation(bodyElement)?.endTag&&p._setEndLocation(bodyElement,token)}}else tokenAfterBody(p,token)}function tokenAfterBody(p,token){p.insertionMode=InsertionMode.IN_BODY,modeInBody(p,token)}function tokenAfterAfterBody(p,token){p.insertionMode=InsertionMode.IN_BODY,modeInBody(p,token)}function popUntilHtmlOrIntegrationPoint(p){for(;p.treeAdapter.getNamespaceURI(p.openElements.current)!==NS.HTML&&!p._isIntegrationPoint(p.openElements.currentTagId,p.openElements.current);)p.openElements.pop()}new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),String.prototype.codePointAt;function getEscaper(regex,map){return function escape(data){let match,lastIndex=0,result="";for(;match=regex.exec(data);)lastIndex!==match.index&&(result+=data.substring(lastIndex,match.index)),result+=map.get(match[0].charCodeAt(0)),lastIndex=match.index+1;return result+data.substring(lastIndex)}}const escapeAttribute=getEscaper(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),escapeText=getEscaper(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),VOID_ELEMENTS=new Set([TAG_NAMES.AREA,TAG_NAMES.BASE,TAG_NAMES.BASEFONT,TAG_NAMES.BGSOUND,TAG_NAMES.BR,TAG_NAMES.COL,TAG_NAMES.EMBED,TAG_NAMES.FRAME,TAG_NAMES.HR,TAG_NAMES.IMG,TAG_NAMES.INPUT,TAG_NAMES.KEYGEN,TAG_NAMES.LINK,TAG_NAMES.META,TAG_NAMES.PARAM,TAG_NAMES.SOURCE,TAG_NAMES.TRACK,TAG_NAMES.WBR]);function isVoidElement(node,options){return options.treeAdapter.isElementNode(node)&&options.treeAdapter.getNamespaceURI(node)===NS.HTML&&VOID_ELEMENTS.has(options.treeAdapter.getTagName(node))}const defaultOpts={treeAdapter:defaultTreeAdapter,scriptingEnabled:!0};function serialize(node,options){const opts={...defaultOpts,...options};return isVoidElement(node,opts)?"":serializeChildNodes(node,opts)}function serializeChildNodes(parentNode,options){let html="";const container=options.treeAdapter.isElementNode(parentNode)&&options.treeAdapter.getTagName(parentNode)===TAG_NAMES.TEMPLATE&&options.treeAdapter.getNamespaceURI(parentNode)===NS.HTML?options.treeAdapter.getTemplateContent(parentNode):parentNode,childNodes=options.treeAdapter.getChildNodes(container);if(childNodes)for(const currentNode of childNodes)html+=serializeNode(currentNode,options);return html}function serializeNode(node,options){return options.treeAdapter.isElementNode(node)?function serializeElement(node,options){const tn=options.treeAdapter.getTagName(node);return`<${tn}${function serializeAttributes(node,{treeAdapter}){let html="";for(const attr of treeAdapter.getAttrList(node)){if(html+=" ",attr.namespace)switch(attr.namespace){case NS.XML:html+=`xml:${attr.name}`;break;case NS.XMLNS:"xmlns"!==attr.name&&(html+="xmlns:"),html+=attr.name;break;case NS.XLINK:html+=`xlink:${attr.name}`;break;default:html+=`${attr.prefix}:${attr.name}`}else html+=attr.name;html+=`="${escapeAttribute(attr.value)}"`}return html}(node,options)}>${isVoidElement(node,options)?"":`${serializeChildNodes(node,options)}</${tn}>`}`}(node,options):options.treeAdapter.isTextNode(node)?function serializeTextNode(node,options){const{treeAdapter}=options,content=treeAdapter.getTextNodeContent(node),parent=treeAdapter.getParentNode(node),parentTn=parent&&treeAdapter.isElementNode(parent)&&treeAdapter.getTagName(parent);return parentTn&&treeAdapter.getNamespaceURI(parent)===NS.HTML&&function hasUnescapedText(tn,scriptingEnabled){return UNESCAPED_TEXT.has(tn)||scriptingEnabled&&tn===TAG_NAMES.NOSCRIPT}(parentTn,options.scriptingEnabled)?content:escapeText(content)}(node,options):options.treeAdapter.isCommentNode(node)?function serializeCommentNode(node,{treeAdapter}){return`\x3c!--${treeAdapter.getCommentNodeContent(node)}--\x3e`}(node,options):options.treeAdapter.isDocumentTypeNode(node)?function serializeDocumentTypeNode(node,{treeAdapter}){return`<!DOCTYPE ${treeAdapter.getDocumentTypeNodeName(node)}>`}(node,options):""}function parseFragment(fragmentContext,html,options){"string"==typeof fragmentContext&&(options=html,html=fragmentContext,fragmentContext=null);const parser=parser_Parser.getFragmentParser(fragmentContext,options);return parser.tokenizer.write(html,!0),parser.getFragment()}var jszip_min=__webpack_require__(710),jszip_min_default=__webpack_require__.n(jszip_min);class Zip{static directoryToken="____directory____token__";static textExtensions=new Set(["txt","css","html","xhtml","xml","js","mjs","ts","opf","ncx","json","md","svg","log","cjs","config","service","py","htm","csv","jar","pm","sh","conf","odp","ods","odt"]);static zipFile=async(files,epubMode=!1)=>{try{const zip=new(jszip_min_default());epubMode&&zip.file("mimetype","application/epub+zip",{compression:"STORE"});for(const file of files){if(epubMode&&("mimetype"===file.path.trim().toLowerCase()||/\.phcode\.json/gi.test(file.path.trim())))continue;const ext=file.path.includes(".")?file.path.substring(file.path.lastIndexOf(".")).toLowerCase():"",compressionLevel=/\.(png|jpe?g|webp|avif|woff2?|ttf|otf|eot|ico|mp[34]|zip|gz|pdf|bin)$/gi.test(ext)?3:6;zip.file(file.path,file.data,{compression:"DEFLATE",compressionOptions:{level:compressionLevel}})}return await zip.generateAsync({type:"blob"})}catch(e){throw console.log(e),e}};static unzipFile=async(zipBlob,includeDirectory=!1)=>{const zip=new(jszip_min_default()),loadedZip=await zip.loadAsync(zipBlob),extractedFiles=[];for(const relativePath in loadedZip.files)if(!(/^__MACOSX/.test(relativePath)||/\/__MACOSX/g.test(relativePath)||/\/\._/.test(relativePath)||/\.DS_Store$/.test(relativePath))){const zipEntry=loadedZip.files[relativePath];if(includeDirectory)zipEntry.dir&&extractedFiles.push({path:relativePath.replace(/\/$/gi,""),data:Zip.directoryToken});else if(zipEntry.dir)continue;if(!zipEntry.dir){const ext=relativePath.split(".").pop()?.toLowerCase()||"",isTextFile=Zip.textExtensions.has(ext),data=await zipEntry.async(isTextFile?"string":"blob");extractedFiles.push({path:relativePath,data})}}const finalResult=new UnzipFileList(extractedFiles.length);for(let i=0;i<extractedFiles.length;i++)finalResult[i]=extractedFiles[i];return zipBlob.name&&finalResult.setFileName(zipBlob.name),finalResult}}class DocumentsReader{pdfReadyBoolean;pdfjsLibInstance;docxReadyBoolean;docxjsLibInstance;hwpReadyBoolean;hwpjsLibInstance;splitToken;constructor(){this.pdfReadyBoolean=!1,this.docxReadyBoolean=!1,this.hwpReadyBoolean=!1,this.pdfjsLibInstance=null,this.docxjsLibInstance=null,this.hwpjsLibInstance=null,this.splitToken="____split____"}static loadExternalScript=(src,windowModuleName)=>new Promise((resolve,reject)=>{if(window[windowModuleName])return resolve(window[windowModuleName]);const script=document.createElement("script");script.src=src,/\.mjs$/i.test(src)&&(script.type="module"),script.onload=()=>{resolve(window[windowModuleName])},script.onerror=()=>{reject(new Error(`Failed to load script: ${src}`))},document.head.appendChild(script)});getPdfjsLib=async()=>{const instance=this,{loadExternalScript}=DocumentsReader;if(instance.pdfjsLibInstance)return instance.pdfjsLibInstance;try{const pdfjsModule=await loadExternalScript("/pdf.min.mjs","pdfjsLib");instance.pdfjsLibInstance=pdfjsModule;try{instance.pdfjsLibInstance.GlobalWorkerOptions.workerSrc="/pdf.worker.min.mjs",instance.pdfReadyBoolean=!0}catch(error){console.error("Error setting PDF.js workerSrc using new URL():",error),instance.pdfReadyBoolean=!1}return instance.pdfjsLibInstance}catch(error){throw console.error("Failed to load PDF.js library dynamically:",error),error}};pdfToText=async file=>{const pdfjsLib=await this.getPdfjsLib();try{if(!this.pdfReadyBoolean)try{pdfjsLib.GlobalWorkerOptions.workerSrc="/pdf.worker.min.mjs",this.pdfReadyBoolean=!0}catch(error){console.error("Error setting PDF.js workerSrc using new URL():",error),this.pdfReadyBoolean=!1}const arrayBuffer=await file.arrayBuffer(),typedArray=new Uint8Array(arrayBuffer),loadingTask=pdfjsLib.getDocument(typedArray),pdfDoc=await loadingTask.promise,text=await(async pdfDoc=>{try{let numPages,allText,tempList,pastY,thisPushBoolean;numPages=pdfDoc.numPages,allText="",tempList=[],pastY=0,thisPushBoolean=!1;for(let i=0;i<numPages;i++){const page=await pdfDoc.getPage(i+1),textContent=await page.getTextContent();let pageText="";if(pastY=0,tempList=[],thisPushBoolean=!1,pageText="",textContent&&textContent.items){const targetItemList=textContent.items.filter(i=>void 0!==i.transform).filter(i=>Array.isArray(i.transform)&&i.transform.every(s=>"number"==typeof s)).filter(i=>i.transform.length>0),yGroupMatrix=[];for(let item of targetItemList)(0===pastY||thisPushBoolean)&&(tempList=[]),thisPushBoolean=0!==pastY&&pastY!==Number(item.transform.at(-1)),pastY=item.transform.at(-1),tempList.push(item),thisPushBoolean&&yGroupMatrix.push(tempList);pageText="",yGroupMatrix.forEach(l=>{pageText+="\n"+l.reduce((acc,curr)=>acc+curr.str,"")}),pageText=pageText.trim()}allText+=pageText+"\n","function"==typeof page.cleanup&&page.cleanup()}return allText=allText.trim(),allText}catch(e){throw console.log(e),new Error(e.message)}})(pdfDoc);return text}catch(e){throw console.log(e),new Error(e.message)}};getDocxLib=async()=>{const instance=this,{loadExternalScript}=DocumentsReader;if(instance.docxjsLibInstance)return instance.docxjsLibInstance;try{const docxModule=await loadExternalScript("/mammoth.mjs","Mammoth");return instance.docxjsLibInstance=docxModule,instance.docxReadyBoolean=!0,instance.docxjsLibInstance}catch(error){throw console.error("Failed to load mammoth library dynamically:",error),error}};docxToText=async file=>{const docxModule=await this.getDocxLib();try{const arrayBuffer=await file.arrayBuffer(),docText=await(arrayBuffer=>new Promise((resolve,reject)=>{docxModule.convertToHtml({arrayBuffer}).then(result=>{const rawHtml=result.value;let parser,parsedDocument,bodyElement,bodyChildren,finalTextArr;parser=new DOMParser,parsedDocument=parser.parseFromString(rawHtml,"text/html"),bodyElement=parsedDocument.querySelector("body"),bodyChildren=[...bodyElement.childNodes],finalTextArr=[];for(let c of bodyChildren)null!==c.textContent&&finalTextArr.push(c.textContent);resolve(finalTextArr.join("\n"))}).catch(e=>{reject(e)})}))(arrayBuffer);return docText}catch(e){throw console.log(e),new Error(e.message)}};getHwpLib=async()=>{const instance=this,{loadExternalScript}=DocumentsReader;if(instance.hwpjsLibInstance)return instance.hwpjsLibInstance;try{const hwpModule=await loadExternalScript("/hwp.mjs","HwpReader");return instance.hwpjsLibInstance=hwpModule,instance.hwpReadyBoolean=!0,instance.hwpjsLibInstance}catch(error){throw console.error("Failed to load hwp library dynamically:",error),error}};hwpToText=async(file,arrayMode=!1)=>{const instance=this,hwpModule=await instance.getHwpLib();try{if(arrayMode){const textArr=await(file=>new Promise((resolve,reject)=>{hwpModule.matrix(file).then(result=>{resolve(result.map(s=>s.join("\n")))}).catch(err=>reject(err))}))(file);return textArr.filter(s=>""!==s.trim()).join(instance.splitToken)}{const text=await(file=>new Promise((resolve,reject)=>{hwpModule.parse(file).then(result=>{resolve(result)}).catch(err=>reject(err))}))(file);return text}}catch(e){throw console.log(e),new Error(e.message)}};hwpToTextArray=async file=>(await this.hwpToText(file,!0)).split(this.splitToken);hwpxToText=async(file,arrayMode=!1)=>{const instance=this;try{const unzipFileList=await Zip.unzipFile(file),packageFile=unzipFileList.find(o=>/Contents\/content\.hpf/gi.test(o.path));if(void 0===packageFile)throw new Error("Cannot find Contents/content.hpf. Invalid HWPX file.");const packageXmlStr="string"==typeof packageFile.data?packageFile.data:await packageFile.data.text(),packageDoc=(new DOMParser).parseFromString(packageXmlStr,"application/xml"),itemRefs=packageDoc.getElementsByTagName("opf:itemref"),sectionFiles=[];for(let i=0;i<itemRefs.length;i++){const idref=itemRefs[i].getAttribute("idref");if(idref&&idref.startsWith("section")){const manifestItem=packageDoc.querySelector(`[id="${idref}"]`);if(manifestItem){const href=manifestItem.getAttribute("href");href&&sectionFiles.push(href)}}}let finalResult,verticalPosition,pastPosition,pageText,tong;finalResult="",verticalPosition=0,pastPosition=0,pageText="",tong=[];for(let href of sectionFiles){const thisFile=unzipFileList.find(o=>new RegExp(href,"g").test(o.path));if(void 0!==thisFile){const xmlString=("string"==typeof thisFile.data?thisFile.data:await thisFile.data.text()).replace(/<hp\:/gis,"<").replace(/<\/hp\:/gis,"</"),parser=new DOMParser,paragraphArr=[...parser.parseFromString(xmlString,"application/xml").querySelectorAll("p")].map(c=>c);pageText="";for(let paragraph of paragraphArr){finalResult+="\n";const textTarget=[...paragraph.querySelectorAll("t")],lineseg=paragraph.querySelector("lineseg[vertpos]");null!==lineseg&&(verticalPosition=Number.isNaN(Number(lineseg.getAttribute("vertpos")))?0:Number(lineseg.getAttribute("vertpos")),verticalPosition<pastPosition&&(tong.push(pageText),pageText=""));const thisText=textTarget.reduce((acc,curr)=>null===curr.textContent?acc:acc+String(curr.textContent),"");"string"==typeof thisText&&(pageText+=thisText+"\n",finalResult+=thisText),pastPosition=verticalPosition}finalResult+="\n"}}return tong.push(pageText),arrayMode?tong.filter(s=>""!==s.trim()).join(instance.splitToken):finalResult}catch(e){throw console.log(e),new Error(e.message)}};hwpxToTextArray=async file=>(await this.hwpxToText(file,!0)).split(this.splitToken);idmlToText=async(file,arrayMode=!1)=>{const instance=this;try{const delta=1e5,getYPosition=(e,twoPage=!1)=>{const itemTransformRaw=String(e.getAttribute("ItemTransform"));let scaleX,scaleY,translateX,translateY,thisFinalStandardNumber;if(scaleX=1,scaleY=1,translateX=0,translateY=0,6===itemTransformRaw.split(" ").length){const thisArr=itemTransformRaw.split(" ").map(s=>Number(s.trim()));scaleX=thisArr[0],scaleY=thisArr[3],translateX=thisArr[4],translateY=thisArr[5]}thisFinalStandardNumber=9e3*delta;try{const xPositions=[...e.querySelectorAll("PathPointType")].map(k=>String(k.getAttribute("Anchor")?.split(" ")?.[0])).filter(v=>Boolean(v)).map(s=>Number(s)).map(n=>n*scaleX+translateX),yPositions=[...e.querySelectorAll("PathPointType")].map(k=>String(k.getAttribute("Anchor")?.split(" ")?.[1])).filter(v=>Boolean(v)).map(s=>Number(s)).map(n=>n*scaleY+translateY);if(xPositions.sort((c,d)=>c-d),yPositions.sort((c,d)=>c-d),"number"!=typeof xPositions[0]||"number"!=typeof yPositions[0])throw new Error("cannot parse x, y");thisFinalStandardNumber=twoPage&&xPositions[0]<=0?delta*yPositions[0]+xPositions[0]+-1*delta**2:delta*yPositions[0]+xPositions[0]}catch{}return thisFinalStandardNumber},unzipFileList=await Zip.unzipFile(file);let designmapFile,designmapXmlStr,parser,designmapDoc,storyElements,spreadElements,storyPaths,spreadPaths,finalResult,storytextArray,pageText,storyContentMap,pageDictionary;if(designmapFile=unzipFileList.find(o=>/designmap\.xml$/gi.test(o.path)),void 0===designmapFile)throw new Error("Cannot find designmap.xml. Invalid IDML file.");designmapXmlStr=("string"==typeof designmapFile.data?designmapFile.data:await designmapFile.data.text()).replace(/<idPkg\:/gi,"<"),parser=new DOMParser,designmapDoc=parser.parseFromString(designmapXmlStr,"application/xml"),storyElements=[...designmapDoc.querySelectorAll("Story")],spreadElements=[...designmapDoc.querySelectorAll("Spread")],storyPaths=[];for(let story of storyElements){const src=story.getAttribute("src");src&&storyPaths.push(src)}spreadPaths=[];for(let spread of spreadElements){const src=spread.getAttribute("src");src&&spreadPaths.push(src)}if(0===storyPaths.length||0===spreadPaths.length)return"";storyContentMap=new Map;for(let storyPath of storyPaths){const storyFile=unzipFileList.find(o=>o.path.endsWith(storyPath));if(storyFile){const storyXmlString="string"==typeof storyFile.data?storyFile.data:await storyFile.data.text(),contentElements=parser.parseFromString(storyXmlString,"application/xml").querySelectorAll("Content, Br"),storyId=storyPath.match(/Story_([^\.]+)\.xml$/)?.[1];storytextArray=[];for(let content of contentElements)/Content/gis.test(content.nodeName)?content.textContent&&storytextArray.push(content.textContent):storytextArray.push("\n");storyId&&storyContentMap.set(storyId,storytextArray.join(""))}}finalResult="",pageText="",pageDictionary=[];for(const path of spreadPaths){const thisSpread=unzipFileList.find(o=>o.path.endsWith(path));if(void 0!==thisSpread){const xmlString="string"==typeof thisSpread.data?thisSpread.data:await thisSpread.data.text(),thisDocument=parser.parseFromString(xmlString,"application/xml"),textframeElements=[...thisDocument.querySelectorAll("TextFrame")];[...thisDocument.querySelectorAll("Page")].length>1?textframeElements.sort((a,b)=>getYPosition(a,!0)-getYPosition(b,!0)):textframeElements.sort((a,b)=>getYPosition(a)-getYPosition(b)),pageText="\n";for(let textFrameTag of textframeElements)if(textFrameTag.getAttribute("ParentStory")){const previousFrame=textFrameTag.getAttribute("PreviousTextFrame");if(previousFrame&&"n"!==previousFrame)continue;const storyText=storyContentMap.get(String(textFrameTag.getAttribute("ParentStory")));storyText&&(pageText+=storyText+"\n")}pageDictionary.push(pageText.trim()),""!==pageText.trim()&&(finalResult+="\n"+pageText)}}return finalResult=finalResult.replace(/\n+/gis,"\n").trim(),arrayMode?pageDictionary.filter(s=>""!==s.trim()).join(instance.splitToken):finalResult}catch(e){throw console.log(e),new Error(e.message)}};idmlToTextArray=async file=>(await this.idmlToText(file,!0)).split(this.splitToken);epubToText=async file=>{try{if(!/\.epub\s*$/gi.test(file.name)&&!/\.zip\s*$/gi.test(file.name))throw new Error("invalid input, must be epub or zip file");const xhtmlTarget=(await Zip.unzipFile(file)).getFileList().filter(o=>/\.xhtml\s*$/gis.test(o.path.toLowerCase())).filter(v=>!["cover.xhtml","toc.xhtml","author.xhtml","back.xhtml","backSpacer.xhtml","context.xhtml","info.xhtml","nav.xhtml","spacer.xhtml"].includes(v.path.split("/").at(-1)?.trim()));let resultText,parser,parsedDocument,thisString,rawText,rawTextArr,body,initParseError;resultText="";for(let v of xhtmlTarget)try{if(thisString=v.data,parser=new DOMParser,parsedDocument=parser.parseFromString(thisString,"application/xhtml+xml"),body=parsedDocument.body,initParseError=parsedDocument.querySelector("parsererror"),null===body||null!==initParseError)throw new Error("invalid xhtml");if(null===parsedDocument.body.textContent)throw new Error("invalid xhtml 2");rawText=parsedDocument.body.textContent,rawTextArr=rawText.split("\n"),rawTextArr=rawTextArr.map(s=>s.replace(/\t/gi,"").trim()).filter(s=>""!==s).filter(s=>"|"!==s&&"\\"!==s&&"/"!==s),resultText+=rawTextArr.join("\n"),resultText+="\n\n"}catch{}return resultText}catch(e){throw console.log(e),e}}}class Properties extends AbstractNode{pageLoadingComplete;whiteCloseEvent;resizeStack;resizeFrom;resizePopup;collection;key;epubXhtmlCollection;epubXhtmlKey;back;currentXhtml;currentMap;currentId;saveTimeout;collectionMap;collectionString;collectionBlob;collectionFileDirectory;collectionFileText;collectionFileBlob;currentXhtmlId;currentCssId;absoluteBase;isInChapter;treeBaseClassName;totalMotherClassName;whitePreviewPopupClassName;whitePopupCloseEvent;whitePopupCloseDoing;textTags;voidElements;lastProjectIdStorageToken;naviHeight;innerCopyStart;customFonts;imageResponseDivClassName;imageDarkDivClassName;imageResponsive;imageMediaClassNames;imageDarkClassNames;darkModeMediaCss;responsiveMediaCss;iwComplexResponseDivClassName;iwComplexResponseParagraphClassName;iwResponsiveMediaCss;shadowBodyClassName;standardPoint;navigatorButtonClassName;navigatorButtonClassNameChapter;refreshMemoryToken;newImageDropDoing;imageExe;documentExe;copyDefaultKey;dropAreaTempDomClassName;tempTextareaEditorClassName;imageSelectMode;imageSelectClassName;shadowDoms;isInDarkMode;isInApp;currentVersion;dropAfterAreaHeight;dropAfterAreaBorderWidth;marginPaddingBorderBoxClassName;marginPaddingBorderBoxInputClassName;editorTargetTagNames;sizeBoxTargetTagNames;editorBlurBan;cssFourView;domToEventSet;user;dragCounter;ghostMediaConditionInit;ghostMediaTrueConditionSmallMin;ghostMediaFalseConditionSmallMin;ghostMediaTrueConditionBigMin;ghostMediaFalseConditionBigMin;ghostMediaTrueConditionSmallMax;ghostMediaFalseConditionSmallMax;ghostMediaTrueConditionBigMax;ghostMediaFalseConditionBigMax;previewZoomLevel;reverseSave;modeDictionary;divideRowClassName;shadowDomTargetClassName;nonMediaUpdate;flexBoxClassName;nonMediaUpdateDone;blankDivClassName;globalWhiteLoading;basicButtonClassName;basicButtonBaseClassName;basicButtonStyle;mintBlueColorsArr;greenDelta;blueDelta;iframePopupClassName;topBarClassName;topBarHeight;documentsReader;convertDocxExe;lastSelectionLineIndex;constructor(){super(),this.greenDelta=-7,this.blueDelta=7,this.lastSelectionLineIndex=-1,this.user=UserFunctions.dummyUser(),this.iframePopupClassName="iframePopupClassName",this.topBarClassName="topBarClassName",this.topBarHeight=1,this.globalWhiteLoading=null,this.reverseSave=()=>{},this.mintBlueColorsArr=[],this.nonMediaUpdate=!1,this.nonMediaUpdateDone=!1,this.pageLoadingComplete=!1,this.resizeStack=0,this.resizeFrom=0,this.resizePopup=0,this.collection="pathAnimator",this.epubXhtmlCollection="epubXhtml",this.dragCounter=0,this.key="path_"+AbstractNode.dateToString(new Date).replace(/[^0-9]/gi,""),this.epubXhtmlKey="epubXhtml_"+AbstractNode.dateToString(new Date).replace(/[^0-9]/gi,""),this.back=new FrontBackMaker,this.documentsReader=new DocumentsReader,this.currentXhtml=null,this.currentMap=null,this.currentId="",this.saveTimeout=null,this.collectionMap="epubMap",this.collectionString="epubString",this.collectionBlob="epubBlob",this.collectionFileDirectory="fileDirectory",this.collectionFileText="fileText",this.collectionFileBlob="fileBlob",this.currentXhtmlId="",this.currentCssId="",this.isInChapter=!1,this.isInDarkMode=!1,this.treeBaseClassName="treeBaseClassName",this.totalMotherClassName="totalMotherClassName",this.whitePreviewPopupClassName="whitePreviewPopupClassName",this.whitePopupCloseEvent=e=>{},this.whitePopupCloseDoing=!1,this.lastProjectIdStorageToken="__lastProjectIdStorageToken",this.naviHeight=CreateDom.getNaviheight(),this.innerCopyStart=!1,this.customFonts=[],this.shadowBodyClassName="shadowBodyClassName",this.standardPoint=[45,60],this.navigatorButtonClassName="navigatorButtonClassName",this.navigatorButtonClassNameChapter="navigatorButtonClassNameChapter",this.refreshMemoryToken="__refreshMemoryToken__",this.newImageDropDoing=!1,this.copyDefaultKey="copiedDefault_",this.dropAreaTempDomClassName="dropAreaTempDomClassName",this.tempTextareaEditorClassName="tempTextareaEditorClassName",this.imageSelectMode="normal",this.imageSelectClassName="imageSelectClassName",this.editorBlurBan=!1,this.shadowDoms=[],this.cssFourView=[null,null,null,null],this.ghostMediaConditionInit="min-width:",this.ghostMediaTrueConditionSmallMin="1.1px",this.ghostMediaFalseConditionSmallMin="9998px",this.ghostMediaTrueConditionBigMin="1.2px",this.ghostMediaFalseConditionBigMin="9999px",this.ghostMediaTrueConditionSmallMax="1.3px",this.ghostMediaFalseConditionSmallMax="9997px",this.ghostMediaTrueConditionBigMax="1.4px",this.ghostMediaFalseConditionBigMax="9996px",this.previewZoomLevel=1,this.imageExe=["jpg","jpeg","gif","png","webp","tif","tiff","svg","webm","mp4"],this.documentExe=["pdf","hwp","hwpx","docx","txt","epub","idml"],this.convertDocxExe=["hwp","hwpx","idml"],this.editorTargetTagNames=["p","h1","h2","h3","h4","h5","h6"],this.editorTargetTagNames=this.editorTargetTagNames.concat(this.editorTargetTagNames.map(s=>s.toUpperCase())),this.sizeBoxTargetTagNames=["div","img"],this.sizeBoxTargetTagNames=this.sizeBoxTargetTagNames.concat(this.sizeBoxTargetTagNames.map(s=>s.toUpperCase())),this.blankDivClassName="blank_div_tong",this.absoluteBase={font:"OEBPS/Fonts",image:"OEBPS/Images",style:"OEBPS/Styles",text:"OEBPS/Text",chapter:"OEBPS/Text/chapter"},this.textTags=["p","h1","h2","h3","h4","h5","h6","div","blockquote","pre","hr","address","span","a","em","strong","i","b","q","cite","dfn","abbr","code","var","samp","kbd","sub","sup","small","mark","wbr","br","time","data","ul","ol","li","dl","dt","dd","table","caption","thead","tbody","tfoot","tr","th","td","colgroup","col","img","audio","video","source","track","figure","figcaption","svg","canvas","map","area","section","article","aside","nav","header","footer","main","details","summary","dialog","form","input","textarea","button","select","option","optgroup","label","fieldset","legend"],this.voidElements=["img","br","hr","input","area","base","col","embed","link","meta","param","source","track","wbr"],this.isInApp=!1,this.currentVersion={key:"",date:new Date,version:0},"object"==typeof window?.currentVersion&&null!==window?.currentVersion&&(this.isInApp=!0,this.currentVersion=AbstractNode.objectDeepCopy(window?.currentVersion)),this.dropAfterAreaHeight=30,this.dropAfterAreaBorderWidth=2,this.marginPaddingBorderBoxClassName="marginPaddingBorderBoxClassName",this.marginPaddingBorderBoxInputClassName="marginPaddingBorderBoxInputClassName",this.domToEventSet=(d,thisWidth,finalWidth,freshStatus=!1)=>{},this.modeDictionary={mobile:{size:400,title:"모바일"},bigMobile:{size:480,title:"모바일"},bigBigMobile:{size:600,title:"모바일"},tablet:{size:730,title:"태블릿"},bigTablet:{size:962,title:"데스크탑"},desktop:{size:1080,title:"데스크탑"}},this.divideRowClassName="dividerow",this.flexBoxClassName="flexbox",this.shadowDomTargetClassName="shadowDomTargetClassName";this.imageResponseDivClassName="responsive_image",this.imageDarkDivClassName="darkmedia_image",this.imageResponsive="imageResponsiveClassName",this.imageMediaClassNames=["image_small","image_middle","image_large"],this.imageDarkClassNames=["image_light","image_dark"],this.darkModeMediaCss={media:[`div.${this.imageDarkDivClassName} {`,"  display: block;","  width: 100%;","  height: auto;","}",`img.${this.imageDarkClassNames[0]} {`,"  display: block;","  width: 100%;","  height: auto;","}",`img.${this.imageDarkClassNames[1]} {`,"  display: none;","  width: 100%;","  height: auto;","}","@media (prefers-color-scheme: dark) {",`  img.${this.imageDarkClassNames[0]} {`,"    display: none;","    width: 100%;","    height: auto;","  }",`  img.${this.imageDarkClassNames[1]} {`,"    display: block;","    width: 100%;","    height: auto;","  }","}"],light:[`div.${this.imageDarkDivClassName} {`,"  display: block;","  width: 100%;","  height: auto;","}",`img.${this.imageDarkClassNames[0]} {`,"  display: block;","  width: 100%;","  height: auto;","}",`img.${this.imageDarkClassNames[1]} {`,"  display: none;","  width: 100%;","  height: auto;","}"],dark:[`  div.${this.imageDarkDivClassName} {`,"    display: block;","    width: 100%;","    height: auto;","  }",`  img.${this.imageDarkClassNames[0]} {`,"    display: none;","    width: 100%;","    height: auto;","  }",`  img.${this.imageDarkClassNames[1]} {`,"    display: block;","    width: 100%;","    height: auto;","  }"]},this.responsiveMediaCss={meida:[`.${this.imageResponseDivClassName} {`,"  display: flex;","  flex-direction: column;","  align-items: start;","  width: 100%;","  height: auto;","  overflow: hidden;","}",`.${this.imageResponsive} {`,"  display: none;","  width: 100%;","}",`@media (max-width: ${String(this.standardPoint[0])}rem) {`,`  .${this.imageMediaClassNames[0]}_${this.imageDarkClassNames[0]} {`,"    display: block;","    width: 100%;","  }",`  .${this.imageMediaClassNames[0]}_${this.imageDarkClassNames[1]} {`,"    display: none;","    width: 100%;","  }","}",`@media (min-width: ${String(this.standardPoint[0])}rem) and (max-width: ${String(this.standardPoint[1])}rem) {`,`  .${this.imageMediaClassNames[1]}_${this.imageDarkClassNames[0]} {`,"    display: block;","    width: 100%;","  }",`  .${this.imageMediaClassNames[1]}_${this.imageDarkClassNames[1]} {`,"    display: none;","    width: 100%;","  }","}",`@media (min-width: ${String(this.standardPoint[1])}rem) {`,`  .${this.imageMediaClassNames[2]}_${this.imageDarkClassNames[0]} {`,"    display: block;","    width: 100%;","  }",`  .${this.imageMediaClassNames[2]}_${this.imageDarkClassNames[1]} {`,"    display: none;","    width: 100%;","  }","}"],dark:[`@media (max-width: ${String(this.standardPoint[0])}rem) and (prefers-color-scheme: dark) {`,`  .${this.imageMediaClassNames[0]}_${this.imageDarkClassNames[0]} {`,"    display: none;","    width: 100%;","  }",`  .${this.imageMediaClassNames[0]}_${this.imageDarkClassNames[1]} {`,"    display: block;","    width: 100%;","  }","}",`@media (min-width: ${String(this.standardPoint[0])}rem) and (max-width: ${String(this.standardPoint[1])}rem) and (prefers-color-scheme: dark) {`,`  .${this.imageMediaClassNames[1]}_${this.imageDarkClassNames[0]} {`,"    display: none;","    width: 100%;","  }",`  .${this.imageMediaClassNames[1]}_${this.imageDarkClassNames[1]} {`,"    display: block;","    width: 100%;","  }","}",`@media (min-width: ${String(this.standardPoint[1])}rem) and (prefers-color-scheme: dark) {`,`  .${this.imageMediaClassNames[2]}_${this.imageDarkClassNames[0]} {`,"    display: none;","    width: 100%;","  }",`  .${this.imageMediaClassNames[2]}_${this.imageDarkClassNames[1]} {`,"    display: block;","    width: 100%;","  }","}"],div:[`@media (max-width: ${String(this.standardPoint[0])}rem) {`,`  .${this.imageResponseDivClassName} {`,"    align-items: start !important;","  }","}",`@media (min-width: ${String(this.standardPoint[0])}rem) and (max-width: ${String(this.standardPoint[1])}rem) {`,`  .${this.imageResponseDivClassName} {`,"    align-items: start !important;","  }","}",`@media (min-width: ${String(this.standardPoint[1])}rem) {`,`  .${this.imageResponseDivClassName} {`,"    align-items: start !important;","  }","}"],divDark:[`@media (max-width: ${String(this.standardPoint[0])}rem) and (prefers-color-scheme: dark) {`,`  .${this.imageResponseDivClassName} {`,"    align-items: start !important;","  }","}",`@media (min-width: ${String(this.standardPoint[0])}rem) and (max-width: ${String(this.standardPoint[1])}rem) and (prefers-color-scheme: dark) {`,`  .${this.imageResponseDivClassName} {`,"    align-items: start !important;","  }","}",`@media (min-width: ${String(this.standardPoint[1])}rem) and (prefers-color-scheme: dark) {`,`  .${this.imageResponseDivClassName} {`,"    align-items: start !important;","  }","}"]},this.iwComplexResponseDivClassName="iwComplexTong",this.iwComplexResponseParagraphClassName="iwComplexParagraphTong",this.iwResponsiveMediaCss=[`.${this.iwComplexResponseDivClassName} {`,"  display: flex;","  flex-direction: row;","  justify-content: stretch;","  align-items: stretch;","  width: 100%;","  height: auto;","}",`.${this.iwComplexResponseParagraphClassName} {`,"  display: flex;","  flex-direction: column;","  justify-content: center;","  align-items: center;","  width: 40%;","  box-sizing: border-box;","  flex-shrink: 1;","  flex-grow: 1;","  margin: 0rem;","  padding: 0rem;","}"],this.basicButtonBaseClassName="basicButtonBase",this.basicButtonClassName="basicButton",this.basicButtonStyle=[`.${this.basicButtonBaseClassName} {`,"  display: inline-flex;","  flex-direction: row;","  justify-content: start;","  align-items: start;","  position: relative;","  width: 100%;","  height: auto;","  margin: 0rem;","  padding: 0rem;","  margin-top: 1rem;","  margin-bottom: 1rem;","  z-index: 1;","}",`.${this.basicButtonClassName} {`,"  display: inline-flex;","  position: relative;","  flex-direction: column;","  justify-content: center;","  align-items: center;","  cursor: pointer;","  border-radius: 0.5rem;","  height: 2.1rem;","  box-sizing: border-box;","  margin: 0rem;","  padding: 0rem;","}",`.${this.basicButtonClassName} p {`,"  font-family: pretendard;","  font-weight: 600;","  font-size: 0.94rem;","  box-sizing: border-box;","  margin: 0rem;","  padding-top: 0rem;","  padding-bottom: 0rem;","  padding-right: 1rem;","  padding-left: 1rem;","}"]}static metaFunction=(request,mongo,host)=>{try{let pageName,titleString,descriptionString,hiddenHtml,imagePath,fullLink,manifestPath;return pageName="pathAnimator",titleString="Abstract Builder",descriptionString="epub 전자책, 웹문서 생성 및 편집기 Abstract Builder",hiddenHtml="",imagePath="/og_image2.jpg",fullLink="https://"+host+"/pathAnimator",manifestPath="/manifest_path.json",{name:pageName,title:titleString,description:descriptionString,hidden:hiddenHtml,image:imagePath,link:fullLink,manifest:manifestPath}}catch(e){return console.log(e),{error:null}}};static scrollCloseEvent=async e=>{if(e.stopImmediatePropagation(),e.stopPropagation(),1===AbstractNode.stacks.__temporaryPreventScroll)e.preventDefault();else if(null!==document.querySelector(".whitePopupClassName"))if(e.preventDefault(),"number"!=typeof AbstractNode.stacks.__temporaryScrollStack)AbstractNode.stacks.__temporaryScrollStack=0;else if(AbstractNode.stacks.__temporaryScrollStack<24)await this.sleep(100),AbstractNode.stacks.__temporaryScrollStack=AbstractNode.stacks.__temporaryScrollStack+1;else{const motherArr=AbstractNode.selectByClass("whitePopupClassName");if(motherArr.length>1){AbstractNode.stacks.__temporaryPreventScroll=1;const[cancel,whiteBase]=motherArr;1===AbstractNode.stacks.initScrollStatus?(cancel.style.animation="justfadeoutsmall 0.5s ease forwards",whiteBase.style.animation="fadedownlite 0.5s ease forwards"):(cancel.style.animation="justfadeoutsmall 0.5s ease forwards",whiteBase.style.animation="fadedownentire 0.5s ease forwards"),AbstractNode.stacks.initScrollStatus=0,await AbstractNode.sleep(500),AbstractNode.stacks.__temporaryPreventScroll=0,AbstractNode.removeByClass("whitePopupClassName"),AbstractNode.stacks.__temporaryScrollStack=0,window.removeEventListener("scroll",Properties.scrollCloseEvent)}}};static binaryPath="./study/path";static svgMaker={...AbstractNode.svgMaker};static colorChip={...AbstractNode.colorExtended,gradientTrasparentMint:"linear-gradient(138deg, rgba(0,130,210,0.9) 0%, rgba(0,177,207,0.8) 100%)",gradientTrasparentWhite:"linear-gradient(0deg, rgba(255,255,255,1) 0%, rgba(223,231,241,1) 100%)"}}class BaseStructure extends Properties{constructor(){super()}onlinePolling=async()=>{const back=this.back,{ajaxJson}=AbstractNode,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(!1),rows=await back.frontRead(AbstractNode.abstractCloudCertificationCollection,{});let timeout;rows.sort((a,b)=>b.date.valueOf()-a.date.valueOf()),timeout=null;try{if(rows.length>0){rows[0].session,rows[0].phone;timeout=window.setInterval(()=>{ajaxJson({phone:rows[0].phone,date:new Date,session:rows[0].session,mobile:mobile?1:0},"/onlineCheck").then(o=>{("string"!=typeof o.message||"resolve"!==o.message&&"true"!==o.message&&"success"!==o.message)&&back.frontRead(AbstractNode.abstractCloudCertificationCollection,{}).then(rs=>{const promiseArr=[];for(let r of rs)promiseArr.push(back.frontDelete(AbstractNode.abstractCloudCertificationCollection,{_id:r._id}));return Promise.all(promiseArr)}).then(()=>{window.location.reload()}).catch(()=>{window.location.reload()})}).catch(e=>console.log(e))},3e5)}}catch(e){null!==timeout&&window.clearInterval(timeout),console.log(e)}};getUserPlanStatus=()=>{const{user}=this;if(""===user.phone)return!1;{void 0===user.plan&&(user.plan=[]);const planArr=user.plan;if(0===planArr.length)return!1;if(0===planArr.filter(o=>"free"!==o.type).length)return!1;{const now=new Date,calculTargets=planArr.filter(o=>"free"!==o.type);let finalString,freeBoo,thisAutoStatus;if(calculTargets.sort((a,b)=>b.date.valueOf()-a.date.valueOf()),thisAutoStatus=!1,calculTargets.some(o=>"forever"===o.type))return!0;finalString="",freeBoo=!0;for(let i=0;i<calculTargets.length;i++){const thisType=calculTargets[i].type,validBills=calculTargets[i].bill.filter(o=>o.expired.valueOf()>=now.valueOf());validBills.sort((a,b)=>b.date.valueOf()-a.date.valueOf()),thisAutoStatus=validBills[0].next,0===validBills.length?(finalString="Free",freeBoo=!0):(finalString="one"===thisType?"One-year":"Pro",freeBoo=!1)}return freeBoo&&(finalString="Free"),"Free"!==finalString}}};fileToText=async file=>{const documentsReader=this.documentsReader,{colorChip,svgMaker:localSvgMaker,binaryPath}=BaseStructure,{withOut,percent,promptPopup,markdownBlocks,equalJson,ajaxForm,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(!1),loading=this.whiteProgressLoading(null,!0,!1);try{let resultText;if(/\.pdf\s*$/gi.test(file.name))resultText=await documentsReader.pdfToText(file);else if(/\.doc\s*$/gi.test(file.name)||/\.docx\s*$/gi.test(file.name))resultText=await documentsReader.docxToText(file);else if(/\.hwp\s*$/gi.test(file.name))resultText=await documentsReader.hwpToText(file);else if(/\.hwpx\s*$/gi.test(file.name))resultText=await documentsReader.hwpxToText(file);else if(/\.idml\s*$/gi.test(file.name))resultText=await documentsReader.idmlToText(file);else if(/\.epub\s*$/gi.test(file.name)||/\.zip\s*$/gi.test(file.name))resultText=await documentsReader.epubToText(file);else{if(!/\.txt\s*$/gi.test(file.name))throw new Error("invalid file type");resultText=await file.text()}return loading.remove(),resultText}catch(e){return window.alert("파일 형식이 잘못되었습니다! pdf 파일로 올려주세요!"),console.log(e),loading.remove(),""}};fileToTextArrayByPage=async file=>{const documentsReader=this.documentsReader,{colorChip,svgMaker:localSvgMaker,binaryPath}=BaseStructure,{withOut,percent,promptPopup,markdownBlocks,equalJson,ajaxForm,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(!1),loading=this.whiteProgressLoading(null,!0,!1);try{let resultTextArray;if(/\.idml\s*$/gi.test(file.name))resultTextArray=await documentsReader.idmlToTextArray(file);else if(/\.hwp\s*$/gi.test(file.name))resultTextArray=await documentsReader.hwpToTextArray(file);else{if(!/\.hwpx\s*$/gi.test(file.name))throw new Error("invalid file type");resultTextArray=await documentsReader.hwpxToTextArray(file)}return loading.remove(),resultTextArray}catch(e){return window.alert("파일 형식이 잘못되었습니다! pdf 파일로 올려주세요!"),console.log(e),loading.remove(),[]}};updateState=(...args)=>{const index=args.join("/");history.pushState({index},"","/path/"+index)}}class BaseEvents extends BaseStructure{constructor(){super()}resizeEvent=()=>{const instance=this,{ea,media,baseTong,standardWidth,totalContents,naviHeight}=this,desktop=!media[4];if(this.resizeStack=0,this.resizeFrom=0,this.resizePopup=0,desktop){const resizeDebounceEvent=()=>{let timeout;const reEvent=async()=>{let motherTarget;motherTarget=null!==document.querySelector("#totalcontents")?document.querySelector("#totalcontents"):document.body,null!==window.document.fullscreenElement||window.location.reload(),instance.resizeStack=0};return e=>{0===instance.resizeStack&&(instance.resizeStack=1,instance.resizeFrom=window.innerWidth);clearTimeout(timeout),timeout=setTimeout(()=>{timeout=null,reEvent().catch(e=>console.log(e))},250)}};window.addEventListener("resize",resizeDebounceEvent())}};injectionRawText=async targetFile=>{};messageEvent=()=>{const instance=this,back=this.back,{ea,media,baseTong,standardWidth,totalContents,naviHeight,collectionFileText,collectionFileBlob}=this;media[4];window.addEventListener("message",async e=>{if("string"==typeof e.data)if("close"===e.data&&"function"==typeof AbstractNode.events.whiteAsyncCloseEvent){const whiteCancelEvent=AbstractNode.events.whiteAsyncCloseEvent.bind(e.currentTarget);await whiteCancelEvent(e)}else try{const messageDictionary=JSON.parse(e.data);if("string"!=typeof messageDictionary.type)throw new Error("invalid object");if("projectOpen"===messageDictionary.type&&"function"==typeof AbstractNode.events.whiteAsyncCloseEvent){if("string"!=typeof messageDictionary.key)throw new Error("invalid message dictionary");const target=messageDictionary.key;try{instance.currentId=target;const mapRows=await back.frontRead(instance.collectionMap,{});if(void 0===mapRows.find(o=>o.projectId===this.currentId))throw new Error("invalid id");{const map=mapRows.find(o=>o.projectId===this.currentId);instance.currentId=target,instance.currentMap=map,instance.currentId=map.projectId}const whiteCancelEvent=AbstractNode.events.whiteAsyncCloseEvent.bind(e.currentTarget);await whiteCancelEvent(e);const loading=instance.whiteProgressLoading(null,!0,!1,120);await instance.baseMaker(),await loading.softRemove()}catch{}}else if("documentOpen"===messageDictionary.type&&"function"==typeof AbstractNode.events.whiteAsyncCloseEvent){if("string"!=typeof messageDictionary.key)throw new Error("invalid message dictionary");const _id=messageDictionary.key;try{let thisData;if(/^t/gi.test(_id)){const[textRow]=await back.frontRead(collectionFileText,{_id});thisData=new File([textRow.data],textRow.name,{type:"text/plain"})}else{const[blobRow]=await back.frontRead(collectionFileBlob,{_id});thisData=blobRow.data}const whiteCancelEvent=AbstractNode.events.whiteAsyncCloseEvent.bind(e.currentTarget);await whiteCancelEvent(e),await instance.injectionRawText(thisData)}catch{}}}catch{}})}}class Helper extends BaseEvents{constructor(){super()}blobToBase64DataUrl=blob=>new Promise((resolve,reject)=>{const reader=new FileReader;reader.onloadend=()=>{"string"==typeof reader.result?resolve(reader.result):reject(new Error("FileReader.readAsDataURL did not return a string."))},reader.onerror=error=>{reject(error)},reader.readAsDataURL(blob)});createEpubXhtmlData=(xhtml,css,title)=>({_id:this.currentXhtml._id,date:new Date,key:this.epubXhtmlKey,data:{xhtml,css,title:"string"==typeof title?title:this.currentXhtml.data.title}});epubStringIdMaker=projectId=>{const{uniqueValue}=AbstractNode;return`epubString__${projectId}__${uniqueValue("hex")}`};epubBlobIdMaker=projectId=>{const{uniqueValue}=AbstractNode;return`epubBlob__${projectId}__${uniqueValue("hex")}`};epubMapIdMaker=projectId=>{const{uniqueValue}=AbstractNode;return`epubMap__${projectId}__${uniqueValue("hex")}`};idToHeadContents=xhtmlId=>{const fileName=this.valueParser("decode",xhtmlId).name;if("author.xhtml"===fileName)return['<?xml version="1.0" encoding="utf-8"?>',"<!DOCTYPE html>",'<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" lang="ko" xml:lang="ko">',"  <head>","    <title>Author</title>",'    <link href="../Styles/general.css" type="text/css" rel="stylesheet"/>',"  </head>"].join("\n");if("context.xhtml"===fileName)return['<?xml version="1.0" encoding="utf-8"?>',"<!DOCTYPE html>",'<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" lang="ko" xml:lang="ko">',"  <head>","    <title>Context</title>",'    <link href="../Styles/general.css" type="text/css" rel="stylesheet"/>','    <link href="../Styles/sgc-nav.css" type="text/css" rel="stylesheet"/>',"  </head>"].join("\n");if("info.xhtml"===fileName)return['<?xml version="1.0" encoding="utf-8"?>',"<!DOCTYPE html>",'<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" lang="ko" xml:lang="ko">',"  <head>","    <title>Info</title>","  </head>"].join("\n");if("nav.xhtml"===fileName)return['<?xml version="1.0" encoding="utf-8"?>',"<!DOCTYPE html>",'<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" lang="ko" xml:lang="ko">',"  <head>","    <title>목차</title>",'    <meta charset="utf-8"/>','    <link href="../Styles/sgc-nav.css" rel="stylesheet" type="text/css"/>',"  </head>"].join("\n");if(/^chapter/gi.test(fileName)){let thisNumber;return thisNumber=1,fileName.replace(/chapter([0-9]+)\./gi,(match,p1)=>(thisNumber=Number(p1),match)),['<?xml version="1.0" encoding="utf-8"?>',"<!DOCTYPE html>",'<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" lang="ko" xml:lang="ko">',"  <head>",`    <title>Chapter ${String(thisNumber)}</title>`,'    <link href="../../Styles/general.css" type="text/css" rel="stylesheet" />',`    <link href="../../Styles/local${String(thisNumber)}.css" type="text/css" rel="stylesheet" />`,"  </head>"].join("\n")}return""};epubModelDummy=(id,title)=>({_id:this.epubMapIdMaker(id),projectId:id,key:id,date:new Date,input:[],title,tree:{font:[],image:[],style:{general:"",local:[],nav:""},text:{content:"",author:"",spacer:{front:"",back:""},cover:{front:"",back:""},context:"",info:"",chapter:[],navigator:{epub3:"",epub2:""},etc:{container:"",phcode:""}}}});valueParser=(mode,id,fileName)=>{const{totalContents,ea,loadingRun,media}=this;media[4];try{if("encode"===mode){if("string"==typeof id&&"string"==typeof fileName)return`id(${id})__split__name(${fileName})`;throw new Error("invalid input")}{let idString,nameString,splitArr;if("string"==typeof id){if(/id[\s]*\(/gi.test(id)){if(splitArr=id.split("__split__"),2!==splitArr.length)throw new Error("invalid input");return idString="",nameString="",splitArr[0].replace(/id\(([^\)]+)\)/gi,(match,p1)=>(idString=p1,"")),splitArr[1].replace(/name\(([^\)]+)\)/gi,(match,p1)=>(nameString=p1,"")),{id:idString,name:nameString}}return{id,name:""}}throw new Error("invalid input")}}catch(e){throw console.log(id,e),e}};itemMediaType=fileName=>{const epubMediaTypes=[{mediaTypeName:"application/xhtml+xml",fileExe:["xhtml","html"]},{mediaTypeName:"application/x-dtbncx+xml",fileExe:["ncx"]},{mediaTypeName:"text/css",fileExe:["css"]},{mediaTypeName:"image/gif",fileExe:["gif"]},{mediaTypeName:"image/jpeg",fileExe:["jpg","jpeg"]},{mediaTypeName:"image/png",fileExe:["png"]},{mediaTypeName:"image/svg+xml",fileExe:["svg"]},{mediaTypeName:"font/woff",fileExe:["woff"]},{mediaTypeName:"font/woff2",fileExe:["woff2"]},{mediaTypeName:"font/ttf",fileExe:["ttf"]},{mediaTypeName:"font/otf",fileExe:["otf"]},{mediaTypeName:"audio/mpeg",fileExe:["mp3"]},{mediaTypeName:"audio/mp4",fileExe:["m4a"]},{mediaTypeName:"application/javascript",fileExe:["js"]},{mediaTypeName:"video/mp4",fileExe:["mp4"]},{mediaTypeName:"application/pdf",fileExe:["pdf"]},{mediaTypeName:"application/xml",fileExe:["xml"]},{mediaTypeName:"text/plain",fileExe:["txt"]}];try{let finalSelect;finalSelect="text/plain";for(let{mediaTypeName,fileExe}of epubMediaTypes)for(let s of fileExe)if(new RegExp("."+s+"$","gi").test(fileName.trim())){finalSelect=mediaTypeName;break}return finalSelect}catch(e){throw console.log(e),new Error(e.message)}};rewriteOptions=async()=>{const instance=this,back=this.back,{uniqueValue,sleep,dateToString,findByAttribute,selectByClass}=AbstractNode;try{const blankTap=new Array(2).fill(" ",0).join(""),idException=[{fileName:"nav.xhtml",id:"nav"},{fileName:"cover.jpg",id:"cover-image"}],defaultContextWords="목차 내용";let fileTree,manifestTarget,mainfestRenderedTargets,hrefString,manifestTagString,spineString,contextGroup,replaceDo,finalContentsOpfString,originalNavString,originalNavStringArr,olIndex,olEndIndex,middleArray0,middleArray1,middleArray2,thisExist,navString,originalTocString,originalTocStringArr,ulIndex,ulEndIndex,middleArray3,middleArray4,middleArray5,tocString,metaDataStringCopied,authorName,blobRows,stringRows,targetBlob,targetString,contentOpfTarget,contentOpfContents,execResult,metadataArr,thisIndent,metaDataString,navTarget,navContents,tocTarget,tocContents,contextArr,thisContextTarget,thisBookId,currentUsedImageSource;fileTree=instance.extractAllId(!0).map(s=>instance.valueParser("decode",s)),manifestTarget=fileTree.filter(o=>"content.opf"!==o.name&&".phcode.json"!==o.name&&"mimetype"!==o.name&&"container.xml"!==o.name),contentOpfTarget=fileTree.find(o=>"content.opf"===o.name),navTarget=fileTree.find(o=>"nav.xhtml"===o.name),tocTarget=fileTree.find(o=>"toc.ncx"===o.name),currentUsedImageSource=[];for(let o of manifestTarget)try{if(/^epubString/gi.test(o.id)){const stringRows=await back.frontRead(instance.collectionString,{_id:o.id});if(0===stringRows.length)throw new Error(o.id);const[targetString]=stringRows;targetString.data.replace(new RegExp("\\/Images\\/[^\\/\\n\\t'\"<>]*?\\.("+instance.imageExe.concat(instance.imageExe.map(s=>s.toUpperCase())).join("|")+")","gi"),match=>(currentUsedImageSource.push(match),match))}}catch(e){const problemsId=String(e.message).trim();instance.currentMap&&(instance.currentMap.tree.font.some(s=>new RegExp(problemsId,"g").test(s))&&(instance.currentMap.tree.font=instance.currentMap.tree.font.filter(s=>!new RegExp(problemsId,"g").test(s)),await back.frontDelete(instance.collectionBlob,{_id:problemsId})),instance.currentMap.tree.image.some(s=>new RegExp(problemsId,"g").test(s))&&(instance.currentMap.tree.image=instance.currentMap.tree.image.filter(s=>!new RegExp(problemsId,"g").test(s)),await back.frontDelete(instance.collectionBlob,{_id:problemsId})))}if(currentUsedImageSource=[...new Set(currentUsedImageSource)].map(s=>s.trim()).filter(s=>""!==s),currentUsedImageSource.length>0)for(let o of manifestTarget)try{if(!/^epubString/gi.test(o.id)){const blobRows=await back.frontRead(instance.collectionBlob,{_id:o.id});if(0===blobRows.length)throw new Error(o.id);const[targetBlob]=blobRows,thisFileName=targetBlob.absolute.split("/").at(-1),thisExe=thisFileName.split(".").at(-1).trim().toLowerCase();if(instance.imageExe.includes(thisExe)){const findTarget="/Images/"+thisFileName.trim();if(!currentUsedImageSource.includes(findTarget)){const id=o.id,thisMap=instance.currentMap;await back.frontDelete(instance.collectionBlob,{_id:id}),thisMap.tree.image=thisMap.tree.image.filter(s=>!new RegExp(id,"g").test(s)),await back.frontUpdate(instance.collectionMap,[{_id:thisMap._id},thisMap]),instance.currentMap=thisMap}}}}catch(e){const problemsId=String(e.message).trim();instance.currentMap&&(instance.currentMap.tree.font.some(s=>new RegExp(problemsId,"g").test(s))&&(instance.currentMap.tree.font=instance.currentMap.tree.font.filter(s=>!new RegExp(problemsId,"g").test(s)),await back.frontDelete(instance.collectionBlob,{_id:problemsId})),instance.currentMap.tree.image.some(s=>new RegExp(problemsId,"g").test(s))&&(instance.currentMap.tree.image=instance.currentMap.tree.image.filter(s=>!new RegExp(problemsId,"g").test(s)),await back.frontDelete(instance.collectionBlob,{_id:problemsId})))}fileTree=instance.extractAllId(!0).map(s=>instance.valueParser("decode",s)),manifestTarget=fileTree.filter(o=>"content.opf"!==o.name&&".phcode.json"!==o.name&&"mimetype"!==o.name&&"container.xml"!==o.name),contentOpfTarget=fileTree.find(o=>"content.opf"===o.name),navTarget=fileTree.find(o=>"nav.xhtml"===o.name),tocTarget=fileTree.find(o=>"toc.ncx"===o.name),mainfestRenderedTargets=[];for(let o of manifestTarget)try{if(hrefString="",/^epubString/gi.test(o.id)){if(stringRows=await back.frontRead(instance.collectionString,{_id:o.id}),0===stringRows.length)throw new Error(o.id);[targetString]=stringRows,hrefString=targetString.absolute,/^OEBPS/.test(hrefString)||(hrefString="OEBPS/"+hrefString.replace(/^\/+/gi,""),targetString.absolute=hrefString,await back.frontUpdate(instance.collectionString,[{_id:o.id},targetString]))}else{if(blobRows=await back.frontRead(instance.collectionBlob,{_id:o.id}),0===blobRows.length)throw new Error(o.id);[targetBlob]=blobRows,hrefString=targetBlob.absolute,/^OEBPS/.test(hrefString)||(hrefString="OEBPS/"+hrefString.replace(/^\/+/gi,""),targetBlob.absolute=hrefString,await back.frontUpdate(instance.collectionBlob,[{_id:o.id},targetBlob]))}hrefString=hrefString.split("/").slice(hrefString.split("/").findLastIndex(s=>"OEBPS"===s)+1).join("/"),idException.map(o2=>o2.fileName).includes(o.name)?mainfestRenderedTargets.push({id:idException.find(o2=>o2.fileName===o.name).id,href:hrefString,mediaType:instance.itemMediaType(o.name)}):mainfestRenderedTargets.push({id:hrefString.split("/").slice(1).join("_"),href:hrefString,mediaType:instance.itemMediaType(o.name)})}catch(e){const problemsId=String(e.message).trim();instance.currentMap&&(instance.currentMap.tree.font.some(s=>new RegExp(problemsId,"g").test(s))&&(instance.currentMap.tree.font=instance.currentMap.tree.font.filter(s=>!new RegExp(problemsId,"g").test(s)),await back.frontDelete(instance.collectionBlob,{_id:problemsId})),instance.currentMap.tree.image.some(s=>new RegExp(problemsId,"g").test(s))&&(instance.currentMap.tree.image=instance.currentMap.tree.image.filter(s=>!new RegExp(problemsId,"g").test(s)),await back.frontDelete(instance.collectionBlob,{_id:problemsId})),instance.currentMap.tree.text.chapter.some(s=>new RegExp(problemsId,"g").test(s))&&(instance.currentMap.tree.text.chapter=instance.currentMap.tree.text.chapter.filter(s=>!new RegExp(problemsId,"g").test(s)),await back.frontDelete(instance.collectionString,{_id:problemsId})),await back.frontUpdate(instance.collectionMap,[{_id:instance.currentMap._id},instance.currentMap]))}manifestTagString="<manifest>\n";for(let m of mainfestRenderedTargets)/\./gi.test(m.id)?manifestTagString+=`${blankTap}<item id="${String(m.id.replace(/\./gi,"_"))}" href="${m.href}" media-type="${m.mediaType}" />\n`:manifestTagString+=`${blankTap}<item id="${m.id}" href="${m.href}" media-type="${m.mediaType}" properties="${m.id}" />\n`;if(manifestTagString+="</manifest>",spineString='<spine toc="toc_ncx">\n',spineString+=`${blankTap}<itemref idref="cover_xhtml"/>\n`,spineString+=`${blankTap}<itemref idref="info_xhtml"/>\n`,spineString+=`${blankTap}<itemref idref="author_xhtml"/>\n`,spineString+=`${blankTap}<itemref idref="context_xhtml"/>\n`,spineString+=`${blankTap}<itemref idref="spacer_xhtml"/>\n`,contextGroup=[],spineString+=String(manifestTagString.split("\n").map(s=>s.trim()).filter(s=>/chapter[0-9]+\.xhtml/gi.test(s)).map(s=>{let a,b;return a="",b="",replaceDo=!1,s.replace(/id="([^"]+)"\s*href="([^"]+)"/gi,(match,p1,p2)=>(a=p1,b=p2,replaceDo=""!==match&&""!==p1&&""!==p2,"")),""!==a&&""!==b&&replaceDo||s.replace(/href="([^"]+)"\s*id="([^"]+)"/gi,(match,p1,p2)=>(b=p1,a=p2,replaceDo=""!==match&&""!==p1&&""!==p2,"")),contextGroup.push({id:a,href:b.replace(/^Text/gi,".")}),`<itemref idref="${a}"/>`}).map(s=>blankTap+s).join("\n"))+"\n",spineString+=`${blankTap}<itemref idref="backSpacer_xhtml"/>\n`,spineString+=`${blankTap}<itemref idref="back_xhtml"/>\n`,spineString+=`${blankTap}<itemref idref="nav" linear="no"/>\n`,spineString+="</spine>",contentOpfContents=(await back.frontRead(instance.collectionString,{_id:contentOpfTarget.id}))[0],execResult=/<metadata(\s|[^>])*>.*?<\/metadata>/gis.exec(contentOpfContents.data.split("\n").join("____split____")),null===execResult)throw new Error("invalid metadata");metadataArr=execResult[0].split("____split____"),thisIndent="",String(metadataArr.at(-1)).replace(/^(\s+)</g,(match,p1)=>(thisIndent=p1,match)),metadataArr[0]=thisIndent+metadataArr[0],metadataArr=metadataArr.map(s=>s.trim()).filter(s=>""!==s).filter(s=>!/property=['"]dcterms\:modified['"]/gi.test(s)).filter(s=>!/property=['"]rendition\:layout['"]/gi.test(s)).filter(s=>!/property=['"]page\-progression\-direction['"]/gi.test(s)).slice(0,-1),metadataArr=metadataArr.map(s=>thisIndent.repeat(2)+s),metadataArr[0]=thisIndent+metadataArr[0].trim(),metadataArr.push(`${thisIndent.repeat(2)}<meta property="dcterms:modified">${JSON.stringify(new Date).slice(1,-1).replace(/\.[0-9][0-9][0-9]Z/gi,"Z")}</meta>`),metadataArr.push(`${thisIndent.repeat(2)}<meta property="rendition:layout">reflowable</meta>`),metadataArr.push(`${thisIndent}</metadata>`),metaDataString=metadataArr.join("\n").replace(/BookId/,"bookId"),metaDataStringCopied=String(metaDataString),authorName="저자",metaDataStringCopied.replace(/<dc:creator>([^<]+)<\/dc:creator>/gis,(match,p1)=>(authorName=String(p1).trim(),match)),thisBookId="",metaDataStringCopied.replace(/<dc:identifier(\s|[^>])*>([^<]+)<\/dc:identifier>/gis,(match,p1,p2)=>(thisBookId=String(p2).trim(),match)),metaDataString=metaDataString.split("\n").map(s=>s.trim()).filter(s=>""!==s).map((s,i,arr)=>0===i||arr.length-1===i?s:blankTap+s).join("\n"),finalContentsOpfString='<?xml version="1.0" encoding="utf-8"?>\n',finalContentsOpfString+='<package version="3.0" unique-identifier="bookId" xmlns="http://www.idpf.org/2007/opf">\n',finalContentsOpfString+="\n",finalContentsOpfString+=String(metaDataString+"\n\n"+manifestTagString+"\n\n"+spineString).split("\n").map(s=>blankTap+s).join("\n"),finalContentsOpfString+="\n\n",finalContentsOpfString+="</package>",contentOpfContents=(await back.frontRead(instance.collectionString,{_id:contentOpfTarget.id}))[0],contentOpfContents.data=finalContentsOpfString,await back.frontUpdate(instance.collectionString,[{_id:contentOpfTarget.id},contentOpfContents]),navContents=(await back.frontRead(instance.collectionString,{_id:navTarget.id}))[0],originalNavString=navContents.data,originalNavStringArr=originalNavString.split("\n"),olIndex=originalNavStringArr.findIndex(s=>/<ol>/gi.test(s)),olEndIndex=originalNavStringArr.findIndex(s=>/<\/ol>/gi.test(s)),middleArray0=originalNavStringArr.slice(0,olIndex+1),middleArray1=originalNavStringArr.slice(olIndex+1,olEndIndex),middleArray2=originalNavStringArr.slice(olEndIndex),contextArr=[];for(let c of contextGroup)thisExist=!1,thisExist=middleArray1.some(s=>new RegExp(c.href.replace(/^\s*\.\//,""),"gi").test(s)),thisExist?(thisContextTarget="",middleArray1.find(s=>new RegExp(c.href.replace(/^\s*\.\//,""),"gi").test(s))?.replace(/>(\s*[^<]*\s*)<\s*\/\s*a/gi,(match,p1)=>(thisContextTarget=p1,match)),contextArr.push(thisContextTarget.trim())):(middleArray1.push(`${blankTap}${blankTap}${blankTap}<li><a href="${c.href}">${defaultContextWords}</a></li>`),contextArr.push(defaultContextWords));middleArray1=middleArray1.filter(s=>{let hrefString;return hrefString="",s.replace(/href\s*=\s*['"]([^'"]+)['"]/gi,(m,p1)=>(hrefString=p1,m)),contextGroup.map(c=>c.href.replace(/^\s*\.\//,"")).includes(hrefString)}),middleArray1.sort((a,b)=>{let aTarget,bTarget;return aTarget=0,bTarget=0,a.replace(/chapter([0-9]+)\.xhtml/gi,(match,p1)=>(aTarget=Number(p1.replace(/[^0-9]/gi,"")),"")),b.replace(/chapter([0-9]+)\.xhtml/gi,(match,p1)=>(bTarget=Number(p1.replace(/[^0-9]/gi,"")),"")),aTarget-bTarget}),middleArray1.every(s=>!/<li>/gi.test(s))&&(middleArray1=middleArray1.filter(a=>""!==a),middleArray1=middleArray1.map(s=>s.replace(/^([ ]*)(<\s*a.*?<\s*\/\s*a\s*>)/gi,(match,p1,p2)=>p1+"<li>"+p2+"</li>"))),navString=middleArray0.concat(middleArray1).concat(middleArray2).join("\n"),navString=navString.replace(/href="\.\//gi,'href="').replace(/hidden=""/gi,'hidden="hidden"').replace(/hidden\s*>/gi,'hidden="hidden">'),navContents=(await back.frontRead(instance.collectionString,{_id:navTarget.id}))[0],navContents.data=navString,await back.frontUpdate(instance.collectionString,[{_id:navTarget.id},navContents]),tocContents=(await back.frontRead(instance.collectionString,{_id:tocTarget.id}))[0],originalTocString=tocContents.data,originalTocStringArr=originalTocString.split("\n"),ulIndex=originalTocStringArr.findIndex(s=>/<navMap>/gi.test(s)),ulEndIndex=originalTocStringArr.findIndex(s=>/<\/navMap>/gi.test(s)),middleArray3=originalTocStringArr.slice(0,ulIndex+1),middleArray4=originalTocStringArr.slice(ulIndex+1,ulEndIndex),middleArray5=originalTocStringArr.slice(ulEndIndex);for(let c of contextGroup)thisExist=!1,thisExist=middleArray4.some(s=>new RegExp(c.href.replace(/^\s*\.\//,""),"gi").test(s)),thisExist||middleArray4.push(`${blankTap}${blankTap}<navPoint id="navPoint-${c.id.replace(/[^0-9]/gi,"")}" playOrder="${c.id.replace(/[^0-9]/gi,"")}"><navLabel><text>목차 내용</text></navLabel><content src="${c.href}"/></navPoint>`);if(middleArray4=middleArray4.filter(s=>{let hrefString;return hrefString="",s.replace(/src\s*=\s*['"]([^'"]+)['"]/gi,(m,p1)=>(hrefString=p1,m)),contextGroup.map(c=>c.href.replace(/^\s*\.\//,"")).includes(hrefString)}),middleArray4.sort((a,b)=>{let aTarget,bTarget;return aTarget=0,bTarget=0,a.replace(/chapter([0-9]+)\.xhtml/gi,(match,p1)=>(aTarget=Number(p1.replace(/[^0-9]/gi,"")),"")),b.replace(/chapter([0-9]+)\.xhtml/gi,(match,p1)=>(bTarget=Number(p1.replace(/[^0-9]/gi,"")),"")),aTarget-bTarget}),middleArray4=middleArray4.map(s=>s.trim()).filter(s=>""!==s).map(s=>blankTap.repeat(2)+s),contextArr.length===middleArray4.length)for(let i=0;i<contextArr.length;i++)middleArray4[i]=middleArray4[i].replace(/(<text>)(\s*[^<]*\s*)(<\/text>)/gi,(match,p1,p2,p3)=>p1+contextArr[i]+p3);return tocString=middleArray3.concat(middleArray4).concat(middleArray5).join("\n").replace(/__\{bookId\}__/gi,match=>{let bookId;return bookId="",metaDataString.replace(/<dc\:identifier[^>]+>([^<]+)</gi,(match,p1)=>(bookId=p1,match)),bookId}),tocString=tocString.replace(/src="\.\//gi,'src="'),""!==thisBookId&&(tocString=tocString.replace(/<\s*meta\s*name=['"]dtb\:uid['"]\s*content=['"][^'"]+['"]\s*\/\s*>/gis,match=>`<meta name="dtb:uid" content="${thisBookId}"/>`)),tocContents=(await back.frontRead(instance.collectionString,{_id:tocTarget.id}))[0],tocContents.data=tocString,await back.frontUpdate(instance.collectionString,[{_id:tocTarget.id},tocContents]),!0}catch(e){throw console.log(e),new Error(e.message)}};createNewProject=async inputDataArr=>{const instance=this,{totalContents,ea,loadingRun,media}=this,back=(media[4],instance.back),collectionMap=instance.collectionMap,collectionString=instance.collectionString,collectionBlob=instance.collectionBlob,{returnGet,parsingPath,promptPopup,sleep,createNode,withOut,setQueue,scrollSetting,ajaxPromise,ajaxJson,querySetting,mediaNumber,mediaString,backgroundSse,selfHref}=AbstractNode;try{const{id,url}=await ajaxJson({data:inputDataArr},"/createEpubProject"),response=await ajaxPromise({},url,{method:"get"}),unzipFileList=await Zip.unzipFile(response),titleObject=void 0!==inputDataArr.find(o=>"title"===o.property)?inputDataArr.find(o=>"title"===o.property):{domList:[],property:"",valueType:"string",required:!1,finalValue:"북 샘플"},model=instance.epubModelDummy(id,titleObject.finalValue);await sleep(1500);for(let i=0;i<unzipFileList.length;i++){const fileUrl=unzipFileList[i].path,response=unzipFileList[i].data,fileName=String(fileUrl.split("/").at(-1));let thisRole;if(thisRole="",thisRole=/phcode/gi.test(fileName)?"phcode":/mimetype/gi.test(fileName)?"mimetype":/container\.xml/gi.test(fileName)?"container":/\.xml/gi.test(fileName)?"xml":/content\.opf/gi.test(fileName)?"content":/general\.css/gi.test(fileName)?"generalCss":/nav\.css/gi.test(fileName)?"navCss":/\.css/gi.test(fileName)?"localCss":/author\.xhtml/gi.test(fileName)?"author":/backSpacer\.xhtml/gi.test(fileName)?"backSpacer":/context\.xhtml/gi.test(fileName)?"context":/cover\.xhtml/gi.test(fileName)?"cover":/info\.xhtml/gi.test(fileName)?"info":/nav\.xhtml/gi.test(fileName)?"nav":/toc\.ncx/gi.test(fileName)?"toc":/back\.xhtml/gi.test(fileName)?"back":/spacer\.xhtml/gi.test(fileName)?"spacer":/chapter[0-9]+\.xhtml/gi.test(fileName)||/chapter\.xhtml/gi.test(fileName)||/\.xhtml/gi.test(fileName)||/\.html/gi.test(fileName)?"chapter":/\.ttf/gi.test(fileName)||/\.otf/gi.test(fileName)?"font":"blob","string"==typeof response){const stringModel={_id:instance.epubStringIdMaker(id),date:new Date,projectId:id,fileName,key:thisRole,absolute:fileUrl,data:response},{_id}=await back.frontCreate(collectionString,stringModel);"phcode"===thisRole?model.tree.text.etc.phcode=instance.valueParser("encode",_id,fileName):"container"===thisRole?model.tree.text.etc.container=instance.valueParser("encode",_id,fileName):"content"===thisRole?model.tree.text.content=instance.valueParser("encode",_id,fileName):"generalCss"===thisRole?model.tree.style.general=instance.valueParser("encode",_id,fileName):"navCss"===thisRole?model.tree.style.nav=instance.valueParser("encode",_id,fileName):"localCss"===thisRole?model.tree.style.local.push(instance.valueParser("encode",_id,fileName)):"author"===thisRole?model.tree.text.author=instance.valueParser("encode",_id,fileName):"backSpacer"===thisRole?model.tree.text.spacer.back=instance.valueParser("encode",_id,fileName):"context"===thisRole?model.tree.text.context=instance.valueParser("encode",_id,fileName):"cover"===thisRole?model.tree.text.cover.front=instance.valueParser("encode",_id,fileName):"info"===thisRole?model.tree.text.info=instance.valueParser("encode",_id,fileName):"nav"===thisRole?model.tree.text.navigator.epub3=instance.valueParser("encode",_id,fileName):"toc"===thisRole?model.tree.text.navigator.epub2=instance.valueParser("encode",_id,fileName):"back"===thisRole?model.tree.text.cover.back=instance.valueParser("encode",_id,fileName):"spacer"===thisRole?model.tree.text.spacer.front=instance.valueParser("encode",_id,fileName):"chapter"===thisRole&&model.tree.text.chapter.push(instance.valueParser("encode",_id,fileName))}else{const blobModel={_id:instance.epubBlobIdMaker(id),date:new Date,projectId:id,key:thisRole,fileName,absolute:fileUrl,data:response},{_id}=await back.frontCreate(collectionBlob,blobModel);"font"===thisRole?model.tree.font.push(instance.valueParser("encode",_id,fileName)):"mimetype"!==thisRole&&model.tree.image.push(instance.valueParser("encode",_id,fileName))}}const{_id}=await back.frontCreate(collectionMap,model);return await ajaxJson({targetId:url},"/tempProjectDelete"),{id:_id,projectId:id}}catch(e){return console.log(e),{error:e.message}}};loadProject=async unzipArr=>{const instance=this,{totalContents,ea,loadingRun,media}=this,back=(media[4],instance.back),collectionMap=instance.collectionMap,collectionString=instance.collectionString,collectionBlob=instance.collectionBlob,{returnGet,parsingPath,objectToFlatArray,promptPopup,createNode,dateToString,withOut,setQueue,uniqueValue,scrollSetting,ajaxPromise,ajaxJson,querySetting,mediaNumber,mediaString,backgroundSse,selfHref}=AbstractNode;try{const id=instance.copyDefaultKey+uniqueValue("hex"),model=instance.epubModelDummy(id,"로드_"+unzipArr.getExeName());for(let{data:response,path:fileUrl}of unzipArr){const fileName=String(fileUrl.split("/").at(-1));let thisRole;if(thisRole="",thisRole=/phcode/gi.test(fileName)?"phcode":/mimetype/gi.test(fileName)?"mimetype":/container\.xml/gi.test(fileName)?"container":/\.xml/gi.test(fileName)?"xml":/content\.opf/gi.test(fileName)?"content":/general\.css/gi.test(fileName)?"generalCss":/nav\.css/gi.test(fileName)?"navCss":/\.css/gi.test(fileName)?"localCss":/author\.xhtml/gi.test(fileName)?"author":/backSpacer\.xhtml/gi.test(fileName)?"backSpacer":/context\.xhtml/gi.test(fileName)?"context":/cover\.xhtml/gi.test(fileName)?"cover":/info\.xhtml/gi.test(fileName)?"info":/nav\.xhtml/gi.test(fileName)?"nav":/toc\.ncx/gi.test(fileName)?"toc":/back\.xhtml/gi.test(fileName)?"back":/spacer\.xhtml/gi.test(fileName)?"spacer":/chapter[0-9]+\.xhtml/gi.test(fileName)||/chapter\.xhtml/gi.test(fileName)||/\.xhtml/gi.test(fileName)||/\.html/gi.test(fileName)?"chapter":/\.ttf/gi.test(fileName)||/\.otf/gi.test(fileName)?"font":"blob","string"==typeof response){const stringModel={_id:instance.epubStringIdMaker(id),date:new Date,projectId:id,fileName,key:thisRole,absolute:fileUrl,data:response},{_id}=await back.frontCreate(collectionString,stringModel);"phcode"===thisRole?model.tree.text.etc.phcode=instance.valueParser("encode",_id,fileName):"container"===thisRole?model.tree.text.etc.container=instance.valueParser("encode",_id,fileName):"content"===thisRole?model.tree.text.content=instance.valueParser("encode",_id,fileName):"generalCss"===thisRole?model.tree.style.general=instance.valueParser("encode",_id,fileName):"navCss"===thisRole?model.tree.style.nav=instance.valueParser("encode",_id,fileName):"localCss"===thisRole?model.tree.style.local.push(instance.valueParser("encode",_id,fileName)):"author"===thisRole?model.tree.text.author=instance.valueParser("encode",_id,fileName):"backSpacer"===thisRole?model.tree.text.spacer.back=instance.valueParser("encode",_id,fileName):"context"===thisRole?model.tree.text.context=instance.valueParser("encode",_id,fileName):"cover"===thisRole?model.tree.text.cover.front=instance.valueParser("encode",_id,fileName):"info"===thisRole?model.tree.text.info=instance.valueParser("encode",_id,fileName):"nav"===thisRole?model.tree.text.navigator.epub3=instance.valueParser("encode",_id,fileName):"toc"===thisRole?model.tree.text.navigator.epub2=instance.valueParser("encode",_id,fileName):"back"===thisRole?model.tree.text.cover.back=instance.valueParser("encode",_id,fileName):"spacer"===thisRole?model.tree.text.spacer.front=instance.valueParser("encode",_id,fileName):"chapter"===thisRole&&model.tree.text.chapter.push(instance.valueParser("encode",_id,fileName))}else{const blobModel={_id:instance.epubBlobIdMaker(id),date:new Date,projectId:id,key:thisRole,fileName,absolute:fileUrl,data:response},{_id}=await back.frontCreate(collectionBlob,blobModel);"font"===thisRole?model.tree.font.push(instance.valueParser("encode",_id,fileName)):"mimetype"!==thisRole&&model.tree.image.push(instance.valueParser("encode",_id,fileName))}}const phcodeStringModel={_id:instance.epubStringIdMaker(id),date:new Date,projectId:id,fileName:".phcode.json",key:"phcode",absolute:".phcode.json",data:'{\n    "livePreviewUseDevServer": false,\n    "livePreviewServerProjectPath": "/",\n    "livePreviewHotReloadSupported": false,\n    "livePreviewFramework": "Custom"\n}'},phcodeStringIdObject=await back.frontCreate(collectionString,phcodeStringModel);model.tree.text.etc.phcode=instance.valueParser("encode",phcodeStringIdObject._id,".phcode.json");const{_id}=await back.frontCreate(collectionMap,model);return objectToFlatArray(model).some(s=>""===s)&&instance.blackAlert("해당 파일은 불러올 수 없는 파일입니다!").catch(e=>console.log(e)),{id:_id,projectId:id}}catch(e){return console.log(e),{error:e.message}}};extractAllId=(fullMode=!1)=>{const instance=this,{totalContents,ea,loadingRun,media}=(this.back,this);media[4];try{const tree=instance.currentMap.tree,objectToStringArr=(t,fullMode=!1)=>{let idArr;idArr=[];for(let key in t)if("string"==typeof t[key])fullMode?idArr.push(t[key]):idArr.push(instance.valueParser("decode",t[key]).id);else if(Array.isArray(t[key]))for(let s of t[key])fullMode?idArr.push(s):idArr.push(instance.valueParser("decode",s).id);else"object"==typeof t[key]&&null!==t[key]?idArr=idArr.concat(objectToStringArr(t[key],fullMode)):console.log(key);return idArr};return objectToStringArr(tree,fullMode)}catch(e){throw e}};epubCheck=async()=>{const instance=this,back=this.back,{totalContents,ea,media,loadingRun}=this,{ajaxPromise,downloadBlob,fileToMimetype,ajaxJson,ajaxFormStream,hangulToEnglish,uniqueValue,dateToString,downloadFile,zeroAddition}=AbstractNode;media[4];try{const loading=instance.grayLoading(),thisFileName=instance.currentMap.title.replace(/[\s<>\[\]\{\}\(\)]/gi,"_").replace(/[\#\@\%\^\&\!\?\/]/gi,"")+"_date"+dateToString(new Date).replace(/[^0-9]/gi,"").slice(2)+"_time"+zeroAddition((new Date).getHours())+zeroAddition((new Date).getMinutes()),idArr=instance.extractAllId();let dataArr,index,inputArr,form,zipBlob,tempFolder,streamChunk;dataArr=[];for(let thisId of idArr)if(/epubString/gi.test(thisId)){const rawString=await back.frontRead(instance.collectionString,{_id:thisId});rawString.length>0&&dataArr.push(rawString[0])}else{const rawBlob=await back.frontRead(instance.collectionBlob,{_id:thisId});rawBlob.length>0&&dataArr.push(rawBlob[0])}inputArr=[],index=0;for(let o of dataArr)inputArr.push({path:o.absolute.replace(/^\/+/i,""),data:o.data}),index++;zipBlob=await Zip.zipFile(inputArr,!0),tempFolder="epubcheck"+uniqueValue("hex"),form=new FormData,form.append("file"+String(0),zipBlob),form.append("names",JSON.stringify(["/"+tempFolder+"/"+thisFileName+".epub"])),streamChunk="",await ajaxFormStream(form,"/generalFileUpload",null,chunk=>{streamChunk+=String(chunk)});try{const absolute=JSON.parse(streamChunk.trim()).files[0],checkResult=await ajaxJson({absolute},"/epubCheck");instance.downloadCompletePopup(checkResult).catch(e=>console.log(e))}catch(e){console.log(e)}loading.remove()}catch(e){console.log(e)}};downloadCompletePopup=async checkResult=>{this.back;const{colorChip,svgMaker:localSvgMaker,binaryPath}=Helper,{withOut,percent,promptPopup,setDomColor,markdownBlocks,linkToString,stringToLink,hangulToEnglish,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();try{const maxPixelWidth=8e3,completeWhitePopupClassName="completeWhitePopupClassName",zIndex=899;let whiteTongBase,whiteWidth,whiteTong,paddingTop,paddingLeft,paddingBottom,cancelEvent,inputSize,size0,size1,marginLeft,lineHeight,inputBoxHeight,grayBoxBetween,questionWordVisualTopPlus,questionMinusLeft,gap,maxHeightLength,borderRadius,nameBoxWidth,weightBoxWidth,nameBoxSize,plusWidth,plusMarginLeft,plusTop,columnsLength,imageBetween,imageBorderRadius,selectionCheckIconWidth,selectionCheckIconTop,selectionCheckIconLeft,buttonWidth,buttonHeight,buttonSize,coverZoneWidth,maxHeightVh,buttonBetween,grayBox,titleSize,titleAreaMarginBetween,errorHeightUnit,errorSize,errorBetween,errorFileNameWidth,errorLineWidth,completeTitleBlacketMarginRight,completeTitleBlacketTop,noErrorIndent;whiteWidth=mediaNumber(1400,1150,900,800,94),coverZoneWidth=mediaNumber(5,5,4,4,1),paddingTop=mediaNumber(20,19,18,17,3.5),paddingLeft=mediaNumber(23,22,21,20,3.9),paddingBottom=mediaNumber(23,22,21,20,4.1),inputSize=mediaNumber(15,15,14.5,14.5,3),size0=mediaNumber(15,15,14.5,14,3.1),size1=mediaNumber(16,16,15.5,15,3.4),marginLeft=mediaNumber(15,15,15,15,4.8),lineHeight=1.5,inputBoxHeight=mediaNumber(32,31,30,29,6.5),grayBoxBetween=mediaNumber(6,5,5,5,1.2),questionWordVisualTopPlus=mediaNumber(0,0,0,0,0),questionMinusLeft=mediaNumber(-13.5,-13.5,-13,-12.5,-4.2),gap=mediaNumber(2,2,1.5,1,.5),maxHeightLength=mediaNumber(29,25,24,21,8),borderRadius=mediaNumber(5,5,4,4,1),nameBoxWidth=mediaNumber(120,120,120,120,30),nameBoxSize=mediaNumber(13,13,12,12,3),weightBoxWidth=mediaNumber(70,70,60,56,20),maxHeightVh=80,plusWidth=mediaNumber(14,13.5,13,12,14.5),plusMarginLeft=mediaNumber(4,4,4,4,4),plusTop=mediaNumber(-.2,-.2,-.1,-0,-.5),columnsLength=mediaNumber(4,4,3,3,2),imageBorderRadius=mediaNumber(6,6,5,4,1),imageBetween=mediaNumber(4,4,3,2,1),selectionCheckIconWidth=mediaNumber(16,16,15,14,1),selectionCheckIconTop=mediaNumber(14,14,13,12,1),selectionCheckIconLeft=mediaNumber(16,16,15,14,1),buttonWidth=mediaNumber(46,46,45,45,47),buttonHeight=mediaNumber(22,22,22,22,22),buttonSize=mediaNumber(12,12,12,12,47),buttonBetween=mediaNumber(2,2,2,1,0),titleSize=mediaNumber(20,20,19,18,20),titleAreaMarginBetween=mediaNumber(12,12,12,10,12),errorHeightUnit=mediaNumber(40,40,40,38,40),errorSize=mediaNumber(15,15,15,14,15),errorBetween=mediaNumber(3,3,3,3,3),errorFileNameWidth=mediaNumber(96,96,96,90,96),errorLineWidth=mediaNumber(144,144,140,136,144),completeTitleBlacketMarginRight=mediaNumber(6,6,6,6,6),completeTitleBlacketTop=mediaNumber(-2,-2,-2,-2,-2),noErrorIndent=mediaNumber(20,20,20,18,2),grayBoxBetween-=imageBetween,cancelEvent=()=>async e=>{e.preventDefault(),e.stopPropagation(),selectByClass(completeWhitePopupClassName)[0].children[0].style.animation="fadedown 0.3s ease forwards",await sleep(300);const targets=[...document.querySelectorAll("."+completeWhitePopupClassName)];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}},whiteTongBase=createAbstract({mother:document.body,class:[completeWhitePopupClassName],event:{keyup:e=>{e.stopPropagation()},keydown:e=>{e.stopPropagation()},click:cancelEvent(),dragenter$dragover$dragstart$dragleave$drop:e=>{e.stopPropagation(),e.preventDefault()}},style:{display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",top:String(0)+"vh",left:String(1)+"vw",width:String(98)+"vw",height:String(100)+"vh",background:"transparent",zIndex}}),whiteTong=createAbstract({mother:whiteTongBase,event:{click:e=>{e.stopPropagation()},dragenter$dragover$dragstart$dragleave$drop:e=>{e.stopPropagation(),e.preventDefault()}},style:{display:"block",position:"relative",width:String(whiteWidth-2*paddingLeft)+ea,paddingTop:String(paddingTop)+ea,paddingBottom:String(paddingBottom)+ea,paddingLeft:String(paddingLeft)+ea,paddingRight:String(paddingLeft)+ea,borderRadius:String(5)+"px",boxShadow:"0px 3px 15px -9px "+colorExtended.shadow,background:gradientCss(colorExtended.gray1,colorExtended.gray1,.85,.6),backdropFilter:"blur(4px)",animation:"fadeuporiginal 0.5s ease forwards"}}),grayBox=createAbstract({mother:whiteTong,style:{width:withOut(0),height:withOut(0),display:"flex",flexDirection:"column"},children:[{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:titleAreaMarginBetween,background:colorChip.transparent},child:{text:"<b%>%b>다운로드가 완료되었습니다!",style:{display:"inline-flex",flexDirection:"row",fontFamily:"pretendard",fontSize:titleSize,fontWeight:900,color:colorChip.darkDarkBlack,justifyContent:"start",alignItems:"start"},bold:{fontFamily:"pretendard",fontSize:titleSize,fontWeight:300,color:colorChip.mint,marginRight:completeTitleBlacketMarginRight,display:"inline-flex",position:"relative",top:completeTitleBlacketTop}}},{style:{display:"block",minHeight:errorHeightUnit,maxHeight:10*errorHeightUnit+9*errorBetween,overflow:"scroll"},children:"success"===checkResult.status?[{style:{height:errorHeightUnit,display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",background:colorChip.white,borderRadius:8},child:{text:"발견된 오류가 없습니다.",style:{fontFamily:"pretendard",fontSize:errorSize,fontWeight:400,color:colorChip.darkDarkBlack,paddingLeft:noErrorIndent}}}]:checkResult.errors.length>0?checkResult.errors.map(e=>({style:{height:errorHeightUnit,display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:errorBetween},children:[{style:{height:withOut(0),width:errorFileNameWidth,background:colorChip.white,borderRadius:8,display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginRight:errorBetween},child:{style:{display:"flex",width:withOut(0),overflow:"scroll",justifyContent:"center",alignItems:"center"},child:{style:{display:"block",width:pixelUnit(maxPixelWidth),textAlign:"center"},child:{text:e.fileName,style:{fontFamily:"pretendard",fontSize:errorSize,fontWeight:700,color:colorChip.darkDarkBlack}}}}},{style:{height:withOut(0),width:errorLineWidth,background:colorChip.white,borderRadius:8,display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginRight:errorBetween},child:{style:{display:"flex",width:withOut(0),overflow:"scroll",justifyContent:"center",alignItems:"center"},child:{style:{display:"block",width:pixelUnit(maxPixelWidth),textAlign:"center"},child:{text:e.line,style:{fontFamily:"pretendard",fontSize:errorSize,fontWeight:400,color:colorChip.mint}}}}},{style:{height:withOut(0),width:withOut(errorLineWidth+errorFileNameWidth+2*errorBetween),background:colorChip.white,borderRadius:8,display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},child:{style:{display:"flex",width:withOut(0),overflow:"scroll",justifyContent:"center",alignItems:"center"},child:{style:{display:"block",width:pixelUnit(maxPixelWidth),textAlign:"center"},child:{text:e.error.slice(0,80),style:{fontFamily:"pretendard",fontSize:errorSize,fontWeight:400,color:colorChip.darkDarkBlack}}}}}]})):[{style:{height:errorHeightUnit,display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",background:colorChip.white,borderRadius:8},child:{text:"알 수 없는 에러가 발생하였습니다!",style:{fontFamily:"pretendard",fontSize:errorSize,fontWeight:400,color:colorChip.darkDarkBlack,paddingLeft:noErrorIndent}}}]}]})}catch(e){console.log(e)}};allFileDownload=async(zipFileTogether=!1)=>{const instance=this,back=this.back,{totalContents,ea,media,loadingRun}=this,{ajaxPromise,downloadBlob,fileToMimetype,hangulToEnglish,uniqueValue,dateToString,downloadFile,zeroAddition}=AbstractNode;media[4];try{const loading=instance.grayLoading(),thisFileName=instance.currentMap.title.replace(/[\s<>\[\]\{\}\(\)]/gi,"_").replace(/[\#\@\%\^\&\!\?\/]/gi,"")+"_date"+dateToString(new Date).replace(/[^0-9]/gi,"").slice(2)+"_time"+zeroAddition((new Date).getHours())+zeroAddition((new Date).getMinutes()),idArr=instance.extractAllId();let dataArr,index,inputArr;dataArr=[];for(let thisId of idArr)if(/epubString/gi.test(thisId)){const rawString=await back.frontRead(instance.collectionString,{_id:thisId});rawString.length>0&&dataArr.push(rawString[0])}else{const rawBlob=await back.frontRead(instance.collectionBlob,{_id:thisId});rawBlob.length>0&&dataArr.push(rawBlob[0])}inputArr=[],index=0;for(let o of dataArr)inputArr.push({path:o.absolute.replace(/^\/+/i,""),data:o.data}),index++;downloadBlob(await Zip.zipFile(inputArr,!0),thisFileName+".epub",AbstractNode.mimeTypes.epub),zipFileTogether&&downloadBlob(await Zip.zipFile(inputArr,!1),thisFileName+".zip",AbstractNode.mimeTypes.zip),loading.remove()}catch(e){console.log(e)}};setCssSupportButtons=(whiteBase,zIndex=110)=>{const{colorChip,svgMaker:localSvgMaker,binaryPath}=Helper,{withOut,percent,promptPopup,markdownBlocks,equalJson,ajaxForm,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(),cssSupports=[{property:"display",description:"박스 유형",injection:"",example:"block",children:[{property:"block",description:"블록",injection:"",children:[],child:"display"},{property:"inline",description:"인라인",injection:"",children:[],child:"display"},{property:"inline-block",description:"인라인 블록",injection:"",children:[],child:"display"},{property:"flex",description:"플렉스",injection:"",children:[],child:"display"},{property:"inline-flex",description:"인라인 플렉스",injection:"",children:[],child:"display"}]},{property:"position",description:"위치 지정 방식",injection:"",example:"relative",children:[{property:"relative",description:"상대적 위치",injection:"",children:[],child:"position"},{property:"absolute",description:"절대적 위치",injection:"",children:[],child:"position"},{property:"fixed",description:"고정 위치",injection:"",children:[],child:"position"}]},{property:"font-family",description:"폰트 종류",injection:"",example:"pretendard",children:[]},{property:"font-size",description:"폰트 사이즈",injection:"",example:"1rem",children:[]},{property:"font-weight",description:"폰트 굵기",injection:"",example:"400",children:[]},{property:"color",description:"폰트 색상",injection:"",example:"black",children:[]},{property:"margin",description:"바깥 여백",injection:"",example:"1rem",children:[]},{property:"padding",description:"안쪽 여백",injection:"",example:"1rem",children:[]},{property:"border",description:"테두리",injection:"",example:"1px solid black",children:[]},{property:"opacity",description:"투명도",injection:"",example:"0.7",children:[]},{property:"background",description:"배경색",injection:"",example:"white",children:[]},{property:"box-shadow",description:"그림자 효과",injection:"",example:"0px 3px 15px -9px #606060",children:[]},{property:"width",description:"가로 너비",injection:"",example:"100rem",children:[]},{property:"height",description:"세로 높이",injection:"",example:"100rem",children:[]},{property:"max-width",description:"최대 너비",injection:"",example:"100rem",children:[]},{property:"min-width",description:"최소 너비",injection:"",example:"100rem",children:[]},{property:"max-height",description:"최대 높이",injection:"",example:"100rem",children:[]},{property:"min-height",description:"최소 높이",injection:"",example:"100rem",children:[]},{property:"border-radius",description:"둥근 모서리",injection:"",example:"1rem",children:[]},{property:"line-height",description:"행간",injection:"",example:"1.7",children:[]},{property:"word-spacing",description:"단어 간격",injection:"",example:"-0.05rem",children:[]},{property:"text-indent",description:"들여쓰기",injection:"",example:"2rem",children:[]},{property:"text-align",description:"문단 정렬",injection:"",example:"justify",children:[{property:"left",injection:"",description:"좌측 정렬",children:[],child:"text-align"},{property:"right",injection:"",description:"우측 정렬",children:[],child:"text-align"},{property:"center",injection:"",description:"중앙 정렬",children:[],child:"text-align"},{property:"justify",injection:"",description:"양끝 맞춤",children:[],child:"text-align"}]},{property:"vertical-align",description:"수직 정렬",injection:"",example:"middle",children:[{property:"bottom",injection:"",description:"하단 맞춤",children:[],child:"vertical-align"},{property:"middle",injection:"",description:"중앙 정렬",children:[],child:"vertical-align"},{property:"top",injection:"",description:"상단 맞춤",children:[],child:"vertical-align"}]},{property:"top",description:"시각적 y값",injection:"",example:"1rem",children:[]},{property:"left",description:"시각적 x값",injection:"",example:"1rem",children:[]},{property:"transform",description:"시각적 변동",injection:"",example:"translate(1rem, 1rem)",children:[{property:"translate()",injection:"",description:"x,y축 이동",children:[],child:"transform"},{property:"translateX()",injection:"",description:"x축 이동",children:[],child:"transform"},{property:"translateY()",injection:"",description:"y축 이동",children:[],child:"transform"},{property:"scale()",injection:"",description:"크기 변동",children:[],child:"transform"},{property:"scaleX()",injection:"",description:"가로 크기 변동",children:[],child:"transform"},{property:"scaleY()",injection:"",description:"세로 크기 변동",children:[],child:"transform"},{property:"rotate()",injection:"",description:"회전",children:[],child:"transform"},{property:"skew()",injection:"",description:"기울이기",children:[],child:"transform"}]},{property:"transform-origin",description:"변동 기준점",injection:"",example:"50% 50%",children:[{property:"50% 50%",injection:"",description:"중앙",children:[],child:"transform-origin"},{property:"0% 0%",injection:"",description:"왼쪽 상단",children:[],child:"transform-origin"},{property:"100% 0%",injection:"",description:"오른쪽 상단",children:[],child:"transform-origin"},{property:"0% 100%",injection:"",description:"왼쪽 아래",children:[],child:"transform-origin"},{property:"100% 100%",injection:"",description:"오른쪽 아래",children:[],child:"transform-origin"}]},{property:"transition",description:"변동 방식",injection:"",example:"all 0.3s ease",children:[]},{property:"flex-direction",description:"flex 정렬 방향",injection:"",example:"column",children:[{property:"column",injection:"",description:"세로 정렬",children:[],child:"flex-direction"},{property:"row",injection:"",description:"가로 정렬",children:[],child:"flex-direction"}]},{property:"justify-content",description:"주축 정렬 방식",injection:"",example:"center",children:[{property:"start",injection:"",description:"시작 기준 정렬",children:[],child:"justify-content"},{property:"center",injection:"",description:"중앙 정렬",children:[],child:"justify-content"},{property:"end",injection:"",description:"끝점 기준 정렬",children:[],child:"justify-content"}]},{property:"align-items",description:"교차축 정렬 방식",injection:"",example:"center",children:[{property:"start",injection:"",description:"시작 기준 정렬",children:[],child:"align-items"},{property:"center",injection:"",description:"중앙 정렬",children:[],child:"align-items"},{property:"end",injection:"",description:"끝점 기준 정렬",children:[],child:"align-items"}]},{property:"flex-grow",description:"가용 공간 차지 비율",injection:"",example:"1",children:[]},{property:"flex-shrink",description:"양보 공간 비율",injection:"",example:"1",children:[]},{property:"padding-top",description:"안쪽 여백 위",injection:"",example:"1rem",children:[]},{property:"padding-left",description:"안쪽 여백 왼쪽",injection:"",example:"1rem",children:[]},{property:"padding-right",description:"안쪽 여백 오른쪽",injection:"",example:"1rem",children:[]},{property:"padding-bottom",description:"안쪽 여백 아래",injection:"",example:"1rem",children:[]},{property:"margin-top",description:"바깥 여백 위",injection:"",example:"1rem",children:[]},{property:"margin-left",description:"바깥 여백 왼쪽",injection:"",example:"1rem",children:[]},{property:"margin-right",description:"바깥 여백 오른쪽",injection:"",example:"1rem",children:[]},{property:"margin-bottom",description:"바깥 여백 아래",injection:"",example:"1rem",children:[]},{property:"border-top",description:"위쪽 테두리",injection:"",example:"1rem",children:[]},{property:"border-left",description:"왼쪽 테두리",injection:"",example:"1rem",children:[]},{property:"border-right",description:"오른쪽 테두리",injection:"",example:"1rem",children:[]},{property:"border-bottom",description:"아래쪽 테두리",injection:"",example:"1rem",children:[]}];try{let cssSupportBase,cssTongBase,supportBaseWidth,supportButtonHeight,supportButtonSize,supportButtonWeight,supportButtonBorderRadius,titleMarginBottom,titleSize,titleWeight,innerCssBoxBorderRadius,gap,settingCssSupportButton;supportBaseWidth=mediaNumber(132,132,128,128,11),supportButtonHeight=mediaNumber(32,32,31,31,2),supportButtonSize=mediaNumber(12,12,11,11,3),supportButtonWeight=mediaNumber(500,500,500,500,500),supportButtonBorderRadius=mediaNumber(5,5,5,4,1),titleMarginBottom=mediaNumber(5,5,4.5,4,1),titleSize=mediaNumber(16,16,15,14,3),titleWeight=mediaNumber(800,800,800,800,800),innerCssBoxBorderRadius=mediaNumber(8,8,7,7,2),gap=mediaNumber(8,8,7,6,1.5),settingCssSupportButton=cssSupports=>{},cssSupportBase=createAbstract({mother:whiteBase,style:{width:supportBaseWidth,display:"flex",flexDirection:"column",flexGrow:0,flexShrink:0},child:{style:{display:"flex",height:withOut(0),flexDirection:"column"},children:[{style:{width:withOut(0),flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:titleMarginBottom,flexGrow:0,flexShrink:0},child:{text:"G",style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.transparent,opacity:0}}},{event:{click:e=>{settingCssSupportButton(cssSupports)}},style:{width:withOut(0),borderRadius:innerCssBoxBorderRadius,flexGrow:1,overflow:"scroll",display:"inline-block"},child:{class:["cssSupportTongClassName"],event:{click:e=>{e.stopPropagation()}},style:{width:withOut(0),display:"grid",gridTemplateColumns:"1fr",gap:gap/3,cursor:"pointer"}}}]}}),cssTongBase=cssSupportBase.querySelector(".cssSupportTongClassName"),settingCssSupportButton=cssLoop=>{let index;cleanChildren(cssTongBase),index=0;for(let c of cssLoop)createAbstract({mother:cssTongBase,attribute:{draggable:"true",property:c.property,description:c.description,injection:""===c.injection?c.property:c.injection,children:JSON.stringify(c.children),child:"string"==typeof c.child&&""!==c.child?String(c.child):"",example:"string"==typeof c.example&&""!==c.example?String(c.example):""},event:{dragover$drop:e=>{e.stopPropagation(),e.preventDefault()},mouseenter:event=>{const self=event.currentTarget,position={x:event.pageX,y:event.pageY},boxWidth=supportBaseWidth-2*gap,overflow=position.x+(desktop?boxWidth:boxWidth/100*window.innerWidth)>window.innerWidth,children=JSON.parse(self.mustAttribute("children"));createAbstract({mother:document.body,class:["cssSupportDescriptionPopupClassName"],style:{zIndex:zIndex+1,width:boxWidth,transition:"all 0s ease",height:supportButtonHeight,background:gradientCss(colorExtended.white,colorExtended.white,.9,.6),"backdrop-filter":"blur(2px)",position:"absolute",borderRadius:innerCssBoxBorderRadius,left:pixelUnit(overflow?position.x-(desktop?boxWidth:boxWidth/100*window.innerWidth):position.x),top:pixelUnit(position.y),boxShadow:"0px 3px 22px -12px "+colorExtended.shadow,display:"flex",justifyContent:"center",alignItems:"center"},child:{text:self.mustAttribute("description"),style:{fontSize:supportButtonSize+1,fontFamily:"pretendard",fontWeight:900,fontColor:colorChip.darkDarkBlack}}});void 0!==AbstractNode.timeouts.cssSupportDescriptionPopupClassName_timeout&&null!==AbstractNode.timeouts.cssSupportDescriptionPopupClassName_timeout&&clearTimeout(AbstractNode.timeouts.cssSupportDescriptionPopupClassName_timeout),AbstractNode.timeouts.cssSupportDescriptionPopupClassName_timeout=setTimeout(()=>{removeByClass("cssSupportDescriptionPopupClassName"),AbstractNode.timeouts.cssSupportDescriptionPopupClassName_timeout=null},3e3),children.length>0&&(self.children[0].style.color="yellow")},mouseleave:event=>{event.currentTarget.children[0].style.color=colorChip.white,removeByClass("cssSupportDescriptionPopupClassName")},click:event=>{event.preventDefault(),event.stopPropagation();const self=event.currentTarget,children=JSON.parse(self.mustAttribute("children")),childBoo=""!==String(self.mustAttribute("child"));self.children[0].style.color=colorChip.white,removeByClass("cssSupportDescriptionPopupClassName"),children.length>0&&settingCssSupportButton(children),childBoo&&settingCssSupportButton(cssSupports)},contextmenu:event=>{event.preventDefault(),event.stopPropagation();event.currentTarget.children[0].style.color=colorChip.white,removeByClass("cssSupportDescriptionPopupClassName")},dragstart:event=>{removeByClass("cssSupportDescriptionPopupClassName");const self=event.currentTarget;self.children[0].style.color=colorChip.white;const transfer=event.dataTransfer,transferData=""!==String(self.mustAttribute("child"))?self.mustAttribute("child")+": "+self.mustAttribute("injection")+";":self.mustAttribute("injection")+": "+self.mustAttribute("example")+";";transfer.setData("text/plain",transferData)},selectstart:e=>e.preventDefault()},style:{width:withOut(0),height:supportButtonHeight,borderRadius:innerCssBoxBorderRadius,background:colorChip.mint,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",cursor:"pointer",transition:"all 0s ease"},child:{text:c.property,event:{selectstart:e=>e.preventDefault(),mouseenter$mouseover$mouseleave:e=>{e.stopPropagation(),e.preventDefault()}},style:{fontSize:supportButtonSize,fontFamily:"redditmono",fontWeight:supportButtonWeight,fontColor:colorChip.white,transition:"all 0s ease"}}}),index++},settingCssSupportButton(cssSupports)}catch(e){throw console.log(e),e}};fileToPopup=async file=>{const instance=this,{colorChip,svgMaker:localSvgMaker,binaryPath}=Helper,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();try{let middleText,result;return middleText=await instance.fileToText(file),result=await instance.linesPopup(middleText,file),result}catch(e){throw console.log(e),e}};linesPopup=(rawText,originalFile)=>{const instance=this,{colorChip,svgMaker:localSvgMaker,binaryPath}=Helper,{withOut,percent,promptPopup,markdownBlocks,equalJson,ajaxForm,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(),{standardWidth,totalContents,naviHeight}=this;return new Promise((resolve,reject)=>{try{const zIndex=104;let cancelBack,whiteBase,rawStringArray,whiteBaseRadius,tongMargin,tongMarginTop,linesCloseEvent,outerMargin,black,white,mouseDown,isDownDoing,titleBlockHeight,contentsArea,titleBlockMarginBottom,blockRender,buttonWidth,buttonHeight,buttonRadius,buttonSize,buttonWeight,buttonBetween,buttonVisualTop,mergeEvent,deleteEvent,cancelEvent,completeEvent,convertEvent,specialBanEventMaker,excuteFilter,blockPaddingTop,blockPaddingLeft,blockBorderRadius,blockBetween,blockContentsSize,blockContentsWeight,titleSize,titleWeight,pageWidthMin,pageWidthMinUnit,filterMarginDelta;rawStringArray=rawText.split("\n"),whiteBaseRadius=mediaNumber(12,12,10,9,2),tongMargin=mediaNumber(48,40,36,32,5.2),tongMarginTop=mediaNumber(38,32,27,25,5.2),outerMargin=mediaNumber(48,40,36,32,5.2),titleBlockHeight=mediaNumber(41,41,40,38,4),titleBlockMarginBottom=mediaNumber(15,15,15,15,1),buttonWidth=mediaNumber(54,54,52,50,5),buttonHeight=mediaNumber(29,29,26,25,2),buttonBetween=mediaNumber(3,3,2,2,1),buttonRadius=mediaNumber(4,4,4,4,4),buttonSize=mediaNumber(13.5,13.5,12.5,12,1),buttonWeight=mediaNumber(800,800,800,800,800),buttonVisualTop=mediaNumber(1.5,1.5,1,1,0),blockPaddingTop=mediaNumber(8,8,7,6,1),blockPaddingLeft=mediaNumber(15,15,14,13,3),blockBorderRadius=mediaNumber(8,8,8,7,8),blockBetween=mediaNumber(4,4,4,3,3),blockContentsSize=mediaNumber(14,14,14,13,15),blockContentsWeight=mediaNumber(400,400,400,400,400),titleSize=mediaNumber(24,24,23.5,23.5,26),titleWeight=mediaNumber(900,900,900,900,900),pageWidthMin=mediaNumber(18,18,18,17,8),pageWidthMinUnit=9,filterMarginDelta=12,black=colorChip.darkDarkBlack,white=colorChip.white,mouseDown=!1,isDownDoing=!1,blockRender=rawStringArray=>{},linesCloseEvent=e=>{const motherArr=[...document.querySelectorAll(".linesPopupClassName")];if(motherArr.length>1){const[cancel,whiteBase]=motherArr.map(d=>d);cancel.style.animation="justfadeoutsmall 0.5s ease forwards",whiteBase.style.animation="fadedown 0.5s ease forwards",setQueue(()=>{removeByClass("linesPopupClassName"),resolve({mode:"fail",data:""})},500)}},mergeEvent=()=>e=>{const blockTargets=selectByClass("rawStringBlockClassName");let updatedTargets,thisText,isOn;updatedTargets=[],thisText="",isOn=!1;for(let b of blockTargets)"on"===b.getAttribute("toggle")?(thisText+=" "+b.firstChild.textContent,isOn=!0):(isOn&&(thisText=thisText.replace(/  /gi," "),updatedTargets.push(thisText)),thisText="",thisText=b.firstChild.textContent,isOn=!1,thisText=thisText.replace(/  /gi," "),updatedTargets.push(thisText)),"on"!==b.getAttribute("toggle")&&(thisText="",isOn=!1);isOn&&updatedTargets.push(thisText),blockRender(updatedTargets)},deleteEvent=()=>e=>{const blockTargets=selectByClass("rawStringBlockClassName");let updatedTargets,thisText;updatedTargets=[],thisText="";for(let b of blockTargets)"on"!==b.getAttribute("toggle")&&(thisText=b.firstChild.textContent,thisText=thisText.replace(/  /gi," "),updatedTargets.push(thisText));blockRender(updatedTargets)},completeEvent=(injectionMode=!1)=>e=>{const blockTargets=selectByClass("rawStringBlockClassName"),onMode=blockTargets.filter(b=>"on"===b.mustAttribute("toggle")).length>1;let updatedTargets,thisText;updatedTargets=[],thisText="";for(let b of blockTargets)thisText=b.children[0].textContent,thisText=thisText.replace(/  /gi," "),onMode?"on"===b.mustAttribute("toggle")&&updatedTargets.push(thisText):updatedTargets.push(thisText);const motherArr=[...document.querySelectorAll(".linesPopupClassName")];if(motherArr.length>1){const[cancel,whiteBase]=motherArr.map(d=>d);cancel.style.animation="justfadeoutsmall 0.5s ease forwards",whiteBase.style.animation="fadedown 0.5s ease forwards",setQueue(()=>{removeByClass("linesPopupClassName"),resolve({mode:injectionMode?"injection":"convert",data:updatedTargets.join("\n\n")})},500)}},excuteFilter=async()=>{void 0!==AbstractNode.timeouts.excuteRawStringFilterByNumbers&&null!==AbstractNode.timeouts.excuteRawStringFilterByNumbers&&window.clearTimeout(AbstractNode.timeouts.excuteRawStringFilterByNumbers),AbstractNode.timeouts.excuteRawStringFilterByNumbers=window.setTimeout(()=>{const blockTargets=selectByClass("rawStringArrayClassName"),aValue=document.querySelector("input[index=a]").value,bValue=document.querySelector("input[index=b]").value,fromToArr=[""===aValue.replace(/[^0-9]/gis,"")||"0"===aValue.replace(/[^0-9]/gis,"")?-1:Number(aValue.replace(/[^0-9]/gis,""))-1,""===bValue.replace(/[^0-9]/gis,"")||"0"===bValue.replace(/[^0-9]/gis,"")?89991e4:Number(bValue.replace(/[^0-9]/gis,""))-1];for(let dom of blockTargets){const thisIndex=Number(dom.mustAttribute("index"));dom.style.display=fromToArr[0]<=thisIndex&&fromToArr[1]>=thisIndex?"flex":"none"}window.clearTimeout(AbstractNode.timeouts.excuteRawStringFilterByNumbers),AbstractNode.timeouts.excuteRawStringFilterByNumbers=null},50)},specialBanEventMaker=mode=>e=>{const self=e.currentTarget,parent=self.parentElement.parentElement;if("a"===mode){parent.querySelector('input[index="b"]');instance.setDebounce(async()=>{"focus"===self.getAttribute("status")&&(""===self.value.replace(/[^0-9\-\.]/gi,"")||"0"===self.value.replace(/[^0-9\-\.]/gi,"")?self.value="":self.value=self.value.replace(/[^0-9]/gi,""))},"specialBanEventMar_phoneInput_debounceaaaaaaaa"+mode+"_"+mode,50)}else{const previousTarget=parent.querySelector('input[index="a"]'),previousValue=Number.isNaN(Number(previousTarget.value.trim()))?0:Number(previousTarget.value.trim());instance.setDebounce(async()=>{if("focus"===self.getAttribute("status"))if(""===self.value.replace(/[^0-9\-\.]/gi,"")||"0"===self.value.replace(/[^0-9\-\.]/gi,""))self.value="";else{const currentValue=Number(self.value.replace(/[^0-9]/gi,""));Number.isNaN(currentValue)||previousValue>currentValue?self.value=String(previousValue+1):self.value=self.value.replace(/[^0-9]/gi,"")}excuteFilter().catch(e=>console.log(e))},"specialBanEventMar_phoneInput_debounceaaaaaaaa"+mode+"_"+mode,300)}},convertEvent=()=>e=>{const motherArr=[...document.querySelectorAll(".linesPopupClassName")];if(motherArr.length>1){const[cancel,whiteBase]=motherArr.map(d=>d);cancel.style.animation="justfadeoutsmall 0.5s ease forwards",whiteBase.style.animation="fadedown 0.5s ease forwards",setQueue(()=>{removeByClass("linesPopupClassName"),instance.fileToTextArrayByPage(originalFile).then(arr=>instance.pageLinesPopup(arr,originalFile)).then(s=>{resolve(s)}).catch(e=>console.log(e))},500)}},cancelEvent=()=>e=>{e.preventDefault();const blockTargets=selectByClass("rawStringBlockClassName");for(let b of blockTargets){const textArea=b.children[0];b.style.background=colorChip.gray1,textArea.style.color=black,b.setAttribute("toggle","off")}isDownDoing=!1,mouseDown=!1},cancelBack=createAbstract({mother:totalContents,class:["linesPopupClassName"],event:{click:linesCloseEvent},style:{position:"fixed",top:0,left:0,width:withOut(0),height:withOut(0),opacity:0,animation:"justfadeinsmall 0.4s ease forwards",background:colorExtended.black,zIndex}}),whiteBase=createAbstract({mother:totalContents,class:["linesPopupClassName"],event:{click:e=>e.stopPropagation()},style:{position:"fixed",width:standardWidth,height:withOut(2*outerMargin,ea),top:outerMargin,left:withOut(50,standardWidth/2,ea),borderRadius:whiteBaseRadius,background:colorExtended.white,animation:"fadeup 0.5s ease forwards",zIndex,flexDirection:"column",overflow:"hidden"},child:{event:{click:e=>e.stopPropagation()},style:{display:"block",width:withOut(0),height:withOut(0),overflow:"scroll"},child:{event:{click:e=>{if(e.stopPropagation(),!isDownDoing){mouseDown=!1;const blockTargets=selectByClass("rawStringBlockClassName");for(let b of blockTargets)b.style.background=colorChip.gray1,b.firstChild.style.color=black,b.setAttribute("toggle","off")}isDownDoing=!1},contextmenu:cancelEvent()},style:{display:"block",width:withOut(2*tongMargin),height:withOut(tongMarginTop),paddingLeft:tongMargin,paddingRight:tongMargin,paddingTop:tongMarginTop}}}}).children[0].children[0],createAbstract({mother:whiteBase,event:{selectstart:e=>e.preventDefault()},style:{diplay:"flex",justifyContent:"end",alignItems:"start",textAlign:"left",marginBottom:titleBlockMarginBottom,height:titleBlockHeight,flexDirection:"row-reverse"},children:[{style:{display:"inline-flex",height:withOut(buttonVisualTop),justifyContent:"center",alignItems:"center",flexDirection:"row"},children:[{style:{height:buttonHeight,display:"inline-flex",flexDirection:"row",justifyContent:"start",alignItems:"start",marginRight:buttonBetween*filterMarginDelta,paddingRight:buttonWidth},children:[{style:{width:buttonWidth,height:withOut(0),borderRadius:buttonRadius,background:colorChip.darkBlack,display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginRight:2*buttonBetween,cursor:"pointer"},child:{text:"필터",style:{fontFamily:"pretendard",fontSize:buttonSize,fontWeight:buttonWeight,color:white}}},{style:{width:buttonWidth,height:withOut(0),borderRadius:buttonRadius,background:colorChip.gray1,display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},child:{mode:"input",attribute:{type:"text",status:"blur",index:"a"},event:{keydown:e=>{if("Enter"===e.key||"Tap"===e.key||"Tab"===e.key){e.preventDefault();const self=e.currentTarget,parent=self.parentElement.parentElement;try{const nextTarget=parent.querySelector('input[index="b"]');self.setAttribute("status","blur"),setTimeout(()=>{nextTarget.focus()},0)}catch{}}},keyup:specialBanEventMaker("a"),focus:e=>{e.currentTarget.setAttribute("status","focus")},blur:e=>{const self=e.currentTarget;self.setAttribute("status","blur"),self.value=self.value.replace(/[^0-9]/gis,""),instance.setDebounce(async()=>{""===self.value.replace(/[^0-9\-\.]/gi,"")||"0"===self.value.replace(/[^0-9\-\.]/gi,"")?self.value="":self.value=self.value.replace(/[^0-9]/gis,"")},"specialBanEventMar_phoneInput_debounsssceaaaaaaaakksss_kksss",10)}},style:{width:withOut(0),height:withOut(0),display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",textAlign:"center",outline:0,border:0,background:colorChip.transparent,fontFamily:"pretendard",fontSize:buttonSize,fontWeight:400,color:black}}},{style:{width:.49*buttonWidth,height:withOut(0),borderRadius:buttonRadius,display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",cursor:"pointer"},child:{text:"~",style:{fontFamily:"pretendard",fontSize:2.1*buttonSize,fontWeight:200,color:colorChip.shadow}}},{style:{position:"absolute",right:0,top:0,width:buttonWidth,height:withOut(0),borderRadius:buttonRadius,background:colorChip.gray1,display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},child:{mode:"input",attribute:{type:"text",status:"blur",index:"b"},event:{keydown:e=>{if("Enter"===e.key||"Tap"===e.key||"Tab"===e.key){e.preventDefault();const self=e.currentTarget;try{self.blur()}catch{}}},keyup:specialBanEventMaker("b"),focus:e=>{e.currentTarget.setAttribute("status","focus")},blur:e=>{const self=e.currentTarget,parent=self.parentElement.parentElement;self.setAttribute("status","blur"),self.value=self.value.replace(/[^0-9]/gis,"");const previousTarget=parent.querySelector('input[index="a"]'),previousValue=Number.isNaN(Number(previousTarget.value.trim()))?0:Number(previousTarget.value.trim());instance.setDebounce(async()=>{if(""===self.value.replace(/[^0-9\-\.]/gi,"")||"0"===self.value.replace(/[^0-9\-\.]/gi,""))self.value="";else{const currentValue=Number(self.value.replace(/[^0-9]/gi,""));Number.isNaN(currentValue)||previousValue>currentValue?self.value=String(previousValue+1):self.value=self.value.replace(/[^0-9]/gi,"")}excuteFilter().catch(e=>console.log(e))},"specialBanEventMar_phoneInput_debounceaaaaaaaakk_kk",10)}},style:{width:withOut(0),height:withOut(0),display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",textAlign:"center",outline:0,border:0,background:colorChip.transparent,fontFamily:"pretendard",fontSize:buttonSize,fontWeight:400,color:black}}},{style:{position:"absolute",right:-1*buttonBetween*(filterMarginDelta/2),top:0,width:0,height:withOut(0),display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",cursor:"pointer",borderRight:"1px dashed "+colorChip.gray3}}]},{event:{click:e=>{e.stopPropagation();const self=e.currentTarget;convertEvent().bind(self)(e)}},style:{width:1.8*buttonWidth,height:buttonHeight,borderRadius:buttonRadius,background:colorChip.mint,display:instance.convertDocxExe.map(s=>new RegExp("\\."+s+"$","gis")).some(r=>r.test(originalFile.name))?"inline-flex":"none",flexDirection:"row",justifyContent:"center",alignItems:"center",marginRight:buttonBetween},child:{text:"페이지 모드",style:{fontFamily:"pretendard",fontSize:buttonSize,fontWeight:buttonWeight,color:white}}},{event:{click:e=>{e.stopPropagation();const self=e.currentTarget;cancelEvent().bind(self)(e);const aInput=document.querySelector("input[index=a]"),bInput=document.querySelector("input[index=b]");aInput.value="",bInput.value="",excuteFilter().catch(e=>console.log(e))}},style:{width:1.2*buttonWidth,height:buttonHeight,borderRadius:buttonRadius,background:colorChip.mint,display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginRight:buttonBetween},child:{text:"초기화",style:{fontFamily:"pretendard",fontSize:buttonSize,fontWeight:buttonWeight,color:white}}},{event:{click:e=>{e.stopPropagation();const self=e.currentTarget;mergeEvent().bind(self)(e)}},style:{width:buttonWidth,height:buttonHeight,borderRadius:buttonRadius,background:colorChip.mint,display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginRight:buttonBetween},child:{text:"병합",style:{fontFamily:"pretendard",fontSize:buttonSize,fontWeight:buttonWeight,color:white}}},{event:{click:e=>{e.stopPropagation();const self=e.currentTarget;deleteEvent().bind(self)(e)}},style:{width:buttonWidth,height:buttonHeight,borderRadius:buttonRadius,background:colorChip.mint,display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginRight:buttonBetween},child:{text:"삭제",style:{fontFamily:"pretendard",fontSize:buttonSize,fontWeight:buttonWeight,color:white}}},{event:{click:e=>{e.stopPropagation();const self=e.currentTarget;completeEvent(!0).bind(self)(e)}},style:{width:buttonWidth,height:buttonHeight,borderRadius:buttonRadius,background:colorChip.darkBlack,marginRight:buttonBetween,display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},child:{text:"주입",style:{fontFamily:"pretendard",fontSize:buttonSize,fontWeight:buttonWeight,color:white}}},{event:{click:e=>{e.stopPropagation();const self=e.currentTarget;completeEvent(!1).bind(self)(e)}},style:{width:buttonWidth,height:buttonHeight,borderRadius:buttonRadius,background:colorChip.darkBlack,display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},child:{text:"완료",style:{fontFamily:"pretendard",fontSize:buttonSize,fontWeight:buttonWeight,color:white}}}]},{event:{selectstart:e=>e.preventDefault()},text:"문단을 구성해주세요!",style:{display:"inline-flex",fontFamily:"pretendard",fontSize:titleSize,fontWeight:titleWeight,color:black,textAlign:"left",flexGrow:1}}]}),contentsArea=createAbstract({mother:whiteBase,event:{click:e=>{e.stopPropagation(),e.preventDefault(),isDownDoing=!1},contextmenu:e=>{if(e.stopPropagation(),e.preventDefault(),!isDownDoing){mouseDown=!1;const blockTargets=selectByClass("rawStringBlockClassName");for(let b of blockTargets)b.style.background=colorChip.gray1,b.firstChild.style.color=black,b.setAttribute("toggle","off")}isDownDoing=!1},scroll:e=>{mouseDown=!1,isDownDoing=!1}},style:{display:"block",height:withOut(titleBlockMarginBottom+titleBlockHeight+tongMarginTop),overflow:"scroll",paddingBottom:tongMarginTop}}),blockRender=rawStringArray=>{let index,standard,thisLength;for(cleanChildren(contentsArea),standard=1,thisLength=(rawStringArray=rawStringArray.filter(s=>""!==s.trim())).length;thisLength/10>=1;)standard+=1*(1-.3*(standard-1)),thisLength=Math.floor(thisLength/10);pageWidthMin=pageWidthMinUnit*standard,index=0;for(let s of rawStringArray)createAbstract({mother:contentsArea,class:["rawStringArrayClassName"],attribute:{index:String(index)},style:{diplay:"flex",justifyContent:"start",alignItems:"stretch",textAlign:"center",flexDirection:"row",width:withOut(0),marginBottom:blockBetween},children:[{style:{paddingLeft:blockPaddingLeft,paddingRight:blockPaddingLeft,borderRadius:blockBorderRadius,background:colorChip.mint,marginRight:blockBetween,flexGrow:0,flexShrink:0,minWidth:pageWidthMin,height:blockContentsSize+3.2*blockPaddingTop+1,justifyContent:"center",alignItems:"center",flexDirection:"row"},child:{event:{selectstart:e=>e.preventDefault()},text:String(index+1),style:{fontFamily:"chillax",fontSize:blockContentsSize+1.5,fontWeight:500,fontColor:colorChip.white,textAlign:"center",transition:"all 0s ease"}}},{attribute:{toggle:"off",value:s,index:String(index)},class:["rawStringBlockClassName"],event:{selectstart:e=>e.preventDefault(),click:e=>{e.stopPropagation();const self=e.currentTarget,textArea=self.children[0],thisIndex=Number(self.getAttribute("index"));if("on"===self.getAttribute("toggle")){const blockTargets=selectByClass("rawStringBlockClassName");let blockIndex,rangeBoo,i,blockOnIndex;blockOnIndex=[],blockIndex=-1;for(let b of blockTargets)b!==self&&"on"===b.getAttribute("toggle")&&(blockIndex=Number(b.getAttribute("index")),blockOnIndex.push(blockIndex));if(rangeBoo=blockOnIndex.some((thisNumber,arrIndex,thisArr)=>!thisArr.includes(thisNumber-1)&&!thisArr.includes(thisNumber+1)),rangeBoo)if(-1!==instance.lastSelectionLineIndex){if(thisIndex<instance.lastSelectionLineIndex)for(let b of blockTargets)i=Number(b.getAttribute("index")),thisIndex<=i&&i<=instance.lastSelectionLineIndex&&(b.style.background=colorChip.mint,b.children[0].style.color=white,b.setAttribute("toggle","on"));else if(instance.lastSelectionLineIndex<thisIndex)for(let b of blockTargets)i=Number(b.getAttribute("index")),instance.lastSelectionLineIndex<=i&&i<=thisIndex&&(b.style.background=colorChip.mint,b.children[0].style.color=white,b.setAttribute("toggle","on"))}else if(thisIndex<blockIndex)for(let b of blockTargets)i=Number(b.getAttribute("index")),thisIndex<=i&&i<=blockIndex&&(b.style.background=colorChip.mint,b.children[0].style.color=white,b.setAttribute("toggle","on"));else if(blockIndex<thisIndex)for(let b of blockTargets)i=Number(b.getAttribute("index")),blockIndex<=i&&i<=thisIndex&&(b.style.background=colorChip.mint,b.children[0].style.color=white,b.setAttribute("toggle","on"));self.style.background=colorChip.mint,textArea.style.color=white,self.setAttribute("toggle","on")}instance.lastSelectionLineIndex=thisIndex,isDownDoing=!1,mouseDown=!1},contextmenu:e=>{e.preventDefault()},mousedown:e=>{if(e.stopPropagation(),0===e.button){const self=e.currentTarget,textArea=self.children[0],toggle="on"===self.getAttribute("toggle");if(mouseDown=!0,isDownDoing=!0,toggle)self.style.background=colorChip.gray1,textArea.style.color=black,self.setAttribute("toggle","off");else{const blockTargets=selectByClass("rawStringBlockClassName");let rangeBoo;rangeBoo=!1;for(let b of blockTargets)if(b!==self&&"on"===b.getAttribute("toggle")){rangeBoo=!0;break}rangeBoo||(self.style.background=colorChip.mint,textArea.style.color=white),self.setAttribute("toggle","on")}}},mouseup:e=>{e.stopPropagation(),mouseDown=!1},mouseenter:e=>{if(mouseDown){const self=e.currentTarget,textArea=self.children[0];"on"===self.getAttribute("toggle")?(self.style.background=colorChip.gray1,textArea.style.color=black,self.setAttribute("toggle","off")):(self.style.background=colorChip.mint,textArea.style.color=white,self.setAttribute("toggle","on"))}}},style:{diplay:"flex",justifyContent:"start",alignItems:"start",textAlign:"left",padding:blockPaddingTop,paddingLeft:blockPaddingLeft,paddingRight:blockPaddingLeft,borderRadius:blockBorderRadius,background:colorChip.gray1,cursor:"pointer",transition:"all 0s ease",flexGrow:1,flexShrink:1},child:{event:{selectstart:e=>e.preventDefault()},text:s,style:{fontFamily:"pretendard",fontSize:blockContentsSize,fontWeight:blockContentsWeight,fontColor:black,textAlign:"left",transition:"all 0s ease"}}}]}),index++},blockRender(rawStringArray)}catch(e){console.log(e),reject(e)}})};pageLinesPopup=(pageTextArray,originalFile)=>{const instance=this,{colorChip,svgMaker:localSvgMaker,binaryPath}=Helper,{withOut,percent,promptPopup,markdownBlocks,equalJson,ajaxForm,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(),{standardWidth,totalContents,naviHeight}=this;return new Promise((resolve,reject)=>{try{const zIndex=104;let cancelBack,whiteBase,rawStringArray,whiteBaseRadius,tongMargin,tongMarginTop,linesCloseEvent,outerMargin,black,white,mouseDown,isDownDoing,titleBlockHeight,contentsArea,titleBlockMarginBottom,blockRender,buttonWidth,buttonHeight,buttonRadius,buttonSize,buttonWeight,buttonBetween,buttonVisualTop,mergeEvent,deleteEvent,cancelEvent,completeEvent,convertEvent,specialBanEventMaker,excuteFilter,blockPaddingTop,blockPaddingLeft,blockBorderRadius,blockBetween,blockContentsSize,blockContentsWeight,titleSize,titleWeight,pageWidthMin,pageWidthMinUnit,blockContentsSize2,filterMarginDelta;rawStringArray=pageTextArray,whiteBaseRadius=mediaNumber(12,12,10,9,2),tongMargin=mediaNumber(48,40,36,32,5.2),tongMarginTop=mediaNumber(38,32,27,25,5.2),outerMargin=mediaNumber(48,40,36,32,5.2),titleBlockHeight=mediaNumber(41,41,40,38,4),titleBlockMarginBottom=mediaNumber(15,15,15,15,1),buttonWidth=mediaNumber(54,54,52,50,5),buttonHeight=mediaNumber(29,29,26,25,2),buttonBetween=mediaNumber(3,3,2,2,1),buttonRadius=mediaNumber(4,4,4,4,4),buttonSize=mediaNumber(13.5,13.5,12.5,12,1),buttonWeight=mediaNumber(800,800,800,800,800),buttonVisualTop=mediaNumber(1.5,1.5,1,1,0),blockPaddingTop=mediaNumber(8,8,7,6,1),blockPaddingLeft=mediaNumber(15,15,14,13,3),blockBorderRadius=mediaNumber(8,8,8,7,8),blockBetween=mediaNumber(4,4,4,3,3),blockContentsSize=mediaNumber(12,12,12,11.5,15),blockContentsWeight=mediaNumber(400,400,400,400,400),blockContentsSize2=mediaNumber(14,14,14,13,15),titleSize=mediaNumber(24,24,23.5,23.5,26),titleWeight=mediaNumber(900,900,900,900,900),pageWidthMin=mediaNumber(18,18,18,17,8),pageWidthMinUnit=9,filterMarginDelta=12,black=colorChip.darkDarkBlack,white=colorChip.white,mouseDown=!1,isDownDoing=!1,blockRender=rawStringArray=>{},linesCloseEvent=e=>{const motherArr=[...document.querySelectorAll(".pageLinesPopupClassName")];if(motherArr.length>1){const[cancel,whiteBase]=motherArr.map(d=>d);cancel.style.animation="justfadeoutsmall 0.5s ease forwards",whiteBase.style.animation="fadedown 0.5s ease forwards",setQueue(()=>{removeByClass("pageLinesPopupClassName"),resolve({mode:"fail",data:""})},500)}},mergeEvent=()=>e=>{const blockTargets=selectByClass("rawPageStringBlockClassName");let updatedTargets,thisText,isOn;updatedTargets=[],thisText="",isOn=!1;for(let b of blockTargets)"on"===b.getAttribute("toggle")?(thisText+="\n"+b.getAttribute("value"),isOn=!0):(isOn&&(thisText=thisText.replace(/  /gi," ").trim().replace(/^[\t\n]+/gis,""),updatedTargets.push(thisText)),thisText="",thisText=b.getAttribute("value"),isOn=!1,thisText=thisText.replace(/  /gi," "),updatedTargets.push(thisText)),"on"!==b.getAttribute("toggle")&&(thisText="",isOn=!1);thisText=thisText.trim(),isOn&&updatedTargets.push(thisText.trim().replace(/^[\t\n]+/gis,"")),blockRender(updatedTargets)},deleteEvent=()=>e=>{const blockTargets=selectByClass("rawPageStringBlockClassName");let updatedTargets,thisText;updatedTargets=[],thisText="";for(let b of blockTargets)"on"!==b.getAttribute("toggle")&&(thisText=b.firstChild.textContent,thisText=thisText.replace(/  /gi," "),updatedTargets.push(thisText));blockRender(updatedTargets)},completeEvent=(injectionMode=!1)=>e=>{const blockTargets=selectByClass("rawPageStringBlockClassName"),onMode=blockTargets.filter(b=>"on"===b.mustAttribute("toggle")).length>1;let updatedTargets,thisText;updatedTargets=[],thisText="";for(let b of blockTargets){thisText=b.children[0].innerHTML.replace(/<br\s*\/?>/gis,"\n"),thisText=thisText.replace(/  /gi," ");const thisStringArr=thisText.split("\n").filter(a=>""!==a.trim()).map(s=>s.trim());onMode?"on"===b.mustAttribute("toggle")&&(updatedTargets=updatedTargets.concat([...thisStringArr])):updatedTargets=updatedTargets.concat([...thisStringArr])}const motherArr=[...document.querySelectorAll(".pageLinesPopupClassName")];if(motherArr.length>1){const[cancel,whiteBase]=motherArr.map(d=>d);cancel.style.animation="justfadeoutsmall 0.5s ease forwards",whiteBase.style.animation="fadedown 0.5s ease forwards",setQueue(()=>{removeByClass("pageLinesPopupClassName"),resolve({mode:injectionMode?"injection":"convert",data:updatedTargets.join("\n\n")})},500)}},convertEvent=()=>e=>{const motherArr=[...document.querySelectorAll(".pageLinesPopupClassName")];if(motherArr.length>1){const[cancel,whiteBase]=motherArr.map(d=>d);cancel.style.animation="justfadeoutsmall 0.5s ease forwards",whiteBase.style.animation="fadedown 0.5s ease forwards",setQueue(()=>{removeByClass("pageLinesPopupClassName"),instance.fileToText(originalFile).then(a=>instance.linesPopup(a,originalFile)).then(s=>{resolve(s)}).catch(e=>console.log(e))},500)}},cancelEvent=()=>e=>{e.preventDefault();const blockTargets=selectByClass("rawPageStringBlockClassName");for(let b of blockTargets){const textArea=b.children[0];b.style.background=colorChip.gray1,textArea.style.color=black,b.setAttribute("toggle","off")}isDownDoing=!1,mouseDown=!1},excuteFilter=async()=>{void 0!==AbstractNode.timeouts.excuteRawStringFilterByNumbers&&null!==AbstractNode.timeouts.excuteRawStringFilterByNumbers&&window.clearTimeout(AbstractNode.timeouts.excuteRawStringFilterByNumbers),AbstractNode.timeouts.excuteRawStringFilterByNumbers=window.setTimeout(()=>{const blockTargets=selectByClass("rawStringArrayClassName"),aValue=document.querySelector("input[index=a]").value,bValue=document.querySelector("input[index=b]").value,fromToArr=[""===aValue.replace(/[^0-9]/gis,"")||"0"===aValue.replace(/[^0-9]/gis,"")?-1:Number(aValue.replace(/[^0-9]/gis,""))-1,""===bValue.replace(/[^0-9]/gis,"")||"0"===bValue.replace(/[^0-9]/gis,"")?89991e4:Number(bValue.replace(/[^0-9]/gis,""))-1];for(let dom of blockTargets){const thisIndex=Number(dom.mustAttribute("index"));dom.style.display=fromToArr[0]<=thisIndex&&fromToArr[1]>=thisIndex?"flex":"none"}window.clearTimeout(AbstractNode.timeouts.excuteRawStringFilterByNumbers),AbstractNode.timeouts.excuteRawStringFilterByNumbers=null},50)},specialBanEventMaker=mode=>e=>{const self=e.currentTarget,parent=self.parentElement.parentElement;if("a"===mode){parent.querySelector('input[index="b"]');instance.setDebounce(async()=>{"focus"===self.getAttribute("status")&&(""===self.value.replace(/[^0-9\-\.]/gi,"")||"0"===self.value.replace(/[^0-9\-\.]/gi,"")?self.value="":self.value=self.value.replace(/[^0-9]/gi,""))},"specialBanEventMar_phoneInput_debounceaaaaaaaa"+mode+"_"+mode,50)}else{const previousTarget=parent.querySelector('input[index="a"]'),previousValue=Number.isNaN(Number(previousTarget.value.trim()))?0:Number(previousTarget.value.trim());instance.setDebounce(async()=>{if("focus"===self.getAttribute("status"))if(""===self.value.replace(/[^0-9\-\.]/gi,"")||"0"===self.value.replace(/[^0-9\-\.]/gi,""))self.value="";else{const currentValue=Number(self.value.replace(/[^0-9]/gi,""));Number.isNaN(currentValue)||previousValue>currentValue?self.value=String(previousValue+1):self.value=self.value.replace(/[^0-9]/gi,"")}excuteFilter().catch(e=>console.log(e))},"specialBanEventMar_phoneInput_debounceaaaaaaaa"+mode+"_"+mode,300)}},cancelBack=createAbstract({mother:totalContents,class:["pageLinesPopupClassName"],event:{click:linesCloseEvent},style:{position:"fixed",top:0,left:0,width:withOut(0),height:withOut(0),opacity:0,animation:"justfadeinsmall 0.4s ease forwards",background:colorExtended.black,zIndex}}),whiteBase=createAbstract({mother:totalContents,class:["pageLinesPopupClassName"],event:{click:e=>e.stopPropagation()},style:{position:"fixed",width:standardWidth,height:withOut(2*outerMargin,ea),top:outerMargin,left:withOut(50,standardWidth/2,ea),borderRadius:whiteBaseRadius,background:colorExtended.white,animation:"fadeup 0.5s ease forwards",zIndex,flexDirection:"column",overflow:"hidden"},child:{event:{click:e=>e.stopPropagation()},style:{display:"block",width:withOut(0),height:withOut(0),overflow:"scroll"},child:{event:{click:e=>{if(e.stopPropagation(),!isDownDoing){mouseDown=!1;const blockTargets=selectByClass("rawPageStringBlockClassName");for(let b of blockTargets)b.style.background=colorChip.gray1,b.firstChild.style.color=black,b.setAttribute("toggle","off")}isDownDoing=!1},contextmenu:cancelEvent()},style:{display:"block",width:withOut(2*tongMargin),height:withOut(tongMarginTop),paddingLeft:tongMargin,paddingRight:tongMargin,paddingTop:tongMarginTop}}}}).children[0].children[0],createAbstract({mother:whiteBase,event:{selectstart:e=>e.preventDefault()},style:{diplay:"flex",justifyContent:"end",alignItems:"start",textAlign:"left",marginBottom:titleBlockMarginBottom,height:titleBlockHeight,flexDirection:"row-reverse"},children:[{style:{display:"inline-flex",height:withOut(buttonVisualTop),justifyContent:"center",alignItems:"center",flexDirection:"row"},children:[{style:{height:buttonHeight,display:"inline-flex",flexDirection:"row",justifyContent:"start",alignItems:"start",marginRight:buttonBetween*filterMarginDelta,paddingRight:buttonWidth},children:[{style:{width:buttonWidth,height:withOut(0),borderRadius:buttonRadius,background:colorChip.darkBlack,display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginRight:2*buttonBetween,cursor:"pointer"},child:{text:"필터",style:{fontFamily:"pretendard",fontSize:buttonSize,fontWeight:buttonWeight,color:white}}},{style:{width:buttonWidth,height:withOut(0),borderRadius:buttonRadius,background:colorChip.gray1,display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},child:{mode:"input",attribute:{type:"text",status:"blur",index:"a"},event:{keydown:e=>{if("Enter"===e.key||"Tap"===e.key||"Tab"===e.key){e.preventDefault();const self=e.currentTarget,parent=self.parentElement.parentElement;try{const nextTarget=parent.querySelector('input[index="b"]');self.setAttribute("status","blur"),setTimeout(()=>{nextTarget.focus()},0)}catch{}}},keyup:specialBanEventMaker("a"),focus:e=>{e.currentTarget.setAttribute("status","focus")},blur:e=>{const self=e.currentTarget;self.setAttribute("status","blur"),self.value=self.value.replace(/[^0-9]/gis,""),instance.setDebounce(async()=>{""===self.value.replace(/[^0-9\-\.]/gi,"")||"0"===self.value.replace(/[^0-9\-\.]/gi,"")?self.value="":self.value=self.value.replace(/[^0-9]/gis,"")},"specialBanEventMar_phoneInput_debounsssceaaaaaaaakksss_kksss",10)}},style:{width:withOut(0),height:withOut(0),display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",textAlign:"center",outline:0,border:0,background:colorChip.transparent,fontFamily:"pretendard",fontSize:buttonSize,fontWeight:400,color:black}}},{style:{width:.49*buttonWidth,height:withOut(0),borderRadius:buttonRadius,display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",cursor:"pointer"},child:{text:"~",style:{fontFamily:"pretendard",fontSize:2.1*buttonSize,fontWeight:200,color:colorChip.shadow}}},{style:{position:"absolute",right:0,top:0,width:buttonWidth,height:withOut(0),borderRadius:buttonRadius,background:colorChip.gray1,display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},child:{mode:"input",attribute:{type:"text",status:"blur",index:"b"},event:{keydown:e=>{if("Enter"===e.key||"Tap"===e.key||"Tab"===e.key){e.preventDefault();const self=e.currentTarget;try{self.blur()}catch{}}},keyup:specialBanEventMaker("b"),focus:e=>{e.currentTarget.setAttribute("status","focus")},blur:e=>{const self=e.currentTarget,parent=self.parentElement.parentElement;self.setAttribute("status","blur"),self.value=self.value.replace(/[^0-9]/gis,"");const previousTarget=parent.querySelector('input[index="a"]'),previousValue=Number.isNaN(Number(previousTarget.value.trim()))?0:Number(previousTarget.value.trim());instance.setDebounce(async()=>{if(""===self.value.replace(/[^0-9\-\.]/gi,"")||"0"===self.value.replace(/[^0-9\-\.]/gi,""))self.value="";else{const currentValue=Number(self.value.replace(/[^0-9]/gi,""));Number.isNaN(currentValue)||previousValue>currentValue?self.value=String(previousValue+1):self.value=self.value.replace(/[^0-9]/gi,"")}excuteFilter().catch(e=>console.log(e))},"specialBanEventMar_phoneInput_debounceaaaaaaaakk_kk",10)}},style:{width:withOut(0),height:withOut(0),display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",textAlign:"center",outline:0,border:0,background:colorChip.transparent,fontFamily:"pretendard",fontSize:buttonSize,fontWeight:400,color:black}}},{style:{position:"absolute",right:-1*buttonBetween*(filterMarginDelta/2),top:0,width:0,height:withOut(0),display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",cursor:"pointer",borderRight:"1px dashed "+colorChip.gray3}}]},{event:{click:e=>{e.stopPropagation();const self=e.currentTarget;convertEvent().bind(self)(e)}},style:{width:1.4*buttonWidth,height:buttonHeight,borderRadius:buttonRadius,background:colorChip.mint,display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginRight:buttonBetween},child:{text:"문단 모드",style:{fontFamily:"pretendard",fontSize:buttonSize,fontWeight:buttonWeight,color:white}}},{event:{click:e=>{e.stopPropagation();const self=e.currentTarget;cancelEvent().bind(self)(e);const aInput=document.querySelector("input[index=a]"),bInput=document.querySelector("input[index=b]");aInput.value="",bInput.value="",excuteFilter().catch(e=>console.log(e))}},style:{width:1.2*buttonWidth,height:buttonHeight,borderRadius:buttonRadius,background:colorChip.mint,display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginRight:buttonBetween},child:{text:"초기화",style:{fontFamily:"pretendard",fontSize:buttonSize,fontWeight:buttonWeight,color:white}}},{event:{click:e=>{e.stopPropagation();const self=e.currentTarget;mergeEvent().bind(self)(e)}},style:{width:buttonWidth,height:buttonHeight,borderRadius:buttonRadius,background:colorChip.mint,display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginRight:buttonBetween},child:{text:"병합",style:{fontFamily:"pretendard",fontSize:buttonSize,fontWeight:buttonWeight,color:white}}},{event:{click:e=>{e.stopPropagation();const self=e.currentTarget;deleteEvent().bind(self)(e)}},style:{width:buttonWidth,height:buttonHeight,borderRadius:buttonRadius,background:colorChip.mint,display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginRight:buttonBetween},child:{text:"삭제",style:{fontFamily:"pretendard",fontSize:buttonSize,fontWeight:buttonWeight,color:white}}},{event:{click:e=>{e.stopPropagation();const self=e.currentTarget;completeEvent(!0).bind(self)(e)}},style:{width:buttonWidth,height:buttonHeight,borderRadius:buttonRadius,background:colorChip.darkBlack,display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginRight:buttonBetween},child:{text:"주입",style:{fontFamily:"pretendard",fontSize:buttonSize,fontWeight:buttonWeight,color:white}}},{event:{click:e=>{e.stopPropagation();const self=e.currentTarget;completeEvent(!1).bind(self)(e)}},style:{width:buttonWidth,height:buttonHeight,borderRadius:buttonRadius,background:colorChip.darkBlack,display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},child:{text:"완료",style:{fontFamily:"pretendard",fontSize:buttonSize,fontWeight:buttonWeight,color:white}}}]},{event:{selectstart:e=>e.preventDefault()},text:"페이지를 선택해주세요!",style:{display:"inline-flex",fontFamily:"pretendard",fontSize:titleSize,fontWeight:titleWeight,color:black,textAlign:"left",flexGrow:1}}]}),contentsArea=createAbstract({mother:whiteBase,event:{click:e=>{e.stopPropagation(),e.preventDefault(),isDownDoing=!1},contextmenu:e=>{if(e.stopPropagation(),e.preventDefault(),!isDownDoing){mouseDown=!1;const blockTargets=selectByClass("rawPageStringBlockClassName");for(let b of blockTargets)b.style.background=colorChip.gray1,b.firstChild.style.color=black,b.setAttribute("toggle","off")}isDownDoing=!1},scroll:e=>{mouseDown=!1,isDownDoing=!1}},style:{display:"block",height:withOut(titleBlockMarginBottom+titleBlockHeight+tongMarginTop),overflow:"scroll",paddingBottom:tongMarginTop}}),blockRender=rawStringArray=>{let index,standard,thisLength;for(cleanChildren(contentsArea),standard=1,thisLength=(rawStringArray=rawStringArray.filter(s=>""!==s.trim())).length;thisLength/10>=1;)standard+=1*(1-.3*(standard-1)),thisLength=Math.floor(thisLength/10);pageWidthMin=pageWidthMinUnit*standard,index=0;for(let s of rawStringArray)createAbstract({mother:contentsArea,class:["rawStringArrayClassName"],attribute:{index:String(index)},style:{diplay:"flex",justifyContent:"start",alignItems:"stretch",textAlign:"center",flexDirection:"row",width:withOut(0),marginBottom:blockBetween},children:[{style:{paddingLeft:blockPaddingLeft,paddingRight:blockPaddingLeft,borderRadius:blockBorderRadius,background:colorChip.mint,marginRight:blockBetween,flexGrow:0,flexShrink:0,minWidth:pageWidthMin,height:blockContentsSize2+3*blockPaddingTop,justifyContent:"center",alignItems:"center",flexDirection:"row"},child:{event:{selectstart:e=>e.preventDefault()},text:String(index+1),style:{fontFamily:"chillax",fontSize:blockContentsSize2+1.5,fontWeight:500,lineHeight:1.5,fontColor:colorChip.white,textAlign:"center",transition:"all 0s ease"}}},{attribute:{toggle:"off",value:s,index:String(index)},class:["rawPageStringBlockClassName"],event:{selectstart:e=>e.preventDefault(),click:e=>{e.stopPropagation();const self=e.currentTarget,textArea=self.children[0],thisIndex=Number(self.getAttribute("index"));if("on"===self.getAttribute("toggle")){const blockTargets=selectByClass("rawPageStringBlockClassName");let blockIndex,rangeBoo,i,blockOnIndex;blockOnIndex=[],blockIndex=-1;for(let b of blockTargets)b!==self&&"on"===b.getAttribute("toggle")&&(blockIndex=Number(b.getAttribute("index")),blockOnIndex.push(blockIndex));if(rangeBoo=blockOnIndex.some((thisNumber,arrIndex,thisArr)=>!thisArr.includes(thisNumber-1)&&!thisArr.includes(thisNumber+1)),rangeBoo)if(-1!==instance.lastSelectionLineIndex){if(thisIndex<instance.lastSelectionLineIndex)for(let b of blockTargets)i=Number(b.getAttribute("index")),thisIndex<=i&&i<=instance.lastSelectionLineIndex&&(b.style.background=colorChip.mint,b.children[0].style.color=white,b.setAttribute("toggle","on"));else if(instance.lastSelectionLineIndex<thisIndex)for(let b of blockTargets)i=Number(b.getAttribute("index")),instance.lastSelectionLineIndex<=i&&i<=thisIndex&&(b.style.background=colorChip.mint,b.children[0].style.color=white,b.setAttribute("toggle","on"))}else if(thisIndex<blockIndex)for(let b of blockTargets)i=Number(b.getAttribute("index")),thisIndex<=i&&i<=blockIndex&&(b.style.background=colorChip.mint,b.children[0].style.color=white,b.setAttribute("toggle","on"));else if(blockIndex<thisIndex)for(let b of blockTargets)i=Number(b.getAttribute("index")),blockIndex<=i&&i<=thisIndex&&(b.style.background=colorChip.mint,b.children[0].style.color=white,b.setAttribute("toggle","on"));self.style.background=colorChip.mint,textArea.style.color=white,self.setAttribute("toggle","on")}instance.lastSelectionLineIndex=thisIndex,isDownDoing=!1,mouseDown=!1},contextmenu:e=>{e.preventDefault()},mousedown:e=>{if(e.stopPropagation(),0===e.button){const self=e.currentTarget,textArea=self.children[0],toggle="on"===self.getAttribute("toggle");if(mouseDown=!0,isDownDoing=!0,toggle)self.style.background=colorChip.gray1,textArea.style.color=black,self.setAttribute("toggle","off");else{const blockTargets=selectByClass("rawPageStringBlockClassName");let blockIndex,rangeBoo;blockIndex=-1,rangeBoo=!1;for(let b of blockTargets)if(b!==self&&"on"===b.getAttribute("toggle")){blockIndex=Number(b.getAttribute("index")),rangeBoo=!0;break}rangeBoo||(self.style.background=colorChip.mint,textArea.style.color=white),self.setAttribute("toggle","on")}}},mouseup:e=>{e.stopPropagation(),mouseDown=!1},mouseenter:e=>{if(mouseDown){const self=e.currentTarget,textArea=self.children[0];"on"===self.getAttribute("toggle")?(self.style.background=colorChip.gray1,textArea.style.color=black,self.setAttribute("toggle","off")):(self.style.background=colorChip.mint,textArea.style.color=white,self.setAttribute("toggle","on"))}}},style:{diplay:"flex",justifyContent:"start",alignItems:"start",textAlign:"left",padding:blockPaddingTop,paddingLeft:blockPaddingLeft,paddingRight:blockPaddingLeft,borderRadius:blockBorderRadius,background:colorChip.gray1,cursor:"pointer",transition:"all 0s ease",flexGrow:1,flexShrink:1},child:{event:{selectstart:e=>e.preventDefault()},text:s,style:{fontFamily:"pretendard",fontSize:blockContentsSize,fontWeight:blockContentsWeight,lineHeight:1.5,fontColor:black,textAlign:"left",transition:"all 0s ease"}}}]}),index++},blockRender(rawStringArray)}catch(e){console.log(e),reject(e)}})};frontContextListPopup=inputStringArray=>{const instance=this,{colorChip,svgMaker:localSvgMaker,binaryPath}=Helper,{withOut,percent,promptPopup,markdownBlocks,equalJson,ajaxForm,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(),{standardWidth,totalContents,naviHeight}=this;return new Promise((resolve,reject)=>{try{const chapterLength=inputStringArray.length,zIndex=104;let cancelBack,whiteBase,rawStringArray,whiteBaseRadius,tongMargin,tongMarginTop,linesCloseEvent,outerMargin,black,white,mouseDown,isDownDoing,titleBlockHeight,contentsArea,titleBlockMarginBottom,blockRender,buttonWidth,buttonHeight,buttonRadius,buttonSize,buttonWeight,buttonBetween,buttonVisualTop,completeEvent,blockPaddingTop,blockPaddingLeft,blockBorderRadius,blockBetween,blockContentsSize,blockContentsWeight,titleSize,titleWeight,rawText,chapterWidth,appearInputEvent;rawText=variableArray(chapterLength).map(i=>"Chapter "+String(i+1)).join("\n"),rawStringArray=rawText.split("\n"),whiteBaseRadius=mediaNumber(12,12,10,9,2),tongMargin=mediaNumber(48,40,36,32,5.2),tongMarginTop=mediaNumber(38,32,27,25,5.2),outerMargin=mediaNumber(48,40,36,32,5.2),titleBlockHeight=mediaNumber(41,41,40,38,4),titleBlockMarginBottom=mediaNumber(15,15,15,15,1),buttonWidth=mediaNumber(54,54,52,50,5),buttonHeight=mediaNumber(29,29,26,25,2),buttonBetween=mediaNumber(3,3,2,2,1),buttonRadius=mediaNumber(4,4,4,4,4),buttonSize=mediaNumber(13.5,13.5,12.5,12,1),buttonWeight=mediaNumber(800,800,800,800,800),buttonVisualTop=mediaNumber(1.5,1.5,1,1,0),blockPaddingTop=mediaNumber(8,8,7,6,1),blockPaddingLeft=mediaNumber(15,15,14,13,3),blockBorderRadius=mediaNumber(8,8,8,7,8),blockBetween=mediaNumber(3,3,2,2,3),blockContentsSize=mediaNumber(14,14,13,13,15),blockContentsWeight=mediaNumber(400,400,400,400,400),titleSize=mediaNumber(24,24,23.5,23.5,26),titleWeight=mediaNumber(900,900,900,900,900),chapterWidth=mediaNumber(100,100,100,92,80),black=colorChip.darkDarkBlack,white=colorChip.white,mouseDown=!1,isDownDoing=!1,blockRender=rawStringArray=>{},linesCloseEvent=e=>{const motherArr=[...document.querySelectorAll(".contextPopupClassName")];if(motherArr.length>1){const[cancel,whiteBase]=motherArr.map(d=>d);cancel.style.animation="justfadeoutsmall 0.5s ease forwards",whiteBase.style.animation="fadedownfixcenter 0.5s ease forwards",setQueue(()=>{removeByClass("contextPopupClassName"),resolve({context:[],html:""})},500)}},completeEvent=()=>e=>{setTimeout(()=>{const blockTargets=selectByClass("rawContextStringBlockClassName");let updatedTargets,thisText;updatedTargets=[],thisText="";for(let b of blockTargets)b.children[1].children[0].textContent?updatedTargets.push(b.children[1].children[0].textContent):updatedTargets.push("");thisText=updatedTargets.map((aa,ii)=>{let s;s=`<h3 style="margin-bottom: 0.6rem;"><a href="chapter/chapter${String(ii+1)}.xhtml" style="text-decoration: none; color: inherit;">${String(ii+1)}. ${aa.trim()}</a></h3>`,s+="\n",s+='<ul style="margin-top: 0rem;">',s+="\n";for(let i=0;i<2;i++)s+="<li>소제목 목차</li>",s+="\n";return s+="</ul>",s+="\n",s+="\n",s}).join(""),thisText='<h1>목차</h1>\n<div class="margin"><p>&#160;</p></div>\n'+thisText+'\n<div class="margin"><p>&#160;</p></div>\n<div class="margin"><p>&#160;</p></div>\n<div class="margin"><p>&#160;</p></div>\n<div class="margin"><p>&#160;</p></div>';const motherArr=[...document.querySelectorAll(".contextPopupClassName")];if(motherArr.length>1){const[cancel,whiteBase]=motherArr.map(d=>d);cancel.style.animation="justfadeoutsmall 0.5s ease forwards",whiteBase.style.animation="fadedownfixcenter 0.5s ease forwards",setQueue(()=>{removeByClass("contextPopupClassName"),resolve({context:updatedTargets,html:thisText})},500)}},100)},appearInputEvent=async e=>{const mother=e.currentTarget.parentElement,original=[...mother.children],siblings=instance.selectByQuery(".rawContextStringBlockClassName"),thisIndex=siblings.findIndex(d=>d===mother);let index;index=0;for(let block of siblings){const removeTargets=[...block.querySelectorAll(".mintTempInputClassName")].map(d=>d);for(let d of removeTargets)d.remove()}for(const o of original){const value=o.children[0].textContent,tong=createAbstract({mother:o,class:["mintTempInputClassName"],style:{position:"absolute",top:0,left:0,paddingLeft:0===index?0:blockPaddingLeft,width:withOut(0===index?0:blockPaddingLeft),height:withOut(0),background:colorChip.mint,display:"inline-flex",justifyContent:"center",alignItems:0===index?"center":"start"},child:0===index?{event:{selectstart:e=>e.preventDefault()},text:value,style:{fontFamily:"pretendard",fontSize:blockContentsSize,fontWeight:600,fontColor:white,textAlign:"left",transition:"all 0s ease"}}:{mode:"input",attribute:{type:"text",original_index:String(thisIndex)},event:{blur:async e=>{const self=e.currentTarget,text=self.value.trim(),original_index=Number(self.getAttribute("original_index"));siblings[original_index].children[1].children[0].textContent=text}},style:{border:0,outline:0,background:colorChip.transparent,fontFamily:"pretendard",fontSize:blockContentsSize,fontWeight:400,fontColor:white,textAlign:"left",transition:"all 0s ease",position:"relative"}}});/input/gis.test(tong.children[0].nodeName)&&(tong.children[0].value=value,tong.children[0].focus()),index++}},cancelBack=createAbstract({mother:totalContents,class:["contextPopupClassName"],event:{click:linesCloseEvent},style:{position:"fixed",top:0,left:0,width:withOut(0),height:withOut(0),opacity:0,animation:"justfadeinsmall 0.4s ease forwards",background:colorExtended.black,zIndex}}),whiteBase=createAbstract({mother:totalContents,class:["contextPopupClassName"],event:{click:e=>e.stopPropagation()},style:{position:"fixed",width:standardWidth,height:"auto",top:String(50)+"%",left:withOut(50,standardWidth/2,ea),borderRadius:whiteBaseRadius,background:colorExtended.white,animation:"fadeupfixcenter 0.5s ease forwards",zIndex,flexDirection:"column",overflow:"hidden",transformOrigin:"50% 50%",transform:"translateY(calc(-50% + 20px))",opacity:0},child:{event:{click:e=>e.stopPropagation()},style:{display:"block",width:withOut(0),height:withOut(0),overflow:"scroll"},child:{style:{display:"block",width:withOut(2*tongMargin),height:withOut(tongMarginTop),paddingLeft:tongMargin,paddingRight:tongMargin,paddingTop:tongMarginTop}}}}).children[0].children[0],createAbstract({mother:whiteBase,event:{selectstart:e=>e.preventDefault()},style:{diplay:"flex",justifyContent:"end",alignItems:"start",textAlign:"left",marginBottom:titleBlockMarginBottom,height:titleBlockHeight,flexDirection:"row-reverse"},children:[{style:{display:"inline-flex",height:withOut(buttonVisualTop),justifyContent:"center",alignItems:"center",flexDirection:"row"},children:[{event:{click:e=>{e.stopPropagation();const self=e.currentTarget;completeEvent().bind(self)(e)}},style:{width:buttonWidth,height:buttonHeight,borderRadius:buttonRadius,background:colorChip.darkBlack,display:"inline-flex",justifyContent:"center",alignItems:"center"},child:{text:"완료",style:{fontFamily:"pretendard",fontSize:buttonSize,fontWeight:buttonWeight,color:white}}}]},{event:{selectstart:e=>e.preventDefault()},text:"목차를 구성해주세요!",style:{display:"inline-flex",fontFamily:"pretendard",fontSize:titleSize,fontWeight:titleWeight,color:black,textAlign:"left",flexGrow:1}}]}),contentsArea=createAbstract({mother:whiteBase,event:{scroll:e=>{mouseDown=!1,isDownDoing=!1}},style:{display:"block",height:withOut(titleBlockMarginBottom+titleBlockHeight+tongMarginTop),overflow:"scroll",paddingBottom:tongMargin-blockBetween}}),blockRender=rawStringArray=>{let index;cleanChildren(contentsArea),rawStringArray=rawStringArray.filter(s=>""!==s.trim()),index=0;for(let s of rawStringArray)createAbstract({mother:contentsArea,attribute:{toggle:"off",value:s,index:String(index)},class:["rawContextStringBlockClassName"],style:{diplay:"flex",justifyContent:"start",alignItems:"stretch",textAlign:"left",marginBottom:blockBetween,cursor:"pointer",transition:"all 0s ease",flexDirection:"row"},children:[{event:{click:appearInputEvent},style:{diplay:"inline-flex",justifyContent:"start",alignItems:"center",textAlign:"left",padding:blockPaddingTop,borderRadius:blockBorderRadius,background:colorChip.gray1,width:chapterWidth,marginRight:blockBetween,flexGrow:0,flexShrink:0,cursor:"pointer",transition:"all 0s ease",overflow:"hidden"},child:{text:s,style:{fontFamily:"pretendard",fontSize:blockContentsSize,fontWeight:600,fontColor:black,textAlign:"left",transition:"all 0s ease"}}},{event:{click:appearInputEvent},style:{diplay:"inline-flex",justifyContent:"center",alignItems:"start",textAlign:"left",padding:blockPaddingTop,paddingLeft:blockPaddingLeft,paddingRight:blockPaddingLeft,borderRadius:blockBorderRadius,background:colorChip.gray1,flexGrow:1,flexShrink:1,cursor:"pointer",transition:"all 0s ease",overflow:"hidden"},child:{text:inputStringArray[index],style:{fontFamily:"pretendard",fontSize:blockContentsSize,fontWeight:400,fontColor:black,textAlign:"left",transition:"all 0s ease"}}}]}),index++},blockRender(rawStringArray)}catch(e){console.log(e),reject(e)}})};fontSelectionBox=()=>{const instance=this,back=this.back,{colorChip,svgMaker:localSvgMaker,binaryPath}=(this.collectionMap,Helper),{withOut,percent,promptPopup,setDomColor,markdownBlocks,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(),fontArr=instance.currentMap.tree.font.map(s=>({id:instance.valueParser("decode",s).id,name:instance.valueParser("decode",s).name}));let whiteTongBase,whiteWidth,whiteTong,grayBox,paddingTop,paddingLeft,paddingBottom,cancelEvent,inputSize,size0,size1,marginLeft,lineHeight,inputBoxHeight,grayBoxBetween,questionWordVisualTopPlus,questionMinusLeft,gap,maxHeightLength,generalCssId,generalCssString,generalFontFaceArr,borderRadius,nameBoxWidth,weightBoxWidth,nameBoxSize,fontGrid,plusWidth,plusMarginLeft,plusTop;return whiteWidth=mediaNumber(750,740,720,560,90),paddingTop=mediaNumber(20,19,18,17,3.5),paddingLeft=mediaNumber(23,22,21,20,3.9),paddingBottom=mediaNumber(23,22,21,20,4.1),inputSize=mediaNumber(15,15,14.5,14.5,3),size0=mediaNumber(15,15,14.5,14,3.1),size1=mediaNumber(16,16,15.5,15,3.4),marginLeft=mediaNumber(15,15,15,15,4.8),lineHeight=1.5,inputBoxHeight=mediaNumber(32,31,30,29,6.5),grayBoxBetween=mediaNumber(6,5,5,5,1.2),questionWordVisualTopPlus=mediaNumber(0,0,0,0,0),questionMinusLeft=mediaNumber(-13.5,-13.5,-13,-12.5,-4.2),gap=mediaNumber(2,2,1.5,1,.5),maxHeightLength=mediaNumber(29,24,21,16,8),borderRadius=mediaNumber(5,5,4,4,1),nameBoxWidth=mediaNumber(120,120,120,120,30),nameBoxSize=mediaNumber(13,13,12,12,3),weightBoxWidth=mediaNumber(70,70,60,56,20),fontGrid=mediaString("1fr 1fr 1fr","1fr 1fr 1fr","1fr 1fr","1fr 1fr","1fr"),plusWidth=mediaNumber(14,13.5,13,12,14.5),plusMarginLeft=mediaNumber(4,4,4,4,4),plusTop=mediaNumber(-.2,-.2,-.1,-0,-.5),generalCssId=instance.currentMap?.tree.style.general,generalCssId=instance.valueParser("decode",generalCssId).id,new Promise((resolve,reject)=>{back.frontRead(instance.collectionString,{_id:generalCssId}).then(docs=>{generalCssString=docs[0].data,generalFontFaceArr=[],generalCssString=generalCssString.split("\n").join(" "),generalCssString.replace(/@font\-face[ ]*\{([^\}]*)\}/gi,(match,p1)=>{const fontInfo={id:"",name:"",file:"",weight:0,load:!1};return p1.replace(/font\-family[ ]*\:[ ]*['"]([^'"]+)['"]/gi,(m,p)=>(fontInfo.name=p,"")),p1.replace(/src[ ]*\:[ ]*url\(([^\)]+)\)/gi,(m,p)=>(fontInfo.file=p.split("/").at(-1),"")),p1.replace(/font\-weight[ ]*\:[ ]*([0-9]+)/gi,(m,p)=>(fontInfo.weight=Number(p.replace(/[^0-9]/gi,"")),"")),generalFontFaceArr.push(fontInfo),""}),generalFontFaceArr=generalFontFaceArr.filter(o=>""!==o.name&&""!==o.file&&!Number.isNaN(o.weight)&&0!==o.weight),generalFontFaceArr=generalFontFaceArr.map(o=>{const obj={...o},target=fontArr.find(k=>k.name===o.file);return void 0===target||(obj.load=!0,obj.id=target.id),obj}).filter(o=>o.load),cancelEvent=()=>e=>{e.preventDefault(),e.stopPropagation();const targets=[...document.querySelectorAll(".fontWhitePopupClassName")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}resolve("")},whiteTongBase=createAbstract({mother:document.body,class:["fontWhitePopupClassName"],event:{drop:e=>{e.stopPropagation()},keyup:e=>{e.stopPropagation()},keydown:e=>{e.stopPropagation()},click:cancelEvent()},style:{display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",top:String(0)+"vh",left:String(1)+"vw",width:String(98)+"vw",height:String(100)+"vh",background:"transparent",zIndex:1200}}),whiteTong=createAbstract({mother:whiteTongBase,event:{click:e=>{e.stopPropagation()}},style:{display:"block",position:"relative",width:String(whiteWidth-2*paddingLeft)+ea,paddingTop:String(paddingTop)+ea,paddingBottom:String(paddingBottom)+ea,paddingLeft:String(paddingLeft)+ea,paddingRight:String(paddingLeft)+ea,borderRadius:String(5)+"px",boxShadow:"0px 3px 15px -9px "+colorExtended.shadow,background:colorExtended.white,animation:"fadeuporiginal 0.5s ease forwards"}}),createAbstract({mother:whiteTong,text:"현재 등록된 폰트 파일 ",style:{position:"relative",marginLeft:String(marginLeft)+ea,fontFamily:"pretendard",fontSize:String(size1)+ea,fontWeight:String(700),color:colorExtended.black,lineHeight:String(1.5),flexDirection:"row",justifyContent:"start",alignItems:"center",cursor:"pointer"},child:{text:">",style:{fontSize:String(size0)+ea,fontWeight:String(400),color:colorChip.mint,position:"absolute",fontFamily:"altertypo",top:String(questionWordVisualTopPlus)+ea,left:String(questionMinusLeft)+ea,lineHeight:String(1.5)}}}),grayBox=createAbstract({mother:whiteTong,style:{left:String(marginLeft)+ea,width:withOut(marginLeft,ea),minHeight:String(inputBoxHeight)+ea,maxHeight:inputBoxHeight*maxHeightLength+gap*(maxHeightLength-1),marginTop:String(grayBoxBetween)+ea,overflow:"scroll"},child:{style:{display:"grid",gridTemplateColumns:fontGrid,gap}}});for(let id of generalFontFaceArr){const thisFontTargets=fontArr.filter(o=>o.name===id.file);id.load&&createAbstract({mother:grayBox.children[0],attribute:{info:JSON.stringify(thisFontTargets),family:id.name,weight:String(id.weight)},event:{click:e=>{const self=e.currentTarget;try{const family=String(self.getAttribute("family")),weight=Number(self.getAttribute("weight"));if(!Number.isNaN(weight)&&""!==family){const targets=[...document.querySelectorAll(".fontWhitePopupClassName")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}resolve(JSON.stringify({family,weight}))}}catch(e){console.log(e)}}},style:{width:withOut(0),height:inputBoxHeight,borderRadius,display:"flex",flexDirection:"row",cursor:"pointer"},children:[{style:{minWidth:nameBoxWidth,height:withOut(0),borderRadius,background:colorChip.mint,display:"inline-flex",justifyContent:"center",alignItems:"center",marginRight:gap,flexGrow:1},child:{text:id.name,style:{fontFamily:"redditmono",fontSize:nameBoxSize,fontWeight:400,color:colorChip.white}}},{style:{width:weightBoxWidth,height:withOut(0),borderRadius,background:colorChip.black,display:"inline-flex",justifyContent:"center",alignItems:"center",flexGrow:0},child:{text:String(id.weight),style:{fontFamily:"redditmono",fontSize:nameBoxSize,fontWeight:400,color:colorChip.white}}}]})}setTimeout(()=>{grayBox.getBoundingClientRect().height<grayBox.children[0].getBoundingClientRect().height&&(grayBox.style.borderBottom="1px solid "+colorChip.mintDark,grayBox.style.paddingBottom=String(2*paddingBottom)+ea)},100)}).catch(e=>{console.log(e),reject(e)})})};pixelToRem=computedCssValue=>{const{colorChip,svgMaker:localSvgMaker,binaryPath}=Helper,{withOut,percent,promptPopup,markdownBlocks,equalJson,ajaxForm,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();try{const rootSizePixel=window.getComputedStyle(window.document.querySelector("html")).fontSize,rootEa="rem",delta=1e4,base=Number(rootSizePixel.replace(/[^0-9\.\-]/gi,""));if(0===base||Number.isNaN(base))throw new Error("invalid root status");let thisValue,isPixel,isRem;if(thisValue=Number(computedCssValue.replace(/[^0-9\.\-]/gi,"")),Number.isNaN(thisValue))throw new Error("it is not number value");if(0===thisValue)return String(0)+rootEa;if(isPixel=/px/gis.test(computedCssValue),isRem=/rem/gis.test(computedCssValue),isRem)return computedCssValue;if(isPixel)return String(Math.floor(thisValue/base*delta)/delta)+rootEa;throw new Error("cannot calculate")}catch(e){throw console.log(e),e}};pixelToRemCalc=(computedNumbers,mode)=>{const instance=this,{colorChip,svgMaker:localSvgMaker,binaryPath}=Helper,{withOut,percent,promptPopup,markdownBlocks,equalJson,ajaxForm,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();try{const targetNumbers=computedNumbers.map(s=>instance.pixelToRem(s)).map(s=>Number(s.replace(/[^0-9\-\.]/gi,""))),rootEa="rem";let finalValue;if(finalValue=0,"+"===mode)finalValue=targetNumbers.reduce((acc,curr)=>acc+curr,0);else if("-"===mode)if(0===targetNumbers.length)finalValue=0;else{finalValue=targetNumbers[0];for(let n of targetNumbers)finalValue-=n}else if("*"===mode)if(0===targetNumbers.length)finalValue=0;else{finalValue=targetNumbers[0];for(let n of targetNumbers)finalValue*=n}else{if("/"!==mode)throw new Error("invalid mode");if(0===targetNumbers.length)finalValue=0;else{finalValue=targetNumbers[0];for(let n of targetNumbers){if(0===n)throw new Error("invalid calc");finalValue/=n}}}return String(finalValue)+rootEa}catch(e){throw console.log(e),e}};marginPaddingBorderBox=(targetMother,popupBase,marginTop,marginRight,marginBottom,marginLeft,paddingTop,paddingRight,paddingBottom,paddingLeft,callback=async mainBox=>{},chainTargets=[],targetShadowIndex=-1)=>{const instance=this,{colorChip,svgMaker:localSvgMaker,binaryPath}=Helper,{withOut,percent,promptPopup,markdownBlocks,equalJson,ajaxForm,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(),{marginPaddingBorderBoxClassName,marginPaddingBorderBoxInputClassName}=this,rootSizePixel=window.getComputedStyle(window.document.querySelector("html")).fontSize,toRem=instance.pixelToRem;return 0!==Number(rootSizePixel.replace(/[^0-9\.\-]/gi,""))&&(/px/gi.test(marginTop)&&(marginTop=toRem(marginTop)),/px/gi.test(marginRight)&&(marginRight=toRem(marginRight)),/px/gi.test(marginBottom)&&(marginBottom=toRem(marginBottom)),/px/gi.test(marginLeft)&&(marginLeft=toRem(marginLeft)),/px/gi.test(paddingTop)&&(paddingTop=toRem(paddingTop)),/px/gi.test(paddingRight)&&(paddingRight=toRem(paddingRight)),/px/gi.test(paddingBottom)&&(paddingBottom=toRem(paddingBottom)),/px/gi.test(paddingLeft)&&(paddingLeft=toRem(paddingLeft))),new Promise((resolve,reject)=>{const valueDictionary={"margin-top":marginTop,"margin-right":marginRight,"margin-bottom":marginBottom,"margin-left":marginLeft,"padding-top":paddingTop,"padding-right":paddingRight,"padding-bottom":paddingBottom,"padding-left":paddingLeft};try{let gap,buttonHeight,groupHeight,buttonSize,groupSize,groupBetween,groupWeight,boldVisualTop,boldVisualRight,boxPaddingTop,buttonWeight,mainBoxHeight,marginDepth,paddingDepth,boxBorderRadius,redditSize,blackBoxSize,borderWidth,marginPaddingFamily,marginPaddingWeight,mainBox,getMainEvent,saveValue,thisId,motherFind,tempTarget,finalMother,motherFindSafeIndex,thisIsChild,depthIndexArray,thisDepthCurrentTarget,thisDepthTempParent;if(gap=mediaNumber(2,2,2,2,.5),buttonHeight=mediaNumber(29,29,29,29,5.6),groupHeight=mediaNumber(28,28,28,28,5.1),buttonSize=mediaNumber(12.5,12.5,12.5,12.5,2.8),groupSize=mediaNumber(12.5,12.5,12.5,12.5,2.8),groupBetween=mediaNumber(3,3,3,3,.2),buttonWeight=600,groupWeight=600,boldVisualTop=mediaNumber(-1,-1,-1,-1,-.1),boldVisualRight=mediaNumber(2,2,2,2,-.5),boxPaddingTop=mediaNumber(2,2.5,2.5,3.5,1),mainBoxHeight=mediaNumber(320,320,320,320,320),marginDepth=mediaNumber(45,45,45,45,40),paddingDepth=mediaNumber(45,45,45,45,40),boxBorderRadius=mediaNumber(5,5,5,5,2),redditSize=mediaNumber(12,12,12,12,3),borderWidth=mediaNumber(3,3,3,3,1),marginPaddingFamily="redditmono",marginPaddingWeight=500,blackBoxSize=mainBoxHeight-2*marginDepth-2*paddingDepth,mainBox=createAbstract({mother:popupBase,style:{display:"none"}}),thisId="",thisIsChild=!1,motherFindSafeIndex=-1,null===targetMother.getAttribute("data-dropid"))for(tempTarget=targetMother,motherFind=!1,motherFindSafeIndex=0,thisIsChild=!0;!(motherFind||motherFindSafeIndex>100);)tempTarget.parentElement?.getAttribute("data-dropid")?(motherFind=!0,finalMother=tempTarget.parentElement,thisId=finalMother.getAttribute("data-dropid")):motherFind=!1,motherFindSafeIndex++;else finalMother=targetMother,thisId=targetMother.getAttribute("data-dropid");if(""===thisId)throw new Error("cannot find id");if(depthIndexArray=[],thisIsChild){thisDepthCurrentTarget=targetMother;for(let i=0;i<motherFindSafeIndex&&(thisDepthTempParent=thisDepthCurrentTarget.parentElement,thisDepthTempParent);i++){const thisI=[...thisDepthTempParent.children].map(d=>d).findIndex(d=>d===thisDepthCurrentTarget);if(thisI<0)break;depthIndexArray.unshift(thisI),thisDepthCurrentTarget=thisDepthTempParent}}popupBase.style.paddingTop=String(boxPaddingTop)+ea,saveValue=(child,position,value)=>{let finalValue;child.children[0].textContent=String(value)+"rem",child.setAttribute("value",String(value)+"rem"),finalValue="",instance.shadowDoms.forEach((d,i)=>{if(-1===targetShadowIndex||i===targetShadowIndex){const thisSelf=d.querySelector(".shadowDomTargetClassName").shadowRoot.querySelector('[data-dropid="'+thisId+'"]');let finalTarget,currentTarget;if(finalTarget=thisSelf,thisIsChild){currentTarget=thisSelf;for(let index of depthIndexArray){const thisChildrenList=[...currentTarget.children].map(d=>d);currentTarget=thisChildrenList[index]}finalTarget=currentTarget}finalTarget.style[position]=String(value)+"rem";for(let additionalDom of chainTargets)additionalDom.style[position]=String(value)+"rem";finalValue=String(value)+"rem"}});try{removeByClass(marginPaddingBorderBoxInputClassName)}catch{}callback(mainBox,/padding/gis.test(position)?"padding":"margin",/\-/gis.test(position)?position.split("-")[1]:"all",finalValue).then(callbackResult=>{"boolean"==typeof callbackResult&&!0===callbackResult&&resolve("end")}).catch(e=>console.log(e))},getMainEvent=()=>async e=>{try{const self=e.currentTarget,thisFirstChild=self.children[0],position=self.mustAttribute("position"),value=self.mustAttribute("value"),ready="true"===self.mustAttribute("ready"),isBottom=/bottom/gi.test(position);let input;ready&&(thisFirstChild.textContent="",input=createAbstract({mother:self,class:[marginPaddingBorderBoxInputClassName],event:{click:e=>{e.preventDefault(),e.stopPropagation()}},style:{position:"absolute",top:0,left:0,width:withOut(0),height:withOut(0),justifyContent:"center",alignItems:"center"},child:{mode:"input",attribute:{type:"text"},event:{click:e=>{e.preventDefault(),e.stopPropagation()},keydown:e=>{"Enter"!==e.key&&"ender"!==e.key||e.preventDefault()},keyup:e=>{const s=e.currentTarget;if("Enter"===e.key||"ender"===e.key){e.preventDefault();try{const finalValue=Number(s.value.trim().replace(/[^0-9\-\.]/gi,""));if(Number.isNaN(finalValue)||""===s.value.trim().replace(/[^0-9\-\.]/gi,""))throw new Error("not number");saveValue(self,position,finalValue)}catch(err){reject(err)}}},blur:e=>{const s=e.currentTarget;try{const finalValue=Number(s.value.trim().replace(/[^0-9\-\.]/gi,""));if(Number.isNaN(finalValue)||""===s.value.trim().replace(/[^0-9\-\.]/gi,""))throw new Error("not number");saveValue(self,position,finalValue)}catch(err){reject(err)}}},style:{border:0,outline:0,background:colorChip.transparent,fontFamily:marginPaddingFamily,fontSize:redditSize,fontWeight:marginPaddingWeight,fontColor:window.getComputedStyle(thisFirstChild).color?window.getComputedStyle(thisFirstChild).color:colorChip.mint,textAlign:"center",transformOrigin:"50% 50%",top:isBottom?.5:-.5,transform:isBottom?"rotate(180deg)":""}}}).children[0],input.value=value,input.focus(),self.children[0].textContent="")}catch(err){reject(err)}},createAbstract({mother:popupBase,style:{display:"flex",justifyContent:"end",alignItems:"start",flexDirection:"column",height:groupHeight,width:withOut(0),marginBottom:groupBetween},child:{text:"<b%>%b> 여백을 조정해 주세요!",style:{display:"inline",position:"relative",fontSize:groupSize,fontWeight:groupWeight,color:colorChip.darkDarkBlack,fontFamily:"pretendard"},bold:{display:"inline",position:"relative",fontSize:groupSize,fontWeight:400,color:colorChip.mint,top:String(boldVisualTop)+ea,marginRight:String(boldVisualRight)+ea}}}),mainBox.remove(),mainBox=createAbstract({mother:popupBase,style:{width:withOut(2*marginDepth),height:mainBoxHeight-2*marginDepth,borderRadius:boxBorderRadius,background:gradientCss(colorChip.mint,colorChip.mint,.2,.1),justifyContent:"center","backdrop-filter":"blur(4px)",alignItems:"center",padding:marginDepth},children:[{style:{position:"absolute",top:0,left:paddingDepth,width:withOut(2*paddingDepth),height:paddingDepth,justifyContent:"center",alignItems:"center",borderRight:"1px dashed "+colorChip.mint,borderLeft:"1px dashed "+colorChip.mint,boxSizing:"border-box"},child:{style:{position:"relative",width:withOut(0),height:withOut(0),justifyContent:"center",alignItems:"center"},class:[marginPaddingBorderBoxClassName,marginPaddingBorderBoxClassName+"_margin-top"],attribute:{position:"margin-top",value:marginTop,ready:"false"},event:{click:getMainEvent(),selectstart:e=>e.preventDefault()},child:{event:{selectstart:e=>e.preventDefault()},text:"margin-top",style:{fontFamily:marginPaddingFamily,fontSize:redditSize,fontWeight:marginPaddingWeight,fontColor:colorChip.mint,opacity:1}}}},{style:{position:"absolute",top:0,left:paddingDepth,width:withOut(2*paddingDepth),height:paddingDepth,transformOrigin:"50% 100%",justifyContent:"center",alignItems:"center",transform:"rotate(90deg) translate("+pixelUnit(1*(blackBoxSize/2+marginDepth))+", "+pixelUnit(-1*(blackBoxSize/2+marginDepth))+")",borderRight:"1px dashed "+colorChip.mint,borderLeft:"1px dashed "+colorChip.mint,boxSizing:"border-box"},class:[marginPaddingBorderBoxClassName,marginPaddingBorderBoxClassName+"_margin-right"],attribute:{position:"margin-right",value:valueDictionary["margin-right"],ready:"false"},event:{click:getMainEvent(),selectstart:e=>e.preventDefault()},child:{event:{selectstart:e=>e.preventDefault()},text:"margin-right",style:{fontFamily:marginPaddingFamily,fontSize:redditSize,fontWeight:marginPaddingWeight,fontColor:colorChip.mint,opacity:1}}},{style:{position:"absolute",top:0,left:paddingDepth,width:withOut(2*paddingDepth),height:paddingDepth,transformOrigin:"50% 100%",justifyContent:"center",alignItems:"center",transform:"rotate(180deg) translate("+pixelUnit(0*(blackBoxSize/2+marginDepth))+", "+pixelUnit(-2*(blackBoxSize/2+marginDepth))+")",borderRight:"1px dashed "+colorChip.mint,borderLeft:"1px dashed "+colorChip.mint,boxSizing:"border-box"},class:[marginPaddingBorderBoxClassName,marginPaddingBorderBoxClassName+"_margin-bottom"],attribute:{position:"margin-bottom",value:marginBottom,ready:"false"},event:{click:getMainEvent(),selectstart:e=>e.preventDefault()},child:{event:{selectstart:e=>e.preventDefault()},text:"margin-bottom",style:{fontFamily:marginPaddingFamily,fontSize:redditSize,fontWeight:marginPaddingWeight,fontColor:colorChip.mint,opacity:1}}},{style:{position:"absolute",top:0,left:paddingDepth,width:withOut(2*paddingDepth),height:paddingDepth,transformOrigin:"50% 100%",justifyContent:"center",alignItems:"center",transform:"rotate(-90deg) translate("+pixelUnit(-1*(blackBoxSize/2+marginDepth))+", "+pixelUnit(-1*(blackBoxSize/2+marginDepth))+")",borderRight:"1px dashed "+colorChip.mint,borderLeft:"1px dashed "+colorChip.mint,boxSizing:"border-box"},class:[marginPaddingBorderBoxClassName,marginPaddingBorderBoxClassName+"_margin-left"],attribute:{position:"margin-left",value:valueDictionary["margin-left"],ready:"false"},event:{click:getMainEvent(),selectstart:e=>e.preventDefault()},child:{event:{selectstart:e=>e.preventDefault()},text:"margin-left",style:{fontFamily:marginPaddingFamily,fontSize:redditSize,fontWeight:marginPaddingWeight,fontColor:colorChip.mint,opacity:1}}},{style:{width:withOut(0),height:withOut(0),background:gradientCss(colorChip.mint,colorChip.mint,.7,.6),justifyContent:"center","backdrop-filter":"blur(5px)",alignItems:"center",padding:paddingDepth,borderRadius:boxBorderRadius,border:String(borderWidth)+"px solid "+colorChip.mint,boxSizing:"border-box"},children:[{style:{position:"absolute",top:0,left:paddingDepth,width:withOut(2*paddingDepth),height:paddingDepth,justifyContent:"center",alignItems:"center",borderRight:"1px dashed "+colorChip.white,borderLeft:"1px dashed "+colorChip.white,boxSizing:"border-box"},class:[marginPaddingBorderBoxClassName,marginPaddingBorderBoxClassName+"_padding-top"],attribute:{position:"padding-top",value:paddingTop,ready:"false"},event:{click:getMainEvent(),selectstart:e=>e.preventDefault()},child:{event:{selectstart:e=>e.preventDefault()},text:"padding-top",style:{fontFamily:marginPaddingFamily,fontSize:redditSize,fontWeight:marginPaddingWeight,fontColor:colorChip.white,opacity:1}}},{style:{position:"absolute",top:0,left:paddingDepth,width:withOut(2*paddingDepth),height:paddingDepth,transformOrigin:"50% 100%",justifyContent:"center",alignItems:"center",transform:"rotate(90deg) translate("+pixelUnit(1*(blackBoxSize/2-1*borderWidth))+", "+pixelUnit(-1*(blackBoxSize/2-1*borderWidth))+")",borderRight:"1px dashed "+colorChip.white,borderLeft:"1px dashed "+colorChip.white,boxSizing:"border-box"},class:[marginPaddingBorderBoxClassName,marginPaddingBorderBoxClassName+"_padding-right"],attribute:{position:"padding-right",value:valueDictionary["padding-right"],ready:"false"},event:{click:getMainEvent(),selectstart:e=>e.preventDefault()},child:{event:{selectstart:e=>e.preventDefault()},text:"padding-right",style:{fontFamily:marginPaddingFamily,fontSize:redditSize,fontWeight:marginPaddingWeight,fontColor:colorChip.white,opacity:1}}},{style:{position:"absolute",top:0,left:paddingDepth,width:withOut(2*paddingDepth),height:paddingDepth,transformOrigin:"50% 100%",justifyContent:"center",alignItems:"center",transform:"rotate(180deg) translate("+pixelUnit(0*(blackBoxSize/2-1*borderWidth))+", "+pixelUnit(-2*(blackBoxSize/2-1*borderWidth))+")",borderRight:"1px dashed "+colorChip.white,borderLeft:"1px dashed "+colorChip.white,boxSizing:"border-box"},class:[marginPaddingBorderBoxClassName,marginPaddingBorderBoxClassName+"_padding-bottom"],attribute:{position:"padding-bottom",value:paddingBottom,ready:"false"},event:{click:getMainEvent(),selectstart:e=>e.preventDefault()},child:{event:{selectstart:e=>e.preventDefault()},text:"padding-bottom",style:{fontFamily:marginPaddingFamily,fontSize:redditSize,fontWeight:marginPaddingWeight,fontColor:colorChip.white,opacity:1}}},{style:{position:"absolute",top:0,left:paddingDepth,width:withOut(2*paddingDepth),height:paddingDepth,transformOrigin:"50% 100%",justifyContent:"center",alignItems:"center",transform:"rotate(-90deg) translate("+pixelUnit(-1*(blackBoxSize/2-1*borderWidth))+", "+pixelUnit(-1*(blackBoxSize/2-1*borderWidth))+")",borderRight:"1px dashed "+colorChip.white,borderLeft:"1px dashed "+colorChip.white,boxSizing:"border-box"},class:[marginPaddingBorderBoxClassName,marginPaddingBorderBoxClassName+"_padding-left"],attribute:{position:"padding-left",value:valueDictionary["padding-left"],ready:"false"},event:{click:getMainEvent(),selectstart:e=>e.preventDefault()},child:{event:{selectstart:e=>e.preventDefault()},text:"padding-left",style:{fontFamily:marginPaddingFamily,fontSize:redditSize,fontWeight:marginPaddingWeight,fontColor:colorChip.white,opacity:1}}},{style:{width:withOut(0),height:withOut(0),background:gradientCss(colorChip.darkDarkBlack,colorChip.darkDarkBlack,.95,.95),justifyContent:"center","backdrop-filter":"blur(8px)",alignItems:"center",borderRadius:boxBorderRadius},children:[{text:"contents",style:{fontFamily:"redditmono",fontSize:redditSize,fontWeight:400,fontColor:colorChip.white}}]}]}]}),setTimeout(async()=>{const targets=selectByClass(marginPaddingBorderBoxClassName);for(let t of targets)t.firstChild.style.animation="marginPaddingBorderBoxClassName_animation 0.4s ease forwards";await sleep(401);for(let t of targets)t.firstChild.textContent=String(valueDictionary[String(t.getAttribute("position"))]);for(let t of targets)t.firstChild.style.animation="marginPaddingBorderBoxClassName_animation_out 0.4s ease forwards",t.setAttribute("ready","true")},500)}catch(err){reject(err)}})};textParagraphContextmenu=(targetMother,popupBase,mode,fontSize,fontWeight,fontFamily,textAlign,verticalAlign,textIndent,lineHeight,letterSpacing,wordSpacing,callback=async mainBox=>{})=>{const instance=this,{colorChip,svgMaker:localSvgMaker,binaryPath}=Helper,{withOut,percent,promptPopup,markdownBlocks,equalJson,ajaxForm,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(),computedStyle=window.getComputedStyle(window.document.querySelector("html")),rootSizePixel=computedStyle.fontSize,toRem=targetValue=>{const base=Number(rootSizePixel.replace(/[^0-9\.\-]/gi,""));if(0===base||Number.isNaN(base))throw new Error("invalid root status");const thisValue=Number(targetValue.replace(/[^0-9\.\-]/gi,""));return String(Math.floor(thisValue/base*1e4)/1e4)+"rem"};return 0!==Number(rootSizePixel.replace(/[^0-9\.\-]/gi,""))&&(/px/gi.test(fontSize)&&(lineHeight=String(Math.floor(Number(lineHeight.replace(/[^0-9\.\-]/gi,""))/Number(fontSize.replace(/[^0-9\.\-]/gi,""))*1e3)/1e3),fontSize=toRem(fontSize)),/px/gi.test(fontWeight)&&(fontWeight=toRem(fontWeight)),/px/gi.test(textIndent)&&(textIndent=toRem(textIndent)),/px/gi.test(letterSpacing)&&(letterSpacing=toRem(letterSpacing)),/normal/gi.test(letterSpacing)&&(letterSpacing=String(0)+"rem"),/px/gi.test(wordSpacing)&&(wordSpacing=toRem(wordSpacing)),/normal/gi.test(wordSpacing)&&(wordSpacing=String(0)+"rem"),/normal/gi.test(lineHeight)&&(lineHeight=String(1.7))),new Promise((resolve,reject)=>{const valueDictionary={"font-size":{name:"폰트 크기",value:fontSize,select:!1,chain:"",click:e=>new Promise((resolve,reject)=>{const s=e.currentTarget,finalValue=Number(s.value.trim().replace(/[^0-9\-\.]/gi,""));(Number.isNaN(finalValue)||""===s.value.trim().replace(/[^0-9\-\.]/gi,""))&&reject("not number"),resolve(String(finalValue)+"rem")})},"font-weight":{name:"폰트 두께",value:fontWeight,select:!0,chain:"font-family",click:e=>new Promise((resolve,reject)=>{instance.fontSelectionBox().then(s=>{try{const result=JSON.parse(s);resolve(JSON.stringify([String(result.weight),String(result.family)]))}catch(e){reject(e)}}).catch(e=>reject(e))})},"font-family":{name:"폰트 종류",value:fontFamily,select:!0,chain:"font-weight",click:e=>new Promise((resolve,reject)=>{instance.fontSelectionBox().then(s=>{try{const result=JSON.parse(s);resolve(JSON.stringify([String(result.family),String(result.weight)]))}catch(e){reject(e)}}).catch(e=>reject(e))})},"text-align":{name:"정렬 방식",value:textAlign,select:!0,chain:"",click:e=>new Promise((resolve,reject)=>{promptPopup("정렬 방식을 골라주세요!","select","left$right$center$justify").then(v=>{if("string"!=typeof v)throw new Error("not string");resolve(v)}).catch(e=>{})})},"vertical-align":{name:"수직 정렬",value:verticalAlign,select:!0,chain:"",click:e=>new Promise((resolve,reject)=>{promptPopup("정렬 방식을 골라주세요!","select","baseline$middle$top$bottom").then(v=>{if("string"!=typeof v)throw new Error("not string");resolve(v)}).catch(e=>{})})},"text-indent":{name:"들여쓰기",value:textIndent,select:!1,chain:"",click:e=>new Promise((resolve,reject)=>{const s=e.currentTarget,finalValue=Number(s.value.trim().replace(/[^0-9\-\.]/gi,""));(Number.isNaN(finalValue)||""===s.value.trim().replace(/[^0-9\-\.]/gi,""))&&reject("not number"),resolve(String(finalValue)+"rem")})},"line-height":{name:"행간",value:lineHeight,select:!1,chain:"",click:e=>new Promise((resolve,reject)=>{const s=e.currentTarget,finalValue=Number(s.value.trim().replace(/[^0-9\-\.]/gi,""));(Number.isNaN(finalValue)||""===s.value.trim().replace(/[^0-9\-\.]/gi,""))&&reject("not number"),resolve(String(finalValue))})},"letter-spacing":{name:"자간",value:letterSpacing,select:!1,chain:"",click:e=>new Promise((resolve,reject)=>{const s=e.currentTarget,finalValue=Number(s.value.trim().replace(/[^0-9\-\.]/gi,""));(Number.isNaN(finalValue)||""===s.value.trim().replace(/[^0-9\-\.]/gi,""))&&reject("not number"),resolve(String(finalValue)+"rem")})},"word-spacing":{name:"글자 간격",value:wordSpacing,select:!1,chain:"",click:e=>new Promise((resolve,reject)=>{const s=e.currentTarget,finalValue=Number(s.value.trim().replace(/[^0-9\-\.]/gi,""));(Number.isNaN(finalValue)||""===s.value.trim().replace(/[^0-9\-\.]/gi,""))&&reject("not number"),resolve(String(finalValue)+"rem")})}};try{const thisTextArea=targetMother.querySelector("article");let gap,buttonHeight,groupHeight,buttonSize,groupSize,groupBetween,groupWeight,boldVisualTop,boldVisualRight,boxPaddingTop,buttonWeight,mainBoxHeight,boxBorderRadius,mainBox,leftBox,rightBox,leftPropertyBoxWidth,thisId,thisDom,safeNumber,thisPIndex,loopTargets;for(gap=mediaNumber(2,2,2,2,.5),buttonHeight=mediaNumber(29,29,29,29,5.6),groupHeight=mediaNumber(28,28,28,28,5.1),buttonSize=mediaNumber(12.5,12.5,12.5,12.5,2.8),groupSize=mediaNumber(12.5,12.5,12.5,12.5,2.8),groupBetween=mediaNumber(4,4,4,3,.2),buttonWeight=600,groupWeight=600,boldVisualTop=mediaNumber(-1,-1,-1,-1,-.1),boldVisualRight=mediaNumber(2,2,2,2,-.5),boxPaddingTop=mediaNumber(2,2.5,2.5,3.5,1),mainBoxHeight=mediaNumber(320,320,320,320,320),boxBorderRadius=mediaNumber(5,5,5,5,2),leftPropertyBoxWidth=desktop?100:12,thisDom=targetMother,thisId=null,thisPIndex=Number(targetMother.getAttribute("data-pindex")),safeNumber=0;null===thisId&&(thisId=thisDom.getAttribute("data-dropid"),null===thisId&&null!==thisDom.parentElement&&(thisDom=thisDom.parentElement,thisId=thisDom.getAttribute("data-dropid")),!(safeNumber>10));)safeNumber++;loopTargets="spacing"===mode?["line-height","letter-spacing","word-spacing","font-size"]:"align"===mode?["text-align","vertical-align","text-indent"]:["font-size","font-weight","font-family","line-height"],popupBase.style.paddingTop=String(boxPaddingTop)+ea,createAbstract({mother:popupBase,style:{display:"flex",justifyContent:"end",alignItems:"start",flexDirection:"column",height:groupHeight,width:withOut(0),marginBottom:groupBetween},child:{text:"<b%>%b> 폰트 설정을 조정해 주세요!",style:{display:"inline",position:"relative",fontSize:groupSize,fontWeight:groupWeight,color:colorChip.darkDarkBlack,fontFamily:"pretendard"},bold:{display:"inline",position:"relative",fontSize:groupSize,fontWeight:400,color:colorChip.mint,top:String(boldVisualTop)+ea,marginRight:String(boldVisualRight)+ea}}}),mainBox=createAbstract({mother:popupBase,style:{width:withOut(0),justifyContent:"center",alignItems:"center",flexDirection:"row"}}),leftBox=createAbstract({mother:mainBox,style:{width:leftPropertyBoxWidth,marginRight:gap,display:"inline-grid",gap,gridTemplateColumns:"1fr"}}),rightBox=createAbstract({mother:mainBox,style:{width:withOut(leftPropertyBoxWidth+gap),marginRight:gap,display:"inline-grid",gap,gridTemplateColumns:"1fr"}});for(let property of loopTargets)createAbstract({mother:leftBox,style:{display:"flex",justifyContent:"center",alignItems:"center",height:buttonHeight,borderRadius:desktop?3:.5,background:gradientCss(colorChip.mint,colorChip.mint,.9,.85),cursor:"pointer",transition:"all 0.3s ease"},child:{text:valueDictionary[property].name,event:{selectstart:e=>e.preventDefault()},style:{fontSize:buttonSize,fontWeight:buttonWeight,color:colorChip.white,fontFamily:"pretendard"}}}),createAbstract({mother:rightBox,attribute:{property,value:valueDictionary[property].value},event:{click:async e=>{const self=e.currentTarget,property=self.mustAttribute("property"),value=self.mustAttribute("value"),thisFirstChild=self.children[0],eventFunction=valueDictionary[property].click,selectMode=Boolean(valueDictionary[property].select);let saveValue,input;saveValue=(child,rootPosition,rootValue)=>{const applyValue=(position,value)=>{const targetInput=[...child.parentElement.children].find(d=>d.getAttribute("property")===position);targetInput.firstChild.textContent=value,targetInput.setAttribute("value",value),"string"==typeof thisId&&instance.shadowDoms.forEach(d=>{try{const host=d.querySelector(".shadowDomTargetClassName"),thisTarget=host.shadowRoot.querySelector('[data-dropid="'+thisId+'"]');let finalTarget;if(finalTarget=null,instance.editorTargetTagNames.includes(thisTarget.nodeName))finalTarget=thisTarget;else{const[pTarget]=[...thisTarget.querySelectorAll([...new Set(instance.editorTargetTagNames.map(s=>s.toLowerCase()))].join(", "))].filter(d=>d.getAttribute("data-pindex")===String(thisPIndex));pTarget&&(finalTarget=pTarget)}null!==finalTarget&&(finalTarget.style[position]=value),null!==thisTextArea&&(thisTextArea.style[position]=value)}catch(e){console.log(e)}})};if(""===valueDictionary[property].chain||void 0===valueDictionary[property].chain||null===valueDictionary[property].chain||"string"!=typeof valueDictionary[property].chain)applyValue(rootPosition,rootValue);else if("string"==typeof valueDictionary[property].chain)try{const valueArray=JSON.parse(rootValue);if(2!==valueArray.length)throw new Error("invalid value array");const chainTarget=[[rootPosition,valueArray[0]],[valueDictionary[property].chain,valueArray[1]]];for(let[p,v]of chainTarget)applyValue(p,v)}catch{}else if(Array.isArray(valueDictionary[property].chain))try{const valueArray=JSON.parse(rootValue);if(0===valueArray.length)throw new Error("invalid value array");const chainTarget=[[rootPosition,valueArray[0]]].concat(valueArray.slice(1).map((s,i)=>[valueDictionary[property].chain[i],s]));for(let[p,v]of chainTarget)applyValue(p,v)}catch{}try{removeByClass("tempPopupInputTargetClassName")}catch{}callback(mainBox).then(()=>{resolve("done")}).catch(e=>console.log(e))},selectMode?eventFunction(e).then(result=>{saveValue(self,property,result)}).catch(err=>{}):(thisFirstChild.textContent="",input=createAbstract({mother:self,class:["tempPopupInputTargetClassName"],event:{click:e=>{e.preventDefault(),e.stopPropagation()}},style:{position:"absolute",top:0,left:0,width:withOut(0),height:withOut(0),justifyContent:"center",alignItems:"center"},child:{mode:"input",attribute:{type:"text"},event:{click:e=>{e.preventDefault(),e.stopPropagation()},keydown:e=>{"Enter"!==e.key&&"ender"!==e.key||e.preventDefault()},keyup:e=>{if("Enter"===e.key||"ender"===e.key){e.preventDefault();try{eventFunction(e).then(result=>{saveValue(self,property,result)}).catch(err=>console.log(err))}catch(err){reject(err)}}},blur:e=>{try{eventFunction(e).then(result=>{saveValue(self,property,result)}).catch(err=>console.log(err))}catch(err){reject(err)}}},style:{border:0,outline:0,background:colorChip.transparent,fontSize:buttonSize,fontWeight:400,fontColor:colorChip.darkDarkBlack,fontFamily:"pretendard",textAlign:"center",top:-.5}}}).children[0],input.value=value,input.focus(),self.children[0].textContent="")}},style:{display:"flex",justifyContent:"center",alignItems:"center",height:buttonHeight,borderRadius:desktop?3:.5,background:gradientCss(colorChip.gray0,colorChip.gray1,.95,.8),cursor:"pointer",transition:"all 0.3s ease"},child:{text:valueDictionary[property].value,event:{selectstart:e=>e.preventDefault()},style:{fontSize:buttonSize,fontWeight:400,fontColor:colorChip.darkDarkBlack,fontFamily:"pretendard"}}})}catch(err){reject(err)}})};mediaInPreview=(thisKind,originalCssString)=>{const instance=this;let result;return result=originalCssString=/mobile/gi.test(thisKind)?(originalCssString=(originalCssString=(originalCssString=(originalCssString=originalCssString.replace(new RegExp("max-width:(\\s*)"+String(instance.standardPoint[0])+"rem","gis"),(match,p1)=>instance.ghostMediaConditionInit+p1+instance.ghostMediaTrueConditionSmallMax)).replace(new RegExp("\\(min-width:(\\s*)"+String(instance.standardPoint[0])+"rem\\)\\s+and\\s+\\(max-width:\\s*"+String(instance.standardPoint[1])+"rem\\s*\\)","gis"),(match,p1)=>"("+instance.ghostMediaConditionInit+p1+instance.ghostMediaFalseConditionSmallMin+") and ("+instance.ghostMediaConditionInit+p1+instance.ghostMediaFalseConditionBigMax+")")).replace(new RegExp("min-width:(\\s*)"+String(instance.standardPoint[0])+"rem\\s+and\\s+max-width:\\s*"+String(instance.standardPoint[1])+"rem\\s*","gis"),(match,p1)=>instance.ghostMediaConditionInit+p1+instance.ghostMediaFalseConditionSmallMin+" and "+instance.ghostMediaConditionInit+p1+instance.ghostMediaFalseConditionBigMax)).replace(new RegExp("min-width:(\\s*)"+String(instance.standardPoint[0])+"rem","gis"),(match,p1)=>instance.ghostMediaConditionInit+p1+instance.ghostMediaFalseConditionSmallMin)).replace(new RegExp("min-width:(\\s*)"+String(instance.standardPoint[1])+"rem","gis"),(match,p1)=>instance.ghostMediaConditionInit+p1+instance.ghostMediaFalseConditionBigMin):/tablet/gi.test(thisKind)&&"bigTablet"!==thisKind?(originalCssString=(originalCssString=(originalCssString=(originalCssString=originalCssString.replace(new RegExp("max-width:(\\s*)"+String(instance.standardPoint[0])+"rem","gis"),(match,p1)=>instance.ghostMediaConditionInit+p1+instance.ghostMediaFalseConditionSmallMax)).replace(new RegExp("\\(min-width:(\\s*)"+String(instance.standardPoint[0])+"rem\\)\\s+and\\s+\\(max-width:\\s*"+String(instance.standardPoint[1])+"rem\\s*\\)","gis"),(match,p1)=>"("+instance.ghostMediaConditionInit+p1+instance.ghostMediaTrueConditionSmallMin+") and ("+instance.ghostMediaConditionInit+p1+instance.ghostMediaTrueConditionBigMax+")")).replace(new RegExp("min-width:(\\s*)"+String(instance.standardPoint[0])+"rem\\s+and\\s+max-width:\\s*"+String(instance.standardPoint[1])+"rem\\s*","gis"),(match,p1)=>instance.ghostMediaConditionInit+p1+instance.ghostMediaTrueConditionSmallMin+" and "+instance.ghostMediaConditionInit+p1+instance.ghostMediaTrueConditionBigMax)).replace(new RegExp("min-width:(\\s*)"+String(instance.standardPoint[0])+"rem","gis"),(match,p1)=>instance.ghostMediaConditionInit+p1+instance.ghostMediaTrueConditionSmallMin)).replace(new RegExp("min-width:(\\s*)"+String(instance.standardPoint[1])+"rem","gis"),(match,p1)=>instance.ghostMediaConditionInit+p1+instance.ghostMediaFalseConditionBigMin):(originalCssString=(originalCssString=(originalCssString=(originalCssString=originalCssString.replace(new RegExp("max-width:(\\s*)"+String(instance.standardPoint[0])+"rem","gis"),(match,p1)=>instance.ghostMediaConditionInit+p1+instance.ghostMediaFalseConditionSmallMax)).replace(new RegExp("\\(min-width:(\\s*)"+String(instance.standardPoint[0])+"rem\\)\\s+and\\s+\\(max-width:\\s*"+String(instance.standardPoint[1])+"rem\\s*\\)","gis"),(match,p1)=>"("+instance.ghostMediaConditionInit+p1+instance.ghostMediaFalseConditionSmallMin+") and ("+instance.ghostMediaConditionInit+p1+instance.ghostMediaFalseConditionBigMax+")")).replace(new RegExp("min-width:(\\s*)"+String(instance.standardPoint[0])+"rem\\s+and\\s+max-width:\\s*"+String(instance.standardPoint[1])+"rem\\s*","gis"),(match,p1)=>instance.ghostMediaConditionInit+p1+instance.ghostMediaFalseConditionSmallMin+" and "+instance.ghostMediaConditionInit+p1+instance.ghostMediaFalseConditionBigMax)).replace(new RegExp("min-width:(\\s*)"+String(instance.standardPoint[0])+"rem","gis"),(match,p1)=>instance.ghostMediaConditionInit+p1+instance.ghostMediaFalseConditionSmallMin)).replace(new RegExp("min-width:(\\s*)"+String(instance.standardPoint[1])+"rem","gis"),(match,p1)=>instance.ghostMediaConditionInit+p1+instance.ghostMediaTrueConditionBigMin),result};getCurrentHtml=async(zipMode=!0)=>{const instance=this,back=this.back,{standardWidth}=this,{colorChip,svgMaker:localSvgMaker,binaryPath}=Helper,{withOut,percent,blankHref,ajaxFormStream,hangulToEnglish,getUserPhone,downloadBlob,markdownBlocks,equalJson,ajaxForm,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();try{const loading=instance.grayLoading(),thisMap=instance.currentMap,thisFileName="project.zip";let generalCss,generalCssString,imageDocuments,fontDocuments,imageResources,fontResources,thisTargetFontFamilyName,thisTargetFontWeight,thisTargetFontSource,inputArr,zipBlob,tempFolder,form,streamChunk,textDocuments,userPhone,now,yearMonthString,thisProjectTitle,addScriptString,tongMargin,additionHeight,contextList,standard;additionHeight=mediaNumber(100,90,80,80,70),tongMargin=mediaNumber(48,40,36,32,5.2),standard=standardWidth-2*tongMargin,mobile&&(standard*=window.innerWidth/100),addScriptString=`\n        <script>\n        const widthStandard = ${String(standard)} > window.innerWidth ? window.innerWidth : ${String(standard)};\n        window.addEventListener("load", () => {\n          if (widthStandard > 100) {\n            window.document.body.style.width = String(widthStandard) + "px";\n          }\n          window.parent.postMessage(String(document.body.scrollHeight + ${String(additionHeight)}), "*");\n          window.document.body.style.width = "";\n          setTimeout(() => {\n            if (widthStandard > 100) {\n              window.document.body.style.width = String(widthStandard) + "px";\n            }\n            window.parent.postMessage(String(document.body.scrollHeight + ${String(additionHeight)}), "*");\n            window.document.body.style.width = "";\n          }, 200);\n          setTimeout(() => {\n            if (widthStandard > 100) {\n              window.document.body.style.width = String(widthStandard) + "px";\n            }\n            window.parent.postMessage(String(document.body.scrollHeight + ${String(additionHeight)}), "*");\n            window.document.body.style.width = "";\n          }, 500);\n          setTimeout(() => {\n            if (widthStandard > 100) {\n              window.document.body.style.width = String(widthStandard) + "px";\n            }\n            window.parent.postMessage(String(document.body.scrollHeight + ${String(additionHeight)}), "*");\n            window.document.body.style.width = "";\n          }, 1000);\n        });\n        <\/script></body>`,userPhone=await getUserPhone(),userPhone=userPhone.replace(/[^0-9]/gi,""),now=new Date,yearMonthString=`${String(now.getFullYear())}${String(now.getMonth()+1)}`,thisProjectTitle=hangulToEnglish(instance.currentMap.title,!1).replace(/[^a-zA-Z0-9]/gis,"").toLowerCase(),tempFolder="abstract_docs_"+userPhone+"_"+yearMonthString+"_"+thisProjectTitle,[generalCss]=await back.frontRead(instance.collectionString,{_id:instance.valueParser("decode",thisMap.tree.style.general).id}),generalCssString=generalCss.data,textDocuments=await back.frontRead(instance.collectionString,{projectId:instance.currentId}),imageDocuments=await back.frontRead(instance.collectionBlob,{projectId:instance.currentId,key:"blob"}),fontDocuments=await back.frontRead(instance.collectionBlob,{projectId:instance.currentId,key:"font"}),imageResources=[],fontResources=[];for(let b of imageDocuments)imageResources.push({fileName:b.fileName,data:b.data});for(let b of fontDocuments)thisTargetFontFamilyName="",thisTargetFontWeight="400",thisTargetFontSource="",generalCssString.split("\n").join("").replace(/@font\-face\s*\{([^\}]+)\}/gi,(match,p1)=>(new RegExp(b.fileName,"g").test(p1)&&(p1.replace(/font\-family\:\s*[\'\"]([^\'\"]+)[\"\']/gi,(m,p)=>(thisTargetFontFamilyName=p,m)),p1.replace(/font\-weight\:\s*([0-9]+)/gi,(mz,pz)=>(thisTargetFontWeight=pz.replace(/[^0-9]/gi,""),mz)),p1.replace(/src\:\s*url\s*\(['"]?([^'"\)]+)['"]?\)/gi,(mk,pk)=>(thisTargetFontSource=pk,mk))),match)),fontResources.push({fileName:thisTargetFontFamilyName,format:/\.ttf$/gi.test(b.fileName)?"truetype":/\.woff2$/gi.test(b.fileName)?"font-woff2":/\.woff$/gi.test(b.fileName)?"font-woff":"opentype",data:b.data,weight:Number(thisTargetFontWeight),source:thisTargetFontSource});contextList=[],inputArr=[];for(let obj of fontResources)inputArr.push({path:obj.source.replace(/^\.\.\//,"/"),data:obj.data});for(let obj of imageResources)inputArr.push({path:"/Images/"+obj.fileName,data:obj.data});for(let obj of textDocuments){const thisPath=obj.absolute.replace(/^OEBPS/gi,"");/nav\.xhtml/gi.test(thisPath)&&obj.data.replace(/<li>\s*<a([^>]+)>([^<]+)<\/a><\/li>/gis,(match,p1,p2)=>(/epub\:type/gi.test(p1)||/\.xhtml/gi.test(p1)&&(/['"]nav\.xhtml/gi.test(p1)||contextList.push(p2.trim())),match));const thisHtmlData=obj.data.replace(/<\/body>/gi,addScriptString);inputArr.push({path:thisPath,data:thisHtmlData})}zipBlob=await Zip.zipFile(inputArr,!1),form=new FormData,form.append("file"+String(0),zipBlob),form.append("names",JSON.stringify(["/"+tempFolder+"/"+thisFileName])),streamChunk="",await ajaxFormStream(form,"/generalFileUpload",null,chunk=>{streamChunk+=String(chunk)});try{const absolute=JSON.parse(streamChunk.trim()).files[0],{url}=await ajaxJson({absolute,htmlMode:1},"/unzipFile"),{key}=await ajaxJson({url,context:contextList},"/hostingLinkSave");blankHref(window.location.protocol+"//"+window.location.host+"/preview/"+key.replace(/^\//gi,""))}catch(e){console.log(e)}loading.remove()}catch(e){console.log(e)}}}let rangeFrom=[],rangeTo=[];function isExtendingChar(code){if(code<768)return!1;for(let from=0,to=rangeFrom.length;;){let mid=from+to>>1;if(code<rangeFrom[mid])to=mid;else{if(!(code>=rangeTo[mid]))return!0;from=mid+1}if(from==to)return!1}}function isRegionalIndicator(code){return code>=127462&&code<=127487}(()=>{let numbers="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(s=>s?parseInt(s,36):1);for(let i=0,n=0;i<numbers.length;i++)(i%2?rangeTo:rangeFrom).push(n+=numbers[i])})();function src_findClusterBreak(str,pos,forward=!0,includeExtending=!0){return(forward?nextClusterBreak:prevClusterBreak)(str,pos,includeExtending)}function nextClusterBreak(str,pos,includeExtending){if(pos==str.length)return pos;pos&&surrogateLow(str.charCodeAt(pos))&&surrogateHigh(str.charCodeAt(pos-1))&&pos--;let prev=codePointAt(str,pos);for(pos+=codePointSize(prev);pos<str.length;){let next=codePointAt(str,pos);if(8205==prev||8205==next||includeExtending&&isExtendingChar(next))pos+=codePointSize(next),prev=next;else{if(!isRegionalIndicator(next))break;{let countBefore=0,i=pos-2;for(;i>=0&&isRegionalIndicator(codePointAt(str,i));)countBefore++,i-=2;if(countBefore%2==0)break;pos+=2}}}return pos}function prevClusterBreak(str,pos,includeExtending){for(;pos>0;){let found=nextClusterBreak(str,pos-2,includeExtending);if(found<pos)return found;pos--}return 0}function codePointAt(str,pos){let code0=str.charCodeAt(pos);if(!surrogateHigh(code0)||pos+1==str.length)return code0;let code1=str.charCodeAt(pos+1);return surrogateLow(code1)?code1-56320+(code0-55296<<10)+65536:code0}function surrogateLow(ch){return ch>=56320&&ch<57344}function surrogateHigh(ch){return ch>=55296&&ch<56320}function codePointSize(code){return code<65536?1:2}class Text{lineAt(pos){if(pos<0||pos>this.length)throw new RangeError(`Invalid position ${pos} in document of length ${this.length}`);return this.lineInner(pos,!1,1,0)}line(n){if(n<1||n>this.lines)throw new RangeError(`Invalid line number ${n} in ${this.lines}-line document`);return this.lineInner(n,!0,1,0)}replace(from,to,text){[from,to]=clip(this,from,to);let parts=[];return this.decompose(0,from,parts,2),text.length&&text.decompose(0,text.length,parts,3),this.decompose(to,this.length,parts,1),TextNode.from(parts,this.length-(to-from)+text.length)}append(other){return this.replace(this.length,this.length,other)}slice(from,to=this.length){[from,to]=clip(this,from,to);let parts=[];return this.decompose(from,to,parts,0),TextNode.from(parts,to-from)}eq(other){if(other==this)return!0;if(other.length!=this.length||other.lines!=this.lines)return!1;let start=this.scanIdentical(other,1),end=this.length-this.scanIdentical(other,-1),a=new RawTextCursor(this),b=new RawTextCursor(other);for(let skip=start,pos=start;;){if(a.next(skip),b.next(skip),skip=0,a.lineBreak!=b.lineBreak||a.done!=b.done||a.value!=b.value)return!1;if(pos+=a.value.length,a.done||pos>=end)return!0}}iter(dir=1){return new RawTextCursor(this,dir)}iterRange(from,to=this.length){return new PartialTextCursor(this,from,to)}iterLines(from,to){let inner;if(null==from)inner=this.iter();else{null==to&&(to=this.lines+1);let start=this.line(from).from;inner=this.iterRange(start,Math.max(start,to==this.lines+1?this.length:to<=1?0:this.line(to-1).to))}return new LineCursor(inner)}toString(){return this.sliceString(0)}toJSON(){let lines=[];return this.flatten(lines),lines}constructor(){}static of(text){if(0==text.length)throw new RangeError("A document must have at least one line");return 1!=text.length||text[0]?text.length<=32?new TextLeaf(text):TextNode.from(TextLeaf.split(text,[])):Text.empty}}class TextLeaf extends Text{constructor(text,length=function textLength(text){let length=-1;for(let line of text)length+=line.length+1;return length}(text)){super(),this.text=text,this.length=length}get lines(){return this.text.length}get children(){return null}lineInner(target,isLine,line,offset){for(let i=0;;i++){let string=this.text[i],end=offset+string.length;if((isLine?line:end)>=target)return new Line(offset,end,line,string);offset=end+1,line++}}decompose(from,to,target,open){let text=from<=0&&to>=this.length?this:new TextLeaf(sliceText(this.text,from,to),Math.min(to,this.length)-Math.max(0,from));if(1&open){let prev=target.pop(),joined=appendText(text.text,prev.text.slice(),0,text.length);if(joined.length<=32)target.push(new TextLeaf(joined,prev.length+text.length));else{let mid=joined.length>>1;target.push(new TextLeaf(joined.slice(0,mid)),new TextLeaf(joined.slice(mid)))}}else target.push(text)}replace(from,to,text){if(!(text instanceof TextLeaf))return super.replace(from,to,text);[from,to]=clip(this,from,to);let lines=appendText(this.text,appendText(text.text,sliceText(this.text,0,from)),to),newLen=this.length+text.length-(to-from);return lines.length<=32?new TextLeaf(lines,newLen):TextNode.from(TextLeaf.split(lines,[]),newLen)}sliceString(from,to=this.length,lineSep="\n"){[from,to]=clip(this,from,to);let result="";for(let pos=0,i=0;pos<=to&&i<this.text.length;i++){let line=this.text[i],end=pos+line.length;pos>from&&i&&(result+=lineSep),from<end&&to>pos&&(result+=line.slice(Math.max(0,from-pos),to-pos)),pos=end+1}return result}flatten(target){for(let line of this.text)target.push(line)}scanIdentical(){return 0}static split(text,target){let part=[],len=-1;for(let line of text)part.push(line),len+=line.length+1,32==part.length&&(target.push(new TextLeaf(part,len)),part=[],len=-1);return len>-1&&target.push(new TextLeaf(part,len)),target}}class TextNode extends Text{constructor(children,length){super(),this.children=children,this.length=length,this.lines=0;for(let child of children)this.lines+=child.lines}lineInner(target,isLine,line,offset){for(let i=0;;i++){let child=this.children[i],end=offset+child.length,endLine=line+child.lines-1;if((isLine?endLine:end)>=target)return child.lineInner(target,isLine,line,offset);offset=end+1,line=endLine+1}}decompose(from,to,target,open){for(let i=0,pos=0;pos<=to&&i<this.children.length;i++){let child=this.children[i],end=pos+child.length;if(from<=end&&to>=pos){let childOpen=open&((pos<=from?1:0)|(end>=to?2:0));pos>=from&&end<=to&&!childOpen?target.push(child):child.decompose(from-pos,to-pos,target,childOpen)}pos=end+1}}replace(from,to,text){if([from,to]=clip(this,from,to),text.lines<this.lines)for(let i=0,pos=0;i<this.children.length;i++){let child=this.children[i],end=pos+child.length;if(from>=pos&&to<=end){let updated=child.replace(from-pos,to-pos,text),totalLines=this.lines-child.lines+updated.lines;if(updated.lines<totalLines>>4&&updated.lines>totalLines>>6){let copy=this.children.slice();return copy[i]=updated,new TextNode(copy,this.length-(to-from)+text.length)}return super.replace(pos,end,updated)}pos=end+1}return super.replace(from,to,text)}sliceString(from,to=this.length,lineSep="\n"){[from,to]=clip(this,from,to);let result="";for(let i=0,pos=0;i<this.children.length&&pos<=to;i++){let child=this.children[i],end=pos+child.length;pos>from&&i&&(result+=lineSep),from<end&&to>pos&&(result+=child.sliceString(from-pos,to-pos,lineSep)),pos=end+1}return result}flatten(target){for(let child of this.children)child.flatten(target)}scanIdentical(other,dir){if(!(other instanceof TextNode))return 0;let length=0,[iA,iB,eA,eB]=dir>0?[0,0,this.children.length,other.children.length]:[this.children.length-1,other.children.length-1,-1,-1];for(;;iA+=dir,iB+=dir){if(iA==eA||iB==eB)return length;let chA=this.children[iA],chB=other.children[iB];if(chA!=chB)return length+chA.scanIdentical(chB,dir);length+=chA.length+1}}static from(children,length=children.reduce((l,ch)=>l+ch.length+1,-1)){let lines=0;for(let ch of children)lines+=ch.lines;if(lines<32){let flat=[];for(let ch of children)ch.flatten(flat);return new TextLeaf(flat,length)}let chunk=Math.max(32,lines>>5),maxChunk=chunk<<1,minChunk=chunk>>1,chunked=[],currentLines=0,currentLen=-1,currentChunk=[];function add(child){let last;if(child.lines>maxChunk&&child instanceof TextNode)for(let node of child.children)add(node);else child.lines>minChunk&&(currentLines>minChunk||!currentLines)?(flush(),chunked.push(child)):child instanceof TextLeaf&&currentLines&&(last=currentChunk[currentChunk.length-1])instanceof TextLeaf&&child.lines+last.lines<=32?(currentLines+=child.lines,currentLen+=child.length+1,currentChunk[currentChunk.length-1]=new TextLeaf(last.text.concat(child.text),last.length+1+child.length)):(currentLines+child.lines>chunk&&flush(),currentLines+=child.lines,currentLen+=child.length+1,currentChunk.push(child))}function flush(){0!=currentLines&&(chunked.push(1==currentChunk.length?currentChunk[0]:TextNode.from(currentChunk,currentLen)),currentLen=-1,currentLines=currentChunk.length=0)}for(let child of children)add(child);return flush(),1==chunked.length?chunked[0]:new TextNode(chunked,length)}}function appendText(text,target,from=0,to=1e9){for(let pos=0,i=0,first=!0;i<text.length&&pos<=to;i++){let line=text[i],end=pos+line.length;end>=from&&(end>to&&(line=line.slice(0,to-pos)),pos<from&&(line=line.slice(from-pos)),first?(target[target.length-1]+=line,first=!1):target.push(line)),pos=end+1}return target}function sliceText(text,from,to){return appendText(text,[""],from,to)}Text.empty=new TextLeaf([""],0);class RawTextCursor{constructor(text,dir=1){this.dir=dir,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[text],this.offsets=[dir>0?1:(text instanceof TextLeaf?text.text.length:text.children.length)<<1]}nextInner(skip,dir){for(this.done=this.lineBreak=!1;;){let last=this.nodes.length-1,top=this.nodes[last],offsetValue=this.offsets[last],offset=offsetValue>>1,size=top instanceof TextLeaf?top.text.length:top.children.length;if(offset==(dir>0?size:0)){if(0==last)return this.done=!0,this.value="",this;dir>0&&this.offsets[last-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&offsetValue)==(dir>0?0:1)){if(this.offsets[last]+=dir,0==skip)return this.lineBreak=!0,this.value="\n",this;skip--}else if(top instanceof TextLeaf){let next=top.text[offset+(dir<0?-1:0)];if(this.offsets[last]+=dir,next.length>Math.max(0,skip))return this.value=0==skip?next:dir>0?next.slice(skip):next.slice(0,next.length-skip),this;skip-=next.length}else{let next=top.children[offset+(dir<0?-1:0)];skip>next.length?(skip-=next.length,this.offsets[last]+=dir):(dir<0&&this.offsets[last]--,this.nodes.push(next),this.offsets.push(dir>0?1:(next instanceof TextLeaf?next.text.length:next.children.length)<<1))}}}next(skip=0){return skip<0&&(this.nextInner(-skip,-this.dir),skip=this.value.length),this.nextInner(skip,this.dir)}}class PartialTextCursor{constructor(text,start,end){this.value="",this.done=!1,this.cursor=new RawTextCursor(text,start>end?-1:1),this.pos=start>end?text.length:0,this.from=Math.min(start,end),this.to=Math.max(start,end)}nextInner(skip,dir){if(dir<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;skip+=Math.max(0,dir<0?this.pos-this.to:this.from-this.pos);let limit=dir<0?this.pos-this.from:this.to-this.pos;skip>limit&&(skip=limit),limit-=skip;let{value}=this.cursor.next(skip);return this.pos+=(value.length+skip)*dir,this.value=value.length<=limit?value:dir<0?value.slice(value.length-limit):value.slice(0,limit),this.done=!this.value,this}next(skip=0){return skip<0?skip=Math.max(skip,this.from-this.pos):skip>0&&(skip=Math.min(skip,this.to-this.pos)),this.nextInner(skip,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class LineCursor{constructor(inner){this.inner=inner,this.afterBreak=!0,this.value="",this.done=!1}next(skip=0){let{done,lineBreak,value}=this.inner.next(skip);return done&&this.afterBreak?(this.value="",this.afterBreak=!1):done?(this.done=!0,this.value=""):lineBreak?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=value,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(from,to,number,text){this.from=from,this.to=to,this.number=number,this.text=text}get length(){return this.to-this.from}}function clip(text,from,to){return[from=Math.max(0,Math.min(text.length,from)),Math.max(from,Math.min(text.length,to))]}function dist_findClusterBreak(str,pos,forward=!0,includeExtending=!0){return src_findClusterBreak(str,pos,forward,includeExtending)}function dist_codePointAt(str,pos){let code0=str.charCodeAt(pos);if(!function dist_surrogateHigh(ch){return ch>=55296&&ch<56320}(code0)||pos+1==str.length)return code0;let code1=str.charCodeAt(pos+1);return function dist_surrogateLow(ch){return ch>=56320&&ch<57344}(code1)?code1-56320+(code0-55296<<10)+65536:code0}function dist_fromCodePoint(code){return code<=65535?String.fromCharCode(code):(code-=65536,String.fromCharCode(55296+(code>>10),56320+(1023&code)))}function dist_codePointSize(code){return code<65536?1:2}const DefaultSplit=/\r\n?|\n/;var dist_MapMode=function(MapMode){return MapMode[MapMode.Simple=0]="Simple",MapMode[MapMode.TrackDel=1]="TrackDel",MapMode[MapMode.TrackBefore=2]="TrackBefore",MapMode[MapMode.TrackAfter=3]="TrackAfter",MapMode}(dist_MapMode||(dist_MapMode={}));class ChangeDesc{constructor(sections){this.sections=sections}get length(){let result=0;for(let i=0;i<this.sections.length;i+=2)result+=this.sections[i];return result}get newLength(){let result=0;for(let i=0;i<this.sections.length;i+=2){let ins=this.sections[i+1];result+=ins<0?this.sections[i]:ins}return result}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(f){for(let i=0,posA=0,posB=0;i<this.sections.length;){let len=this.sections[i++],ins=this.sections[i++];ins<0?(f(posA,posB,len),posB+=len):posB+=ins,posA+=len}}iterChangedRanges(f,individual=!1){iterChanges(this,f,individual)}get invertedDesc(){let sections=[];for(let i=0;i<this.sections.length;){let len=this.sections[i++],ins=this.sections[i++];ins<0?sections.push(len,ins):sections.push(ins,len)}return new ChangeDesc(sections)}composeDesc(other){return this.empty?other:other.empty?this:composeSets(this,other)}mapDesc(other,before=!1){return other.empty?this:mapSet(this,other,before)}mapPos(pos,assoc=-1,mode=dist_MapMode.Simple){let posA=0,posB=0;for(let i=0;i<this.sections.length;){let len=this.sections[i++],ins=this.sections[i++],endA=posA+len;if(ins<0){if(endA>pos)return posB+(pos-posA);posB+=len}else{if(mode!=dist_MapMode.Simple&&endA>=pos&&(mode==dist_MapMode.TrackDel&&posA<pos&&endA>pos||mode==dist_MapMode.TrackBefore&&posA<pos||mode==dist_MapMode.TrackAfter&&endA>pos))return null;if(endA>pos||endA==pos&&assoc<0&&!len)return pos==posA||assoc<0?posB:posB+ins;posB+=ins}posA=endA}if(pos>posA)throw new RangeError(`Position ${pos} is out of range for changeset of length ${posA}`);return posB}touchesRange(from,to=from){for(let i=0,pos=0;i<this.sections.length&&pos<=to;){let end=pos+this.sections[i++];if(this.sections[i++]>=0&&pos<=to&&end>=from)return!(pos<from&&end>to)||"cover";pos=end}return!1}toString(){let result="";for(let i=0;i<this.sections.length;){let len=this.sections[i++],ins=this.sections[i++];result+=(result?" ":"")+len+(ins>=0?":"+ins:"")}return result}toJSON(){return this.sections}static fromJSON(json){if(!Array.isArray(json)||json.length%2||json.some(a=>"number"!=typeof a))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(json)}static create(sections){return new ChangeDesc(sections)}}class ChangeSet extends ChangeDesc{constructor(sections,inserted){super(sections),this.inserted=inserted}apply(doc){if(this.length!=doc.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(fromA,toA,fromB,_toB,text)=>doc=doc.replace(fromB,fromB+(toA-fromA),text),!1),doc}mapDesc(other,before=!1){return mapSet(this,other,before,!0)}invert(doc){let sections=this.sections.slice(),inserted=[];for(let i=0,pos=0;i<sections.length;i+=2){let len=sections[i],ins=sections[i+1];if(ins>=0){sections[i]=ins,sections[i+1]=len;let index=i>>1;for(;inserted.length<index;)inserted.push(Text.empty);inserted.push(len?doc.slice(pos,pos+len):Text.empty)}pos+=len}return new ChangeSet(sections,inserted)}compose(other){return this.empty?other:other.empty?this:composeSets(this,other,!0)}map(other,before=!1){return other.empty?this:mapSet(this,other,before,!0)}iterChanges(f,individual=!1){iterChanges(this,f,individual)}get desc(){return ChangeDesc.create(this.sections)}filter(ranges){let resultSections=[],resultInserted=[],filteredSections=[],iter=new SectionIter(this);done:for(let i=0,pos=0;;){let next=i==ranges.length?1e9:ranges[i++];for(;pos<next||pos==next&&0==iter.len;){if(iter.done)break done;let len=Math.min(iter.len,next-pos);addSection(filteredSections,len,-1);let ins=-1==iter.ins?-1:0==iter.off?iter.ins:0;addSection(resultSections,len,ins),ins>0&&addInsert(resultInserted,resultSections,iter.text),iter.forward(len),pos+=len}let end=ranges[i++];for(;pos<end;){if(iter.done)break done;let len=Math.min(iter.len,end-pos);addSection(resultSections,len,-1),addSection(filteredSections,len,-1==iter.ins?-1:0==iter.off?iter.ins:0),iter.forward(len),pos+=len}}return{changes:new ChangeSet(resultSections,resultInserted),filtered:ChangeDesc.create(filteredSections)}}toJSON(){let parts=[];for(let i=0;i<this.sections.length;i+=2){let len=this.sections[i],ins=this.sections[i+1];ins<0?parts.push(len):0==ins?parts.push([len]):parts.push([len].concat(this.inserted[i>>1].toJSON()))}return parts}static of(changes,length,lineSep){let sections=[],inserted=[],pos=0,total=null;function flush(force=!1){if(!force&&!sections.length)return;pos<length&&addSection(sections,length-pos,-1);let set=new ChangeSet(sections,inserted);total=total?total.compose(set.map(total)):set,sections=[],inserted=[],pos=0}return function process(spec){if(Array.isArray(spec))for(let sub of spec)process(sub);else if(spec instanceof ChangeSet){if(spec.length!=length)throw new RangeError(`Mismatched change set length (got ${spec.length}, expected ${length})`);flush(),total=total?total.compose(spec.map(total)):spec}else{let{from,to=from,insert}=spec;if(from>to||from<0||to>length)throw new RangeError(`Invalid change range ${from} to ${to} (in doc of length ${length})`);let insText=insert?"string"==typeof insert?Text.of(insert.split(lineSep||DefaultSplit)):insert:Text.empty,insLen=insText.length;if(from==to&&0==insLen)return;from<pos&&flush(),from>pos&&addSection(sections,from-pos,-1),addSection(sections,to-from,insLen),addInsert(inserted,sections,insText),pos=to}}(changes),flush(!total),total}static empty(length){return new ChangeSet(length?[length,-1]:[],[])}static fromJSON(json){if(!Array.isArray(json))throw new RangeError("Invalid JSON representation of ChangeSet");let sections=[],inserted=[];for(let i=0;i<json.length;i++){let part=json[i];if("number"==typeof part)sections.push(part,-1);else{if(!Array.isArray(part)||"number"!=typeof part[0]||part.some((e,i)=>i&&"string"!=typeof e))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==part.length)sections.push(part[0],0);else{for(;inserted.length<i;)inserted.push(Text.empty);inserted[i]=Text.of(part.slice(1)),sections.push(part[0],inserted[i].length)}}}return new ChangeSet(sections,inserted)}static createSet(sections,inserted){return new ChangeSet(sections,inserted)}}function addSection(sections,len,ins,forceJoin=!1){if(0==len&&ins<=0)return;let last=sections.length-2;last>=0&&ins<=0&&ins==sections[last+1]?sections[last]+=len:last>=0&&0==len&&0==sections[last]?sections[last+1]+=ins:forceJoin?(sections[last]+=len,sections[last+1]+=ins):sections.push(len,ins)}function addInsert(values,sections,value){if(0==value.length)return;let index=sections.length-2>>1;if(index<values.length)values[values.length-1]=values[values.length-1].append(value);else{for(;values.length<index;)values.push(Text.empty);values.push(value)}}function iterChanges(desc,f,individual){let inserted=desc.inserted;for(let posA=0,posB=0,i=0;i<desc.sections.length;){let len=desc.sections[i++],ins=desc.sections[i++];if(ins<0)posA+=len,posB+=len;else{let endA=posA,endB=posB,text=Text.empty;for(;endA+=len,endB+=ins,ins&&inserted&&(text=text.append(inserted[i-2>>1])),!(individual||i==desc.sections.length||desc.sections[i+1]<0);)len=desc.sections[i++],ins=desc.sections[i++];f(posA,endA,posB,endB,text),posA=endA,posB=endB}}}function mapSet(setA,setB,before,mkSet=!1){let sections=[],insert=mkSet?[]:null,a=new SectionIter(setA),b=new SectionIter(setB);for(let inserted=-1;;){if(a.done&&b.len||b.done&&a.len)throw new Error("Mismatched change set lengths");if(-1==a.ins&&-1==b.ins){let len=Math.min(a.len,b.len);addSection(sections,len,-1),a.forward(len),b.forward(len)}else if(b.ins>=0&&(a.ins<0||inserted==a.i||0==a.off&&(b.len<a.len||b.len==a.len&&!before))){let len=b.len;for(addSection(sections,b.ins,-1);len;){let piece=Math.min(a.len,len);a.ins>=0&&inserted<a.i&&a.len<=piece&&(addSection(sections,0,a.ins),insert&&addInsert(insert,sections,a.text),inserted=a.i),a.forward(piece),len-=piece}b.next()}else{if(!(a.ins>=0)){if(a.done&&b.done)return insert?ChangeSet.createSet(sections,insert):ChangeDesc.create(sections);throw new Error("Mismatched change set lengths")}{let len=0,left=a.len;for(;left;)if(-1==b.ins){let piece=Math.min(left,b.len);len+=piece,left-=piece,b.forward(piece)}else{if(!(0==b.ins&&b.len<left))break;left-=b.len,b.next()}addSection(sections,len,inserted<a.i?a.ins:0),insert&&inserted<a.i&&addInsert(insert,sections,a.text),inserted=a.i,a.forward(a.len-left)}}}}function composeSets(setA,setB,mkSet=!1){let sections=[],insert=mkSet?[]:null,a=new SectionIter(setA),b=new SectionIter(setB);for(let open=!1;;){if(a.done&&b.done)return insert?ChangeSet.createSet(sections,insert):ChangeDesc.create(sections);if(0==a.ins)addSection(sections,a.len,0,open),a.next();else if(0!=b.len||b.done){if(a.done||b.done)throw new Error("Mismatched change set lengths");{let len=Math.min(a.len2,b.len),sectionLen=sections.length;if(-1==a.ins){let insB=-1==b.ins?-1:b.off?0:b.ins;addSection(sections,len,insB,open),insert&&insB&&addInsert(insert,sections,b.text)}else-1==b.ins?(addSection(sections,a.off?0:a.len,len,open),insert&&addInsert(insert,sections,a.textBit(len))):(addSection(sections,a.off?0:a.len,b.off?0:b.ins,open),insert&&!b.off&&addInsert(insert,sections,b.text));open=(a.ins>len||b.ins>=0&&b.len>len)&&(open||sections.length>sectionLen),a.forward2(len),b.forward(len)}}else addSection(sections,0,b.ins,open),insert&&addInsert(insert,sections,b.text),b.next()}}class SectionIter{constructor(set){this.set=set,this.i=0,this.next()}next(){let{sections}=this.set;this.i<sections.length?(this.len=sections[this.i++],this.ins=sections[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted}=this.set,index=this.i-2>>1;return index>=inserted.length?Text.empty:inserted[index]}textBit(len){let{inserted}=this.set,index=this.i-2>>1;return index>=inserted.length&&!len?Text.empty:inserted[index].slice(this.off,null==len?void 0:this.off+len)}forward(len){len==this.len?this.next():(this.len-=len,this.off+=len)}forward2(len){-1==this.ins?this.forward(len):len==this.ins?this.next():(this.ins-=len,this.off+=len)}}class SelectionRange{constructor(from,to,flags){this.from=from,this.to=to,this.flags=flags}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let level=7&this.flags;return 7==level?null:level}get goalColumn(){let value=this.flags>>6;return 16777215==value?void 0:value}map(change,assoc=-1){let from,to;return this.empty?from=to=change.mapPos(this.from,assoc):(from=change.mapPos(this.from,1),to=change.mapPos(this.to,-1)),from==this.from&&to==this.to?this:new SelectionRange(from,to,this.flags)}extend(from,to=from){if(from<=this.anchor&&to>=this.anchor)return dist_EditorSelection.range(from,to);let head=Math.abs(from-this.anchor)>Math.abs(to-this.anchor)?from:to;return dist_EditorSelection.range(this.anchor,head)}eq(other,includeAssoc=!1){return!(this.anchor!=other.anchor||this.head!=other.head||includeAssoc&&this.empty&&this.assoc!=other.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(json){if(!json||"number"!=typeof json.anchor||"number"!=typeof json.head)throw new RangeError("Invalid JSON representation for SelectionRange");return dist_EditorSelection.range(json.anchor,json.head)}static create(from,to,flags){return new SelectionRange(from,to,flags)}}class dist_EditorSelection{constructor(ranges,mainIndex){this.ranges=ranges,this.mainIndex=mainIndex}map(change,assoc=-1){return change.empty?this:dist_EditorSelection.create(this.ranges.map(r=>r.map(change,assoc)),this.mainIndex)}eq(other,includeAssoc=!1){if(this.ranges.length!=other.ranges.length||this.mainIndex!=other.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(other.ranges[i],includeAssoc))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new dist_EditorSelection([this.main],0)}addRange(range,main=!0){return dist_EditorSelection.create([range].concat(this.ranges),main?0:this.mainIndex+1)}replaceRange(range,which=this.mainIndex){let ranges=this.ranges.slice();return ranges[which]=range,dist_EditorSelection.create(ranges,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(r=>r.toJSON()),main:this.mainIndex}}static fromJSON(json){if(!json||!Array.isArray(json.ranges)||"number"!=typeof json.main||json.main>=json.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new dist_EditorSelection(json.ranges.map(r=>SelectionRange.fromJSON(r)),json.main)}static single(anchor,head=anchor){return new dist_EditorSelection([dist_EditorSelection.range(anchor,head)],0)}static create(ranges,mainIndex=0){if(0==ranges.length)throw new RangeError("A selection needs at least one range");for(let pos=0,i=0;i<ranges.length;i++){let range=ranges[i];if(range.empty?range.from<=pos:range.from<pos)return dist_EditorSelection.normalized(ranges.slice(),mainIndex);pos=range.to}return new dist_EditorSelection(ranges,mainIndex)}static cursor(pos,assoc=0,bidiLevel,goalColumn){return SelectionRange.create(pos,pos,(0==assoc?0:assoc<0?8:16)|(null==bidiLevel?7:Math.min(6,bidiLevel))|(null!=goalColumn?goalColumn:16777215)<<6)}static range(anchor,head,goalColumn,bidiLevel){let flags=(null!=goalColumn?goalColumn:16777215)<<6|(null==bidiLevel?7:Math.min(6,bidiLevel));return head<anchor?SelectionRange.create(head,anchor,48|flags):SelectionRange.create(anchor,head,(head>anchor?8:0)|flags)}static normalized(ranges,mainIndex=0){let main=ranges[mainIndex];ranges.sort((a,b)=>a.from-b.from),mainIndex=ranges.indexOf(main);for(let i=1;i<ranges.length;i++){let range=ranges[i],prev=ranges[i-1];if(range.empty?range.from<=prev.to:range.from<prev.to){let from=prev.from,to=Math.max(range.to,prev.to);i<=mainIndex&&mainIndex--,ranges.splice(--i,2,range.anchor>range.head?dist_EditorSelection.range(to,from):dist_EditorSelection.range(from,to))}}return new dist_EditorSelection(ranges,mainIndex)}}function checkSelection(selection,docLength){for(let range of selection.ranges)if(range.to>docLength)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(combine,compareInput,compare,isStatic,enables){this.combine=combine,this.compareInput=compareInput,this.compare=compare,this.isStatic=isStatic,this.id=nextID++,this.default=combine([]),this.extensions="function"==typeof enables?enables(this):enables}get reader(){return this}static define(config={}){return new Facet(config.combine||(a=>a),config.compareInput||((a,b)=>a===b),config.compare||(config.combine?(a,b)=>a===b:sameArray),!!config.static,config.enables)}of(value){return new FacetProvider([],this,0,value)}compute(deps,get){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(deps,this,1,get)}computeN(deps,get){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(deps,this,2,get)}from(field,get){return get||(get=x=>x),this.compute([field],state=>get(state.field(field)))}}function sameArray(a,b){return a==b||a.length==b.length&&a.every((e,i)=>e===b[i])}class FacetProvider{constructor(dependencies,facet,type,value){this.dependencies=dependencies,this.facet=facet,this.type=type,this.value=value,this.id=nextID++}dynamicSlot(addresses){var _a;let getter=this.value,compare=this.facet.compareInput,id=this.id,idx=addresses[id]>>1,multi=2==this.type,depDoc=!1,depSel=!1,depAddrs=[];for(let dep of this.dependencies)"doc"==dep?depDoc=!0:"selection"==dep?depSel=!0:1&(null!==(_a=addresses[dep.id])&&void 0!==_a?_a:1)||depAddrs.push(addresses[dep.id]);return{create:state=>(state.values[idx]=getter(state),1),update(state,tr){if(depDoc&&tr.docChanged||depSel&&(tr.docChanged||tr.selection)||ensureAll(state,depAddrs)){let newVal=getter(state);if(multi?!compareArray(newVal,state.values[idx],compare):!compare(newVal,state.values[idx]))return state.values[idx]=newVal,1}return 0},reconfigure:(state,oldState)=>{let newVal,oldAddr=oldState.config.address[id];if(null!=oldAddr){let oldVal=getAddr(oldState,oldAddr);if(this.dependencies.every(dep=>dep instanceof Facet?oldState.facet(dep)===state.facet(dep):!(dep instanceof dist_StateField)||oldState.field(dep,!1)==state.field(dep,!1))||(multi?compareArray(newVal=getter(state),oldVal,compare):compare(newVal=getter(state),oldVal)))return state.values[idx]=oldVal,0}else newVal=getter(state);return state.values[idx]=newVal,1}}}}function compareArray(a,b,compare){if(a.length!=b.length)return!1;for(let i=0;i<a.length;i++)if(!compare(a[i],b[i]))return!1;return!0}function ensureAll(state,addrs){let changed=!1;for(let addr of addrs)1&ensureAddr(state,addr)&&(changed=!0);return changed}function dynamicFacetSlot(addresses,facet,providers){let providerAddrs=providers.map(p=>addresses[p.id]),providerTypes=providers.map(p=>p.type),dynamic=providerAddrs.filter(p=>!(1&p)),idx=addresses[facet.id]>>1;function get(state){let values=[];for(let i=0;i<providerAddrs.length;i++){let value=getAddr(state,providerAddrs[i]);if(2==providerTypes[i])for(let val of value)values.push(val);else values.push(value)}return facet.combine(values)}return{create(state){for(let addr of providerAddrs)ensureAddr(state,addr);return state.values[idx]=get(state),1},update(state,tr){if(!ensureAll(state,dynamic))return 0;let value=get(state);return facet.compare(value,state.values[idx])?0:(state.values[idx]=value,1)},reconfigure(state,oldState){let depChanged=ensureAll(state,providerAddrs),oldProviders=oldState.config.facets[facet.id],oldValue=oldState.facet(facet);if(oldProviders&&!depChanged&&sameArray(providers,oldProviders))return state.values[idx]=oldValue,0;let value=get(state);return facet.compare(value,oldValue)?(state.values[idx]=oldValue,0):(state.values[idx]=value,1)}}}const initField=Facet.define({static:!0});class dist_StateField{constructor(id,createF,updateF,compareF,spec){this.id=id,this.createF=createF,this.updateF=updateF,this.compareF=compareF,this.spec=spec,this.provides=void 0}static define(config){let field=new dist_StateField(nextID++,config.create,config.update,config.compare||((a,b)=>a===b),config);return config.provide&&(field.provides=config.provide(field)),field}create(state){let init=state.facet(initField).find(i=>i.field==this);return((null==init?void 0:init.create)||this.createF)(state)}slot(addresses){let idx=addresses[this.id]>>1;return{create:state=>(state.values[idx]=this.create(state),1),update:(state,tr)=>{let oldVal=state.values[idx],value=this.updateF(oldVal,tr);return this.compareF(oldVal,value)?0:(state.values[idx]=value,1)},reconfigure:(state,oldState)=>{let reInit,init=state.facet(initField),oldInit=oldState.facet(initField);return(reInit=init.find(i=>i.field==this))&&reInit!=oldInit.find(i=>i.field==this)?(state.values[idx]=reInit.create(state),1):null!=oldState.config.address[this.id]?(state.values[idx]=oldState.field(this),0):(state.values[idx]=this.create(state),1)}}}init(create){return[this,initField.of({field:this,create})]}get extension(){return this}}const Prec__lowest=4,Prec__low=3,Prec__default=2,Prec__high=1;function prec(value){return ext=>new PrecExtension(ext,value)}const Prec={highest:prec(0),high:prec(Prec__high),default:prec(Prec__default),low:prec(Prec__low),lowest:prec(Prec__lowest)};class PrecExtension{constructor(inner,prec){this.inner=inner,this.prec=prec}}class Compartment{of(ext){return new CompartmentInstance(this,ext)}reconfigure(content){return Compartment.reconfigure.of({compartment:this,extension:content})}get(state){return state.config.compartments.get(this)}}class CompartmentInstance{constructor(compartment,inner){this.compartment=compartment,this.inner=inner}}class Configuration{constructor(base,compartments,dynamicSlots,address,staticValues,facets){for(this.base=base,this.compartments=compartments,this.dynamicSlots=dynamicSlots,this.address=address,this.staticValues=staticValues,this.facets=facets,this.statusTemplate=[];this.statusTemplate.length<dynamicSlots.length;)this.statusTemplate.push(0)}staticFacet(facet){let addr=this.address[facet.id];return null==addr?facet.default:this.staticValues[addr>>1]}static resolve(base,compartments,oldState){let fields=[],facets=Object.create(null),newCompartments=new Map;for(let ext of function flatten(extension,compartments,newCompartments){let result=[[],[],[],[],[]],seen=new Map;function inner(ext,prec){let known=seen.get(ext);if(null!=known){if(known<=prec)return;let found=result[known].indexOf(ext);found>-1&&result[known].splice(found,1),ext instanceof CompartmentInstance&&newCompartments.delete(ext.compartment)}if(seen.set(ext,prec),Array.isArray(ext))for(let e of ext)inner(e,prec);else if(ext instanceof CompartmentInstance){if(newCompartments.has(ext.compartment))throw new RangeError("Duplicate use of compartment in extensions");let content=compartments.get(ext.compartment)||ext.inner;newCompartments.set(ext.compartment,content),inner(content,prec)}else if(ext instanceof PrecExtension)inner(ext.inner,ext.prec);else if(ext instanceof dist_StateField)result[prec].push(ext),ext.provides&&inner(ext.provides,prec);else if(ext instanceof FacetProvider)result[prec].push(ext),ext.facet.extensions&&inner(ext.facet.extensions,Prec__default);else{let content=ext.extension;if(!content)throw new Error(`Unrecognized extension value in extension set (${ext}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);inner(content,prec)}}return inner(extension,Prec__default),result.reduce((a,b)=>a.concat(b))}(base,compartments,newCompartments))ext instanceof dist_StateField?fields.push(ext):(facets[ext.facet.id]||(facets[ext.facet.id]=[])).push(ext);let address=Object.create(null),staticValues=[],dynamicSlots=[];for(let field of fields)address[field.id]=dynamicSlots.length<<1,dynamicSlots.push(a=>field.slot(a));let oldFacets=null==oldState?void 0:oldState.config.facets;for(let id in facets){let providers=facets[id],facet=providers[0].facet,oldProviders=oldFacets&&oldFacets[id]||[];if(providers.every(p=>0==p.type))if(address[facet.id]=staticValues.length<<1|1,sameArray(oldProviders,providers))staticValues.push(oldState.facet(facet));else{let value=facet.combine(providers.map(p=>p.value));staticValues.push(oldState&&facet.compare(value,oldState.facet(facet))?oldState.facet(facet):value)}else{for(let p of providers)0==p.type?(address[p.id]=staticValues.length<<1|1,staticValues.push(p.value)):(address[p.id]=dynamicSlots.length<<1,dynamicSlots.push(a=>p.dynamicSlot(a)));address[facet.id]=dynamicSlots.length<<1,dynamicSlots.push(a=>dynamicFacetSlot(a,facet,providers))}}let dynamic=dynamicSlots.map(f=>f(address));return new Configuration(base,newCompartments,dynamic,address,staticValues,facets)}}function ensureAddr(state,addr){if(1&addr)return 2;let idx=addr>>1,status=state.status[idx];if(4==status)throw new Error("Cyclic dependency between fields and/or facets");if(2&status)return status;state.status[idx]=4;let changed=state.computeSlot(state,state.config.dynamicSlots[idx]);return state.status[idx]=2|changed}function getAddr(state,addr){return 1&addr?state.config.staticValues[addr>>1]:state.values[addr>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:values=>values.some(v=>v),static:!0}),lineSeparator=Facet.define({combine:values=>values.length?values[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:values=>!!values.length&&values[0]});class Annotation{constructor(type,value){this.type=type,this.value=value}static define(){return new AnnotationType}}class AnnotationType{of(value){return new Annotation(this,value)}}class StateEffectType{constructor(map){this.map=map}of(value){return new dist_StateEffect(this,value)}}class dist_StateEffect{constructor(type,value){this.type=type,this.value=value}map(mapping){let mapped=this.type.map(this.value,mapping);return void 0===mapped?void 0:mapped==this.value?this:new dist_StateEffect(this.type,mapped)}is(type){return this.type==type}static define(spec={}){return new StateEffectType(spec.map||(v=>v))}static mapEffects(effects,mapping){if(!effects.length)return effects;let result=[];for(let effect of effects){let mapped=effect.map(mapping);mapped&&result.push(mapped)}return result}}dist_StateEffect.reconfigure=dist_StateEffect.define(),dist_StateEffect.appendConfig=dist_StateEffect.define();class Transaction{constructor(startState,changes,selection,effects,annotations,scrollIntoView){this.startState=startState,this.changes=changes,this.selection=selection,this.effects=effects,this.annotations=annotations,this.scrollIntoView=scrollIntoView,this._doc=null,this._state=null,selection&&checkSelection(selection,changes.newLength),annotations.some(a=>a.type==Transaction.time)||(this.annotations=annotations.concat(Transaction.time.of(Date.now())))}static create(startState,changes,selection,effects,annotations,scrollIntoView){return new Transaction(startState,changes,selection,effects,annotations,scrollIntoView)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(type){for(let ann of this.annotations)if(ann.type==type)return ann.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(event){let e=this.annotation(Transaction.userEvent);return!(!e||!(e==event||e.length>event.length&&e.slice(0,event.length)==event&&"."==e[event.length]))}}function joinRanges(a,b){let result=[];for(let iA=0,iB=0;;){let from,to;if(iA<a.length&&(iB==b.length||b[iB]>=a[iA]))from=a[iA++],to=a[iA++];else{if(!(iB<b.length))return result;from=b[iB++],to=b[iB++]}!result.length||result[result.length-1]<from?result.push(from,to):result[result.length-1]<to&&(result[result.length-1]=to)}}function mergeTransaction(a,b,sequential){var _a;let mapForA,mapForB,changes;return sequential?(mapForA=b.changes,mapForB=ChangeSet.empty(b.changes.length),changes=a.changes.compose(b.changes)):(mapForA=b.changes.map(a.changes),mapForB=a.changes.mapDesc(b.changes,!0),changes=a.changes.compose(mapForA)),{changes,selection:b.selection?b.selection.map(mapForB):null===(_a=a.selection)||void 0===_a?void 0:_a.map(mapForA),effects:dist_StateEffect.mapEffects(a.effects,mapForA).concat(dist_StateEffect.mapEffects(b.effects,mapForB)),annotations:a.annotations.length?a.annotations.concat(b.annotations):b.annotations,scrollIntoView:a.scrollIntoView||b.scrollIntoView}}function resolveTransactionInner(state,spec,docSize){let sel=spec.selection,annotations=asArray(spec.annotations);return spec.userEvent&&(annotations=annotations.concat(Transaction.userEvent.of(spec.userEvent))),{changes:spec.changes instanceof ChangeSet?spec.changes:ChangeSet.of(spec.changes||[],docSize,state.facet(lineSeparator)),selection:sel&&(sel instanceof dist_EditorSelection?sel:dist_EditorSelection.single(sel.anchor,sel.head)),effects:asArray(spec.effects),annotations,scrollIntoView:!!spec.scrollIntoView}}function resolveTransaction(state,specs,filter){let s=resolveTransactionInner(state,specs.length?specs[0]:{},state.doc.length);specs.length&&!1===specs[0].filter&&(filter=!1);for(let i=1;i<specs.length;i++){!1===specs[i].filter&&(filter=!1);let seq=!!specs[i].sequential;s=mergeTransaction(s,resolveTransactionInner(state,specs[i],seq?s.changes.newLength:state.doc.length),seq)}let tr=Transaction.create(state,s.changes,s.selection,s.effects,s.annotations,s.scrollIntoView);return function extendTransaction(tr){let state=tr.startState,extenders=state.facet(transactionExtender),spec=tr;for(let i=extenders.length-1;i>=0;i--){let extension=extenders[i](tr);extension&&Object.keys(extension).length&&(spec=mergeTransaction(spec,resolveTransactionInner(state,extension,tr.changes.newLength),!0))}return spec==tr?tr:Transaction.create(state,tr.changes,tr.selection,spec.effects,spec.annotations,spec.scrollIntoView)}(filter?function filterTransaction(tr){let state=tr.startState,result=!0;for(let filter of state.facet(changeFilter)){let value=filter(tr);if(!1===value){result=!1;break}Array.isArray(value)&&(result=!0===result?value:joinRanges(result,value))}if(!0!==result){let changes,back;if(!1===result)back=tr.changes.invertedDesc,changes=ChangeSet.empty(state.doc.length);else{let filtered=tr.changes.filter(result);changes=filtered.changes,back=filtered.filtered.mapDesc(filtered.changes).invertedDesc}tr=Transaction.create(state,changes,tr.selection&&tr.selection.map(back),dist_StateEffect.mapEffects(tr.effects,back),tr.annotations,tr.scrollIntoView)}let filters=state.facet(transactionFilter);for(let i=filters.length-1;i>=0;i--){let filtered=filters[i](tr);tr=filtered instanceof Transaction?filtered:Array.isArray(filtered)&&1==filtered.length&&filtered[0]instanceof Transaction?filtered[0]:resolveTransaction(state,asArray(filtered),!1)}return tr}(tr):tr)}Transaction.time=Annotation.define(),Transaction.userEvent=Annotation.define(),Transaction.addToHistory=Annotation.define(),Transaction.remote=Annotation.define();const none=[];function asArray(value){return null==value?none:Array.isArray(value)?value:[value]}var dist_CharCategory=function(CharCategory){return CharCategory[CharCategory.Word=0]="Word",CharCategory[CharCategory.Space=1]="Space",CharCategory[CharCategory.Other=2]="Other",CharCategory}(dist_CharCategory||(dist_CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(_){}function makeCategorizer(wordChars){return char=>{if(!/\S/.test(char))return dist_CharCategory.Space;if(function hasWordChar(str){if(wordChar)return wordChar.test(str);for(let i=0;i<str.length;i++){let ch=str[i];if(/\w/.test(ch)||ch>""&&(ch.toUpperCase()!=ch.toLowerCase()||nonASCIISingleCaseWordChar.test(ch)))return!0}return!1}(char))return dist_CharCategory.Word;for(let i=0;i<wordChars.length;i++)if(char.indexOf(wordChars[i])>-1)return dist_CharCategory.Word;return dist_CharCategory.Other}}class EditorState{constructor(config,doc,selection,values,computeSlot,tr){this.config=config,this.doc=doc,this.selection=selection,this.values=values,this.status=config.statusTemplate.slice(),this.computeSlot=computeSlot,tr&&(tr._state=this);for(let i=0;i<this.config.dynamicSlots.length;i++)ensureAddr(this,i<<1);this.computeSlot=null}field(field,require=!0){let addr=this.config.address[field.id];if(null!=addr)return ensureAddr(this,addr),getAddr(this,addr);if(require)throw new RangeError("Field is not present in this state")}update(...specs){return resolveTransaction(this,specs,!0)}applyTransaction(tr){let startValues,conf=this.config,{base,compartments}=conf;for(let effect of tr.effects)effect.is(Compartment.reconfigure)?(conf&&(compartments=new Map,conf.compartments.forEach((val,key)=>compartments.set(key,val)),conf=null),compartments.set(effect.value.compartment,effect.value.extension)):effect.is(dist_StateEffect.reconfigure)?(conf=null,base=effect.value):effect.is(dist_StateEffect.appendConfig)&&(conf=null,base=asArray(base).concat(effect.value));if(conf)startValues=tr.startState.values.slice();else{conf=Configuration.resolve(base,compartments,this),startValues=new EditorState(conf,this.doc,this.selection,conf.dynamicSlots.map(()=>null),(state,slot)=>slot.reconfigure(state,this),null).values}let selection=tr.startState.facet(allowMultipleSelections)?tr.newSelection:tr.newSelection.asSingle();new EditorState(conf,tr.newDoc,selection,startValues,(state,slot)=>slot.update(state,tr),tr)}replaceSelection(text){return"string"==typeof text&&(text=this.toText(text)),this.changeByRange(range=>({changes:{from:range.from,to:range.to,insert:text},range:dist_EditorSelection.cursor(range.from+text.length)}))}changeByRange(f){let sel=this.selection,result1=f(sel.ranges[0]),changes=this.changes(result1.changes),ranges=[result1.range],effects=asArray(result1.effects);for(let i=1;i<sel.ranges.length;i++){let result=f(sel.ranges[i]),newChanges=this.changes(result.changes),newMapped=newChanges.map(changes);for(let j=0;j<i;j++)ranges[j]=ranges[j].map(newMapped);let mapBy=changes.mapDesc(newChanges,!0);ranges.push(result.range.map(mapBy)),changes=changes.compose(newMapped),effects=dist_StateEffect.mapEffects(effects,newMapped).concat(dist_StateEffect.mapEffects(asArray(result.effects),mapBy))}return{changes,selection:dist_EditorSelection.create(ranges,sel.mainIndex),effects}}changes(spec=[]){return spec instanceof ChangeSet?spec:ChangeSet.of(spec,this.doc.length,this.facet(EditorState.lineSeparator))}toText(string){return Text.of(string.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(from=0,to=this.doc.length){return this.doc.sliceString(from,to,this.lineBreak)}facet(facet){let addr=this.config.address[facet.id];return null==addr?facet.default:(ensureAddr(this,addr),getAddr(this,addr))}toJSON(fields){let result={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(fields)for(let prop in fields){let value=fields[prop];value instanceof dist_StateField&&null!=this.config.address[value.id]&&(result[prop]=value.spec.toJSON(this.field(fields[prop]),this))}return result}static fromJSON(json,config={},fields){if(!json||"string"!=typeof json.doc)throw new RangeError("Invalid JSON representation for EditorState");let fieldInit=[];if(fields)for(let prop in fields)if(Object.prototype.hasOwnProperty.call(json,prop)){let field=fields[prop],value=json[prop];fieldInit.push(field.init(state=>field.spec.fromJSON(value,state)))}return EditorState.create({doc:json.doc,selection:dist_EditorSelection.fromJSON(json.selection),extensions:config.extensions?fieldInit.concat([config.extensions]):fieldInit})}static create(config={}){let configuration=Configuration.resolve(config.extensions||[],new Map),doc=config.doc instanceof Text?config.doc:Text.of((config.doc||"").split(configuration.staticFacet(EditorState.lineSeparator)||DefaultSplit)),selection=config.selection?config.selection instanceof dist_EditorSelection?config.selection:dist_EditorSelection.single(config.selection.anchor,config.selection.head):dist_EditorSelection.single(0);return checkSelection(selection,doc.length),configuration.staticFacet(allowMultipleSelections)||(selection=selection.asSingle()),new EditorState(configuration,doc,selection,configuration.dynamicSlots.map(()=>null),(state,slot)=>slot.create(state),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||"\n"}get readOnly(){return this.facet(readOnly)}phrase(phrase,...insert){for(let map of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(map,phrase)){phrase=map[phrase];break}return insert.length&&(phrase=phrase.replace(/\$(\$|\d*)/g,(m,i)=>{if("$"==i)return"$";let n=+(i||1);return!n||n>insert.length?m:insert[n-1]})),phrase}languageDataAt(name,pos,side=-1){let values=[];for(let provider of this.facet(languageData))for(let result of provider(this,pos,side))Object.prototype.hasOwnProperty.call(result,name)&&values.push(result[name]);return values}charCategorizer(at){return makeCategorizer(this.languageDataAt("wordChars",at).join(""))}wordAt(pos){let{text,from,length}=this.doc.lineAt(pos),cat=this.charCategorizer(pos),start=pos-from,end=pos-from;for(;start>0;){let prev=dist_findClusterBreak(text,start,!1);if(cat(text.slice(prev,start))!=dist_CharCategory.Word)break;start=prev}for(;end<length;){let next=dist_findClusterBreak(text,end);if(cat(text.slice(end,next))!=dist_CharCategory.Word)break;end=next}return start==end?null:dist_EditorSelection.range(start+from,end+from)}}function combineConfig(configs,defaults,combine={}){let result={};for(let config of configs)for(let key of Object.keys(config)){let value=config[key],current=result[key];if(void 0===current)result[key]=value;else if(current===value||void 0===value);else{if(!Object.hasOwnProperty.call(combine,key))throw new Error("Config merge conflict for field "+key);result[key]=combine[key](current,value)}}for(let key in defaults)void 0===result[key]&&(result[key]=defaults[key]);return result}EditorState.allowMultipleSelections=allowMultipleSelections,EditorState.tabSize=Facet.define({combine:values=>values.length?values[0]:4}),EditorState.lineSeparator=lineSeparator,EditorState.readOnly=readOnly,EditorState.phrases=Facet.define({compare(a,b){let kA=Object.keys(a),kB=Object.keys(b);return kA.length==kB.length&&kA.every(k=>a[k]==b[k])}}),EditorState.languageData=languageData,EditorState.changeFilter=changeFilter,EditorState.transactionFilter=transactionFilter,EditorState.transactionExtender=transactionExtender,Compartment.reconfigure=dist_StateEffect.define();class RangeValue{eq(other){return this==other}range(from,to=from){return Range.create(from,to,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0,RangeValue.prototype.point=!1,RangeValue.prototype.mapMode=dist_MapMode.TrackDel;class Range{constructor(from,to,value){this.from=from,this.to=to,this.value=value}static create(from,to,value){return new Range(from,to,value)}}function cmpRange(a,b){return a.from-b.from||a.value.startSide-b.value.startSide}class Chunk{constructor(from,to,value,maxPoint){this.from=from,this.to=to,this.value=value,this.maxPoint=maxPoint}get length(){return this.to[this.to.length-1]}findIndex(pos,side,end,startAt=0){let arr=end?this.to:this.from;for(let lo=startAt,hi=arr.length;;){if(lo==hi)return lo;let mid=lo+hi>>1,diff=arr[mid]-pos||(end?this.value[mid].endSide:this.value[mid].startSide)-side;if(mid==lo)return diff>=0?lo:hi;diff>=0?hi=mid:lo=mid+1}}between(offset,from,to,f){for(let i=this.findIndex(from,-1e9,!0),e=this.findIndex(to,1e9,!1,i);i<e;i++)if(!1===f(this.from[i]+offset,this.to[i]+offset,this.value[i]))return!1}map(offset,changes){let value=[],from=[],to=[],newPos=-1,maxPoint=-1;for(let i=0;i<this.value.length;i++){let newFrom,newTo,val=this.value[i],curFrom=this.from[i]+offset,curTo=this.to[i]+offset;if(curFrom==curTo){let mapped=changes.mapPos(curFrom,val.startSide,val.mapMode);if(null==mapped)continue;if(newFrom=newTo=mapped,val.startSide!=val.endSide&&(newTo=changes.mapPos(curFrom,val.endSide),newTo<newFrom))continue}else if(newFrom=changes.mapPos(curFrom,val.startSide),newTo=changes.mapPos(curTo,val.endSide),newFrom>newTo||newFrom==newTo&&val.startSide>0&&val.endSide<=0)continue;(newTo-newFrom||val.endSide-val.startSide)<0||(newPos<0&&(newPos=newFrom),val.point&&(maxPoint=Math.max(maxPoint,newTo-newFrom)),value.push(val),from.push(newFrom-newPos),to.push(newTo-newPos))}return{mapped:value.length?new Chunk(from,to,value,maxPoint):null,pos:newPos}}}class dist_RangeSet{constructor(chunkPos,chunk,nextLayer,maxPoint){this.chunkPos=chunkPos,this.chunk=chunk,this.nextLayer=nextLayer,this.maxPoint=maxPoint}static create(chunkPos,chunk,nextLayer,maxPoint){return new dist_RangeSet(chunkPos,chunk,nextLayer,maxPoint)}get length(){let last=this.chunk.length-1;return last<0?0:Math.max(this.chunkEnd(last),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let size=this.nextLayer.size;for(let chunk of this.chunk)size+=chunk.value.length;return size}chunkEnd(index){return this.chunkPos[index]+this.chunk[index].length}update(updateSpec){let{add=[],sort=!1,filterFrom=0,filterTo=this.length}=updateSpec,filter=updateSpec.filter;if(0==add.length&&!filter)return this;if(sort&&(add=add.slice().sort(cmpRange)),this.isEmpty)return add.length?dist_RangeSet.of(add):this;let cur=new LayerCursor(this,null,-1).goto(0),i=0,spill=[],builder=new RangeSetBuilder;for(;cur.value||i<add.length;)if(i<add.length&&(cur.from-add[i].from||cur.startSide-add[i].value.startSide)>=0){let range=add[i++];builder.addInner(range.from,range.to,range.value)||spill.push(range)}else 1==cur.rangeIndex&&cur.chunkIndex<this.chunk.length&&(i==add.length||this.chunkEnd(cur.chunkIndex)<add[i].from)&&(!filter||filterFrom>this.chunkEnd(cur.chunkIndex)||filterTo<this.chunkPos[cur.chunkIndex])&&builder.addChunk(this.chunkPos[cur.chunkIndex],this.chunk[cur.chunkIndex])?cur.nextChunk():((!filter||filterFrom>cur.to||filterTo<cur.from||filter(cur.from,cur.to,cur.value))&&(builder.addInner(cur.from,cur.to,cur.value)||spill.push(Range.create(cur.from,cur.to,cur.value))),cur.next());return builder.finishInner(this.nextLayer.isEmpty&&!spill.length?dist_RangeSet.empty:this.nextLayer.update({add:spill,filter,filterFrom,filterTo}))}map(changes){if(changes.empty||this.isEmpty)return this;let chunks=[],chunkPos=[],maxPoint=-1;for(let i=0;i<this.chunk.length;i++){let start=this.chunkPos[i],chunk=this.chunk[i],touch=changes.touchesRange(start,start+chunk.length);if(!1===touch)maxPoint=Math.max(maxPoint,chunk.maxPoint),chunks.push(chunk),chunkPos.push(changes.mapPos(start));else if(!0===touch){let{mapped,pos}=chunk.map(start,changes);mapped&&(maxPoint=Math.max(maxPoint,mapped.maxPoint),chunks.push(mapped),chunkPos.push(pos))}}let next=this.nextLayer.map(changes);return 0==chunks.length?next:new dist_RangeSet(chunkPos,chunks,next||dist_RangeSet.empty,maxPoint)}between(from,to,f){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let start=this.chunkPos[i],chunk=this.chunk[i];if(to>=start&&from<=start+chunk.length&&!1===chunk.between(start,from-start,to-start,f))return}this.nextLayer.between(from,to,f)}}iter(from=0){return HeapCursor.from([this]).goto(from)}get isEmpty(){return this.nextLayer==this}static iter(sets,from=0){return HeapCursor.from(sets).goto(from)}static compare(oldSets,newSets,textDiff,comparator,minPointSize=-1){let a=oldSets.filter(set=>set.maxPoint>0||!set.isEmpty&&set.maxPoint>=minPointSize),b=newSets.filter(set=>set.maxPoint>0||!set.isEmpty&&set.maxPoint>=minPointSize),sharedChunks=findSharedChunks(a,b,textDiff),sideA=new SpanCursor(a,sharedChunks,minPointSize),sideB=new SpanCursor(b,sharedChunks,minPointSize);textDiff.iterGaps((fromA,fromB,length)=>compare(sideA,fromA,sideB,fromB,length,comparator)),textDiff.empty&&0==textDiff.length&&compare(sideA,0,sideB,0,0,comparator)}static eq(oldSets,newSets,from=0,to){null==to&&(to=999999999);let a=oldSets.filter(set=>!set.isEmpty&&newSets.indexOf(set)<0),b=newSets.filter(set=>!set.isEmpty&&oldSets.indexOf(set)<0);if(a.length!=b.length)return!1;if(!a.length)return!0;let sharedChunks=findSharedChunks(a,b),sideA=new SpanCursor(a,sharedChunks,0).goto(from),sideB=new SpanCursor(b,sharedChunks,0).goto(from);for(;;){if(sideA.to!=sideB.to||!sameValues(sideA.active,sideB.active)||sideA.point&&(!sideB.point||!sideA.point.eq(sideB.point)))return!1;if(sideA.to>to)return!0;sideA.next(),sideB.next()}}static spans(sets,from,to,iterator,minPointSize=-1){let cursor=new SpanCursor(sets,null,minPointSize).goto(from),pos=from,openRanges=cursor.openStart;for(;;){let curTo=Math.min(cursor.to,to);if(cursor.point){let active=cursor.activeForPoint(cursor.to),openCount=cursor.pointFrom<from?active.length+1:cursor.point.startSide<0?active.length:Math.min(active.length,openRanges);iterator.point(pos,curTo,cursor.point,active,openCount,cursor.pointRank),openRanges=Math.min(cursor.openEnd(curTo),active.length)}else curTo>pos&&(iterator.span(pos,curTo,cursor.active,openRanges),openRanges=cursor.openEnd(curTo));if(cursor.to>to)return openRanges+(cursor.point&&cursor.to>to?1:0);pos=cursor.to,cursor.next()}}static of(ranges,sort=!1){let build=new RangeSetBuilder;for(let range of ranges instanceof Range?[ranges]:sort?function lazySort(ranges){if(ranges.length>1)for(let prev=ranges[0],i=1;i<ranges.length;i++){let cur=ranges[i];if(cmpRange(prev,cur)>0)return ranges.slice().sort(cmpRange);prev=cur}return ranges}(ranges):ranges)build.add(range.from,range.to,range.value);return build.finish()}static join(sets){if(!sets.length)return dist_RangeSet.empty;let result=sets[sets.length-1];for(let i=sets.length-2;i>=0;i--)for(let layer=sets[i];layer!=dist_RangeSet.empty;layer=layer.nextLayer)result=new dist_RangeSet(layer.chunkPos,layer.chunk,result,Math.max(layer.maxPoint,result.maxPoint));return result}}dist_RangeSet.empty=new dist_RangeSet([],[],null,-1),dist_RangeSet.empty.nextLayer=dist_RangeSet.empty;class RangeSetBuilder{finishChunk(newArrays){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,newArrays&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(from,to,value){this.addInner(from,to,value)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(from,to,value)}addInner(from,to,value){let diff=from-this.lastTo||value.startSide-this.last.endSide;if(diff<=0&&(from-this.lastFrom||value.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(diff<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=from),this.from.push(from-this.chunkStart),this.to.push(to-this.chunkStart),this.last=value,this.lastFrom=from,this.lastTo=to,this.value.push(value),value.point&&(this.maxPoint=Math.max(this.maxPoint,to-from)),!0)}addChunk(from,chunk){if((from-this.lastTo||chunk.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,chunk.maxPoint),this.chunks.push(chunk),this.chunkPos.push(from);let last=chunk.value.length-1;return this.last=chunk.value[last],this.lastFrom=chunk.from[last]+from,this.lastTo=chunk.to[last]+from,!0}finish(){return this.finishInner(dist_RangeSet.empty)}finishInner(next){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return next;let result=dist_RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(next):next,this.setMaxPoint);return this.from=null,result}}function findSharedChunks(a,b,textDiff){let inA=new Map;for(let set of a)for(let i=0;i<set.chunk.length;i++)set.chunk[i].maxPoint<=0&&inA.set(set.chunk[i],set.chunkPos[i]);let shared=new Set;for(let set of b)for(let i=0;i<set.chunk.length;i++){let known=inA.get(set.chunk[i]);null==known||(textDiff?textDiff.mapPos(known):known)!=set.chunkPos[i]||(null==textDiff?void 0:textDiff.touchesRange(known,known+set.chunk[i].length))||shared.add(set.chunk[i])}return shared}class LayerCursor{constructor(layer,skip,minPoint,rank=0){this.layer=layer,this.skip=skip,this.minPoint=minPoint,this.rank=rank}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(pos,side=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(pos,side,!1),this}gotoInner(pos,side,forward){for(;this.chunkIndex<this.layer.chunk.length;){let next=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(next)||this.layer.chunkEnd(this.chunkIndex)<pos||next.maxPoint<this.minPoint))break;this.chunkIndex++,forward=!1}if(this.chunkIndex<this.layer.chunk.length){let rangeIndex=this.layer.chunk[this.chunkIndex].findIndex(pos-this.layer.chunkPos[this.chunkIndex],side,!0);(!forward||this.rangeIndex<rangeIndex)&&this.setRangeIndex(rangeIndex)}this.next()}forward(pos,side){(this.to-pos||this.endSide-side)<0&&this.gotoInner(pos,side,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let chunkPos=this.layer.chunkPos[this.chunkIndex],chunk=this.layer.chunk[this.chunkIndex],from=chunkPos+chunk.from[this.rangeIndex];if(this.from=from,this.to=chunkPos+chunk.to[this.rangeIndex],this.value=chunk.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(index){if(index==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=index}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(other){return this.from-other.from||this.startSide-other.startSide||this.rank-other.rank||this.to-other.to||this.endSide-other.endSide}}class HeapCursor{constructor(heap){this.heap=heap}static from(sets,skip=null,minPoint=-1){let heap=[];for(let i=0;i<sets.length;i++)for(let cur=sets[i];!cur.isEmpty;cur=cur.nextLayer)cur.maxPoint>=minPoint&&heap.push(new LayerCursor(cur,skip,minPoint,i));return 1==heap.length?heap[0]:new HeapCursor(heap)}get startSide(){return this.value?this.value.startSide:0}goto(pos,side=-1e9){for(let cur of this.heap)cur.goto(pos,side);for(let i=this.heap.length>>1;i>=0;i--)heapBubble(this.heap,i);return this.next(),this}forward(pos,side){for(let cur of this.heap)cur.forward(pos,side);for(let i=this.heap.length>>1;i>=0;i--)heapBubble(this.heap,i);(this.to-pos||this.value.endSide-side)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let top=this.heap[0];this.from=top.from,this.to=top.to,this.value=top.value,this.rank=top.rank,top.value&&top.next(),heapBubble(this.heap,0)}}}function heapBubble(heap,index){for(let cur=heap[index];;){let childIndex=1+(index<<1);if(childIndex>=heap.length)break;let child=heap[childIndex];if(childIndex+1<heap.length&&child.compare(heap[childIndex+1])>=0&&(child=heap[childIndex+1],childIndex++),cur.compare(child)<0)break;heap[childIndex]=cur,heap[index]=child,index=childIndex}}class SpanCursor{constructor(sets,skip,minPoint){this.minPoint=minPoint,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(sets,skip,minPoint)}goto(pos,side=-1e9){return this.cursor.goto(pos,side),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=pos,this.endSide=side,this.openStart=-1,this.next(),this}forward(pos,side){for(;this.minActive>-1&&(this.activeTo[this.minActive]-pos||this.active[this.minActive].endSide-side)<0;)this.removeActive(this.minActive);this.cursor.forward(pos,side)}removeActive(index){remove(this.active,index),remove(this.activeTo,index),remove(this.activeRank,index),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(trackOpen){let i=0,{value,to,rank}=this.cursor;for(;i<this.activeRank.length&&(rank-this.activeRank[i]||to-this.activeTo[i])>0;)i++;insert(this.active,i,value),insert(this.activeTo,i,to),insert(this.activeRank,i,rank),trackOpen&&insert(trackOpen,i,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let from=this.to,wasPoint=this.point;this.point=null;let trackOpen=this.openStart<0?[]:null;for(;;){let a=this.minActive;if(a>-1&&(this.activeTo[a]-this.cursor.from||this.active[a].endSide-this.cursor.startSide)<0){if(this.activeTo[a]>from){this.to=this.activeTo[a],this.endSide=this.active[a].endSide;break}this.removeActive(a),trackOpen&&remove(trackOpen,a)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>from){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let nextVal=this.cursor.value;if(nextVal.point){if(!(wasPoint&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=nextVal,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=nextVal.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(trackOpen),this.cursor.next()}}}if(trackOpen){this.openStart=0;for(let i=trackOpen.length-1;i>=0&&trackOpen[i]<from;i--)this.openStart++}}activeForPoint(to){if(!this.active.length)return this.active;let active=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>to||this.activeTo[i]==to&&this.active[i].endSide>=this.point.endSide)&&active.push(this.active[i]);return active.reverse()}openEnd(to){let open=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>to;i--)open++;return open}}function compare(a,startA,b,startB,length,comparator){a.goto(startA),b.goto(startB);let endB=startB+length,pos=startB,dPos=startB-startA;for(;;){let dEnd=a.to+dPos-b.to,diff=dEnd||a.endSide-b.endSide,end=diff<0?a.to+dPos:b.to,clipEnd=Math.min(end,endB);if(a.point||b.point?a.point&&b.point&&(a.point==b.point||a.point.eq(b.point))&&sameValues(a.activeForPoint(a.to),b.activeForPoint(b.to))||comparator.comparePoint(pos,clipEnd,a.point,b.point):clipEnd>pos&&!sameValues(a.active,b.active)&&comparator.compareRange(pos,clipEnd,a.active,b.active),end>endB)break;(dEnd||a.openEnd!=b.openEnd)&&comparator.boundChange&&comparator.boundChange(end),pos=end,diff<=0&&a.next(),diff>=0&&b.next()}}function sameValues(a,b){if(a.length!=b.length)return!1;for(let i=0;i<a.length;i++)if(a[i]!=b[i]&&!a[i].eq(b[i]))return!1;return!0}function remove(array,index){for(let i=index,e=array.length-1;i<e;i++)array[i]=array[i+1];array.pop()}function insert(array,index,value){for(let i=array.length-1;i>=index;i--)array[i+1]=array[i];array[index]=value}function findMinIndex(value,array){let found=-1,foundPos=1e9;for(let i=0;i<array.length;i++)(array[i]-foundPos||value[i].endSide-value[found].endSide)<0&&(found=i,foundPos=array[i]);return found}function countColumn(string,tabSize,to=string.length){let n=0;for(let i=0;i<to&&i<string.length;)9==string.charCodeAt(i)?(n+=tabSize-n%tabSize,i++):(n++,i=dist_findClusterBreak(string,i));return n}function findColumn(string,col,tabSize,strict){for(let i=0,n=0;;){if(n>=col)return i;if(i==string.length)break;n+=9==string.charCodeAt(i)?tabSize-n%tabSize:1,i=dist_findClusterBreak(string,i)}return!0===strict?-1:string.length}const COUNT="undefined"==typeof Symbol?"__ͼ":Symbol.for("ͼ"),SET="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),style_mod_top="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class StyleModule{constructor(spec,options){this.rules=[];let{finish}=options||{};function splitSelector(selector){return/^@/.test(selector)?[selector]:selector.split(/,\s*/)}function render(selectors,spec,target,isKeyframes){let local=[],isAt=/^@(\w+)\b/.exec(selectors[0]),keyframes=isAt&&"keyframes"==isAt[1];if(isAt&&null==spec)return target.push(selectors[0]+";");for(let prop in spec){let value=spec[prop];if(/&/.test(prop))render(prop.split(/,\s*/).map(part=>selectors.map(sel=>part.replace(/&/,sel))).reduce((a,b)=>a.concat(b)),value,target);else if(value&&"object"==typeof value){if(!isAt)throw new RangeError("The value of a property ("+prop+") should be a primitive value.");render(splitSelector(prop),value,local,keyframes)}else null!=value&&local.push(prop.replace(/_.*/,"").replace(/[A-Z]/g,l=>"-"+l.toLowerCase())+": "+value+";")}(local.length||keyframes)&&target.push((!finish||isAt||isKeyframes?selectors:selectors.map(finish)).join(", ")+" {"+local.join(" ")+"}")}for(let prop in spec)render(splitSelector(prop),spec[prop],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let id=style_mod_top[COUNT]||1;return style_mod_top[COUNT]=id+1,"ͼ"+id.toString(36)}static mount(root,modules,options){let set=root[SET],nonce=options&&options.nonce;set?nonce&&set.setNonce(nonce):set=new StyleSet(root,nonce),set.mount(Array.isArray(modules)?modules:[modules],root)}}let adoptedSet=new Map;class StyleSet{constructor(root,nonce){let doc=root.ownerDocument||root,win=doc.defaultView;if(!root.head&&root.adoptedStyleSheets&&win.CSSStyleSheet){let adopted=adoptedSet.get(doc);if(adopted)return root[SET]=adopted;this.sheet=new win.CSSStyleSheet,adoptedSet.set(doc,this)}else this.styleTag=doc.createElement("style"),nonce&&this.styleTag.setAttribute("nonce",nonce);this.modules=[],root[SET]=this}mount(modules,root){let sheet=this.sheet,pos=0,j=0;for(let i=0;i<modules.length;i++){let mod=modules[i],index=this.modules.indexOf(mod);if(index<j&&index>-1&&(this.modules.splice(index,1),j--,index=-1),-1==index){if(this.modules.splice(j++,0,mod),sheet)for(let k=0;k<mod.rules.length;k++)sheet.insertRule(mod.rules[k],pos++)}else{for(;j<index;)pos+=this.modules[j++].rules.length;pos+=mod.rules.length,j++}}if(sheet)root.adoptedStyleSheets.indexOf(this.sheet)<0&&(root.adoptedStyleSheets=[this.sheet,...root.adoptedStyleSheets]);else{let text="";for(let i=0;i<this.modules.length;i++)text+=this.modules[i].getRules()+"\n";this.styleTag.textContent=text;let target=root.head||root;this.styleTag.parentNode!=target&&target.insertBefore(this.styleTag,target.firstChild)}}setNonce(nonce){this.styleTag&&this.styleTag.getAttribute("nonce")!=nonce&&this.styleTag.setAttribute("nonce",nonce)}}for(var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),w3c_keyname_ie="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(i=1;i<=24;i++)base[i+111]="F"+i;for(i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function getSelection(root){let target;return target=11==root.nodeType?root.getSelection?root:root.ownerDocument:root,target.getSelection()}function contains(dom,node){return!!node&&(dom==node||dom.contains(1!=node.nodeType?node.parentNode:node))}function hasSelection(dom,selection){if(!selection.anchorNode)return!1;try{return contains(dom,selection.anchorNode)}catch(_){return!1}}function clientRectsFor(dom){return 3==dom.nodeType?textRange(dom,0,dom.nodeValue.length).getClientRects():1==dom.nodeType?dom.getClientRects():[]}function isEquivalentPosition(node,off,targetNode,targetOff){return!!targetNode&&(scanFor(node,off,targetNode,targetOff,-1)||scanFor(node,off,targetNode,targetOff,1))}function domIndex(node){for(var index=0;;index++)if(!(node=node.previousSibling))return index}function isBlockElement(node){return 1==node.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(node.nodeName)}function scanFor(node,off,targetNode,targetOff,dir){for(;;){if(node==targetNode&&off==targetOff)return!0;if(off==(dir<0?0:maxOffset(node))){if("DIV"==node.nodeName)return!1;let parent=node.parentNode;if(!parent||1!=parent.nodeType)return!1;off=domIndex(node)+(dir<0?0:1),node=parent}else{if(1!=node.nodeType)return!1;if(1==(node=node.childNodes[off+(dir<0?-1:0)]).nodeType&&"false"==node.contentEditable)return!1;off=dir<0?maxOffset(node):0}}}function maxOffset(node){return 3==node.nodeType?node.nodeValue.length:node.childNodes.length}function flattenRect(rect,left){let x=left?rect.left:rect.right;return{left:x,right:x,top:rect.top,bottom:rect.bottom}}function windowRect(win){let vp=win.visualViewport;return vp?{left:0,right:vp.width,top:0,bottom:vp.height}:{left:0,right:win.innerWidth,top:0,bottom:win.innerHeight}}function getScale(elt,rect){let scaleX=rect.width/elt.offsetWidth,scaleY=rect.height/elt.offsetHeight;return(scaleX>.995&&scaleX<1.005||!isFinite(scaleX)||Math.abs(rect.width-elt.offsetWidth)<1)&&(scaleX=1),(scaleY>.995&&scaleY<1.005||!isFinite(scaleY)||Math.abs(rect.height-elt.offsetHeight)<1)&&(scaleY=1),{scaleX,scaleY}}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(domSel){return this.anchorNode==domSel.anchorNode&&this.anchorOffset==domSel.anchorOffset&&this.focusNode==domSel.focusNode&&this.focusOffset==domSel.focusOffset}setRange(range){let{anchorNode,focusNode}=range;this.set(anchorNode,Math.min(range.anchorOffset,anchorNode?maxOffset(anchorNode):0),focusNode,Math.min(range.focusOffset,focusNode?maxOffset(focusNode):0))}set(anchorNode,anchorOffset,focusNode,focusOffset){this.anchorNode=anchorNode,this.anchorOffset=anchorOffset,this.focusNode=focusNode,this.focusOffset=focusOffset}}let scratchRange,preventScrollSupported=null;function focusPreventScroll(dom){if(dom.setActive)return dom.setActive();if(preventScrollSupported)return dom.focus(preventScrollSupported);let stack=[];for(let cur=dom;cur&&(stack.push(cur,cur.scrollTop,cur.scrollLeft),cur!=cur.ownerDocument);cur=cur.parentNode);if(dom.focus(null==preventScrollSupported?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let i=0;i<stack.length;){let elt=stack[i++],top=stack[i++],left=stack[i++];elt.scrollTop!=top&&(elt.scrollTop=top),elt.scrollLeft!=left&&(elt.scrollLeft=left)}}}function textRange(node,from,to=from){let range=scratchRange||(scratchRange=document.createRange());return range.setEnd(node,to),range.setStart(node,from),range}function dispatchKey(elt,name,code,mods){let options={key:name,code:name,keyCode:code,which:code,cancelable:!0};mods&&({altKey:options.altKey,ctrlKey:options.ctrlKey,shiftKey:options.shiftKey,metaKey:options.metaKey}=mods);let down=new KeyboardEvent("keydown",options);down.synthetic=!0,elt.dispatchEvent(down);let up=new KeyboardEvent("keyup",options);return up.synthetic=!0,elt.dispatchEvent(up),down.defaultPrevented||up.defaultPrevented}function clearAttributes(node){for(;node.attributes.length;)node.removeAttributeNode(node.attributes[0])}function isScrolledToBottom(elt){return elt.scrollTop>Math.max(1,elt.scrollHeight-elt.clientHeight-4)}function textNodeBefore(startNode,startOffset){for(let node=startNode,offset=startOffset;;){if(3==node.nodeType&&offset>0)return{node,offset};if(1==node.nodeType&&offset>0){if("false"==node.contentEditable)return null;node=node.childNodes[offset-1],offset=maxOffset(node)}else{if(!node.parentNode||isBlockElement(node))return null;offset=domIndex(node),node=node.parentNode}}}function textNodeAfter(startNode,startOffset){for(let node=startNode,offset=startOffset;;){if(3==node.nodeType&&offset<node.nodeValue.length)return{node,offset};if(1==node.nodeType&&offset<node.childNodes.length){if("false"==node.contentEditable)return null;node=node.childNodes[offset],offset=0}else{if(!node.parentNode||isBlockElement(node))return null;offset=domIndex(node)+1,node=node.parentNode}}}class DOMPos{constructor(node,offset,precise=!0){this.node=node,this.offset=offset,this.precise=precise}static before(dom,precise){return new DOMPos(dom.parentNode,domIndex(dom),precise)}static after(dom,precise){return new DOMPos(dom.parentNode,domIndex(dom)+1,precise)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(view){let pos=this.posAtStart;for(let child of this.children){if(child==view)return pos;pos+=child.length+child.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(view){return this.posBefore(view)+view.length}sync(view,track){if(2&this.flags){let next,parent=this.dom,prev=null;for(let child of this.children){if(7&child.flags){if(!child.dom&&(next=prev?prev.nextSibling:parent.firstChild)){let contentView=ContentView.get(next);(!contentView||!contentView.parent&&contentView.canReuseDOM(child))&&child.reuseDOM(next)}child.sync(view,track),child.flags&=-8}if(next=prev?prev.nextSibling:parent.firstChild,track&&!track.written&&track.node==parent&&next!=child.dom&&(track.written=!0),child.dom.parentNode==parent)for(;next&&next!=child.dom;)next=rm$1(next);else parent.insertBefore(child.dom,next);prev=child.dom}for(next=prev?prev.nextSibling:parent.firstChild,next&&track&&track.node==parent&&(track.written=!0);next;)next=rm$1(next)}else if(1&this.flags)for(let child of this.children)7&child.flags&&(child.sync(view,track),child.flags&=-8)}reuseDOM(_dom){}localPosFromDOM(node,offset){let after;if(node==this.dom)after=this.dom.childNodes[offset];else{let bias=0==maxOffset(node)?0:0==offset?-1:1;for(;;){let parent=node.parentNode;if(parent==this.dom)break;0==bias&&parent.firstChild!=parent.lastChild&&(bias=node==parent.firstChild?-1:1),node=parent}after=bias<0?node:node.nextSibling}if(after==this.dom.firstChild)return 0;for(;after&&!ContentView.get(after);)after=after.nextSibling;if(!after)return this.length;for(let i=0,pos=0;;i++){let child=this.children[i];if(child.dom==after)return pos;pos+=child.length+child.breakAfter}}domBoundsAround(from,to,offset=0){let fromI=-1,fromStart=-1,toI=-1,toEnd=-1;for(let i=0,pos=offset,prevEnd=offset;i<this.children.length;i++){let child=this.children[i],end=pos+child.length;if(pos<from&&end>to)return child.domBoundsAround(from,to,pos);if(end>=from&&-1==fromI&&(fromI=i,fromStart=pos),pos>to&&child.dom.parentNode==this.dom){toI=i,toEnd=prevEnd;break}prevEnd=end,pos=end+child.breakAfter}return{from:fromStart,to:toEnd<0?offset+this.length:toEnd,startDOM:(fromI?this.children[fromI-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:toI<this.children.length&&toI>=0?this.children[toI].dom:null}}markDirty(andParent=!1){this.flags|=2,this.markParentsDirty(andParent)}markParentsDirty(childList){for(let parent=this.parent;parent;parent=parent.parent){if(childList&&(parent.flags|=2),1&parent.flags)return;parent.flags|=1,childList=!1}}setParent(parent){this.parent!=parent&&(this.parent=parent,7&this.flags&&this.markParentsDirty(!0))}setDOM(dom){this.dom!=dom&&(this.dom&&(this.dom.cmView=null),this.dom=dom,dom.cmView=this)}get rootView(){for(let v=this;;){let parent=v.parent;if(!parent)return v;v=parent}}replaceChildren(from,to,children=noChildren){this.markDirty();for(let i=from;i<to;i++){let child=this.children[i];child.parent==this&&children.indexOf(child)<0&&child.destroy()}children.length<250?this.children.splice(from,to-from,...children):this.children=[].concat(this.children.slice(0,from),children,this.children.slice(to));for(let i=0;i<children.length;i++)children[i].setParent(this)}ignoreMutation(_rec){return!1}ignoreEvent(_event){return!1}childCursor(pos=this.length){return new ChildCursor(this.children,pos,this.children.length)}childPos(pos,bias=1){return this.childCursor().findPos(pos,bias)}toString(){let name=this.constructor.name.replace("View","");return name+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==name?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(node){return node.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(from,to,source,hasStart,openStart,openEnd){return!1}become(other){return!1}canReuseDOM(other){return other.constructor==this.constructor&&!(8&(this.flags|other.flags))}getSide(){return 0}destroy(){for(let child of this.children)child.parent==this&&child.destroy();this.parent=null}}function rm$1(dom){let next=dom.nextSibling;return dom.parentNode.removeChild(dom),next}ContentView.prototype.breakAfter=0;class ChildCursor{constructor(children,pos,i){this.children=children,this.pos=pos,this.i=i,this.off=0}findPos(pos,bias=1){for(;;){if(pos>this.pos||pos==this.pos&&(bias>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=pos-this.pos,this;let next=this.children[--this.i];this.pos-=next.length+next.breakAfter}}}function replaceRange(parent,fromI,fromOff,toI,toOff,insert,breakAtStart,openStart,openEnd){let{children}=parent,before=children.length?children[fromI]:null,last=insert.length?insert[insert.length-1]:null,breakAtEnd=last?last.breakAfter:breakAtStart;if(!(fromI==toI&&before&&!breakAtStart&&!breakAtEnd&&insert.length<2&&before.merge(fromOff,toOff,insert.length?last:null,0==fromOff,openStart,openEnd))){if(toI<children.length){let after=children[toI];after&&(toOff<after.length||after.breakAfter&&(null==last?void 0:last.breakAfter))?(fromI==toI&&(after=after.split(toOff),toOff=0),!breakAtEnd&&last&&after.merge(0,toOff,last,!0,0,openEnd)?insert[insert.length-1]=after:((toOff||after.children.length&&!after.children[0].length)&&after.merge(0,toOff,null,!1,0,openEnd),insert.push(after))):(null==after?void 0:after.breakAfter)&&(last?last.breakAfter=1:breakAtStart=1),toI++}for(before&&(before.breakAfter=breakAtStart,fromOff>0&&(!breakAtStart&&insert.length&&before.merge(fromOff,before.length,insert[0],!1,openStart,0)?before.breakAfter=insert.shift().breakAfter:(fromOff<before.length||before.children.length&&0==before.children[before.children.length-1].length)&&before.merge(fromOff,before.length,null,!1,openStart,0),fromI++));fromI<toI&&insert.length;)if(children[toI-1].become(insert[insert.length-1]))toI--,insert.pop(),openEnd=insert.length?0:openStart;else{if(!children[fromI].become(insert[0]))break;fromI++,insert.shift(),openStart=insert.length?0:openEnd}!insert.length&&fromI&&toI<children.length&&!children[fromI-1].breakAfter&&children[toI].merge(0,0,children[fromI-1],!1,openStart,openEnd)&&fromI--,(fromI<toI||insert.length)&&parent.replaceChildren(fromI,toI,insert)}}function mergeChildrenInto(parent,from,to,insert,openStart,openEnd){let cur=parent.childCursor(),{i:toI,off:toOff}=cur.findPos(to,1),{i:fromI,off:fromOff}=cur.findPos(from,-1),dLen=from-to;for(let view of insert)dLen+=view.length;parent.length+=dLen,replaceRange(parent,fromI,fromOff,toI,toOff,insert,0,openStart,openEnd)}let nav="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},doc="undefined"!=typeof document?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),dist_ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!dist_ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!dist_ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!dist_ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie:dist_ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit,safari,webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,tabSize:null!=doc.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class TextView extends ContentView{constructor(text){super(),this.text=text}get length(){return this.text.length}createDOM(textDOM){this.setDOM(textDOM||document.createTextNode(this.text))}sync(view,track){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(track&&track.node==this.dom&&(track.written=!0),this.dom.nodeValue=this.text)}reuseDOM(dom){3==dom.nodeType&&this.createDOM(dom)}merge(from,to,source){return!(8&this.flags||source&&(!(source instanceof TextView)||this.length-(to-from)+source.length>256||8&source.flags))&&(this.text=this.text.slice(0,from)+(source?source.text:"")+this.text.slice(to),this.markDirty(),!0)}split(from){let result=new TextView(this.text.slice(from));return this.text=this.text.slice(0,from),this.markDirty(),result.flags|=8&this.flags,result}localPosFromDOM(node,offset){return node==this.dom?offset:offset?this.text.length:0}domAtPos(pos){return new DOMPos(this.dom,pos)}domBoundsAround(_from,_to,offset){return{from:offset,to:offset+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(pos,side){return function textCoords(text,pos,side){let length=text.nodeValue.length;pos>length&&(pos=length);let from=pos,to=pos,flatten=0;0==pos&&side<0||pos==length&&side>=0?browser.chrome||browser.gecko||(pos?(from--,flatten=1):to<length&&(to++,flatten=-1)):side<0?from--:to<length&&to++;let rects=textRange(text,from,to).getClientRects();if(!rects.length)return null;let rect=rects[(flatten?flatten<0:side>=0)?0:rects.length-1];browser.safari&&!flatten&&0==rect.width&&(rect=Array.prototype.find.call(rects,r=>r.width)||rect);return flatten?flattenRect(rect,flatten<0):rect||null}(this.dom,pos,side)}}class MarkView extends ContentView{constructor(mark,children=[],length=0){super(),this.mark=mark,this.children=children,this.length=length;for(let ch of children)ch.setParent(this)}setAttrs(dom){if(clearAttributes(dom),this.mark.class&&(dom.className=this.mark.class),this.mark.attrs)for(let name in this.mark.attrs)dom.setAttribute(name,this.mark.attrs[name]);return dom}canReuseDOM(other){return super.canReuseDOM(other)&&!(8&(this.flags|other.flags))}reuseDOM(node){node.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(node),this.flags|=6)}sync(view,track){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(view,track)}merge(from,to,source,_hasStart,openStart,openEnd){return(!source||!(!(source instanceof MarkView&&source.mark.eq(this.mark))||from&&openStart<=0||to<this.length&&openEnd<=0))&&(mergeChildrenInto(this,from,to,source?source.children.slice():[],openStart-1,openEnd-1),this.markDirty(),!0)}split(from){let result=[],off=0,detachFrom=-1,i=0;for(let elt of this.children){let end=off+elt.length;end>from&&result.push(off<from?elt.split(from-off):elt),detachFrom<0&&off>=from&&(detachFrom=i),off=end,i++}let length=this.length-from;return this.length=from,detachFrom>-1&&(this.children.length=detachFrom,this.markDirty()),new MarkView(this.mark,result,length)}domAtPos(pos){return inlineDOMAtPos(this,pos)}coordsAt(pos,side){return coordsInChildren(this,pos,side)}}class WidgetView extends ContentView{static create(widget,length,side){return new WidgetView(widget,length,side)}constructor(widget,length,side){super(),this.widget=widget,this.length=length,this.side=side,this.prevWidget=null}split(from){let result=WidgetView.create(this.widget,this.length-from,this.side);return this.length-=from,result}sync(view){this.dom&&this.widget.updateDOM(this.dom,view)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(view)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(from,to,source,hasStart,openStart,openEnd){return!(source&&(!(source instanceof WidgetView&&this.widget.compare(source.widget))||from>0&&openStart<=0||to<this.length&&openEnd<=0))&&(this.length=from+(source?source.length:0)+(this.length-to),!0)}become(other){return other instanceof WidgetView&&other.side==this.side&&this.widget.constructor==other.widget.constructor&&(this.widget.compare(other.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=other.widget,this.length=other.length,!0)}ignoreMutation(){return!0}ignoreEvent(event){return this.widget.ignoreEvent(event)}get overrideDOMText(){if(0==this.length)return Text.empty;let top=this;for(;top.parent;)top=top.parent;let{view}=top,text=view&&view.state.doc,start=this.posAtStart;return text?text.slice(start,start+this.length):Text.empty}domAtPos(pos){return(this.length?0==pos:this.side>0)?DOMPos.before(this.dom):DOMPos.after(this.dom,pos==this.length)}domBoundsAround(){return null}coordsAt(pos,side){let custom=this.widget.coordsAt(this.dom,pos,side);if(custom)return custom;let rects=this.dom.getClientRects(),rect=null;if(!rects.length)return null;let fromBack=this.side?this.side<0:pos>0;for(let i=fromBack?rects.length-1:0;rect=rects[i],!(pos>0?0==i:i==rects.length-1||rect.top<rect.bottom);i+=fromBack?-1:1);return flattenRect(rect,!fromBack)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class WidgetBufferView extends ContentView{constructor(side){super(),this.side=side}get length(){return 0}merge(){return!1}become(other){return other instanceof WidgetBufferView&&other.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let dom=document.createElement("img");dom.className="cm-widgetBuffer",dom.setAttribute("aria-hidden","true"),this.setDOM(dom)}}getSide(){return this.side}domAtPos(pos){return this.side>0?DOMPos.before(this.dom):DOMPos.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(pos){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Text.empty}get isHidden(){return!0}}function inlineDOMAtPos(parent,pos){let dom=parent.dom,{children}=parent,i=0;for(let off=0;i<children.length;i++){let child=children[i],end=off+child.length;if(!(end==off&&child.getSide()<=0)){if(pos>off&&pos<end&&child.dom.parentNode==dom)return child.domAtPos(pos-off);if(pos<=off)break;off=end}}for(let j=i;j>0;j--){let prev=children[j-1];if(prev.dom.parentNode==dom)return prev.domAtPos(prev.length)}for(let j=i;j<children.length;j++){let next=children[j];if(next.dom.parentNode==dom)return next.domAtPos(0)}return new DOMPos(dom,0)}function joinInlineInto(parent,view,open){let last,{children}=parent;open>0&&view instanceof MarkView&&children.length&&(last=children[children.length-1])instanceof MarkView&&last.mark.eq(view.mark)?joinInlineInto(last,view.children[0],open-1):(children.push(view),view.setParent(parent)),parent.length+=view.length}function coordsInChildren(view,pos,side){let before=null,beforePos=-1,after=null,afterPos=-1;!function scan(view,pos){for(let i=0,off=0;i<view.children.length&&off<=pos;i++){let child=view.children[i],end=off+child.length;end>=pos&&(child.children.length?scan(child,pos-off):(!after||after.isHidden&&(side>0||onSameLine(after,child)))&&(end>pos||off==end&&child.getSide()>0)?(after=child,afterPos=pos-off):(off<pos||off==end&&child.getSide()<0&&!child.isHidden)&&(before=child,beforePos=pos-off)),off=end}}(view,pos);let target=(side<0?before:after)||before||after;return target?target.coordsAt(Math.max(0,target==before?beforePos:afterPos),side):function fallbackRect(view){let last=view.dom.lastChild;if(!last)return view.dom.getBoundingClientRect();let rects=clientRectsFor(last);return rects[rects.length-1]||null}(view)}function onSameLine(a,b){let posA=a.coordsAt(0,1),posB=b.coordsAt(0,1);return posA&&posB&&posB.top<posA.bottom}function combineAttrs(source,target){for(let name in source)"class"==name&&target.class?target.class+=" "+source.class:"style"==name&&target.style?target.style+=";"+source.style:target[name]=source[name];return target}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;const noAttrs=Object.create(null);function attrsEq(a,b,ignore){if(a==b)return!0;a||(a=noAttrs),b||(b=noAttrs);let keysA=Object.keys(a),keysB=Object.keys(b);if(keysA.length-(ignore&&keysA.indexOf(ignore)>-1?1:0)!=keysB.length-(ignore&&keysB.indexOf(ignore)>-1?1:0))return!1;for(let key of keysA)if(key!=ignore&&(-1==keysB.indexOf(key)||a[key]!==b[key]))return!1;return!0}function updateAttrs(dom,prev,attrs){let changed=!1;if(prev)for(let name in prev)attrs&&name in attrs||(changed=!0,"style"==name?dom.style.cssText="":dom.removeAttribute(name));if(attrs)for(let name in attrs)prev&&prev[name]==attrs[name]||(changed=!0,"style"==name?dom.style.cssText=attrs[name]:dom.setAttribute(name,attrs[name]));return changed}function getAttrs(dom){let attrs=Object.create(null);for(let i=0;i<dom.attributes.length;i++){let attr=dom.attributes[i];attrs[attr.name]=attr.value}return attrs}class WidgetType{eq(widget){return!1}updateDOM(dom,view){return!1}compare(other){return this==other||this.constructor==other.constructor&&this.eq(other)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(event){return!0}coordsAt(dom,pos,side){return null}get isHidden(){return!1}get editable(){return!1}destroy(dom){}}var BlockType=function(BlockType){return BlockType[BlockType.Text=0]="Text",BlockType[BlockType.WidgetBefore=1]="WidgetBefore",BlockType[BlockType.WidgetAfter=2]="WidgetAfter",BlockType[BlockType.WidgetRange=3]="WidgetRange",BlockType}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(startSide,endSide,widget,spec){super(),this.startSide=startSide,this.endSide=endSide,this.widget=widget,this.spec=spec}get heightRelevant(){return!1}static mark(spec){return new MarkDecoration(spec)}static widget(spec){let side=Math.max(-1e4,Math.min(1e4,spec.side||0)),block=!!spec.block;return side+=block&&!spec.inlineOrder?side>0?3e8:-4e8:side>0?1e8:-1e8,new PointDecoration(spec,side,side,block,spec.widget||null,!1)}static replace(spec){let startSide,endSide,block=!!spec.block;if(spec.isBlockGap)startSide=-5e8,endSide=4e8;else{let{start,end}=getInclusive(spec,block);startSide=(start?block?-3e8:-1:5e8)-1,endSide=1+(end?block?2e8:1:-6e8)}return new PointDecoration(spec,startSide,endSide,block,spec.widget||null,!0)}static line(spec){return new LineDecoration(spec)}static set(of,sort=!1){return dist_RangeSet.of(of,sort)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}Decoration.none=dist_RangeSet.empty;class MarkDecoration extends Decoration{constructor(spec){let{start,end}=getInclusive(spec);super(start?-1:5e8,end?1:-6e8,null,spec),this.tagName=spec.tagName||"span",this.class=spec.class||"",this.attrs=spec.attributes||null}eq(other){var _a,_b;return this==other||other instanceof MarkDecoration&&this.tagName==other.tagName&&(this.class||(null===(_a=this.attrs)||void 0===_a?void 0:_a.class))==(other.class||(null===(_b=other.attrs)||void 0===_b?void 0:_b.class))&&attrsEq(this.attrs,other.attrs,"class")}range(from,to=from){if(from>=to)throw new RangeError("Mark decorations may not be empty");return super.range(from,to)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(spec){super(-2e8,-2e8,null,spec)}eq(other){return other instanceof LineDecoration&&this.spec.class==other.spec.class&&attrsEq(this.spec.attributes,other.spec.attributes)}range(from,to=from){if(to!=from)throw new RangeError("Line decoration ranges must be zero-length");return super.range(from,to)}}LineDecoration.prototype.mapMode=dist_MapMode.TrackBefore,LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(spec,startSide,endSide,block,widget,isReplace){super(startSide,endSide,widget,spec),this.block=block,this.isReplace=isReplace,this.mapMode=block?startSide<=0?dist_MapMode.TrackBefore:dist_MapMode.TrackAfter:dist_MapMode.TrackDel}get type(){return this.startSide!=this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(other){return other instanceof PointDecoration&&function widgetsEq(a,b){return a==b||!!(a&&b&&a.compare(b))}(this.widget,other.widget)&&this.block==other.block&&this.startSide==other.startSide&&this.endSide==other.endSide}range(from,to=from){if(this.isReplace&&(from>to||from==to&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&to!=from)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(from,to)}}function getInclusive(spec,block=!1){let{inclusiveStart:start,inclusiveEnd:end}=spec;return null==start&&(start=spec.inclusive),null==end&&(end=spec.inclusive),{start:null!=start?start:block,end:null!=end?end:block}}function addRange(from,to,ranges,margin=0){let last=ranges.length-1;last>=0&&ranges[last]+margin>=from?ranges[last]=Math.max(ranges[last],to):ranges.push(from,to)}PointDecoration.prototype.point=!0;class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(from,to,source,hasStart,openStart,openEnd){if(source){if(!(source instanceof LineView))return!1;this.dom||source.transferDOM(this)}return hasStart&&this.setDeco(source?source.attrs:null),mergeChildrenInto(this,from,to,source?source.children.slice():[],openStart,openEnd),!0}split(at){let end=new LineView;if(end.breakAfter=this.breakAfter,0==this.length)return end;let{i,off}=this.childPos(at);off&&(end.append(this.children[i].split(off),0),this.children[i].merge(off,this.children[i].length,null,!1,0,0),i++);for(let j=i;j<this.children.length;j++)end.append(this.children[j],0);for(;i>0&&0==this.children[i-1].length;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=at,end}transferDOM(other){this.dom&&(this.markDirty(),other.setDOM(this.dom),other.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(attrs){attrsEq(this.attrs,attrs)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=attrs)}append(child,openStart){joinInlineInto(this,child,openStart)}addLineDeco(deco){let attrs=deco.spec.attributes,cls=deco.spec.class;attrs&&(this.attrs=combineAttrs(attrs,this.attrs||{})),cls&&(this.attrs=combineAttrs({class:cls},this.attrs||{}))}domAtPos(pos){return inlineDOMAtPos(this,pos)}reuseDOM(node){"DIV"==node.nodeName&&(this.setDOM(node),this.flags|=6)}sync(view,track){var _a;this.dom?4&this.flags&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(view,track);let last=this.dom.lastChild;for(;last&&ContentView.get(last)instanceof MarkView;)last=last.lastChild;if(!(last&&this.length&&("BR"==last.nodeName||0!=(null===(_a=ContentView.get(last))||void 0===_a?void 0:_a.isEditable)||browser.ios&&this.children.some(ch=>ch instanceof TextView)))){let hack=document.createElement("BR");hack.cmIgnore=!0,this.dom.appendChild(hack)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let textHeight,totalWidth=0;for(let child of this.children){if(!(child instanceof TextView)||/[^ -~]/.test(child.text))return null;let rects=clientRectsFor(child.dom);if(1!=rects.length)return null;totalWidth+=rects[0].width,textHeight=rects[0].height}return totalWidth?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:totalWidth/this.length,textHeight}:null}coordsAt(pos,side){let rect=coordsInChildren(this,pos,side);if(!this.children.length&&rect&&this.parent){let{heightOracle}=this.parent.view.viewState,height=rect.bottom-rect.top;if(Math.abs(height-heightOracle.lineHeight)<2&&heightOracle.textHeight<height){let dist=(height-heightOracle.textHeight)/2;return{top:rect.top+dist,bottom:rect.bottom-dist,left:rect.left,right:rect.left}}}return rect}become(other){return other instanceof LineView&&0==this.children.length&&0==other.children.length&&attrsEq(this.attrs,other.attrs)&&this.breakAfter==other.breakAfter}covers(){return!0}static find(docView,pos){for(let i=0,off=0;i<docView.children.length;i++){let block=docView.children[i],end=off+block.length;if(end>=pos){if(block instanceof LineView)return block;if(end>pos)break}off=end+block.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(widget,length,deco){super(),this.widget=widget,this.length=length,this.deco=deco,this.breakAfter=0,this.prevWidget=null}merge(from,to,source,_takeDeco,openStart,openEnd){return!(source&&(!(source instanceof BlockWidgetView&&this.widget.compare(source.widget))||from>0&&openStart<=0||to<this.length&&openEnd<=0))&&(this.length=from+(source?source.length:0)+(this.length-to),!0)}domAtPos(pos){return 0==pos?DOMPos.before(this.dom):DOMPos.after(this.dom,pos==this.length)}split(at){let len=this.length-at;this.length=at;let end=new BlockWidgetView(this.widget,len,this.deco);return end.breakAfter=this.breakAfter,end}get children(){return noChildren}sync(view){this.dom&&this.widget.updateDOM(this.dom,view)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(view)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become(other){return other instanceof BlockWidgetView&&other.widget.constructor==this.widget.constructor&&(other.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=other.widget,this.length=other.length,this.deco=other.deco,this.breakAfter=other.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(event){return this.widget.ignoreEvent(event)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(pos,side){let custom=this.widget.coordsAt(this.dom,pos,side);return custom||(this.widget instanceof BlockGapWidget?null:flattenRect(this.dom.getBoundingClientRect(),this.length?0==pos:side<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(side){let{startSide,endSide}=this.deco;return startSide!=endSide&&(side<0?startSide<0:endSide>0)}}class BlockGapWidget extends WidgetType{constructor(height){super(),this.height=height}toDOM(){let elt=document.createElement("div");return elt.className="cm-gap",this.updateDOM(elt),elt}eq(other){return other.height==this.height}updateDOM(elt){return elt.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ContentBuilder{constructor(doc,pos,end,disallowBlockEffectsFor){this.doc=doc,this.pos=pos,this.end=end,this.disallowBlockEffectsFor=disallowBlockEffectsFor,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=doc.iter(),this.skip=pos}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let last=this.content[this.content.length-1];return!(last.breakAfter||last instanceof BlockWidgetView&&last.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(active=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),active),active.length),this.pendingBuffer=0)}addBlockWidget(view){this.flushBuffer(),this.curLine=null,this.content.push(view)}finish(openEnd){this.pendingBuffer&&openEnd<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||openEnd&&this.content.length&&this.content[this.content.length-1]instanceof BlockWidgetView||this.getLine()}buildText(length,active,openStart){for(;length>0;){if(this.textOff==this.text.length){let{value,lineBreak,done}=this.cursor.next(this.skip);if(this.skip=0,done)throw new Error("Ran out of text content when drawing inline views");if(lineBreak){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,length--;continue}this.text=value,this.textOff=0}let take=Math.min(this.text.length-this.textOff,length,512);this.flushBuffer(active.slice(active.length-openStart)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+take)),active),openStart),this.atCursorPos=!0,this.textOff+=take,length-=take,openStart=0}}span(from,to,active,openStart){this.buildText(to-from,active,openStart),this.pos=to,this.openStart<0&&(this.openStart=openStart)}point(from,to,deco,active,openStart,index){if(this.disallowBlockEffectsFor[index]&&deco instanceof PointDecoration){if(deco.block)throw new RangeError("Block decorations may not be specified via plugins");if(to>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let len=to-from;if(deco instanceof PointDecoration)if(deco.block)deco.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(deco.widget||NullWidget.block,len,deco));else{let view=WidgetView.create(deco.widget||NullWidget.inline,len,len?0:deco.startSide),cursorBefore=this.atCursorPos&&!view.isEditable&&openStart<=active.length&&(from<to||deco.startSide>0),cursorAfter=!view.isEditable&&(from<to||openStart>active.length||deco.startSide<=0),line=this.getLine();2!=this.pendingBuffer||cursorBefore||view.isEditable||(this.pendingBuffer=0),this.flushBuffer(active),cursorBefore&&(line.append(wrapMarks(new WidgetBufferView(1),active),openStart),openStart=active.length+Math.max(0,openStart-active.length)),line.append(wrapMarks(view,active),openStart),this.atCursorPos=cursorAfter,this.pendingBuffer=cursorAfter?from<to||openStart>active.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=active.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(deco);len&&(this.textOff+len<=this.text.length?this.textOff+=len:(this.skip+=len-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=to),this.openStart<0&&(this.openStart=openStart)}static build(text,from,to,decorations,dynamicDecorationMap){let builder=new ContentBuilder(text,from,to,dynamicDecorationMap);return builder.openEnd=dist_RangeSet.spans(decorations,from,to,builder),builder.openStart<0&&(builder.openStart=builder.openEnd),builder.finish(builder.openEnd),builder}}function wrapMarks(view,active){for(let mark of active)view=new MarkView(mark,[view],view.length);return view}class NullWidget extends WidgetType{constructor(tag){super(),this.tag=tag}eq(other){return other.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(elt){return elt.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}NullWidget.inline=new NullWidget("span"),NullWidget.block=new NullWidget("div");var Direction=function(Direction){return Direction[Direction.LTR=0]="LTR",Direction[Direction.RTL=1]="RTL",Direction}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(str){let result=[];for(let i=0;i<str.length;i++)result.push(1<<+str[i]);return result}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let p of["()","[]","{}"]){let l=p.charCodeAt(0),r=p.charCodeAt(1);Brackets[l]=r,Brackets[r]=-l}function charType(ch){return ch<=247?LowTypes[ch]:1424<=ch&&ch<=1524?2:1536<=ch&&ch<=1785?ArabicTypes[ch-1536]:1774<=ch&&ch<=2220?4:8192<=ch&&ch<=8204?256:64336<=ch&&ch<=65023?4:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{get dir(){return this.level%2?RTL:LTR}constructor(from,to,level){this.from=from,this.to=to,this.level=level}side(end,dir){return this.dir==dir==end?this.to:this.from}forward(forward,dir){return forward==(this.dir==dir)}static find(order,index,level,assoc){let maybe=-1;for(let i=0;i<order.length;i++){let span=order[i];if(span.from<=index&&span.to>=index){if(span.level==level)return i;(maybe<0||(0!=assoc?assoc<0?span.from<index:span.to>index:order[maybe].level>span.level))&&(maybe=i)}}if(maybe<0)throw new RangeError("Index out of range");return maybe}}function isolatesEq(a,b){if(a.length!=b.length)return!1;for(let i=0;i<a.length;i++){let iA=a[i],iB=b[i];if(iA.from!=iB.from||iA.to!=iB.to||iA.direction!=iB.direction||!isolatesEq(iA.inner,iB.inner))return!1}return!0}const types=[];function emitSpans(line,from,to,level,baseLevel,isolates,order){let ourType=level%2?2:1;if(level%2==baseLevel%2)for(let iCh=from,iI=0;iCh<to;){let sameDir=!0,isNum=!1;if(iI==isolates.length||iCh<isolates[iI].from){let next=types[iCh];next!=ourType&&(sameDir=!1,isNum=16==next)}let recurse=sameDir||1!=ourType?null:[],localLevel=sameDir?level:level+1,iScan=iCh;run:for(;;)if(iI<isolates.length&&iScan==isolates[iI].from){if(isNum)break run;let iso=isolates[iI];if(!sameDir)for(let upto=iso.to,jI=iI+1;;){if(upto==to)break run;if(!(jI<isolates.length&&isolates[jI].from==upto)){if(types[upto]==ourType)break run;break}upto=isolates[jI++].to}if(iI++,recurse)recurse.push(iso);else{iso.from>iCh&&order.push(new BidiSpan(iCh,iso.from,localLevel)),computeSectionOrder(line,iso.direction==LTR!=!(localLevel%2)?level+1:level,baseLevel,iso.inner,iso.from,iso.to,order),iCh=iso.to}iScan=iso.to}else{if(iScan==to||(sameDir?types[iScan]!=ourType:types[iScan]==ourType))break;iScan++}recurse?emitSpans(line,iCh,iScan,level+1,baseLevel,recurse,order):iCh<iScan&&order.push(new BidiSpan(iCh,iScan,localLevel)),iCh=iScan}else for(let iCh=to,iI=isolates.length;iCh>from;){let sameDir=!0,isNum=!1;if(!iI||iCh>isolates[iI-1].to){let next=types[iCh-1];next!=ourType&&(sameDir=!1,isNum=16==next)}let recurse=sameDir||1!=ourType?null:[],localLevel=sameDir?level:level+1,iScan=iCh;run:for(;;)if(iI&&iScan==isolates[iI-1].to){if(isNum)break run;let iso=isolates[--iI];if(!sameDir)for(let upto=iso.from,jI=iI;;){if(upto==from)break run;if(!jI||isolates[jI-1].to!=upto){if(types[upto-1]==ourType)break run;break}upto=isolates[--jI].from}if(recurse)recurse.push(iso);else{iso.to<iCh&&order.push(new BidiSpan(iso.to,iCh,localLevel)),computeSectionOrder(line,iso.direction==LTR!=!(localLevel%2)?level+1:level,baseLevel,iso.inner,iso.from,iso.to,order),iCh=iso.from}iScan=iso.from}else{if(iScan==from||(sameDir?types[iScan-1]!=ourType:types[iScan-1]==ourType))break;iScan--}recurse?emitSpans(line,iScan,iCh,level+1,baseLevel,recurse,order):iScan<iCh&&order.push(new BidiSpan(iScan,iCh,localLevel)),iCh=iScan}}function computeSectionOrder(line,level,baseLevel,isolates,from,to,order){let outerType=level%2?2:1;!function computeCharTypes(line,rFrom,rTo,isolates,outerType){for(let iI=0;iI<=isolates.length;iI++){let from=iI?isolates[iI-1].to:rFrom,to=iI<isolates.length?isolates[iI].from:rTo,prevType=iI?256:outerType;for(let i=from,prev=prevType,prevStrong=prevType;i<to;i++){let type=charType(line.charCodeAt(i));512==type?type=prev:8==type&&4==prevStrong&&(type=16),types[i]=4==type?2:type,7&type&&(prevStrong=type),prev=type}for(let i=from,prev=prevType,prevStrong=prevType;i<to;i++){let type=types[i];if(128==type)i<to-1&&prev==types[i+1]&&24&prev?type=types[i]=prev:types[i]=256;else if(64==type){let end=i+1;for(;end<to&&64==types[end];)end++;let replace=i&&8==prev||end<rTo&&8==types[end]?1==prevStrong?1:8:256;for(let j=i;j<end;j++)types[j]=replace;i=end-1}else 8==type&&1==prevStrong&&(types[i]=1);prev=type,7&type&&(prevStrong=type)}}}(line,from,to,isolates,outerType),function processBracketPairs(line,rFrom,rTo,isolates,outerType){let oppositeType=1==outerType?2:1;for(let iI=0,sI=0,context=0;iI<=isolates.length;iI++){let from=iI?isolates[iI-1].to:rFrom,to=iI<isolates.length?isolates[iI].from:rTo;for(let ch,br,type,i=from;i<to;i++)if(br=Brackets[ch=line.charCodeAt(i)])if(br<0){for(let sJ=sI-3;sJ>=0;sJ-=3)if(BracketStack[sJ+1]==-br){let flags=BracketStack[sJ+2],type=2&flags?outerType:4&flags?1&flags?oppositeType:outerType:0;type&&(types[i]=types[BracketStack[sJ]]=type),sI=sJ;break}}else{if(189==BracketStack.length)break;BracketStack[sI++]=i,BracketStack[sI++]=ch,BracketStack[sI++]=context}else if(2==(type=types[i])||1==type){let embed=type==outerType;context=embed?0:1;for(let sJ=sI-3;sJ>=0;sJ-=3){let cur=BracketStack[sJ+2];if(2&cur)break;if(embed)BracketStack[sJ+2]|=2;else{if(4&cur)break;BracketStack[sJ+2]|=4}}}}}(line,from,to,isolates,outerType),function processNeutrals(rFrom,rTo,isolates,outerType){for(let iI=0,prev=outerType;iI<=isolates.length;iI++){let from=iI?isolates[iI-1].to:rFrom,to=iI<isolates.length?isolates[iI].from:rTo;for(let i=from;i<to;){let type=types[i];if(256==type){let end=i+1;for(;;)if(end==to){if(iI==isolates.length)break;end=isolates[iI++].to,to=iI<isolates.length?isolates[iI].from:rTo}else{if(256!=types[end])break;end++}let beforeL=1==prev,replace=beforeL==(1==(end<rTo?types[end]:outerType))?beforeL?1:2:outerType;for(let j=end,jI=iI,fromJ=jI?isolates[jI-1].to:rFrom;j>i;)j==fromJ&&(j=isolates[--jI].from,fromJ=jI?isolates[jI-1].to:rFrom),types[--j]=replace;i=end}else prev=type,i++}}}(from,to,isolates,outerType),emitSpans(line,from,to,level,baseLevel,isolates,order)}function computeOrder(line,direction,isolates){if(!line)return[new BidiSpan(0,0,direction==RTL?1:0)];if(direction==LTR&&!isolates.length&&!BidiRE.test(line))return trivialOrder(line.length);if(isolates.length)for(;line.length>types.length;)types[types.length]=256;let order=[],level=direction==LTR?0:1;return computeSectionOrder(line,level,level,isolates,0,line.length,order),order}function trivialOrder(length){return[new BidiSpan(0,length,0)]}let movedOver="";function moveVisually(line,order,dir,start,forward){var _a;let startIndex=start.head-line.from,spanI=BidiSpan.find(order,startIndex,null!==(_a=start.bidiLevel)&&void 0!==_a?_a:-1,start.assoc),span=order[spanI],spanEnd=span.side(forward,dir);if(startIndex==spanEnd){let nextI=spanI+=forward?1:-1;if(nextI<0||nextI>=order.length)return null;span=order[spanI=nextI],startIndex=span.side(!forward,dir),spanEnd=span.side(forward,dir)}let nextIndex=dist_findClusterBreak(line.text,startIndex,span.forward(forward,dir));(nextIndex<span.from||nextIndex>span.to)&&(nextIndex=spanEnd),movedOver=line.text.slice(Math.min(startIndex,nextIndex),Math.max(startIndex,nextIndex));let nextSpan=spanI==(forward?order.length-1:0)?null:order[spanI+(forward?1:-1)];return nextSpan&&nextIndex==spanEnd&&nextSpan.level+(forward?0:1)<span.level?dist_EditorSelection.cursor(nextSpan.side(!forward,dir)+line.from,nextSpan.forward(forward,dir)?1:-1,nextSpan.level):dist_EditorSelection.cursor(nextIndex+line.from,span.forward(forward,dir)?-1:1,span.level)}function autoDirection(text,from,to){for(let i=from;i<to;i++){let type=charType(text.charCodeAt(i));if(1==type)return LTR;if(2==type||4==type)return RTL}return LTR}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler=Facet.define(),focusChangeEffect=Facet.define(),clipboardInputFilter=Facet.define(),clipboardOutputFilter=Facet.define(),perLineTextDirection=Facet.define({combine:values=>values.some(x=>x)}),nativeSelectionHidden=Facet.define({combine:values=>values.some(x=>x)}),scrollHandler=Facet.define();class ScrollTarget{constructor(range,y="nearest",x="nearest",yMargin=5,xMargin=5,isSnapshot=!1){this.range=range,this.y=y,this.x=x,this.yMargin=yMargin,this.xMargin=xMargin,this.isSnapshot=isSnapshot}map(changes){return changes.empty?this:new ScrollTarget(this.range.map(changes),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(state){return this.range.to<=state.doc.length?this:new ScrollTarget(dist_EditorSelection.cursor(state.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const scrollIntoView=dist_StateEffect.define({map:(t,ch)=>t.map(ch)}),setEditContextFormatting=dist_StateEffect.define();function logException(state,exception,context){let handler=state.facet(exceptionSink);handler.length?handler[0](exception):window.onerror&&window.onerror(String(exception),context,void 0,void 0,exception)||(context?console.error(context+":",exception):console.error(exception))}const editable=Facet.define({combine:values=>!values.length||values[0]});let nextPluginID=0;const viewPlugin=Facet.define({combine:plugins=>plugins.filter((p,i)=>{for(let j=0;j<i;j++)if(plugins[j].plugin==p.plugin)return!1;return!0})});class ViewPlugin{constructor(id,create,domEventHandlers,domEventObservers,buildExtensions){this.id=id,this.create=create,this.domEventHandlers=domEventHandlers,this.domEventObservers=domEventObservers,this.baseExtensions=buildExtensions(this),this.extension=this.baseExtensions.concat(viewPlugin.of({plugin:this,arg:void 0}))}of(arg){return this.baseExtensions.concat(viewPlugin.of({plugin:this,arg}))}static define(create,spec){const{eventHandlers,eventObservers,provide,decorations:deco}=spec||{};return new ViewPlugin(nextPluginID++,create,eventHandlers,eventObservers,plugin=>{let ext=[];return deco&&ext.push(decorations.of(view=>{let pluginInst=view.plugin(plugin);return pluginInst?deco(pluginInst):Decoration.none})),provide&&ext.push(provide(plugin)),ext})}static fromClass(cls,spec){return ViewPlugin.define((view,arg)=>new cls(view,arg),spec)}}class PluginInstance{constructor(spec){this.spec=spec,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(view){if(this.value){if(this.mustUpdate){let update=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(update)}catch(e){if(logException(update.state,e,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(_){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(view,this.spec.arg)}catch(e){logException(view.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(view){var _a;if(null===(_a=this.value)||void 0===_a?void 0:_a.destroy)try{this.value.destroy()}catch(e){logException(view.state,e,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),outerDecorations=Facet.define(),atomicRanges=Facet.define(),bidiIsolatedRanges=Facet.define();function getIsolatedRanges(view,line){let isolates=view.state.facet(bidiIsolatedRanges);if(!isolates.length)return isolates;let sets=isolates.map(i=>i instanceof Function?i(view):i),result=[];return dist_RangeSet.spans(sets,line.from,line.to,{point(){},span(fromDoc,toDoc,active,open){let from=fromDoc-line.from,to=toDoc-line.from,level=result;for(let i=active.length-1;i>=0;i--,open--){let update,direction=active[i].spec.bidiIsolate;if(null==direction&&(direction=autoDirection(line.text,from,to)),open>0&&level.length&&(update=level[level.length-1]).to==from&&update.direction==direction)update.to=to,level=update.inner;else{let add={from,to,direction,inner:[]};level.push(add),level=add.inner}}}}),result}const scrollMargins=Facet.define();function getScrollMargins(view){let left=0,right=0,top=0,bottom=0;for(let source of view.state.facet(scrollMargins)){let m=source(view);m&&(null!=m.left&&(left=Math.max(left,m.left)),null!=m.right&&(right=Math.max(right,m.right)),null!=m.top&&(top=Math.max(top,m.top)),null!=m.bottom&&(bottom=Math.max(bottom,m.bottom)))}return{left,right,top,bottom}}const styleModule=Facet.define();class ChangedRange{constructor(fromA,toA,fromB,toB){this.fromA=fromA,this.toA=toA,this.fromB=fromB,this.toB=toB}join(other){return new ChangedRange(Math.min(this.fromA,other.fromA),Math.max(this.toA,other.toA),Math.min(this.fromB,other.fromB),Math.max(this.toB,other.toB))}addToSet(set){let i=set.length,me=this;for(;i>0;i--){let range=set[i-1];if(!(range.fromA>me.toA)){if(range.toA<me.fromA)break;me=me.join(range),set.splice(i-1,1)}}return set.splice(i,0,me),set}static extendWithRanges(diff,ranges){if(0==ranges.length)return diff;let result=[];for(let dI=0,rI=0,posA=0,posB=0;;dI++){let next=dI==diff.length?null:diff[dI],off=posA-posB,end=next?next.fromB:1e9;for(;rI<ranges.length&&ranges[rI]<end;){let from=ranges[rI],to=ranges[rI+1],fromB=Math.max(posB,from),toB=Math.min(end,to);if(fromB<=toB&&new ChangedRange(fromB+off,toB+off,fromB,toB).addToSet(result),to>end)break;rI+=2}if(!next)return result;new ChangedRange(next.fromA,next.toA,next.fromB,next.toB).addToSet(result),posA=next.toA,posB=next.toB}}}class ViewUpdate{constructor(view,state,transactions){this.view=view,this.state=state,this.transactions=transactions,this.flags=0,this.startState=view.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let tr of transactions)this.changes=this.changes.compose(tr.changes);let changedRanges=[];this.changes.iterChangedRanges((fromA,toA,fromB,toB)=>changedRanges.push(new ChangedRange(fromA,toA,fromB,toB))),this.changedRanges=changedRanges}static create(view,state,transactions){return new ViewUpdate(view,state,transactions)}get viewportChanged(){return(4&this.flags)>0}get viewportMoved(){return(8&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(18&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(tr=>tr.selection)}get empty(){return 0==this.flags&&0==this.transactions.length}}class DocView extends ContentView{get length(){return this.view.state.doc.length}constructor(view){super(),this.view=view,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Decoration.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(view.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,view.state.doc.length)],0,null)}update(update){var _a;let changedRanges=update.changedRanges;this.minWidth>0&&changedRanges.length&&(changedRanges.every(({fromA,toA})=>toA<this.minWidthFrom||fromA>this.minWidthTo)?(this.minWidthFrom=update.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=update.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(update);let readCompositionAt=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&((null===(_a=this.domChanged)||void 0===_a?void 0:_a.newSel)?readCompositionAt=this.domChanged.newSel.head:function touchesComposition(changes,composition){let touched=!1;composition&&changes.iterChangedRanges((from,to)=>{from<composition.to&&to>composition.from&&(touched=!0)});return touched}(update.changes,this.hasComposition)||update.selectionSet||(readCompositionAt=update.state.selection.main.head));let composition=readCompositionAt>-1?function findCompositionRange(view,changes,headPos){let found=findCompositionNode(view,headPos);if(!found)return null;let{node:textNode,from,to}=found,text=textNode.nodeValue;if(/[\n\r]/.test(text))return null;if(view.state.doc.sliceString(found.from,found.to)!=text)return null;let inv=changes.invertedDesc,range=new ChangedRange(inv.mapPos(from),inv.mapPos(to),from,to),marks=[];for(let parent=textNode.parentNode;;parent=parent.parentNode){let parentView=ContentView.get(parent);if(parentView instanceof MarkView)marks.push({node:parent,deco:parentView.mark});else{if(parentView instanceof LineView||"DIV"==parent.nodeName&&parent.parentNode==view.contentDOM)return{range,text:textNode,marks,line:parent};if(parent==view.contentDOM)return null;marks.push({node:parent,deco:new MarkDecoration({inclusive:!0,attributes:getAttrs(parent),tagName:parent.tagName.toLowerCase()})})}}}(this.view,update.changes,readCompositionAt):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from,to}=this.hasComposition;changedRanges=new ChangedRange(from,to,update.changes.mapPos(from,-1),update.changes.mapPos(to,1)).addToSet(changedRanges.slice())}this.hasComposition=composition?{from:composition.range.fromB,to:composition.range.toB}:null,(browser.ie||browser.chrome)&&!composition&&update&&update.state.doc.lines!=update.startState.doc.lines&&(this.forceSelection=!0);let decoDiff=function findChangedDeco(a,b,diff){let comp=new DecorationComparator$1;return dist_RangeSet.compare(a,b,diff,comp),comp.changes}(this.decorations,this.updateDeco(),update.changes);return changedRanges=ChangedRange.extendWithRanges(changedRanges,decoDiff),!!(7&this.flags||0!=changedRanges.length)&&(this.updateInner(changedRanges,update.startState.doc.length,composition),update.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(changes,oldLength,composition){this.view.viewState.mustMeasureContent=!0,this.updateChildren(changes,oldLength,composition);let{observer}=this.view;observer.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let track=browser.chrome||browser.ios?{node:observer.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,track),this.flags&=-8,track&&(track.written||observer.selectionRange.focusNode!=track.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(cView=>cView.flags&=-9);let gaps=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let child of this.children)child instanceof BlockWidgetView&&child.widget instanceof BlockGapWidget&&gaps.push(child.dom);observer.updateGaps(gaps)}updateChildren(changes,oldLength,composition){let ranges=composition?composition.range.addToSet(changes.slice()):changes,cursor=this.childCursor(oldLength);for(let i=ranges.length-1;;i--){let next=i>=0?ranges[i]:null;if(!next)break;let content,breakAtStart,openStart,openEnd,{fromA,toA,fromB,toB}=next;if(composition&&composition.range.fromB<toB&&composition.range.toB>fromB){let before=ContentBuilder.build(this.view.state.doc,fromB,composition.range.fromB,this.decorations,this.dynamicDecorationMap),after=ContentBuilder.build(this.view.state.doc,composition.range.toB,toB,this.decorations,this.dynamicDecorationMap);breakAtStart=before.breakAtStart,openStart=before.openStart,openEnd=after.openEnd;let compLine=this.compositionView(composition);after.breakAtStart?compLine.breakAfter=1:after.content.length&&compLine.merge(compLine.length,compLine.length,after.content[0],!1,after.openStart,0)&&(compLine.breakAfter=after.content[0].breakAfter,after.content.shift()),before.content.length&&compLine.merge(0,0,before.content[before.content.length-1],!0,0,before.openEnd)&&before.content.pop(),content=before.content.concat(compLine).concat(after.content)}else({content,breakAtStart,openStart,openEnd}=ContentBuilder.build(this.view.state.doc,fromB,toB,this.decorations,this.dynamicDecorationMap));let{i:toI,off:toOff}=cursor.findPos(toA,1),{i:fromI,off:fromOff}=cursor.findPos(fromA,-1);replaceRange(this,fromI,fromOff,toI,toOff,content,breakAtStart,openStart,openEnd)}composition&&this.fixCompositionDOM(composition)}updateEditContextFormatting(update){this.editContextFormatting=this.editContextFormatting.map(update.changes);for(let tr of update.transactions)for(let effect of tr.effects)effect.is(setEditContextFormatting)&&(this.editContextFormatting=effect.value)}compositionView(composition){let cur=new TextView(composition.text.nodeValue);cur.flags|=8;for(let{deco}of composition.marks)cur=new MarkView(deco,[cur],cur.length);let line=new LineView;return line.append(cur,0),line}fixCompositionDOM(composition){let fix=(dom,cView)=>{cView.flags|=8|(cView.children.some(c=>7&c.flags)?1:0),this.markedForComposition.add(cView);let prev=ContentView.get(dom);prev&&prev!=cView&&(prev.dom=null),cView.setDOM(dom)},pos=this.childPos(composition.range.fromB,1),cView=this.children[pos.i];fix(composition.line,cView);for(let i=composition.marks.length-1;i>=-1;i--)pos=cView.childPos(pos.off,1),cView=cView.children[pos.i],fix(i>=0?composition.marks[i].node:composition.text,cView)}updateSelection(mustRead=!1,fromPointer=!1){!mustRead&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let activeElt=this.view.root.activeElement,focused=activeElt==this.dom,selectionNotFocus=!focused&&!(this.view.state.facet(editable)||this.dom.tabIndex>-1)&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(activeElt&&this.dom.contains(activeElt));if(!(focused||fromPointer||selectionNotFocus))return;let force=this.forceSelection;this.forceSelection=!1;let main=this.view.state.selection.main,anchor=this.moveToLine(this.domAtPos(main.anchor)),head=main.empty?anchor:this.moveToLine(this.domAtPos(main.head));if(browser.gecko&&main.empty&&!this.hasComposition&&function betweenUneditable(pos){return 1==pos.node.nodeType&&pos.node.firstChild&&(0==pos.offset||"false"==pos.node.childNodes[pos.offset-1].contentEditable)&&(pos.offset==pos.node.childNodes.length||"false"==pos.node.childNodes[pos.offset].contentEditable)}(anchor)){let dummy=document.createTextNode("");this.view.observer.ignore(()=>anchor.node.insertBefore(dummy,anchor.node.childNodes[anchor.offset]||null)),anchor=head=new DOMPos(dummy,0),force=!0}let domSel=this.view.observer.selectionRange;!force&&domSel.focusNode&&(isEquivalentPosition(anchor.node,anchor.offset,domSel.anchorNode,domSel.anchorOffset)&&isEquivalentPosition(head.node,head.offset,domSel.focusNode,domSel.focusOffset)||this.suppressWidgetCursorChange(domSel,main))||(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(domSel.focusNode)&&function inUneditable(node,inside){for(let cur=node;cur&&cur!=inside;cur=cur.assignedSlot||cur.parentNode)if(1==cur.nodeType&&"false"==cur.contentEditable)return!0;return!1}(domSel.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let rawSel=getSelection(this.view.root);if(rawSel)if(main.empty){if(browser.gecko){let nextTo=function nextToUneditable(node,offset){return 1!=node.nodeType?0:(offset&&"false"==node.childNodes[offset-1].contentEditable?1:0)|(offset<node.childNodes.length&&"false"==node.childNodes[offset].contentEditable?2:0)}(anchor.node,anchor.offset);if(nextTo&&3!=nextTo){let text=(1==nextTo?textNodeBefore:textNodeAfter)(anchor.node,anchor.offset);text&&(anchor=new DOMPos(text.node,text.offset))}}rawSel.collapse(anchor.node,anchor.offset),null!=main.bidiLevel&&void 0!==rawSel.caretBidiLevel&&(rawSel.caretBidiLevel=main.bidiLevel)}else if(rawSel.extend){rawSel.collapse(anchor.node,anchor.offset);try{rawSel.extend(head.node,head.offset)}catch(_){}}else{let range=document.createRange();main.anchor>main.head&&([anchor,head]=[head,anchor]),range.setEnd(head.node,head.offset),range.setStart(anchor.node,anchor.offset),rawSel.removeAllRanges(),rawSel.addRange(range)}else;selectionNotFocus&&this.view.root.activeElement==this.dom&&(this.dom.blur(),activeElt&&activeElt.focus())}),this.view.observer.setSelectionRange(anchor,head)),this.impreciseAnchor=anchor.precise?null:new DOMPos(domSel.anchorNode,domSel.anchorOffset),this.impreciseHead=head.precise?null:new DOMPos(domSel.focusNode,domSel.focusOffset)}suppressWidgetCursorChange(sel,cursor){return this.hasComposition&&cursor.empty&&isEquivalentPosition(sel.focusNode,sel.focusOffset,sel.anchorNode,sel.anchorOffset)&&this.posFromDOM(sel.focusNode,sel.focusOffset)==cursor.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view}=this,cursor=view.state.selection.main,sel=getSelection(view.root),{anchorNode,anchorOffset}=view.observer.selectionRange;if(!(sel&&cursor.empty&&cursor.assoc&&sel.modify))return;let line=LineView.find(this,cursor.head);if(!line)return;let lineStart=line.posAtStart;if(cursor.head==lineStart||cursor.head==lineStart+line.length)return;let before=this.coordsAt(cursor.head,-1),after=this.coordsAt(cursor.head,1);if(!before||!after||before.bottom>after.top)return;let dom=this.domAtPos(cursor.head+cursor.assoc);sel.collapse(dom.node,dom.offset),sel.modify("move",cursor.assoc<0?"forward":"backward","lineboundary"),view.observer.readSelectionRange();let newRange=view.observer.selectionRange;view.docView.posFromDOM(newRange.anchorNode,newRange.anchorOffset)!=cursor.from&&sel.collapse(anchorNode,anchorOffset)}moveToLine(pos){let newPos,dom=this.dom;if(pos.node!=dom)return pos;for(let i=pos.offset;!newPos&&i<dom.childNodes.length;i++){let view=ContentView.get(dom.childNodes[i]);view instanceof LineView&&(newPos=view.domAtPos(0))}for(let i=pos.offset-1;!newPos&&i>=0;i--){let view=ContentView.get(dom.childNodes[i]);view instanceof LineView&&(newPos=view.domAtPos(view.length))}return newPos?new DOMPos(newPos.node,newPos.offset,!0):pos}nearest(dom){for(let cur=dom;cur;){let domView=ContentView.get(cur);if(domView&&domView.rootView==this)return domView;cur=cur.parentNode}return null}posFromDOM(node,offset){let view=this.nearest(node);if(!view)throw new RangeError("Trying to find position for a DOM position outside of the document");return view.localPosFromDOM(node,offset)+view.posAtStart}domAtPos(pos){let{i,off}=this.childCursor().findPos(pos,-1);for(;i<this.children.length-1;){let child=this.children[i];if(off<child.length||child instanceof LineView)break;i++,off=0}return this.children[i].domAtPos(off)}coordsAt(pos,side){let best=null,bestPos=0;for(let off=this.length,i=this.children.length-1;i>=0;i--){let child=this.children[i],end=off-child.breakAfter,start=end-child.length;if(end<pos)break;if(start<=pos&&(start<pos||child.covers(-1))&&(end>pos||child.covers(1))&&(!best||child instanceof LineView&&!(best instanceof LineView&&side>=0)))best=child,bestPos=start;else if(best&&start==pos&&end==pos&&child instanceof BlockWidgetView&&Math.abs(side)<2){if(child.deco.startSide<0)break;i&&(best=null)}off=start}return best?best.coordsAt(pos-bestPos,side):null}coordsForChar(pos){let{i,off}=this.childPos(pos,1),child=this.children[i];if(!(child instanceof LineView))return null;for(;child.children.length;){let{i,off:childOff}=child.childPos(off,1);for(;;i++){if(i==child.children.length)return null;if((child=child.children[i]).length)break}off=childOff}if(!(child instanceof TextView))return null;let end=dist_findClusterBreak(child.text,off);if(end==off)return null;let rects=textRange(child.dom,off,end).getClientRects();for(let i=0;i<rects.length;i++){let rect=rects[i];if(i==rects.length-1||rect.top<rect.bottom&&rect.left<rect.right)return rect}return null}measureVisibleLineHeights(viewport){let result=[],{from,to}=viewport,contentWidth=this.view.contentDOM.clientWidth,isWider=contentWidth>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,widest=-1,ltr=this.view.textDirection==Direction.LTR;for(let pos=0,i=0;i<this.children.length;i++){let child=this.children[i],end=pos+child.length;if(end>to)break;if(pos>=from){let childRect=child.dom.getBoundingClientRect();if(result.push(childRect.height),isWider){let last=child.dom.lastChild,rects=last?clientRectsFor(last):[];if(rects.length){let rect=rects[rects.length-1],width=ltr?rect.right-childRect.left:childRect.right-rect.left;width>widest&&(widest=width,this.minWidth=contentWidth,this.minWidthFrom=pos,this.minWidthTo=end)}}}pos=end+child.breakAfter}return result}textDirectionAt(pos){let{i}=this.childPos(pos,1);return"rtl"==getComputedStyle(this.children[i].dom).direction?Direction.RTL:Direction.LTR}measureTextSize(){for(let child of this.children)if(child instanceof LineView){let measure=child.measureTextSize();if(measure)return measure}let lineHeight,charWidth,textHeight,dummy=document.createElement("div");return dummy.className="cm-line",dummy.style.width="99999px",dummy.style.position="absolute",dummy.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(dummy);let rect=clientRectsFor(dummy.firstChild)[0];lineHeight=dummy.getBoundingClientRect().height,charWidth=rect?rect.width/27:7,textHeight=rect?rect.height:lineHeight,dummy.remove()}),{lineHeight,charWidth,textHeight}}childCursor(pos=this.length){let i=this.children.length;return i&&(pos-=this.children[--i].length),new ChildCursor(this.children,pos,i)}computeBlockGapDeco(){let deco=[],vs=this.view.viewState;for(let pos=0,i=0;;i++){let next=i==vs.viewports.length?null:vs.viewports[i],end=next?next.from-1:this.length;if(end>pos){let height=(vs.lineBlockAt(end).bottom-vs.lineBlockAt(pos).top)/this.view.scaleY;deco.push(Decoration.replace({widget:new BlockGapWidget(height),block:!0,inclusive:!0,isBlockGap:!0}).range(pos,end))}if(!next)break;pos=next.to+1}return Decoration.set(deco)}updateDeco(){let i=1,allDeco=this.view.state.facet(decorations).map(d=>(this.dynamicDecorationMap[i++]="function"==typeof d)?d(this.view):d),dynamicOuter=!1,outerDeco=this.view.state.facet(outerDecorations).map((d,i)=>{let dynamic="function"==typeof d;return dynamic&&(dynamicOuter=!0),dynamic?d(this.view):d});for(outerDeco.length&&(this.dynamicDecorationMap[i++]=dynamicOuter,allDeco.push(dist_RangeSet.join(outerDeco))),this.decorations=[this.editContextFormatting,...allDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];i<this.decorations.length;)this.dynamicDecorationMap[i++]=!1;return this.decorations}scrollIntoView(target){if(target.isSnapshot){let ref=this.view.viewState.lineBlockAt(target.range.head);return this.view.scrollDOM.scrollTop=ref.top-target.yMargin,void(this.view.scrollDOM.scrollLeft=target.xMargin)}for(let handler of this.view.state.facet(scrollHandler))try{if(handler(this.view,target.range,target))return!0}catch(e){logException(this.view.state,e,"scroll handler")}let other,{range}=target,rect=this.coordsAt(range.head,range.empty?range.assoc:range.head>range.anchor?-1:1);if(!rect)return;!range.empty&&(other=this.coordsAt(range.anchor,range.anchor>range.head?-1:1))&&(rect={left:Math.min(rect.left,other.left),top:Math.min(rect.top,other.top),right:Math.max(rect.right,other.right),bottom:Math.max(rect.bottom,other.bottom)});let margins=getScrollMargins(this.view),targetRect={left:rect.left-margins.left,top:rect.top-margins.top,right:rect.right+margins.right,bottom:rect.bottom+margins.bottom},{offsetWidth,offsetHeight}=this.view.scrollDOM;!function scrollRectIntoView(dom,rect,side,x,y,xMargin,yMargin,ltr){let doc=dom.ownerDocument,win=doc.defaultView||window;for(let cur=dom,stop=!1;cur&&!stop;)if(1==cur.nodeType){let bounding,top=cur==doc.body,scaleX=1,scaleY=1;if(top)bounding=windowRect(win);else{if(/^(fixed|sticky)$/.test(getComputedStyle(cur).position)&&(stop=!0),cur.scrollHeight<=cur.clientHeight&&cur.scrollWidth<=cur.clientWidth){cur=cur.assignedSlot||cur.parentNode;continue}let rect=cur.getBoundingClientRect();({scaleX,scaleY}=getScale(cur,rect)),bounding={left:rect.left,right:rect.left+cur.clientWidth*scaleX,top:rect.top,bottom:rect.top+cur.clientHeight*scaleY}}let moveX=0,moveY=0;if("nearest"==y)rect.top<bounding.top?(moveY=rect.top-(bounding.top+yMargin),side>0&&rect.bottom>bounding.bottom+moveY&&(moveY=rect.bottom-bounding.bottom+yMargin)):rect.bottom>bounding.bottom&&(moveY=rect.bottom-bounding.bottom+yMargin,side<0&&rect.top-moveY<bounding.top&&(moveY=rect.top-(bounding.top+yMargin)));else{let rectHeight=rect.bottom-rect.top,boundingHeight=bounding.bottom-bounding.top;moveY=("center"==y&&rectHeight<=boundingHeight?rect.top+rectHeight/2-boundingHeight/2:"start"==y||"center"==y&&side<0?rect.top-yMargin:rect.bottom-boundingHeight+yMargin)-bounding.top}if("nearest"==x?rect.left<bounding.left?(moveX=rect.left-(bounding.left+xMargin),side>0&&rect.right>bounding.right+moveX&&(moveX=rect.right-bounding.right+xMargin)):rect.right>bounding.right&&(moveX=rect.right-bounding.right+xMargin,side<0&&rect.left<bounding.left+moveX&&(moveX=rect.left-(bounding.left+xMargin))):moveX=("center"==x?rect.left+(rect.right-rect.left)/2-(bounding.right-bounding.left)/2:"start"==x==ltr?rect.left-xMargin:rect.right-(bounding.right-bounding.left)+xMargin)-bounding.left,moveX||moveY)if(top)win.scrollBy(moveX,moveY);else{let movedX=0,movedY=0;if(moveY){let start=cur.scrollTop;cur.scrollTop+=moveY/scaleY,movedY=(cur.scrollTop-start)*scaleY}if(moveX){let start=cur.scrollLeft;cur.scrollLeft+=moveX/scaleX,movedX=(cur.scrollLeft-start)*scaleX}rect={left:rect.left-movedX,top:rect.top-movedY,right:rect.right-movedX,bottom:rect.bottom-movedY},movedX&&Math.abs(movedX-moveX)<1&&(x="nearest"),movedY&&Math.abs(movedY-moveY)<1&&(y="nearest")}if(top)break;(rect.top<bounding.top||rect.bottom>bounding.bottom||rect.left<bounding.left||rect.right>bounding.right)&&(rect={left:Math.max(rect.left,bounding.left),right:Math.min(rect.right,bounding.right),top:Math.max(rect.top,bounding.top),bottom:Math.min(rect.bottom,bounding.bottom)}),cur=cur.assignedSlot||cur.parentNode}else{if(11!=cur.nodeType)break;cur=cur.host}}(this.view.scrollDOM,targetRect,range.head<range.anchor?-1:1,target.x,target.y,Math.max(Math.min(target.xMargin,offsetWidth),-offsetWidth),Math.max(Math.min(target.yMargin,offsetHeight),-offsetHeight),this.view.textDirection==Direction.LTR)}}function findCompositionNode(view,headPos){let sel=view.observer.selectionRange;if(!sel.focusNode)return null;let textBefore=textNodeBefore(sel.focusNode,sel.focusOffset),textAfter=textNodeAfter(sel.focusNode,sel.focusOffset),textNode=textBefore||textAfter;if(textAfter&&textBefore&&textAfter.node!=textBefore.node){let descAfter=ContentView.get(textAfter.node);if(!descAfter||descAfter instanceof TextView&&descAfter.text!=textAfter.node.nodeValue)textNode=textAfter;else if(view.docView.lastCompositionAfterCursor){let descBefore=ContentView.get(textBefore.node);!descBefore||descBefore instanceof TextView&&descBefore.text!=textBefore.node.nodeValue||(textNode=textAfter)}}if(view.docView.lastCompositionAfterCursor=textNode!=textBefore,!textNode)return null;let from=headPos-textNode.offset;return{from,to:from+textNode.node.nodeValue.length,node:textNode.node}}let DecorationComparator$1=class DecorationComparator{constructor(){this.changes=[]}compareRange(from,to){addRange(from,to,this.changes)}comparePoint(from,to){addRange(from,to,this.changes)}boundChange(pos){addRange(pos,pos,this.changes)}};function getdx(x,rect){return rect.left>x?rect.left-x:Math.max(0,x-rect.right)}function getdy(y,rect){return rect.top>y?rect.top-y:Math.max(0,y-rect.bottom)}function yOverlap(a,b){return a.top<b.bottom-1&&a.bottom>b.top+1}function upTop(rect,top){return top<rect.top?{top,left:rect.left,right:rect.right,bottom:rect.bottom}:rect}function upBot(rect,bottom){return bottom>rect.bottom?{top:rect.top,left:rect.left,right:rect.right,bottom}:rect}function domPosAtCoords(parent,x,y){let closest,closestRect,closestX,closestY,above,below,aboveRect,belowRect,closestOverlap=!1;for(let child=parent.firstChild;child;child=child.nextSibling){let rects=clientRectsFor(child);for(let i=0;i<rects.length;i++){let rect=rects[i];closestRect&&yOverlap(closestRect,rect)&&(rect=upTop(upBot(rect,closestRect.bottom),closestRect.top));let dx=getdx(x,rect),dy=getdy(y,rect);if(0==dx&&0==dy)return 3==child.nodeType?domPosInText(child,x,y):domPosAtCoords(child,x,y);(!closest||closestY>dy||closestY==dy&&closestX>dx)&&(closest=child,closestRect=rect,closestX=dx,closestY=dy,closestOverlap=!dx||(x<rect.left?i>0:i<rects.length-1)),0==dx?y>rect.bottom&&(!aboveRect||aboveRect.bottom<rect.bottom)?(above=child,aboveRect=rect):y<rect.top&&(!belowRect||belowRect.top>rect.top)&&(below=child,belowRect=rect):aboveRect&&yOverlap(aboveRect,rect)?aboveRect=upBot(aboveRect,rect.bottom):belowRect&&yOverlap(belowRect,rect)&&(belowRect=upTop(belowRect,rect.top))}}if(aboveRect&&aboveRect.bottom>=y?(closest=above,closestRect=aboveRect):belowRect&&belowRect.top<=y&&(closest=below,closestRect=belowRect),!closest)return{node:parent,offset:0};let clipX=Math.max(closestRect.left,Math.min(closestRect.right,x));return 3==closest.nodeType?domPosInText(closest,clipX,y):closestOverlap&&"false"!=closest.contentEditable?domPosAtCoords(closest,clipX,y):{node:parent,offset:Array.prototype.indexOf.call(parent.childNodes,closest)+(x>=(closestRect.left+closestRect.right)/2?1:0)}}function domPosInText(node,x,y){let len=node.nodeValue.length,closestOffset=-1,closestDY=1e9,generalSide=0;for(let i=0;i<len;i++){let rects=textRange(node,i,i+1).getClientRects();for(let j=0;j<rects.length;j++){let rect=rects[j];if(rect.top==rect.bottom)continue;generalSide||(generalSide=x-rect.left);let dy=(rect.top>y?rect.top-y:y-rect.bottom)-1;if(rect.left-1<=x&&rect.right+1>=x&&dy<closestDY){let right=x>=(rect.left+rect.right)/2,after=right;if(browser.chrome||browser.gecko){textRange(node,i).getBoundingClientRect().left==rect.right&&(after=!right)}if(dy<=0)return{node,offset:i+(after?1:0)};closestOffset=i+(after?1:0),closestDY=dy}}}return{node,offset:closestOffset>-1?closestOffset:generalSide>0?node.nodeValue.length:0}}function posAtCoords(view,coords,precise,bias=-1){var _a,_b;let block,content=view.contentDOM.getBoundingClientRect(),docTop=content.top+view.viewState.paddingTop,{docHeight}=view.viewState,{x,y}=coords,yOffset=y-docTop;if(yOffset<0)return 0;if(yOffset>docHeight)return view.state.doc.length;for(let halfLine=view.viewState.heightOracle.textHeight/2,bounced=!1;block=view.elementAtHeight(yOffset),block.type!=BlockType.Text;)for(;yOffset=bias>0?block.bottom+halfLine:block.top-halfLine,!(yOffset>=0&&yOffset<=docHeight);){if(bounced)return precise?null:0;bounced=!0,bias=-bias}y=docTop+yOffset;let lineStart=block.from;if(lineStart<view.viewport.from)return 0==view.viewport.from?0:precise?null:posAtCoordsImprecise(view,content,block,x,y);if(lineStart>view.viewport.to)return view.viewport.to==view.state.doc.length?view.state.doc.length:precise?null:posAtCoordsImprecise(view,content,block,x,y);let doc=view.dom.ownerDocument,root=view.root.elementFromPoint?view.root:doc,element=root.elementFromPoint(x,y);element&&!view.contentDOM.contains(element)&&(element=null),element||(x=Math.max(content.left+1,Math.min(content.right-1,x)),element=root.elementFromPoint(x,y),element&&!view.contentDOM.contains(element)&&(element=null));let node,offset=-1;if(element&&0!=(null===(_a=view.docView.nearest(element))||void 0===_a?void 0:_a.isEditable)){if(doc.caretPositionFromPoint){let pos=doc.caretPositionFromPoint(x,y);pos&&({offsetNode:node,offset}=pos)}else if(doc.caretRangeFromPoint){let range=doc.caretRangeFromPoint(x,y);range&&(({startContainer:node,startOffset:offset}=range),(!view.contentDOM.contains(node)||browser.safari&&function isSuspiciousSafariCaretResult(node,offset,x){let len,scan=node;if(3!=node.nodeType||offset!=(len=node.nodeValue.length))return!1;for(;;){let next=scan.nextSibling;if(next){if("BR"==next.nodeName)break;return!1}{let parent=scan.parentNode;if(!parent||"DIV"==parent.nodeName)break;scan=parent}}return textRange(node,len-1,len).getBoundingClientRect().right>x}(node,offset,x)||browser.chrome&&function isSuspiciousChromeCaretResult(node,offset,x){if(0!=offset)return!1;for(let cur=node;;){let parent=cur.parentNode;if(!parent||1!=parent.nodeType||parent.firstChild!=cur)return!1;if(parent.classList.contains("cm-line"))break;cur=parent}let rect=1==node.nodeType?node.getBoundingClientRect():textRange(node,0,Math.max(node.nodeValue.length,1)).getBoundingClientRect();return x-rect.left>5}(node,offset,x))&&(node=void 0))}node&&(offset=Math.min(maxOffset(node),offset))}if(!node||!view.docView.dom.contains(node)){let line=LineView.find(view.docView,lineStart);if(!line)return yOffset>block.top+block.height/2?block.to:block.from;({node,offset}=domPosAtCoords(line.dom,x,y))}let nearest=view.docView.nearest(node);if(!nearest)return null;if(nearest.isWidget&&1==(null===(_b=nearest.dom)||void 0===_b?void 0:_b.nodeType)){let rect=nearest.dom.getBoundingClientRect();return coords.y<rect.top||coords.y<=rect.bottom&&coords.x<=(rect.left+rect.right)/2?nearest.posAtStart:nearest.posAtEnd}return nearest.localPosFromDOM(node,offset)+nearest.posAtStart}function posAtCoordsImprecise(view,contentRect,block,x,y){let into=Math.round((x-contentRect.left)*view.defaultCharacterWidth);if(view.lineWrapping&&block.height>1.5*view.defaultLineHeight){let textHeight=view.viewState.heightOracle.textHeight;into+=Math.floor((y-block.top-.5*(view.defaultLineHeight-textHeight))/textHeight)*view.viewState.heightOracle.lineLength}let content=view.state.sliceDoc(block.from,block.to);return block.from+findColumn(content,into,view.state.tabSize)}function blockAt(view,pos,side){let line=view.lineBlockAt(pos);if(Array.isArray(line.type)){let best;for(let l of line.type){if(l.from>pos)break;if(!(l.to<pos)){if(l.from<pos&&l.to>pos)return l;best&&(l.type!=BlockType.Text||best.type==l.type&&!(side<0?l.from<pos:l.to>pos))||(best=l)}}return best||line}return line}function moveByChar(view,start,forward,by){let line=view.state.doc.lineAt(start.head),spans=view.bidiSpans(line),direction=view.textDirectionAt(line.from);for(let cur=start,check=null;;){let next=moveVisually(line,spans,direction,cur,forward),char=movedOver;if(!next){if(line.number==(forward?view.state.doc.lines:1))return cur;char="\n",line=view.state.doc.line(line.number+(forward?1:-1)),spans=view.bidiSpans(line),next=view.visualLineSide(line,!forward)}if(check){if(!check(char))return cur}else{if(!by)return next;check=by(char)}cur=next}}function skipAtomicRanges(atoms,pos,bias){for(;;){let moved=0;for(let set of atoms)set.between(pos-1,pos+1,(from,to,value)=>{if(pos>from&&pos<to){let side=moved||bias||(pos-from<to-pos?-1:1);pos=side<0?from:to,moved=side}});if(!moved)return pos}}function skipAtoms(view,oldPos,pos){let newPos=skipAtomicRanges(view.state.facet(atomicRanges).map(f=>f(view)),pos.from,oldPos.head>pos.from?-1:1);return newPos==pos.from?pos:dist_EditorSelection.cursor(newPos,newPos<pos.from?1:-1)}class DOMReader{constructor(points,state){this.points=points,this.text="",this.lineSeparator=state.facet(EditorState.lineSeparator)}append(text){this.text+=text}lineBreak(){this.text+="￿"}readRange(start,end){if(!start)return this;let parent=start.parentNode;for(let cur=start;;){this.findPointBefore(parent,cur);let oldLen=this.text.length;this.readNode(cur);let next=cur.nextSibling;if(next==end)break;let view=ContentView.get(cur),nextView=ContentView.get(next);(view&&nextView?view.breakAfter:(view?view.breakAfter:isBlockElement(cur))||isBlockElement(next)&&("BR"!=cur.nodeName||cur.cmIgnore)&&this.text.length>oldLen)&&this.lineBreak(),cur=next}return this.findPointBefore(parent,end),this}readTextNode(node){let text=node.nodeValue;for(let point of this.points)point.node==node&&(point.pos=this.text.length+Math.min(point.offset,text.length));for(let off=0,re=this.lineSeparator?null:/\r\n?|\n/g;;){let m,nextBreak=-1,breakSize=1;if(this.lineSeparator?(nextBreak=text.indexOf(this.lineSeparator,off),breakSize=this.lineSeparator.length):(m=re.exec(text))&&(nextBreak=m.index,breakSize=m[0].length),this.append(text.slice(off,nextBreak<0?text.length:nextBreak)),nextBreak<0)break;if(this.lineBreak(),breakSize>1)for(let point of this.points)point.node==node&&point.pos>this.text.length&&(point.pos-=breakSize-1);off=nextBreak+breakSize}}readNode(node){if(node.cmIgnore)return;let view=ContentView.get(node),fromView=view&&view.overrideDOMText;if(null!=fromView){this.findPointInside(node,fromView.length);for(let i=fromView.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else 3==node.nodeType?this.readTextNode(node):"BR"==node.nodeName?node.nextSibling&&this.lineBreak():1==node.nodeType&&this.readRange(node.firstChild,null)}findPointBefore(node,next){for(let point of this.points)point.node==node&&node.childNodes[point.offset]==next&&(point.pos=this.text.length)}findPointInside(node,length){for(let point of this.points)(3==node.nodeType?point.node==node:node.contains(point.node))&&(point.pos=this.text.length+(isAtEnd(node,point.node,point.offset)?length:0))}}function isAtEnd(parent,node,offset){for(;;){if(!node||offset<maxOffset(node))return!1;if(node==parent)return!0;offset=domIndex(node)+1,node=node.parentNode}}class DOMPoint{constructor(node,offset){this.node=node,this.offset=offset,this.pos=-1}}class DOMChange{constructor(view,start,end,typeOver){this.typeOver=typeOver,this.bounds=null,this.text="",this.domChanged=start>-1;let{impreciseHead:iHead,impreciseAnchor:iAnchor}=view.docView;if(view.state.readOnly&&start>-1)this.newSel=null;else if(start>-1&&(this.bounds=view.docView.domBoundsAround(start,end,0))){let selPoints=iHead||iAnchor?[]:function selectionPoints(view){let result=[];if(view.root.activeElement!=view.contentDOM)return result;let{anchorNode,anchorOffset,focusNode,focusOffset}=view.observer.selectionRange;anchorNode&&(result.push(new DOMPoint(anchorNode,anchorOffset)),focusNode==anchorNode&&focusOffset==anchorOffset||result.push(new DOMPoint(focusNode,focusOffset)));return result}(view),reader=new DOMReader(selPoints,view.state);reader.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=reader.text,this.newSel=function selectionFromPoints(points,base){if(0==points.length)return null;let anchor=points[0].pos,head=2==points.length?points[1].pos:anchor;return anchor>-1&&head>-1?dist_EditorSelection.single(anchor+base,head+base):null}(selPoints,this.bounds.from)}else{let domSel=view.observer.selectionRange,head=iHead&&iHead.node==domSel.focusNode&&iHead.offset==domSel.focusOffset||!contains(view.contentDOM,domSel.focusNode)?view.state.selection.main.head:view.docView.posFromDOM(domSel.focusNode,domSel.focusOffset),anchor=iAnchor&&iAnchor.node==domSel.anchorNode&&iAnchor.offset==domSel.anchorOffset||!contains(view.contentDOM,domSel.anchorNode)?view.state.selection.main.anchor:view.docView.posFromDOM(domSel.anchorNode,domSel.anchorOffset),vp=view.viewport;if((browser.ios||browser.chrome)&&view.state.selection.main.empty&&head!=anchor&&(vp.from>0||vp.to<view.state.doc.length)){let from=Math.min(head,anchor),to=Math.max(head,anchor),offFrom=vp.from-from,offTo=vp.to-to;0!=offFrom&&1!=offFrom&&0!=from||0!=offTo&&-1!=offTo&&to!=view.state.doc.length||(head=0,anchor=view.state.doc.length)}this.newSel=dist_EditorSelection.single(anchor,head)}}}function applyDOMChange(view,domChange){let change,{newSel}=domChange,sel=view.state.selection.main,lastKey=view.inputState.lastKeyTime>Date.now()-100?view.inputState.lastKeyCode:-1;if(domChange.bounds){let{from,to}=domChange.bounds,preferredPos=sel.from,preferredSide=null;(8===lastKey||browser.android&&domChange.text.length<to-from)&&(preferredPos=sel.to,preferredSide="end");let diff=function findDiff(a,b,preferredPos,preferredSide){let minLen=Math.min(a.length,b.length),from=0;for(;from<minLen&&a.charCodeAt(from)==b.charCodeAt(from);)from++;if(from==minLen&&a.length==b.length)return null;let toA=a.length,toB=b.length;for(;toA>0&&toB>0&&a.charCodeAt(toA-1)==b.charCodeAt(toB-1);)toA--,toB--;if("end"==preferredSide){preferredPos-=toA+Math.max(0,from-Math.min(toA,toB))-from}if(toA<from&&a.length<b.length){from-=preferredPos<=from&&preferredPos>=toA?from-preferredPos:0,toB=from+(toB-toA),toA=from}else if(toB<from){from-=preferredPos<=from&&preferredPos>=toB?from-preferredPos:0,toA=from+(toA-toB),toB=from}return{from,toA,toB}}(view.state.doc.sliceString(from,to,"￿"),domChange.text,preferredPos-from,preferredSide);diff&&(browser.chrome&&13==lastKey&&diff.toB==diff.from+2&&"￿￿"==domChange.text.slice(diff.from,diff.toB)&&diff.toB--,change={from:from+diff.from,to:from+diff.toA,insert:Text.of(domChange.text.slice(diff.from,diff.toB).split("￿"))})}else newSel&&(!view.hasFocus&&view.state.facet(editable)||newSel.main.eq(sel))&&(newSel=null);if(!change&&!newSel)return!1;if(!change&&domChange.typeOver&&!sel.empty&&newSel&&newSel.main.empty?change={from:sel.from,to:sel.to,insert:view.state.doc.slice(sel.from,sel.to)}:(browser.mac||browser.android)&&change&&change.from==change.to&&change.from==sel.head-1&&/^\. ?$/.test(change.insert.toString())&&"off"==view.contentDOM.getAttribute("autocorrect")?(newSel&&2==change.insert.length&&(newSel=dist_EditorSelection.single(newSel.main.anchor-1,newSel.main.head-1)),change={from:change.from,to:change.to,insert:Text.of([change.insert.toString().replace("."," ")])}):change&&change.from>=sel.from&&change.to<=sel.to&&(change.from!=sel.from||change.to!=sel.to)&&sel.to-sel.from-(change.to-change.from)<=4?change={from:sel.from,to:sel.to,insert:view.state.doc.slice(sel.from,change.from).append(change.insert).append(view.state.doc.slice(change.to,sel.to))}:browser.chrome&&change&&change.from==change.to&&change.from==sel.head&&"\n "==change.insert.toString()&&view.lineWrapping&&(newSel&&(newSel=dist_EditorSelection.single(newSel.main.anchor-1,newSel.main.head-1)),change={from:sel.from,to:sel.to,insert:Text.of([" "])}),change)return applyDOMChangeInner(view,change,newSel,lastKey);if(newSel&&!newSel.main.eq(sel)){let scrollIntoView=!1,userEvent="select";return view.inputState.lastSelectionTime>Date.now()-50&&("select"==view.inputState.lastSelectionOrigin&&(scrollIntoView=!0),userEvent=view.inputState.lastSelectionOrigin),view.dispatch({selection:newSel,scrollIntoView,userEvent}),!0}return!1}function applyDOMChangeInner(view,change,newSel,lastKey=-1){if(browser.ios&&view.inputState.flushIOSKey(change))return!0;let sel=view.state.selection.main;if(browser.android&&(change.to==sel.to&&(change.from==sel.from||change.from==sel.from-1&&" "==view.state.sliceDoc(change.from,sel.from))&&1==change.insert.length&&2==change.insert.lines&&dispatchKey(view.contentDOM,"Enter",13)||(change.from==sel.from-1&&change.to==sel.to&&0==change.insert.length||8==lastKey&&change.insert.length<change.to-change.from&&change.to>sel.head)&&dispatchKey(view.contentDOM,"Backspace",8)||change.from==sel.from&&change.to==sel.to+1&&0==change.insert.length&&dispatchKey(view.contentDOM,"Delete",46)))return!0;let defaultTr,text=change.insert.toString();view.inputState.composing>=0&&view.inputState.composing++;let defaultInsert=()=>defaultTr||(defaultTr=function applyDefaultInsert(view,change,newSel){let tr,startState=view.state,sel=startState.selection.main;if(change.from>=sel.from&&change.to<=sel.to&&change.to-change.from>=(sel.to-sel.from)/3&&(!newSel||newSel.main.empty&&newSel.main.from==change.from+change.insert.length)&&view.inputState.composing<0){let before=sel.from<change.from?startState.sliceDoc(sel.from,change.from):"",after=sel.to>change.to?startState.sliceDoc(change.to,sel.to):"";tr=startState.replaceSelection(view.state.toText(before+change.insert.sliceString(0,void 0,view.state.lineBreak)+after))}else{let changes=startState.changes(change),mainSel=newSel&&newSel.main.to<=changes.newLength?newSel.main:void 0;if(startState.selection.ranges.length>1&&view.inputState.composing>=0&&change.to<=sel.to&&change.to>=sel.to-10){let compositionRange,replaced=view.state.sliceDoc(change.from,change.to),composition=newSel&&findCompositionNode(view,newSel.main.head);if(composition){let dLen=change.insert.length-(change.to-change.from);compositionRange={from:composition.from,to:composition.to-dLen}}else compositionRange=view.state.doc.lineAt(sel.head);let offset=sel.to-change.to,size=sel.to-sel.from;tr=startState.changeByRange(range=>{if(range.from==sel.from&&range.to==sel.to)return{changes,range:mainSel||range.map(changes)};let to=range.to-offset,from=to-replaced.length;if(range.to-range.from!=size||view.state.sliceDoc(from,to)!=replaced||range.to>=compositionRange.from&&range.from<=compositionRange.to)return{range};let rangeChanges=startState.changes({from,to,insert:change.insert}),selOff=range.to-sel.to;return{changes:rangeChanges,range:mainSel?dist_EditorSelection.range(Math.max(0,mainSel.anchor+selOff),Math.max(0,mainSel.head+selOff)):range.map(rangeChanges)}})}else tr={changes,selection:mainSel&&startState.selection.replaceRange(mainSel)}}let userEvent="input.type";(view.composing||view.inputState.compositionPendingChange&&view.inputState.compositionEndedAt>Date.now()-50)&&(view.inputState.compositionPendingChange=!1,userEvent+=".compose",view.inputState.compositionFirstChange&&(userEvent+=".start",view.inputState.compositionFirstChange=!1));return startState.update(tr,{userEvent,scrollIntoView:!0})}(view,change,newSel));return view.state.facet(inputHandler).some(h=>h(view,change.from,change.to,text,defaultInsert))||view.dispatch(defaultInsert()),!0}class InputState{setSelectionOrigin(origin){this.lastSelectionOrigin=origin,this.lastSelectionTime=Date.now()}constructor(view){this.view=view,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=view.hasFocus,browser.safari&&view.contentDOM.addEventListener("input",()=>null),browser.gecko&&function firefoxCopyCutHack(doc){appliedFirefoxHack.has(doc)||(appliedFirefoxHack.add(doc),doc.addEventListener("copy",()=>{}),doc.addEventListener("cut",()=>{}))}(view.contentDOM.ownerDocument)}handleEvent(event){(function eventBelongsToEditor(view,event){if(!event.bubbles)return!0;if(event.defaultPrevented)return!1;for(let cView,node=event.target;node!=view.contentDOM;node=node.parentNode)if(!node||11==node.nodeType||(cView=ContentView.get(node))&&cView.ignoreEvent(event))return!1;return!0})(this.view,event)&&!this.ignoreDuringComposition(event)&&("keydown"==event.type&&this.keydown(event)||(0!=this.view.updateState?Promise.resolve().then(()=>this.runHandlers(event.type,event)):this.runHandlers(event.type,event)))}runHandlers(type,event){let handlers=this.handlers[type];if(handlers){for(let observer of handlers.observers)observer(this.view,event);for(let handler of handlers.handlers){if(event.defaultPrevented)break;if(handler(this.view,event)){event.preventDefault();break}}}}ensureHandlers(plugins){let handlers=computeHandlers(plugins),prev=this.handlers,dom=this.view.contentDOM;for(let type in handlers)if("scroll"!=type){let passive=!handlers[type].handlers.length,exists=prev[type];exists&&passive!=!exists.handlers.length&&(dom.removeEventListener(type,this.handleEvent),exists=null),exists||dom.addEventListener(type,this.handleEvent,{passive})}for(let type in prev)"scroll"==type||handlers[type]||dom.removeEventListener(type,this.handleEvent);this.handlers=handlers}keydown(event){if(this.lastKeyCode=event.keyCode,this.lastKeyTime=Date.now(),9==event.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&27!=event.keyCode&&modifierCodes.indexOf(event.keyCode)<0&&(this.tabFocusMode=-1),browser.android&&browser.chrome&&!event.synthetic&&(13==event.keyCode||8==event.keyCode))return this.view.observer.delayAndroidKey(event.key,event.keyCode),!0;let pending;return!browser.ios||event.synthetic||event.altKey||event.metaKey||!((pending=PendingKeys.find(key=>key.keyCode==event.keyCode))&&!event.ctrlKey||EmacsyPendingKeys.indexOf(event.key)>-1&&event.ctrlKey&&!event.shiftKey)?(229!=event.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=pending||event,setTimeout(()=>this.flushIOSKey(),250),!0)}flushIOSKey(change){let key=this.pendingIOSKey;return!!key&&(!("Enter"==key.key&&change&&change.from<change.to&&/^\S+$/.test(change.insert.toString()))&&(this.pendingIOSKey=void 0,dispatchKey(this.view.contentDOM,key.key,key.keyCode,key instanceof KeyboardEvent?key:void 0)))}ignoreDuringComposition(event){return!!/^key/.test(event.type)&&(this.composing>0||!!(browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(mouseSelection){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=mouseSelection}update(update){this.view.observer.update(update),this.mouseSelection&&this.mouseSelection.update(update),this.draggedContent&&update.docChanged&&(this.draggedContent=this.draggedContent.map(update.changes)),update.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bindHandler(plugin,handler){return(view,event)=>{try{return handler.call(plugin,event,view)}catch(e){logException(view.state,e)}}}function computeHandlers(plugins){let result=Object.create(null);function record(type){return result[type]||(result[type]={observers:[],handlers:[]})}for(let plugin of plugins){let spec=plugin.spec,handlers=spec&&spec.plugin.domEventHandlers,observers=spec&&spec.plugin.domEventObservers;if(handlers)for(let type in handlers){let f=handlers[type];f&&record(type).handlers.push(bindHandler(plugin.value,f))}if(observers)for(let type in observers){let f=observers[type];f&&record(type).observers.push(bindHandler(plugin.value,f))}}for(let type in handlers)record(type).handlers.push(handlers[type]);for(let type in observers)record(type).observers.push(observers[type]);return result}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225];function dragScrollSpeed(dist){return.7*Math.max(0,dist)+8}class MouseSelection{constructor(view,startEvent,style,mustSelect){this.view=view,this.startEvent=startEvent,this.style=style,this.mustSelect=mustSelect,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=startEvent,this.scrollParents=function scrollableParents(dom){let x,y,doc=dom.ownerDocument;for(let cur=dom.parentNode;cur&&!(cur==doc.body||x&&y);)if(1==cur.nodeType)!y&&cur.scrollHeight>cur.clientHeight&&(y=cur),!x&&cur.scrollWidth>cur.clientWidth&&(x=cur),cur=cur.assignedSlot||cur.parentNode;else{if(11!=cur.nodeType)break;cur=cur.host}return{x,y}}(view.contentDOM),this.atoms=view.state.facet(atomicRanges).map(f=>f(view));let doc=view.contentDOM.ownerDocument;doc.addEventListener("mousemove",this.move=this.move.bind(this)),doc.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=startEvent.shiftKey,this.multiple=view.state.facet(EditorState.allowMultipleSelections)&&function addsSelectionRange(view,event){let facet=view.state.facet(clickAddsSelectionRange);return facet.length?facet[0](event):browser.mac?event.metaKey:event.ctrlKey}(view,startEvent),this.dragging=!(!function isInPrimarySelection(view,event){let{main}=view.state.selection;if(main.empty)return!1;let sel=getSelection(view.root);if(!sel||0==sel.rangeCount)return!0;let rects=sel.getRangeAt(0).getClientRects();for(let i=0;i<rects.length;i++){let rect=rects[i];if(rect.left<=event.clientX&&rect.right>=event.clientX&&rect.top<=event.clientY&&rect.bottom>=event.clientY)return!0}return!1}(view,startEvent)||1!=getClickType(startEvent))&&null}start(event){!1===this.dragging&&this.select(event)}move(event){if(0==event.buttons)return this.destroy();if(this.dragging||null==this.dragging&&function dist(a,b){return Math.max(Math.abs(a.clientX-b.clientX),Math.abs(a.clientY-b.clientY))}(this.startEvent,event)<10)return;this.select(this.lastEvent=event);let sx=0,sy=0,left=0,top=0,right=this.view.win.innerWidth,bottom=this.view.win.innerHeight;this.scrollParents.x&&({left,right}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top,bottom}=this.scrollParents.y.getBoundingClientRect());let margins=getScrollMargins(this.view);event.clientX-margins.left<=left+6?sx=-dragScrollSpeed(left-event.clientX):event.clientX+margins.right>=right-6&&(sx=dragScrollSpeed(event.clientX-right)),event.clientY-margins.top<=top+6?sy=-dragScrollSpeed(top-event.clientY):event.clientY+margins.bottom>=bottom-6&&(sy=dragScrollSpeed(event.clientY-bottom)),this.setScrollSpeed(sx,sy)}up(event){null==this.dragging&&this.select(this.lastEvent),this.dragging||event.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let doc=this.view.contentDOM.ownerDocument;doc.removeEventListener("mousemove",this.move),doc.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(sx,sy){this.scrollSpeed={x:sx,y:sy},sx||sy?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x,y}=this.scrollSpeed;x&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=x,x=0),y&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=y,y=0),(x||y)&&this.view.win.scrollBy(x,y),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(sel){let ranges=null;for(let i=0;i<sel.ranges.length;i++){let range=sel.ranges[i],updated=null;if(range.empty){let pos=skipAtomicRanges(this.atoms,range.from,0);pos!=range.from&&(updated=dist_EditorSelection.cursor(pos,-1))}else{let from=skipAtomicRanges(this.atoms,range.from,-1),to=skipAtomicRanges(this.atoms,range.to,1);from==range.from&&to==range.to||(updated=dist_EditorSelection.range(range.from==range.anchor?from:to,range.from==range.head?from:to))}updated&&(ranges||(ranges=sel.ranges.slice()),ranges[i]=updated)}return ranges?dist_EditorSelection.create(ranges,sel.mainIndex):sel}select(event){let{view}=this,selection=this.skipAtoms(this.style.get(event,this.extend,this.multiple));!this.mustSelect&&selection.eq(view.state.selection,!1===this.dragging)||this.view.dispatch({selection,userEvent:"select.pointer"}),this.mustSelect=!1}update(update){update.transactions.some(tr=>tr.isUserEvent("input.type"))?this.destroy():this.style.update(update)&&setTimeout(()=>this.select(this.lastEvent),20)}}const handlers=Object.create(null),observers=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function textFilter(state,facet,text){for(let filter of state.facet(facet))text=filter(text,state);return text}function doPaste(view,input){input=textFilter(view.state,clipboardInputFilter,input);let changes,{state}=view,i=1,text=state.toText(input),byLine=text.lines==state.selection.ranges.length;if(null!=lastLinewiseCopy&&state.selection.ranges.every(r=>r.empty)&&lastLinewiseCopy==text.toString()){let lastLine=-1;changes=state.changeByRange(range=>{let line=state.doc.lineAt(range.from);if(line.from==lastLine)return{range};lastLine=line.from;let insert=state.toText((byLine?text.line(i++).text:input)+state.lineBreak);return{changes:{from:line.from,insert},range:dist_EditorSelection.cursor(range.from+insert.length)}})}else changes=byLine?state.changeByRange(range=>{let line=text.line(i++);return{changes:{from:range.from,to:range.to,insert:line.text},range:dist_EditorSelection.cursor(range.from+line.length)}}):state.replaceSelection(text);view.dispatch(changes,{userEvent:"input.paste",scrollIntoView:!0})}function rangeForClick(view,pos,bias,type){if(1==type)return dist_EditorSelection.cursor(pos,bias);if(2==type)return function groupAt(state,pos,bias=1){let categorize=state.charCategorizer(pos),line=state.doc.lineAt(pos),linePos=pos-line.from;if(0==line.length)return dist_EditorSelection.cursor(pos);0==linePos?bias=1:linePos==line.length&&(bias=-1);let from=linePos,to=linePos;bias<0?from=dist_findClusterBreak(line.text,linePos,!1):to=dist_findClusterBreak(line.text,linePos);let cat=categorize(line.text.slice(from,to));for(;from>0;){let prev=dist_findClusterBreak(line.text,from,!1);if(categorize(line.text.slice(prev,from))!=cat)break;from=prev}for(;to<line.length;){let next=dist_findClusterBreak(line.text,to);if(categorize(line.text.slice(to,next))!=cat)break;to=next}return dist_EditorSelection.range(from+line.from,to+line.from)}(view.state,pos,bias);{let visual=LineView.find(view.docView,pos),line=view.state.doc.lineAt(visual?visual.posAtEnd:pos),from=visual?visual.posAtStart:line.from,to=visual?visual.posAtEnd:line.to;return to<view.state.doc.length&&to==line.to&&to++,dist_EditorSelection.range(from,to)}}observers.scroll=view=>{view.inputState.lastScrollTop=view.scrollDOM.scrollTop,view.inputState.lastScrollLeft=view.scrollDOM.scrollLeft},handlers.keydown=(view,event)=>(view.inputState.setSelectionOrigin("select"),27==event.keyCode&&0!=view.inputState.tabFocusMode&&(view.inputState.tabFocusMode=Date.now()+2e3),!1),observers.touchstart=(view,e)=>{view.inputState.lastTouchTime=Date.now(),view.inputState.setSelectionOrigin("select.pointer")},observers.touchmove=view=>{view.inputState.setSelectionOrigin("select.pointer")},handlers.mousedown=(view,event)=>{if(view.observer.flush(),view.inputState.lastTouchTime>Date.now()-2e3)return!1;let style=null;for(let makeStyle of view.state.facet(mouseSelectionStyle))if(style=makeStyle(view,event),style)break;if(style||0!=event.button||(style=function basicMouseSelection(view,event){let start=queryPos(view,event),type=getClickType(event),startSel=view.state.selection;return{update(update){update.docChanged&&(start.pos=update.changes.mapPos(start.pos),startSel=startSel.map(update.changes))},get(event,extend,multiple){let removed,cur=queryPos(view,event),range=rangeForClick(view,cur.pos,cur.bias,type);if(start.pos!=cur.pos&&!extend){let startRange=rangeForClick(view,start.pos,start.bias,type),from=Math.min(startRange.from,range.from),to=Math.max(startRange.to,range.to);range=from<range.from?dist_EditorSelection.range(from,to):dist_EditorSelection.range(to,from)}return extend?startSel.replaceRange(startSel.main.extend(range.from,range.to)):multiple&&1==type&&startSel.ranges.length>1&&(removed=function removeRangeAround(sel,pos){for(let i=0;i<sel.ranges.length;i++){let{from,to}=sel.ranges[i];if(from<=pos&&to>=pos)return dist_EditorSelection.create(sel.ranges.slice(0,i).concat(sel.ranges.slice(i+1)),sel.mainIndex==i?0:sel.mainIndex-(sel.mainIndex>i?1:0))}return null}(startSel,cur.pos))?removed:multiple?startSel.addRange(range):dist_EditorSelection.create([range])}}}(view,event)),style){let mustFocus=!view.hasFocus;view.inputState.startMouseSelection(new MouseSelection(view,event,style,mustFocus)),mustFocus&&view.observer.ignore(()=>{focusPreventScroll(view.contentDOM);let active=view.root.activeElement;active&&!active.contains(view.contentDOM)&&active.blur()});let mouseSel=view.inputState.mouseSelection;if(mouseSel)return mouseSel.start(event),!1===mouseSel.dragging}return!1};let inside=(x,y,rect)=>y>=rect.top&&y<=rect.bottom&&x>=rect.left&&x<=rect.right;function findPositionSide(view,pos,x,y){let line=LineView.find(view.docView,pos);if(!line)return 1;let off=pos-line.posAtStart;if(0==off)return 1;if(off==line.length)return-1;let before=line.coordsAt(off,-1);if(before&&inside(x,y,before))return-1;let after=line.coordsAt(off,1);return after&&inside(x,y,after)?1:before&&before.bottom>=y?-1:1}function queryPos(view,event){let pos=view.posAtCoords({x:event.clientX,y:event.clientY},!1);return{pos,bias:findPositionSide(view,pos,event.clientX,event.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(event){if(!BadMouseDetail)return event.detail;let last=lastMouseDown,lastTime=lastMouseDownTime;return lastMouseDown=event,lastMouseDownTime=Date.now(),lastMouseDownCount=!last||lastTime>Date.now()-400&&Math.abs(last.clientX-event.clientX)<2&&Math.abs(last.clientY-event.clientY)<2?(lastMouseDownCount+1)%3:1}function dropText(view,event,text,direct){if(!(text=textFilter(view.state,clipboardInputFilter,text)))return;let dropPos=view.posAtCoords({x:event.clientX,y:event.clientY},!1),{draggedContent}=view.inputState,del=direct&&draggedContent&&function dragMovesSelection(view,event){let facet=view.state.facet(dragMovesSelection$1);return facet.length?facet[0](event):browser.mac?!event.altKey:!event.ctrlKey}(view,event)?{from:draggedContent.from,to:draggedContent.to}:null,ins={from:dropPos,insert:text},changes=view.state.changes(del?[del,ins]:ins);view.focus(),view.dispatch({changes,selection:{anchor:changes.mapPos(dropPos,-1),head:changes.mapPos(dropPos,1)},userEvent:del?"move.drop":"input.drop"}),view.inputState.draggedContent=null}handlers.dragstart=(view,event)=>{let{selection:{main:range}}=view.state;if(event.target.draggable){let cView=view.docView.nearest(event.target);if(cView&&cView.isWidget){let from=cView.posAtStart,to=from+cView.length;(from>=range.to||to<=range.from)&&(range=dist_EditorSelection.range(from,to))}}let{inputState}=view;return inputState.mouseSelection&&(inputState.mouseSelection.dragging=!0),inputState.draggedContent=range,event.dataTransfer&&(event.dataTransfer.setData("Text",textFilter(view.state,clipboardOutputFilter,view.state.sliceDoc(range.from,range.to))),event.dataTransfer.effectAllowed="copyMove"),!1},handlers.dragend=view=>(view.inputState.draggedContent=null,!1),handlers.drop=(view,event)=>{if(!event.dataTransfer)return!1;if(view.state.readOnly)return!0;let files=event.dataTransfer.files;if(files&&files.length){let text=Array(files.length),read=0,finishFile=()=>{++read==files.length&&dropText(view,event,text.filter(s=>null!=s).join(view.state.lineBreak),!1)};for(let i=0;i<files.length;i++){let reader=new FileReader;reader.onerror=finishFile,reader.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(reader.result)||(text[i]=reader.result),finishFile()},reader.readAsText(files[i])}return!0}{let text=event.dataTransfer.getData("Text");if(text)return dropText(view,event,text,!0),!0}return!1},handlers.paste=(view,event)=>{if(view.state.readOnly)return!0;view.observer.flush();let data=brokenClipboardAPI?null:event.clipboardData;return data?(doPaste(view,data.getData("text/plain")||data.getData("text/uri-list")),!0):(function capturePaste(view){let parent=view.dom.parentNode;if(!parent)return;let target=parent.appendChild(document.createElement("textarea"));target.style.cssText="position: fixed; left: -10000px; top: 10px",target.focus(),setTimeout(()=>{view.focus(),target.remove(),doPaste(view,target.value)},50)}(view),!1)};let lastLinewiseCopy=null;handlers.copy=handlers.cut=(view,event)=>{let{text,ranges,linewise}=function copiedRange(state){let content=[],ranges=[],linewise=!1;for(let range of state.selection.ranges)range.empty||(content.push(state.sliceDoc(range.from,range.to)),ranges.push(range));if(!content.length){let upto=-1;for(let{from}of state.selection.ranges){let line=state.doc.lineAt(from);line.number>upto&&(content.push(line.text),ranges.push({from:line.from,to:Math.min(state.doc.length,line.to+1)})),upto=line.number}linewise=!0}return{text:textFilter(state,clipboardOutputFilter,content.join(state.lineBreak)),ranges,linewise}}(view.state);if(!text&&!linewise)return!1;lastLinewiseCopy=linewise?text:null,"cut"!=event.type||view.state.readOnly||view.dispatch({changes:ranges,scrollIntoView:!0,userEvent:"delete.cut"});let data=brokenClipboardAPI?null:event.clipboardData;return data?(data.clearData(),data.setData("text/plain",text),!0):(function captureCopy(view,text){let parent=view.dom.parentNode;if(!parent)return;let target=parent.appendChild(document.createElement("textarea"));target.style.cssText="position: fixed; left: -10000px; top: 10px",target.value=text,target.focus(),target.selectionEnd=text.length,target.selectionStart=0,setTimeout(()=>{target.remove(),view.focus()},50)}(view,text),!1)};const isFocusChange=Annotation.define();function focusChangeTransaction(state,focus){let effects=[];for(let getEffect of state.facet(focusChangeEffect)){let effect=getEffect(state,focus);effect&&effects.push(effect)}return effects.length?state.update({effects,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(view){setTimeout(()=>{let focus=view.hasFocus;if(focus!=view.inputState.notifiedFocused){let tr=focusChangeTransaction(view.state,focus);tr?view.dispatch(tr):view.update([])}},10)}observers.focus=view=>{view.inputState.lastFocusTime=Date.now(),view.scrollDOM.scrollTop||!view.inputState.lastScrollTop&&!view.inputState.lastScrollLeft||(view.scrollDOM.scrollTop=view.inputState.lastScrollTop,view.scrollDOM.scrollLeft=view.inputState.lastScrollLeft),updateForFocusChange(view)},observers.blur=view=>{view.observer.clearSelectionRange(),updateForFocusChange(view)},observers.compositionstart=observers.compositionupdate=view=>{view.observer.editContext||(null==view.inputState.compositionFirstChange&&(view.inputState.compositionFirstChange=!0),view.inputState.composing<0&&(view.inputState.composing=0))},observers.compositionend=view=>{view.observer.editContext||(view.inputState.composing=-1,view.inputState.compositionEndedAt=Date.now(),view.inputState.compositionPendingKey=!0,view.inputState.compositionPendingChange=view.observer.pendingRecords().length>0,view.inputState.compositionFirstChange=null,browser.chrome&&browser.android?view.observer.flushSoon():view.inputState.compositionPendingChange?Promise.resolve().then(()=>view.observer.flush()):setTimeout(()=>{view.inputState.composing<0&&view.docView.hasComposition&&view.update([])},50))},observers.contextmenu=view=>{view.inputState.lastContextMenu=Date.now()},handlers.beforeinput=(view,event)=>{var _a,_b;if("insertReplacementText"==event.inputType&&view.observer.editContext){let text=null===(_a=event.dataTransfer)||void 0===_a?void 0:_a.getData("text/plain"),ranges=event.getTargetRanges();if(text&&ranges.length){let r=ranges[0],from=view.posAtDOM(r.startContainer,r.startOffset),to=view.posAtDOM(r.endContainer,r.endOffset);return applyDOMChangeInner(view,{from,to,insert:view.state.toText(text)},null),!0}}let pending;if(browser.chrome&&browser.android&&(pending=PendingKeys.find(key=>key.inputType==event.inputType))&&(view.observer.delayAndroidKey(pending.key,pending.keyCode),"Backspace"==pending.key||"Delete"==pending.key)){let startViewHeight=(null===(_b=window.visualViewport)||void 0===_b?void 0:_b.height)||0;setTimeout(()=>{var _a;((null===(_a=window.visualViewport)||void 0===_a?void 0:_a.height)||0)>startViewHeight+10&&view.hasFocus&&(view.contentDOM.blur(),view.focus())},100)}return browser.ios&&"deleteContentForward"==event.inputType&&view.observer.flushSoon(),browser.safari&&"insertText"==event.inputType&&view.inputState.composing>=0&&setTimeout(()=>observers.compositionend(view,event),20),!1};const appliedFirefoxHack=new Set;const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];let heightChangeFlag=!1;function clearHeightChangeFlag(){heightChangeFlag=!1}class HeightOracle{constructor(lineWrapping){this.lineWrapping=lineWrapping,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(from,to){let lines=this.doc.lineAt(to).number-this.doc.lineAt(from).number+1;return this.lineWrapping&&(lines+=Math.max(0,Math.ceil((to-from-lines*this.lineLength*.5)/this.lineLength))),this.lineHeight*lines}heightForLine(length){if(!this.lineWrapping)return this.lineHeight;return(1+Math.max(0,Math.ceil((length-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight}setDoc(doc){return this.doc=doc,this}mustRefreshForWrapping(whiteSpace){return wrappingWhiteSpace.indexOf(whiteSpace)>-1!=this.lineWrapping}mustRefreshForHeights(lineHeights){let newHeight=!1;for(let i=0;i<lineHeights.length;i++){let h=lineHeights[i];h<0?i++:this.heightSamples[Math.floor(10*h)]||(newHeight=!0,this.heightSamples[Math.floor(10*h)]=!0)}return newHeight}refresh(whiteSpace,lineHeight,charWidth,textHeight,lineLength,knownHeights){let lineWrapping=wrappingWhiteSpace.indexOf(whiteSpace)>-1,changed=Math.round(lineHeight)!=Math.round(this.lineHeight)||this.lineWrapping!=lineWrapping;if(this.lineWrapping=lineWrapping,this.lineHeight=lineHeight,this.charWidth=charWidth,this.textHeight=textHeight,this.lineLength=lineLength,changed){this.heightSamples={};for(let i=0;i<knownHeights.length;i++){let h=knownHeights[i];h<0?i++:this.heightSamples[Math.floor(10*h)]=!0}}return changed}}class MeasuredHeights{constructor(from,heights){this.from=from,this.heights=heights,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(from,length,top,height,_content){this.from=from,this.length=length,this.top=top,this.height=height,this._content=_content}get type(){return"number"==typeof this._content?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(other){let content=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(other._content)?other._content:[other]);return new BlockInfo(this.from,this.length+other.length,this.top,this.height+other.height,content)}}var QueryType=function(QueryType){return QueryType[QueryType.ByPos=0]="ByPos",QueryType[QueryType.ByHeight=1]="ByHeight",QueryType[QueryType.ByPosNoHeight=2]="ByPosNoHeight",QueryType}(QueryType||(QueryType={}));class HeightMap{constructor(length,height,flags=2){this.length=length,this.height=height,this.flags=flags}get outdated(){return(2&this.flags)>0}set outdated(value){this.flags=(value?2:0)|-3&this.flags}setHeight(height){this.height!=height&&(Math.abs(this.height-height)>.001&&(heightChangeFlag=!0),this.height=height)}replace(_from,_to,nodes){return HeightMap.of(nodes)}decomposeLeft(_to,result){result.push(this)}decomposeRight(_from,result){result.push(this)}applyChanges(decorations,oldDoc,oracle,changes){let me=this,doc=oracle.doc;for(let i=changes.length-1;i>=0;i--){let{fromA,toA,fromB,toB}=changes[i],start=me.lineAt(fromA,QueryType.ByPosNoHeight,oracle.setDoc(oldDoc),0,0),end=start.to>=toA?start:me.lineAt(toA,QueryType.ByPosNoHeight,oracle,0,0);for(toB+=end.to-toA,toA=end.to;i>0&&start.from<=changes[i-1].toA;)fromA=changes[i-1].fromA,fromB=changes[i-1].fromB,i--,fromA<start.from&&(start=me.lineAt(fromA,QueryType.ByPosNoHeight,oracle,0,0));fromB+=start.from-fromA,fromA=start.from;let nodes=NodeBuilder.build(oracle.setDoc(doc),decorations,fromB,toB);me=replace(me,me.replace(fromA,toA,nodes))}return me.updateHeight(oracle,0)}static empty(){return new HeightMapText(0,0)}static of(nodes){if(1==nodes.length)return nodes[0];let i=0,j=nodes.length,before=0,after=0;for(;;)if(i==j)if(before>2*after){let split=nodes[i-1];split.break?nodes.splice(--i,1,split.left,null,split.right):nodes.splice(--i,1,split.left,split.right),j+=1+split.break,before-=split.size}else{if(!(after>2*before))break;{let split=nodes[j];split.break?nodes.splice(j,1,split.left,null,split.right):nodes.splice(j,1,split.left,split.right),j+=2+split.break,after-=split.size}}else if(before<after){let next=nodes[i++];next&&(before+=next.size)}else{let next=nodes[--j];next&&(after+=next.size)}let brk=0;return null==nodes[i-1]?(brk=1,i--):null==nodes[i]&&(brk=1,j++),new HeightMapBranch(HeightMap.of(nodes.slice(0,i)),brk,HeightMap.of(nodes.slice(j)))}}function replace(old,val){return old==val?old:(old.constructor!=val.constructor&&(heightChangeFlag=!0),val)}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(length,height,deco){super(length,height),this.deco=deco}blockAt(_height,_oracle,top,offset){return new BlockInfo(offset,this.length,top,this.height,this.deco||0)}lineAt(_value,_type,oracle,top,offset){return this.blockAt(0,oracle,top,offset)}forEachLine(from,to,oracle,top,offset,f){from<=offset+this.length&&to>=offset&&f(this.blockAt(0,oracle,top,offset))}updateHeight(oracle,offset=0,_force=!1,measured){return measured&&measured.from<=offset&&measured.more&&this.setHeight(measured.heights[measured.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(length,height){super(length,height,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(_height,_oracle,top,offset){return new BlockInfo(offset,this.length,top,this.height,this.breaks)}replace(_from,_to,nodes){let node=nodes[0];return 1==nodes.length&&(node instanceof HeightMapText||node instanceof HeightMapGap&&4&node.flags)&&Math.abs(this.length-node.length)<10?(node instanceof HeightMapGap?node=new HeightMapText(node.length,this.height):node.height=this.height,this.outdated||(node.outdated=!1),node):HeightMap.of(nodes)}updateHeight(oracle,offset=0,force=!1,measured){return measured&&measured.from<=offset&&measured.more?this.setHeight(measured.heights[measured.index++]):(force||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,oracle.heightForLine(this.length-this.collapsed))+this.breaks*oracle.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(length){super(length,0)}heightMetrics(oracle,offset){let perLine,firstLine=oracle.doc.lineAt(offset).number,lastLine=oracle.doc.lineAt(offset+this.length).number,lines=lastLine-firstLine+1,perChar=0;if(oracle.lineWrapping){let totalPerLine=Math.min(this.height,oracle.lineHeight*lines);perLine=totalPerLine/lines,this.length>lines+1&&(perChar=(this.height-totalPerLine)/(this.length-lines-1))}else perLine=this.height/lines;return{firstLine,lastLine,perLine,perChar}}blockAt(height,oracle,top,offset){let{firstLine,lastLine,perLine,perChar}=this.heightMetrics(oracle,offset);if(oracle.lineWrapping){let guess=offset+(height<oracle.lineHeight?0:Math.round(Math.max(0,Math.min(1,(height-top)/this.height))*this.length)),line=oracle.doc.lineAt(guess),lineHeight=perLine+line.length*perChar,lineTop=Math.max(top,height-lineHeight/2);return new BlockInfo(line.from,line.length,lineTop,lineHeight,0)}{let line=Math.max(0,Math.min(lastLine-firstLine,Math.floor((height-top)/perLine))),{from,length}=oracle.doc.line(firstLine+line);return new BlockInfo(from,length,top+perLine*line,perLine,0)}}lineAt(value,type,oracle,top,offset){if(type==QueryType.ByHeight)return this.blockAt(value,oracle,top,offset);if(type==QueryType.ByPosNoHeight){let{from,to}=oracle.doc.lineAt(value);return new BlockInfo(from,to-from,0,0,0)}let{firstLine,perLine,perChar}=this.heightMetrics(oracle,offset),line=oracle.doc.lineAt(value),lineHeight=perLine+line.length*perChar,linesAbove=line.number-firstLine,lineTop=top+perLine*linesAbove+perChar*(line.from-offset-linesAbove);return new BlockInfo(line.from,line.length,Math.max(top,Math.min(lineTop,top+this.height-lineHeight)),lineHeight,0)}forEachLine(from,to,oracle,top,offset,f){from=Math.max(from,offset),to=Math.min(to,offset+this.length);let{firstLine,perLine,perChar}=this.heightMetrics(oracle,offset);for(let pos=from,lineTop=top;pos<=to;){let line=oracle.doc.lineAt(pos);if(pos==from){let linesAbove=line.number-firstLine;lineTop+=perLine*linesAbove+perChar*(from-offset-linesAbove)}let lineHeight=perLine+perChar*line.length;f(new BlockInfo(line.from,line.length,lineTop,lineHeight,0)),lineTop+=lineHeight,pos=line.to+1}}replace(from,to,nodes){let after=this.length-to;if(after>0){let last=nodes[nodes.length-1];last instanceof HeightMapGap?nodes[nodes.length-1]=new HeightMapGap(last.length+after):nodes.push(null,new HeightMapGap(after-1))}if(from>0){let first=nodes[0];first instanceof HeightMapGap?nodes[0]=new HeightMapGap(from+first.length):nodes.unshift(new HeightMapGap(from-1),null)}return HeightMap.of(nodes)}decomposeLeft(to,result){result.push(new HeightMapGap(to-1),null)}decomposeRight(from,result){result.push(null,new HeightMapGap(this.length-from-1))}updateHeight(oracle,offset=0,force=!1,measured){let end=offset+this.length;if(measured&&measured.from<=offset+this.length&&measured.more){let nodes=[],pos=Math.max(offset,measured.from),singleHeight=-1;for(measured.from>offset&&nodes.push(new HeightMapGap(measured.from-offset-1).updateHeight(oracle,offset));pos<=end&&measured.more;){let len=oracle.doc.lineAt(pos).length;nodes.length&&nodes.push(null);let height=measured.heights[measured.index++];-1==singleHeight?singleHeight=height:Math.abs(height-singleHeight)>=.001&&(singleHeight=-2);let line=new HeightMapText(len,height);line.outdated=!1,nodes.push(line),pos+=len+1}pos<=end&&nodes.push(null,new HeightMapGap(end-pos).updateHeight(oracle,pos));let result=HeightMap.of(nodes);return(singleHeight<0||Math.abs(result.height-this.height)>=.001||Math.abs(singleHeight-this.heightMetrics(oracle,offset).perLine)>=.001)&&(heightChangeFlag=!0),replace(this,result)}return(force||this.outdated)&&(this.setHeight(oracle.heightForGap(offset,offset+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(left,brk,right){super(left.length+brk+right.length,left.height+right.height,brk|(left.outdated||right.outdated?2:0)),this.left=left,this.right=right,this.size=left.size+right.size}get break(){return 1&this.flags}blockAt(height,oracle,top,offset){let mid=top+this.left.height;return height<mid?this.left.blockAt(height,oracle,top,offset):this.right.blockAt(height,oracle,mid,offset+this.left.length+this.break)}lineAt(value,type,oracle,top,offset){let rightTop=top+this.left.height,rightOffset=offset+this.left.length+this.break,left=type==QueryType.ByHeight?value<rightTop:value<rightOffset,base=left?this.left.lineAt(value,type,oracle,top,offset):this.right.lineAt(value,type,oracle,rightTop,rightOffset);if(this.break||(left?base.to<rightOffset:base.from>rightOffset))return base;let subQuery=type==QueryType.ByPosNoHeight?QueryType.ByPosNoHeight:QueryType.ByPos;return left?base.join(this.right.lineAt(rightOffset,subQuery,oracle,rightTop,rightOffset)):this.left.lineAt(rightOffset,subQuery,oracle,top,offset).join(base)}forEachLine(from,to,oracle,top,offset,f){let rightTop=top+this.left.height,rightOffset=offset+this.left.length+this.break;if(this.break)from<rightOffset&&this.left.forEachLine(from,to,oracle,top,offset,f),to>=rightOffset&&this.right.forEachLine(from,to,oracle,rightTop,rightOffset,f);else{let mid=this.lineAt(rightOffset,QueryType.ByPos,oracle,top,offset);from<mid.from&&this.left.forEachLine(from,mid.from-1,oracle,top,offset,f),mid.to>=from&&mid.from<=to&&f(mid),to>mid.to&&this.right.forEachLine(mid.to+1,to,oracle,rightTop,rightOffset,f)}}replace(from,to,nodes){let rightStart=this.left.length+this.break;if(to<rightStart)return this.balanced(this.left.replace(from,to,nodes),this.right);if(from>this.left.length)return this.balanced(this.left,this.right.replace(from-rightStart,to-rightStart,nodes));let result=[];from>0&&this.decomposeLeft(from,result);let left=result.length;for(let node of nodes)result.push(node);if(from>0&&mergeGaps(result,left-1),to<this.length){let right=result.length;this.decomposeRight(to,result),mergeGaps(result,right)}return HeightMap.of(result)}decomposeLeft(to,result){let left=this.left.length;if(to<=left)return this.left.decomposeLeft(to,result);result.push(this.left),this.break&&(left++,to>=left&&result.push(null)),to>left&&this.right.decomposeLeft(to-left,result)}decomposeRight(from,result){let left=this.left.length,right=left+this.break;if(from>=right)return this.right.decomposeRight(from-right,result);from<left&&this.left.decomposeRight(from,result),this.break&&from<right&&result.push(null),result.push(this.right)}balanced(left,right){return left.size>2*right.size||right.size>2*left.size?HeightMap.of(this.break?[left,null,right]:[left,right]):(this.left=replace(this.left,left),this.right=replace(this.right,right),this.setHeight(left.height+right.height),this.outdated=left.outdated||right.outdated,this.size=left.size+right.size,this.length=left.length+this.break+right.length,this)}updateHeight(oracle,offset=0,force=!1,measured){let{left,right}=this,rightStart=offset+left.length+this.break,rebalance=null;return measured&&measured.from<=offset+left.length&&measured.more?rebalance=left=left.updateHeight(oracle,offset,force,measured):left.updateHeight(oracle,offset,force),measured&&measured.from<=rightStart+right.length&&measured.more?rebalance=right=right.updateHeight(oracle,rightStart,force,measured):right.updateHeight(oracle,rightStart,force),rebalance?this.balanced(left,right):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(nodes,around){let before,after;null==nodes[around]&&(before=nodes[around-1])instanceof HeightMapGap&&(after=nodes[around+1])instanceof HeightMapGap&&nodes.splice(around-1,3,new HeightMapGap(before.length+1+after.length))}class NodeBuilder{constructor(pos,oracle){this.pos=pos,this.oracle=oracle,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=pos}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(_from,to){if(this.lineStart>-1){let end=Math.min(to,this.lineEnd),last=this.nodes[this.nodes.length-1];last instanceof HeightMapText?last.length+=end-this.pos:(end>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(end-this.pos,-1)),this.writtenTo=end,to>end&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=to}point(from,to,deco){if(from<to||deco.heightRelevant){let height=deco.widget?deco.widget.estimatedHeight:0,breaks=deco.widget?deco.widget.lineBreaks:0;height<0&&(height=this.oracle.lineHeight);let len=to-from;deco.block?this.addBlock(new HeightMapBlock(len,height,deco)):(len||breaks||height>=5)&&this.addLineDeco(height,breaks,len)}else to>from&&this.span(from,to);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from,to}=this.oracle.doc.lineAt(this.pos);this.lineStart=from,this.lineEnd=to,this.writtenTo<from&&((this.writtenTo<from-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,from-1)),this.nodes.push(null)),this.pos>from&&this.nodes.push(new HeightMapText(this.pos-from,-1)),this.writtenTo=this.pos}blankContent(from,to){let gap=new HeightMapGap(to-from);return this.oracle.doc.lineAt(from).to==to&&(gap.flags|=4),gap}ensureLine(){this.enterLine();let last=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(last instanceof HeightMapText)return last;let line=new HeightMapText(0,-1);return this.nodes.push(line),line}addBlock(block){this.enterLine();let deco=block.deco;deco&&deco.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(block),this.writtenTo=this.pos=this.pos+block.length,deco&&deco.endSide>0&&(this.covering=block)}addLineDeco(height,breaks,length){let line=this.ensureLine();line.length+=length,line.collapsed+=length,line.widgetHeight=Math.max(line.widgetHeight,height),line.breaks+=breaks,this.writtenTo=this.pos=this.pos+length}finish(from){let last=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||last instanceof HeightMapText||this.isCovered?(this.writtenTo<this.pos||null==last)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new HeightMapText(0,-1));let pos=from;for(let node of this.nodes)node instanceof HeightMapText&&node.updateHeight(this.oracle,pos),pos+=node?node.length:1;return this.nodes}static build(oracle,decorations,from,to){let builder=new NodeBuilder(from,oracle);return dist_RangeSet.spans(decorations,from,to,builder,0),builder.finish(from)}}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(from,to,a,b){(from<to||a&&a.heightRelevant||b&&b.heightRelevant)&&addRange(from,to,this.changes,5)}}function visiblePixelRange(dom,paddingTop){let rect=dom.getBoundingClientRect(),doc=dom.ownerDocument,win=doc.defaultView||window,left=Math.max(0,rect.left),right=Math.min(win.innerWidth,rect.right),top=Math.max(0,rect.top),bottom=Math.min(win.innerHeight,rect.bottom);for(let parent=dom.parentNode;parent&&parent!=doc.body;)if(1==parent.nodeType){let elt=parent,style=window.getComputedStyle(elt);if((elt.scrollHeight>elt.clientHeight||elt.scrollWidth>elt.clientWidth)&&"visible"!=style.overflow){let parentRect=elt.getBoundingClientRect();left=Math.max(left,parentRect.left),right=Math.min(right,parentRect.right),top=Math.max(top,parentRect.top),bottom=Math.min(parent==dom.parentNode?win.innerHeight:bottom,parentRect.bottom)}parent="absolute"==style.position||"fixed"==style.position?elt.offsetParent:elt.parentNode}else{if(11!=parent.nodeType)break;parent=parent.host}return{left:left-rect.left,right:Math.max(left,right)-rect.left,top:top-(rect.top+paddingTop),bottom:Math.max(top,bottom)-(rect.top+paddingTop)}}function fullPixelRange(dom,paddingTop){let rect=dom.getBoundingClientRect();return{left:0,right:rect.right-rect.left,top:paddingTop,bottom:rect.bottom-(rect.top+paddingTop)}}class LineGap{constructor(from,to,size,displaySize){this.from=from,this.to=to,this.size=size,this.displaySize=displaySize}static same(a,b){if(a.length!=b.length)return!1;for(let i=0;i<a.length;i++){let gA=a[i],gB=b[i];if(gA.from!=gB.from||gA.to!=gB.to||gA.size!=gB.size)return!1}return!0}draw(viewState,wrapping){return Decoration.replace({widget:new LineGapWidget(this.displaySize*(wrapping?viewState.scaleY:viewState.scaleX),wrapping)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(size,vertical){super(),this.size=size,this.vertical=vertical}eq(other){return other.size==this.size&&other.vertical==this.vertical}toDOM(){let elt=document.createElement("div");return this.vertical?elt.style.height=this.size+"px":(elt.style.width=this.size+"px",elt.style.height="2px",elt.style.display="inline-block"),elt}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(state){this.state=state,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let guessWrapping=state.facet(contentAttributes).some(v=>"function"!=typeof v&&"cm-lineWrapping"==v.class);this.heightOracle=new HeightOracle(guessWrapping),this.stateDeco=state.facet(decorations).filter(d=>"function"!=typeof d),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(state.doc),[new ChangedRange(0,0,0,state.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(gap=>gap.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let viewports=[this.viewport],{main}=this.state.selection;for(let i=0;i<=1;i++){let pos=i?main.head:main.anchor;if(!viewports.some(({from,to})=>pos>=from&&pos<=to)){let{from,to}=this.lineBlockAt(pos);viewports.push(new Viewport(from,to))}}return this.viewports=viewports.sort((a,b)=>a.from-b.from),this.updateScaler()}updateScaler(){let scaler=this.scaler;return this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports),scaler.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,block=>{this.viewportLines.push(scaleBlock(block,this.scaler))})}update(update,scrollTarget=null){this.state=update.state;let prevDeco=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(d=>"function"!=typeof d);let contentChanges=update.changedRanges,heightChanges=ChangedRange.extendWithRanges(contentChanges,function heightRelevantDecoChanges(a,b,diff){let comp=new DecorationComparator;return dist_RangeSet.compare(a,b,diff,comp,0),comp.changes}(prevDeco,this.stateDeco,update?update.changes:ChangeSet.empty(this.state.doc.length))),prevHeight=this.heightMap.height,scrollAnchor=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);clearHeightChangeFlag(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,update.startState.doc,this.heightOracle.setDoc(this.state.doc),heightChanges),(this.heightMap.height!=prevHeight||heightChangeFlag)&&(update.flags|=2),scrollAnchor?(this.scrollAnchorPos=update.changes.mapPos(scrollAnchor.from,-1),this.scrollAnchorHeight=scrollAnchor.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=prevHeight);let viewport=heightChanges.length?this.mapViewport(this.viewport,update.changes):this.viewport;(scrollTarget&&(scrollTarget.range.head<viewport.from||scrollTarget.range.head>viewport.to)||!this.viewportIsAppropriate(viewport))&&(viewport=this.getViewport(0,scrollTarget));let viewportChange=viewport.from!=this.viewport.from||viewport.to!=this.viewport.to;this.viewport=viewport,update.flags|=this.updateForViewport(),(viewportChange||!update.changes.empty||2&update.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,update.changes))),update.flags|=this.computeVisibleRanges(update.changes),scrollTarget&&(this.scrollTarget=scrollTarget),!this.mustEnforceCursorAssoc&&update.selectionSet&&update.view.lineWrapping&&update.state.selection.main.empty&&update.state.selection.main.assoc&&!update.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(view){let dom=view.contentDOM,style=window.getComputedStyle(dom),oracle=this.heightOracle,whiteSpace=style.whiteSpace;this.defaultTextDirection="rtl"==style.direction?Direction.RTL:Direction.LTR;let refresh=this.heightOracle.mustRefreshForWrapping(whiteSpace),domRect=dom.getBoundingClientRect(),measureContent=refresh||this.mustMeasureContent||this.contentDOMHeight!=domRect.height;this.contentDOMHeight=domRect.height,this.mustMeasureContent=!1;let result=0,bias=0;if(domRect.width&&domRect.height){let{scaleX,scaleY}=getScale(dom,domRect);(scaleX>.005&&Math.abs(this.scaleX-scaleX)>.005||scaleY>.005&&Math.abs(this.scaleY-scaleY)>.005)&&(this.scaleX=scaleX,this.scaleY=scaleY,result|=16,refresh=measureContent=!0)}let paddingTop=(parseInt(style.paddingTop)||0)*this.scaleY,paddingBottom=(parseInt(style.paddingBottom)||0)*this.scaleY;this.paddingTop==paddingTop&&this.paddingBottom==paddingBottom||(this.paddingTop=paddingTop,this.paddingBottom=paddingBottom,result|=18),this.editorWidth!=view.scrollDOM.clientWidth&&(oracle.lineWrapping&&(measureContent=!0),this.editorWidth=view.scrollDOM.clientWidth,result|=16);let scrollTop=view.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=scrollTop),this.scrolledToBottom=isScrolledToBottom(view.scrollDOM);let pixelViewport=(this.printing?fullPixelRange:visiblePixelRange)(dom,this.paddingTop),dTop=pixelViewport.top-this.pixelViewport.top,dBottom=pixelViewport.bottom-this.pixelViewport.bottom;this.pixelViewport=pixelViewport;let inView=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(inView!=this.inView&&(this.inView=inView,inView&&(measureContent=!0)),!this.inView&&!this.scrollTarget&&!function inWindow(elt){let rect=elt.getBoundingClientRect(),win=elt.ownerDocument.defaultView||window;return rect.left<win.innerWidth&&rect.right>0&&rect.top<win.innerHeight&&rect.bottom>0}(view.dom))return 0;let contentWidth=domRect.width;if(this.contentDOMWidth==contentWidth&&this.editorHeight==view.scrollDOM.clientHeight||(this.contentDOMWidth=domRect.width,this.editorHeight=view.scrollDOM.clientHeight,result|=16),measureContent){let lineHeights=view.docView.measureVisibleLineHeights(this.viewport);if(oracle.mustRefreshForHeights(lineHeights)&&(refresh=!0),refresh||oracle.lineWrapping&&Math.abs(contentWidth-this.contentDOMWidth)>oracle.charWidth){let{lineHeight,charWidth,textHeight}=view.docView.measureTextSize();refresh=lineHeight>0&&oracle.refresh(whiteSpace,lineHeight,charWidth,textHeight,Math.max(5,contentWidth/charWidth),lineHeights),refresh&&(view.docView.minWidth=0,result|=16)}dTop>0&&dBottom>0?bias=Math.max(dTop,dBottom):dTop<0&&dBottom<0&&(bias=Math.min(dTop,dBottom)),clearHeightChangeFlag();for(let vp of this.viewports){let heights=vp.from==this.viewport.from?lineHeights:view.docView.measureVisibleLineHeights(vp);this.heightMap=(refresh?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,view.state.doc.length)]):this.heightMap).updateHeight(oracle,0,refresh,new MeasuredHeights(vp.from,heights))}heightChangeFlag&&(result|=2)}let viewportChange=!this.viewportIsAppropriate(this.viewport,bias)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return viewportChange&&(2&result&&(result|=this.updateScaler()),this.viewport=this.getViewport(bias,this.scrollTarget),result|=this.updateForViewport()),(2&result||viewportChange)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(refresh?[]:this.lineGaps,view)),result|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,view.docView.enforceCursorAssoc()),result}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(bias,scrollTarget){let marginTop=.5-Math.max(-.5,Math.min(.5,bias/1e3/2)),map=this.heightMap,oracle=this.heightOracle,{visibleTop,visibleBottom}=this,viewport=new Viewport(map.lineAt(visibleTop-1e3*marginTop,QueryType.ByHeight,oracle,0,0).from,map.lineAt(visibleBottom+1e3*(1-marginTop),QueryType.ByHeight,oracle,0,0).to);if(scrollTarget){let{head}=scrollTarget.range;if(head<viewport.from||head>viewport.to){let topPos,viewHeight=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),block=map.lineAt(head,QueryType.ByPos,oracle,0,0);topPos="center"==scrollTarget.y?(block.top+block.bottom)/2-viewHeight/2:"start"==scrollTarget.y||"nearest"==scrollTarget.y&&head<viewport.from?block.top:block.bottom-viewHeight,viewport=new Viewport(map.lineAt(topPos-500,QueryType.ByHeight,oracle,0,0).from,map.lineAt(topPos+viewHeight+500,QueryType.ByHeight,oracle,0,0).to)}}return viewport}mapViewport(viewport,changes){let from=changes.mapPos(viewport.from,-1),to=changes.mapPos(viewport.to,1);return new Viewport(this.heightMap.lineAt(from,QueryType.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(to,QueryType.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from,to},bias=0){if(!this.inView)return!0;let{top}=this.heightMap.lineAt(from,QueryType.ByPos,this.heightOracle,0,0),{bottom}=this.heightMap.lineAt(to,QueryType.ByPos,this.heightOracle,0,0),{visibleTop,visibleBottom}=this;return(0==from||top<=visibleTop-Math.max(10,Math.min(-bias,250)))&&(to==this.state.doc.length||bottom>=visibleBottom+Math.max(10,Math.min(bias,250)))&&top>visibleTop-2e3&&bottom<visibleBottom+2e3}mapLineGaps(gaps,changes){if(!gaps.length||changes.empty)return gaps;let mapped=[];for(let gap of gaps)changes.touchesRange(gap.from,gap.to)||mapped.push(new LineGap(changes.mapPos(gap.from),changes.mapPos(gap.to),gap.size,gap.displaySize));return mapped}ensureLineGaps(current,mayMeasure){let wrapping=this.heightOracle.lineWrapping,margin=wrapping?1e4:2e3,halfMargin=margin>>1,doubleMargin=margin<<1;if(this.defaultTextDirection!=Direction.LTR&&!wrapping)return[];let gaps=[],addGap=(from,to,line,structure)=>{if(to-from<halfMargin)return;let sel=this.state.selection.main,avoid=[sel.from];sel.empty||avoid.push(sel.to);for(let pos of avoid)if(pos>from&&pos<to)return addGap(from,pos-10,line,structure),void addGap(pos+10,to,line,structure);let gap=function find(array,f){for(let val of array)if(f(val))return val;return}(current,gap=>gap.from>=line.from&&gap.to<=line.to&&Math.abs(gap.from-from)<halfMargin&&Math.abs(gap.to-to)<halfMargin&&!avoid.some(pos=>gap.from<pos&&gap.to>pos));if(!gap){if(to<line.to&&mayMeasure&&wrapping&&mayMeasure.visibleRanges.some(r=>r.from<=to&&r.to>=to)){let lineStart=mayMeasure.moveToLineBoundary(dist_EditorSelection.cursor(to),!1,!0).head;lineStart>from&&(to=lineStart)}let size=this.gapSize(line,from,to,structure);gap=new LineGap(from,to,size,wrapping||size<2e6?size:2e6)}gaps.push(gap)},checkLine=line=>{if(line.length<doubleMargin||line.type!=BlockType.Text)return;let structure=function lineStructure(from,to,stateDeco){let ranges=[],pos=from,total=0;dist_RangeSet.spans(stateDeco,from,to,{span(){},point(from,to){from>pos&&(ranges.push({from:pos,to:from}),total+=from-pos),pos=to}},20),pos<to&&(ranges.push({from:pos,to}),total+=to-pos);return{total,ranges}}(line.from,line.to,this.stateDeco);if(structure.total<doubleMargin)return;let viewFrom,viewTo,target=this.scrollTarget?this.scrollTarget.range.head:null;if(wrapping){let top,bot,marginHeight=margin/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=target){let targetFrac=findFraction(structure,target),spaceFrac=((this.visibleBottom-this.visibleTop)/2+marginHeight)/line.height;top=targetFrac-spaceFrac,bot=targetFrac+spaceFrac}else top=(this.visibleTop-line.top-marginHeight)/line.height,bot=(this.visibleBottom-line.top+marginHeight)/line.height;viewFrom=findPosition(structure,top),viewTo=findPosition(structure,bot)}else{let totalWidth=structure.total*this.heightOracle.charWidth,marginWidth=margin*this.heightOracle.charWidth,horizOffset=0;if(totalWidth>2e6)for(let old of current)old.from>=line.from&&old.from<line.to&&old.size!=old.displaySize&&old.from*this.heightOracle.charWidth+horizOffset<this.pixelViewport.left&&(horizOffset=old.size-old.displaySize);let left,right,pxLeft=this.pixelViewport.left+horizOffset,pxRight=this.pixelViewport.right+horizOffset;if(null!=target){let targetFrac=findFraction(structure,target),spaceFrac=((pxRight-pxLeft)/2+marginWidth)/totalWidth;left=targetFrac-spaceFrac,right=targetFrac+spaceFrac}else left=(pxLeft-marginWidth)/totalWidth,right=(pxRight+marginWidth)/totalWidth;viewFrom=findPosition(structure,left),viewTo=findPosition(structure,right)}viewFrom>line.from&&addGap(line.from,viewFrom,line,structure),viewTo<line.to&&addGap(viewTo,line.to,line,structure)};for(let line of this.viewportLines)Array.isArray(line.type)?line.type.forEach(checkLine):checkLine(line);return gaps}gapSize(line,from,to,structure){let fraction=findFraction(structure,to)-findFraction(structure,from);return this.heightOracle.lineWrapping?line.height*fraction:structure.total*this.heightOracle.charWidth*fraction}updateLineGaps(gaps){LineGap.same(gaps,this.lineGaps)||(this.lineGaps=gaps,this.lineGapDeco=Decoration.set(gaps.map(gap=>gap.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(changes){let deco=this.stateDeco;this.lineGaps.length&&(deco=deco.concat(this.lineGapDeco));let ranges=[];dist_RangeSet.spans(deco,this.viewport.from,this.viewport.to,{span(from,to){ranges.push({from,to})},point(){}},20);let changed=0;if(ranges.length!=this.visibleRanges.length)changed=12;else for(let i=0;i<ranges.length&&!(8&changed);i++){let old=this.visibleRanges[i],nw=ranges[i];old.from==nw.from&&old.to==nw.to||(changed|=4,changes&&changes.mapPos(old.from,-1)==nw.from&&changes.mapPos(old.to,1)==nw.to||(changed|=8))}return this.visibleRanges=ranges,changed}lineBlockAt(pos){return pos>=this.viewport.from&&pos<=this.viewport.to&&this.viewportLines.find(b=>b.from<=pos&&b.to>=pos)||scaleBlock(this.heightMap.lineAt(pos,QueryType.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(height){return height>=this.viewportLines[0].top&&height<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(l=>l.top<=height&&l.bottom>=height)||scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(height),QueryType.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(scrollTop){let block=this.lineBlockAtHeight(scrollTop+8);return block.from>=this.viewport.from||this.viewportLines[0].top-scrollTop>200?block:this.viewportLines[0]}elementAtHeight(height){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(height),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(from,to){this.from=from,this.to=to}}function findPosition({total,ranges},ratio){if(ratio<=0)return ranges[0].from;if(ratio>=1)return ranges[ranges.length-1].to;let dist=Math.floor(total*ratio);for(let i=0;;i++){let{from,to}=ranges[i],size=to-from;if(dist<=size)return from+dist;dist-=size}}function findFraction(structure,pos){let counted=0;for(let{from,to}of structure.ranges){if(pos<=to){counted+=pos-from;break}counted+=to-from}return counted/structure.total}const IdScaler={toDOM:n=>n,fromDOM:n=>n,scale:1,eq(other){return other==this}};class BigScaler{constructor(oracle,heightMap,viewports){let vpHeight=0,base=0,domBase=0;this.viewports=viewports.map(({from,to})=>{let top=heightMap.lineAt(from,QueryType.ByPos,oracle,0,0).top,bottom=heightMap.lineAt(to,QueryType.ByPos,oracle,0,0).bottom;return vpHeight+=bottom-top,{from,to,top,bottom,domTop:0,domBottom:0}}),this.scale=(7e6-vpHeight)/(heightMap.height-vpHeight);for(let obj of this.viewports)obj.domTop=domBase+(obj.top-base)*this.scale,domBase=obj.domBottom=obj.domTop+(obj.bottom-obj.top),base=obj.bottom}toDOM(n){for(let i=0,base=0,domBase=0;;i++){let vp=i<this.viewports.length?this.viewports[i]:null;if(!vp||n<vp.top)return domBase+(n-base)*this.scale;if(n<=vp.bottom)return vp.domTop+(n-vp.top);base=vp.bottom,domBase=vp.domBottom}}fromDOM(n){for(let i=0,base=0,domBase=0;;i++){let vp=i<this.viewports.length?this.viewports[i]:null;if(!vp||n<vp.domTop)return base+(n-domBase)/this.scale;if(n<=vp.domBottom)return vp.top+(n-vp.domTop);base=vp.bottom,domBase=vp.domBottom}}eq(other){return other instanceof BigScaler&&(this.scale==other.scale&&this.viewports.length==other.viewports.length&&this.viewports.every((vp,i)=>vp.from==other.viewports[i].from&&vp.to==other.viewports[i].to))}}function scaleBlock(block,scaler){if(1==scaler.scale)return block;let bTop=scaler.toDOM(block.top),bBottom=scaler.toDOM(block.bottom);return new BlockInfo(block.from,block.length,bTop,bBottom-bTop,Array.isArray(block._content)?block._content.map(b=>scaleBlock(b,scaler)):block._content)}const theme=Facet.define({combine:strs=>strs.join(" ")}),darkTheme=Facet.define({combine:values=>values.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(main,spec,scopes){return new StyleModule(spec,{finish:sel=>/&/.test(sel)?sel.replace(/&\w*/,m=>{if("&"==m)return main;if(!scopes||!scopes[m])throw new RangeError(`Unsupported selector: ${m}`);return scopes[m]}):main+" "+sel})}const baseTheme$1=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs),observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(view){this.view=view,this.active=!1,this.editContext=null,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=view.contentDOM,this.observer=new MutationObserver(mutations=>{for(let mut of mutations)this.queue.push(mut);(browser.ie&&browser.ie_version<=11||browser.ios&&view.composing)&&mutations.some(m=>"childList"==m.type&&m.removedNodes.length||"characterData"==m.type&&m.oldValue.length>m.target.nodeValue.length)?this.flushSoon():this.flush()}),!window.EditContext||!browser.android||!1===view.constructor.EDIT_CONTEXT||browser.chrome&&browser.chrome_version<126||(this.editContext=new EditContextManager(view),view.state.facet(editable)&&(view.contentDOM.editContext=this.editContext.editContext)),useCharData&&(this.onCharData=event=>{this.queue.push({target:event.target,type:"characterData",oldValue:event.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver(()=>{var _a;(null===(_a=this.view.docView)||void 0===_a?void 0:_a.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(view.scrollDOM)),this.addWindowListeners(this.win=view.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(entries=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),entries.length>0&&entries[entries.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(entries=>{entries.length>0&&entries[entries.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(event){("change"!=event.type&&event.type||event.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(gaps){if(this.gapIntersection&&(gaps.length!=this.gaps.length||this.gaps.some((g,i)=>g!=gaps[i]))){this.gapIntersection.disconnect();for(let gap of gaps)this.gapIntersection.observe(gap);this.gaps=gaps}}onSelectionChange(event){let wasChanged=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view}=this,sel=this.selectionRange;if(view.state.facet(editable)?view.root.activeElement!=this.dom:!hasSelection(this.dom,sel))return;let context=sel.anchorNode&&view.docView.nearest(sel.anchorNode);context&&context.ignoreEvent(event)?wasChanged||(this.selectionChanged=!1):(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!view.state.selection.main.empty&&sel.focusNode&&isEquivalentPosition(sel.focusNode,sel.focusOffset,sel.anchorNode,sel.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view}=this,selection=getSelection(view.root);if(!selection)return!1;let range=browser.safari&&11==view.root.nodeType&&view.root.activeElement==this.dom&&function safariSelectionRangeHack(view,selection){if(selection.getComposedRanges){let range=selection.getComposedRanges(view.root)[0];if(range)return buildSelectionRangeFromRange(view,range)}let found=null;function read(event){event.preventDefault(),event.stopImmediatePropagation(),found=event.getTargetRanges()[0]}return view.contentDOM.addEventListener("beforeinput",read,!0),view.dom.ownerDocument.execCommand("indent"),view.contentDOM.removeEventListener("beforeinput",read,!0),found?buildSelectionRangeFromRange(view,found):null}(this.view,selection)||selection;if(!range||this.selectionRange.eq(range))return!1;let local=hasSelection(this.dom,range);return local&&!this.selectionChanged&&view.inputState.lastFocusTime>Date.now()-200&&view.inputState.lastTouchTime<Date.now()-300&&function atElementStart(doc,selection){let node=selection.focusNode,offset=selection.focusOffset;if(!node||selection.anchorNode!=node||selection.anchorOffset!=offset)return!1;for(offset=Math.min(offset,maxOffset(node));;)if(offset){if(1!=node.nodeType)return!1;let prev=node.childNodes[offset-1];"false"==prev.contentEditable?offset--:(node=prev,offset=maxOffset(node))}else{if(node==doc)return!0;offset=domIndex(node),node=node.parentNode}}(this.dom,range)?(this.view.inputState.lastFocusTime=0,view.docView.updateSelection(),!1):(this.selectionRange.setRange(range),local&&(this.selectionChanged=!0),!0)}setSelectionRange(anchor,head){this.selectionRange.set(anchor.node,anchor.offset,head.node,head.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let i=0,changed=null;for(let dom=this.dom;dom;)if(1==dom.nodeType)!changed&&i<this.scrollTargets.length&&this.scrollTargets[i]==dom?i++:changed||(changed=this.scrollTargets.slice(0,i)),changed&&changed.push(dom),dom=dom.assignedSlot||dom.parentNode;else{if(11!=dom.nodeType)break;dom=dom.host}if(i<this.scrollTargets.length&&!changed&&(changed=this.scrollTargets.slice(0,i)),changed){for(let dom of this.scrollTargets)dom.removeEventListener("scroll",this.onScroll);for(let dom of this.scrollTargets=changed)dom.addEventListener("scroll",this.onScroll)}}ignore(f){if(!this.active)return f();try{return this.stop(),f()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(key,keyCode){var _a;if(!this.delayedAndroidKey){let flush=()=>{let key=this.delayedAndroidKey;if(key){this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=key.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&key.force&&dispatchKey(this.dom,key.key,key.keyCode)}};this.flushingAndroidKey=this.view.win.requestAnimationFrame(flush)}this.delayedAndroidKey&&"Enter"!=key||(this.delayedAndroidKey={key,keyCode,force:this.lastChange<Date.now()-50||!!(null===(_a=this.delayedAndroidKey)||void 0===_a?void 0:_a.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let mut of this.observer.takeRecords())this.queue.push(mut);return this.queue}processRecords(){let records=this.pendingRecords();records.length&&(this.queue=[]);let from=-1,to=-1,typeOver=!1;for(let record of records){let range=this.readMutation(record);range&&(range.typeOver&&(typeOver=!0),-1==from?({from,to}=range):(from=Math.min(range.from,from),to=Math.max(range.to,to)))}return{from,to,typeOver}}readChange(){let{from,to,typeOver}=this.processRecords(),newSel=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(from<0&&!newSel)return null;from>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let change=new DOMChange(this.view,from,to,typeOver);return this.view.docView.domChanged={newSel:change.newSel?change.newSel.main:null},change}flush(readSelection=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;readSelection&&this.readSelectionRange();let domChange=this.readChange();if(!domChange)return this.view.requestMeasure(),!1;let startState=this.view.state,handled=applyDOMChange(this.view,domChange);return this.view.state==startState&&(domChange.domChanged||domChange.newSel&&!domChange.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),handled}readMutation(rec){let cView=this.view.docView.nearest(rec.target);if(!cView||cView.ignoreMutation(rec))return null;if(cView.markDirty("attributes"==rec.type),"attributes"==rec.type&&(cView.flags|=4),"childList"==rec.type){let childBefore=findChild(cView,rec.previousSibling||rec.target.previousSibling,-1),childAfter=findChild(cView,rec.nextSibling||rec.target.nextSibling,1);return{from:childBefore?cView.posAfter(childBefore):cView.posAtStart,to:childAfter?cView.posBefore(childAfter):cView.posAtEnd,typeOver:!1}}return"characterData"==rec.type?{from:cView.posAtStart,to:cView.posAtEnd,typeOver:rec.target.nodeValue==rec.oldValue}:null}setWindow(win){win!=this.win&&(this.removeWindowListeners(this.win),this.win=win,this.addWindowListeners(this.win))}addWindowListeners(win){win.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):win.addEventListener("beforeprint",this.onPrint),win.addEventListener("scroll",this.onScroll),win.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(win){win.removeEventListener("scroll",this.onScroll),win.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):win.removeEventListener("beforeprint",this.onPrint),win.document.removeEventListener("selectionchange",this.onSelectionChange)}update(update){this.editContext&&(this.editContext.update(update),update.startState.facet(editable)!=update.state.facet(editable)&&(update.view.contentDOM.editContext=update.state.facet(editable)?this.editContext.editContext:null))}destroy(){var _a,_b,_c;this.stop(),null===(_a=this.intersection)||void 0===_a||_a.disconnect(),null===(_b=this.gapIntersection)||void 0===_b||_b.disconnect(),null===(_c=this.resizeScroll)||void 0===_c||_c.disconnect();for(let dom of this.scrollTargets)dom.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function findChild(cView,dom,dir){for(;dom;){let curView=ContentView.get(dom);if(curView&&curView.parent==cView)return curView;let parent=dom.parentNode;dom=parent!=cView.dom?parent:dir>0?dom.nextSibling:dom.previousSibling}return null}function buildSelectionRangeFromRange(view,range){let anchorNode=range.startContainer,anchorOffset=range.startOffset,focusNode=range.endContainer,focusOffset=range.endOffset,curAnchor=view.docView.domAtPos(view.state.selection.main.anchor);return isEquivalentPosition(curAnchor.node,curAnchor.offset,focusNode,focusOffset)&&([anchorNode,anchorOffset,focusNode,focusOffset]=[focusNode,focusOffset,anchorNode,anchorOffset]),{anchorNode,anchorOffset,focusNode,focusOffset}}class EditContextManager{constructor(view){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(view.state);let context=this.editContext=new window.EditContext({text:view.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,view.state.selection.main.anchor))),selectionEnd:this.toContextPos(view.state.selection.main.head)});this.handlers.textupdate=e=>{let main=view.state.selection.main,{anchor,head}=main,from=this.toEditorPos(e.updateRangeStart),to=this.toEditorPos(e.updateRangeEnd);view.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:e.updateRangeStart,editorBase:from,drifted:!1});let change={from,to,insert:Text.of(e.text.split("\n"))};if(change.from==this.from&&anchor<this.from?change.from=anchor:change.to==this.to&&anchor>this.to&&(change.to=anchor),change.from==change.to&&!change.insert.length){let newSel=dist_EditorSelection.single(this.toEditorPos(e.selectionStart),this.toEditorPos(e.selectionEnd));return void(newSel.main.eq(main)||view.dispatch({selection:newSel,userEvent:"select"}))}if((browser.mac||browser.android)&&change.from==head-1&&/^\. ?$/.test(e.text)&&"off"==view.contentDOM.getAttribute("autocorrect")&&(change={from,to,insert:Text.of([e.text.replace("."," ")])}),this.pendingContextChange=change,!view.state.readOnly){let newLen=this.to-this.from+(change.to-change.from+change.insert.length);applyDOMChangeInner(view,change,dist_EditorSelection.single(this.toEditorPos(e.selectionStart,newLen),this.toEditorPos(e.selectionEnd,newLen)))}this.pendingContextChange&&(this.revertPending(view.state),this.setSelection(view.state))},this.handlers.characterboundsupdate=e=>{let rects=[],prev=null;for(let i=this.toEditorPos(e.rangeStart),end=this.toEditorPos(e.rangeEnd);i<end;i++){let rect=view.coordsForChar(i);prev=rect&&new DOMRect(rect.left,rect.top,rect.right-rect.left,rect.bottom-rect.top)||prev||new DOMRect,rects.push(prev)}context.updateCharacterBounds(e.rangeStart,rects)},this.handlers.textformatupdate=e=>{let deco=[];for(let format of e.getTextFormats()){let lineStyle=format.underlineStyle,thickness=format.underlineThickness;if("None"!=lineStyle&&"None"!=thickness){let from=this.toEditorPos(format.rangeStart),to=this.toEditorPos(format.rangeEnd);if(from<to){let style=`text-decoration: underline ${"Dashed"==lineStyle?"dashed ":"Squiggle"==lineStyle?"wavy ":""}${"Thin"==thickness?1:2}px`;deco.push(Decoration.mark({attributes:{style}}).range(from,to))}}}view.dispatch({effects:setEditContextFormatting.of(Decoration.set(deco))})},this.handlers.compositionstart=()=>{view.inputState.composing<0&&(view.inputState.composing=0,view.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(view.inputState.composing=-1,view.inputState.compositionFirstChange=null,this.composing){let{drifted}=this.composing;this.composing=null,drifted&&this.reset(view.state)}};for(let event in this.handlers)context.addEventListener(event,this.handlers[event]);this.measureReq={read:view=>{this.editContext.updateControlBounds(view.contentDOM.getBoundingClientRect());let sel=getSelection(view.root);sel&&sel.rangeCount&&this.editContext.updateSelectionBounds(sel.getRangeAt(0).getBoundingClientRect())}}}applyEdits(update){let off=0,abort=!1,pending=this.pendingContextChange;return update.changes.iterChanges((fromA,toA,_fromB,_toB,insert)=>{if(abort)return;let dLen=insert.length-(toA-fromA);if(pending&&toA>=pending.to){if(pending.from==fromA&&pending.to==toA&&pending.insert.eq(insert))return pending=this.pendingContextChange=null,off+=dLen,void(this.to+=dLen);pending=null,this.revertPending(update.state)}if(fromA+=off,(toA+=off)<=this.from)this.from+=dLen,this.to+=dLen;else if(fromA<this.to){if(fromA<this.from||toA>this.to||this.to-this.from+insert.length>3e4)return void(abort=!0);this.editContext.updateText(this.toContextPos(fromA),this.toContextPos(toA),insert.toString()),this.to+=dLen}off+=dLen}),pending&&!abort&&this.revertPending(update.state),!abort}update(update){let reverted=this.pendingContextChange,startSel=update.startState.selection.main;this.composing&&(this.composing.drifted||!update.changes.touchesRange(startSel.from,startSel.to)&&update.transactions.some(tr=>!tr.isUserEvent("input.type")&&tr.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=update.changes.mapPos(this.composing.editorBase)):this.applyEdits(update)&&this.rangeIsValid(update.state)?(update.docChanged||update.selectionSet||reverted)&&this.setSelection(update.state):(this.pendingContextChange=null,this.reset(update.state)),(update.geometryChanged||update.docChanged||update.selectionSet)&&update.view.requestMeasure(this.measureReq)}resetRange(state){let{head}=state.selection.main;this.from=Math.max(0,head-1e4),this.to=Math.min(state.doc.length,head+1e4)}reset(state){this.resetRange(state),this.editContext.updateText(0,this.editContext.text.length,state.doc.sliceString(this.from,this.to)),this.setSelection(state)}revertPending(state){let pending=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(pending.from),this.toContextPos(pending.from+pending.insert.length),state.doc.sliceString(pending.from,pending.to))}setSelection(state){let{main}=state.selection,start=this.toContextPos(Math.max(this.from,Math.min(this.to,main.anchor))),end=this.toContextPos(main.head);this.editContext.selectionStart==start&&this.editContext.selectionEnd==end||this.editContext.updateSelection(start,end)}rangeIsValid(state){let{head}=state.selection.main;return!(this.from>0&&head-this.from<500||this.to<state.doc.length&&this.to-head<500||this.to-this.from>3e4)}toEditorPos(contextPos,clipLen=this.to-this.from){contextPos=Math.min(contextPos,clipLen);let c=this.composing;return c&&c.drifted?c.editorBase+(contextPos-c.contextBase):contextPos+this.from}toContextPos(editorPos){let c=this.composing;return c&&c.drifted?c.contextBase+(editorPos-c.editorBase):editorPos-this.from}destroy(){for(let event in this.handlers)this.editContext.removeEventListener(event,this.handlers[event])}}class EditorView{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(config={}){var _a;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),config.parent&&config.parent.appendChild(this.dom);let{dispatch}=config;this.dispatchTransactions=config.dispatchTransactions||dispatch&&(trs=>trs.forEach(tr=>dispatch(tr,this)))||(trs=>this.update(trs)),this.dispatch=this.dispatch.bind(this),this._root=config.root||function getRoot(node){for(;node;){if(node&&(9==node.nodeType||11==node.nodeType&&node.host))return node;node=node.assignedSlot||node.parentNode}return null}(config.parent)||document,this.viewState=new ViewState(config.state||EditorState.create(config)),config.scrollTo&&config.scrollTo.is(scrollIntoView)&&(this.viewState.scrollTarget=config.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(viewPlugin).map(spec=>new PluginInstance(spec));for(let plugin of this.plugins)plugin.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),(null===(_a=document.fonts)||void 0===_a?void 0:_a.ready)&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...input){let trs=1==input.length&&input[0]instanceof Transaction?input:1==input.length&&Array.isArray(input[0])?input[0]:[this.state.update(...input)];this.dispatchTransactions(trs,this)}update(transactions){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let update,redrawn=!1,attrsChanged=!1,state=this.state;for(let tr of transactions){if(tr.startState!=state)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");state=tr.state}if(this.destroyed)return void(this.viewState.state=state);let focus=this.hasFocus,focusFlag=0,dispatchFocus=null;transactions.some(tr=>tr.annotation(isFocusChange))?(this.inputState.notifiedFocused=focus,focusFlag=1):focus!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=focus,dispatchFocus=focusChangeTransaction(state,focus),dispatchFocus||(focusFlag=1));let pendingKey=this.observer.delayedAndroidKey,domChange=null;if(pendingKey?(this.observer.clearDelayedAndroidKey(),domChange=this.observer.readChange(),(domChange&&!this.state.doc.eq(state.doc)||!this.state.selection.eq(state.selection))&&(domChange=null)):this.observer.clear(),state.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(state);update=ViewUpdate.create(this,state,transactions),update.flags|=focusFlag;let scrollTarget=this.viewState.scrollTarget;try{this.updateState=2;for(let tr of transactions){if(scrollTarget&&(scrollTarget=scrollTarget.map(tr.changes)),tr.scrollIntoView){let{main}=tr.state.selection;scrollTarget=new ScrollTarget(main.empty?main:dist_EditorSelection.cursor(main.head,main.head>main.anchor?-1:1))}for(let e of tr.effects)e.is(scrollIntoView)&&(scrollTarget=e.value.clip(this.state))}this.viewState.update(update,scrollTarget),this.bidiCache=CachedOrder.update(this.bidiCache,update.changes),update.empty||(this.updatePlugins(update),this.inputState.update(update)),redrawn=this.docView.update(update),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),attrsChanged=this.updateAttrs(),this.showAnnouncements(transactions),this.docView.updateSelection(redrawn,transactions.some(tr=>tr.isUserEvent("select.pointer")))}finally{this.updateState=0}if(update.startState.facet(theme)!=update.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(redrawn||attrsChanged||scrollTarget||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),redrawn&&this.docViewUpdate(),!update.empty)for(let listener of this.state.facet(updateListener))try{listener(update)}catch(e){logException(this.state,e,"update listener")}(dispatchFocus||domChange)&&Promise.resolve().then(()=>{dispatchFocus&&this.state==dispatchFocus.startState&&this.dispatch(dispatchFocus),domChange&&!applyDOMChange(this,domChange)&&pendingKey.force&&dispatchKey(this.contentDOM,pendingKey.key,pendingKey.keyCode)})}setState(newState){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=newState);this.updateState=2;let hadFocus=this.hasFocus;try{for(let plugin of this.plugins)plugin.destroy(this);this.viewState=new ViewState(newState),this.plugins=newState.facet(viewPlugin).map(spec=>new PluginInstance(spec)),this.pluginMap.clear();for(let plugin of this.plugins)plugin.update(this);this.docView.destroy(),this.docView=new DocView(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}hadFocus&&this.focus(),this.requestMeasure()}updatePlugins(update){let prevSpecs=update.startState.facet(viewPlugin),specs=update.state.facet(viewPlugin);if(prevSpecs!=specs){let newPlugins=[];for(let spec of specs){let found=prevSpecs.indexOf(spec);if(found<0)newPlugins.push(new PluginInstance(spec));else{let plugin=this.plugins[found];plugin.mustUpdate=update,newPlugins.push(plugin)}}for(let plugin of this.plugins)plugin.mustUpdate!=update&&plugin.destroy(this);this.plugins=newPlugins,this.pluginMap.clear()}else for(let p of this.plugins)p.mustUpdate=update;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);prevSpecs!=specs&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let plugin of this.plugins){let val=plugin.value;if(val&&val.docViewUpdate)try{val.docViewUpdate(this)}catch(e){logException(this.state,e,"doc view update listener")}}}measure(flush=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,flush&&this.observer.forceFlush();let updated=null,sDOM=this.scrollDOM,scrollTop=sDOM.scrollTop*this.scaleY,{scrollAnchorPos,scrollAnchorHeight}=this.viewState;Math.abs(scrollTop-this.viewState.scrollTop)>1&&(scrollAnchorHeight=-1),this.viewState.scrollAnchorHeight=-1;try{for(let i=0;;i++){if(scrollAnchorHeight<0)if(isScrolledToBottom(sDOM))scrollAnchorPos=-1,scrollAnchorHeight=this.viewState.heightMap.height;else{let block=this.viewState.scrollAnchorAt(scrollTop);scrollAnchorPos=block.from,scrollAnchorHeight=block.top}this.updateState=1;let changed=this.viewState.measure(this);if(!changed&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(i>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let measuring=[];4&changed||([this.measureRequests,measuring]=[measuring,this.measureRequests]);let measured=measuring.map(m=>{try{return m.read(this)}catch(e){return logException(this.state,e),BadMeasure}}),update=ViewUpdate.create(this,this.state,[]),redrawn=!1;update.flags|=changed,updated?updated.flags|=changed:updated=update,this.updateState=2,update.empty||(this.updatePlugins(update),this.inputState.update(update),this.updateAttrs(),redrawn=this.docView.update(update),redrawn&&this.docViewUpdate());for(let i=0;i<measuring.length;i++)if(measured[i]!=BadMeasure)try{let m=measuring[i];m.write&&m.write(measured[i],this)}catch(e){logException(this.state,e)}if(redrawn&&this.docView.updateSelection(!0),!update.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,scrollAnchorHeight=-1;continue}{let diff=(scrollAnchorPos<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(scrollAnchorPos).top)-scrollAnchorHeight;if(diff>1||diff<-1){scrollTop+=diff,sDOM.scrollTop=scrollTop/this.scaleY,scrollAnchorHeight=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(updated&&!updated.empty)for(let listener of this.state.facet(updateListener))listener(updated)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let editorAttrs=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),contentAttrs={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(contentAttrs["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,contentAttrs);let changed=this.observer.ignore(()=>{let changedContent=updateAttrs(this.contentDOM,this.contentAttrs,contentAttrs),changedEditor=updateAttrs(this.dom,this.editorAttrs,editorAttrs);return changedContent||changedEditor});return this.editorAttrs=editorAttrs,this.contentAttrs=contentAttrs,changed}showAnnouncements(trs){let first=!0;for(let tr of trs)for(let effect of tr.effects)if(effect.is(EditorView.announce)){first&&(this.announceDOM.textContent=""),first=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=effect.value}}mountStyles(){this.styleModules=this.state.facet(styleModule);let nonce=this.state.facet(EditorView.cspNonce);StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1).reverse(),nonce?{nonce}:void 0)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(request){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),request){if(this.measureRequests.indexOf(request)>-1)return;if(null!=request.key)for(let i=0;i<this.measureRequests.length;i++)if(this.measureRequests[i].key===request.key)return void(this.measureRequests[i]=request);this.measureRequests.push(request)}}plugin(plugin){let known=this.pluginMap.get(plugin);return(void 0===known||known&&known.plugin!=plugin)&&this.pluginMap.set(plugin,known=this.plugins.find(p=>p.plugin==plugin)||null),known&&known.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(height){return this.readMeasured(),this.viewState.elementAtHeight(height)}lineBlockAtHeight(height){return this.readMeasured(),this.viewState.lineBlockAtHeight(height)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(pos){return this.viewState.lineBlockAt(pos)}get contentHeight(){return this.viewState.contentHeight}moveByChar(start,forward,by){return skipAtoms(this,start,moveByChar(this,start,forward,by))}moveByGroup(start,forward){return skipAtoms(this,start,moveByChar(this,start,forward,initial=>function byGroup(view,pos,start){let categorize=view.state.charCategorizer(pos),cat=categorize(start);return next=>{let nextCat=categorize(next);return cat==dist_CharCategory.Space&&(cat=nextCat),cat==nextCat}}(this,start.head,initial)))}visualLineSide(line,end){let order=this.bidiSpans(line),dir=this.textDirectionAt(line.from),span=order[end?order.length-1:0];return dist_EditorSelection.cursor(span.side(end,dir)+line.from,span.forward(!end,dir)?1:-1)}moveToLineBoundary(start,forward,includeWrap=!0){return function moveToLineBoundary(view,start,forward,includeWrap){let line=blockAt(view,start.head,start.assoc||-1),coords=includeWrap&&line.type==BlockType.Text&&(view.lineWrapping||line.widgetLineBreaks)?view.coordsAtPos(start.assoc<0&&start.head>line.from?start.head-1:start.head):null;if(coords){let editorRect=view.dom.getBoundingClientRect(),direction=view.textDirectionAt(line.from),pos=view.posAtCoords({x:forward==(direction==Direction.LTR)?editorRect.right-1:editorRect.left+1,y:(coords.top+coords.bottom)/2});if(null!=pos)return dist_EditorSelection.cursor(pos,forward?-1:1)}return dist_EditorSelection.cursor(forward?line.to:line.from,forward?-1:1)}(this,start,forward,includeWrap)}moveVertically(start,forward,distance){return skipAtoms(this,start,function moveVertically(view,start,forward,distance){let startPos=start.head,dir=forward?1:-1;if(startPos==(forward?view.state.doc.length:0))return dist_EditorSelection.cursor(startPos,start.assoc);let startY,goal=start.goalColumn,rect=view.contentDOM.getBoundingClientRect(),startCoords=view.coordsAtPos(startPos,start.assoc||-1),docTop=view.documentTop;if(startCoords)null==goal&&(goal=startCoords.left-rect.left),startY=dir<0?startCoords.top:startCoords.bottom;else{let line=view.viewState.lineBlockAt(startPos);null==goal&&(goal=Math.min(rect.right-rect.left,view.defaultCharacterWidth*(startPos-line.from))),startY=(dir<0?line.top:line.bottom)+docTop}let resolvedGoal=rect.left+goal,dist=null!=distance?distance:view.viewState.heightOracle.textHeight>>1;for(let extra=0;;extra+=10){let curY=startY+(dist+extra)*dir,pos=posAtCoords(view,{x:resolvedGoal,y:curY},!1,dir);if(curY<rect.top||curY>rect.bottom||(dir<0?pos<startPos:pos>startPos)){let charRect=view.docView.coordsForChar(pos),assoc=!charRect||curY<charRect.top?-1:1;return dist_EditorSelection.cursor(pos,assoc,void 0,goal)}}}(this,start,forward,distance))}domAtPos(pos){return this.docView.domAtPos(pos)}posAtDOM(node,offset=0){return this.docView.posFromDOM(node,offset)}posAtCoords(coords,precise=!0){return this.readMeasured(),posAtCoords(this,coords,precise)}coordsAtPos(pos,side=1){this.readMeasured();let rect=this.docView.coordsAt(pos,side);if(!rect||rect.left==rect.right)return rect;let line=this.state.doc.lineAt(pos),order=this.bidiSpans(line);return flattenRect(rect,order[BidiSpan.find(order,pos-line.from,-1,side)].dir==Direction.LTR==side>0)}coordsForChar(pos){return this.readMeasured(),this.docView.coordsForChar(pos)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(pos){return!this.state.facet(perLineTextDirection)||pos<this.viewport.from||pos>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(pos))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(line){if(line.length>MaxBidiLine)return trivialOrder(line.length);let isolates,dir=this.textDirectionAt(line.from);for(let entry of this.bidiCache)if(entry.from==line.from&&entry.dir==dir&&(entry.fresh||isolatesEq(entry.isolates,isolates=getIsolatedRanges(this,line))))return entry.order;isolates||(isolates=getIsolatedRanges(this,line));let order=computeOrder(line.text,dir,isolates);return this.bidiCache.push(new CachedOrder(line.from,line.to,dir,isolates,!0,order)),order}get hasFocus(){var _a;return(this.dom.ownerDocument.hasFocus()||browser.safari&&(null===(_a=this.inputState)||void 0===_a?void 0:_a.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(root){this._root!=root&&(this._root=root,this.observer.setWindow((9==root.nodeType?root:root.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let plugin of this.plugins)plugin.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(pos,options={}){return scrollIntoView.of(new ScrollTarget("number"==typeof pos?dist_EditorSelection.cursor(pos):pos,options.y,options.x,options.yMargin,options.xMargin))}scrollSnapshot(){let{scrollTop,scrollLeft}=this.scrollDOM,ref=this.viewState.scrollAnchorAt(scrollTop);return scrollIntoView.of(new ScrollTarget(dist_EditorSelection.cursor(ref.from),"start","start",ref.top-scrollTop,scrollLeft,!0))}setTabFocusMode(to){null==to?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof to?this.inputState.tabFocusMode=to?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+to)}static domEventHandlers(handlers){return ViewPlugin.define(()=>({}),{eventHandlers:handlers})}static domEventObservers(observers){return ViewPlugin.define(()=>({}),{eventObservers:observers})}static theme(spec,options){let prefix=StyleModule.newName(),result=[theme.of(prefix),styleModule.of(buildTheme(`.${prefix}`,spec))];return options&&options.dark&&result.push(darkTheme.of(!0)),result}static baseTheme(spec){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,spec,lightDarkIDs)))}static findFromDOM(dom){var _a;let content=dom.querySelector(".cm-content"),cView=content&&ContentView.get(content)||ContentView.get(dom);return(null===(_a=null==cView?void 0:cView.rootView)||void 0===_a?void 0:_a.view)||null}}EditorView.styleModule=styleModule,EditorView.inputHandler=inputHandler,EditorView.clipboardInputFilter=clipboardInputFilter,EditorView.clipboardOutputFilter=clipboardOutputFilter,EditorView.scrollHandler=scrollHandler,EditorView.focusChangeEffect=focusChangeEffect,EditorView.perLineTextDirection=perLineTextDirection,EditorView.exceptionSink=exceptionSink,EditorView.updateListener=updateListener,EditorView.editable=editable,EditorView.mouseSelectionStyle=mouseSelectionStyle,EditorView.dragMovesSelection=dragMovesSelection$1,EditorView.clickAddsSelectionRange=clickAddsSelectionRange,EditorView.decorations=decorations,EditorView.outerDecorations=outerDecorations,EditorView.atomicRanges=atomicRanges,EditorView.bidiIsolatedRanges=bidiIsolatedRanges,EditorView.scrollMargins=scrollMargins,EditorView.darkTheme=darkTheme,EditorView.cspNonce=Facet.define({combine:values=>values.length?values[0]:""}),EditorView.contentAttributes=contentAttributes,EditorView.editorAttributes=editorAttributes,EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"}),EditorView.announce=dist_StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(from,to,dir,isolates,fresh,order){this.from=from,this.to=to,this.dir=dir,this.isolates=isolates,this.fresh=fresh,this.order=order}static update(cache,changes){if(changes.empty&&!cache.some(c=>c.fresh))return cache;let result=[],lastDir=cache.length?cache[cache.length-1].dir:Direction.LTR;for(let i=Math.max(0,cache.length-10);i<cache.length;i++){let entry=cache[i];entry.dir!=lastDir||changes.touchesRange(entry.from,entry.to)||result.push(new CachedOrder(changes.mapPos(entry.from,1),changes.mapPos(entry.to,-1),entry.dir,entry.isolates,!1,entry.order))}return result}}function attrsFromFacet(view,facet,base){for(let sources=view.state.facet(facet),i=sources.length-1;i>=0;i--){let source=sources[i],value="function"==typeof source?source(view):source;value&&combineAttrs(value,base)}return base}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function modifiers(name,event,shift){return event.altKey&&(name="Alt-"+name),event.ctrlKey&&(name="Ctrl-"+name),event.metaKey&&(name="Meta-"+name),!1!==shift&&event.shiftKey&&(name="Shift-"+name),name}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown:(event,view)=>runHandlers(getKeymap(view.state),event,view,"editor")})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(state){let bindings=state.facet(keymap),map=Keymaps.get(bindings);return map||Keymaps.set(bindings,map=function buildKeymap(bindings,platform=currentPlatform){let bound=Object.create(null),isPrefix=Object.create(null),checkPrefix=(name,is)=>{let current=isPrefix[name];if(null==current)isPrefix[name]=is;else if(current!=is)throw new Error("Key binding "+name+" is used both as a regular binding and as a multi-stroke prefix")},add=(scope,key,command,preventDefault,stopPropagation)=>{var _a,_b;let scopeObj=bound[scope]||(bound[scope]=Object.create(null)),parts=key.split(/ (?!$)/).map(k=>function normalizeKeyName(name,platform){const parts=name.split(/-(?!$)/);let alt,ctrl,shift,meta,result=parts[parts.length-1];"Space"==result&&(result=" ");for(let i=0;i<parts.length-1;++i){const mod=parts[i];if(/^(cmd|meta|m)$/i.test(mod))meta=!0;else if(/^a(lt)?$/i.test(mod))alt=!0;else if(/^(c|ctrl|control)$/i.test(mod))ctrl=!0;else if(/^s(hift)?$/i.test(mod))shift=!0;else{if(!/^mod$/i.test(mod))throw new Error("Unrecognized modifier name: "+mod);"mac"==platform?meta=!0:ctrl=!0}}return alt&&(result="Alt-"+result),ctrl&&(result="Ctrl-"+result),meta&&(result="Meta-"+result),shift&&(result="Shift-"+result),result}(k,platform));for(let i=1;i<parts.length;i++){let prefix=parts.slice(0,i).join(" ");checkPrefix(prefix,!0),scopeObj[prefix]||(scopeObj[prefix]={preventDefault:!0,stopPropagation:!1,run:[view=>{let ourObj=storedPrefix={view,prefix,scope};return setTimeout(()=>{storedPrefix==ourObj&&(storedPrefix=null)},PrefixTimeout),!0}]})}let full=parts.join(" ");checkPrefix(full,!1);let binding=scopeObj[full]||(scopeObj[full]={preventDefault:!1,stopPropagation:!1,run:(null===(_b=null===(_a=scopeObj._any)||void 0===_a?void 0:_a.run)||void 0===_b?void 0:_b.slice())||[]});command&&binding.run.push(command),preventDefault&&(binding.preventDefault=!0),stopPropagation&&(binding.stopPropagation=!0)};for(let b of bindings){let scopes=b.scope?b.scope.split(" "):["editor"];if(b.any)for(let scope of scopes){let scopeObj=bound[scope]||(bound[scope]=Object.create(null));scopeObj._any||(scopeObj._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any}=b;for(let key in scopeObj)scopeObj[key].run.push(view=>any(view,currentKeyEvent))}let name=b[platform]||b.key;if(name)for(let scope of scopes)add(scope,name,b.run,b.preventDefault,b.stopPropagation),b.shift&&add(scope,"Shift-"+name,b.shift,b.preventDefault,b.stopPropagation)}return bound}(bindings.reduce((a,b)=>a.concat(b),[]))),map}let storedPrefix=null;const PrefixTimeout=4e3;let currentKeyEvent=null;function runHandlers(map,event,view,scope){currentKeyEvent=event;let name=function keyName(event){var name=!(mac&&event.metaKey&&event.shiftKey&&!event.ctrlKey&&!event.altKey||w3c_keyname_ie&&event.shiftKey&&event.key&&1==event.key.length||"Unidentified"==event.key)&&event.key||(event.shiftKey?shift:base)[event.keyCode]||event.key||"Unidentified";return"Esc"==name&&(name="Escape"),"Del"==name&&(name="Delete"),"Left"==name&&(name="ArrowLeft"),"Up"==name&&(name="ArrowUp"),"Right"==name&&(name="ArrowRight"),"Down"==name&&(name="ArrowDown"),name}(event),isChar=dist_codePointSize(dist_codePointAt(name,0))==name.length&&" "!=name,prefix="",handled=!1,prevented=!1,stopPropagation=!1;storedPrefix&&storedPrefix.view==view&&storedPrefix.scope==scope&&(prefix=storedPrefix.prefix+" ",modifierCodes.indexOf(event.keyCode)<0&&(prevented=!0,storedPrefix=null));let baseName,shiftName,ran=new Set,runFor=binding=>{if(binding){for(let cmd of binding.run)if(!ran.has(cmd)&&(ran.add(cmd),cmd(view)))return binding.stopPropagation&&(stopPropagation=!0),!0;binding.preventDefault&&(binding.stopPropagation&&(stopPropagation=!0),prevented=!0)}return!1},scopeObj=map[scope];return scopeObj&&(runFor(scopeObj[prefix+modifiers(name,event,!isChar)])?handled=!0:!isChar||!(event.altKey||event.metaKey||event.ctrlKey)||browser.windows&&event.ctrlKey&&event.altKey||browser.mac&&event.altKey&&!event.ctrlKey||!(baseName=base[event.keyCode])||baseName==name?isChar&&event.shiftKey&&runFor(scopeObj[prefix+modifiers(name,event,!0)])&&(handled=!0):(runFor(scopeObj[prefix+modifiers(baseName,event,!0)])||event.shiftKey&&(shiftName=shift[event.keyCode])!=name&&shiftName!=baseName&&runFor(scopeObj[prefix+modifiers(shiftName,event,!1)]))&&(handled=!0),!handled&&runFor(scopeObj._any)&&(handled=!0)),prevented&&(handled=!0),handled&&stopPropagation&&event.stopPropagation(),currentKeyEvent=null,handled}class RectangleMarker{constructor(className,left,top,width,height){this.className=className,this.left=left,this.top=top,this.width=width,this.height=height}draw(){let elt=document.createElement("div");return elt.className=this.className,this.adjust(elt),elt}update(elt,prev){return prev.className==this.className&&(this.adjust(elt),!0)}adjust(elt){elt.style.left=this.left+"px",elt.style.top=this.top+"px",null!=this.width&&(elt.style.width=this.width+"px"),elt.style.height=this.height+"px"}eq(p){return this.left==p.left&&this.top==p.top&&this.width==p.width&&this.height==p.height&&this.className==p.className}static forRange(view,className,range){if(range.empty){let pos=view.coordsAtPos(range.head,range.assoc||1);if(!pos)return[];let base=getBase(view);return[new RectangleMarker(className,pos.left-base.left,pos.top-base.top,null,pos.bottom-pos.top)]}return function rectanglesForRange(view,className,range){if(range.to<=view.viewport.from||range.from>=view.viewport.to)return[];let from=Math.max(range.from,view.viewport.from),to=Math.min(range.to,view.viewport.to),ltr=view.textDirection==Direction.LTR,content=view.contentDOM,contentRect=content.getBoundingClientRect(),base=getBase(view),lineElt=content.querySelector(".cm-line"),lineStyle=lineElt&&window.getComputedStyle(lineElt),leftSide=contentRect.left+(lineStyle?parseInt(lineStyle.paddingLeft)+Math.min(0,parseInt(lineStyle.textIndent)):0),rightSide=contentRect.right-(lineStyle?parseInt(lineStyle.paddingRight):0),startBlock=blockAt(view,from,1),endBlock=blockAt(view,to,-1),visualStart=startBlock.type==BlockType.Text?startBlock:null,visualEnd=endBlock.type==BlockType.Text?endBlock:null;visualStart&&(view.lineWrapping||startBlock.widgetLineBreaks)&&(visualStart=wrappedLine(view,from,1,visualStart));visualEnd&&(view.lineWrapping||endBlock.widgetLineBreaks)&&(visualEnd=wrappedLine(view,to,-1,visualEnd));if(visualStart&&visualEnd&&visualStart.from==visualEnd.from&&visualStart.to==visualEnd.to)return pieces(drawForLine(range.from,range.to,visualStart));{let top=visualStart?drawForLine(range.from,null,visualStart):drawForWidget(startBlock,!1),bottom=visualEnd?drawForLine(null,range.to,visualEnd):drawForWidget(endBlock,!0),between=[];return(visualStart||startBlock).to<(visualEnd||endBlock).from-(visualStart&&visualEnd?1:0)||startBlock.widgetLineBreaks>1&&top.bottom+view.defaultLineHeight/2<bottom.top?between.push(piece(leftSide,top.bottom,rightSide,bottom.top)):top.bottom<bottom.top&&view.elementAtHeight((top.bottom+bottom.top)/2).type==BlockType.Text&&(top.bottom=bottom.top=(top.bottom+bottom.top)/2),pieces(top).concat(between).concat(pieces(bottom))}function piece(left,top,right,bottom){return new RectangleMarker(className,left-base.left,top-base.top,right-left,bottom-top)}function pieces({top,bottom,horizontal}){let pieces=[];for(let i=0;i<horizontal.length;i+=2)pieces.push(piece(horizontal[i],top,horizontal[i+1],bottom));return pieces}function drawForLine(from,to,line){let top=1e9,bottom=-1e9,horizontal=[];function addSpan(from,fromOpen,to,toOpen,dir){let fromCoords=view.coordsAtPos(from,from==line.to?-2:2),toCoords=view.coordsAtPos(to,to==line.from?2:-2);fromCoords&&toCoords&&(top=Math.min(fromCoords.top,toCoords.top,top),bottom=Math.max(fromCoords.bottom,toCoords.bottom,bottom),dir==Direction.LTR?horizontal.push(ltr&&fromOpen?leftSide:fromCoords.left,ltr&&toOpen?rightSide:toCoords.right):horizontal.push(!ltr&&toOpen?leftSide:toCoords.left,!ltr&&fromOpen?rightSide:fromCoords.right))}let start=null!=from?from:line.from,end=null!=to?to:line.to;for(let r of view.visibleRanges)if(r.to>start&&r.from<end)for(let pos=Math.max(r.from,start),endPos=Math.min(r.to,end);;){let docLine=view.state.doc.lineAt(pos);for(let span of view.bidiSpans(docLine)){let spanFrom=span.from+docLine.from,spanTo=span.to+docLine.from;if(spanFrom>=endPos)break;spanTo>pos&&addSpan(Math.max(spanFrom,pos),null==from&&spanFrom<=start,Math.min(spanTo,endPos),null==to&&spanTo>=end,span.dir)}if(pos=docLine.to+1,pos>=endPos)break}return 0==horizontal.length&&addSpan(start,null==from,end,null==to,view.textDirection),{top,bottom,horizontal}}function drawForWidget(block,top){let y=contentRect.top+(top?block.top:block.bottom);return{top:y,bottom:y,horizontal:[]}}}(view,className,range)}}function getBase(view){let rect=view.scrollDOM.getBoundingClientRect();return{left:(view.textDirection==Direction.LTR?rect.left:rect.right-view.scrollDOM.clientWidth*view.scaleX)-view.scrollDOM.scrollLeft*view.scaleX,top:rect.top-view.scrollDOM.scrollTop*view.scaleY}}function wrappedLine(view,pos,side,inside){let coords=view.coordsAtPos(pos,2*side);if(!coords)return inside;let editorRect=view.dom.getBoundingClientRect(),y=(coords.top+coords.bottom)/2,left=view.posAtCoords({x:editorRect.left+1,y}),right=view.posAtCoords({x:editorRect.right-1,y});return null==left||null==right?inside:{from:Math.max(inside.from,Math.min(left,right)),to:Math.min(inside.to,Math.max(left,right))}}class LayerView{constructor(view,layer){this.view=view,this.layer=layer,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=view.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),layer.above&&this.dom.classList.add("cm-layer-above"),layer.class&&this.dom.classList.add(layer.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(view.state),view.requestMeasure(this.measureReq),layer.mount&&layer.mount(this.dom,view)}update(update){update.startState.facet(layerOrder)!=update.state.facet(layerOrder)&&this.setOrder(update.state),(this.layer.update(update,this.dom)||update.geometryChanged)&&(this.scale(),update.view.requestMeasure(this.measureReq))}docViewUpdate(view){!1!==this.layer.updateOnDocViewUpdate&&view.requestMeasure(this.measureReq)}setOrder(state){let pos=0,order=state.facet(layerOrder);for(;pos<order.length&&order[pos]!=this.layer;)pos++;this.dom.style.zIndex=String((this.layer.above?150:-1)-pos)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX,scaleY}=this.view;scaleX==this.scaleX&&scaleY==this.scaleY||(this.scaleX=scaleX,this.scaleY=scaleY,this.dom.style.transform=`scale(${1/scaleX}, ${1/scaleY})`)}draw(markers){if(markers.length!=this.drawn.length||markers.some((p,i)=>!function sameMarker(a,b){return a.constructor==b.constructor&&a.eq(b)}(p,this.drawn[i]))){let old=this.dom.firstChild,oldI=0;for(let marker of markers)marker.update&&old&&marker.constructor&&this.drawn[oldI].constructor&&marker.update(old,this.drawn[oldI])?(old=old.nextSibling,oldI++):this.dom.insertBefore(marker.draw(),old);for(;old;){let next=old.nextSibling;old.remove(),old=next}this.drawn=markers}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function dist_layer(config){return[ViewPlugin.define(v=>new LayerView(v,config)),layerOrder.of(config)]}const selectionConfig=Facet.define({combine:configs=>combineConfig(configs,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(a,b)=>Math.min(a,b),drawRangeCursor:(a,b)=>a||b})});function drawSelection(config={}){return[selectionConfig.of(config),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(!0)]}function configChanged(update){return update.startState.facet(selectionConfig)!=update.state.facet(selectionConfig)}const cursorLayer=dist_layer({above:!0,markers(view){let{state}=view,conf=state.facet(selectionConfig),cursors=[];for(let r of state.selection.ranges){let prim=r==state.selection.main;if(r.empty||conf.drawRangeCursor){let className=prim?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",cursor=r.empty?r:dist_EditorSelection.cursor(r.head,r.head>r.anchor?-1:1);for(let piece of RectangleMarker.forRange(view,className,cursor))cursors.push(piece)}}return cursors},update(update,dom){update.transactions.some(tr=>tr.selection)&&(dom.style.animationName="cm-blink"==dom.style.animationName?"cm-blink2":"cm-blink");let confChange=configChanged(update);return confChange&&setBlinkRate(update.state,dom),update.docChanged||update.selectionSet||confChange},mount(dom,view){setBlinkRate(view.state,dom)},class:"cm-cursorLayer"});function setBlinkRate(state,dom){dom.style.animationDuration=state.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=dist_layer({above:!1,markers:view=>view.state.selection.ranges.map(r=>r.empty?[]:RectangleMarker.forRange(view,"cm-selectionBackground",r)).reduce((a,b)=>a.concat(b)),update:(update,dom)=>update.docChanged||update.selectionSet||update.viewportChanged||configChanged(update),class:"cm-selectionLayer"}),hideNativeSelection=Prec.highest(EditorView.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),setDropCursorPos=dist_StateEffect.define({map:(pos,mapping)=>null==pos?null:mapping.mapPos(pos)}),dropCursorPos=dist_StateField.define({create:()=>null,update:(pos,tr)=>(null!=pos&&(pos=tr.changes.mapPos(pos)),tr.effects.reduce((pos,e)=>e.is(setDropCursorPos)?e.value:pos,pos))}),drawDropCursor=ViewPlugin.fromClass(class{constructor(view){this.view=view,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(update){var _a;let cursorPos=update.state.field(dropCursorPos);null==cursorPos?null!=this.cursor&&(null===(_a=this.cursor)||void 0===_a||_a.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(update.startState.field(dropCursorPos)!=cursorPos||update.docChanged||update.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view}=this,pos=view.state.field(dropCursorPos),rect=null!=pos&&view.coordsAtPos(pos);if(!rect)return null;let outer=view.scrollDOM.getBoundingClientRect();return{left:rect.left-outer.left+view.scrollDOM.scrollLeft*view.scaleX,top:rect.top-outer.top+view.scrollDOM.scrollTop*view.scaleY,height:rect.bottom-rect.top}}drawCursor(pos){if(this.cursor){let{scaleX,scaleY}=this.view;pos?(this.cursor.style.left=pos.left/scaleX+"px",this.cursor.style.top=pos.top/scaleY+"px",this.cursor.style.height=pos.height/scaleY+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(pos){this.view.state.field(dropCursorPos)!=pos&&this.view.dispatch({effects:setDropCursorPos.of(pos)})}},{eventObservers:{dragover(event){this.setDropPos(this.view.posAtCoords({x:event.clientX,y:event.clientY}))},dragleave(event){event.target!=this.view.contentDOM&&this.view.contentDOM.contains(event.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function dropCursor(){return[dropCursorPos,drawDropCursor]}function iterMatches(doc,re,from,to,f){re.lastIndex=0;for(let m,cursor=doc.iterRange(from,to),pos=from;!cursor.next().done;pos+=cursor.value.length)if(!cursor.lineBreak)for(;m=re.exec(cursor.value);)f(pos+m.index,m)}class MatchDecorator{constructor(config){const{regexp,decoration,decorate,boundary,maxLength=1e3}=config;if(!regexp.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=regexp,decorate)this.addMatch=(match,view,from,add)=>decorate(add,from,from+match[0].length,match,view);else if("function"==typeof decoration)this.addMatch=(match,view,from,add)=>{let deco=decoration(match,view,from);deco&&add(from,from+match[0].length,deco)};else{if(!decoration)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(match,_view,from,add)=>add(from,from+match[0].length,decoration)}this.boundary=boundary,this.maxLength=maxLength}createDeco(view){let build=new RangeSetBuilder,add=build.add.bind(build);for(let{from,to}of function matchRanges(view,maxLength){let visible=view.visibleRanges;if(1==visible.length&&visible[0].from==view.viewport.from&&visible[0].to==view.viewport.to)return visible;let result=[];for(let{from,to}of visible)from=Math.max(view.state.doc.lineAt(from).from,from-maxLength),to=Math.min(view.state.doc.lineAt(to).to,to+maxLength),result.length&&result[result.length-1].to>=from?result[result.length-1].to=to:result.push({from,to});return result}(view,this.maxLength))iterMatches(view.state.doc,this.regexp,from,to,(from,m)=>this.addMatch(m,view,from,add));return build.finish()}updateDeco(update,deco){let changeFrom=1e9,changeTo=-1;return update.docChanged&&update.changes.iterChanges((_f,_t,from,to)=>{to>=update.view.viewport.from&&from<=update.view.viewport.to&&(changeFrom=Math.min(from,changeFrom),changeTo=Math.max(to,changeTo))}),update.viewportMoved||changeTo-changeFrom>1e3?this.createDeco(update.view):changeTo>-1?this.updateRange(update.view,deco.map(update.changes),changeFrom,changeTo):deco}updateRange(view,deco,updateFrom,updateTo){for(let r of view.visibleRanges){let from=Math.max(r.from,updateFrom),to=Math.min(r.to,updateTo);if(to>=from){let fromLine=view.state.doc.lineAt(from),toLine=fromLine.to<to?view.state.doc.lineAt(to):fromLine,start=Math.max(r.from,fromLine.from),end=Math.min(r.to,toLine.to);if(this.boundary){for(;from>fromLine.from;from--)if(this.boundary.test(fromLine.text[from-1-fromLine.from])){start=from;break}for(;to<toLine.to;to++)if(this.boundary.test(toLine.text[to-toLine.from])){end=to;break}}let m,ranges=[],add=(from,to,deco)=>ranges.push(deco.range(from,to));if(fromLine==toLine)for(this.regexp.lastIndex=start-fromLine.from;(m=this.regexp.exec(fromLine.text))&&m.index<end-fromLine.from;)this.addMatch(m,view,m.index+fromLine.from,add);else iterMatches(view.state.doc,this.regexp,start,end,(from,m)=>this.addMatch(m,view,from,add));deco=deco.update({filterFrom:start,filterTo:end,filter:(from,to)=>from<start||to>end,add:ranges})}}return deco}}const UnicodeRegexpSupport=null!=/x/.unicode?"gu":"g",Specials=new RegExp("[\0-\b\n--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\ufeff￹-￼]",UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;const specialCharConfig=Facet.define({combine(configs){let config=combineConfig(configs,{render:null,specialChars:Specials,addSpecialChars:null});return(config.replaceTabs=!function supportsTabSize(){var _a;if(null==_supportsTabSize&&"undefined"!=typeof document&&document.body){let styles=document.body.style;_supportsTabSize=null!=(null!==(_a=styles.tabSize)&&void 0!==_a?_a:styles.MozTabSize)}return _supportsTabSize||!1}())&&(config.specialChars=new RegExp("\t|"+config.specialChars.source,UnicodeRegexpSupport)),config.addSpecialChars&&(config.specialChars=new RegExp(config.specialChars.source+"|"+config.addSpecialChars.source,UnicodeRegexpSupport)),config}});function highlightSpecialChars(config={}){return[specialCharConfig.of(config),_plugin||(_plugin=ViewPlugin.fromClass(class{constructor(view){this.view=view,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(view.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(view)}makeDecorator(conf){return new MatchDecorator({regexp:conf.specialChars,decoration:(m,view,pos)=>{let{doc}=view.state,code=dist_codePointAt(m[0],0);if(9==code){let line=doc.lineAt(pos),size=view.state.tabSize,col=countColumn(line.text,size,pos-line.from);return Decoration.replace({widget:new TabWidget((size-col%size)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[code]||(this.decorationCache[code]=Decoration.replace({widget:new SpecialCharWidget(conf,code)}))},boundary:conf.replaceTabs?void 0:/[^]/})}update(update){let conf=update.state.facet(specialCharConfig);update.startState.facet(specialCharConfig)!=conf?(this.decorator=this.makeDecorator(conf),this.decorations=this.decorator.createDeco(update.view)):this.decorations=this.decorator.updateDeco(update,this.decorations)}},{decorations:v=>v.decorations}))]}let _plugin=null;class SpecialCharWidget extends WidgetType{constructor(options,code){super(),this.options=options,this.code=code}eq(other){return other.code==this.code}toDOM(view){let ph=function placeholder$1(code){return code>=32?"•":10==code?"␤":String.fromCharCode(9216+code)}(this.code),desc=view.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),custom=this.options.render&&this.options.render(this.code,desc,ph);if(custom)return custom;let span=document.createElement("span");return span.textContent=ph,span.title=desc,span.setAttribute("aria-label",desc),span.className="cm-specialChar",span}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(width){super(),this.width=width}eq(other){return other.width==this.width}toDOM(){let span=document.createElement("span");return span.textContent="\t",span.className="cm-tab",span.style.width=this.width+"px",span}ignoreEvent(){return!1}}function highlightActiveLine(){return activeLineHighlighter}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=ViewPlugin.fromClass(class{constructor(view){this.decorations=this.getDeco(view)}update(update){(update.docChanged||update.selectionSet)&&(this.decorations=this.getDeco(update.view))}getDeco(view){let lastLineStart=-1,deco=[];for(let r of view.state.selection.ranges){let line=view.lineBlockAt(r.head);line.from>lastLineStart&&(deco.push(lineDeco.range(line.from)),lastLineStart=line.from)}return Decoration.set(deco)}},{decorations:v=>v.decorations});function getPos(view,event){let offset=view.posAtCoords({x:event.clientX,y:event.clientY},!1),line=view.state.doc.lineAt(offset),off=offset-line.from,col=off>2e3?-1:off==line.length?function absoluteColumn(view,x){let ref=view.coordsAtPos(view.viewport.from);return ref?Math.round(Math.abs((ref.left-x)/view.defaultCharacterWidth)):-1}(view,event.clientX):countColumn(line.text,view.state.tabSize,offset-line.from);return{line:line.number,col,off}}function rectangleSelectionStyle(view,event){let start=getPos(view,event),startSel=view.state.selection;return start?{update(update){if(update.docChanged){let newStart=update.changes.mapPos(update.startState.doc.line(start.line).from),newLine=update.state.doc.lineAt(newStart);start={line:newLine.number,col:start.col,off:Math.min(start.off,newLine.length)},startSel=startSel.map(update.changes)}},get(event,_extend,multiple){let cur=getPos(view,event);if(!cur)return startSel;let ranges=function rectangleFor(state,a,b){let startLine=Math.min(a.line,b.line),endLine=Math.max(a.line,b.line),ranges=[];if(a.off>2e3||b.off>2e3||a.col<0||b.col<0){let startOff=Math.min(a.off,b.off),endOff=Math.max(a.off,b.off);for(let i=startLine;i<=endLine;i++){let line=state.doc.line(i);line.length<=endOff&&ranges.push(dist_EditorSelection.range(line.from+startOff,line.to+endOff))}}else{let startCol=Math.min(a.col,b.col),endCol=Math.max(a.col,b.col);for(let i=startLine;i<=endLine;i++){let line=state.doc.line(i),start=findColumn(line.text,startCol,state.tabSize,!0);if(start<0)ranges.push(dist_EditorSelection.cursor(line.to));else{let end=findColumn(line.text,endCol,state.tabSize);ranges.push(dist_EditorSelection.range(line.from+start,line.from+end))}}}return ranges}(view.state,start,cur);return ranges.length?multiple?dist_EditorSelection.create(ranges.concat(startSel.ranges)):dist_EditorSelection.create(ranges):startSel}}:null}function rectangularSelection(options){let filter=(null==options?void 0:options.eventFilter)||(e=>e.altKey&&0==e.button);return EditorView.mouseSelectionStyle.of((view,event)=>filter(event)?rectangleSelectionStyle(view,event):null)}class TooltipViewManager{constructor(view,facet,createTooltipView,removeTooltipView){this.facet=facet,this.createTooltipView=createTooltipView,this.removeTooltipView=removeTooltipView,this.input=view.state.facet(facet),this.tooltips=this.input.filter(t=>t);let prev=null;this.tooltipViews=this.tooltips.map(t=>prev=createTooltipView(t,prev))}update(update,above){var _a;let input=update.state.facet(this.facet),tooltips=input.filter(x=>x);if(input===this.input){for(let t of this.tooltipViews)t.update&&t.update(update);return!1}let tooltipViews=[],newAbove=above?[]:null;for(let i=0;i<tooltips.length;i++){let tip=tooltips[i],known=-1;if(tip){for(let i=0;i<this.tooltips.length;i++){let other=this.tooltips[i];other&&other.create==tip.create&&(known=i)}if(known<0)tooltipViews[i]=this.createTooltipView(tip,i?tooltipViews[i-1]:null),newAbove&&(newAbove[i]=!!tip.above);else{let tooltipView=tooltipViews[i]=this.tooltipViews[known];newAbove&&(newAbove[i]=above[known]),tooltipView.update&&tooltipView.update(update)}}}for(let t of this.tooltipViews)tooltipViews.indexOf(t)<0&&(this.removeTooltipView(t),null===(_a=t.destroy)||void 0===_a||_a.call(t));return above&&(newAbove.forEach((val,i)=>above[i]=val),above.length=newAbove.length),this.input=input,this.tooltips=tooltips,this.tooltipViews=tooltipViews,!0}}function windowSpace(view){let docElt=view.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:docElt.clientHeight,right:docElt.clientWidth}}const tooltipConfig=Facet.define({combine:values=>{var _a,_b,_c;return{position:browser.ios?"absolute":(null===(_a=values.find(conf=>conf.position))||void 0===_a?void 0:_a.position)||"fixed",parent:(null===(_b=values.find(conf=>conf.parent))||void 0===_b?void 0:_b.parent)||null,tooltipSpace:(null===(_c=values.find(conf=>conf.tooltipSpace))||void 0===_c?void 0:_c.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor(view){this.view=view,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let config=view.state.facet(tooltipConfig);this.position=config.position,this.parent=config.parent,this.classes=view.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver="function"==typeof ResizeObserver?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new TooltipViewManager(view,showTooltip,(t,p)=>this.createTooltip(t,p),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver(entries=>{Date.now()>this.lastTransaction-50&&entries.length>0&&entries[entries.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),view.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let tooltip of this.manager.tooltipViews)this.intersectionObserver.observe(tooltip.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(update){update.transactions.length&&(this.lastTransaction=Date.now());let updated=this.manager.update(update,this.above);updated&&this.observeIntersection();let shouldMeasure=updated||update.geometryChanged,newConfig=update.state.facet(tooltipConfig);if(newConfig.position!=this.position&&!this.madeAbsolute){this.position=newConfig.position;for(let t of this.manager.tooltipViews)t.dom.style.position=this.position;shouldMeasure=!0}if(newConfig.parent!=this.parent){this.parent&&this.container.remove(),this.parent=newConfig.parent,this.createContainer();for(let t of this.manager.tooltipViews)this.container.appendChild(t.dom);shouldMeasure=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);shouldMeasure&&this.maybeMeasure()}createTooltip(tooltip,prev){let tooltipView=tooltip.create(this.view),before=prev?prev.dom:null;if(tooltipView.dom.classList.add("cm-tooltip"),tooltip.arrow&&!tooltipView.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let arrow=document.createElement("div");arrow.className="cm-tooltip-arrow",tooltipView.dom.appendChild(arrow)}return tooltipView.dom.style.position=this.position,tooltipView.dom.style.top="-10000px",tooltipView.dom.style.left="0px",this.container.insertBefore(tooltipView.dom,before),tooltipView.mount&&tooltipView.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(tooltipView.dom),tooltipView}destroy(){var _a,_b,_c;this.view.win.removeEventListener("resize",this.measureSoon);for(let tooltipView of this.manager.tooltipViews)tooltipView.dom.remove(),null===(_a=tooltipView.destroy)||void 0===_a||_a.call(tooltipView);this.parent&&this.container.remove(),null===(_b=this.resizeObserver)||void 0===_b||_b.disconnect(),null===(_c=this.intersectionObserver)||void 0===_c||_c.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let scaleX=1,scaleY=1,makeAbsolute=!1;if("fixed"==this.position&&this.manager.tooltipViews.length){let{dom}=this.manager.tooltipViews[0];if(browser.gecko)makeAbsolute=dom.offsetParent!=this.container.ownerDocument.body;else if("-10000px"==dom.style.top&&"0px"==dom.style.left){let rect=dom.getBoundingClientRect();makeAbsolute=Math.abs(rect.top+1e4)>1||Math.abs(rect.left)>1}}if(makeAbsolute||"absolute"==this.position)if(this.parent){let rect=this.parent.getBoundingClientRect();rect.width&&rect.height&&(scaleX=rect.width/this.parent.offsetWidth,scaleY=rect.height/this.parent.offsetHeight)}else({scaleX,scaleY}=this.view.viewState);let visible=this.view.scrollDOM.getBoundingClientRect(),margins=getScrollMargins(this.view);return{visible:{left:visible.left+margins.left,top:visible.top+margins.top,right:visible.right-margins.right,bottom:visible.bottom-margins.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((t,i)=>{let tv=this.manager.tooltipViews[i];return tv.getCoords?tv.getCoords(t.pos):this.view.coordsAtPos(t.pos)}),size:this.manager.tooltipViews.map(({dom})=>dom.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view),scaleX,scaleY,makeAbsolute}}writeMeasure(measured){var _a;if(measured.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let t of this.manager.tooltipViews)t.dom.style.position="absolute"}let{visible,space,scaleX,scaleY}=measured,others=[];for(let i=0;i<this.manager.tooltips.length;i++){let tooltip=this.manager.tooltips[i],tView=this.manager.tooltipViews[i],{dom}=tView,pos=measured.pos[i],size=measured.size[i];if(!pos||!1!==tooltip.clip&&(pos.bottom<=Math.max(visible.top,space.top)||pos.top>=Math.min(visible.bottom,space.bottom)||pos.right<Math.max(visible.left,space.left)-.1||pos.left>Math.min(visible.right,space.right)+.1)){dom.style.top="-10000px";continue}let arrow=tooltip.arrow?tView.dom.querySelector(".cm-tooltip-arrow"):null,arrowHeight=arrow?7:0,width=size.right-size.left,height=null!==(_a=knownHeight.get(tView))&&void 0!==_a?_a:size.bottom-size.top,offset=tView.offset||noOffset,ltr=this.view.textDirection==Direction.LTR,left=size.width>space.right-space.left?ltr?space.left:space.right-size.width:ltr?Math.max(space.left,Math.min(pos.left-(arrow?14:0)+offset.x,space.right-width)):Math.min(Math.max(space.left,pos.left-width+(arrow?14:0)-offset.x),space.right-width),above=this.above[i];!tooltip.strictSide&&(above?pos.top-height-arrowHeight-offset.y<space.top:pos.bottom+height+arrowHeight+offset.y>space.bottom)&&above==space.bottom-pos.bottom>pos.top-space.top&&(above=this.above[i]=!above);let spaceVert=(above?pos.top-space.top:space.bottom-pos.bottom)-arrowHeight;if(spaceVert<height&&!1!==tView.resize){if(spaceVert<this.view.defaultLineHeight){dom.style.top="-10000px";continue}knownHeight.set(tView,height),dom.style.height=(height=spaceVert)/scaleY+"px"}else dom.style.height&&(dom.style.height="");let top=above?pos.top-height-arrowHeight-offset.y:pos.bottom+arrowHeight+offset.y,right=left+width;if(!0!==tView.overlap)for(let r of others)r.left<right&&r.right>left&&r.top<top+height&&r.bottom>top&&(top=above?r.top-height-2-arrowHeight:r.bottom+arrowHeight+2);if("absolute"==this.position?(dom.style.top=(top-measured.parent.top)/scaleY+"px",setLeftStyle(dom,(left-measured.parent.left)/scaleX)):(dom.style.top=top/scaleY+"px",setLeftStyle(dom,left/scaleX)),arrow){let arrowLeft=pos.left+(ltr?offset.x:-offset.x)-(left+14-7);arrow.style.left=arrowLeft/scaleX+"px"}!0!==tView.overlap&&others.push({left,top,right,bottom:top+height}),dom.classList.toggle("cm-tooltip-above",above),dom.classList.toggle("cm-tooltip-below",!above),tView.positioned&&tView.positioned(measured.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let tv of this.manager.tooltipViews)tv.dom.style.top="-10000px"}},{eventObservers:{scroll(){this.maybeMeasure()}}});function setLeftStyle(elt,value){let current=parseInt(elt.style.left,10);(isNaN(current)||Math.abs(value-current)>1)&&(elt.style.left=value+"px")}const baseTheme=EditorView.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme]});function getTooltip(view,tooltip){let plugin=view.plugin(tooltipPlugin);if(!plugin)return null;let found=plugin.manager.tooltips.indexOf(tooltip);return found<0?null:plugin.manager.tooltipViews[found]}const panelConfig=Facet.define({combine(configs){let topContainer,bottomContainer;for(let c of configs)topContainer=topContainer||c.topContainer,bottomContainer=bottomContainer||c.bottomContainer;return{topContainer,bottomContainer}}});function getPanel(view,panel){let plugin=view.plugin(panelPlugin),index=plugin?plugin.specs.indexOf(panel):-1;return index>-1?plugin.panels[index]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(view){this.input=view.state.facet(showPanel),this.specs=this.input.filter(s=>s),this.panels=this.specs.map(spec=>spec(view));let conf=view.state.facet(panelConfig);this.top=new PanelGroup(view,!0,conf.topContainer),this.bottom=new PanelGroup(view,!1,conf.bottomContainer),this.top.sync(this.panels.filter(p=>p.top)),this.bottom.sync(this.panels.filter(p=>!p.top));for(let p of this.panels)p.dom.classList.add("cm-panel"),p.mount&&p.mount()}update(update){let conf=update.state.facet(panelConfig);this.top.container!=conf.topContainer&&(this.top.sync([]),this.top=new PanelGroup(update.view,!0,conf.topContainer)),this.bottom.container!=conf.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(update.view,!1,conf.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let input=update.state.facet(showPanel);if(input!=this.input){let specs=input.filter(x=>x),panels=[],top=[],bottom=[],mount=[];for(let spec of specs){let panel,known=this.specs.indexOf(spec);known<0?(panel=spec(update.view),mount.push(panel)):(panel=this.panels[known],panel.update&&panel.update(update)),panels.push(panel),(panel.top?top:bottom).push(panel)}this.specs=specs,this.panels=panels,this.top.sync(top),this.bottom.sync(bottom);for(let p of mount)p.dom.classList.add("cm-panel"),p.mount&&p.mount()}else for(let p of this.panels)p.update&&p.update(update)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:plugin=>EditorView.scrollMargins.of(view=>{let value=view.plugin(plugin);return value&&{top:value.top.scrollMargin(),bottom:value.bottom.scrollMargin()}})});class PanelGroup{constructor(view,top,container){this.view=view,this.top=top,this.container=container,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(panels){for(let p of this.panels)p.destroy&&panels.indexOf(p)<0&&p.destroy();this.panels=panels,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let parent=this.container||this.view.dom;parent.insertBefore(this.dom,this.top?parent.firstChild:null)}let curDOM=this.dom.firstChild;for(let panel of this.panels)if(panel.dom.parentNode==this.dom){for(;curDOM!=panel.dom;)curDOM=rm(curDOM);curDOM=curDOM.nextSibling}else this.dom.insertBefore(panel.dom,curDOM);for(;curDOM;)curDOM=rm(curDOM)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let cls of this.classes.split(" "))cls&&this.container.classList.remove(cls);for(let cls of(this.classes=this.view.themeClasses).split(" "))cls&&this.container.classList.add(cls)}}}function rm(node){let next=node.nextSibling;return node.remove(),next}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare(other){return this==other||this.constructor==other.constructor&&this.eq(other)}eq(other){return!1}destroy(dom){}}GutterMarker.prototype.elementClass="",GutterMarker.prototype.toDOM=void 0,GutterMarker.prototype.mapMode=dist_MapMode.TrackBefore,GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1,GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),gutterWidgetClass=Facet.define(),defaults={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>dist_RangeSet.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},activeGutters=Facet.define();function gutter(config){return[gutters(),activeGutters.of({...defaults,...config})]}const unfixGutters=Facet.define({combine:values=>values.some(x=>x)});function gutters(config){let result=[gutterView];return config&&!1===config.fixed&&result.push(unfixGutters.of(!0)),result}const gutterView=ViewPlugin.fromClass(class{constructor(view){this.view=view,this.domAfter=null,this.prevViewport=view.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=view.state.facet(activeGutters).map(conf=>new SingleGutterView(view,conf)),this.fixed=!view.state.facet(unfixGutters);for(let gutter of this.gutters)"after"==gutter.config.side?this.getDOMAfter().appendChild(gutter.dom):this.dom.appendChild(gutter.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),view.scrollDOM.insertBefore(this.dom,view.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(update){if(this.updateGutters(update)){let vpA=this.prevViewport,vpB=update.view.viewport,vpOverlap=Math.min(vpA.to,vpB.to)-Math.max(vpA.from,vpB.from);this.syncGutters(vpOverlap<.8*(vpB.to-vpB.from))}if(update.geometryChanged){let min=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=min,this.domAfter&&(this.domAfter.style.minHeight=min)}this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=update.view.viewport}syncGutters(detach){let after=this.dom.nextSibling;detach&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let lineClasses=dist_RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),classSet=[],contexts=this.gutters.map(gutter=>new UpdateContext(gutter,this.view.viewport,-this.view.documentPadding.top));for(let line of this.view.viewportLineBlocks)if(classSet.length&&(classSet=[]),Array.isArray(line.type)){let first=!0;for(let b of line.type)if(b.type==BlockType.Text&&first){advanceCursor(lineClasses,classSet,b.from);for(let cx of contexts)cx.line(this.view,b,classSet);first=!1}else if(b.widget)for(let cx of contexts)cx.widget(this.view,b)}else if(line.type==BlockType.Text){advanceCursor(lineClasses,classSet,line.from);for(let cx of contexts)cx.line(this.view,line,classSet)}else if(line.widget)for(let cx of contexts)cx.widget(this.view,line);for(let cx of contexts)cx.finish();detach&&(this.view.scrollDOM.insertBefore(this.dom,after),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(update){let prev=update.startState.facet(activeGutters),cur=update.state.facet(activeGutters),change=update.docChanged||update.heightChanged||update.viewportChanged||!dist_RangeSet.eq(update.startState.facet(gutterLineClass),update.state.facet(gutterLineClass),update.view.viewport.from,update.view.viewport.to);if(prev==cur)for(let gutter of this.gutters)gutter.update(update)&&(change=!0);else{change=!0;let gutters=[];for(let conf of cur){let known=prev.indexOf(conf);known<0?gutters.push(new SingleGutterView(this.view,conf)):(this.gutters[known].update(update),gutters.push(this.gutters[known]))}for(let g of this.gutters)g.dom.remove(),gutters.indexOf(g)<0&&g.destroy();for(let g of gutters)"after"==g.config.side?this.getDOMAfter().appendChild(g.dom):this.dom.appendChild(g.dom);this.gutters=gutters}return change}destroy(){for(let view of this.gutters)view.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:plugin=>EditorView.scrollMargins.of(view=>{let value=view.plugin(plugin);if(!value||0==value.gutters.length||!value.fixed)return null;let before=value.dom.offsetWidth*view.scaleX,after=value.domAfter?value.domAfter.offsetWidth*view.scaleX:0;return view.textDirection==Direction.LTR?{left:before,right:after}:{right:before,left:after}})});function dist_asArray(val){return Array.isArray(val)?val:[val]}function advanceCursor(cursor,collect,pos){for(;cursor.value&&cursor.from<=pos;)cursor.from==pos&&collect.push(cursor.value),cursor.next()}class UpdateContext{constructor(gutter,viewport,height){this.gutter=gutter,this.height=height,this.i=0,this.cursor=dist_RangeSet.iter(gutter.markers,viewport.from)}addElement(view,block,markers){let{gutter}=this,above=(block.top-this.height)/view.scaleY,height=block.height/view.scaleY;if(this.i==gutter.elements.length){let newElt=new GutterElement(view,height,above,markers);gutter.elements.push(newElt),gutter.dom.appendChild(newElt.dom)}else gutter.elements[this.i].update(view,height,above,markers);this.height=block.bottom,this.i++}line(view,line,extraMarkers){let localMarkers=[];advanceCursor(this.cursor,localMarkers,line.from),extraMarkers.length&&(localMarkers=localMarkers.concat(extraMarkers));let forLine=this.gutter.config.lineMarker(view,line,localMarkers);forLine&&localMarkers.unshift(forLine);let gutter=this.gutter;(0!=localMarkers.length||gutter.config.renderEmptyElements)&&this.addElement(view,line,localMarkers)}widget(view,block){let marker=this.gutter.config.widgetMarker(view,block.widget,block),markers=marker?[marker]:null;for(let cls of view.state.facet(gutterWidgetClass)){let marker=cls(view,block.widget,block);marker&&(markers||(markers=[])).push(marker)}markers&&this.addElement(view,block,markers)}finish(){let gutter=this.gutter;for(;gutter.elements.length>this.i;){let last=gutter.elements.pop();gutter.dom.removeChild(last.dom),last.destroy()}}}class SingleGutterView{constructor(view,config){this.view=view,this.config=config,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let prop in config.domEventHandlers)this.dom.addEventListener(prop,event=>{let y,target=event.target;if(target!=this.dom&&this.dom.contains(target)){for(;target.parentNode!=this.dom;)target=target.parentNode;let rect=target.getBoundingClientRect();y=(rect.top+rect.bottom)/2}else y=event.clientY;let line=view.lineBlockAtHeight(y-view.documentTop);config.domEventHandlers[prop](view,line,event)&&event.preventDefault()});this.markers=dist_asArray(config.markers(view)),config.initialSpacer&&(this.spacer=new GutterElement(view,0,0,[config.initialSpacer(view)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(update){let prevMarkers=this.markers;if(this.markers=dist_asArray(this.config.markers(update.view)),this.spacer&&this.config.updateSpacer){let updated=this.config.updateSpacer(this.spacer.markers[0],update);updated!=this.spacer.markers[0]&&this.spacer.update(update.view,0,0,[updated])}let vp=update.view.viewport;return!dist_RangeSet.eq(this.markers,prevMarkers,vp.from,vp.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(update)}destroy(){for(let elt of this.elements)elt.destroy()}}class GutterElement{constructor(view,height,above,markers){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(view,height,above,markers)}update(view,height,above,markers){this.height!=height&&(this.height=height,this.dom.style.height=height+"px"),this.above!=above&&(this.dom.style.marginTop=(this.above=above)?above+"px":""),function sameMarkers(a,b){if(a.length!=b.length)return!1;for(let i=0;i<a.length;i++)if(!a[i].compare(b[i]))return!1;return!0}(this.markers,markers)||this.setMarkers(view,markers)}setMarkers(view,markers){let cls="cm-gutterElement",domPos=this.dom.firstChild;for(let iNew=0,iOld=0;;){let skipTo=iOld,marker=iNew<markers.length?markers[iNew++]:null,matched=!1;if(marker){let c=marker.elementClass;c&&(cls+=" "+c);for(let i=iOld;i<this.markers.length;i++)if(this.markers[i].compare(marker)){skipTo=i,matched=!0;break}}else skipTo=this.markers.length;for(;iOld<skipTo;){let next=this.markers[iOld++];if(next.toDOM){next.destroy(domPos);let after=domPos.nextSibling;domPos.remove(),domPos=after}}if(!marker)break;marker.toDOM&&(matched?domPos=domPos.nextSibling:this.dom.insertBefore(marker.toDOM(view),domPos)),matched&&iOld++}this.dom.className=cls,this.markers=markers}destroy(){this.setMarkers(null,[])}}const lineNumberMarkers=Facet.define(),lineNumberWidgetMarker=Facet.define(),lineNumberConfig=Facet.define({combine:values=>combineConfig(values,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(a,b){let result=Object.assign({},a);for(let event in b){let exists=result[event],add=b[event];result[event]=exists?(view,line,event)=>exists(view,line,event)||add(view,line,event):add}return result}})});class NumberMarker extends GutterMarker{constructor(number){super(),this.number=number}eq(other){return this.number==other.number}toDOM(){return document.createTextNode(this.number)}}function formatNumber(view,number){return view.state.facet(lineNumberConfig).formatNumber(number,view.state)}const lineNumberGutter=activeGutters.compute([lineNumberConfig],state=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:view=>view.state.facet(lineNumberMarkers),lineMarker:(view,line,others)=>others.some(m=>m.toDOM)?null:new NumberMarker(formatNumber(view,view.state.doc.lineAt(line.from).number)),widgetMarker:(view,widget,block)=>{for(let m of view.state.facet(lineNumberWidgetMarker)){let result=m(view,widget,block);if(result)return result}return null},lineMarkerChange:update=>update.startState.facet(lineNumberConfig)!=update.state.facet(lineNumberConfig),initialSpacer:view=>new NumberMarker(formatNumber(view,maxLineNumber(view.state.doc.lines))),updateSpacer(spacer,update){let max=formatNumber(update.view,maxLineNumber(update.view.state.doc.lines));return max==spacer.number?spacer:new NumberMarker(max)},domEventHandlers:state.facet(lineNumberConfig).domEventHandlers,side:"before"}));function lineNumbers(config={}){return[lineNumberConfig.of(config),gutters(),lineNumberGutter]}function maxLineNumber(lines){let last=9;for(;last<lines;)last=10*last+9;return last}const activeLineGutterMarker=new class extends GutterMarker{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},activeLineGutterHighlighter=gutterLineClass.compute(["selection"],state=>{let marks=[],last=-1;for(let range of state.selection.ranges){let linePos=state.doc.lineAt(range.head).from;linePos>last&&(last=linePos,marks.push(activeLineGutterMarker.range(linePos)))}return dist_RangeSet.of(marks)});function highlightActiveLineGutter(){return activeLineGutterHighlighter}const DefaultBufferLength=1024;let nextPropID=0;class dist_Range{constructor(from,to){this.from=from,this.to=to}}class NodeProp{constructor(config={}){this.id=nextPropID++,this.perNode=!!config.perNode,this.deserialize=config.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(match){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof match&&(match=NodeType.match(match)),type=>{let result=match(type);return void 0===result?null:[this,result]}}}NodeProp.closedBy=new NodeProp({deserialize:str=>str.split(" ")}),NodeProp.openedBy=new NodeProp({deserialize:str=>str.split(" ")}),NodeProp.group=new NodeProp({deserialize:str=>str.split(" ")}),NodeProp.isolate=new NodeProp({deserialize:value=>{if(value&&"rtl"!=value&&"ltr"!=value&&"auto"!=value)throw new RangeError("Invalid value for isolate: "+value);return value||"auto"}}),NodeProp.contextHash=new NodeProp({perNode:!0}),NodeProp.lookAhead=new NodeProp({perNode:!0}),NodeProp.mounted=new NodeProp({perNode:!0});class MountedTree{constructor(tree,overlay,parser){this.tree=tree,this.overlay=overlay,this.parser=parser}static get(tree){return tree&&tree.props&&tree.props[NodeProp.mounted.id]}}const noProps=Object.create(null);class NodeType{constructor(name,props,id,flags=0){this.name=name,this.props=props,this.id=id,this.flags=flags}static define(spec){let props=spec.props&&spec.props.length?Object.create(null):noProps,flags=(spec.top?1:0)|(spec.skipped?2:0)|(spec.error?4:0)|(null==spec.name?8:0),type=new NodeType(spec.name||"",props,spec.id,flags);if(spec.props)for(let src of spec.props)if(Array.isArray(src)||(src=src(type)),src){if(src[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");props[src[0].id]=src[1]}return type}prop(prop){return this.props[prop.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(name){if("string"==typeof name){if(this.name==name)return!0;let group=this.prop(NodeProp.group);return!!group&&group.indexOf(name)>-1}return this.id==name}static match(map){let direct=Object.create(null);for(let prop in map)for(let name of prop.split(" "))direct[name]=map[prop];return node=>{for(let groups=node.prop(NodeProp.group),i=-1;i<(groups?groups.length:0);i++){let found=direct[i<0?node.name:groups[i]];if(found)return found}}}}NodeType.none=new NodeType("",Object.create(null),0,8);class NodeSet{constructor(types){this.types=types;for(let i=0;i<types.length;i++)if(types[i].id!=i)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...props){let newTypes=[];for(let type of this.types){let newProps=null;for(let source of props){let add=source(type);add&&(newProps||(newProps=Object.assign({},type.props)),newProps[add[0].id]=add[1])}newTypes.push(newProps?new NodeType(type.name,newProps,type.id,type.flags):type)}return new NodeSet(newTypes)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;!function(IterMode){IterMode[IterMode.ExcludeBuffers=1]="ExcludeBuffers",IterMode[IterMode.IncludeAnonymous=2]="IncludeAnonymous",IterMode[IterMode.IgnoreMounts=4]="IgnoreMounts",IterMode[IterMode.IgnoreOverlays=8]="IgnoreOverlays"}(IterMode||(IterMode={}));class Tree{constructor(type,children,positions,length,props){if(this.type=type,this.children=children,this.positions=positions,this.length=length,this.props=null,props&&props.length){this.props=Object.create(null);for(let[prop,value]of props)this.props["number"==typeof prop?prop:prop.id]=value}}toString(){let mounted=MountedTree.get(this);if(mounted&&!mounted.overlay)return mounted.tree.toString();let children="";for(let ch of this.children){let str=ch.toString();str&&(children&&(children+=","),children+=str)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(children.length?"("+children+")":""):children}cursor(mode=0){return new TreeCursor(this.topNode,mode)}cursorAt(pos,side=0,mode=0){let scope=CachedNode.get(this)||this.topNode,cursor=new TreeCursor(scope);return cursor.moveTo(pos,side),CachedNode.set(this,cursor._tree),cursor}get topNode(){return new TreeNode(this,0,0,null)}resolve(pos,side=0){let node=resolveNode(CachedNode.get(this)||this.topNode,pos,side,!1);return CachedNode.set(this,node),node}resolveInner(pos,side=0){let node=resolveNode(CachedInnerNode.get(this)||this.topNode,pos,side,!0);return CachedInnerNode.set(this,node),node}resolveStack(pos,side=0){return function stackIterator(tree,pos,side){let inner=tree.resolveInner(pos,side),layers=null;for(let scan=inner instanceof TreeNode?inner:inner.context.parent;scan;scan=scan.parent)if(scan.index<0){let parent=scan.parent;(layers||(layers=[inner])).push(parent.resolve(pos,side)),scan=parent}else{let mount=MountedTree.get(scan.tree);if(mount&&mount.overlay&&mount.overlay[0].from<=pos&&mount.overlay[mount.overlay.length-1].to>=pos){let root=new TreeNode(mount.tree,mount.overlay[0].from+scan.from,-1,scan);(layers||(layers=[inner])).push(resolveNode(root,pos,side,!1))}}return layers?iterStack(layers):inner}(this,pos,side)}iterate(spec){let{enter,leave,from=0,to=this.length}=spec,mode=spec.mode||0,anon=(mode&IterMode.IncludeAnonymous)>0;for(let c=this.cursor(mode|IterMode.IncludeAnonymous);;){let entered=!1;if(c.from<=to&&c.to>=from&&(!anon&&c.type.isAnonymous||!1!==enter(c))){if(c.firstChild())continue;entered=!0}for(;entered&&leave&&(anon||!c.type.isAnonymous)&&leave(c),!c.nextSibling();){if(!c.parent())return;entered=!0}}}prop(prop){return prop.perNode?this.props?this.props[prop.id]:void 0:this.type.prop(prop)}get propValues(){let result=[];if(this.props)for(let id in this.props)result.push([+id,this.props[id]]);return result}balance(config={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(children,positions,length)=>new Tree(this.type,children,positions,length,this.propValues),config.makeTree||((children,positions,length)=>new Tree(NodeType.none,children,positions,length)))}static build(data){return function buildTree(data){var _a;let{buffer,nodeSet,maxBufferLength=DefaultBufferLength,reused=[],minRepeatType=nodeSet.types.length}=data,cursor=Array.isArray(buffer)?new FlatBufferCursor(buffer,buffer.length):buffer,types=nodeSet.types,contextHash=0,lookAhead=0;function takeNode(parentStart,minPos,children,positions,inRepeat,depth){let{id,start,end,size}=cursor,lookAheadAtStart=lookAhead,contextAtStart=contextHash;for(;size<0;){if(cursor.next(),-1==size){let node=reused[id];return children.push(node),void positions.push(start-parentStart)}if(-3==size)return void(contextHash=id);if(-4==size)return void(lookAhead=id);throw new RangeError(`Unrecognized record size: ${size}`)}let node,buffer,type=types[id],startPos=start-parentStart;if(end-start<=maxBufferLength&&(buffer=findBufferSize(cursor.pos-minPos,inRepeat))){let data=new Uint16Array(buffer.size-buffer.skip),endPos=cursor.pos-buffer.size,index=data.length;for(;cursor.pos>endPos;)index=copyToBuffer(buffer.start,data,index);node=new TreeBuffer(data,end-buffer.start,nodeSet),startPos=buffer.start-parentStart}else{let endPos=cursor.pos-size;cursor.next();let localChildren=[],localPositions=[],localInRepeat=id>=minRepeatType?id:-1,lastGroup=0,lastEnd=end;for(;cursor.pos>endPos;)localInRepeat>=0&&cursor.id==localInRepeat&&cursor.size>=0?(cursor.end<=lastEnd-maxBufferLength&&(makeRepeatLeaf(localChildren,localPositions,start,lastGroup,cursor.end,lastEnd,localInRepeat,lookAheadAtStart,contextAtStart),lastGroup=localChildren.length,lastEnd=cursor.end),cursor.next()):depth>2500?takeFlatNode(start,endPos,localChildren,localPositions):takeNode(start,endPos,localChildren,localPositions,localInRepeat,depth+1);if(localInRepeat>=0&&lastGroup>0&&lastGroup<localChildren.length&&makeRepeatLeaf(localChildren,localPositions,start,lastGroup,start,lastEnd,localInRepeat,lookAheadAtStart,contextAtStart),localChildren.reverse(),localPositions.reverse(),localInRepeat>-1&&lastGroup>0){let make=makeBalanced(type,contextAtStart);node=balanceRange(type,localChildren,localPositions,0,localChildren.length,0,end-start,make,make)}else node=makeTree(type,localChildren,localPositions,end-start,lookAheadAtStart-end,contextAtStart)}children.push(node),positions.push(startPos)}function takeFlatNode(parentStart,minPos,children,positions){let nodes=[],nodeCount=0,stopAt=-1;for(;cursor.pos>minPos;){let{id,start,end,size}=cursor;if(size>4)cursor.next();else{if(stopAt>-1&&start<stopAt)break;stopAt<0&&(stopAt=end-maxBufferLength),nodes.push(id,start,end),nodeCount++,cursor.next()}}if(nodeCount){let buffer=new Uint16Array(4*nodeCount),start=nodes[nodes.length-2];for(let i=nodes.length-3,j=0;i>=0;i-=3)buffer[j++]=nodes[i],buffer[j++]=nodes[i+1]-start,buffer[j++]=nodes[i+2]-start,buffer[j++]=j;children.push(new TreeBuffer(buffer,nodes[2]-start,nodeSet)),positions.push(start-parentStart)}}function makeBalanced(type,contextHash){return(children,positions,length)=>{let last,lookAheadProp,lookAhead=0,lastI=children.length-1;if(lastI>=0&&(last=children[lastI])instanceof Tree){if(!lastI&&last.type==type&&last.length==length)return last;(lookAheadProp=last.prop(NodeProp.lookAhead))&&(lookAhead=positions[lastI]+last.length+lookAheadProp)}return makeTree(type,children,positions,length,lookAhead,contextHash)}}function makeRepeatLeaf(children,positions,base,i,from,to,type,lookAhead,contextHash){let localChildren=[],localPositions=[];for(;children.length>i;)localChildren.push(children.pop()),localPositions.push(positions.pop()+base-from);children.push(makeTree(nodeSet.types[type],localChildren,localPositions,to-from,lookAhead-to,contextHash)),positions.push(from-base)}function makeTree(type,children,positions,length,lookAhead,contextHash,props){if(contextHash){let pair=[NodeProp.contextHash,contextHash];props=props?[pair].concat(props):[pair]}if(lookAhead>25){let pair=[NodeProp.lookAhead,lookAhead];props=props?[pair].concat(props):[pair]}return new Tree(type,children,positions,length,props)}function findBufferSize(maxSize,inRepeat){let fork=cursor.fork(),size=0,start=0,skip=0,minStart=fork.end-maxBufferLength,result={size:0,start:0,skip:0};scan:for(let minPos=fork.pos-maxSize;fork.pos>minPos;){let nodeSize=fork.size;if(fork.id==inRepeat&&nodeSize>=0){result.size=size,result.start=start,result.skip=skip,skip+=4,size+=4,fork.next();continue}let startPos=fork.pos-nodeSize;if(nodeSize<0||startPos<minPos||fork.start<minStart)break;let localSkipped=fork.id>=minRepeatType?4:0,nodeStart=fork.start;for(fork.next();fork.pos>startPos;){if(fork.size<0){if(-3!=fork.size)break scan;localSkipped+=4}else fork.id>=minRepeatType&&(localSkipped+=4);fork.next()}start=nodeStart,size+=nodeSize,skip+=localSkipped}return(inRepeat<0||size==maxSize)&&(result.size=size,result.start=start,result.skip=skip),result.size>4?result:void 0}function copyToBuffer(bufferStart,buffer,index){let{id,start,end,size}=cursor;if(cursor.next(),size>=0&&id<minRepeatType){let startIndex=index;if(size>4){let endPos=cursor.pos-(size-4);for(;cursor.pos>endPos;)index=copyToBuffer(bufferStart,buffer,index)}buffer[--index]=startIndex,buffer[--index]=end-bufferStart,buffer[--index]=start-bufferStart,buffer[--index]=id}else-3==size?contextHash=id:-4==size&&(lookAhead=id);return index}let children=[],positions=[];for(;cursor.pos>0;)takeNode(data.start||0,data.bufferStart||0,children,positions,-1,0);let length=null!==(_a=data.length)&&void 0!==_a?_a:children.length?positions[0]+children[0].length:0;return new Tree(types[data.topID],children.reverse(),positions.reverse(),length)}(data)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(buffer,index){this.buffer=buffer,this.index=index}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(buffer,length,set){this.buffer=buffer,this.length=length,this.set=set}get type(){return NodeType.none}toString(){let result=[];for(let index=0;index<this.buffer.length;)result.push(this.childString(index)),index=this.buffer[index+3];return result.join(",")}childString(index){let id=this.buffer[index],endIndex=this.buffer[index+3],type=this.set.types[id],result=type.name;if(/\W/.test(result)&&!type.isError&&(result=JSON.stringify(result)),endIndex==(index+=4))return result;let children=[];for(;index<endIndex;)children.push(this.childString(index)),index=this.buffer[index+3];return result+"("+children.join(",")+")"}findChild(startIndex,endIndex,dir,pos,side){let{buffer}=this,pick=-1;for(let i=startIndex;i!=endIndex&&!(checkSide(side,pos,buffer[i+1],buffer[i+2])&&(pick=i,dir>0));i=buffer[i+3]);return pick}slice(startI,endI,from){let b=this.buffer,copy=new Uint16Array(endI-startI),len=0;for(let i=startI,j=0;i<endI;){copy[j++]=b[i++],copy[j++]=b[i++]-from;let to=copy[j++]=b[i++]-from;copy[j++]=b[i++]-startI,len=Math.max(len,to)}return new TreeBuffer(copy,len,this.set)}}function checkSide(side,pos,from,to){switch(side){case-2:return from<pos;case-1:return to>=pos&&from<pos;case 0:return from<pos&&to>pos;case 1:return from<=pos&&to>pos;case 2:return to>pos;case 4:return!0}}function resolveNode(node,pos,side,overlays){for(var _a;node.from==node.to||(side<1?node.from>=pos:node.from>pos)||(side>-1?node.to<=pos:node.to<pos);){let parent=!overlays&&node instanceof TreeNode&&node.index<0?null:node.parent;if(!parent)return node;node=parent}let mode=overlays?0:IterMode.IgnoreOverlays;if(overlays)for(let scan=node,parent=scan.parent;parent;scan=parent,parent=scan.parent)scan instanceof TreeNode&&scan.index<0&&(null===(_a=parent.enter(pos,side,mode))||void 0===_a?void 0:_a.from)!=scan.from&&(node=parent);for(;;){let inner=node.enter(pos,side,mode);if(!inner)return node;node=inner}}class BaseNode{cursor(mode=0){return new TreeCursor(this,mode)}getChild(type,before=null,after=null){let r=getChildren(this,type,before,after);return r.length?r[0]:null}getChildren(type,before=null,after=null){return getChildren(this,type,before,after)}resolve(pos,side=0){return resolveNode(this,pos,side,!1)}resolveInner(pos,side=0){return resolveNode(this,pos,side,!0)}matchContext(context){return matchNodeContext(this.parent,context)}enterUnfinishedNodesBefore(pos){let scan=this.childBefore(pos),node=this;for(;scan;){let last=scan.lastChild;if(!last||last.to!=scan.to)break;last.type.isError&&last.from==last.to?(node=scan,scan=last.prevSibling):scan=last}return node}get node(){return this}get next(){return this.parent}}class TreeNode extends BaseNode{constructor(_tree,from,index,_parent){super(),this._tree=_tree,this.from=from,this.index=index,this._parent=_parent}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(i,dir,pos,side,mode=0){for(let parent=this;;){for(let{children,positions}=parent._tree,e=dir>0?children.length:-1;i!=e;i+=dir){let next=children[i],start=positions[i]+parent.from;if(checkSide(side,pos,start,start+next.length))if(next instanceof TreeBuffer){if(mode&IterMode.ExcludeBuffers)continue;let index=next.findChild(0,next.buffer.length,dir,pos-start,side);if(index>-1)return new BufferNode(new BufferContext(parent,next,i,start),null,index)}else if(mode&IterMode.IncludeAnonymous||!next.type.isAnonymous||hasChild(next)){let mounted;if(!(mode&IterMode.IgnoreMounts)&&(mounted=MountedTree.get(next))&&!mounted.overlay)return new TreeNode(mounted.tree,start,i,parent);let inner=new TreeNode(next,start,i,parent);return mode&IterMode.IncludeAnonymous||!inner.type.isAnonymous?inner:inner.nextChild(dir<0?next.children.length-1:0,dir,pos,side)}}if(mode&IterMode.IncludeAnonymous||!parent.type.isAnonymous)return null;if(i=parent.index>=0?parent.index+dir:dir<0?-1:parent._parent._tree.children.length,parent=parent._parent,!parent)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(pos){return this.nextChild(0,1,pos,2)}childBefore(pos){return this.nextChild(this._tree.children.length-1,-1,pos,-2)}enter(pos,side,mode=0){let mounted;if(!(mode&IterMode.IgnoreOverlays)&&(mounted=MountedTree.get(this._tree))&&mounted.overlay){let rPos=pos-this.from;for(let{from,to}of mounted.overlay)if((side>0?from<=rPos:from<rPos)&&(side<0?to>=rPos:to>rPos))return new TreeNode(mounted.tree,mounted.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,pos,side,mode)}nextSignificantParent(){let val=this;for(;val.type.isAnonymous&&val._parent;)val=val._parent;return val}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function getChildren(node,type,before,after){let cur=node.cursor(),result=[];if(!cur.firstChild())return result;if(null!=before)for(let found=!1;!found;)if(found=cur.type.is(before),!cur.nextSibling())return result;for(;;){if(null!=after&&cur.type.is(after))return result;if(cur.type.is(type)&&result.push(cur.node),!cur.nextSibling())return null==after?result:[]}}function matchNodeContext(node,context,i=context.length-1){for(let p=node;i>=0;p=p.parent){if(!p)return!1;if(!p.type.isAnonymous){if(context[i]&&context[i]!=p.name)return!1;i--}}return!0}class BufferContext{constructor(parent,buffer,index,start){this.parent=parent,this.buffer=buffer,this.index=index,this.start=start}}class BufferNode extends BaseNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(context,_parent,index){super(),this.context=context,this._parent=_parent,this.index=index,this.type=context.buffer.set.types[context.buffer.buffer[index]]}child(dir,pos,side){let{buffer}=this.context,index=buffer.findChild(this.index+4,buffer.buffer[this.index+3],dir,pos-this.context.start,side);return index<0?null:new BufferNode(this.context,this,index)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(pos){return this.child(1,pos,2)}childBefore(pos){return this.child(-1,pos,-2)}enter(pos,side,mode=0){if(mode&IterMode.ExcludeBuffers)return null;let{buffer}=this.context,index=buffer.findChild(this.index+4,buffer.buffer[this.index+3],side>0?1:-1,pos-this.context.start,side);return index<0?null:new BufferNode(this.context,this,index)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(dir){return this._parent?null:this.context.parent.nextChild(this.context.index+dir,dir,0,4)}get nextSibling(){let{buffer}=this.context,after=buffer.buffer[this.index+3];return after<(this._parent?buffer.buffer[this._parent.index+3]:buffer.buffer.length)?new BufferNode(this.context,this._parent,after):this.externalSibling(1)}get prevSibling(){let{buffer}=this.context,parentStart=this._parent?this._parent.index+4:0;return this.index==parentStart?this.externalSibling(-1):new BufferNode(this.context,this._parent,buffer.findChild(parentStart,this.index,-1,0,4))}get tree(){return null}toTree(){let children=[],positions=[],{buffer}=this.context,startI=this.index+4,endI=buffer.buffer[this.index+3];if(endI>startI){let from=buffer.buffer[this.index+1];children.push(buffer.slice(startI,endI,from)),positions.push(0)}return new Tree(this.type,children,positions,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function iterStack(heads){if(!heads.length)return null;let pick=0,picked=heads[0];for(let i=1;i<heads.length;i++){let node=heads[i];(node.from>picked.from||node.to<picked.to)&&(picked=node,pick=i)}let next=picked instanceof TreeNode&&picked.index<0?null:picked.parent,newHeads=heads.slice();return next?newHeads[pick]=next:newHeads.splice(pick,1),new StackIterator(newHeads,picked)}class StackIterator{constructor(heads,node){this.heads=heads,this.node=node}get next(){return iterStack(this.heads)}}class TreeCursor{get name(){return this.type.name}constructor(node,mode=0){if(this.mode=mode,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,node instanceof TreeNode)this.yieldNode(node);else{this._tree=node.context.parent,this.buffer=node.context;for(let n=node._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=node,this.yieldBuf(node.index)}}yieldNode(node){return!!node&&(this._tree=node,this.type=node.type,this.from=node.from,this.to=node.to,!0)}yieldBuf(index,type){this.index=index;let{start,buffer}=this.buffer;return this.type=type||buffer.set.types[buffer.buffer[index]],this.from=start+buffer.buffer[index+1],this.to=start+buffer.buffer[index+2],!0}yield(node){return!!node&&(node instanceof TreeNode?(this.buffer=null,this.yieldNode(node)):(this.buffer=node.context,this.yieldBuf(node.index,node.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(dir,pos,side){if(!this.buffer)return this.yield(this._tree.nextChild(dir<0?this._tree._tree.children.length-1:0,dir,pos,side,this.mode));let{buffer}=this.buffer,index=buffer.findChild(this.index+4,buffer.buffer[this.index+3],dir,pos-this.buffer.start,side);return!(index<0)&&(this.stack.push(this.index),this.yieldBuf(index))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(pos){return this.enterChild(1,pos,2)}childBefore(pos){return this.enterChild(-1,pos,-2)}enter(pos,side,mode=this.mode){return this.buffer?!(mode&IterMode.ExcludeBuffers)&&this.enterChild(1,pos,side):this.yield(this._tree.enter(pos,side,mode))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let parent=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(parent)}sibling(dir){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+dir,dir,0,4,this.mode));let{buffer}=this.buffer,d=this.stack.length-1;if(dir<0){let parentStart=d<0?0:this.stack[d]+4;if(this.index!=parentStart)return this.yieldBuf(buffer.findChild(parentStart,this.index,-1,0,4))}else{let after=buffer.buffer[this.index+3];if(after<(d<0?buffer.buffer.length:buffer.buffer[this.stack[d]+3]))return this.yieldBuf(after)}return d<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+dir,dir,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(dir){let index,parent,{buffer}=this;if(buffer){if(dir>0){if(this.index<buffer.buffer.buffer.length)return!1}else for(let i=0;i<this.index;i++)if(buffer.buffer.buffer[i+3]<this.index)return!1;({index,parent}=buffer)}else({index,_parent:parent}=this._tree);for(;parent;({index,_parent:parent}=parent))if(index>-1)for(let i=index+dir,e=dir<0?-1:parent._tree.children.length;i!=e;i+=dir){let child=parent._tree.children[i];if(this.mode&IterMode.IncludeAnonymous||child instanceof TreeBuffer||!child.type.isAnonymous||hasChild(child))return!1}return!0}move(dir,enter){if(enter&&this.enterChild(dir,0,4))return!0;for(;;){if(this.sibling(dir))return!0;if(this.atLastNode(dir)||!this.parent())return!1}}next(enter=!0){return this.move(1,enter)}prev(enter=!0){return this.move(-1,enter)}moveTo(pos,side=0){for(;(this.from==this.to||(side<1?this.from>=pos:this.from>pos)||(side>-1?this.to<=pos:this.to<pos))&&this.parent(););for(;this.enterChild(1,pos,side););return this}get node(){if(!this.buffer)return this._tree;let cache=this.bufferNode,result=null,depth=0;if(cache&&cache.context==this.buffer)scan:for(let index=this.index,d=this.stack.length;d>=0;){for(let c=cache;c;c=c._parent)if(c.index==index){if(index==this.index)return c;result=c,depth=d+1;break scan}index=this.stack[--d]}for(let i=depth;i<this.stack.length;i++)result=new BufferNode(this.buffer,result,this.stack[i]);return this.bufferNode=new BufferNode(this.buffer,result,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(enter,leave){for(let depth=0;;){let mustLeave=!1;if(this.type.isAnonymous||!1!==enter(this)){if(this.firstChild()){depth++;continue}this.type.isAnonymous||(mustLeave=!0)}for(;;){if(mustLeave&&leave&&leave(this),mustLeave=this.type.isAnonymous,!depth)return;if(this.nextSibling())break;this.parent(),depth--,mustLeave=!0}}}matchContext(context){if(!this.buffer)return matchNodeContext(this.node.parent,context);let{buffer}=this.buffer,{types}=buffer.set;for(let i=context.length-1,d=this.stack.length-1;i>=0;d--){if(d<0)return matchNodeContext(this._tree,context,i);let type=types[buffer.buffer[this.stack[d]]];if(!type.isAnonymous){if(context[i]&&context[i]!=type.name)return!1;i--}}return!0}}function hasChild(tree){return tree.children.some(ch=>ch instanceof TreeBuffer||!ch.type.isAnonymous||hasChild(ch))}const nodeSizeCache=new WeakMap;function nodeSize(balanceType,node){if(!balanceType.isAnonymous||node instanceof TreeBuffer||node.type!=balanceType)return 1;let size=nodeSizeCache.get(node);if(null==size){size=1;for(let child of node.children){if(child.type!=balanceType||!(child instanceof Tree)){size=1;break}size+=nodeSize(balanceType,child)}nodeSizeCache.set(node,size)}return size}function balanceRange(balanceType,children,positions,from,to,start,length,mkTop,mkTree){let total=0;for(let i=from;i<to;i++)total+=nodeSize(balanceType,children[i]);let maxChild=Math.ceil(1.5*total/8),localChildren=[],localPositions=[];return function divide(children,positions,from,to,offset){for(let i=from;i<to;){let groupFrom=i,groupStart=positions[i],groupSize=nodeSize(balanceType,children[i]);for(i++;i<to;i++){let nextSize=nodeSize(balanceType,children[i]);if(groupSize+nextSize>=maxChild)break;groupSize+=nextSize}if(i==groupFrom+1){if(groupSize>maxChild){let only=children[groupFrom];divide(only.children,only.positions,0,only.children.length,positions[groupFrom]+offset);continue}localChildren.push(children[groupFrom])}else{let length=positions[i-1]+children[i-1].length-groupStart;localChildren.push(balanceRange(balanceType,children,positions,groupFrom,i,groupStart,length,null,mkTree))}localPositions.push(groupStart+offset-start)}}(children,positions,from,to,0),(mkTop||mkTree)(localChildren,localPositions,length)}class NodeWeakMap{constructor(){this.map=new WeakMap}setBuffer(buffer,index,value){let inner=this.map.get(buffer);inner||this.map.set(buffer,inner=new Map),inner.set(index,value)}getBuffer(buffer,index){let inner=this.map.get(buffer);return inner&&inner.get(index)}set(node,value){node instanceof BufferNode?this.setBuffer(node.context.buffer,node.index,value):node instanceof TreeNode&&this.map.set(node.tree,value)}get(node){return node instanceof BufferNode?this.getBuffer(node.context.buffer,node.index):node instanceof TreeNode?this.map.get(node.tree):void 0}cursorSet(cursor,value){cursor.buffer?this.setBuffer(cursor.buffer.buffer,cursor.index,value):this.map.set(cursor.tree,value)}cursorGet(cursor){return cursor.buffer?this.getBuffer(cursor.buffer.buffer,cursor.index):this.map.get(cursor.tree)}}class TreeFragment{constructor(from,to,tree,offset,openStart=!1,openEnd=!1){this.from=from,this.to=to,this.tree=tree,this.offset=offset,this.open=(openStart?1:0)|(openEnd?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(tree,fragments=[],partial=!1){let result=[new TreeFragment(0,tree.length,tree,0,!1,partial)];for(let f of fragments)f.to>tree.length&&result.push(f);return result}static applyChanges(fragments,changes,minGap=128){if(!changes.length)return fragments;let result=[],fI=1,nextF=fragments.length?fragments[0]:null;for(let cI=0,pos=0,off=0;;cI++){let nextC=cI<changes.length?changes[cI]:null,nextPos=nextC?nextC.fromA:1e9;if(nextPos-pos>=minGap)for(;nextF&&nextF.from<nextPos;){let cut=nextF;if(pos>=cut.from||nextPos<=cut.to||off){let fFrom=Math.max(cut.from,pos)-off,fTo=Math.min(cut.to,nextPos)-off;cut=fFrom>=fTo?null:new TreeFragment(fFrom,fTo,cut.tree,cut.offset+off,cI>0,!!nextC)}if(cut&&result.push(cut),nextF.to>nextPos)break;nextF=fI<fragments.length?fragments[fI++]:null}if(!nextC)break;pos=nextC.toA,off=nextC.toA-nextC.toB}return result}}class dist_Parser{startParse(input,fragments,ranges){return"string"==typeof input&&(input=new StringInput(input)),ranges=ranges?ranges.length?ranges.map(r=>new dist_Range(r.from,r.to)):[new dist_Range(0,0)]:[new dist_Range(0,input.length)],this.createParse(input,fragments||[],ranges)}parse(input,fragments,ranges){let parse=this.startParse(input,fragments,ranges);for(;;){let done=parse.advance();if(done)return done}}}class StringInput{constructor(string){this.string=string}get length(){return this.string.length}chunk(from){return this.string.slice(from)}get lineChunks(){return!1}read(from,to){return this.string.slice(from,to)}}class InnerParse{constructor(parser,parse,overlay,target,from){this.parser=parser,this.parse=parse,this.overlay=overlay,this.target=target,this.from=from}}function checkRanges(ranges){if(!ranges.length||ranges.some(r=>r.from>=r.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(ranges))}class ActiveOverlay{constructor(parser,predicate,mounts,index,start,target,prev){this.parser=parser,this.predicate=predicate,this.mounts=mounts,this.index=index,this.start=start,this.target=target,this.prev=prev,this.depth=0,this.ranges=[]}}const stoppedInner=new NodeProp({perNode:!0});class MixedParse{constructor(base,nest,input,fragments,ranges){this.nest=nest,this.input=input,this.fragments=fragments,this.ranges=ranges,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=base}advance(){if(this.baseParse){let done=this.baseParse.advance();if(!done)return null;if(this.baseParse=null,this.baseTree=done,this.startInner(),null!=this.stoppedAt)for(let inner of this.inner)inner.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let result=this.baseTree;return null!=this.stoppedAt&&(result=new Tree(result.type,result.children,result.positions,result.length,result.propValues.concat([[stoppedInner,this.stoppedAt]]))),result}let inner=this.inner[this.innerDone],done=inner.parse.advance();if(done){this.innerDone++;let props=Object.assign(Object.create(null),inner.target.props);props[NodeProp.mounted.id]=new MountedTree(done,inner.overlay,inner.parser),inner.target.props=props}return null}get parsedPos(){if(this.baseParse)return 0;let pos=this.input.length;for(let i=this.innerDone;i<this.inner.length;i++)this.inner[i].from<pos&&(pos=Math.min(pos,this.inner[i].parse.parsedPos));return pos}stopAt(pos){if(this.stoppedAt=pos,this.baseParse)this.baseParse.stopAt(pos);else for(let i=this.innerDone;i<this.inner.length;i++)this.inner[i].parse.stopAt(pos)}startInner(){let fragmentCursor=new FragmentCursor(this.fragments),overlay=null,covered=null,cursor=new TreeCursor(new TreeNode(this.baseTree,this.ranges[0].from,0,null),IterMode.IncludeAnonymous|IterMode.IgnoreMounts);scan:for(let nest,isCovered;;){let range,enter=!0;if(null!=this.stoppedAt&&cursor.from>=this.stoppedAt)enter=!1;else if(fragmentCursor.hasNode(cursor)){if(overlay){let match=overlay.mounts.find(m=>m.frag.from<=cursor.from&&m.frag.to>=cursor.to&&m.mount.overlay);if(match)for(let r of match.mount.overlay){let from=r.from+match.pos,to=r.to+match.pos;from>=cursor.from&&to<=cursor.to&&!overlay.ranges.some(r=>r.from<to&&r.to>from)&&overlay.ranges.push({from,to})}}enter=!1}else if(covered&&(isCovered=checkCover(covered.ranges,cursor.from,cursor.to)))enter=2!=isCovered;else if(!cursor.type.isAnonymous&&(nest=this.nest(cursor,this.input))&&(cursor.from<cursor.to||!nest.overlay)){cursor.tree||materialize(cursor);let oldMounts=fragmentCursor.findMounts(cursor.from,nest.parser);if("function"==typeof nest.overlay)overlay=new ActiveOverlay(nest.parser,nest.overlay,oldMounts,this.inner.length,cursor.from,cursor.tree,overlay);else{let ranges=punchRanges(this.ranges,nest.overlay||(cursor.from<cursor.to?[new dist_Range(cursor.from,cursor.to)]:[]));ranges.length&&checkRanges(ranges),!ranges.length&&nest.overlay||this.inner.push(new InnerParse(nest.parser,ranges.length?nest.parser.startParse(this.input,enterFragments(oldMounts,ranges),ranges):nest.parser.startParse(""),nest.overlay?nest.overlay.map(r=>new dist_Range(r.from-cursor.from,r.to-cursor.from)):null,cursor.tree,ranges.length?ranges[0].from:cursor.from)),nest.overlay?ranges.length&&(covered={ranges,depth:0,prev:covered}):enter=!1}}else if(overlay&&(range=overlay.predicate(cursor))&&(!0===range&&(range=new dist_Range(cursor.from,cursor.to)),range.from<range.to)){let last=overlay.ranges.length-1;last>=0&&overlay.ranges[last].to==range.from?overlay.ranges[last]={from:overlay.ranges[last].from,to:range.to}:overlay.ranges.push(range)}if(enter&&cursor.firstChild())overlay&&overlay.depth++,covered&&covered.depth++;else for(;!cursor.nextSibling();){if(!cursor.parent())break scan;if(overlay&&! --overlay.depth){let ranges=punchRanges(this.ranges,overlay.ranges);ranges.length&&(checkRanges(ranges),this.inner.splice(overlay.index,0,new InnerParse(overlay.parser,overlay.parser.startParse(this.input,enterFragments(overlay.mounts,ranges),ranges),overlay.ranges.map(r=>new dist_Range(r.from-overlay.start,r.to-overlay.start)),overlay.target,ranges[0].from))),overlay=overlay.prev}covered&&! --covered.depth&&(covered=covered.prev)}}}}function checkCover(covered,from,to){for(let range of covered){if(range.from>=to)break;if(range.to>from)return range.from<=from&&range.to>=to?2:1}return 0}function sliceBuf(buf,startI,endI,nodes,positions,off){if(startI<endI){let from=buf.buffer[startI+1];nodes.push(buf.slice(startI,endI,from)),positions.push(from-off)}}function materialize(cursor){let{node}=cursor,stack=[],buffer=node.context.buffer;do{stack.push(cursor.index),cursor.parent()}while(!cursor.tree);let base=cursor.tree,i=base.children.indexOf(buffer),buf=base.children[i],b=buf.buffer,newStack=[i];base.children[i]=function split(startI,endI,type,innerOffset,length,stackPos){let targetI=stack[stackPos],children=[],positions=[];sliceBuf(buf,startI,targetI,children,positions,innerOffset);let from=b[targetI+1],to=b[targetI+2];newStack.push(children.length);let child=stackPos?split(targetI+4,b[targetI+3],buf.set.types[b[targetI]],from,to-from,stackPos-1):node.toTree();return children.push(child),positions.push(from-innerOffset),sliceBuf(buf,b[targetI+3],endI,children,positions,innerOffset),new Tree(type,children,positions,length)}(0,b.length,NodeType.none,0,buf.length,stack.length-1);for(let index of newStack){let tree=cursor.tree.children[index],pos=cursor.tree.positions[index];cursor.yield(new TreeNode(tree,pos+cursor.from,index,cursor._tree))}}class StructureCursor{constructor(root,offset){this.offset=offset,this.done=!1,this.cursor=root.cursor(IterMode.IncludeAnonymous|IterMode.IgnoreMounts)}moveTo(pos){let{cursor}=this,p=pos-this.offset;for(;!this.done&&cursor.from<p;)cursor.to>=pos&&cursor.enter(p,1,IterMode.IgnoreOverlays|IterMode.ExcludeBuffers)||cursor.next(!1)||(this.done=!0)}hasNode(cursor){if(this.moveTo(cursor.from),!this.done&&this.cursor.from+this.offset==cursor.from&&this.cursor.tree)for(let tree=this.cursor.tree;;){if(tree==cursor.tree)return!0;if(!(tree.children.length&&0==tree.positions[0]&&tree.children[0]instanceof Tree))break;tree=tree.children[0]}return!1}}class FragmentCursor{constructor(fragments){var _a;if(this.fragments=fragments,this.curTo=0,this.fragI=0,fragments.length){let first=this.curFrag=fragments[0];this.curTo=null!==(_a=first.tree.prop(stoppedInner))&&void 0!==_a?_a:first.to,this.inner=new StructureCursor(first.tree,-first.offset)}else this.curFrag=this.inner=null}hasNode(node){for(;this.curFrag&&node.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=node.from&&this.curTo>=node.to&&this.inner.hasNode(node)}nextFrag(){var _a;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let frag=this.curFrag=this.fragments[this.fragI];this.curTo=null!==(_a=frag.tree.prop(stoppedInner))&&void 0!==_a?_a:frag.to,this.inner=new StructureCursor(frag.tree,-frag.offset)}}findMounts(pos,parser){var _a;let result=[];if(this.inner){this.inner.cursor.moveTo(pos,1);for(let pos=this.inner.cursor.node;pos;pos=pos.parent){let mount=null===(_a=pos.tree)||void 0===_a?void 0:_a.prop(NodeProp.mounted);if(mount&&mount.parser==parser)for(let i=this.fragI;i<this.fragments.length;i++){let frag=this.fragments[i];if(frag.from>=pos.to)break;frag.tree==this.curFrag.tree&&result.push({frag,pos:pos.from-frag.offset,mount})}}}return result}}function punchRanges(outer,ranges){let copy=null,current=ranges;for(let i=1,j=0;i<outer.length;i++){let gapFrom=outer[i-1].to,gapTo=outer[i].from;for(;j<current.length;j++){let r=current[j];if(r.from>=gapTo)break;r.to<=gapFrom||(copy||(current=copy=ranges.slice()),r.from<gapFrom?(copy[j]=new dist_Range(r.from,gapFrom),r.to>gapTo&&copy.splice(j+1,0,new dist_Range(gapTo,r.to))):r.to>gapTo?copy[j--]=new dist_Range(gapTo,r.to):copy.splice(j--,1))}}return current}function findCoverChanges(a,b,from,to){let iA=0,iB=0,inA=!1,inB=!1,pos=-1e9,result=[];for(;;){let nextA=iA==a.length?1e9:inA?a[iA].to:a[iA].from,nextB=iB==b.length?1e9:inB?b[iB].to:b[iB].from;if(inA!=inB){let start=Math.max(pos,from),end=Math.min(nextA,nextB,to);start<end&&result.push(new dist_Range(start,end))}if(pos=Math.min(nextA,nextB),1e9==pos)break;nextA==pos&&(inA?(inA=!1,iA++):inA=!0),nextB==pos&&(inB?(inB=!1,iB++):inB=!0)}return result}function enterFragments(mounts,ranges){let result=[];for(let{pos,mount,frag}of mounts){let startPos=pos+(mount.overlay?mount.overlay[0].from:0),endPos=startPos+mount.tree.length,from=Math.max(frag.from,startPos),to=Math.min(frag.to,endPos);if(mount.overlay){let changes=findCoverChanges(ranges,mount.overlay.map(r=>new dist_Range(r.from+pos,r.to+pos)),from,to);for(let i=0,pos=from;;i++){let last=i==changes.length,end=last?to:changes[i].from;if(end>pos&&result.push(new TreeFragment(pos,end,mount.tree,-startPos,frag.from>=pos||frag.openStart,frag.to<=end||frag.openEnd)),last)break;pos=changes[i].to}}else result.push(new TreeFragment(from,to,mount.tree,-startPos,frag.from>=startPos||frag.openStart,frag.to<=endPos||frag.openEnd))}return result}let nextTagID=0;class Tag{constructor(name,set,base,modified){this.name=name,this.set=set,this.base=base,this.modified=modified,this.id=nextTagID++}toString(){let{name}=this;for(let mod of this.modified)mod.name&&(name=`${mod.name}(${name})`);return name}static define(nameOrParent,parent){let name="string"==typeof nameOrParent?nameOrParent:"?";if(nameOrParent instanceof Tag&&(parent=nameOrParent),null==parent?void 0:parent.base)throw new Error("Can not derive from a modified tag");let tag=new Tag(name,[],null,[]);if(tag.set.push(tag),parent)for(let t of parent.set)tag.set.push(t);return tag}static defineModifier(name){let mod=new Modifier(name);return tag=>tag.modified.indexOf(mod)>-1?tag:Modifier.get(tag.base||tag,tag.modified.concat(mod).sort((a,b)=>a.id-b.id))}}let nextModifierID=0;class Modifier{constructor(name){this.name=name,this.instances=[],this.id=nextModifierID++}static get(base,mods){if(!mods.length)return base;let exists=mods[0].instances.find(t=>t.base==base&&function dist_sameArray(a,b){return a.length==b.length&&a.every((x,i)=>x==b[i])}(mods,t.modified));if(exists)return exists;let set=[],tag=new Tag(base.name,set,base,mods);for(let m of mods)m.instances.push(tag);let configs=function powerSet(array){let sets=[[]];for(let i=0;i<array.length;i++)for(let j=0,e=sets.length;j<e;j++)sets.push(sets[j].concat(array[i]));return sets.sort((a,b)=>b.length-a.length)}(mods);for(let parent of base.set)if(!parent.modified.length)for(let config of configs)set.push(Modifier.get(parent,config));return tag}}function styleTags(spec){let byName=Object.create(null);for(let prop in spec){let tags=spec[prop];Array.isArray(tags)||(tags=[tags]);for(let part of prop.split(" "))if(part){let pieces=[],mode=2,rest=part;for(let pos=0;;){if("..."==rest&&pos>0&&pos+3==part.length){mode=1;break}let m=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(rest);if(!m)throw new RangeError("Invalid path: "+part);if(pieces.push("*"==m[0]?"":'"'==m[0][0]?JSON.parse(m[0]):m[0]),pos+=m[0].length,pos==part.length)break;let next=part[pos++];if(pos==part.length&&"!"==next){mode=0;break}if("/"!=next)throw new RangeError("Invalid path: "+part);rest=part.slice(pos)}let last=pieces.length-1,inner=pieces[last];if(!inner)throw new RangeError("Invalid path: "+part);let rule=new Rule(tags,mode,last>0?pieces.slice(0,last):null);byName[inner]=rule.sort(byName[inner])}}return ruleNodeProp.add(byName)}const ruleNodeProp=new NodeProp;class Rule{constructor(tags,mode,context,next){this.tags=tags,this.mode=mode,this.context=context,this.next=next}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(other){return!other||other.depth<this.depth?(this.next=other,this):(other.next=this.sort(other.next),other)}get depth(){return this.context?this.context.length:0}}function tagHighlighter(tags,options){let map=Object.create(null);for(let style of tags)if(Array.isArray(style.tag))for(let tag of style.tag)map[tag.id]=style.class;else map[style.tag.id]=style.class;let{scope,all=null}=options||{};return{style:tags=>{let cls=all;for(let tag of tags)for(let sub of tag.set){let tagClass=map[sub.id];if(tagClass){cls=cls?cls+" "+tagClass:tagClass;break}}return cls},scope}}function highlightTree(tree,highlighter,putStyle,from=0,to=tree.length){let builder=new HighlightBuilder(from,Array.isArray(highlighter)?highlighter:[highlighter],putStyle);builder.highlightRange(tree.cursor(),from,to,"",builder.highlighters),builder.flush(to)}Rule.empty=new Rule([],2,null);class HighlightBuilder{constructor(at,highlighters,span){this.at=at,this.highlighters=highlighters,this.span=span,this.class=""}startSpan(at,cls){cls!=this.class&&(this.flush(at),at>this.at&&(this.at=at),this.class=cls)}flush(to){to>this.at&&this.class&&this.span(this.at,to,this.class)}highlightRange(cursor,from,to,inheritedClass,highlighters){let{type,from:start,to:end}=cursor;if(start>=to||end<=from)return;type.isTop&&(highlighters=this.highlighters.filter(h=>!h.scope||h.scope(type)));let cls=inheritedClass,rule=function getStyleTags(node){let rule=node.type.prop(ruleNodeProp);for(;rule&&rule.context&&!node.matchContext(rule.context);)rule=rule.next;return rule||null}(cursor)||Rule.empty,tagCls=function highlightTags(highlighters,tags){let result=null;for(let highlighter of highlighters){let value=highlighter.style(tags);value&&(result=result?result+" "+value:value)}return result}(highlighters,rule.tags);if(tagCls&&(cls&&(cls+=" "),cls+=tagCls,1==rule.mode&&(inheritedClass+=(inheritedClass?" ":"")+tagCls)),this.startSpan(Math.max(from,start),cls),rule.opaque)return;let mounted=cursor.tree&&cursor.tree.prop(NodeProp.mounted);if(mounted&&mounted.overlay){let inner=cursor.node.enter(mounted.overlay[0].from+start,1),innerHighlighters=this.highlighters.filter(h=>!h.scope||h.scope(mounted.tree.type)),hasChild=cursor.firstChild();for(let i=0,pos=start;;i++){let next=i<mounted.overlay.length?mounted.overlay[i]:null,nextPos=next?next.from+start:end,rangeFrom=Math.max(from,pos),rangeTo=Math.min(to,nextPos);if(rangeFrom<rangeTo&&hasChild)for(;cursor.from<rangeTo&&(this.highlightRange(cursor,rangeFrom,rangeTo,inheritedClass,highlighters),this.startSpan(Math.min(rangeTo,cursor.to),cls),!(cursor.to>=nextPos)&&cursor.nextSibling()););if(!next||nextPos>to)break;pos=next.to+start,pos>from&&(this.highlightRange(inner.cursor(),Math.max(from,next.from+start),Math.min(to,pos),"",innerHighlighters),this.startSpan(Math.min(to,pos),cls))}hasChild&&cursor.parent()}else if(cursor.firstChild()){mounted&&(inheritedClass="");do{if(!(cursor.to<=from)){if(cursor.from>=to)break;this.highlightRange(cursor,from,to,inheritedClass,highlighters),this.startSpan(Math.min(to,cursor.to),cls)}}while(cursor.nextSibling());cursor.parent()}}}const t=Tag.define,comment=t(),dist_name=t(),typeName=t(dist_name),propertyName=t(dist_name),literal=t(),string=t(literal),number=t(literal),content=t(),heading=t(content),keyword=t(),operator=t(),punctuation=t(),bracket=t(punctuation),meta=t(),tags={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name:dist_name,variableName:t(dist_name),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(dist_name),labelName:t(dist_name),namespace:t(dist_name),macroName:t(dist_name),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation,separator:t(punctuation),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier("definition"),constant:Tag.defineModifier("constant"),function:Tag.defineModifier("function"),standard:Tag.defineModifier("standard"),local:Tag.defineModifier("local"),special:Tag.defineModifier("special")};for(let name in tags){let val=tags[name];val instanceof Tag&&(val.name=name)}tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);var dist_a;const languageDataProp=new NodeProp;function defineLanguageFacet(baseData){return Facet.define({combine:baseData?values=>values.concat(baseData):void 0})}const sublanguageProp=new NodeProp;class Language{constructor(data,parser,extraExtensions=[],name=""){this.data=data,this.name=name,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return dist_syntaxTree(this)}}),this.parser=parser,this.extension=[language.of(this),EditorState.languageData.of((state,pos,side)=>{let top=topNodeAt(state,pos,side),data=top.type.prop(languageDataProp);if(!data)return[];let base=state.facet(data),sub=top.type.prop(sublanguageProp);if(sub){let innerNode=top.resolve(pos-top.from,side);for(let sublang of sub)if(sublang.test(innerNode,state)){let data=state.facet(sublang.facet);return"replace"==sublang.type?data:data.concat(base)}}return base})].concat(extraExtensions)}isActiveAt(state,pos,side=-1){return topNodeAt(state,pos,side).type.prop(languageDataProp)==this.data}findRegions(state){let lang=state.facet(language);if((null==lang?void 0:lang.data)==this.data)return[{from:0,to:state.doc.length}];if(!lang||!lang.allowsNesting)return[];let result=[],explore=(tree,from)=>{if(tree.prop(languageDataProp)==this.data)return void result.push({from,to:from+tree.length});let mount=tree.prop(NodeProp.mounted);if(mount){if(mount.tree.prop(languageDataProp)==this.data){if(mount.overlay)for(let r of mount.overlay)result.push({from:r.from+from,to:r.to+from});else result.push({from,to:from+tree.length});return}if(mount.overlay){let size=result.length;if(explore(mount.tree,mount.overlay[0].from+from),result.length>size)return}}for(let i=0;i<tree.children.length;i++){let ch=tree.children[i];ch instanceof Tree&&explore(ch,tree.positions[i]+from)}};return explore(dist_syntaxTree(state),0),result}get allowsNesting(){return!0}}function topNodeAt(state,pos,side){let topLang=state.facet(language),tree=dist_syntaxTree(state).topNode;if(!topLang||topLang.allowsNesting)for(let node=tree;node;node=node.enter(pos,side,IterMode.ExcludeBuffers))node.type.isTop&&(tree=node);return tree}Language.setState=dist_StateEffect.define();class LRLanguage extends Language{constructor(data,parser,name){super(data,parser,[],name),this.parser=parser}static define(spec){let data=defineLanguageFacet(spec.languageData);return new LRLanguage(data,spec.parser.configure({props:[languageDataProp.add(type=>type.isTop?data:void 0)]}),spec.name)}configure(options,name){return new LRLanguage(this.data,this.parser.configure(options),name||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function dist_syntaxTree(state){let field=state.field(Language.state,!1);return field?field.tree:Tree.empty}class DocInput{constructor(doc){this.doc=doc,this.cursorPos=0,this.string="",this.cursor=doc.iter()}get length(){return this.doc.length}syncTo(pos){return this.string=this.cursor.next(pos-this.cursorPos).value,this.cursorPos=pos+this.string.length,this.cursorPos-this.string.length}chunk(pos){return this.syncTo(pos),this.string}get lineChunks(){return!0}read(from,to){let stringStart=this.cursorPos-this.string.length;return from<stringStart||to>=this.cursorPos?this.doc.sliceString(from,to):this.string.slice(from-stringStart,to-stringStart)}}let currentContext=null;class ParseContext{constructor(parser,state,fragments=[],tree,treeLen,viewport,skipped,scheduleOn){this.parser=parser,this.state=state,this.fragments=fragments,this.tree=tree,this.treeLen=treeLen,this.viewport=viewport,this.skipped=skipped,this.scheduleOn=scheduleOn,this.parse=null,this.tempSkipped=[]}static create(parser,state,viewport){return new ParseContext(parser,state,[],Tree.empty,0,viewport,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(until,upto){return null!=upto&&upto>=this.state.doc.length&&(upto=void 0),this.tree!=Tree.empty&&this.isDone(null!=upto?upto:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var _a;if("number"==typeof until){let endTime=Date.now()+until;until=()=>Date.now()>endTime}for(this.parse||(this.parse=this.startParse()),null!=upto&&(null==this.parse.stoppedAt||this.parse.stoppedAt>upto)&&upto<this.state.doc.length&&this.parse.stopAt(upto);;){let done=this.parse.advance();if(done){if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(done,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(_a=this.parse.stoppedAt)&&void 0!==_a?_a:this.state.doc.length,this.tree=done,this.parse=null,!(this.treeLen<(null!=upto?upto:this.state.doc.length)))return!0;this.parse=this.startParse()}if(until())return!1}})}takeTree(){let pos,tree;this.parse&&(pos=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>pos)&&this.parse.stopAt(pos),this.withContext(()=>{for(;!(tree=this.parse.advance()););}),this.treeLen=pos,this.tree=tree,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(f){let prev=currentContext;currentContext=this;try{return f()}finally{currentContext=prev}}withoutTempSkipped(fragments){for(let r;r=this.tempSkipped.pop();)fragments=cutFragments(fragments,r.from,r.to);return fragments}changes(changes,newState){let{fragments,tree,treeLen,viewport,skipped}=this;if(this.takeTree(),!changes.empty){let ranges=[];if(changes.iterChangedRanges((fromA,toA,fromB,toB)=>ranges.push({fromA,toA,fromB,toB})),fragments=TreeFragment.applyChanges(fragments,ranges),tree=Tree.empty,treeLen=0,viewport={from:changes.mapPos(viewport.from,-1),to:changes.mapPos(viewport.to,1)},this.skipped.length){skipped=[];for(let r of this.skipped){let from=changes.mapPos(r.from,1),to=changes.mapPos(r.to,-1);from<to&&skipped.push({from,to})}}}return new ParseContext(this.parser,newState,fragments,tree,treeLen,viewport,skipped,this.scheduleOn)}updateViewport(viewport){if(this.viewport.from==viewport.from&&this.viewport.to==viewport.to)return!1;this.viewport=viewport;let startLen=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from,to}=this.skipped[i];from<viewport.to&&to>viewport.from&&(this.fragments=cutFragments(this.fragments,from,to),this.skipped.splice(i--,1))}return!(this.skipped.length>=startLen)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(from,to){this.skipped.push({from,to})}static getSkippingParser(until){return new class extends dist_Parser{createParse(input,fragments,ranges){let from=ranges[0].from,to=ranges[ranges.length-1].to;return{parsedPos:from,advance(){let cx=currentContext;if(cx){for(let r of ranges)cx.tempSkipped.push(r);until&&(cx.scheduleOn=cx.scheduleOn?Promise.all([cx.scheduleOn,until]):until)}return this.parsedPos=to,new Tree(NodeType.none,[],[],to-from)},stoppedAt:null,stopAt(){}}}}}isDone(upto){upto=Math.min(upto,this.state.doc.length);let frags=this.fragments;return this.treeLen>=upto&&frags.length&&0==frags[0].from&&frags[0].to>=upto}static get(){return currentContext}}function cutFragments(fragments,from,to){return TreeFragment.applyChanges(fragments,[{fromA:from,toA:to,fromB:from,toB:to}])}class LanguageState{constructor(context){this.context=context,this.tree=context.tree}apply(tr){if(!tr.docChanged&&this.tree==this.context.tree)return this;let newCx=this.context.changes(tr.changes,tr.state),upto=this.context.treeLen==tr.startState.doc.length?void 0:Math.max(tr.changes.mapPos(this.context.treeLen),newCx.viewport.to);return newCx.work(20,upto)||newCx.takeTree(),new LanguageState(newCx)}static init(state){let vpTo=Math.min(3e3,state.doc.length),parseState=ParseContext.create(state.facet(language).parser,state,{from:0,to:vpTo});return parseState.work(20,vpTo)||parseState.takeTree(),new LanguageState(parseState)}}Language.state=dist_StateField.define({create:LanguageState.init,update(value,tr){for(let e of tr.effects)if(e.is(Language.setState))return e.value;return tr.startState.facet(language)!=tr.state.facet(language)?LanguageState.init(tr.state):value.apply(tr)}});let requestIdle=callback=>{let timeout=setTimeout(()=>callback(),500);return()=>clearTimeout(timeout)};"undefined"!=typeof requestIdleCallback&&(requestIdle=callback=>{let idle=-1,timeout=setTimeout(()=>{idle=requestIdleCallback(callback,{timeout:400})},100);return()=>idle<0?clearTimeout(timeout):cancelIdleCallback(idle)});const isInputPending="undefined"!=typeof navigator&&(null===(dist_a=navigator.scheduling)||void 0===dist_a?void 0:dist_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class ParseWorker{constructor(view){this.view=view,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(update){let cx=this.view.state.field(Language.state).context;(cx.updateViewport(update.view.viewport)||this.view.viewport.to>cx.treeLen)&&this.scheduleWork(),(update.docChanged||update.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(cx)}scheduleWork(){if(this.working)return;let{state}=this.view,field=state.field(Language.state);field.tree==field.context.tree&&field.context.isDone(state.doc.length)||(this.working=requestIdle(this.work))}work(deadline){this.working=null;let now=Date.now();if(this.chunkEnd<now&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=now+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state,viewport:{to:vpTo}}=this.view,field=state.field(Language.state);if(field.tree==field.context.tree&&field.context.isDone(vpTo+1e5))return;let endTime=Date.now()+Math.min(this.chunkBudget,100,deadline&&!isInputPending?Math.max(25,deadline.timeRemaining()-5):1e9),viewportFirst=field.context.treeLen<vpTo&&state.doc.length>vpTo+1e3,done=field.context.work(()=>isInputPending&&isInputPending()||Date.now()>endTime,vpTo+(viewportFirst?0:1e5));this.chunkBudget-=Date.now()-now,(done||this.chunkBudget<=0)&&(field.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(field.context))})),this.chunkBudget>0&&(!done||viewportFirst)&&this.scheduleWork(),this.checkAsyncSchedule(field.context)}checkAsyncSchedule(cx){cx.scheduleOn&&(this.workScheduled++,cx.scheduleOn.then(()=>this.scheduleWork()).catch(err=>logException(this.view.state,err)).then(()=>this.workScheduled--),cx.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine:languages=>languages.length?languages[0]:null,enables:language=>[Language.state,parseWorker,EditorView.contentAttributes.compute([language],state=>{let lang=state.facet(language);return lang&&lang.name?{"data-language":lang.name}:{}})]});class LanguageSupport{constructor(language,support=[]){this.language=language,this.support=support,this.extension=[language,support]}}const indentService=Facet.define(),indentUnit=Facet.define({combine:values=>{if(!values.length)return"  ";let unit=values[0];if(!unit||/\S/.test(unit)||Array.from(unit).some(e=>e!=unit[0]))throw new Error("Invalid indent unit: "+JSON.stringify(values[0]));return unit}});function getIndentUnit(state){let unit=state.facet(indentUnit);return 9==unit.charCodeAt(0)?state.tabSize*unit.length:unit.length}function indentString(state,cols){let result="",ts=state.tabSize,ch=state.facet(indentUnit)[0];if("\t"==ch){for(;cols>=ts;)result+="\t",cols-=ts;ch=" "}for(let i=0;i<cols;i++)result+=ch;return result}function getIndentation(context,pos){context instanceof EditorState&&(context=new IndentContext(context));for(let service of context.state.facet(indentService)){let result=service(context,pos);if(void 0!==result)return result}let tree=dist_syntaxTree(context.state);return tree.length>=pos?function syntaxIndentation(cx,ast,pos){let stack=ast.resolveStack(pos),inner=ast.resolveInner(pos,-1).resolve(pos,0).enterUnfinishedNodesBefore(pos);if(inner!=stack.node){let add=[];for(let cur=inner;cur&&!(cur.from<stack.node.from||cur.to>stack.node.to||cur.from==stack.node.from&&cur.type==stack.node.type);cur=cur.parent)add.push(cur);for(let i=add.length-1;i>=0;i--)stack={node:add[i],next:stack}}return indentFor(stack,cx,pos)}(context,tree,pos):null}class IndentContext{constructor(state,options={}){this.state=state,this.options=options,this.unit=getIndentUnit(state)}lineAt(pos,bias=1){let line=this.state.doc.lineAt(pos),{simulateBreak,simulateDoubleBreak}=this.options;return null!=simulateBreak&&simulateBreak>=line.from&&simulateBreak<=line.to?simulateDoubleBreak&&simulateBreak==pos?{text:"",from:pos}:(bias<0?simulateBreak<pos:simulateBreak<=pos)?{text:line.text.slice(simulateBreak-line.from),from:simulateBreak}:{text:line.text.slice(0,simulateBreak-line.from),from:line.from}:line}textAfterPos(pos,bias=1){if(this.options.simulateDoubleBreak&&pos==this.options.simulateBreak)return"";let{text,from}=this.lineAt(pos,bias);return text.slice(pos-from,Math.min(text.length,pos+100-from))}column(pos,bias=1){let{text,from}=this.lineAt(pos,bias),result=this.countColumn(text,pos-from),override=this.options.overrideIndentation?this.options.overrideIndentation(from):-1;return override>-1&&(result+=override-this.countColumn(text,text.search(/\S|$/))),result}countColumn(line,pos=line.length){return countColumn(line,this.state.tabSize,pos)}lineIndent(pos,bias=1){let{text,from}=this.lineAt(pos,bias),override=this.options.overrideIndentation;if(override){let overriden=override(from);if(overriden>-1)return overriden}return this.countColumn(text,text.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function indentFor(stack,cx,pos){for(let cur=stack;cur;cur=cur.next){let strategy=indentStrategy(cur.node);if(strategy)return strategy(TreeIndentContext.create(cx,pos,cur))}return 0}function indentStrategy(tree){let strategy=tree.type.prop(indentNodeProp);if(strategy)return strategy;let close,first=tree.firstChild;if(first&&(close=first.type.prop(NodeProp.closedBy))){let last=tree.lastChild,closed=last&&close.indexOf(last.name)>-1;return cx=>delimitedStrategy(cx,!0,1,void 0,closed&&!function ignoreClosed(cx){return cx.pos==cx.options.simulateBreak&&cx.options.simulateDoubleBreak}(cx)?last.from:void 0)}return null==tree.parent?topIndent:null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(base,pos,context){super(base.state,base.options),this.base=base,this.pos=pos,this.context=context}get node(){return this.context.node}static create(base,pos,context){return new TreeIndentContext(base,pos,context)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(node){let line=this.state.doc.lineAt(node.from);for(;;){let atBreak=node.resolve(line.from);for(;atBreak.parent&&atBreak.parent.from==atBreak.from;)atBreak=atBreak.parent;if(isParent(atBreak,node))break;line=this.state.doc.lineAt(atBreak.from)}return this.lineIndent(line.from)}continue(){return indentFor(this.context.next,this.base,this.pos)}}function isParent(parent,of){for(let cur=of;cur;cur=cur.parent)if(parent==cur)return!0;return!1}function delimitedIndent({closing,align=!0,units=1}){return context=>delimitedStrategy(context,align,units,closing)}function delimitedStrategy(context,align,units,closing,closedAt){let after=context.textAfter,space=after.match(/^\s*/)[0].length,closed=closing&&after.slice(space,space+closing.length)==closing||closedAt==context.pos+space,aligned=align?function bracketedAligned(context){let tree=context.node,openToken=tree.childAfter(tree.from),last=tree.lastChild;if(!openToken)return null;let sim=context.options.simulateBreak,openLine=context.state.doc.lineAt(openToken.from),lineEnd=null==sim||sim<=openLine.from?openLine.to:Math.min(openLine.to,sim);for(let pos=openToken.to;;){let next=tree.childAfter(pos);if(!next||next==last)return null;if(!next.type.isSkipped){if(next.from>=lineEnd)return null;let space=/^ */.exec(openLine.text.slice(openToken.to-openLine.from))[0].length;return{from:openToken.from,to:openToken.to+space}}pos=next.to}}(context):null;return aligned?closed?context.column(aligned.from):context.column(aligned.to):context.baseIndent+(closed?0:context.unit*units)}function continuedIndent({except,units=1}={}){return context=>{let matchExcept=except&&except.test(context.textAfter);return context.baseIndent+(matchExcept?0:units*context.unit)}}function indentOnInput(){return EditorState.transactionFilter.of(tr=>{if(!tr.docChanged||!tr.isUserEvent("input.type")&&!tr.isUserEvent("input.complete"))return tr;let rules=tr.startState.languageDataAt("indentOnInput",tr.startState.selection.main.head);if(!rules.length)return tr;let doc=tr.newDoc,{head}=tr.newSelection.main,line=doc.lineAt(head);if(head>line.from+200)return tr;let lineStart=doc.sliceString(line.from,head);if(!rules.some(r=>r.test(lineStart)))return tr;let{state}=tr,last=-1,changes=[];for(let{head}of state.selection.ranges){let line=state.doc.lineAt(head);if(line.from==last)continue;last=line.from;let indent=getIndentation(state,line.from);if(null==indent)continue;let cur=/^\s*/.exec(line.text)[0],norm=indentString(state,indent);cur!=norm&&changes.push({from:line.from,to:line.from+cur.length,insert:norm})}return changes.length?[tr,{changes,sequential:!0}]:tr})}const foldService=Facet.define(),foldNodeProp=new NodeProp;function foldInside(node){let first=node.firstChild,last=node.lastChild;return first&&first.to<last.from?{from:first.to,to:last.type.isError?node.to:last.from}:null}function isUnfinished(node){let ch=node.lastChild;return ch&&ch.to==node.to&&ch.type.isError}function foldable(state,lineStart,lineEnd){for(let service of state.facet(foldService)){let result=service(state,lineStart,lineEnd);if(result)return result}return function syntaxFolding(state,start,end){let tree=dist_syntaxTree(state);if(tree.length<end)return null;let found=null;for(let iter=tree.resolveStack(end,1);iter;iter=iter.next){let cur=iter.node;if(cur.to<=end||cur.from>end)continue;if(found&&cur.from<start)break;let prop=cur.type.prop(foldNodeProp);if(prop&&(cur.to<tree.length-50||tree.length==state.doc.length||!isUnfinished(cur))){let value=prop(cur,state);value&&value.from<=end&&value.from>=start&&value.to>end&&(found=value)}}return found}(state,lineStart,lineEnd)}function dist_mapRange(range,mapping){let from=mapping.mapPos(range.from,1),to=mapping.mapPos(range.to,-1);return from>=to?void 0:{from,to}}const foldEffect=dist_StateEffect.define({map:dist_mapRange}),unfoldEffect=dist_StateEffect.define({map:dist_mapRange});function selectedLines(view){let lines=[];for(let{head}of view.state.selection.ranges)lines.some(l=>l.from<=head&&l.to>=head)||lines.push(view.lineBlockAt(head));return lines}const foldState=dist_StateField.define({create:()=>Decoration.none,update(folded,tr){tr.isUserEvent("delete")&&tr.changes.iterChangedRanges((fromA,toA)=>folded=clearTouchedFolds(folded,fromA,toA)),folded=folded.map(tr.changes);for(let e of tr.effects)if(e.is(foldEffect)&&!foldExists(folded,e.value.from,e.value.to)){let{preparePlaceholder}=tr.state.facet(foldConfig),widget=preparePlaceholder?Decoration.replace({widget:new PreparedFoldWidget(preparePlaceholder(tr.state,e.value))}):foldWidget;folded=folded.update({add:[widget.range(e.value.from,e.value.to)]})}else e.is(unfoldEffect)&&(folded=folded.update({filter:(from,to)=>e.value.from!=from||e.value.to!=to,filterFrom:e.value.from,filterTo:e.value.to}));return tr.selection&&(folded=clearTouchedFolds(folded,tr.selection.main.head)),folded},provide:f=>EditorView.decorations.from(f),toJSON(folded,state){let ranges=[];return folded.between(0,state.doc.length,(from,to)=>{ranges.push(from,to)}),ranges},fromJSON(value){if(!Array.isArray(value)||value.length%2)throw new RangeError("Invalid JSON for fold state");let ranges=[];for(let i=0;i<value.length;){let from=value[i++],to=value[i++];if("number"!=typeof from||"number"!=typeof to)throw new RangeError("Invalid JSON for fold state");ranges.push(foldWidget.range(from,to))}return Decoration.set(ranges,!0)}});function clearTouchedFolds(folded,from,to=from){let touched=!1;return folded.between(from,to,(a,b)=>{a<to&&b>from&&(touched=!0)}),touched?folded.update({filterFrom:from,filterTo:to,filter:(a,b)=>a>=to||b<=from}):folded}function findFold(state,from,to){var _a;let found=null;return null===(_a=state.field(foldState,!1))||void 0===_a||_a.between(from,to,(from,to)=>{(!found||found.from>from)&&(found={from,to})}),found}function foldExists(folded,from,to){let found=!1;return folded.between(from,from,(a,b)=>{a==from&&b==to&&(found=!0)}),found}function maybeEnable(state,other){return state.field(foldState,!1)?other:other.concat(dist_StateEffect.appendConfig.of(codeFolding()))}function announceFold(view,range,fold=!0){let lineFrom=view.state.doc.lineAt(range.from).number,lineTo=view.state.doc.lineAt(range.to).number;return EditorView.announce.of(`${view.state.phrase(fold?"Folded lines":"Unfolded lines")} ${lineFrom} ${view.state.phrase("to")} ${lineTo}.`)}const foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:view=>{for(let line of selectedLines(view)){let range=foldable(view.state,line.from,line.to);if(range)return view.dispatch({effects:maybeEnable(view.state,[foldEffect.of(range),announceFold(view,range)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:view=>{if(!view.state.field(foldState,!1))return!1;let effects=[];for(let line of selectedLines(view)){let folded=findFold(view.state,line.from,line.to);folded&&effects.push(unfoldEffect.of(folded),announceFold(view,folded,!1))}return effects.length&&view.dispatch({effects}),effects.length>0}},{key:"Ctrl-Alt-[",run:view=>{let{state}=view,effects=[];for(let pos=0;pos<state.doc.length;){let line=view.lineBlockAt(pos),range=foldable(state,line.from,line.to);range&&effects.push(foldEffect.of(range)),pos=(range?view.lineBlockAt(range.to):line).to+1}return effects.length&&view.dispatch({effects:maybeEnable(view.state,effects)}),!!effects.length}},{key:"Ctrl-Alt-]",run:view=>{let field=view.state.field(foldState,!1);if(!field||!field.size)return!1;let effects=[];return field.between(0,view.state.doc.length,(from,to)=>{effects.push(unfoldEffect.of({from,to}))}),view.dispatch({effects}),!0}}],defaultConfig={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},foldConfig=Facet.define({combine:values=>combineConfig(values,defaultConfig)});function codeFolding(config){let result=[foldState,dist_baseTheme$1];return config&&result.push(foldConfig.of(config)),result}function widgetToDOM(view,prepared){let{state}=view,conf=state.facet(foldConfig),onclick=event=>{let line=view.lineBlockAt(view.posAtDOM(event.target)),folded=findFold(view.state,line.from,line.to);folded&&view.dispatch({effects:unfoldEffect.of(folded)}),event.preventDefault()};if(conf.placeholderDOM)return conf.placeholderDOM(view,onclick,prepared);let element=document.createElement("span");return element.textContent=conf.placeholderText,element.setAttribute("aria-label",state.phrase("folded code")),element.title=state.phrase("unfold"),element.className="cm-foldPlaceholder",element.onclick=onclick,element}const foldWidget=Decoration.replace({widget:new class extends WidgetType{toDOM(view){return widgetToDOM(view,null)}}});class PreparedFoldWidget extends WidgetType{constructor(value){super(),this.value=value}eq(other){return this.value==other.value}toDOM(view){return widgetToDOM(view,this.value)}}const foldGutterDefaults={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class FoldMarker extends GutterMarker{constructor(config,open){super(),this.config=config,this.open=open}eq(other){return this.config==other.config&&this.open==other.open}toDOM(view){if(this.config.markerDOM)return this.config.markerDOM(this.open);let span=document.createElement("span");return span.textContent=this.open?this.config.openText:this.config.closedText,span.title=view.state.phrase(this.open?"Fold line":"Unfold line"),span}}function foldGutter(config={}){let fullConfig={...foldGutterDefaults,...config},canFold=new FoldMarker(fullConfig,!0),canUnfold=new FoldMarker(fullConfig,!1),markers=ViewPlugin.fromClass(class{constructor(view){this.from=view.viewport.from,this.markers=this.buildMarkers(view)}update(update){(update.docChanged||update.viewportChanged||update.startState.facet(language)!=update.state.facet(language)||update.startState.field(foldState,!1)!=update.state.field(foldState,!1)||dist_syntaxTree(update.startState)!=dist_syntaxTree(update.state)||fullConfig.foldingChanged(update))&&(this.markers=this.buildMarkers(update.view))}buildMarkers(view){let builder=new RangeSetBuilder;for(let line of view.viewportLineBlocks){let mark=findFold(view.state,line.from,line.to)?canUnfold:foldable(view.state,line.from,line.to)?canFold:null;mark&&builder.add(line.from,line.from,mark)}return builder.finish()}}),{domEventHandlers}=fullConfig;return[markers,gutter({class:"cm-foldGutter",markers(view){var _a;return(null===(_a=view.plugin(markers))||void 0===_a?void 0:_a.markers)||dist_RangeSet.empty},initialSpacer:()=>new FoldMarker(fullConfig,!1),domEventHandlers:{...domEventHandlers,click:(view,line,event)=>{if(domEventHandlers.click&&domEventHandlers.click(view,line,event))return!0;let folded=findFold(view.state,line.from,line.to);if(folded)return view.dispatch({effects:unfoldEffect.of(folded)}),!0;let range=foldable(view.state,line.from,line.to);return!!range&&(view.dispatch({effects:foldEffect.of(range)}),!0)}}}),codeFolding()]}const dist_baseTheme$1=EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class HighlightStyle{constructor(specs,options){let modSpec;function def(spec){let cls=StyleModule.newName();return(modSpec||(modSpec=Object.create(null)))["."+cls]=spec,cls}this.specs=specs;const all="string"==typeof options.all?options.all:options.all?def(options.all):void 0,scopeOpt=options.scope;this.scope=scopeOpt instanceof Language?type=>type.prop(languageDataProp)==scopeOpt.data:scopeOpt?type=>type==scopeOpt:void 0,this.style=tagHighlighter(specs.map(style=>({tag:style.tag,class:style.class||def(Object.assign({},style,{tag:null}))})),{all}).style,this.module=modSpec?new StyleModule(modSpec):null,this.themeType=options.themeType}static define(specs,options){return new HighlightStyle(specs,options||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine:values=>values.length?[values[0]]:null});function getHighlighters(state){let main=state.facet(highlighterFacet);return main.length?main:state.facet(fallbackHighlighter)}function syntaxHighlighting(highlighter,options){let themeType,ext=[treeHighlighter];return highlighter instanceof HighlightStyle&&(highlighter.module&&ext.push(EditorView.styleModule.of(highlighter.module)),themeType=highlighter.themeType),(null==options?void 0:options.fallback)?ext.push(fallbackHighlighter.of(highlighter)):themeType?ext.push(highlighterFacet.computeN([EditorView.darkTheme],state=>state.facet(EditorView.darkTheme)==("dark"==themeType)?[highlighter]:[])):ext.push(highlighterFacet.of(highlighter)),ext}class TreeHighlighter{constructor(view){this.markCache=Object.create(null),this.tree=dist_syntaxTree(view.state),this.decorations=this.buildDeco(view,getHighlighters(view.state)),this.decoratedTo=view.viewport.to}update(update){let tree=dist_syntaxTree(update.state),highlighters=getHighlighters(update.state),styleChange=highlighters!=getHighlighters(update.startState),{viewport}=update.view,decoratedToMapped=update.changes.mapPos(this.decoratedTo,1);tree.length<viewport.to&&!styleChange&&tree.type==this.tree.type&&decoratedToMapped>=viewport.to?(this.decorations=this.decorations.map(update.changes),this.decoratedTo=decoratedToMapped):(tree!=this.tree||update.viewportChanged||styleChange)&&(this.tree=tree,this.decorations=this.buildDeco(update.view,highlighters),this.decoratedTo=viewport.to)}buildDeco(view,highlighters){if(!highlighters||!this.tree.length)return Decoration.none;let builder=new RangeSetBuilder;for(let{from,to}of view.visibleRanges)highlightTree(this.tree,highlighters,(from,to,style)=>{builder.add(from,to,this.markCache[style]||(this.markCache[style]=Decoration.mark({class:style})))},from,to);return builder.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:v=>v.decorations})),dist_baseTheme=(tags.meta,tags.link,tags.heading,tags.emphasis,tags.strong,tags.strikethrough,tags.keyword,tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName,tags.literal,tags.inserted,tags.string,tags.deleted,tags.regexp,tags.escape,tags.string,tags.variableName,tags.variableName,tags.typeName,tags.namespace,tags.className,tags.variableName,tags.macroName,tags.propertyName,tags.comment,tags.invalid,EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}})),bracketMatchingConfig=Facet.define({combine:configs=>combineConfig(configs,{afterCursor:!0,brackets:"()[]{}",maxScanDistance:1e4,renderMatch:defaultRenderMatch})}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(match){let decorations=[],mark=match.matched?matchingMark:nonmatchingMark;return decorations.push(mark.range(match.start.from,match.start.to)),match.end&&decorations.push(mark.range(match.end.from,match.end.to)),decorations}const bracketMatchingState=dist_StateField.define({create:()=>Decoration.none,update(deco,tr){if(!tr.docChanged&&!tr.selection)return deco;let decorations=[],config=tr.state.facet(bracketMatchingConfig);for(let range of tr.state.selection.ranges){if(!range.empty)continue;let match=matchBrackets(tr.state,range.head,-1,config)||range.head>0&&matchBrackets(tr.state,range.head-1,1,config)||config.afterCursor&&(matchBrackets(tr.state,range.head,1,config)||range.head<tr.state.doc.length&&matchBrackets(tr.state,range.head+1,-1,config));match&&(decorations=decorations.concat(config.renderMatch(match,tr.state)))}return Decoration.set(decorations,!0)},provide:f=>EditorView.decorations.from(f)}),bracketMatchingUnique=[bracketMatchingState,dist_baseTheme];function bracketMatching(config={}){return[bracketMatchingConfig.of(config),bracketMatchingUnique]}const bracketMatchingHandle=new NodeProp;function matchingNodes(node,dir,brackets){let byProp=node.prop(dir<0?NodeProp.openedBy:NodeProp.closedBy);if(byProp)return byProp;if(1==node.name.length){let index=brackets.indexOf(node.name);if(index>-1&&index%2==(dir<0?1:0))return[brackets[index+dir]]}return null}function findHandle(node){let hasHandle=node.type.prop(bracketMatchingHandle);return hasHandle?hasHandle(node.node):node}function matchBrackets(state,pos,dir,config={}){let maxScanDistance=config.maxScanDistance||1e4,brackets=config.brackets||"()[]{}",tree=dist_syntaxTree(state),node=tree.resolveInner(pos,dir);for(let cur=node;cur;cur=cur.parent){let matches=matchingNodes(cur.type,dir,brackets);if(matches&&cur.from<cur.to){let handle=findHandle(cur);if(handle&&(dir>0?pos>=handle.from&&pos<handle.to:pos>handle.from&&pos<=handle.to))return matchMarkedBrackets(state,pos,dir,cur,handle,matches,brackets)}}return function matchPlainBrackets(state,pos,dir,tree,tokenType,maxScanDistance,brackets){let startCh=dir<0?state.sliceDoc(pos-1,pos):state.sliceDoc(pos,pos+1),bracket=brackets.indexOf(startCh);if(bracket<0||bracket%2==0!=dir>0)return null;let startToken={from:dir<0?pos-1:pos,to:dir>0?pos+1:pos},iter=state.doc.iterRange(pos,dir>0?state.doc.length:0),depth=0;for(let distance=0;!iter.next().done&&distance<=maxScanDistance;){let text=iter.value;dir<0&&(distance+=text.length);let basePos=pos+distance*dir;for(let pos=dir>0?0:text.length-1,end=dir>0?text.length:-1;pos!=end;pos+=dir){let found=brackets.indexOf(text[pos]);if(!(found<0||tree.resolveInner(basePos+pos,1).type!=tokenType))if(found%2==0==dir>0)depth++;else{if(1==depth)return{start:startToken,end:{from:basePos+pos,to:basePos+pos+1},matched:found>>1==bracket>>1};depth--}}dir>0&&(distance+=text.length)}return iter.done?{start:startToken,matched:!1}:null}(state,pos,dir,tree,node.type,maxScanDistance,brackets)}function matchMarkedBrackets(_state,_pos,dir,token,handle,matching,brackets){let parent=token.parent,firstToken={from:handle.from,to:handle.to},depth=0,cursor=null==parent?void 0:parent.cursor();if(cursor&&(dir<0?cursor.childBefore(token.from):cursor.childAfter(token.to)))do{if(dir<0?cursor.to<=token.from:cursor.from>=token.to){if(0==depth&&matching.indexOf(cursor.type.name)>-1&&cursor.from<cursor.to){let endHandle=findHandle(cursor);return{start:firstToken,end:endHandle?{from:endHandle.from,to:endHandle.to}:void 0,matched:!0}}if(matchingNodes(cursor.type,dir,brackets))depth++;else if(matchingNodes(cursor.type,-dir,brackets)){if(0==depth){let endHandle=findHandle(cursor);return{start:firstToken,end:endHandle&&endHandle.from<endHandle.to?{from:endHandle.from,to:endHandle.to}:void 0,matched:!1}}depth--}}}while(dir<0?cursor.prevSibling():cursor.nextSibling());return{start:firstToken,matched:!1}}const noTokens=Object.create(null),typeArray=[NodeType.none],warned=[],byTag=Object.create(null),defaultTable=Object.create(null);for(let[legacyName,name]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[legacyName]=createTokenType(noTokens,name);function warnForPart(part,msg){warned.indexOf(part)>-1||(warned.push(part),console.warn(msg))}function createTokenType(extra,tagStr){let tags$1=[];for(let name of tagStr.split(" ")){let found=[];for(let part of name.split(".")){let value=extra[part]||tags[part];value?"function"==typeof value?found.length?found=found.map(value):warnForPart(part,`Modifier ${part} used at start of tag`):found.length?warnForPart(part,`Tag ${part} used as modifier`):found=Array.isArray(value)?value:[value]:warnForPart(part,`Unknown highlighting tag ${part}`)}for(let tag of found)tags$1.push(tag)}if(!tags$1.length)return 0;let name=tagStr.replace(/ /g,"_"),key=name+" "+tags$1.map(t=>t.id),known=byTag[key];if(known)return known.id;let type=byTag[key]=NodeType.define({id:typeArray.length,name,props:[styleTags({[name]:tags$1})]});return typeArray.push(type),type.id}Direction.RTL,Direction.LTR;function command(f,option){return({state,dispatch})=>{if(state.readOnly)return!1;let tr=f(option,state);return!!tr&&(dispatch(state.update(tr)),!0)}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((o,s)=>changeBlockComment(o,s,function selectedLineRanges(state){let ranges=[];for(let r of state.selection.ranges){let fromLine=state.doc.lineAt(r.from),toLine=r.to<=fromLine.to?fromLine:state.doc.lineAt(r.to);toLine.from>fromLine.from&&toLine.from==r.to&&(toLine=r.to==fromLine.to+1?fromLine:state.doc.lineAt(r.to-1));let last=ranges.length-1;last>=0&&ranges[last].to>fromLine.from?ranges[last].to=toLine.to:ranges.push({from:fromLine.from+/^\s*/.exec(fromLine.text)[0].length,to:toLine.to})}return ranges}(s)),0);function getConfig(state,pos){let data=state.languageDataAt("commentTokens",pos,1);return data.length?data[0]:{}}const SearchMargin=50;function changeBlockComment(option,state,ranges=state.selection.ranges){let tokens=ranges.map(r=>getConfig(state,r.from).block);if(!tokens.every(c=>c))return null;let comments=ranges.map((r,i)=>function findBlockComment(state,{open,close},from,to){let startText,endText,textBefore=state.sliceDoc(from-SearchMargin,from),textAfter=state.sliceDoc(to,to+SearchMargin),spaceBefore=/\s*$/.exec(textBefore)[0].length,spaceAfter=/^\s*/.exec(textAfter)[0].length,beforeOff=textBefore.length-spaceBefore;if(textBefore.slice(beforeOff-open.length,beforeOff)==open&&textAfter.slice(spaceAfter,spaceAfter+close.length)==close)return{open:{pos:from-spaceBefore,margin:spaceBefore&&1},close:{pos:to+spaceAfter,margin:spaceAfter&&1}};to-from<=2*SearchMargin?startText=endText=state.sliceDoc(from,to):(startText=state.sliceDoc(from,from+SearchMargin),endText=state.sliceDoc(to-SearchMargin,to));let startSpace=/^\s*/.exec(startText)[0].length,endSpace=/\s*$/.exec(endText)[0].length,endOff=endText.length-endSpace-close.length;return startText.slice(startSpace,startSpace+open.length)==open&&endText.slice(endOff,endOff+close.length)==close?{open:{pos:from+startSpace+open.length,margin:/\s/.test(startText.charAt(startSpace+open.length))?1:0},close:{pos:to-endSpace-close.length,margin:/\s/.test(endText.charAt(endOff-1))?1:0}}:null}(state,tokens[i],r.from,r.to));if(2!=option&&!comments.every(c=>c))return{changes:state.changes(ranges.map((range,i)=>comments[i]?[]:[{from:range.from,insert:tokens[i].open+" "},{from:range.to,insert:" "+tokens[i].close}]))};if(1!=option&&comments.some(c=>c)){let changes=[];for(let comment,i=0;i<comments.length;i++)if(comment=comments[i]){let token=tokens[i],{open,close}=comment;changes.push({from:open.pos-token.open.length,to:open.pos+open.margin},{from:close.pos-close.margin,to:close.pos+token.close.length})}return{changes}}return null}function changeLineComment(option,state,ranges=state.selection.ranges){let lines=[],prevLine=-1;for(let{from,to}of ranges){let startI=lines.length,minIndent=1e9,token=getConfig(state,from).line;if(token){for(let pos=from;pos<=to;){let line=state.doc.lineAt(pos);if(line.from>prevLine&&(from==to||to>line.from)){prevLine=line.from;let indent=/^\s*/.exec(line.text)[0].length,empty=indent==line.length,comment=line.text.slice(indent,indent+token.length)==token?indent:-1;indent<line.text.length&&indent<minIndent&&(minIndent=indent),lines.push({line,comment,token,indent,empty,single:!1})}pos=line.to+1}if(minIndent<1e9)for(let i=startI;i<lines.length;i++)lines[i].indent<lines[i].line.text.length&&(lines[i].indent=minIndent);lines.length==startI+1&&(lines[startI].single=!0)}}if(2!=option&&lines.some(l=>l.comment<0&&(!l.empty||l.single))){let changes=[];for(let{line,token,indent,empty,single}of lines)!single&&empty||changes.push({from:line.from+indent,insert:token+" "});let changeSet=state.changes(changes);return{changes:changeSet,selection:state.selection.map(changeSet,1)}}if(1!=option&&lines.some(l=>l.comment>=0)){let changes=[];for(let{line,comment,token}of lines)if(comment>=0){let from=line.from+comment,to=from+token.length;" "==line.text[to-line.from]&&to++,changes.push({from,to})}return{changes}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine:configs=>combineConfig(configs,{minDepth:100,newGroupDelay:500,joinToEvent:(_t,isAdjacent)=>isAdjacent},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(a,b)=>(tr,adj)=>a(tr,adj)||b(tr,adj)})}),historyField_=dist_StateField.define({create:()=>HistoryState.empty,update(state,tr){let config=tr.state.facet(historyConfig),fromHist=tr.annotation(fromHistory);if(fromHist){let item=HistEvent.fromTransaction(tr,fromHist.selection),from=fromHist.side,other=0==from?state.undone:state.done;return other=item?updateBranch(other,other.length,config.minDepth,item):addSelection(other,tr.startState.selection),new HistoryState(0==from?fromHist.rest:other,0==from?other:fromHist.rest)}let isolate=tr.annotation(isolateHistory);if("full"!=isolate&&"before"!=isolate||(state=state.isolate()),!1===tr.annotation(Transaction.addToHistory))return tr.changes.empty?state:state.addMapping(tr.changes.desc);let event=HistEvent.fromTransaction(tr),time=tr.annotation(Transaction.time),userEvent=tr.annotation(Transaction.userEvent);return event?state=state.addChanges(event,time,userEvent,config,tr):tr.selection&&(state=state.addSelection(tr.startState.selection,time,userEvent,config.newGroupDelay)),"full"!=isolate&&"after"!=isolate||(state=state.isolate()),state},toJSON:value=>({done:value.done.map(e=>e.toJSON()),undone:value.undone.map(e=>e.toJSON())}),fromJSON:json=>new HistoryState(json.done.map(HistEvent.fromJSON),json.undone.map(HistEvent.fromJSON))});function dist_history(config={}){return[historyField_,historyConfig.of(config),EditorView.domEventHandlers({beforeinput(e,view){let command="historyUndo"==e.inputType?undo:"historyRedo"==e.inputType?redo:null;return!!command&&(e.preventDefault(),command(view))}})]}function cmd(side,selection){return function({state,dispatch}){if(!selection&&state.readOnly)return!1;let historyState=state.field(historyField_,!1);if(!historyState)return!1;let tr=historyState.pop(side,state,selection);return!!tr&&(dispatch(tr),!0)}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(changes,effects,mapped,startSelection,selectionsAfter){this.changes=changes,this.effects=effects,this.mapped=mapped,this.startSelection=startSelection,this.selectionsAfter=selectionsAfter}setSelAfter(after){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,after)}toJSON(){var _a,_b,_c;return{changes:null===(_a=this.changes)||void 0===_a?void 0:_a.toJSON(),mapped:null===(_b=this.mapped)||void 0===_b?void 0:_b.toJSON(),startSelection:null===(_c=this.startSelection)||void 0===_c?void 0:_c.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(json){return new HistEvent(json.changes&&ChangeSet.fromJSON(json.changes),[],json.mapped&&ChangeDesc.fromJSON(json.mapped),json.startSelection&&dist_EditorSelection.fromJSON(json.startSelection),json.selectionsAfter.map(dist_EditorSelection.fromJSON))}static fromTransaction(tr,selection){let effects=dist_none;for(let invert of tr.startState.facet(invertedEffects)){let result=invert(tr);result.length&&(effects=effects.concat(result))}return!effects.length&&tr.changes.empty?null:new HistEvent(tr.changes.invert(tr.startState.doc),effects,void 0,selection||tr.startState.selection,dist_none)}static selection(selections){return new HistEvent(void 0,dist_none,void 0,void 0,selections)}}function updateBranch(branch,to,maxLen,newEvent){let start=to+1>maxLen+20?to-maxLen-1:0,newBranch=branch.slice(start,to);return newBranch.push(newEvent),newBranch}function conc(a,b){return a.length?b.length?a.concat(b):a:b}const dist_none=[],MaxSelectionsPerEvent=200;function addSelection(branch,selection){if(branch.length){let lastEvent=branch[branch.length-1],sels=lastEvent.selectionsAfter.slice(Math.max(0,lastEvent.selectionsAfter.length-MaxSelectionsPerEvent));return sels.length&&sels[sels.length-1].eq(selection)?branch:(sels.push(selection),updateBranch(branch,branch.length-1,1e9,lastEvent.setSelAfter(sels)))}return[HistEvent.selection([selection])]}function popSelection(branch){let last=branch[branch.length-1],newBranch=branch.slice();return newBranch[branch.length-1]=last.setSelAfter(last.selectionsAfter.slice(0,last.selectionsAfter.length-1)),newBranch}function addMappingToBranch(branch,mapping){if(!branch.length)return branch;let length=branch.length,selections=dist_none;for(;length;){let event=mapEvent(branch[length-1],mapping,selections);if(event.changes&&!event.changes.empty||event.effects.length){let result=branch.slice(0,length);return result[length-1]=event,result}mapping=event.mapped,length--,selections=event.selectionsAfter}return selections.length?[HistEvent.selection(selections)]:dist_none}function mapEvent(event,mapping,extraSelections){let selections=conc(event.selectionsAfter.length?event.selectionsAfter.map(s=>s.map(mapping)):dist_none,extraSelections);if(!event.changes)return HistEvent.selection(selections);let mappedChanges=event.changes.map(mapping),before=mapping.mapDesc(event.changes,!0),fullMapping=event.mapped?event.mapped.composeDesc(before):before;return new HistEvent(mappedChanges,dist_StateEffect.mapEffects(event.effects,mapping),fullMapping,event.startSelection.map(before),selections)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(done,undone,prevTime=0,prevUserEvent=void 0){this.done=done,this.undone=undone,this.prevTime=prevTime,this.prevUserEvent=prevUserEvent}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(event,time,userEvent,config,tr){let done=this.done,lastEvent=done[done.length-1];return done=lastEvent&&lastEvent.changes&&!lastEvent.changes.empty&&event.changes&&(!userEvent||joinableUserEvent.test(userEvent))&&(!lastEvent.selectionsAfter.length&&time-this.prevTime<config.newGroupDelay&&config.joinToEvent(tr,function isAdjacent(a,b){let ranges=[],isAdjacent=!1;return a.iterChangedRanges((f,t)=>ranges.push(f,t)),b.iterChangedRanges((_f,_t,f,t)=>{for(let i=0;i<ranges.length;){let from=ranges[i++],to=ranges[i++];t>=from&&f<=to&&(isAdjacent=!0)}}),isAdjacent}(lastEvent.changes,event.changes))||"input.type.compose"==userEvent)?updateBranch(done,done.length-1,config.minDepth,new HistEvent(event.changes.compose(lastEvent.changes),conc(dist_StateEffect.mapEffects(event.effects,lastEvent.changes),lastEvent.effects),lastEvent.mapped,lastEvent.startSelection,dist_none)):updateBranch(done,done.length,config.minDepth,event),new HistoryState(done,dist_none,time,userEvent)}addSelection(selection,time,userEvent,newGroupDelay){let last=this.done.length?this.done[this.done.length-1].selectionsAfter:dist_none;return last.length>0&&time-this.prevTime<newGroupDelay&&userEvent==this.prevUserEvent&&userEvent&&/^select($|\.)/.test(userEvent)&&function eqSelectionShape(a,b){return a.ranges.length==b.ranges.length&&0===a.ranges.filter((r,i)=>r.empty!=b.ranges[i].empty).length}(last[last.length-1],selection)?this:new HistoryState(addSelection(this.done,selection),this.undone,time,userEvent)}addMapping(mapping){return new HistoryState(addMappingToBranch(this.done,mapping),addMappingToBranch(this.undone,mapping),this.prevTime,this.prevUserEvent)}pop(side,state,onlySelection){let branch=0==side?this.done:this.undone;if(0==branch.length)return null;let event=branch[branch.length-1],selection=event.selectionsAfter[0]||state.selection;if(onlySelection&&event.selectionsAfter.length)return state.update({selection:event.selectionsAfter[event.selectionsAfter.length-1],annotations:fromHistory.of({side,rest:popSelection(branch),selection}),userEvent:0==side?"select.undo":"select.redo",scrollIntoView:!0});if(event.changes){let rest=1==branch.length?dist_none:branch.slice(0,branch.length-1);return event.mapped&&(rest=addMappingToBranch(rest,event.mapped)),state.update({changes:event.changes,selection:event.startSelection,effects:event.effects,annotations:fromHistory.of({side,rest,selection}),filter:!1,userEvent:0==side?"undo":"redo",scrollIntoView:!0})}return null}}HistoryState.empty=new HistoryState(dist_none,dist_none);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(sel,by){return dist_EditorSelection.create(sel.ranges.map(by),sel.mainIndex)}function setSel(state,selection){return state.update({selection,scrollIntoView:!0,userEvent:"select"})}function moveSel({state,dispatch},how){let selection=updateSel(state.selection,how);return!selection.eq(state.selection,!0)&&(dispatch(setSel(state,selection)),!0)}function rangeEnd(range,forward){return dist_EditorSelection.cursor(forward?range.to:range.from)}function cursorByChar(view,forward){return moveSel(view,range=>range.empty?view.moveByChar(range,forward):rangeEnd(range,forward))}function ltrAtCursor(view){return view.textDirectionAt(view.state.selection.main.head)==Direction.LTR}const cursorCharLeft=view=>cursorByChar(view,!ltrAtCursor(view)),cursorCharRight=view=>cursorByChar(view,ltrAtCursor(view));function cursorByGroup(view,forward){return moveSel(view,range=>range.empty?view.moveByGroup(range,forward):rangeEnd(range,forward))}"undefined"!=typeof Intl&&Intl.Segmenter;function interestingNode(state,node,bracketProp){if(node.type.prop(bracketProp))return!0;let len=node.to-node.from;return len&&(len>2||/[^\s,.;:]/.test(state.sliceDoc(node.from,node.to)))||node.firstChild}function moveBySyntax(state,start,forward){let match,newPos,pos=dist_syntaxTree(state).resolveInner(start.head),bracketProp=forward?NodeProp.closedBy:NodeProp.openedBy;for(let at=start.head;;){let next=forward?pos.childAfter(at):pos.childBefore(at);if(!next)break;interestingNode(state,next,bracketProp)?pos=next:at=forward?next.to:next.from}return newPos=pos.type.prop(bracketProp)&&(match=forward?matchBrackets(state,pos.from,1):matchBrackets(state,pos.to,-1))&&match.matched?forward?match.end.to:match.end.from:forward?pos.to:pos.from,dist_EditorSelection.cursor(newPos,forward?-1:1)}function cursorByLine(view,forward){return moveSel(view,range=>{if(!range.empty)return rangeEnd(range,forward);let moved=view.moveVertically(range,forward);return moved.head!=range.head?moved:view.moveToLineBoundary(range,forward)})}const cursorLineUp=view=>cursorByLine(view,!1),cursorLineDown=view=>cursorByLine(view,!0);function pageInfo(view){let height,selfScroll=view.scrollDOM.clientHeight<view.scrollDOM.scrollHeight-2,marginTop=0,marginBottom=0;if(selfScroll){for(let source of view.state.facet(EditorView.scrollMargins)){let margins=source(view);(null==margins?void 0:margins.top)&&(marginTop=Math.max(null==margins?void 0:margins.top,marginTop)),(null==margins?void 0:margins.bottom)&&(marginBottom=Math.max(null==margins?void 0:margins.bottom,marginBottom))}height=view.scrollDOM.clientHeight-marginTop-marginBottom}else height=(view.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop,marginBottom,selfScroll,height:Math.max(view.defaultLineHeight,height-5)}}function cursorByPage(view,forward){let effect,page=pageInfo(view),{state}=view,selection=updateSel(state.selection,range=>range.empty?view.moveVertically(range,forward,page.height):rangeEnd(range,forward));if(selection.eq(state.selection))return!1;if(page.selfScroll){let startPos=view.coordsAtPos(state.selection.main.head),scrollRect=view.scrollDOM.getBoundingClientRect(),scrollTop=scrollRect.top+page.marginTop,scrollBottom=scrollRect.bottom-page.marginBottom;startPos&&startPos.top>scrollTop&&startPos.bottom<scrollBottom&&(effect=EditorView.scrollIntoView(selection.main.head,{y:"start",yMargin:startPos.top-scrollTop}))}return view.dispatch(setSel(state,selection),{effects:effect}),!0}const cursorPageUp=view=>cursorByPage(view,!1),cursorPageDown=view=>cursorByPage(view,!0);function moveByLineBoundary(view,start,forward){let line=view.lineBlockAt(start.head),moved=view.moveToLineBoundary(start,forward);if(moved.head==start.head&&moved.head!=(forward?line.to:line.from)&&(moved=view.moveToLineBoundary(start,forward,!1)),!forward&&moved.head==line.from&&line.length){let space=/^\s*/.exec(view.state.sliceDoc(line.from,Math.min(line.from+100,line.to)))[0].length;space&&start.head!=line.from+space&&(moved=dist_EditorSelection.cursor(line.from+space))}return moved}function toMatchingBracket(state,dispatch,extend){let found=!1,selection=updateSel(state.selection,range=>{let matching=matchBrackets(state,range.head,-1)||matchBrackets(state,range.head,1)||range.head>0&&matchBrackets(state,range.head-1,1)||range.head<state.doc.length&&matchBrackets(state,range.head+1,-1);if(!matching||!matching.end)return range;found=!0;let head=matching.start.from==range.head?matching.end.to:matching.end.from;return extend?dist_EditorSelection.range(range.anchor,head):dist_EditorSelection.cursor(head)});return!!found&&(dispatch(setSel(state,selection)),!0)}function extendSel(target,how){let selection=updateSel(target.state.selection,range=>{let head=how(range);return dist_EditorSelection.range(range.anchor,head.head,head.goalColumn,head.bidiLevel||void 0)});return!selection.eq(target.state.selection)&&(target.dispatch(setSel(target.state,selection)),!0)}function selectByChar(view,forward){return extendSel(view,range=>view.moveByChar(range,forward))}const selectCharLeft=view=>selectByChar(view,!ltrAtCursor(view)),selectCharRight=view=>selectByChar(view,ltrAtCursor(view));function selectByGroup(view,forward){return extendSel(view,range=>view.moveByGroup(range,forward))}function selectByLine(view,forward){return extendSel(view,range=>view.moveVertically(range,forward))}const selectLineUp=view=>selectByLine(view,!1),selectLineDown=view=>selectByLine(view,!0);function selectByPage(view,forward){return extendSel(view,range=>view.moveVertically(range,forward,pageInfo(view).height))}const selectPageUp=view=>selectByPage(view,!1),selectPageDown=view=>selectByPage(view,!0),cursorDocStart=({state,dispatch})=>(dispatch(setSel(state,{anchor:0})),!0),cursorDocEnd=({state,dispatch})=>(dispatch(setSel(state,{anchor:state.doc.length})),!0),selectDocStart=({state,dispatch})=>(dispatch(setSel(state,{anchor:state.selection.main.anchor,head:0})),!0),selectDocEnd=({state,dispatch})=>(dispatch(setSel(state,{anchor:state.selection.main.anchor,head:state.doc.length})),!0);function deleteBy(target,by){if(target.state.readOnly)return!1;let event="delete.selection",{state}=target,changes=state.changeByRange(range=>{let{from,to}=range;if(from==to){let towards=by(range);towards<from?(event="delete.backward",towards=skipAtomic(target,towards,!1)):towards>from&&(event="delete.forward",towards=skipAtomic(target,towards,!0)),from=Math.min(from,towards),to=Math.max(to,towards)}else from=skipAtomic(target,from,!1),to=skipAtomic(target,to,!0);return from==to?{range}:{changes:{from,to},range:dist_EditorSelection.cursor(from,from<range.head?-1:1)}});return!changes.changes.empty&&(target.dispatch(state.update(changes,{scrollIntoView:!0,userEvent:event,effects:"delete.selection"==event?EditorView.announce.of(state.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(target,pos,forward){if(target instanceof EditorView)for(let ranges of target.state.facet(EditorView.atomicRanges).map(f=>f(target)))ranges.between(pos,pos,(from,to)=>{from<pos&&to>pos&&(pos=forward?to:from)});return pos}const deleteByChar=(target,forward,byIndentUnit)=>deleteBy(target,range=>{let before,targetPos,pos=range.from,{state}=target,line=state.doc.lineAt(pos);if(byIndentUnit&&!forward&&pos>line.from&&pos<line.from+200&&!/[^ \t]/.test(before=line.text.slice(0,pos-line.from))){if("\t"==before[before.length-1])return pos-1;let drop=countColumn(before,state.tabSize)%getIndentUnit(state)||getIndentUnit(state);for(let i=0;i<drop&&" "==before[before.length-1-i];i++)pos--;targetPos=pos}else targetPos=dist_findClusterBreak(line.text,pos-line.from,forward,forward)+line.from,targetPos==pos&&line.number!=(forward?state.doc.lines:1)?targetPos+=forward?1:-1:!forward&&/[\ufe00-\ufe0f]/.test(line.text.slice(targetPos-line.from,pos-line.from))&&(targetPos=dist_findClusterBreak(line.text,targetPos-line.from,!1,!1)+line.from);return targetPos}),deleteCharBackward=view=>deleteByChar(view,!1,!0),deleteCharForward=view=>deleteByChar(view,!0,!1),deleteByGroup=(target,forward)=>deleteBy(target,range=>{let pos=range.head,{state}=target,line=state.doc.lineAt(pos),categorize=state.charCategorizer(pos);for(let cat=null;;){if(pos==(forward?line.to:line.from)){pos==range.head&&line.number!=(forward?state.doc.lines:1)&&(pos+=forward?1:-1);break}let next=dist_findClusterBreak(line.text,pos-line.from,forward)+line.from,nextChar=line.text.slice(Math.min(pos,next)-line.from,Math.max(pos,next)-line.from),nextCat=categorize(nextChar);if(null!=cat&&nextCat!=cat)break;" "==nextChar&&pos==range.head||(cat=nextCat),pos=next}return pos}),deleteGroupBackward=target=>deleteByGroup(target,!1);function selectedLineBlocks(state){let blocks=[],upto=-1;for(let range of state.selection.ranges){let startLine=state.doc.lineAt(range.from),endLine=state.doc.lineAt(range.to);if(range.empty||range.to!=endLine.from||(endLine=state.doc.lineAt(range.to-1)),upto>=startLine.number){let prev=blocks[blocks.length-1];prev.to=endLine.to,prev.ranges.push(range)}else blocks.push({from:startLine.from,to:endLine.to,ranges:[range]});upto=endLine.number+1}return blocks}function moveLine(state,dispatch,forward){if(state.readOnly)return!1;let changes=[],ranges=[];for(let block of selectedLineBlocks(state)){if(forward?block.to==state.doc.length:0==block.from)continue;let nextLine=state.doc.lineAt(forward?block.to+1:block.from-1),size=nextLine.length+1;if(forward){changes.push({from:block.to,to:nextLine.to},{from:block.from,insert:nextLine.text+state.lineBreak});for(let r of block.ranges)ranges.push(dist_EditorSelection.range(Math.min(state.doc.length,r.anchor+size),Math.min(state.doc.length,r.head+size)))}else{changes.push({from:nextLine.from,to:block.from},{from:block.to,insert:state.lineBreak+nextLine.text});for(let r of block.ranges)ranges.push(dist_EditorSelection.range(r.anchor-size,r.head-size))}}return!!changes.length&&(dispatch(state.update({changes,scrollIntoView:!0,selection:dist_EditorSelection.create(ranges,state.selection.mainIndex),userEvent:"move.line"})),!0)}function copyLine(state,dispatch,forward){if(state.readOnly)return!1;let changes=[];for(let block of selectedLineBlocks(state))forward?changes.push({from:block.from,insert:state.doc.slice(block.from,block.to)+state.lineBreak}):changes.push({from:block.to,insert:state.lineBreak+state.doc.slice(block.from,block.to)});return dispatch(state.update({changes,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const insertNewlineAndIndent=newlineAndIndent(!1);function newlineAndIndent(atEof){return({state,dispatch})=>{if(state.readOnly)return!1;let changes=state.changeByRange(range=>{let{from,to}=range,line=state.doc.lineAt(from),explode=!atEof&&from==to&&function isBetweenBrackets(state,pos){if(/\(\)|\[\]|\{\}/.test(state.sliceDoc(pos-1,pos+1)))return{from:pos,to:pos};let closedBy,context=dist_syntaxTree(state).resolveInner(pos),before=context.childBefore(pos),after=context.childAfter(pos);return before&&after&&before.to<=pos&&after.from>=pos&&(closedBy=before.type.prop(NodeProp.closedBy))&&closedBy.indexOf(after.name)>-1&&state.doc.lineAt(before.to).from==state.doc.lineAt(after.from).from&&!/\S/.test(state.sliceDoc(before.to,after.from))?{from:before.to,to:after.from}:null}(state,from);atEof&&(from=to=(to<=line.to?line:state.doc.lineAt(to)).to);let cx=new IndentContext(state,{simulateBreak:from,simulateDoubleBreak:!!explode}),indent=getIndentation(cx,from);for(null==indent&&(indent=countColumn(/^\s*/.exec(state.doc.lineAt(from).text)[0],state.tabSize));to<line.to&&/\s/.test(line.text[to-line.from]);)to++;explode?({from,to}=explode):from>line.from&&from<line.from+100&&!/\S/.test(line.text.slice(0,from))&&(from=line.from);let insert=["",indentString(state,indent)];return explode&&insert.push(indentString(state,cx.lineIndent(line.from,-1))),{changes:{from,to,insert:Text.of(insert)},range:dist_EditorSelection.cursor(from+1+insert[1].length)}});return dispatch(state.update(changes,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(state,f){let atLine=-1;return state.changeByRange(range=>{let changes=[];for(let pos=range.from;pos<=range.to;){let line=state.doc.lineAt(pos);line.number>atLine&&(range.empty||range.to>line.from)&&(f(line,changes,range),atLine=line.number),pos=line.to+1}let changeSet=state.changes(changes);return{changes,range:dist_EditorSelection.range(changeSet.mapPos(range.anchor,1),changeSet.mapPos(range.head,1))}})}const indentMore=({state,dispatch})=>!state.readOnly&&(dispatch(state.update(changeBySelectedLine(state,(line,changes)=>{changes.push({from:line.from,insert:state.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state,dispatch})=>!state.readOnly&&(dispatch(state.update(changeBySelectedLine(state,(line,changes)=>{let space=/^\s*/.exec(line.text)[0];if(!space)return;let col=countColumn(space,state.tabSize),keep=0,insert=indentString(state,Math.max(0,col-getIndentUnit(state)));for(;keep<space.length&&keep<insert.length&&space.charCodeAt(keep)==insert.charCodeAt(keep);)keep++;changes.push({from:line.from+keep,to:line.from+space.length,insert:insert.slice(keep)})}),{userEvent:"delete.dedent"})),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:view=>moveSel(view,range=>dist_EditorSelection.cursor(view.lineBlockAt(range.head).from,1)),shift:view=>extendSel(view,range=>dist_EditorSelection.cursor(view.lineBlockAt(range.head).from))},{key:"Ctrl-e",run:view=>moveSel(view,range=>dist_EditorSelection.cursor(view.lineBlockAt(range.head).to,-1)),shift:view=>extendSel(view,range=>dist_EditorSelection.cursor(view.lineBlockAt(range.head).to))},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:view=>deleteBy(view,range=>{let lineEnd=view.lineBlockAt(range.head).to;return range.head<lineEnd?lineEnd:Math.min(view.state.doc.length,range.head+1)})},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:({state,dispatch})=>{if(state.readOnly)return!1;let changes=state.changeByRange(range=>({changes:{from:range.from,to:range.to,insert:Text.of(["",""])},range:dist_EditorSelection.cursor(range.from)}));return dispatch(state.update(changes,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state,dispatch})=>{if(state.readOnly)return!1;let changes=state.changeByRange(range=>{if(!range.empty||0==range.from||range.from==state.doc.length)return{range};let pos=range.from,line=state.doc.lineAt(pos),from=pos==line.from?pos-1:dist_findClusterBreak(line.text,pos-line.from,!1)+line.from,to=pos==line.to?pos+1:dist_findClusterBreak(line.text,pos-line.from,!0)+line.from;return{changes:{from,to,insert:state.doc.slice(pos,to).append(state.doc.slice(from,pos))},range:dist_EditorSelection.cursor(to)}});return!changes.changes.empty&&(dispatch(state.update(changes,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:cursorPageDown}],defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:view=>moveSel(view,range=>moveBySyntax(view.state,range,!ltrAtCursor(view))),shift:view=>extendSel(view,range=>moveBySyntax(view.state,range,!ltrAtCursor(view)))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:view=>moveSel(view,range=>moveBySyntax(view.state,range,ltrAtCursor(view))),shift:view=>extendSel(view,range=>moveBySyntax(view.state,range,ltrAtCursor(view)))},{key:"Alt-ArrowUp",run:({state,dispatch})=>moveLine(state,dispatch,!1)},{key:"Shift-Alt-ArrowUp",run:({state,dispatch})=>copyLine(state,dispatch,!1)},{key:"Alt-ArrowDown",run:({state,dispatch})=>moveLine(state,dispatch,!0)},{key:"Shift-Alt-ArrowDown",run:({state,dispatch})=>copyLine(state,dispatch,!0)},{key:"Escape",run:({state,dispatch})=>{let cur=state.selection,selection=null;return cur.ranges.length>1?selection=dist_EditorSelection.create([cur.main]):cur.main.empty||(selection=dist_EditorSelection.create([dist_EditorSelection.cursor(cur.main.head)])),!!selection&&(dispatch(setSel(state,selection)),!0)}},{key:"Mod-Enter",run:newlineAndIndent(!0)},{key:"Alt-l",mac:"Ctrl-l",run:({state,dispatch})=>{let ranges=selectedLineBlocks(state).map(({from,to})=>dist_EditorSelection.range(from,Math.min(to+1,state.doc.length)));return dispatch(state.update({selection:dist_EditorSelection.create(ranges),userEvent:"select"})),!0}},{key:"Mod-i",run:({state,dispatch})=>{let selection=updateSel(state.selection,range=>{let tree=dist_syntaxTree(state),stack=tree.resolveStack(range.from,1);if(range.empty){let stackBefore=tree.resolveStack(range.from,-1);stackBefore.node.from>=stack.node.from&&stackBefore.node.to<=stack.node.to&&(stack=stackBefore)}for(let cur=stack;cur;cur=cur.next){let{node}=cur;if((node.from<range.from&&node.to>=range.to||node.to>range.to&&node.from<=range.from)&&cur.next)return dist_EditorSelection.range(node.to,node.from)}return range});return!selection.eq(state.selection)&&(dispatch(setSel(state,selection)),!0)},preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:({state,dispatch})=>{if(state.readOnly)return!1;let updated=Object.create(null),context=new IndentContext(state,{overrideIndentation:start=>{let found=updated[start];return found??-1}}),changes=changeBySelectedLine(state,(line,changes,range)=>{let indent=getIndentation(context,line.from);if(null==indent)return;/\S/.test(line.text)||(indent=0);let cur=/^\s*/.exec(line.text)[0],norm=indentString(state,indent);(cur!=norm||range.from<line.from+cur.length)&&(updated[line.from]=indent,changes.push({from:line.from,to:line.from+cur.length,insert:norm}))});return changes.changes.empty||dispatch(state.update(changes,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:view=>{if(view.state.readOnly)return!1;let{state}=view,changes=state.changes(selectedLineBlocks(state).map(({from,to})=>(from>0?from--:to<state.doc.length&&to++,{from,to}))),selection=updateSel(state.selection,range=>{let dist;if(view.lineWrapping){let block=view.lineBlockAt(range.head),pos=view.coordsAtPos(range.head,range.assoc||1);pos&&(dist=block.bottom+view.documentTop-pos.bottom+view.defaultLineHeight/2)}return view.moveVertically(range,!0,dist)}).map(changes);return view.dispatch({changes,selection,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state,dispatch})=>toMatchingBracket(state,dispatch,!1)},{key:"Mod-/",run:target=>{let{state}=target,line=state.doc.lineAt(state.selection.main.from),config=getConfig(target.state,line.from);return config.line?toggleLineComment(target):!!config.block&&toggleBlockCommentByLine(target)}},{key:"Alt-A",run:toggleBlockComment},{key:"Ctrl-m",mac:"Shift-Alt-m",run:view=>(view.setTabFocusMode(),!0)}].concat([{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:view=>cursorByGroup(view,!ltrAtCursor(view)),shift:view=>selectByGroup(view,!ltrAtCursor(view)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:view=>moveSel(view,range=>moveByLineBoundary(view,range,!ltrAtCursor(view))),shift:view=>extendSel(view,range=>moveByLineBoundary(view,range,!ltrAtCursor(view))),preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:view=>cursorByGroup(view,ltrAtCursor(view)),shift:view=>selectByGroup(view,ltrAtCursor(view)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:view=>moveSel(view,range=>moveByLineBoundary(view,range,ltrAtCursor(view))),shift:view=>extendSel(view,range=>moveByLineBoundary(view,range,ltrAtCursor(view))),preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:view=>moveSel(view,range=>moveByLineBoundary(view,range,!1)),shift:view=>extendSel(view,range=>moveByLineBoundary(view,range,!1)),preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:view=>moveSel(view,range=>moveByLineBoundary(view,range,!0)),shift:view=>extendSel(view,range=>moveByLineBoundary(view,range,!0)),preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent,shift:insertNewlineAndIndent},{key:"Mod-a",run:({state,dispatch})=>(dispatch(state.update({selection:{anchor:0,head:state.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:target=>deleteByGroup(target,!0)},{mac:"Mod-Backspace",run:view=>deleteBy(view,range=>{let lineStart=view.moveToLineBoundary(range,!1).head;return range.head>lineStart?lineStart:Math.max(0,range.head-1)})},{mac:"Mod-Delete",run:view=>deleteBy(view,range=>{let lineStart=view.moveToLineBoundary(range,!0).head;return range.head<lineStart?lineStart:Math.min(view.state.doc.length,range.head+1)})}].concat(emacsStyleKeymap.map(b=>({mac:b.key,run:b.run,shift:b.shift})))),indentWithTab={key:"Tab",run:indentMore,shift:indentLess};class CompletionContext{constructor(state,pos,explicit,view){this.state=state,this.pos=pos,this.explicit=explicit,this.view=view,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(types){let token=dist_syntaxTree(this.state).resolveInner(this.pos,-1);for(;token&&types.indexOf(token.name)<0;)token=token.parent;return token?{from:token.from,to:this.pos,text:this.state.sliceDoc(token.from,this.pos),type:token.type}:null}matchBefore(expr){let line=this.state.doc.lineAt(this.pos),start=Math.max(line.from,this.pos-250),str=line.text.slice(start-line.from,this.pos-line.from),found=str.search(ensureAnchor(expr,!1));return found<0?null:{from:start+found,to:this.pos,text:str.slice(found)}}get aborted(){return null==this.abortListeners}addEventListener(type,listener,options){"abort"==type&&this.abortListeners&&(this.abortListeners.push(listener),options&&options.onDocChange&&(this.abortOnDocChange=!0))}}function toSet(chars){let flat=Object.keys(chars).join(""),words=/\w/.test(flat);return words&&(flat=flat.replace(/\w/g,"")),`[${words?"\\w":""}${flat.replace(/[^\w\s]/g,"\\$&")}]`}function completeFromList(list){let options=list.map(o=>"string"==typeof o?{label:o}:o),[validFor,match]=options.every(o=>/^\w+$/.test(o.label))?[/\w*$/,/\w+$/]:function prefixMatch(options){let first=Object.create(null),rest=Object.create(null);for(let{label}of options){first[label[0]]=!0;for(let i=1;i<label.length;i++)rest[label[i]]=!0}let source=toSet(first)+toSet(rest)+"*$";return[new RegExp("^"+source),new RegExp(source)]}(options);return context=>{let token=context.matchBefore(match);return token||context.explicit?{from:token?token.from:context.pos,options,validFor}:null}}class Option{constructor(completion,source,match,score){this.completion=completion,this.source=source,this.match=match,this.score=score}}function cur(state){return state.selection.main.from}function ensureAnchor(expr,start){var _a;let{source}=expr,addStart=start&&"^"!=source[0],addEnd="$"!=source[source.length-1];return addStart||addEnd?new RegExp(`${addStart?"^":""}(?:${source})${addEnd?"$":""}`,null!==(_a=expr.flags)&&void 0!==_a?_a:expr.ignoreCase?"i":""):expr}const pickedCompletion=Annotation.define();const SourceCache=new WeakMap;function asSource(source){if(!Array.isArray(source))return source;let known=SourceCache.get(source);return known||SourceCache.set(source,known=completeFromList(source)),known}const startCompletionEffect=dist_StateEffect.define(),closeCompletionEffect=dist_StateEffect.define();class FuzzyMatcher{constructor(pattern){this.pattern=pattern,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let p=0;p<pattern.length;){let char=dist_codePointAt(pattern,p),size=dist_codePointSize(char);this.chars.push(char);let part=pattern.slice(p,p+size),upper=part.toUpperCase();this.folded.push(dist_codePointAt(upper==part?part.toLowerCase():upper,0)),p+=size}this.astral=pattern.length!=this.chars.length}ret(score,matched){return this.score=score,this.matched=matched,this}match(word){if(0==this.pattern.length)return this.ret(-100,[]);if(word.length<this.pattern.length)return null;let{chars,folded,any,precise,byWord}=this;if(1==chars.length){let first=dist_codePointAt(word,0),firstSize=dist_codePointSize(first),score=firstSize==word.length?0:-100;if(first==chars[0]);else{if(first!=folded[0])return null;score+=-200}return this.ret(score,[0,firstSize])}let direct=word.indexOf(this.pattern);if(0==direct)return this.ret(word.length==this.pattern.length?0:-100,[0,this.pattern.length]);let len=chars.length,anyTo=0;if(direct<0){for(let i=0,e=Math.min(word.length,200);i<e&&anyTo<len;){let next=dist_codePointAt(word,i);next!=chars[anyTo]&&next!=folded[anyTo]||(any[anyTo++]=i),i+=dist_codePointSize(next)}if(anyTo<len)return null}let preciseTo=0,byWordTo=0,byWordFolded=!1,adjacentTo=0,adjacentStart=-1,adjacentEnd=-1,hasLower=/[a-z]/.test(word),wordAdjacent=!0;for(let i=0,e=Math.min(word.length,200),prevType=0;i<e&&byWordTo<len;){let next=dist_codePointAt(word,i);direct<0&&(preciseTo<len&&next==chars[preciseTo]&&(precise[preciseTo++]=i),adjacentTo<len&&(next==chars[adjacentTo]||next==folded[adjacentTo]?(0==adjacentTo&&(adjacentStart=i),adjacentEnd=i+1,adjacentTo++):adjacentTo=0));let ch,type=next<255?next>=48&&next<=57||next>=97&&next<=122?2:next>=65&&next<=90?1:0:(ch=dist_fromCodePoint(next))!=ch.toLowerCase()?1:ch!=ch.toUpperCase()?2:0;(!i||1==type&&hasLower||0==prevType&&0!=type)&&(chars[byWordTo]==next||folded[byWordTo]==next&&(byWordFolded=!0)?byWord[byWordTo++]=i:byWord.length&&(wordAdjacent=!1)),prevType=type,i+=dist_codePointSize(next)}return byWordTo==len&&0==byWord[0]&&wordAdjacent?this.result((byWordFolded?-200:0)-100,byWord,word):adjacentTo==len&&0==adjacentStart?this.ret(-200-word.length+(adjacentEnd==word.length?0:-100),[0,adjacentEnd]):direct>-1?this.ret(-700-word.length,[direct,direct+this.pattern.length]):adjacentTo==len?this.ret(-900-word.length,[adjacentStart,adjacentEnd]):byWordTo==len?this.result((byWordFolded?-200:0)-100-700+(wordAdjacent?0:-1100),byWord,word):2==chars.length?null:this.result((any[0]?-700:0)-200-1100,any,word)}result(score,positions,word){let result=[],i=0;for(let pos of positions){let to=pos+(this.astral?dist_codePointSize(dist_codePointAt(word,pos)):1);i&&result[i-1]==pos?result[i-1]=to:(result[i++]=pos,result[i++]=to)}return this.ret(score-word.length,result)}}class StrictMatcher{constructor(pattern){this.pattern=pattern,this.matched=[],this.score=0,this.folded=pattern.toLowerCase()}match(word){if(word.length<this.pattern.length)return null;let start=word.slice(0,this.pattern.length),match=start==this.pattern?0:start.toLowerCase()==this.folded?-200:null;return null==match?null:(this.matched=[0,start.length],this.score=match+(word.length==this.pattern.length?0:-100),this)}}const completionConfig=Facet.define({combine:configs=>combineConfig(configs,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:defaultPositionInfo,filterStrict:!1,compareCompletions:(a,b)=>a.label.localeCompare(b.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(a,b)=>a&&b,closeOnBlur:(a,b)=>a&&b,icons:(a,b)=>a&&b,tooltipClass:(a,b)=>c=>joinClass(a(c),b(c)),optionClass:(a,b)=>c=>joinClass(a(c),b(c)),addToOptions:(a,b)=>a.concat(b),filterStrict:(a,b)=>a||b})});function joinClass(a,b){return a?b?a+" "+b:a:b}function defaultPositionInfo(view,list,option,info,space,tooltip){let offset,maxWidth,rtl=view.textDirection==Direction.RTL,left=rtl,narrow=!1,side="top",spaceLeft=list.left-space.left,spaceRight=space.right-list.right,infoWidth=info.right-info.left,infoHeight=info.bottom-info.top;if(left&&spaceLeft<Math.min(infoWidth,spaceRight)?left=!1:!left&&spaceRight<Math.min(infoWidth,spaceLeft)&&(left=!0),infoWidth<=(left?spaceLeft:spaceRight))offset=Math.max(space.top,Math.min(option.top,space.bottom-infoHeight))-list.top,maxWidth=Math.min(400,left?spaceLeft:spaceRight);else{narrow=!0,maxWidth=Math.min(400,(rtl?list.right:space.right-list.left)-30);let spaceBelow=space.bottom-list.bottom;spaceBelow>=infoHeight||spaceBelow>list.top?offset=option.bottom-list.top:(side="bottom",offset=list.bottom-option.top)}return{style:`${side}: ${offset/((list.bottom-list.top)/tooltip.offsetHeight)}px; max-width: ${maxWidth/((list.right-list.left)/tooltip.offsetWidth)}px`,class:"cm-completionInfo-"+(narrow?rtl?"left-narrow":"right-narrow":left?"left":"right")}}function rangeAroundSelected(total,selected,max){if(total<=max)return{from:0,to:total};if(selected<0&&(selected=0),selected<=total>>1){let off=Math.floor(selected/max);return{from:off*max,to:(off+1)*max}}let off=Math.floor((total-selected)/max);return{from:total-(off+1)*max,to:total-off*max}}class CompletionTooltip{constructor(view,stateField,applyCompletion){this.view=view,this.stateField=stateField,this.applyCompletion=applyCompletion,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:pos=>this.placeInfo(pos),key:this},this.space=null,this.currentClass="";let cState=view.state.field(stateField),{options,selected}=cState.open,config=view.state.facet(completionConfig);this.optionContent=function optionContent(config){let content=config.addToOptions.slice();return config.icons&&content.push({render(completion){let icon=document.createElement("div");return icon.classList.add("cm-completionIcon"),completion.type&&icon.classList.add(...completion.type.split(/\s+/g).map(cls=>"cm-completionIcon-"+cls)),icon.setAttribute("aria-hidden","true"),icon},position:20}),content.push({render(completion,_s,_v,match){let labelElt=document.createElement("span");labelElt.className="cm-completionLabel";let label=completion.displayLabel||completion.label,off=0;for(let j=0;j<match.length;){let from=match[j++],to=match[j++];from>off&&labelElt.appendChild(document.createTextNode(label.slice(off,from)));let span=labelElt.appendChild(document.createElement("span"));span.appendChild(document.createTextNode(label.slice(from,to))),span.className="cm-completionMatchedText",off=to}return off<label.length&&labelElt.appendChild(document.createTextNode(label.slice(off))),labelElt},position:50},{render(completion){if(!completion.detail)return null;let detailElt=document.createElement("span");return detailElt.className="cm-completionDetail",detailElt.textContent=completion.detail,detailElt},position:80}),content.sort((a,b)=>a.position-b.position).map(a=>a.render)}(config),this.optionClass=config.optionClass,this.tooltipClass=config.tooltipClass,this.range=rangeAroundSelected(options.length,selected,config.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(view.state),this.dom.addEventListener("mousedown",e=>{let{options}=view.state.field(stateField).open;for(let match,dom=e.target;dom&&dom!=this.dom;dom=dom.parentNode)if("LI"==dom.nodeName&&(match=/-(\d+)$/.exec(dom.id))&&+match[1]<options.length)return this.applyCompletion(view,options[+match[1]]),void e.preventDefault()}),this.dom.addEventListener("focusout",e=>{let state=view.state.field(this.stateField,!1);state&&state.tooltip&&view.state.facet(completionConfig).closeOnBlur&&e.relatedTarget!=view.contentDOM&&view.dispatch({effects:closeCompletionEffect.of(null)})}),this.showOptions(options,cState.id)}mount(){this.updateSel()}showOptions(options,id){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(options,id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(update){var _a;let cState=update.state.field(this.stateField),prevState=update.startState.field(this.stateField);if(this.updateTooltipClass(update.state),cState!=prevState){let{options,selected,disabled}=cState.open;prevState.open&&prevState.open.options==options||(this.range=rangeAroundSelected(options.length,selected,update.state.facet(completionConfig).maxRenderedOptions),this.showOptions(options,cState.id)),this.updateSel(),disabled!=(null===(_a=prevState.open)||void 0===_a?void 0:_a.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!disabled)}}updateTooltipClass(state){let cls=this.tooltipClass(state);if(cls!=this.currentClass){for(let c of this.currentClass.split(" "))c&&this.dom.classList.remove(c);for(let c of cls.split(" "))c&&this.dom.classList.add(c);this.currentClass=cls}}positioned(space){this.space=space,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let cState=this.view.state.field(this.stateField),open=cState.open;if((open.selected>-1&&open.selected<this.range.from||open.selected>=this.range.to)&&(this.range=rangeAroundSelected(open.options.length,open.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.showOptions(open.options,cState.id)),this.updateSelectedOption(open.selected)){this.destroyInfo();let{completion}=open.options[open.selected],{info}=completion;if(!info)return;let infoResult="string"==typeof info?document.createTextNode(info):info(completion);if(!infoResult)return;"then"in infoResult?infoResult.then(obj=>{obj&&this.view.state.field(this.stateField,!1)==cState&&this.addInfoPane(obj,completion)}).catch(e=>logException(this.view.state,e,"completion info")):this.addInfoPane(infoResult,completion)}}addInfoPane(content,completion){this.destroyInfo();let wrap=this.info=document.createElement("div");if(wrap.className="cm-tooltip cm-completionInfo",null!=content.nodeType)wrap.appendChild(content),this.infoDestroy=null;else{let{dom,destroy}=content;wrap.appendChild(dom),this.infoDestroy=destroy||null}this.dom.appendChild(wrap),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(selected){let set=null;for(let opt=this.list.firstChild,i=this.range.from;opt;opt=opt.nextSibling,i++)"LI"==opt.nodeName&&opt.id?i==selected?opt.hasAttribute("aria-selected")||(opt.setAttribute("aria-selected","true"),set=opt):opt.hasAttribute("aria-selected")&&opt.removeAttribute("aria-selected"):i--;return set&&function dist_scrollIntoView(container,element){let parent=container.getBoundingClientRect(),self=element.getBoundingClientRect(),scaleY=parent.height/container.offsetHeight;self.top<parent.top?container.scrollTop-=(parent.top-self.top)/scaleY:self.bottom>parent.bottom&&(container.scrollTop+=(self.bottom-parent.bottom)/scaleY)}(this.list,set),set}measureInfo(){let sel=this.dom.querySelector("[aria-selected]");if(!sel||!this.info)return null;let listRect=this.dom.getBoundingClientRect(),infoRect=this.info.getBoundingClientRect(),selRect=sel.getBoundingClientRect(),space=this.space;if(!space){let docElt=this.dom.ownerDocument.documentElement;space={left:0,top:0,right:docElt.clientWidth,bottom:docElt.clientHeight}}return selRect.top>Math.min(space.bottom,listRect.bottom)-10||selRect.bottom<Math.max(space.top,listRect.top)+10?null:this.view.state.facet(completionConfig).positionInfo(this.view,listRect,selRect,infoRect,space,this.dom)}placeInfo(pos){this.info&&(pos?(pos.style&&(this.info.style.cssText=pos.style),this.info.className="cm-tooltip cm-completionInfo "+(pos.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(options,id,range){const ul=document.createElement("ul");ul.id=id,ul.setAttribute("role","listbox"),ul.setAttribute("aria-expanded","true"),ul.setAttribute("aria-label",this.view.state.phrase("Completions")),ul.addEventListener("mousedown",e=>{e.target==ul&&e.preventDefault()});let curSection=null;for(let i=range.from;i<range.to;i++){let{completion,match}=options[i],{section}=completion;if(section){let name="string"==typeof section?section:section.name;if(name!=curSection&&(i>range.from||0==range.from))if(curSection=name,"string"!=typeof section&&section.header)ul.appendChild(section.header(section));else{ul.appendChild(document.createElement("completion-section")).textContent=name}}const li=ul.appendChild(document.createElement("li"));li.id=id+"-"+i,li.setAttribute("role","option");let cls=this.optionClass(completion);cls&&(li.className=cls);for(let source of this.optionContent){let node=source(completion,this.view.state,this.view,match);node&&li.appendChild(node)}}return range.from&&ul.classList.add("cm-completionListIncompleteTop"),range.to<options.length&&ul.classList.add("cm-completionListIncompleteBottom"),ul}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function completionTooltip(stateField,applyCompletion){return view=>new CompletionTooltip(view,stateField,applyCompletion)}function score(option){return 100*(option.boost||0)+(option.apply?10:0)+(option.info?5:0)+(option.type?1:0)}class CompletionDialog{constructor(options,attrs,tooltip,timestamp,selected,disabled){this.options=options,this.attrs=attrs,this.tooltip=tooltip,this.timestamp=timestamp,this.selected=selected,this.disabled=disabled}setSelected(selected,id){return selected==this.selected||selected>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(id,selected),this.tooltip,this.timestamp,selected,this.disabled)}static build(active,state,id,prev,conf,didSetActive){if(prev&&!didSetActive&&active.some(s=>s.isPending))return prev.setDisabled();let options=function sortOptions(active,state){let options=[],sections=null,addOption=option=>{options.push(option);let{section}=option.completion;if(section){sections||(sections=[]);let name="string"==typeof section?section:section.name;sections.some(s=>s.name==name)||sections.push("string"==typeof section?{name}:section)}},conf=state.facet(completionConfig);for(let a of active)if(a.hasResult()){let getMatch=a.result.getMatch;if(!1===a.result.filter)for(let option of a.result.options)addOption(new Option(option,a.source,getMatch?getMatch(option):[],1e9-options.length));else{let match,pattern=state.sliceDoc(a.from,a.to),matcher=conf.filterStrict?new StrictMatcher(pattern):new FuzzyMatcher(pattern);for(let option of a.result.options)if(match=matcher.match(option.label)){let matched=option.displayLabel?getMatch?getMatch(option,match.matched):[]:match.matched;addOption(new Option(option,a.source,matched,match.score+(option.boost||0)))}}}if(sections){let sectionOrder=Object.create(null),pos=0,cmp=(a,b)=>{var _a,_b;return(null!==(_a=a.rank)&&void 0!==_a?_a:1e9)-(null!==(_b=b.rank)&&void 0!==_b?_b:1e9)||(a.name<b.name?-1:1)};for(let s of sections.sort(cmp))pos-=1e5,sectionOrder[s.name]=pos;for(let option of options){let{section}=option.completion;section&&(option.score+=sectionOrder["string"==typeof section?section:section.name])}}let result=[],prev=null,compare=conf.compareCompletions;for(let opt of options.sort((a,b)=>b.score-a.score||compare(a.completion,b.completion))){let cur=opt.completion;!prev||prev.label!=cur.label||prev.detail!=cur.detail||null!=prev.type&&null!=cur.type&&prev.type!=cur.type||prev.apply!=cur.apply||prev.boost!=cur.boost?result.push(opt):score(opt.completion)>score(prev)&&(result[result.length-1]=opt),prev=opt.completion}return result}(active,state);if(!options.length)return prev&&active.some(a=>a.isPending)?prev.setDisabled():null;let selected=state.facet(completionConfig).selectOnOpen?0:-1;if(prev&&prev.selected!=selected&&-1!=prev.selected){let selectedValue=prev.options[prev.selected].completion;for(let i=0;i<options.length;i++)if(options[i].completion==selectedValue){selected=i;break}}return new CompletionDialog(options,makeAttrs(id,selected),{pos:active.reduce((a,b)=>b.hasResult()?Math.min(a,b.from):a,1e8),create:createTooltip,above:conf.aboveCursor},prev?prev.timestamp:Date.now(),selected,!1)}map(changes){return new CompletionDialog(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:changes.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new CompletionDialog(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class CompletionState{constructor(active,id,open){this.active=active,this.id=id,this.open=open}static start(){return new CompletionState(autocomplete_dist_none,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(tr){let{state}=tr,conf=state.facet(completionConfig),active=(conf.override||state.languageDataAt("autocomplete",cur(state)).map(asSource)).map(source=>(this.active.find(s=>s.source==source)||new ActiveSource(source,this.active.some(a=>0!=a.state)?1:0)).update(tr,conf));active.length==this.active.length&&active.every((a,i)=>a==this.active[i])&&(active=this.active);let open=this.open,didSet=tr.effects.some(e=>e.is(setActiveEffect));open&&tr.docChanged&&(open=open.map(tr.changes)),tr.selection||active.some(a=>a.hasResult()&&tr.changes.touchesRange(a.from,a.to))||!function sameResults(a,b){if(a==b)return!0;for(let iA=0,iB=0;;){for(;iA<a.length&&!a[iA].hasResult();)iA++;for(;iB<b.length&&!b[iB].hasResult();)iB++;let endA=iA==a.length,endB=iB==b.length;if(endA||endB)return endA==endB;if(a[iA++].result!=b[iB++].result)return!1}}(active,this.active)||didSet?open=CompletionDialog.build(active,state,this.id,open,conf,didSet):open&&open.disabled&&!active.some(a=>a.isPending)&&(open=null),!open&&active.every(a=>!a.isPending)&&active.some(a=>a.hasResult())&&(active=active.map(a=>a.hasResult()?new ActiveSource(a.source,0):a));for(let effect of tr.effects)effect.is(setSelectedEffect)&&(open=open&&open.setSelected(effect.value,this.id));return active==this.active&&open==this.open?this:new CompletionState(active,this.id,open)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?baseAttrs:dist_noAttrs}}const baseAttrs={"aria-autocomplete":"list"},dist_noAttrs={};function makeAttrs(id,selected){let result={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":id};return selected>-1&&(result["aria-activedescendant"]=id+"-"+selected),result}const autocomplete_dist_none=[];function getUpdateType(tr,conf){if(tr.isUserEvent("input.complete")){let completion=tr.annotation(pickedCompletion);if(completion&&conf.activateOnCompletion(completion))return 12}let typing=tr.isUserEvent("input.type");return typing&&conf.activateOnTyping?5:typing?1:tr.isUserEvent("delete.backward")?2:tr.selection?8:tr.docChanged?16:0}class ActiveSource{constructor(source,state,explicit=!1){this.source=source,this.state=state,this.explicit=explicit}hasResult(){return!1}get isPending(){return 1==this.state}update(tr,conf){let type=getUpdateType(tr,conf),value=this;(8&type||16&type&&this.touches(tr))&&(value=new ActiveSource(value.source,0)),4&type&&0==value.state&&(value=new ActiveSource(this.source,1)),value=value.updateFor(tr,type);for(let effect of tr.effects)if(effect.is(startCompletionEffect))value=new ActiveSource(value.source,1,effect.value);else if(effect.is(closeCompletionEffect))value=new ActiveSource(value.source,0);else if(effect.is(setActiveEffect))for(let active of effect.value)active.source==value.source&&(value=active);return value}updateFor(tr,type){return this.map(tr.changes)}map(changes){return this}touches(tr){return tr.changes.touchesRange(cur(tr.state))}}class ActiveResult extends ActiveSource{constructor(source,explicit,limit,result,from,to){super(source,3,explicit),this.limit=limit,this.result=result,this.from=from,this.to=to}hasResult(){return!0}updateFor(tr,type){var _a;if(!(3&type))return this.map(tr.changes);let result=this.result;result.map&&!tr.changes.empty&&(result=result.map(result,tr.changes));let from=tr.changes.mapPos(this.from),to=tr.changes.mapPos(this.to,1),pos=cur(tr.state);if(pos>to||!result||2&type&&(cur(tr.startState)==this.from||pos<this.limit))return new ActiveSource(this.source,4&type?1:0);let limit=tr.changes.mapPos(this.limit);return function checkValid(validFor,state,from,to){if(!validFor)return!1;let text=state.sliceDoc(from,to);return"function"==typeof validFor?validFor(text,from,to,state):ensureAnchor(validFor,!0).test(text)}(result.validFor,tr.state,from,to)?new ActiveResult(this.source,this.explicit,limit,result,from,to):result.update&&(result=result.update(result,from,to,new CompletionContext(tr.state,pos,!1)))?new ActiveResult(this.source,this.explicit,limit,result,result.from,null!==(_a=result.to)&&void 0!==_a?_a:cur(tr.state)):new ActiveSource(this.source,1,this.explicit)}map(mapping){if(mapping.empty)return this;return(this.result.map?this.result.map(this.result,mapping):this.result)?new ActiveResult(this.source,this.explicit,mapping.mapPos(this.limit),this.result,mapping.mapPos(this.from),mapping.mapPos(this.to,1)):new ActiveSource(this.source,0)}touches(tr){return tr.changes.touchesRange(this.from,this.to)}}const setActiveEffect=dist_StateEffect.define({map:(sources,mapping)=>sources.map(s=>s.map(mapping))}),setSelectedEffect=dist_StateEffect.define(),completionState=dist_StateField.define({create:()=>CompletionState.start(),update:(value,tr)=>value.update(tr),provide:f=>[showTooltip.from(f,val=>val.tooltip),EditorView.contentAttributes.from(f,state=>state.attrs)]});function applyCompletion(view,option){const apply=option.completion.apply||option.completion.label;let result=view.state.field(completionState).active.find(a=>a.source==option.source);return result instanceof ActiveResult&&("string"==typeof apply?view.dispatch(Object.assign(Object.assign({},function insertCompletionText(state,text,from,to){let{main}=state.selection,fromOff=from-main.from,toOff=to-main.from;return Object.assign(Object.assign({},state.changeByRange(range=>{if(range!=main&&from!=to&&state.sliceDoc(range.from+fromOff,range.from+toOff)!=state.sliceDoc(from,to))return{range};let lines=state.toText(text);return{changes:{from:range.from+fromOff,to:to==main.from?range.to:range.from+toOff,insert:lines},range:dist_EditorSelection.cursor(range.from+fromOff+lines.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}(view.state,apply,result.from,result.to)),{annotations:pickedCompletion.of(option.completion)})):apply(view,option.completion,result.from,result.to),!0)}const createTooltip=completionTooltip(completionState,applyCompletion);function moveCompletionSelection(forward,by="option"){return view=>{let cState=view.state.field(completionState,!1);if(!cState||!cState.open||cState.open.disabled||Date.now()-cState.open.timestamp<view.state.facet(completionConfig).interactionDelay)return!1;let tooltip,step=1;"page"==by&&(tooltip=getTooltip(view,cState.open.tooltip))&&(step=Math.max(2,Math.floor(tooltip.dom.offsetHeight/tooltip.dom.querySelector("li").offsetHeight)-1));let{length}=cState.open.options,selected=cState.open.selected>-1?cState.open.selected+step*(forward?1:-1):forward?0:length-1;return selected<0?selected="page"==by?0:length-1:selected>=length&&(selected="page"==by?length-1:0),view.dispatch({effects:setSelectedEffect.of(selected)}),!0}}const acceptCompletion=view=>{let cState=view.state.field(completionState,!1);return!(view.state.readOnly||!cState||!cState.open||cState.open.selected<0||cState.open.disabled||Date.now()-cState.open.timestamp<view.state.facet(completionConfig).interactionDelay)&&applyCompletion(view,cState.open.options[cState.open.selected])},startCompletion=view=>!!view.state.field(completionState,!1)&&(view.dispatch({effects:startCompletionEffect.of(!0)}),!0);class RunningQuery{constructor(active,context){this.active=active,this.context=context,this.time=Date.now(),this.updates=[],this.done=void 0}}const completionPlugin=ViewPlugin.fromClass(class{constructor(view){this.view=view,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let active of view.state.field(completionState).active)active.isPending&&this.startQuery(active)}update(update){let cState=update.state.field(completionState),conf=update.state.facet(completionConfig);if(!update.selectionSet&&!update.docChanged&&update.startState.field(completionState)==cState)return;let doesReset=update.transactions.some(tr=>{let type=getUpdateType(tr,conf);return 8&type||(tr.selection||tr.docChanged)&&!(3&type)});for(let i=0;i<this.running.length;i++){let query=this.running[i];if(doesReset||query.context.abortOnDocChange&&update.docChanged||query.updates.length+update.transactions.length>50&&Date.now()-query.time>1e3){for(let handler of query.context.abortListeners)try{handler()}catch(e){logException(this.view.state,e)}query.context.abortListeners=null,this.running.splice(i--,1)}else query.updates.push(...update.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),update.transactions.some(tr=>tr.effects.some(e=>e.is(startCompletionEffect)))&&(this.pendingStart=!0);let delay=this.pendingStart?50:conf.activateOnTypingDelay;if(this.debounceUpdate=cState.active.some(a=>a.isPending&&!this.running.some(q=>q.active.source==a.source))?setTimeout(()=>this.startUpdate(),delay):-1,0!=this.composing)for(let tr of update.transactions)tr.isUserEvent("input.type")?this.composing=2:2==this.composing&&tr.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state}=this.view,cState=state.field(completionState);for(let active of cState.active)active.isPending&&!this.running.some(r=>r.active.source==active.source)&&this.startQuery(active);this.running.length&&cState.open&&cState.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}startQuery(active){let{state}=this.view,pos=cur(state),context=new CompletionContext(state,pos,active.explicit,this.view),pending=new RunningQuery(active,context);this.running.push(pending),Promise.resolve(active.source(context)).then(result=>{pending.context.aborted||(pending.done=result||null,this.scheduleAccept())},err=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,err)})}scheduleAccept(){this.running.every(q=>void 0!==q.done)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}accept(){var _a;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let updated=[],conf=this.view.state.facet(completionConfig),cState=this.view.state.field(completionState);for(let i=0;i<this.running.length;i++){let query=this.running[i];if(void 0===query.done)continue;if(this.running.splice(i--,1),query.done){let pos=cur(query.updates.length?query.updates[0].startState:this.view.state),limit=Math.min(pos,query.done.from+(query.active.explicit?0:1)),active=new ActiveResult(query.active.source,query.active.explicit,limit,query.done,query.done.from,null!==(_a=query.done.to)&&void 0!==_a?_a:pos);for(let tr of query.updates)active=active.update(tr,conf);if(active.hasResult()){updated.push(active);continue}}let current=cState.active.find(a=>a.source==query.active.source);if(current&&current.isPending)if(null==query.done){let active=new ActiveSource(query.active.source,0);for(let tr of query.updates)active=active.update(tr,conf);active.isPending||updated.push(active)}else this.startQuery(current)}(updated.length||cState.open&&cState.open.disabled)&&this.view.dispatch({effects:setActiveEffect.of(updated)})}},{eventHandlers:{blur(event){let state=this.view.state.field(completionState,!1);if(state&&state.tooltip&&this.view.state.facet(completionConfig).closeOnBlur){let dialog=state.open&&getTooltip(this.view,state.open.tooltip);dialog&&dialog.dom.contains(event.relatedTarget)||setTimeout(()=>this.view.dispatch({effects:closeCompletionEffect.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout(()=>this.view.dispatch({effects:startCompletionEffect.of(!1)}),20),this.composing=0}}}),windows="object"==typeof navigator&&/Win/.test(navigator.platform),commitCharacters=Prec.highest(EditorView.domEventHandlers({keydown(event,view){let field=view.state.field(completionState,!1);if(!field||!field.open||field.open.disabled||field.open.selected<0||event.key.length>1||event.ctrlKey&&(!windows||!event.altKey)||event.metaKey)return!1;let option=field.open.options[field.open.selected],result=field.active.find(a=>a.source==option.source),commitChars=option.completion.commitCharacters||result.result.commitCharacters;return commitChars&&commitChars.indexOf(event.key)>-1&&applyCompletion(view,option),!1}})),autocomplete_dist_baseTheme=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class FieldPos{constructor(field,line,from,to){this.field=field,this.line=line,this.from=from,this.to=to}}class FieldRange{constructor(field,from,to){this.field=field,this.from=from,this.to=to}map(changes){let from=changes.mapPos(this.from,-1,dist_MapMode.TrackDel),to=changes.mapPos(this.to,1,dist_MapMode.TrackDel);return null==from||null==to?null:new FieldRange(this.field,from,to)}}class Snippet{constructor(lines,fieldPositions){this.lines=lines,this.fieldPositions=fieldPositions}instantiate(state,pos){let text=[],lineStart=[pos],lineObj=state.doc.lineAt(pos),baseIndent=/^\s*/.exec(lineObj.text)[0];for(let line of this.lines){if(text.length){let indent=baseIndent,tabs=/^\t*/.exec(line)[0].length;for(let i=0;i<tabs;i++)indent+=state.facet(indentUnit);lineStart.push(pos+indent.length-tabs),line=indent+line.slice(tabs)}text.push(line),pos+=line.length+1}let ranges=this.fieldPositions.map(pos=>new FieldRange(pos.field,lineStart[pos.line]+pos.from,lineStart[pos.line]+pos.to));return{text,ranges}}static parse(template){let m,fields=[],lines=[],positions=[];for(let line of template.split(/\r\n?|\n/)){for(;m=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(line);){let seq=m[1]?+m[1]:null,rawName=m[2]||m[3]||"",found=-1,name=rawName.replace(/\\[{}]/g,m=>m[1]);for(let i=0;i<fields.length;i++)(null!=seq?fields[i].seq==seq:name&&fields[i].name==name)&&(found=i);if(found<0){let i=0;for(;i<fields.length&&(null==seq||null!=fields[i].seq&&fields[i].seq<seq);)i++;fields.splice(i,0,{seq,name}),found=i;for(let pos of positions)pos.field>=found&&pos.field++}positions.push(new FieldPos(found,lines.length,m.index,m.index+name.length)),line=line.slice(0,m.index)+rawName+line.slice(m.index+m[0].length)}line=line.replace(/\\([{}])/g,(_,brace,index)=>{for(let pos of positions)pos.line==lines.length&&pos.from>index&&(pos.from--,pos.to--);return brace}),lines.push(line)}return new Snippet(lines,positions)}}let fieldMarker=Decoration.widget({widget:new class extends WidgetType{toDOM(){let span=document.createElement("span");return span.className="cm-snippetFieldPosition",span}ignoreEvent(){return!1}}}),fieldRange=Decoration.mark({class:"cm-snippetField"});class ActiveSnippet{constructor(ranges,active){this.ranges=ranges,this.active=active,this.deco=Decoration.set(ranges.map(r=>(r.from==r.to?fieldMarker:fieldRange).range(r.from,r.to)))}map(changes){let ranges=[];for(let r of this.ranges){let mapped=r.map(changes);if(!mapped)return null;ranges.push(mapped)}return new ActiveSnippet(ranges,this.active)}selectionInsideField(sel){return sel.ranges.every(range=>this.ranges.some(r=>r.field==this.active&&r.from<=range.from&&r.to>=range.to))}}const setActive=dist_StateEffect.define({map:(value,changes)=>value&&value.map(changes)}),moveToField=dist_StateEffect.define(),snippetState=dist_StateField.define({create:()=>null,update(value,tr){for(let effect of tr.effects){if(effect.is(setActive))return effect.value;if(effect.is(moveToField)&&value)return new ActiveSnippet(value.ranges,effect.value)}return value&&tr.docChanged&&(value=value.map(tr.changes)),value&&tr.selection&&!value.selectionInsideField(tr.selection)&&(value=null),value},provide:f=>EditorView.decorations.from(f,val=>val?val.deco:Decoration.none)});function fieldSelection(ranges,field){return dist_EditorSelection.create(ranges.filter(r=>r.field==field).map(r=>dist_EditorSelection.range(r.from,r.to)))}function snippet(template){let snippet=Snippet.parse(template);return(editor,completion,from,to)=>{let{text,ranges}=snippet.instantiate(editor.state,from),{main}=editor.state.selection,spec={changes:{from,to:to==main.from?main.to:to,insert:Text.of(text)},scrollIntoView:!0,annotations:completion?[pickedCompletion.of(completion),Transaction.userEvent.of("input.complete")]:void 0};if(ranges.length&&(spec.selection=fieldSelection(ranges,0)),ranges.some(r=>r.field>0)){let active=new ActiveSnippet(ranges,0),effects=spec.effects=[setActive.of(active)];void 0===editor.state.field(snippetState,!1)&&effects.push(dist_StateEffect.appendConfig.of([snippetState,addSnippetKeymap,snippetPointerHandler,autocomplete_dist_baseTheme]))}editor.dispatch(editor.state.update(spec))}}function moveField(dir){return({state,dispatch})=>{let active=state.field(snippetState,!1);if(!active||dir<0&&0==active.active)return!1;let next=active.active+dir,last=dir>0&&!active.ranges.some(r=>r.field==next+dir);return dispatch(state.update({selection:fieldSelection(active.ranges,next),effects:setActive.of(last?null:new ActiveSnippet(active.ranges,next)),scrollIntoView:!0})),!0}}const defaultSnippetKeymap=[{key:"Tab",run:moveField(1),shift:moveField(-1)},{key:"Escape",run:({state,dispatch})=>!!state.field(snippetState,!1)&&(dispatch(state.update({effects:setActive.of(null)})),!0)}],snippetKeymap=Facet.define({combine:maps=>maps.length?maps[0]:defaultSnippetKeymap}),addSnippetKeymap=Prec.highest(keymap.compute([snippetKeymap],state=>state.facet(snippetKeymap)));function snippetCompletion(template,completion){return Object.assign(Object.assign({},completion),{apply:snippet(template)})}const snippetPointerHandler=EditorView.domEventHandlers({mousedown(event,view){let pos,active=view.state.field(snippetState,!1);if(!active||null==(pos=view.posAtCoords({x:event.clientX,y:event.clientY})))return!1;let match=active.ranges.find(r=>r.from<=pos&&r.to>=pos);return!(!match||match.field==active.active)&&(view.dispatch({selection:fieldSelection(active.ranges,match.field),effects:setActive.of(active.ranges.some(r=>r.field>match.field)?new ActiveSnippet(active.ranges,match.field):null),scrollIntoView:!0}),!0)}});const dist_defaults={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=dist_StateEffect.define({map(value,mapping){let mapped=mapping.mapPos(value,-1,dist_MapMode.TrackAfter);return mapped??void 0}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1,closedBracket.endSide=-1;const bracketState=dist_StateField.define({create:()=>dist_RangeSet.empty,update(value,tr){if(value=value.map(tr.changes),tr.selection){let line=tr.state.doc.lineAt(tr.selection.main.head);value=value.update({filter:from=>from>=line.from&&from<=line.to})}for(let effect of tr.effects)effect.is(closeBracketEffect)&&(value=value.update({add:[closedBracket.range(effect.value,effect.value+1)]}));return value}});function closeBrackets(){return[dist_inputHandler,bracketState]}function closing(ch){for(let i=0;i<16;i+=2)if("()[]{}<>«»»«［］｛｝".charCodeAt(i)==ch)return"()[]{}<>«»»«［］｛｝".charAt(i+1);return dist_fromCodePoint(ch<128?ch:ch+1)}function config(state,pos){return state.languageDataAt("closeBrackets",pos)[0]||dist_defaults}const android="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),dist_inputHandler=EditorView.inputHandler.of((view,from,to,insert)=>{if((android?view.composing:view.compositionStarted)||view.state.readOnly)return!1;let sel=view.state.selection.main;if(insert.length>2||2==insert.length&&1==dist_codePointSize(dist_codePointAt(insert,0))||from!=sel.from||to!=sel.to)return!1;let tr=function insertBracket(state,bracket){let conf=config(state,state.selection.main.head),tokens=conf.brackets||dist_defaults.brackets;for(let tok of tokens){let closed=closing(dist_codePointAt(tok,0));if(bracket==tok)return closed==tok?handleSame(state,tok,tokens.indexOf(tok+tok+tok)>-1,conf):handleOpen(state,tok,closed,conf.before||dist_defaults.before);if(bracket==closed&&closedBracketAt(state,state.selection.main.from))return handleClose(state,tok,closed)}return null}(view.state,insert);return!!tr&&(view.dispatch(tr),!0)}),closeBracketsKeymap=[{key:"Backspace",run:({state,dispatch})=>{if(state.readOnly)return!1;let tokens=config(state,state.selection.main.head).brackets||dist_defaults.brackets,dont=null,changes=state.changeByRange(range=>{if(range.empty){let before=function prevChar(doc,pos){let prev=doc.sliceString(pos-2,pos);return dist_codePointSize(dist_codePointAt(prev,0))==prev.length?prev:prev.slice(1)}(state.doc,range.head);for(let token of tokens)if(token==before&&nextChar(state.doc,range.head)==closing(dist_codePointAt(token,0)))return{changes:{from:range.head-token.length,to:range.head+token.length},range:dist_EditorSelection.cursor(range.head-token.length)}}return{range:dont=range}});return dont||dispatch(state.update(changes,{scrollIntoView:!0,userEvent:"delete.backward"})),!dont}}];function closedBracketAt(state,pos){let found=!1;return state.field(bracketState).between(0,state.doc.length,from=>{from==pos&&(found=!0)}),found}function nextChar(doc,pos){let next=doc.sliceString(pos,pos+2);return next.slice(0,dist_codePointSize(dist_codePointAt(next,0)))}function handleOpen(state,open,close,closeBefore){let dont=null,changes=state.changeByRange(range=>{if(!range.empty)return{changes:[{insert:open,from:range.from},{insert:close,from:range.to}],effects:closeBracketEffect.of(range.to+open.length),range:dist_EditorSelection.range(range.anchor+open.length,range.head+open.length)};let next=nextChar(state.doc,range.head);return!next||/\s/.test(next)||closeBefore.indexOf(next)>-1?{changes:{insert:open+close,from:range.head},effects:closeBracketEffect.of(range.head+open.length),range:dist_EditorSelection.cursor(range.head+open.length)}:{range:dont=range}});return dont?null:state.update(changes,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(state,_open,close){let dont=null,changes=state.changeByRange(range=>range.empty&&nextChar(state.doc,range.head)==close?{changes:{from:range.head,to:range.head+close.length,insert:close},range:dist_EditorSelection.cursor(range.head+close.length)}:dont={range});return dont?null:state.update(changes,{scrollIntoView:!0,userEvent:"input.type"})}function handleSame(state,token,allowTriple,config){let stringPrefixes=config.stringPrefixes||dist_defaults.stringPrefixes,dont=null,changes=state.changeByRange(range=>{if(!range.empty)return{changes:[{insert:token,from:range.from},{insert:token,from:range.to}],effects:closeBracketEffect.of(range.to+token.length),range:dist_EditorSelection.range(range.anchor+token.length,range.head+token.length)};let start,pos=range.head,next=nextChar(state.doc,pos);if(next==token){if(nodeStart(state,pos))return{changes:{insert:token+token,from:pos},effects:closeBracketEffect.of(pos+token.length),range:dist_EditorSelection.cursor(pos+token.length)};if(closedBracketAt(state,pos)){let content=allowTriple&&state.sliceDoc(pos,pos+3*token.length)==token+token+token?token+token+token:token;return{changes:{from:pos,to:pos+content.length,insert:content},range:dist_EditorSelection.cursor(pos+content.length)}}}else{if(allowTriple&&state.sliceDoc(pos-2*token.length,pos)==token+token&&(start=canStartStringAt(state,pos-2*token.length,stringPrefixes))>-1&&nodeStart(state,start))return{changes:{insert:token+token+token+token,from:pos},effects:closeBracketEffect.of(pos+token.length),range:dist_EditorSelection.cursor(pos+token.length)};if(state.charCategorizer(pos)(next)!=dist_CharCategory.Word&&canStartStringAt(state,pos,stringPrefixes)>-1&&!function probablyInString(state,pos,quoteToken,prefixes){let node=dist_syntaxTree(state).resolveInner(pos,-1),maxPrefix=prefixes.reduce((m,p)=>Math.max(m,p.length),0);for(let i=0;i<5;i++){let start=state.sliceDoc(node.from,Math.min(node.to,node.from+quoteToken.length+maxPrefix)),quotePos=start.indexOf(quoteToken);if(!quotePos||quotePos>-1&&prefixes.indexOf(start.slice(0,quotePos))>-1){let first=node.firstChild;for(;first&&first.from==node.from&&first.to-first.from>quoteToken.length+quotePos;){if(state.sliceDoc(first.to-quoteToken.length,first.to)==quoteToken)return!1;first=first.firstChild}return!0}let parent=node.to==pos&&node.parent;if(!parent)break;node=parent}return!1}(state,pos,token,stringPrefixes))return{changes:{insert:token+token,from:pos},effects:closeBracketEffect.of(pos+token.length),range:dist_EditorSelection.cursor(pos+token.length)}}return{range:dont=range}});return dont?null:state.update(changes,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(state,pos){let tree=dist_syntaxTree(state).resolveInner(pos+1);return tree.parent&&tree.from==pos}function canStartStringAt(state,pos,prefixes){let charCat=state.charCategorizer(pos);if(charCat(state.sliceDoc(pos-1,pos))!=dist_CharCategory.Word)return pos;for(let prefix of prefixes){let start=pos-prefix.length;if(state.sliceDoc(start,pos)==prefix&&charCat(state.sliceDoc(start-1,start))!=dist_CharCategory.Word)return start}return-1}function autocompletion(config={}){return[commitCharacters,completionState,completionConfig.of(config),completionPlugin,completionKeymapExt,autocomplete_dist_baseTheme]}const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{mac:"Alt-`",run:startCompletion},{key:"Escape",run:view=>{let cState=view.state.field(completionState,!1);return!(!cState||!cState.active.some(a=>0!=a.state))&&(view.dispatch({effects:closeCompletionEffect.of(null)}),!0)}},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],state=>state.facet(completionConfig).defaultKeymap?[completionKeymap]:[]));function crelt(){var elt=arguments[0];"string"==typeof elt&&(elt=document.createElement(elt));var i=1,next=arguments[1];if(next&&"object"==typeof next&&null==next.nodeType&&!Array.isArray(next)){for(var name in next)if(Object.prototype.hasOwnProperty.call(next,name)){var value=next[name];"string"==typeof value?elt.setAttribute(name,value):null!=value&&(elt[name]=value)}i++}for(;i<arguments.length;i++)add(elt,arguments[i]);return elt}function add(elt,child){if("string"==typeof child)elt.appendChild(document.createTextNode(child));else if(null==child);else if(null!=child.nodeType)elt.appendChild(child);else{if(!Array.isArray(child))throw new RangeError("Unsupported child node: "+child);for(var i=0;i<child.length;i++)add(elt,child[i])}}const basicNormalize="function"==typeof String.prototype.normalize?x=>x.normalize("NFKD"):x=>x;class SearchCursor{constructor(text,query,from=0,to=text.length,normalize,test){this.test=test,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=text.iterRange(from,to),this.bufferStart=from,this.normalize=normalize?x=>normalize(basicNormalize(x)):basicNormalize,this.query=this.normalize(query)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return dist_codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let next=this.peek();if(next<0)return this.done=!0,this;let str=dist_fromCodePoint(next),start=this.bufferStart+this.bufferPos;this.bufferPos+=dist_codePointSize(next);let norm=this.normalize(str);if(norm.length)for(let i=0,pos=start;;i++){let code=norm.charCodeAt(i),match=this.match(code,pos,this.bufferPos+this.bufferStart);if(i==norm.length-1){if(match)return this.value=match,this;break}pos==start&&i<str.length&&str.charCodeAt(i)==code&&pos++}}}match(code,pos,end){let match=null;for(let i=0;i<this.matches.length;i+=2){let index=this.matches[i],keep=!1;this.query.charCodeAt(index)==code&&(index==this.query.length-1?match={from:this.matches[i+1],to:end}:(this.matches[i]++,keep=!0)),keep||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==code&&(1==this.query.length?match={from:pos,to:end}:this.matches.push(1,pos)),match&&this.test&&!this.test(match.from,match.to,this.buffer,this.bufferStart)&&(match=null),match}}"undefined"!=typeof Symbol&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(null==/x/.unicode?"":"u");class RegExpCursor{constructor(text,query,options,from=0,to=text.length){if(this.text=text,this.to=to,this.curLine="",this.done=!1,this.value=empty,/\\[sWDnr]|\n|\r|\[\^/.test(query))return new MultilineRegExpCursor(text,query,options,from,to);this.re=new RegExp(query,baseFlags+((null==options?void 0:options.ignoreCase)?"i":"")),this.test=null==options?void 0:options.test,this.iter=text.iter();let startLine=text.lineAt(from);this.curLineStart=startLine.from,this.matchPos=toCharEnd(text,from),this.getLine(this.curLineStart)}getLine(skip){this.iter.next(skip),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let off=this.matchPos-this.curLineStart;;){this.re.lastIndex=off;let match=this.matchPos<=this.to&&this.re.exec(this.curLine);if(match){let from=this.curLineStart+match.index,to=from+match[0].length;if(this.matchPos=toCharEnd(this.text,to+(from==to?1:0)),from==this.curLineStart+this.curLine.length&&this.nextLine(),(from<to||from>this.value.to)&&(!this.test||this.test(from,to,match)))return this.value={from,to,match},this;off=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),off=0}}}}const flattened=new WeakMap;class FlattenedDoc{constructor(from,text){this.from=from,this.text=text}get to(){return this.from+this.text.length}static get(doc,from,to){let cached=flattened.get(doc);if(!cached||cached.from>=to||cached.to<=from){let flat=new FlattenedDoc(from,doc.sliceString(from,to));return flattened.set(doc,flat),flat}if(cached.from==from&&cached.to==to)return cached;let{text,from:cachedFrom}=cached;return cachedFrom>from&&(text=doc.sliceString(from,cachedFrom)+text,cachedFrom=from),cached.to<to&&(text+=doc.sliceString(cached.to,to)),flattened.set(doc,new FlattenedDoc(cachedFrom,text)),new FlattenedDoc(from,text.slice(from-cachedFrom,to-cachedFrom))}}class MultilineRegExpCursor{constructor(text,query,options,from,to){this.text=text,this.to=to,this.done=!1,this.value=empty,this.matchPos=toCharEnd(text,from),this.re=new RegExp(query,baseFlags+((null==options?void 0:options.ignoreCase)?"i":"")),this.test=null==options?void 0:options.test,this.flat=FlattenedDoc.get(text,from,this.chunkEnd(from+5e3))}chunkEnd(pos){return pos>=this.to?this.to:this.text.lineAt(pos).to}next(){for(;;){let off=this.re.lastIndex=this.matchPos-this.flat.from,match=this.re.exec(this.flat.text);if(match&&!match[0]&&match.index==off&&(this.re.lastIndex=off+1,match=this.re.exec(this.flat.text)),match){let from=this.flat.from+match.index,to=from+match[0].length;if((this.flat.to>=this.to||match.index+match[0].length<=this.flat.text.length-10)&&(!this.test||this.test(from,to,match)))return this.value={from,to,match},this.matchPos=toCharEnd(this.text,to+(from==to?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function toCharEnd(text,pos){if(pos>=text.length)return pos;let next,line=text.lineAt(pos);for(;pos<line.to&&(next=line.text.charCodeAt(pos-line.from))>=56320&&next<57344;)pos++;return pos}function createLineDialog(view){let input=crelt("input",{class:"cm-textfield",name:"line",value:String(view.state.doc.lineAt(view.state.selection.main.head).number)});function go(){let match=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(input.value);if(!match)return;let{state}=view,startLine=state.doc.lineAt(state.selection.main.head),[,sign,ln,cl,percent]=match,col=cl?+cl.slice(1):0,line=ln?+ln:startLine.number;if(ln&&percent){let pc=line/100;sign&&(pc=pc*("-"==sign?-1:1)+startLine.number/state.doc.lines),line=Math.round(state.doc.lines*pc)}else ln&&sign&&(line=line*("-"==sign?-1:1)+startLine.number);let docLine=state.doc.line(Math.max(1,Math.min(state.doc.lines,line))),selection=dist_EditorSelection.cursor(docLine.from+Math.max(0,Math.min(col,docLine.length)));view.dispatch({effects:[dialogEffect.of(!1),EditorView.scrollIntoView(selection.from,{y:"center"})],selection}),view.focus()}return{dom:crelt("form",{class:"cm-gotoLine",onkeydown:event=>{27==event.keyCode?(event.preventDefault(),view.dispatch({effects:dialogEffect.of(!1)}),view.focus()):13==event.keyCode&&(event.preventDefault(),go())},onsubmit:event=>{event.preventDefault(),go()}},crelt("label",view.state.phrase("Go to line"),": ",input)," ",crelt("button",{class:"cm-button",type:"submit"},view.state.phrase("go")),crelt("button",{name:"close",onclick:()=>{view.dispatch({effects:dialogEffect.of(!1)}),view.focus()},"aria-label":view.state.phrase("close"),type:"button"},["×"]))}}"undefined"!=typeof Symbol&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});const dialogEffect=dist_StateEffect.define(),dist_dialogField=dist_StateField.define({create:()=>!0,update(value,tr){for(let e of tr.effects)e.is(dialogEffect)&&(value=e.value);return value},provide:f=>showPanel.from(f,val=>val?createLineDialog:null)}),search_dist_baseTheme$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}});const searchConfigFacet=Facet.define({combine:configs=>combineConfig(configs,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:view=>new SearchPanel(view),scrollToMatch:range=>EditorView.scrollIntoView(range)})});function search(config){return config?[searchConfigFacet.of(config),searchExtensions]:searchExtensions}class SearchQuery{constructor(config){this.search=config.search,this.caseSensitive=!!config.caseSensitive,this.literal=!!config.literal,this.regexp=!!config.regexp,this.replace=config.replace||"",this.valid=!!this.search&&(!this.regexp||function validRegExp(source){try{return new RegExp(source,baseFlags),!0}catch(_a){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!config.wholeWord}unquote(text){return this.literal?text:text.replace(/\\([nrt\\])/g,(_,ch)=>"n"==ch?"\n":"r"==ch?"\r":"t"==ch?"\t":"\\")}eq(other){return this.search==other.search&&this.replace==other.replace&&this.caseSensitive==other.caseSensitive&&this.regexp==other.regexp&&this.wholeWord==other.wholeWord}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor(state,from=0,to){let st=state.doc?state:EditorState.create({doc:state});return null==to&&(to=st.doc.length),this.regexp?regexpCursor(this,st,from,to):stringCursor(this,st,from,to)}}class dist_QueryType{constructor(spec){this.spec=spec}}function stringCursor(spec,state,from,to){return new SearchCursor(state.doc,spec.unquoted,from,to,spec.caseSensitive?void 0:x=>x.toLowerCase(),spec.wholeWord?function stringWordTest(doc,categorizer){return(from,to,buf,bufPos)=>((bufPos>from||bufPos+buf.length<to)&&(bufPos=Math.max(0,from-2),buf=doc.sliceString(bufPos,Math.min(doc.length,to+2))),!(categorizer(charBefore(buf,from-bufPos))==dist_CharCategory.Word&&categorizer(charAfter(buf,from-bufPos))==dist_CharCategory.Word||categorizer(charAfter(buf,to-bufPos))==dist_CharCategory.Word&&categorizer(charBefore(buf,to-bufPos))==dist_CharCategory.Word))}(state.doc,state.charCategorizer(state.selection.main.head)):void 0)}class StringQuery extends dist_QueryType{constructor(spec){super(spec)}nextMatch(state,curFrom,curTo){let cursor=stringCursor(this.spec,state,curTo,state.doc.length).nextOverlapping();if(cursor.done){let end=Math.min(state.doc.length,curFrom+this.spec.unquoted.length);cursor=stringCursor(this.spec,state,0,end).nextOverlapping()}return cursor.done||cursor.value.from==curFrom&&cursor.value.to==curTo?null:cursor.value}prevMatchInRange(state,from,to){for(let pos=to;;){let start=Math.max(from,pos-1e4-this.spec.unquoted.length),cursor=stringCursor(this.spec,state,start,pos),range=null;for(;!cursor.nextOverlapping().done;)range=cursor.value;if(range)return range;if(start==from)return null;pos-=1e4}}prevMatch(state,curFrom,curTo){let found=this.prevMatchInRange(state,0,curFrom);return found||(found=this.prevMatchInRange(state,Math.max(0,curTo-this.spec.unquoted.length),state.doc.length)),!found||found.from==curFrom&&found.to==curTo?null:found}getReplacement(_result){return this.spec.unquote(this.spec.replace)}matchAll(state,limit){let cursor=stringCursor(this.spec,state,0,state.doc.length),ranges=[];for(;!cursor.next().done;){if(ranges.length>=limit)return null;ranges.push(cursor.value)}return ranges}highlight(state,from,to,add){let cursor=stringCursor(this.spec,state,Math.max(0,from-this.spec.unquoted.length),Math.min(to+this.spec.unquoted.length,state.doc.length));for(;!cursor.next().done;)add(cursor.value.from,cursor.value.to)}}function regexpCursor(spec,state,from,to){return new RegExpCursor(state.doc,spec.search,{ignoreCase:!spec.caseSensitive,test:spec.wholeWord?(categorizer=state.charCategorizer(state.selection.main.head),(_from,_to,match)=>!match[0].length||(categorizer(charBefore(match.input,match.index))!=dist_CharCategory.Word||categorizer(charAfter(match.input,match.index))!=dist_CharCategory.Word)&&(categorizer(charAfter(match.input,match.index+match[0].length))!=dist_CharCategory.Word||categorizer(charBefore(match.input,match.index+match[0].length))!=dist_CharCategory.Word)):void 0},from,to);var categorizer}function charBefore(str,index){return str.slice(dist_findClusterBreak(str,index,!1),index)}function charAfter(str,index){return str.slice(index,dist_findClusterBreak(str,index))}class RegExpQuery extends dist_QueryType{nextMatch(state,curFrom,curTo){let cursor=regexpCursor(this.spec,state,curTo,state.doc.length).next();return cursor.done&&(cursor=regexpCursor(this.spec,state,0,curFrom).next()),cursor.done?null:cursor.value}prevMatchInRange(state,from,to){for(let size=1;;size++){let start=Math.max(from,to-1e4*size),cursor=regexpCursor(this.spec,state,start,to),range=null;for(;!cursor.next().done;)range=cursor.value;if(range&&(start==from||range.from>start+10))return range;if(start==from)return null}}prevMatch(state,curFrom,curTo){return this.prevMatchInRange(state,0,curFrom)||this.prevMatchInRange(state,curTo,state.doc.length)}getReplacement(result){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(m,i)=>{if("&"==i)return result.match[0];if("$"==i)return"$";for(let l=i.length;l>0;l--){let n=+i.slice(0,l);if(n>0&&n<result.match.length)return result.match[n]+i.slice(l)}return m})}matchAll(state,limit){let cursor=regexpCursor(this.spec,state,0,state.doc.length),ranges=[];for(;!cursor.next().done;){if(ranges.length>=limit)return null;ranges.push(cursor.value)}return ranges}highlight(state,from,to,add){let cursor=regexpCursor(this.spec,state,Math.max(0,from-250),Math.min(to+250,state.doc.length));for(;!cursor.next().done;)add(cursor.value.from,cursor.value.to)}}const setSearchQuery=dist_StateEffect.define(),togglePanel=dist_StateEffect.define(),searchState=dist_StateField.define({create:state=>new SearchState(defaultQuery(state).create(),null),update(value,tr){for(let effect of tr.effects)effect.is(setSearchQuery)?value=new SearchState(effect.value.create(),value.panel):effect.is(togglePanel)&&(value=new SearchState(value.query,effect.value?createSearchPanel:null));return value},provide:f=>showPanel.from(f,val=>val.panel)});class SearchState{constructor(query,panel){this.query=query,this.panel=panel}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(view){this.view=view,this.decorations=this.highlight(view.state.field(searchState))}update(update){let state=update.state.field(searchState);(state!=update.startState.field(searchState)||update.docChanged||update.selectionSet||update.viewportChanged)&&(this.decorations=this.highlight(state))}highlight({query,panel}){if(!panel||!query.spec.valid)return Decoration.none;let{view}=this,builder=new RangeSetBuilder;for(let i=0,ranges=view.visibleRanges,l=ranges.length;i<l;i++){let{from,to}=ranges[i];for(;i<l-1&&to>ranges[i+1].from-500;)to=ranges[++i].to;query.highlight(view.state,from,to,(from,to)=>{let selected=view.state.selection.ranges.some(r=>r.from==from&&r.to==to);builder.add(from,to,selected?selectedMatchMark:matchMark)})}return builder.finish()}},{decorations:v=>v.decorations});function searchCommand(f){return view=>{let state=view.state.field(searchState,!1);return state&&state.query.spec.valid?f(view,state):openSearchPanel(view)}}const findNext=searchCommand((view,{query})=>{let{to}=view.state.selection.main,next=query.nextMatch(view.state,to,to);if(!next)return!1;let selection=dist_EditorSelection.single(next.from,next.to),config=view.state.facet(searchConfigFacet);return view.dispatch({selection,effects:[announceMatch(view,next),config.scrollToMatch(selection.main,view)],userEvent:"select.search"}),selectSearchInput(view),!0}),findPrevious=searchCommand((view,{query})=>{let{state}=view,{from}=state.selection.main,prev=query.prevMatch(state,from,from);if(!prev)return!1;let selection=dist_EditorSelection.single(prev.from,prev.to),config=view.state.facet(searchConfigFacet);return view.dispatch({selection,effects:[announceMatch(view,prev),config.scrollToMatch(selection.main,view)],userEvent:"select.search"}),selectSearchInput(view),!0}),selectMatches=searchCommand((view,{query})=>{let ranges=query.matchAll(view.state,1e3);return!(!ranges||!ranges.length)&&(view.dispatch({selection:dist_EditorSelection.create(ranges.map(r=>dist_EditorSelection.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),replaceNext=searchCommand((view,{query})=>{let{state}=view,{from,to}=state.selection.main;if(state.readOnly)return!1;let match=query.nextMatch(state,from,from);if(!match)return!1;let selection,replacement,next=match,changes=[],effects=[];next.from==from&&next.to==to&&(replacement=state.toText(query.getReplacement(next)),changes.push({from:next.from,to:next.to,insert:replacement}),next=query.nextMatch(state,next.from,next.to),effects.push(EditorView.announce.of(state.phrase("replaced match on line $",state.doc.lineAt(from).number)+".")));let changeSet=view.state.changes(changes);return next&&(selection=dist_EditorSelection.single(next.from,next.to).map(changeSet),effects.push(announceMatch(view,next)),effects.push(state.facet(searchConfigFacet).scrollToMatch(selection.main,view))),view.dispatch({changes:changeSet,selection,effects,userEvent:"input.replace"}),!0}),replaceAll=searchCommand((view,{query})=>{if(view.state.readOnly)return!1;let changes=query.matchAll(view.state,1e9).map(match=>{let{from,to}=match;return{from,to,insert:query.getReplacement(match)}});if(!changes.length)return!1;let announceText=view.state.phrase("replaced $ matches",changes.length)+".";return view.dispatch({changes,effects:EditorView.announce.of(announceText),userEvent:"input.replace.all"}),!0});function createSearchPanel(view){return view.state.facet(searchConfigFacet).createPanel(view)}function defaultQuery(state,fallback){var _a,_b,_c,_d,_e;let sel=state.selection.main,selText=sel.empty||sel.to>sel.from+100?"":state.sliceDoc(sel.from,sel.to);if(fallback&&!selText)return fallback;let config=state.facet(searchConfigFacet);return new SearchQuery({search:(null!==(_a=null==fallback?void 0:fallback.literal)&&void 0!==_a?_a:config.literal)?selText:selText.replace(/\n/g,"\\n"),caseSensitive:null!==(_b=null==fallback?void 0:fallback.caseSensitive)&&void 0!==_b?_b:config.caseSensitive,literal:null!==(_c=null==fallback?void 0:fallback.literal)&&void 0!==_c?_c:config.literal,regexp:null!==(_d=null==fallback?void 0:fallback.regexp)&&void 0!==_d?_d:config.regexp,wholeWord:null!==(_e=null==fallback?void 0:fallback.wholeWord)&&void 0!==_e?_e:config.wholeWord})}function getSearchInput(view){let panel=getPanel(view,createSearchPanel);return panel&&panel.dom.querySelector("[main-field]")}function selectSearchInput(view){let input=getSearchInput(view);input&&input==view.root.activeElement&&input.select()}const openSearchPanel=view=>{let state=view.state.field(searchState,!1);if(state&&state.panel){let searchInput=getSearchInput(view);if(searchInput&&searchInput!=view.root.activeElement){let query=defaultQuery(view.state,state.query.spec);query.valid&&view.dispatch({effects:setSearchQuery.of(query)}),searchInput.focus(),searchInput.select()}}else view.dispatch({effects:[togglePanel.of(!0),state?setSearchQuery.of(defaultQuery(view.state,state.query.spec)):dist_StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=view=>{let state=view.state.field(searchState,!1);if(!state||!state.panel)return!1;let panel=getPanel(view,createSearchPanel);return panel&&panel.dom.contains(view.root.activeElement)&&view.focus(),view.dispatch({effects:togglePanel.of(!1)}),!0},searchKeymap=[{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state,dispatch})=>{let sel=state.selection;if(sel.ranges.length>1||sel.main.empty)return!1;let{from,to}=sel.main,ranges=[],main=0;for(let cur=new SearchCursor(state.doc,state.sliceDoc(from,to));!cur.next().done;){if(ranges.length>1e3)return!1;cur.value.from==from&&(main=ranges.length),ranges.push(dist_EditorSelection.range(cur.value.from,cur.value.to))}return dispatch(state.update({selection:dist_EditorSelection.create(ranges,main),userEvent:"select.search.matches"})),!0}},{key:"Mod-Alt-g",run:view=>{let panel=getPanel(view,createLineDialog);if(!panel){let effects=[dialogEffect.of(!0)];null==view.state.field(dist_dialogField,!1)&&effects.push(dist_StateEffect.appendConfig.of([dist_dialogField,search_dist_baseTheme$1])),view.dispatch({effects}),panel=getPanel(view,createLineDialog)}return panel&&panel.dom.querySelector("input").select(),!0}},{key:"Mod-d",run:({state,dispatch})=>{let{ranges}=state.selection;if(ranges.some(sel=>sel.from===sel.to))return(({state,dispatch})=>{let{selection}=state,newSel=dist_EditorSelection.create(selection.ranges.map(range=>state.wordAt(range.head)||dist_EditorSelection.cursor(range.head)),selection.mainIndex);return!newSel.eq(selection)&&(dispatch(state.update({selection:newSel})),!0)})({state,dispatch});let searchedText=state.sliceDoc(ranges[0].from,ranges[0].to);if(state.selection.ranges.some(r=>state.sliceDoc(r.from,r.to)!=searchedText))return!1;let range=function findNextOccurrence(state,query){let{main,ranges}=state.selection,word=state.wordAt(main.head),fullWord=word&&word.from==main.from&&word.to==main.to;for(let cycled=!1,cursor=new SearchCursor(state.doc,query,ranges[ranges.length-1].to);;){if(cursor.next(),!cursor.done){if(cycled&&ranges.some(r=>r.from==cursor.value.from))continue;if(fullWord){let word=state.wordAt(cursor.value.from);if(!word||word.from!=cursor.value.from||word.to!=cursor.value.to)continue}return cursor.value}if(cycled)return null;cursor=new SearchCursor(state.doc,query,0,Math.max(0,ranges[ranges.length-1].from-1)),cycled=!0}}(state,searchedText);return!!range&&(dispatch(state.update({selection:state.selection.addRange(dist_EditorSelection.range(range.from,range.to),!1),effects:EditorView.scrollIntoView(range.to)})),!0)},preventDefault:!0}];class SearchPanel{constructor(view){this.view=view;let query=this.query=view.state.field(searchState).query.spec;function button(name,onclick,content){return crelt("button",{class:"cm-button",name,onclick,type:"button"},content)}this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:query.search,placeholder:phrase(view,"Find"),"aria-label":phrase(view,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:query.replace,placeholder:phrase(view,"Replace"),"aria-label":phrase(view,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:query.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:query.regexp,onchange:this.commit}),this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:query.wholeWord,onchange:this.commit}),this.dom=crelt("div",{onkeydown:e=>this.keydown(e),class:"cm-search"},[this.searchField,button("next",()=>findNext(view),[phrase(view,"next")]),button("prev",()=>findPrevious(view),[phrase(view,"previous")]),button("select",()=>selectMatches(view),[phrase(view,"all")]),crelt("label",null,[this.caseField,phrase(view,"match case")]),crelt("label",null,[this.reField,phrase(view,"regexp")]),crelt("label",null,[this.wordField,phrase(view,"by word")]),...view.state.readOnly?[]:[crelt("br"),this.replaceField,button("replace",()=>replaceNext(view),[phrase(view,"replace")]),button("replaceAll",()=>replaceAll(view),[phrase(view,"replace all")])],crelt("button",{name:"close",onclick:()=>closeSearchPanel(view),"aria-label":phrase(view,"close"),type:"button"},["×"])])}commit(){let query=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});query.eq(this.query)||(this.query=query,this.view.dispatch({effects:setSearchQuery.of(query)}))}keydown(e){!function runScopeHandlers(view,event,scope){return runHandlers(getKeymap(view.state),event,view,scope)}(this.view,e,"search-panel")?13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?findPrevious:findNext)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),replaceNext(this.view)):e.preventDefault()}update(update){for(let tr of update.transactions)for(let effect of tr.effects)effect.is(setSearchQuery)&&!effect.value.eq(this.query)&&this.setQuery(effect.value)}setQuery(query){this.query=query,this.searchField.value=query.search,this.replaceField.value=query.replace,this.caseField.checked=query.caseSensitive,this.reField.checked=query.regexp,this.wordField.checked=query.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(view,phrase){return view.state.phrase(phrase)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(view,{from,to}){let line=view.state.doc.lineAt(from),lineEnd=view.state.doc.lineAt(to).to,start=Math.max(line.from,from-AnnounceMargin),end=Math.min(lineEnd,to+AnnounceMargin),text=view.state.sliceDoc(start,end);if(start!=line.from)for(let i=0;i<AnnounceMargin;i++)if(!Break.test(text[i+1])&&Break.test(text[i])){text=text.slice(i);break}if(end!=lineEnd)for(let i=text.length-1;i>text.length-AnnounceMargin;i--)if(!Break.test(text[i-1])&&Break.test(text[i])){text=text.slice(0,i);break}return EditorView.announce.of(`${view.state.phrase("current match")}. ${text} ${view.state.phrase("on line")} ${line.number}.`)}const search_dist_baseTheme=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.low(searchHighlighter),search_dist_baseTheme];class Stack{constructor(p,stack,state,reducePos,pos,score,buffer,bufferBase,curContext,lookAhead=0,parent){this.p=p,this.stack=stack,this.state=state,this.reducePos=reducePos,this.pos=pos,this.score=score,this.buffer=buffer,this.bufferBase=bufferBase,this.curContext=curContext,this.lookAhead=lookAhead,this.parent=parent}toString(){return`[${this.stack.filter((_,i)=>i%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(p,state,pos=0){let cx=p.parser.context;return new Stack(p,[],state,pos,pos,0,[],0,cx?new StackContext(cx,cx.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(state,start){this.stack.push(this.state,start,this.bufferBase+this.buffer.length),this.state=state}reduce(action){var _a;let depth=action>>19,type=65535&action,{parser}=this.p,lookaheadRecord=this.reducePos<this.pos-25;lookaheadRecord&&this.setLookAhead(this.pos);let dPrec=parser.dynamicPrecedence(type);if(dPrec&&(this.score+=dPrec),0==depth)return this.pushState(parser.getGoto(this.state,type,!0),this.reducePos),type<parser.minRepeatTerm&&this.storeNode(type,this.reducePos,this.reducePos,lookaheadRecord?8:4,!0),void this.reduceContext(type,this.reducePos);let base=this.stack.length-3*(depth-1)-(262144&action?6:0),start=base?this.stack[base-2]:this.p.ranges[0].from,size=this.reducePos-start;size>=2e3&&!(null===(_a=this.p.parser.nodeSet.types[type])||void 0===_a?void 0:_a.isAnonymous)&&(start==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=size):this.p.lastBigReductionSize<size&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=start,this.p.lastBigReductionSize=size));let bufferBase=base?this.stack[base-1]:0,count=this.bufferBase+this.buffer.length-bufferBase;if(type<parser.minRepeatTerm||131072&action){let pos=parser.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(type,start,pos,count+4,!0)}if(262144&action)this.state=this.stack[base];else{let baseStateID=this.stack[base-3];this.state=parser.getGoto(baseStateID,type,!0)}for(;this.stack.length>base;)this.stack.pop();this.reduceContext(type,start)}storeNode(term,start,end,size=4,mustSink=!1){if(0==term&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let cur=this,top=this.buffer.length;if(0==top&&cur.parent&&(top=cur.bufferBase-cur.parent.bufferBase,cur=cur.parent),top>0&&0==cur.buffer[top-4]&&cur.buffer[top-1]>-1){if(start==end)return;if(cur.buffer[top-2]>=start)return void(cur.buffer[top-2]=end)}}if(mustSink&&this.pos!=end){let index=this.buffer.length;if(index>0&&0!=this.buffer[index-4]){let mustMove=!1;for(let scan=index;scan>0&&this.buffer[scan-2]>end;scan-=4)if(this.buffer[scan-1]>=0){mustMove=!0;break}if(mustMove)for(;index>0&&this.buffer[index-2]>end;)this.buffer[index]=this.buffer[index-4],this.buffer[index+1]=this.buffer[index-3],this.buffer[index+2]=this.buffer[index-2],this.buffer[index+3]=this.buffer[index-1],index-=4,size>4&&(size-=4)}this.buffer[index]=term,this.buffer[index+1]=start,this.buffer[index+2]=end,this.buffer[index+3]=size}else this.buffer.push(term,start,end,size)}shift(action,type,start,end){if(131072&action)this.pushState(65535&action,this.pos);else if(262144&action)this.pos=end,this.shiftContext(type,start),type<=this.p.parser.maxNode&&this.buffer.push(type,start,end,4);else{let nextState=action,{parser}=this.p;(end>this.pos||type<=parser.maxNode)&&(this.pos=end,parser.stateFlag(nextState,1)||(this.reducePos=end)),this.pushState(nextState,start),this.shiftContext(type,start),type<=parser.maxNode&&this.buffer.push(type,start,end,4)}}apply(action,next,nextStart,nextEnd){65536&action?this.reduce(action):this.shift(action,next,nextStart,nextEnd)}useNode(value,next){let index=this.p.reused.length-1;(index<0||this.p.reused[index]!=value)&&(this.p.reused.push(value),index++);let start=this.pos;this.reducePos=this.pos=start+value.length,this.pushState(next,start),this.buffer.push(index,start,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,value,this,this.p.stream.reset(this.pos-value.length)))}split(){let parent=this,off=parent.buffer.length;for(;off>0&&parent.buffer[off-2]>parent.reducePos;)off-=4;let buffer=parent.buffer.slice(off),base=parent.bufferBase+off;for(;parent&&base==parent.bufferBase;)parent=parent.parent;return new Stack(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,buffer,base,this.curContext,this.lookAhead,parent)}recoverByDelete(next,nextEnd){let isNode=next<=this.p.parser.maxNode;isNode&&this.storeNode(next,this.pos,nextEnd,4),this.storeNode(0,this.pos,nextEnd,isNode?8:4),this.pos=this.reducePos=nextEnd,this.score-=190}canShift(term){for(let sim=new SimulatedStack(this);;){let action=this.p.parser.stateSlot(sim.state,4)||this.p.parser.hasAction(sim.state,term);if(0==action)return!1;if(!(65536&action))return!0;sim.reduce(action)}}recoverByInsert(next){if(this.stack.length>=300)return[];let nextStates=this.p.parser.nextStates(this.state);if(nextStates.length>8||this.stack.length>=120){let best=[];for(let s,i=0;i<nextStates.length;i+=2)(s=nextStates[i+1])!=this.state&&this.p.parser.hasAction(s,next)&&best.push(nextStates[i],s);if(this.stack.length<120)for(let i=0;best.length<8&&i<nextStates.length;i+=2){let s=nextStates[i+1];best.some((v,i)=>1&i&&v==s)||best.push(nextStates[i],s)}nextStates=best}let result=[];for(let i=0;i<nextStates.length&&result.length<4;i+=2){let s=nextStates[i+1];if(s==this.state)continue;let stack=this.split();stack.pushState(s,this.pos),stack.storeNode(0,stack.pos,stack.pos,4,!0),stack.shiftContext(nextStates[i],this.pos),stack.reducePos=this.pos,stack.score-=200,result.push(stack)}return result}forceReduce(){let{parser}=this.p,reduce=parser.stateSlot(this.state,5);if(!(65536&reduce))return!1;if(!parser.validAction(this.state,reduce)){let depth=reduce>>19,term=65535&reduce,target=this.stack.length-3*depth;if(target<0||parser.getGoto(this.stack[target],term,!1)<0){let backup=this.findForcedReduction();if(null==backup)return!1;reduce=backup}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(reduce),!0}findForcedReduction(){let{parser}=this.p,seen=[],explore=(state,depth)=>{if(!seen.includes(state))return seen.push(state),parser.allActions(state,action=>{if(393216&action);else if(65536&action){let rDepth=(action>>19)-depth;if(rDepth>1){let term=65535&action,target=this.stack.length-3*rDepth;if(target>=0&&parser.getGoto(this.stack[target],term,!1)>=0)return rDepth<<19|65536|term}}else{let found=explore(action,depth+1);if(null!=found)return found}})};return explore(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser}=this.p;return 65535==parser.data[parser.stateSlot(this.state,1)]&&!parser.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(other){if(this.state!=other.state||this.stack.length!=other.stack.length)return!1;for(let i=0;i<this.stack.length;i+=3)if(this.stack[i]!=other.stack[i])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(dialectID){return this.p.parser.dialect.flags[dialectID]}shiftContext(term,start){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,term,this,this.p.stream.reset(start)))}reduceContext(term,start){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,term,this,this.p.stream.reset(start)))}emitContext(){let last=this.buffer.length-1;(last<0||-3!=this.buffer[last])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let last=this.buffer.length-1;(last<0||-4!=this.buffer[last])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(context){if(context!=this.curContext.context){let newCx=new StackContext(this.curContext.tracker,context);newCx.hash!=this.curContext.hash&&this.emitContext(),this.curContext=newCx}}setLookAhead(lookAhead){lookAhead>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=lookAhead)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class StackContext{constructor(tracker,context){this.tracker=tracker,this.context=context,this.hash=tracker.strict?tracker.hash(context):0}}class SimulatedStack{constructor(start){this.start=start,this.state=start.state,this.stack=start.stack,this.base=this.stack.length}reduce(action){let term=65535&action,depth=action>>19;0==depth?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(depth-1);let goto=this.start.p.parser.getGoto(this.stack[this.base-3],term,!0);this.state=goto}}class StackBufferCursor{constructor(stack,pos,index){this.stack=stack,this.pos=pos,this.index=index,this.buffer=stack.buffer,0==this.index&&this.maybeNext()}static create(stack,pos=stack.bufferBase+stack.buffer.length){return new StackBufferCursor(stack,pos,pos-stack.bufferBase)}maybeNext(){let next=this.stack.parent;null!=next&&(this.index=this.stack.bufferBase-next.bufferBase,this.stack=next,this.buffer=next.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new StackBufferCursor(this.stack,this.pos,this.index)}}function decodeArray(input,Type=Uint16Array){if("string"!=typeof input)return input;let array=null;for(let pos=0,out=0;pos<input.length;){let value=0;for(;;){let next=input.charCodeAt(pos++),stop=!1;if(126==next){value=65535;break}next>=92&&next--,next>=34&&next--;let digit=next-32;if(digit>=46&&(digit-=46,stop=!0),value+=digit,stop)break;value*=46}array?array[out++]=value:array=new Type(value)}return array}class CachedToken{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const nullToken=new CachedToken;class InputStream{constructor(input,ranges){this.input=input,this.ranges=ranges,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=nullToken,this.rangeIndex=0,this.pos=this.chunkPos=ranges[0].from,this.range=ranges[0],this.end=ranges[ranges.length-1].to,this.readNext()}resolveOffset(offset,assoc){let range=this.range,index=this.rangeIndex,pos=this.pos+offset;for(;pos<range.from;){if(!index)return null;let next=this.ranges[--index];pos-=range.from-next.to,range=next}for(;assoc<0?pos>range.to:pos>=range.to;){if(index==this.ranges.length-1)return null;let next=this.ranges[++index];pos+=next.from-range.to,range=next}return pos}clipPos(pos){if(pos>=this.range.from&&pos<this.range.to)return pos;for(let range of this.ranges)if(range.to>pos)return Math.max(pos,range.from);return this.end}peek(offset){let pos,result,idx=this.chunkOff+offset;if(idx>=0&&idx<this.chunk.length)pos=this.pos+offset,result=this.chunk.charCodeAt(idx);else{let resolved=this.resolveOffset(offset,1);if(null==resolved)return-1;if(pos=resolved,pos>=this.chunk2Pos&&pos<this.chunk2Pos+this.chunk2.length)result=this.chunk2.charCodeAt(pos-this.chunk2Pos);else{let i=this.rangeIndex,range=this.range;for(;range.to<=pos;)range=this.ranges[++i];this.chunk2=this.input.chunk(this.chunk2Pos=pos),pos+this.chunk2.length>range.to&&(this.chunk2=this.chunk2.slice(0,range.to-pos)),result=this.chunk2.charCodeAt(0)}}return pos>=this.token.lookAhead&&(this.token.lookAhead=pos+1),result}acceptToken(token,endOffset=0){let end=endOffset?this.resolveOffset(endOffset,-1):this.pos;if(null==end||end<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=token,this.token.end=end}acceptTokenTo(token,endPos){this.token.value=token,this.token.end=endPos}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk,chunkPos}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=chunk,this.chunk2Pos=chunkPos,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let nextChunk=this.input.chunk(this.pos),end=this.pos+nextChunk.length;this.chunk=end>this.range.to?nextChunk.slice(0,this.range.to-this.pos):nextChunk,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(n=1){for(this.chunkOff+=n;this.pos+n>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();n-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=n,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(pos,token){if(token?(this.token=token,token.start=pos,token.lookAhead=pos+1,token.value=token.extended=-1):this.token=nullToken,this.pos!=pos){if(this.pos=pos,pos==this.end)return this.setDone(),this;for(;pos<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;pos>=this.range.to;)this.range=this.ranges[++this.rangeIndex];pos>=this.chunkPos&&pos<this.chunkPos+this.chunk.length?this.chunkOff=pos-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(from,to){if(from>=this.chunkPos&&to<=this.chunkPos+this.chunk.length)return this.chunk.slice(from-this.chunkPos,to-this.chunkPos);if(from>=this.chunk2Pos&&to<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(from-this.chunk2Pos,to-this.chunk2Pos);if(from>=this.range.from&&to<=this.range.to)return this.input.read(from,to);let result="";for(let r of this.ranges){if(r.from>=to)break;r.to>from&&(result+=this.input.read(Math.max(r.from,from),Math.min(r.to,to)))}return result}}class TokenGroup{constructor(data,id){this.data=data,this.id=id}token(input,stack){let{parser}=stack.p;dist_readToken(this.data,input,stack,this.id,parser.data,parser.tokenPrecTable)}}TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class LocalTokenGroup{constructor(data,precTable,elseToken){this.precTable=precTable,this.elseToken=elseToken,this.data="string"==typeof data?decodeArray(data):data}token(input,stack){let start=input.pos,skipped=0;for(;;){let atEof=input.next<0,nextPos=input.resolveOffset(1,1);if(dist_readToken(this.data,input,stack,0,this.data,this.precTable),input.token.value>-1)break;if(null==this.elseToken)return;if(atEof||skipped++,null==nextPos)break;input.reset(nextPos,input.token)}skipped&&(input.reset(start,input.token),input.acceptToken(this.elseToken,skipped))}}LocalTokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class ExternalTokenizer{constructor(token,options={}){this.token=token,this.contextual=!!options.contextual,this.fallback=!!options.fallback,this.extend=!!options.extend}}function dist_readToken(data,input,stack,group,precTable,precOffset){let state=0,groupMask=1<<group,{dialect}=stack.p.parser;scan:for(;0!=(groupMask&data[state]);){let accEnd=data[state+1];for(let i=state+3;i<accEnd;i+=2)if((data[i+1]&groupMask)>0){let term=data[i];if(dialect.allows(term)&&(-1==input.token.value||input.token.value==term||overrides(term,input.token.value,precTable,precOffset))){input.acceptToken(term);break}}let next=input.next,low=0,high=data[state+2];if(!(input.next<0&&high>low&&65535==data[accEnd+3*high-3])){for(;low<high;){let mid=low+high>>1,index=accEnd+mid+(mid<<1),from=data[index],to=data[index+1]||65536;if(next<from)high=mid;else{if(!(next>=to)){state=data[index+2],input.advance();continue scan}low=mid+1}}break}state=data[accEnd+3*high-1]}}function findOffset(data,start,term){for(let next,i=start;65535!=(next=data[i]);i++)if(next==term)return i-start;return-1}function overrides(token,prev,tableData,tableOffset){let iPrev=findOffset(tableData,tableOffset,prev);return iPrev<0||findOffset(tableData,tableOffset,token)<iPrev}const verbose="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG);let stackIDs=null;function cutAt(tree,pos,side){let cursor=tree.cursor(IterMode.IncludeAnonymous);for(cursor.moveTo(pos);;)if(!(side<0?cursor.childBefore(pos):cursor.childAfter(pos)))for(;;){if((side<0?cursor.to<pos:cursor.from>pos)&&!cursor.type.isError)return side<0?Math.max(0,Math.min(cursor.to-1,pos-25)):Math.min(tree.length,Math.max(cursor.from+1,pos+25));if(side<0?cursor.prevSibling():cursor.nextSibling())break;if(!cursor.parent())return side<0?0:tree.length}}class dist_FragmentCursor{constructor(fragments,nodeSet){this.fragments=fragments,this.nodeSet=nodeSet,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let fr=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(fr){for(this.safeFrom=fr.openStart?cutAt(fr.tree,fr.from+fr.offset,1)-fr.offset:fr.from,this.safeTo=fr.openEnd?cutAt(fr.tree,fr.to+fr.offset,-1)-fr.offset:fr.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(fr.tree),this.start.push(-fr.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(pos){if(pos<this.nextStart)return null;for(;this.fragment&&this.safeTo<=pos;)this.nextFragment();if(!this.fragment)return null;for(;;){let last=this.trees.length-1;if(last<0)return this.nextFragment(),null;let top=this.trees[last],index=this.index[last];if(index==top.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let next=top.children[index],start=this.start[last]+top.positions[index];if(start>pos)return this.nextStart=start,null;if(next instanceof Tree){if(start==pos){if(start<this.safeFrom)return null;let end=start+next.length;if(end<=this.safeTo){let lookAhead=next.prop(NodeProp.lookAhead);if(!lookAhead||end+lookAhead<this.fragment.to)return next}}this.index[last]++,start+next.length>=Math.max(this.safeFrom,pos)&&(this.trees.push(next),this.start.push(start),this.index.push(0))}else this.index[last]++,this.nextStart=start+next.length}}}class TokenCache{constructor(parser,stream){this.stream=stream,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=parser.tokenizers.map(_=>new CachedToken)}getActions(stack){let actionIndex=0,main=null,{parser}=stack.p,{tokenizers}=parser,mask=parser.stateSlot(stack.state,3),context=stack.curContext?stack.curContext.hash:0,lookAhead=0;for(let i=0;i<tokenizers.length;i++){if(!(1<<i&mask))continue;let tokenizer=tokenizers[i],token=this.tokens[i];if((!main||tokenizer.fallback)&&((tokenizer.contextual||token.start!=stack.pos||token.mask!=mask||token.context!=context)&&(this.updateCachedToken(token,tokenizer,stack),token.mask=mask,token.context=context),token.lookAhead>token.end+25&&(lookAhead=Math.max(token.lookAhead,lookAhead)),0!=token.value)){let startIndex=actionIndex;if(token.extended>-1&&(actionIndex=this.addActions(stack,token.extended,token.end,actionIndex)),actionIndex=this.addActions(stack,token.value,token.end,actionIndex),!tokenizer.extend&&(main=token,actionIndex>startIndex))break}}for(;this.actions.length>actionIndex;)this.actions.pop();return lookAhead&&stack.setLookAhead(lookAhead),main||stack.pos!=this.stream.end||(main=new CachedToken,main.value=stack.p.parser.eofTerm,main.start=main.end=stack.pos,actionIndex=this.addActions(stack,main.value,main.end,actionIndex)),this.mainToken=main,this.actions}getMainToken(stack){if(this.mainToken)return this.mainToken;let main=new CachedToken,{pos,p}=stack;return main.start=pos,main.end=Math.min(pos+1,p.stream.end),main.value=pos==p.stream.end?p.parser.eofTerm:0,main}updateCachedToken(token,tokenizer,stack){let start=this.stream.clipPos(stack.pos);if(tokenizer.token(this.stream.reset(start,token),stack),token.value>-1){let{parser}=stack.p;for(let i=0;i<parser.specialized.length;i++)if(parser.specialized[i]==token.value){let result=parser.specializers[i](this.stream.read(token.start,token.end),stack);if(result>=0&&stack.p.parser.dialect.allows(result>>1)){1&result?token.extended=result>>1:token.value=result>>1;break}}}else token.value=0,token.end=this.stream.clipPos(start+1)}putAction(action,token,end,index){for(let i=0;i<index;i+=3)if(this.actions[i]==action)return index;return this.actions[index++]=action,this.actions[index++]=token,this.actions[index++]=end,index}addActions(stack,token,end,index){let{state}=stack,{parser}=stack.p,{data}=parser;for(let set=0;set<2;set++)for(let i=parser.stateSlot(state,set?2:1);;i+=3){if(65535==data[i]){if(1!=data[i+1]){0==index&&2==data[i+1]&&(index=this.putAction(pair(data,i+2),token,end,index));break}i=pair(data,i+2)}data[i]==token&&(index=this.putAction(pair(data,i+1),token,end,index))}return index}}class dist_Parse{constructor(parser,input,fragments,ranges){this.parser=parser,this.input=input,this.ranges=ranges,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new InputStream(input,ranges),this.tokens=new TokenCache(parser,this.stream),this.topTerm=parser.top[1];let{from}=ranges[0];this.stacks=[Stack.start(this,parser.top[0],from)],this.fragments=fragments.length&&this.stream.end-from>4*parser.bufferLength?new dist_FragmentCursor(fragments,parser.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let stopped,stoppedTokens,stacks=this.stacks,pos=this.minStackPos,newStacks=this.stacks=[];if(this.bigReductionCount>300&&1==stacks.length){let[s]=stacks;for(;s.forceReduce()&&s.stack.length&&s.stack[s.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let i=0;i<stacks.length;i++){let stack=stacks[i];for(;;){if(this.tokens.mainToken=null,stack.pos>pos)newStacks.push(stack);else{if(this.advanceStack(stack,newStacks,stacks))continue;{stopped||(stopped=[],stoppedTokens=[]),stopped.push(stack);let tok=this.tokens.getMainToken(stack);stoppedTokens.push(tok.value,tok.end)}}break}}if(!newStacks.length){let finished=stopped&&function findFinished(stacks){let best=null;for(let stack of stacks){let stopped=stack.p.stoppedAt;(stack.pos==stack.p.stream.end||null!=stopped&&stack.pos>stopped)&&stack.p.parser.stateFlag(stack.state,2)&&(!best||best.score<stack.score)&&(best=stack)}return best}(stopped);if(finished)return verbose&&console.log("Finish with "+this.stackID(finished)),this.stackToTree(finished);if(this.parser.strict)throw verbose&&stopped&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+pos);this.recovering||(this.recovering=5)}if(this.recovering&&stopped){let finished=null!=this.stoppedAt&&stopped[0].pos>this.stoppedAt?stopped[0]:this.runRecovery(stopped,stoppedTokens,newStacks);if(finished)return verbose&&console.log("Force-finish "+this.stackID(finished)),this.stackToTree(finished.forceAll())}if(this.recovering){let maxRemaining=1==this.recovering?1:3*this.recovering;if(newStacks.length>maxRemaining)for(newStacks.sort((a,b)=>b.score-a.score);newStacks.length>maxRemaining;)newStacks.pop();newStacks.some(s=>s.reducePos>pos)&&this.recovering--}else if(newStacks.length>1){outer:for(let i=0;i<newStacks.length-1;i++){let stack=newStacks[i];for(let j=i+1;j<newStacks.length;j++){let other=newStacks[j];if(stack.sameState(other)||stack.buffer.length>500&&other.buffer.length>500){if(!((stack.score-other.score||stack.buffer.length-other.buffer.length)>0)){newStacks.splice(i--,1);continue outer}newStacks.splice(j--,1)}}}newStacks.length>12&&newStacks.splice(12,newStacks.length-12)}this.minStackPos=newStacks[0].pos;for(let i=1;i<newStacks.length;i++)newStacks[i].pos<this.minStackPos&&(this.minStackPos=newStacks[i].pos);return null}stopAt(pos){if(null!=this.stoppedAt&&this.stoppedAt<pos)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=pos}advanceStack(stack,stacks,split){let start=stack.pos,{parser}=this,base=verbose?this.stackID(stack)+" -> ":"";if(null!=this.stoppedAt&&start>this.stoppedAt)return stack.forceReduce()?stack:null;if(this.fragments){let strictCx=stack.curContext&&stack.curContext.tracker.strict,cxHash=strictCx?stack.curContext.hash:0;for(let cached=this.fragments.nodeAt(start);cached;){let match=this.parser.nodeSet.types[cached.type.id]==cached.type?parser.getGoto(stack.state,cached.type.id):-1;if(match>-1&&cached.length&&(!strictCx||(cached.prop(NodeProp.contextHash)||0)==cxHash))return stack.useNode(cached,match),verbose&&console.log(base+this.stackID(stack)+` (via reuse of ${parser.getName(cached.type.id)})`),!0;if(!(cached instanceof Tree)||0==cached.children.length||cached.positions[0]>0)break;let inner=cached.children[0];if(!(inner instanceof Tree&&0==cached.positions[0]))break;cached=inner}}let defaultReduce=parser.stateSlot(stack.state,4);if(defaultReduce>0)return stack.reduce(defaultReduce),verbose&&console.log(base+this.stackID(stack)+` (via always-reduce ${parser.getName(65535&defaultReduce)})`),!0;if(stack.stack.length>=8400)for(;stack.stack.length>6e3&&stack.forceReduce(););let actions=this.tokens.getActions(stack);for(let i=0;i<actions.length;){let action=actions[i++],term=actions[i++],end=actions[i++],last=i==actions.length||!split,localStack=last?stack:stack.split(),main=this.tokens.mainToken;if(localStack.apply(action,term,main?main.start:localStack.pos,end),verbose&&console.log(base+this.stackID(localStack)+` (via ${65536&action?`reduce of ${parser.getName(65535&action)}`:"shift"} for ${parser.getName(term)} @ ${start}${localStack==stack?"":", split"})`),last)return!0;localStack.pos>start?stacks.push(localStack):split.push(localStack)}return!1}advanceFully(stack,newStacks){let pos=stack.pos;for(;;){if(!this.advanceStack(stack,null,null))return!1;if(stack.pos>pos)return pushStackDedup(stack,newStacks),!0}}runRecovery(stacks,tokens,newStacks){let finished=null,restarted=!1;for(let i=0;i<stacks.length;i++){let stack=stacks[i],token=tokens[i<<1],tokenEnd=tokens[1+(i<<1)],base=verbose?this.stackID(stack)+" -> ":"";if(stack.deadEnd){if(restarted)continue;if(restarted=!0,stack.restart(),verbose&&console.log(base+this.stackID(stack)+" (restarted)"),this.advanceFully(stack,newStacks))continue}let force=stack.split(),forceBase=base;for(let j=0;force.forceReduce()&&j<10;j++){if(verbose&&console.log(forceBase+this.stackID(force)+" (via force-reduce)"),this.advanceFully(force,newStacks))break;verbose&&(forceBase=this.stackID(force)+" -> ")}for(let insert of stack.recoverByInsert(token))verbose&&console.log(base+this.stackID(insert)+" (via recover-insert)"),this.advanceFully(insert,newStacks);this.stream.end>stack.pos?(tokenEnd==stack.pos&&(tokenEnd++,token=0),stack.recoverByDelete(token,tokenEnd),verbose&&console.log(base+this.stackID(stack)+` (via recover-delete ${this.parser.getName(token)})`),pushStackDedup(stack,newStacks)):(!finished||finished.score<stack.score)&&(finished=stack)}return finished}stackToTree(stack){return stack.close(),Tree.build({buffer:StackBufferCursor.create(stack),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:stack.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(stack){let id=(stackIDs||(stackIDs=new WeakMap)).get(stack);return id||stackIDs.set(stack,id=String.fromCodePoint(this.nextStackID++)),id+stack}}function pushStackDedup(stack,newStacks){for(let i=0;i<newStacks.length;i++){let other=newStacks[i];if(other.pos==stack.pos&&other.sameState(stack))return void(newStacks[i].score<stack.score&&(newStacks[i]=stack))}newStacks.push(stack)}class Dialect{constructor(source,flags,disabled){this.source=source,this.flags=flags,this.disabled=disabled}allows(term){return!this.disabled||0==this.disabled[term]}}const id=x=>x;class ContextTracker{constructor(spec){this.start=spec.start,this.shift=spec.shift||id,this.reduce=spec.reduce||id,this.reuse=spec.reuse||id,this.hash=spec.hash||(()=>0),this.strict=!1!==spec.strict}}class LRParser extends dist_Parser{constructor(spec){if(super(),this.wrappers=[],14!=spec.version)throw new RangeError(`Parser version (${spec.version}) doesn't match runtime version (14)`);let nodeNames=spec.nodeNames.split(" ");this.minRepeatTerm=nodeNames.length;for(let i=0;i<spec.repeatNodeCount;i++)nodeNames.push("");let topTerms=Object.keys(spec.topRules).map(r=>spec.topRules[r][1]),nodeProps=[];for(let i=0;i<nodeNames.length;i++)nodeProps.push([]);function setProp(nodeID,prop,value){nodeProps[nodeID].push([prop,prop.deserialize(String(value))])}if(spec.nodeProps)for(let propSpec of spec.nodeProps){let prop=propSpec[0];"string"==typeof prop&&(prop=NodeProp[prop]);for(let i=1;i<propSpec.length;){let next=propSpec[i++];if(next>=0)setProp(next,prop,propSpec[i++]);else{let value=propSpec[i+-next];for(let j=-next;j>0;j--)setProp(propSpec[i++],prop,value);i++}}}this.nodeSet=new NodeSet(nodeNames.map((name,i)=>NodeType.define({name:i>=this.minRepeatTerm?void 0:name,id:i,props:nodeProps[i],top:topTerms.indexOf(i)>-1,error:0==i,skipped:spec.skippedNodes&&spec.skippedNodes.indexOf(i)>-1}))),spec.propSources&&(this.nodeSet=this.nodeSet.extend(...spec.propSources)),this.strict=!1,this.bufferLength=DefaultBufferLength;let tokenArray=decodeArray(spec.tokenData);this.context=spec.context,this.specializerSpecs=spec.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let i=0;i<this.specializerSpecs.length;i++)this.specialized[i]=this.specializerSpecs[i].term;this.specializers=this.specializerSpecs.map(getSpecializer),this.states=decodeArray(spec.states,Uint32Array),this.data=decodeArray(spec.stateData),this.goto=decodeArray(spec.goto),this.maxTerm=spec.maxTerm,this.tokenizers=spec.tokenizers.map(value=>"number"==typeof value?new TokenGroup(tokenArray,value):value),this.topRules=spec.topRules,this.dialects=spec.dialects||{},this.dynamicPrecedences=spec.dynamicPrecedences||null,this.tokenPrecTable=spec.tokenPrec,this.termNames=spec.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(input,fragments,ranges){let parse=new dist_Parse(this,input,fragments,ranges);for(let w of this.wrappers)parse=w(parse,input,fragments,ranges);return parse}getGoto(state,term,loose=!1){let table=this.goto;if(term>=table[0])return-1;for(let pos=table[term+1];;){let groupTag=table[pos++],last=1&groupTag,target=table[pos++];if(last&&loose)return target;for(let end=pos+(groupTag>>1);pos<end;pos++)if(table[pos]==state)return target;if(last)return-1}}hasAction(state,terminal){let data=this.data;for(let set=0;set<2;set++)for(let next,i=this.stateSlot(state,set?2:1);;i+=3){if(65535==(next=data[i])){if(1!=data[i+1]){if(2==data[i+1])return pair(data,i+2);break}next=data[i=pair(data,i+2)]}if(next==terminal||0==next)return pair(data,i+1)}return 0}stateSlot(state,slot){return this.states[6*state+slot]}stateFlag(state,flag){return(this.stateSlot(state,0)&flag)>0}validAction(state,action){return!!this.allActions(state,a=>a==action||null)}allActions(state,action){let deflt=this.stateSlot(state,4),result=deflt?action(deflt):void 0;for(let i=this.stateSlot(state,1);null==result;i+=3){if(65535==this.data[i]){if(1!=this.data[i+1])break;i=pair(this.data,i+2)}result=action(pair(this.data,i+1))}return result}nextStates(state){let result=[];for(let i=this.stateSlot(state,1);;i+=3){if(65535==this.data[i]){if(1!=this.data[i+1])break;i=pair(this.data,i+2)}if(!(1&this.data[i+2])){let value=this.data[i+1];result.some((v,i)=>1&i&&v==value)||result.push(this.data[i],value)}}return result}configure(config){let copy=Object.assign(Object.create(LRParser.prototype),this);if(config.props&&(copy.nodeSet=this.nodeSet.extend(...config.props)),config.top){let info=this.topRules[config.top];if(!info)throw new RangeError(`Invalid top rule name ${config.top}`);copy.top=info}return config.tokenizers&&(copy.tokenizers=this.tokenizers.map(t=>{let found=config.tokenizers.find(r=>r.from==t);return found?found.to:t})),config.specializers&&(copy.specializers=this.specializers.slice(),copy.specializerSpecs=this.specializerSpecs.map((s,i)=>{let found=config.specializers.find(r=>r.from==s.external);if(!found)return s;let spec=Object.assign(Object.assign({},s),{external:found.to});return copy.specializers[i]=getSpecializer(spec),spec})),config.contextTracker&&(copy.context=config.contextTracker),config.dialect&&(copy.dialect=this.parseDialect(config.dialect)),null!=config.strict&&(copy.strict=config.strict),config.wrap&&(copy.wrappers=copy.wrappers.concat(config.wrap)),null!=config.bufferLength&&(copy.bufferLength=config.bufferLength),copy}hasWrappers(){return this.wrappers.length>0}getName(term){return this.termNames?this.termNames[term]:String(term<=this.maxNode&&this.nodeSet.types[term].name||term)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(term){let prec=this.dynamicPrecedences;return null==prec?0:prec[term]||0}parseDialect(dialect){let values=Object.keys(this.dialects),flags=values.map(()=>!1);if(dialect)for(let part of dialect.split(" ")){let id=values.indexOf(part);id>=0&&(flags[id]=!0)}let disabled=null;for(let i=0;i<values.length;i++)if(!flags[i])for(let id,j=this.dialects[values[i]];65535!=(id=this.data[j++]);)(disabled||(disabled=new Uint8Array(this.maxTerm+1)))[id]=1;return new Dialect(dialect,flags,disabled)}static deserialize(spec){return new LRParser(spec)}}function pair(data,off){return data[off]|data[off+1]<<16}function getSpecializer(spec){if(spec.external){let mask=spec.extend?1:0;return(value,stack)=>spec.external(value,stack)<<1|mask}return spec.get}const selfClosers={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},closeOnOpen={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function nameChar(ch){return 45==ch||46==ch||58==ch||ch>=65&&ch<=90||95==ch||ch>=97&&ch<=122||ch>=161}function isSpace(ch){return 9==ch||10==ch||13==ch||32==ch}let cachedName=null,cachedInput=null,cachedPos=0;function tagNameAfter(input,offset){let pos=input.pos+offset;if(cachedPos==pos&&cachedInput==input)return cachedName;let next=input.peek(offset);for(;isSpace(next);)next=input.peek(++offset);let name="";for(;nameChar(next);)name+=String.fromCharCode(next),next=input.peek(++offset);return cachedInput=input,cachedPos=pos,cachedName=name?name.toLowerCase():next==question||next==bang?void 0:null}const question=63,bang=33;function ElementContext(name,parent){this.name=name,this.parent=parent}const startTagTerms=[6,10,7,8,9],elementContext=new ContextTracker({start:null,shift:(context,term,stack,input)=>startTagTerms.indexOf(term)>-1?new ElementContext(tagNameAfter(input,1)||"",context):context,reduce:(context,term)=>20==term&&context?context.parent:context,reuse(context,node,stack,input){let type=node.type.id;return 6==type||36==type?new ElementContext(tagNameAfter(input,1)||"",context):context},strict:!1}),tagStart=new ExternalTokenizer((input,stack)=>{if(60!=input.next)return void(input.next<0&&stack.context&&input.acceptToken(57));input.advance();let close=47==input.next;close&&input.advance();let name=tagNameAfter(input,0);if(void 0===name)return;if(!name)return input.acceptToken(close?14:6);let parent=stack.context?stack.context.name:null;if(close){if(name==parent)return input.acceptToken(11);if(parent&&implicitlyClosed[parent])return input.acceptToken(57,-2);if(stack.dialectEnabled(0))return input.acceptToken(12);for(let cx=stack.context;cx;cx=cx.parent)if(cx.name==name)return;input.acceptToken(13)}else{if("script"==name)return input.acceptToken(7);if("style"==name)return input.acceptToken(8);if("textarea"==name)return input.acceptToken(9);if(selfClosers.hasOwnProperty(name))return input.acceptToken(10);parent&&closeOnOpen[parent]&&closeOnOpen[parent][name]?input.acceptToken(57,-1):input.acceptToken(6)}},{contextual:!0}),commentContent=new ExternalTokenizer(input=>{for(let dashes=0,i=0;;i++){if(input.next<0){i&&input.acceptToken(58);break}if(45==input.next)dashes++;else{if(62==input.next&&dashes>=2){i>=3&&input.acceptToken(58,-2);break}dashes=0}input.advance()}});const endTag=new ExternalTokenizer((input,stack)=>{if(47==input.next&&62==input.peek(1)){let selfClosing=stack.dialectEnabled(1)||function inForeignElement(context){for(;context;context=context.parent)if("svg"==context.name||"math"==context.name)return!0;return!1}(stack.context);input.acceptToken(selfClosing?5:4,2)}else 62==input.next&&input.acceptToken(4,1)});function contentTokenizer(tag,textToken,endToken){let lastState=2+tag.length;return new ExternalTokenizer(input=>{for(let state=0,matchedLen=0,i=0;;i++){if(input.next<0){i&&input.acceptToken(textToken);break}if(0==state&&60==input.next||1==state&&47==input.next||state>=2&&state<lastState&&input.next==tag.charCodeAt(state-2))state++,matchedLen++;else if(2!=state&&state!=lastState||!isSpace(input.next)){if(state==lastState&&62==input.next){i>matchedLen?input.acceptToken(textToken,-matchedLen):input.acceptToken(endToken,-(matchedLen-2));break}if((10==input.next||13==input.next)&&i){input.acceptToken(textToken,1);break}state=matchedLen=0}else matchedLen++;input.advance()}})}const scriptTokens=contentTokenizer("script",54,1),styleTokens=contentTokenizer("style",55,2),textareaTokens=contentTokenizer("textarea",56,3),htmlHighlighting=styleTags({"Text RawText":tags.content,"StartTag StartCloseTag SelfClosingEndTag EndTag":tags.angleBracket,TagName:tags.tagName,"MismatchedCloseTag/TagName":[tags.tagName,tags.invalid],AttributeName:tags.attributeName,"AttributeValue UnquotedAttributeValue":tags.attributeValue,Is:tags.definitionOperator,"EntityReference CharacterReference":tags.character,Comment:tags.blockComment,ProcessingInst:tags.processingInstruction,DoctypeDecl:tags.documentMeta}),parser=LRParser.deserialize({version:14,states:",xOVO!rOOO!WQ#tO'#CqO!]Q#tO'#CzO!bQ#tO'#C}O!gQ#tO'#DQO!lQ#tO'#DSO!qOaO'#CpO!|ObO'#CpO#XOdO'#CpO$eO!rO'#CpOOO`'#Cp'#CpO$lO$fO'#DTO$tQ#tO'#DVO$yQ#tO'#DWOOO`'#Dk'#DkOOO`'#DY'#DYQVO!rOOO%OQ&rO,59]O%ZQ&rO,59fO%fQ&rO,59iO%qQ&rO,59lO%|Q&rO,59nOOOa'#D^'#D^O&XOaO'#CxO&dOaO,59[OOOb'#D_'#D_O&lObO'#C{O&wObO,59[OOOd'#D`'#D`O'POdO'#DOO'[OdO,59[OOO`'#Da'#DaO'dO!rO,59[O'kQ#tO'#DROOO`,59[,59[OOOp'#Db'#DbO'pO$fO,59oOOO`,59o,59oO'xQ#|O,59qO'}Q#|O,59rOOO`-E7W-E7WO(SQ&rO'#CsOOQW'#DZ'#DZO(bQ&rO1G.wOOOa1G.w1G.wOOO`1G/Y1G/YO(mQ&rO1G/QOOOb1G/Q1G/QO(xQ&rO1G/TOOOd1G/T1G/TO)TQ&rO1G/WOOO`1G/W1G/WO)`Q&rO1G/YOOOa-E7[-E7[O)kQ#tO'#CyOOO`1G.v1G.vOOOb-E7]-E7]O)pQ#tO'#C|OOOd-E7^-E7^O)uQ#tO'#DPOOO`-E7_-E7_O)zQ#|O,59mOOOp-E7`-E7`OOO`1G/Z1G/ZOOO`1G/]1G/]OOO`1G/^1G/^O*PQ,UO,59_OOQW-E7X-E7XOOOa7+$c7+$cOOO`7+$t7+$tOOOb7+$l7+$lOOOd7+$o7+$oOOO`7+$r7+$rO*[Q#|O,59eO*aQ#|O,59hO*fQ#|O,59kOOO`1G/X1G/XO*kO7[O'#CvO*|OMhO'#CvOOQW1G.y1G.yOOO`1G/P1G/POOO`1G/S1G/SOOO`1G/V1G/VOOOO'#D['#D[O+_O7[O,59bOOQW,59b,59bOOOO'#D]'#D]O+pOMhO,59bOOOO-E7Y-E7YOOQW1G.|1G.|OOOO-E7Z-E7Z",stateData:",]~O!^OS~OUSOVPOWQOXROYTO[]O][O^^O`^Oa^Ob^Oc^Ox^O{_O!dZO~OfaO~OfbO~OfcO~OfdO~OfeO~O!WfOPlP!ZlP~O!XiOQoP!ZoP~O!YlORrP!ZrP~OUSOVPOWQOXROYTOZqO[]O][O^^O`^Oa^Ob^Oc^Ox^O!dZO~O!ZrO~P#dO![sO!euO~OfvO~OfwO~OS|OT}OhyO~OS!POT}OhyO~OS!ROT}OhyO~OS!TOT}OhyO~OS}OT}OhyO~O!WfOPlX!ZlX~OP!WO!Z!XO~O!XiOQoX!ZoX~OQ!ZO!Z!XO~O!YlORrX!ZrX~OR!]O!Z!XO~O!Z!XO~P#dOf!_O~O![sO!e!aO~OS!bO~OS!cO~Oi!dOSgXTgXhgX~OS!fOT!gOhyO~OS!hOT!gOhyO~OS!iOT!gOhyO~OS!jOT!gOhyO~OS!gOT!gOhyO~Of!kO~Of!lO~Of!mO~OS!nO~Ok!qO!`!oO!b!pO~OS!rO~OS!sO~OS!tO~Oa!uOb!uOc!uO!`!wO!a!uO~Oa!xOb!xOc!xO!b!wO!c!xO~Oa!uOb!uOc!uO!`!{O!a!uO~Oa!xOb!xOc!xO!b!{O!c!xO~OT~bac!dx{!d~",goto:"%p!`PPPPPPPPPPPPPPPPPPPP!a!gP!mPP!yP!|#P#S#Y#]#`#f#i#l#r#x!aP!a!aP$O$U$l$r$x%O%U%[%bPPPPPPPP%hX^OX`pXUOX`pezabcde{!O!Q!S!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ!ObQ!QcQ!SdQ!UeZ!e{!O!Q!S!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:"⚠ StartCloseTag StartCloseTag StartCloseTag EndTag SelfClosingEndTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:67,context:elementContext,nodeProps:[["closedBy",-10,1,2,3,7,8,9,10,11,12,13,"EndTag",6,"EndTag SelfClosingEndTag",-4,21,30,33,36,"CloseTag"],["openedBy",4,"StartTag StartCloseTag",5,"StartTag",-4,29,32,35,37,"OpenTag"],["group",-9,14,17,18,19,20,39,40,41,42,"Entity",16,"Entity TextContent",-3,28,31,34,"TextContent Entity"],["isolate",-11,21,29,30,32,33,35,36,37,38,41,42,"ltr",-3,26,27,39,""]],propSources:[htmlHighlighting],skippedNodes:[0],repeatNodeCount:9,tokenData:"!<p!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs3_sv-_vw3}wxHYx}-_}!OH{!O!P-_!P!Q$q!Q![-_![!]Mz!]!^-_!^!_!$S!_!`!;x!`!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4U-_4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!Z$|c`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bX`P!a`!cpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UV`P!cpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pT`POv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!cpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({W`P!a`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!a`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!a`!cpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYkWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]``P!a`!cp!^^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljhS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ebhSkWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0rXhSqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0mS1bP;=`<%l0m[1hP;=`<%l/^!V1vchS`P!a`!cpOq&Xqr1krs&}sv1kvw0mwx(tx!P1k!P!Q&X!Q!^1k!^!_*V!_!a&X!a#s1k#s$f&X$f;'S1k;'S;=`3R<%l?Ah1k?Ah?BY&X?BY?Mn1k?MnO&X!V3UP;=`<%l1k!_3[P;=`<%l-_!Z3hV!`h`P!cpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_4WihSkWc!ROX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst>]tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^/^!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!Z5zbkWOX5uXZ7SZ[5u[^7S^p5uqr5urs7Sst+Ptw5uwx7Sx!]5u!]!^7w!^!a7S!a#S5u#S#T7S#T;'S5u;'S;=`8n<%lO5u!R7VVOp7Sqs7St!]7S!]!^7l!^;'S7S;'S;=`7q<%lO7S!R7qOa!R!R7tP;=`<%l7S!Z8OYkWa!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z8qP;=`<%l5u!_8{ihSkWOX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst/^tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^:j!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!_:sbhSkWa!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V<QchSOp7Sqr;{rs7Sst0mtw;{wx7Sx!P;{!P!Q7S!Q!];{!]!^=]!^!a7S!a#s;{#s$f7S$f;'S;{;'S;=`>P<%l?Ah;{?Ah?BY7S?BY?Mn;{?MnO7S!V=dXhSa!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!V>SP;=`<%l;{!_>YP;=`<%l8t!_>dhhSkWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^/^!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!Z@TakWOX@OXZAYZ[@O[^AY^p@Oqr@OrsAYsw@OwxAYx!]@O!]!^Az!^!aAY!a#S@O#S#TAY#T;'S@O;'S;=`Bq<%lO@O!RA]UOpAYq!]AY!]!^Ao!^;'SAY;'S;=`At<%lOAY!RAtOb!R!RAwP;=`<%lAY!ZBRYkWb!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZBtP;=`<%l@O!_COhhSkWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^Dj!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!_DsbhSkWb!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VFQbhSOpAYqrE{rsAYswE{wxAYx!PE{!P!QAY!Q!]E{!]!^GY!^!aAY!a#sE{#s$fAY$f;'SE{;'S;=`G|<%l?AhE{?Ah?BYAY?BY?MnE{?MnOAY!VGaXhSb!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!VHPP;=`<%lE{!_HVP;=`<%lBw!ZHcW!bx`P!a`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aIYlhS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OKQ!O!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aK_khS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!`&X!`!aMS!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!TM_X`P!a`!cp!eQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!aNZ!ZhSfQ`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMz!O!PMz!P!Q$q!Q![Mz![!]Mz!]!^-_!^!_*V!_!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f$}-_$}%OMz%O%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4UMz4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Je-_$Je$JgMz$Jg$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!a!$PP;=`<%lMz!R!$ZY!a`!cpOq*Vqr!$yrs(Vsv*Vwx)ex!a*V!a!b!4t!b;'S*V;'S;=`*s<%lO*V!R!%Q]!a`!cpOr*Vrs(Vsv*Vwx)ex}*V}!O!%y!O!f*V!f!g!']!g#W*V#W#X!0`#X;'S*V;'S;=`*s<%lO*V!R!&QX!a`!cpOr*Vrs(Vsv*Vwx)ex}*V}!O!&m!O;'S*V;'S;=`*s<%lO*V!R!&vV!a`!cp!dPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!'dX!a`!cpOr*Vrs(Vsv*Vwx)ex!q*V!q!r!(P!r;'S*V;'S;=`*s<%lO*V!R!(WX!a`!cpOr*Vrs(Vsv*Vwx)ex!e*V!e!f!(s!f;'S*V;'S;=`*s<%lO*V!R!(zX!a`!cpOr*Vrs(Vsv*Vwx)ex!v*V!v!w!)g!w;'S*V;'S;=`*s<%lO*V!R!)nX!a`!cpOr*Vrs(Vsv*Vwx)ex!{*V!{!|!*Z!|;'S*V;'S;=`*s<%lO*V!R!*bX!a`!cpOr*Vrs(Vsv*Vwx)ex!r*V!r!s!*}!s;'S*V;'S;=`*s<%lO*V!R!+UX!a`!cpOr*Vrs(Vsv*Vwx)ex!g*V!g!h!+q!h;'S*V;'S;=`*s<%lO*V!R!+xY!a`!cpOr!+qrs!,hsv!+qvw!-Swx!.[x!`!+q!`!a!/j!a;'S!+q;'S;=`!0Y<%lO!+qq!,mV!cpOv!,hvx!-Sx!`!,h!`!a!-q!a;'S!,h;'S;=`!.U<%lO!,hP!-VTO!`!-S!`!a!-f!a;'S!-S;'S;=`!-k<%lO!-SP!-kO{PP!-nP;=`<%l!-Sq!-xS!cp{POv(Vx;'S(V;'S;=`(h<%lO(Vq!.XP;=`<%l!,ha!.aX!a`Or!.[rs!-Ssv!.[vw!-Sw!`!.[!`!a!.|!a;'S!.[;'S;=`!/d<%lO!.[a!/TT!a`{POr)esv)ew;'S)e;'S;=`)y<%lO)ea!/gP;=`<%l!.[!R!/sV!a`!cp{POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!0]P;=`<%l!+q!R!0gX!a`!cpOr*Vrs(Vsv*Vwx)ex#c*V#c#d!1S#d;'S*V;'S;=`*s<%lO*V!R!1ZX!a`!cpOr*Vrs(Vsv*Vwx)ex#V*V#V#W!1v#W;'S*V;'S;=`*s<%lO*V!R!1}X!a`!cpOr*Vrs(Vsv*Vwx)ex#h*V#h#i!2j#i;'S*V;'S;=`*s<%lO*V!R!2qX!a`!cpOr*Vrs(Vsv*Vwx)ex#m*V#m#n!3^#n;'S*V;'S;=`*s<%lO*V!R!3eX!a`!cpOr*Vrs(Vsv*Vwx)ex#d*V#d#e!4Q#e;'S*V;'S;=`*s<%lO*V!R!4XX!a`!cpOr*Vrs(Vsv*Vwx)ex#X*V#X#Y!+q#Y;'S*V;'S;=`*s<%lO*V!R!4{Y!a`!cpOr!4trs!5ksv!4tvw!6Vwx!8]x!a!4t!a!b!:]!b;'S!4t;'S;=`!;r<%lO!4tq!5pV!cpOv!5kvx!6Vx!a!5k!a!b!7W!b;'S!5k;'S;=`!8V<%lO!5kP!6YTO!a!6V!a!b!6i!b;'S!6V;'S;=`!7Q<%lO!6VP!6lTO!`!6V!`!a!6{!a;'S!6V;'S;=`!7Q<%lO!6VP!7QOxPP!7TP;=`<%l!6Vq!7]V!cpOv!5kvx!6Vx!`!5k!`!a!7r!a;'S!5k;'S;=`!8V<%lO!5kq!7yS!cpxPOv(Vx;'S(V;'S;=`(h<%lO(Vq!8YP;=`<%l!5ka!8bX!a`Or!8]rs!6Vsv!8]vw!6Vw!a!8]!a!b!8}!b;'S!8];'S;=`!:V<%lO!8]a!9SX!a`Or!8]rs!6Vsv!8]vw!6Vw!`!8]!`!a!9o!a;'S!8];'S;=`!:V<%lO!8]a!9vT!a`xPOr)esv)ew;'S)e;'S;=`)y<%lO)ea!:YP;=`<%l!8]!R!:dY!a`!cpOr!4trs!5ksv!4tvw!6Vwx!8]x!`!4t!`!a!;S!a;'S!4t;'S;=`!;r<%lO!4t!R!;]V!a`!cpxPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!;uP;=`<%l!4t!V!<TXiS`P!a`!cpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X",tokenizers:[scriptTokens,styleTokens,textareaTokens,endTag,tagStart,commentContent,0,1,2,3,4,5],topRules:{Document:[0,15]},dialects:{noMatch:0,selfClosing:509},tokenPrec:511});function dist_getAttrs(openTag,input){let attrs=Object.create(null);for(let att of openTag.getChildren(23)){let name=att.getChild(24),value=att.getChild(26)||att.getChild(27);name&&(attrs[input.read(name.from,name.to)]=value?26==value.type.id?input.read(value.from+1,value.to-1):input.read(value.from,value.to):"")}return attrs}function findTagName(openTag,input){let tagNameNode=openTag.getChild(22);return tagNameNode?input.read(tagNameNode.from,tagNameNode.to):" "}function maybeNest(node,input,tags){let attrs;for(let tag of tags)if(!tag.attrs||tag.attrs(attrs||(attrs=dist_getAttrs(node.node.parent.firstChild,input))))return{parser:tag.parser};return null}function configureNesting(tags=[],attributes=[]){let script=[],style=[],textarea=[],other=[];for(let tag of tags){("script"==tag.tag?script:"style"==tag.tag?style:"textarea"==tag.tag?textarea:other).push(tag)}let attrs=attributes.length?Object.create(null):null;for(let attr of attributes)(attrs[attr.name]||(attrs[attr.name]=[])).push(attr);return function parseMixed(nest){return(parse,input,fragments,ranges)=>new MixedParse(parse,nest,input,fragments,ranges)}((node,input)=>{let id=node.type.id;if(28==id)return maybeNest(node,input,script);if(31==id)return maybeNest(node,input,style);if(34==id)return maybeNest(node,input,textarea);if(20==id&&other.length){let attrs,n=node.node,open=n.firstChild,tagName=open&&findTagName(open,input);if(tagName)for(let tag of other)if(tag.tag==tagName&&(!tag.attrs||tag.attrs(attrs||(attrs=dist_getAttrs(open,input))))){let close=n.lastChild,to=37==close.type.id?close.from:n.to;if(to>open.to)return{parser:tag.parser,overlay:[{from:open.to,to}]}}}if(attrs&&23==id){let nameNode,n=node.node;if(nameNode=n.firstChild){let matches=attrs[input.read(nameNode.from,nameNode.to)];if(matches)for(let attr of matches){if(attr.tagName&&attr.tagName!=findTagName(n.parent,input))continue;let value=n.lastChild;if(26==value.type.id){let from=value.from+1,last=value.lastChild,to=value.to-(last&&last.isError?0:1);if(to>from)return{parser:attr.parser,overlay:[{from,to}]}}else if(27==value.type.id)return{parser:attr.parser,overlay:[{from:value.from,to:value.to}]}}}}return null})}const space=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288];function isAlpha(ch){return ch>=65&&ch<=90||ch>=97&&ch<=122||ch>=161}function isDigit(ch){return ch>=48&&ch<=57}function isHex(ch){return isDigit(ch)||ch>=97&&ch<=102||ch>=65&&ch<=70}const identifierTokens=(id,varName,callee)=>(input,stack)=>{for(let inside=!1,dashes=0,i=0;;i++){let{next}=input;if(isAlpha(next)||45==next||95==next||inside&&isDigit(next))!inside&&(45!=next||i>0)&&(inside=!0),dashes===i&&45==next&&dashes++,input.advance();else{if(92!=next||10==input.peek(1)){inside&&input.acceptToken(2==dashes&&stack.canShift(2)?varName:40==next?callee:id);break}if(input.advance(),isHex(input.next)){do{input.advance()}while(isHex(input.next));32==input.next&&input.advance()}else input.next>-1&&input.advance();inside=!0}}},identifiers=new ExternalTokenizer(identifierTokens(123,2,124)),queryIdentifiers=new ExternalTokenizer(identifierTokens(125,3,4)),descendant=new ExternalTokenizer(input=>{if(space.includes(input.peek(-1))){let{next}=input;(isAlpha(next)||95==next||35==next||46==next||42==next||91==next||58==next&&isAlpha(input.peek(1))||45==next||38==next)&&input.acceptToken(122)}}),unitToken=new ExternalTokenizer(input=>{if(!space.includes(input.peek(-1))){let{next}=input;if(37==next&&(input.advance(),input.acceptToken(1)),isAlpha(next)){do{input.advance()}while(isAlpha(input.next)||isDigit(input.next));input.acceptToken(1)}}}),cssHighlighting=styleTags({"AtKeyword import charset namespace keyframes media supports":tags.definitionKeyword,"from to selector":tags.keyword,NamespaceName:tags.namespace,KeyframeName:tags.labelName,KeyframeRangeName:tags.operatorKeyword,TagName:tags.tagName,ClassName:tags.className,PseudoClassName:tags.constant(tags.className),IdName:tags.labelName,"FeatureName PropertyName":tags.propertyName,AttributeName:tags.attributeName,NumberLiteral:tags.number,KeywordQuery:tags.keyword,UnaryQueryOp:tags.operatorKeyword,"CallTag ValueName":tags.atom,VariableName:tags.variableName,Callee:tags.operatorKeyword,Unit:tags.unit,"UniversalSelector NestingSelector":tags.definitionOperator,"MatchOp CompareOp":tags.compareOperator,"ChildOp SiblingOp, LogicOp":tags.logicOperator,BinOp:tags.arithmeticOperator,Important:tags.modifier,Comment:tags.blockComment,ColorLiteral:tags.color,"ParenthesizedContent StringLiteral":tags.string,":":tags.punctuation,"PseudoOp #":tags.derefOperator,"; ,":tags.separator,"( )":tags.paren,"[ ]":tags.squareBracket,"{ }":tags.brace}),spec_callee={__proto__:null,lang:38,"nth-child":38,"nth-last-child":38,"nth-of-type":38,"nth-last-of-type":38,dir:38,"host-context":38,if:84,url:124,"url-prefix":124,domain:124,regexp:124},spec_queryIdentifier={__proto__:null,or:98,and:98,not:106,only:106,layer:170},spec_QueryCallee={__proto__:null,selector:112,layer:166},spec_AtKeyword={__proto__:null,"@import":162,"@media":174,"@charset":178,"@namespace":182,"@keyframes":188,"@supports":200,"@scope":204},spec_identifier={__proto__:null,to:207},dist_parser=LRParser.deserialize({version:14,states:"EbQYQdOOO#qQdOOP#xO`OOOOQP'#Cf'#CfOOQP'#Ce'#CeO#}QdO'#ChO$nQaO'#CcO$xQdO'#CkO%TQdO'#DpO%YQdO'#DrO%_QdO'#DuO%_QdO'#DxOOQP'#FV'#FVO&eQhO'#EhOOQS'#FU'#FUOOQS'#Ek'#EkQYQdOOO&lQdO'#EOO&PQhO'#EUO&lQdO'#EWO'aQdO'#EYO'lQdO'#E]O'tQhO'#EcO(VQdO'#EeO(bQaO'#CfO)VQ`O'#D{O)[Q`O'#F`O)gQdO'#F`QOQ`OOP)qO&jO'#CaPOOO)C@t)C@tOOQP'#Cj'#CjOOQP,59S,59SO#}QdO,59SO)|QdO,59VO%TQdO,5:[O%YQdO,5:^O%_QdO,5:aO%_QdO,5:cO%_QdO,5:dO%_QdO'#ErO*XQ`O,58}O*aQdO'#DzOOQS,58},58}OOQP'#Cn'#CnOOQO'#Dn'#DnOOQP,59V,59VO*hQ`O,59VO*mQ`O,59VOOQP'#Dq'#DqOOQP,5:[,5:[OOQO'#Ds'#DsO*rQpO,5:^O+]QaO,5:aO+sQaO,5:dOOQW'#DZ'#DZO,ZQhO'#DdO,xQhO'#FaO'tQhO'#DbO-WQ`O'#DhOOQW'#F['#F[O-]Q`O,5;SO-eQ`O'#DeOOQS-E8i-E8iOOQ['#Cs'#CsO-jQdO'#CtO.QQdO'#CzO.hQdO'#C}O/OQ!pO'#DPO1RQ!jO,5:jOOQO'#DU'#DUO*mQ`O'#DTO1cQ!nO'#FXO3`Q`O'#DVO3eQ`O'#DkOOQ['#FX'#FXO-`Q`O,5:pO3jQ!bO,5:rOOQS'#E['#E[O3rQ`O,5:tO3wQdO,5:tOOQO'#E_'#E_O4PQ`O,5:wO4UQhO,5:}O%_QdO'#DgOOQS,5;P,5;PO-eQ`O,5;PO4^QdO,5;PO4fQdO,5:gO4vQdO'#EtO5TQ`O,5;zO5TQ`O,5;zPOOO'#Ej'#EjP5`O&jO,58{POOO,58{,58{OOQP1G.n1G.nOOQP1G.q1G.qO*hQ`O1G.qO*mQ`O1G.qOOQP1G/v1G/vO5kQpO1G/xO5sQaO1G/{O6ZQaO1G/}O6qQaO1G0OO7XQaO,5;^OOQO-E8p-E8pOOQS1G.i1G.iO7cQ`O,5:fO7hQdO'#DoO7oQdO'#CrOOQP1G/x1G/xO&lQdO1G/xO7vQ!jO'#DZO8UQ!bO,59vO8^QhO,5:OOOQO'#F]'#F]O8XQ!bO,59zO'tQhO,59xO8fQhO'#EvO8sQ`O,5;{O9OQhO,59|O9uQhO'#DiOOQW,5:S,5:SOOQS1G0n1G0nOOQW,5:P,5:PO9|Q!fO'#FYOOQS'#FY'#FYOOQS'#Em'#EmO;^QdO,59`OOQ[,59`,59`O;tQdO,59fOOQ[,59f,59fO<[QdO,59iOOQ[,59i,59iOOQ[,59k,59kO&lQdO,59mO<rQhO'#EQOOQW'#EQ'#EQO=WQ`O1G0UO1[QhO1G0UOOQ[,59o,59oO'tQhO'#DXOOQ[,59q,59qO=]Q#tO,5:VOOQS1G0[1G0[OOQS1G0^1G0^OOQS1G0`1G0`O=hQ`O1G0`O=mQdO'#E`OOQS1G0c1G0cOOQS1G0i1G0iO=xQaO,5:RO-`Q`O1G0kOOQS1G0k1G0kO-eQ`O1G0kO>PQ!fO1G0ROOQO1G0R1G0ROOQO,5;`,5;`O>gQdO,5;`OOQO-E8r-E8rO>tQ`O1G1fPOOO-E8h-E8hPOOO1G.g1G.gOOQP7+$]7+$]OOQP7+%d7+%dO&lQdO7+%dOOQS1G0Q1G0QO?PQaO'#F_O?ZQ`O,5:ZO?`Q!fO'#ElO@^QdO'#FWO@hQ`O,59^O@mQ!bO7+%dO&lQdO1G/bO@uQhO1G/fOOQW1G/j1G/jOOQW1G/d1G/dOAWQhO,5;bOOQO-E8t-E8tOAfQhO'#DZOAtQhO'#F^OBPQ`O'#F^OBUQ`O,5:TOOQS-E8k-E8kOOQ[1G.z1G.zOOQ[1G/Q1G/QOOQ[1G/T1G/TOOQ[1G/X1G/XOBZQdO,5:lOOQS7+%p7+%pOB`Q`O7+%pOBeQhO'#DYOBmQ`O,59sO'tQhO,59sOOQ[1G/q1G/qOBuQ`O1G/qOOQS7+%z7+%zOBzQbO'#DPOOQO'#Eb'#EbOCYQ`O'#EaOOQO'#Ea'#EaOCeQ`O'#EwOCmQdO,5:zOOQS,5:z,5:zOOQ[1G/m1G/mOOQS7+&V7+&VO-`Q`O7+&VOCxQ!fO'#EsO&lQdO'#EsOEPQdO7+%mOOQO7+%m7+%mOOQO1G0z1G0zOEdQ!bO<<IOOElQdO'#EqOEvQ`O,5;yOOQP1G/u1G/uOOQS-E8j-E8jOFOQdO'#EpOFYQ`O,5;rOOQ]1G.x1G.xOOQP<<IO<<IOOFbQdO7+$|OOQO'#D]'#D]OFiQ!bO7+%QOFqQhO'#EoOF{Q`O,5;xO&lQdO,5;xOOQW1G/o1G/oOOQO'#ES'#ESOGTQ`O1G0WOOQS<<I[<<I[O&lQdO,59tOGnQhO1G/_OOQ[1G/_1G/_OGuQ`O1G/_OOQW-E8l-E8lOOQ[7+%]7+%]OOQO,5:{,5:{O=pQdO'#ExOCeQ`O,5;cOOQS,5;c,5;cOOQS-E8u-E8uOOQS1G0f1G0fOOQS<<Iq<<IqOG}Q!fO,5;_OOQS-E8q-E8qOOQO<<IX<<IXOOQPAN>jAN>jOIUQaO,5;]OOQO-E8o-E8oOI`QdO,5;[OOQO-E8n-E8nOOQW<<Hh<<HhOOQW<<Hl<<HlOIjQhO<<HlOI{QhO,5;ZOJWQ`O,5;ZOOQO-E8m-E8mOJ]QdO1G1dOBZQdO'#EuOJgQ`O7+%rOOQW7+%r7+%rOJoQ!bO1G/`OOQ[7+$y7+$yOJzQhO7+$yPKRQ`O'#EnOOQO,5;d,5;dOOQO-E8v-E8vOOQS1G0}1G0}OKWQ`OAN>WO&lQdO1G0uOK]Q`O7+'OOOQO,5;a,5;aOOQO-E8s-E8sOOQW<<I^<<I^OOQ[<<He<<HePOQW,5;Y,5;YOOQWG23rG23rOKeQdO7+&a",stateData:"Kx~O#sOS#tQQ~OW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#oRO~OQiOW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#ohO~O#m$SP~P!dO#tmO~O#ooO~O]qO`rOarOjsOmtO!juO!mwO#nvO~OpzO!^xO~P$SOc!QO#o|O#p}O~O#o!RO~O#o!TO~OW[OZ[O]TO`VOaVOjWOmXO!jYO!mZO#oRO~OS!]Oe!YO!V![O!Y!`O#q!XOp$TP~Ok$TP~P&POQ!jOe!cOm!dOp!eOr!mOt!mOz!kO!`!lO#o!bO#p!hO#}!fO~Ot!qO!`!lO#o!pO~Ot!sO#o!sO~OS!]Oe!YO!V![O!Y!`O#q!XO~Oe!vOpzO#Z!xO~O]YX`YX`!pXaYXjYXmYXpYX!^YX!jYX!mYX#nYX~O`!zO~Ok!{O#m$SXo$SX~O#m$SXo$SX~P!dO#u#OO#v#OO#w#QO~Oc#UO#o|O#p}O~OpzO!^xO~Oo$SP~P!dOe#`O~Oe#aO~Ol#bO!h#cO~O]qO`rOarOjsOmtO~Op!ia!^!ia!j!ia!m!ia#n!iad!ia~P*zOp!la!^!la!j!la!m!la#n!lad!la~P*zOR#gOS!]Oe!YOr#gOt#gO!V![O!Y!`O#q#dO#}!fO~O!R#iO!^#jOk$TXp$TX~Oe#mO~Ok#oOpzO~Oe!vO~O]#rO`#rOd#uOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl#wO~P&lO]#rO`#rOi#rOj#rOk#rOo#yO~P&lOP#zOSsXesXksXvsX!VsX!YsX!usX!wsX#qsX!TsXQsX]sX`sXdsXisXjsXmsXpsXrsXtsXzsX!`sX#osX#psX#}sXlsXosX!^sX!qsX#msX~Ov#{O!u#|O!w#}Ok$TP~P'tOe#aOS#{Xk#{Xv#{X!V#{X!Y#{X!u#{X!w#{X#q#{XQ#{X]#{X`#{Xd#{Xi#{Xj#{Xm#{Xp#{Xr#{Xt#{Xz#{X!`#{X#o#{X#p#{X#}#{Xl#{Xo#{X!^#{X!q#{X#m#{X~Oe$RO~Oe$TO~Ok$VOv#{O~Ok$WO~Ot$XO!`!lO~Op$YO~OpzO!R#iO~OpzO#Z$`O~O!q$bOk!oa#m!oao!oa~P&lOk#hX#m#hXo#hX~P!dOk!{O#m$Sao$Sa~O#u#OO#v#OO#w$hO~Ol$jO!h$kO~Op!ii!^!ii!j!ii!m!ii#n!iid!ii~P*zOp!ki!^!ki!j!ki!m!ki#n!kid!ki~P*zOp!li!^!li!j!li!m!li#n!lid!li~P*zOp#fa!^#fa~P$SOo$lO~Od$RP~P%_Od#zP~P&lO`!PXd}X!R}X!T!PX~O`$sO!T$tO~Od$uO!R#iO~Ok#jXp#jX!^#jX~P'tO!^#jOk$Tap$Ta~O!R#iOk!Uap!Ua!^!Uad!Ua`!Ua~OS!]Oe!YO!V![O!Y!`O#q$yO~Od$QP~P9dOv#{OQ#|X]#|X`#|Xd#|Xe#|Xi#|Xj#|Xk#|Xm#|Xp#|Xr#|Xt#|Xz#|X!`#|X#o#|X#p#|X#}#|Xl#|Xo#|X~O]#rO`#rOd%OOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl%PO~P&lO]#rO`#rOi#rOj#rOk#rOo%QO~P&lOe%SOS!tXk!tX!V!tX!Y!tX#q!tX~Ok%TO~Od%YOt%ZO!a%ZO~Ok%[O~Oo%cO#o%^O#}%]O~Od%dO~P$SOv#{O!^%hO!q%jOk!oi#m!oio!oi~P&lOk#ha#m#hao#ha~P!dOk!{O#m$Sio$Si~O!^%mOd$RX~P$SOd%oO~Ov#{OQ#`Xd#`Xe#`Xm#`Xp#`Xr#`Xt#`Xz#`X!^#`X!`#`X#o#`X#p#`X#}#`X~O!^%qOd#zX~P&lOd%sO~Ol%tOv#{O~OR#gOr#gOt#gO#q%vO#}!fO~O!R#iOk#jap#ja!^#ja~O`!PXd}X!R}X!^}X~O!R#iO!^%xOd$QX~O`%zO~Od%{O~O#o%|O~Ok&OO~O`&PO!R#iO~Od&ROk&QO~Od&UO~OP#zOpsX!^sXdsX~O#}%]Op#TX!^#TX~OpzO!^&WO~Oo&[O#o%^O#}%]O~Ov#{OQ#gXe#gXk#gXm#gXp#gXr#gXt#gXz#gX!^#gX!`#gX!q#gX#m#gX#o#gX#p#gX#}#gXo#gX~O!^%hO!q&`Ok!oq#m!oqo!oq~P&lOl&aOv#{O~Od#eX!^#eX~P%_O!^%mOd$Ra~Od#dX!^#dX~P&lO!^%qOd#za~Od&fO~P&lOd&gO!T&hO~Od#cX!^#cX~P9dO!^%xOd$Qa~O]&mOd&oO~OS#bae#ba!V#ba!Y#ba#q#ba~Od&qO~PG]Od&qOk&rO~Ov#{OQ#gae#gak#gam#gap#gar#gat#gaz#ga!^#ga!`#ga!q#ga#m#ga#o#ga#p#ga#}#gao#ga~Od#ea!^#ea~P$SOd#da!^#da~P&lOR#gOr#gOt#gO#q%vO#}%]O~O!R#iOd#ca!^#ca~O`&xO~O!^%xOd$Qi~P&lO]&mOd&|O~Ov#{Od|ik|i~Od&}O~PG]Ok'OO~Od'PO~O!^%xOd$Qq~Od#cq!^#cq~P&lO#s!a#t#}]#}v!m~",goto:"2h$UPPPPP$VP$YP$c$uP$cP%X$cPP%_PPP%e%o%oPPPPP%oPP%oP&]P%oP%o'W%oP't'w'}'}(^'}P'}P'}P'}'}P(m'}(yP(|PP)p)v$c)|$c*SP$cP$c$cP*Y*{+YP$YP+aP+dP$YP$YP$YP+j$YP+m+p+s+z$YP$YPP$YP,P,V,f,|-[-b-l-r-x.O.U.`.f.l.rPPPPPPPPPPP.x/R/w/z0|P1U1u2O2R2U2[RnQ_^OP`kz!{$dq[OPYZ`kuvwxz!v!{#`$d%mqSOPYZ`kuvwxz!v!{#`$d%mQpTR#RqQ!OVR#SrQ#S!QS$Q!i!jR$i#U!V!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'Q!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QU#g!Y$t&hU%`$Y%b&WR&V%_!V!iac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QR$S!kQ%W$RR&S%Xk!^]bf!Y![!g#i#j#m$P$R%X%xQ#e!YQ${#mQ%w$tQ&j%xR&w&hQ!ygQ#p!`Q$^!xR%f$`R#n!]!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QQ!qdR$X!rQ!PVR#TrQ#S!PR$i#TQ!SWR#VsQ!UXR#WtQ{UQ!wgQ#^yQ#o!_Q$U!nQ$[!uQ$_!yQ%e$^Q&Y%aQ&]%fR&v&XSjPzQ!}kQ$c!{R%k$dZiPkz!{$dR$P!gQ%}%SR&z&mR!rdR!teR$Z!tS%a$Y%bR&t&WV%_$Y%b&WQ#PmR$g#PQ`OSkPzU!a`k$dR$d!{Q$p#aY%p$p%u&d&l'QQ%u$sQ&d%qQ&l%zR'Q&xQ#t!cQ#v!dQ#x!eV$}#t#v#xQ%X$RR&T%XQ%y$zS&k%y&yR&y&lQ%r$pR&e%rQ%n$mR&c%nQyUR#]yQ%i$aR&_%iQ!|jS$e!|$fR$f!}Q&n%}R&{&nQ#k!ZR$x#kQ%b$YR&Z%bQ&X%aR&u&X__OP`kz!{$d^UOP`kz!{$dQ!VYQ!WZQ#XuQ#YvQ#ZwQ#[xQ$]!vQ$m#`R&b%mR$q#aQ!gaQ!oc[#q!c!d!e#t#v#xQ$a!zd$o#a$p$s%q%u%z&d&l&x'QQ$r#cQ%R#{S%g$a%iQ%l$kQ&^%hR&p&P]#s!c!d!e#t#v#xW!Z]b!g$PQ!ufQ#f!YQ#l![Q$v#iQ$w#jQ$z#mS%V$R%XR&i%xQ#h!YQ%w$tR&w&hR$|#mR$n#`QlPR#_zQ!_]Q!nbQ$O!gR%U$P",nodeNames:"⚠ Unit VariableName VariableName QueryCallee Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector . ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue AtKeyword # ; ] [ BracketedValue } { BracedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee IfExpression if ArgList IfBranch KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp ComparisonQuery CompareOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector ParenthesizedSelector CallQuery ArgList , CallLiteral CallTag ParenthesizedContent PseudoClassName ArgList IdSelector IdName AttributeSelector AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp Block Declaration PropertyName Important ImportStatement import Layer layer LayerName layer MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports ScopeStatement scope to AtRule Styles",maxTerm:143,nodeProps:[["isolate",-2,5,36,""],["openedBy",20,"(",28,"[",31,"{"],["closedBy",21,")",29,"]",32,"}"]],propSources:[cssHighlighting],skippedNodes:[0,5,106],repeatNodeCount:15,tokenData:"JQ~R!YOX$qX^%i^p$qpq%iqr({rs-ust/itu6Wuv$qvw7Qwx7cxy9Qyz9cz{9h{|:R|}>t}!O?V!O!P?t!P!Q@]!Q![AU![!]BP!]!^B{!^!_C^!_!`DY!`!aDm!a!b$q!b!cEn!c!}$q!}#OG{#O#P$q#P#QH^#Q#R6W#R#o$q#o#pHo#p#q6W#q#rIQ#r#sIc#s#y$q#y#z%i#z$f$q$f$g%i$g#BY$q#BY#BZ%i#BZ$IS$q$IS$I_%i$I_$I|$q$I|$JO%i$JO$JT$q$JT$JU%i$JU$KV$q$KV$KW%i$KW&FU$q&FU&FV%i&FV;'S$q;'S;=`Iz<%lO$q`$tSOy%Qz;'S%Q;'S;=`%c<%lO%Q`%VS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q`%fP;=`<%l%Q~%nh#s~OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Q~'ah#s~!a`OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Qj)OUOy%Qz#]%Q#]#^)b#^;'S%Q;'S;=`%c<%lO%Qj)gU!a`Oy%Qz#a%Q#a#b)y#b;'S%Q;'S;=`%c<%lO%Qj*OU!a`Oy%Qz#d%Q#d#e*b#e;'S%Q;'S;=`%c<%lO%Qj*gU!a`Oy%Qz#c%Q#c#d*y#d;'S%Q;'S;=`%c<%lO%Qj+OU!a`Oy%Qz#f%Q#f#g+b#g;'S%Q;'S;=`%c<%lO%Qj+gU!a`Oy%Qz#h%Q#h#i+y#i;'S%Q;'S;=`%c<%lO%Qj,OU!a`Oy%Qz#T%Q#T#U,b#U;'S%Q;'S;=`%c<%lO%Qj,gU!a`Oy%Qz#b%Q#b#c,y#c;'S%Q;'S;=`%c<%lO%Qj-OU!a`Oy%Qz#h%Q#h#i-b#i;'S%Q;'S;=`%c<%lO%Qj-iS!qY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q~-xWOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c<%lO-u~.gOt~~.jRO;'S-u;'S;=`.s;=`O-u~.vXOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c;=`<%l-u<%lO-u~/fP;=`<%l-uj/nYjYOy%Qz!Q%Q!Q![0^![!c%Q!c!i0^!i#T%Q#T#Z0^#Z;'S%Q;'S;=`%c<%lO%Qj0cY!a`Oy%Qz!Q%Q!Q![1R![!c%Q!c!i1R!i#T%Q#T#Z1R#Z;'S%Q;'S;=`%c<%lO%Qj1WY!a`Oy%Qz!Q%Q!Q![1v![!c%Q!c!i1v!i#T%Q#T#Z1v#Z;'S%Q;'S;=`%c<%lO%Qj1}YrY!a`Oy%Qz!Q%Q!Q![2m![!c%Q!c!i2m!i#T%Q#T#Z2m#Z;'S%Q;'S;=`%c<%lO%Qj2tYrY!a`Oy%Qz!Q%Q!Q![3d![!c%Q!c!i3d!i#T%Q#T#Z3d#Z;'S%Q;'S;=`%c<%lO%Qj3iY!a`Oy%Qz!Q%Q!Q![4X![!c%Q!c!i4X!i#T%Q#T#Z4X#Z;'S%Q;'S;=`%c<%lO%Qj4`YrY!a`Oy%Qz!Q%Q!Q![5O![!c%Q!c!i5O!i#T%Q#T#Z5O#Z;'S%Q;'S;=`%c<%lO%Qj5TY!a`Oy%Qz!Q%Q!Q![5s![!c%Q!c!i5s!i#T%Q#T#Z5s#Z;'S%Q;'S;=`%c<%lO%Qj5zSrY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qd6ZUOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qd6tS!hS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qb7VSZQOy%Qz;'S%Q;'S;=`%c<%lO%Q~7fWOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z<%lO7c~8RRO;'S7c;'S;=`8[;=`O7c~8_XOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z;=`<%l7c<%lO7c~8}P;=`<%l7cj9VSeYOy%Qz;'S%Q;'S;=`%c<%lO%Q~9hOd~n9oUWQvWOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qj:YWvW!mQOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj:wU!a`Oy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Qj;bY!a`#}YOy%Qz!Q%Q!Q![;Z![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj<VY!a`Oy%Qz{%Q{|<u|}%Q}!O<u!O!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj<zU!a`Oy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj=eU!a`#}YOy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj>O[!a`#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj>yS!^YOy%Qz;'S%Q;'S;=`%c<%lO%Qj?[WvWOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj?yU]YOy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Q~@bTvWOy%Qz{@q{;'S%Q;'S;=`%c<%lO%Q~@xS!a`#t~Oy%Qz;'S%Q;'S;=`%c<%lO%QjAZ[#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%QjBUU`YOy%Qz![%Q![!]Bh!];'S%Q;'S;=`%c<%lO%QbBoSaQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjCQSkYOy%Qz;'S%Q;'S;=`%c<%lO%QhCcU!TWOy%Qz!_%Q!_!`Cu!`;'S%Q;'S;=`%c<%lO%QhC|S!TW!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QlDaS!TW!hSOy%Qz;'S%Q;'S;=`%c<%lO%QjDtV!jQ!TWOy%Qz!_%Q!_!`Cu!`!aEZ!a;'S%Q;'S;=`%c<%lO%QbEbS!jQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjEqYOy%Qz}%Q}!OFa!O!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjFfW!a`Oy%Qz!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjGV[iY!a`Oy%Qz}%Q}!OGO!O!Q%Q!Q![GO![!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjHQSmYOy%Qz;'S%Q;'S;=`%c<%lO%QnHcSl^Oy%Qz;'S%Q;'S;=`%c<%lO%QjHtSpYOy%Qz;'S%Q;'S;=`%c<%lO%QjIVSoYOy%Qz;'S%Q;'S;=`%c<%lO%QfIhU!mQOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Q`I}P;=`<%l$q",tokenizers:[descendant,unitToken,identifiers,queryIdentifiers,1,2,3,4,new LocalTokenGroup("m~RRYZ[z{a~~g~aO#v~~dP!P!Qg~lO#w~~",28,129)],topRules:{StyleSheet:[0,6],Styles:[1,105]},specialized:[{term:124,get:value=>spec_callee[value]||-1},{term:125,get:value=>spec_queryIdentifier[value]||-1},{term:4,get:value=>spec_QueryCallee[value]||-1},{term:25,get:value=>spec_AtKeyword[value]||-1},{term:123,get:value=>spec_identifier[value]||-1}],tokenPrec:1963});let _properties=null;function properties(){if(!_properties&&"object"==typeof document&&document.body){let{style}=document.body,names=[],seen=new Set;for(let prop in style)"cssText"!=prop&&"cssFloat"!=prop&&"string"==typeof style[prop]&&(/[A-Z]/.test(prop)&&(prop=prop.replace(/[A-Z]/g,ch=>"-"+ch.toLowerCase())),seen.has(prop)||(names.push(prop),seen.add(prop)));_properties=names.sort().map(name=>({type:"property",label:name,apply:name+": "}))}return _properties||[]}const pseudoClasses=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(name=>({type:"class",label:name})),values=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(name=>({type:"keyword",label:name})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(name=>({type:"constant",label:name}))),dist_tags=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(name=>({type:"type",label:name})),atRules=["@charset","@color-profile","@container","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@position-try","@property","@scope","@starting-style","@supports","@view-transition"].map(label=>({type:"keyword",label})),dist_identifier=/^(\w[\w-]*|-\w[\w-]*|)$/,variable=/^-(-[\w-]*)?$/;const VariablesByNode=new NodeWeakMap,declSelector=["Declaration"];function astTop(node){for(let cur=node;;){if(cur.type.isTop)return cur;if(!(cur=cur.parent))return node}}function variableNames(doc,node,isVariable){if(node.to-node.from>4096){let known=VariablesByNode.get(node);if(known)return known;let result=[],seen=new Set,cursor=node.cursor(IterMode.IncludeAnonymous);if(cursor.firstChild())do{for(let option of variableNames(doc,cursor.node,isVariable))seen.has(option.label)||(seen.add(option.label),result.push(option))}while(cursor.nextSibling());return VariablesByNode.set(node,result),result}{let result=[],seen=new Set;return node.cursor().iterate(node=>{var _a;if(isVariable(node)&&node.matchContext(declSelector)&&":"==(null===(_a=node.node.nextSibling)||void 0===_a?void 0:_a.name)){let name=doc.sliceString(node.from,node.to);seen.has(name)||(seen.add(name),result.push({label:name,type:"variable"}))}}),result}}const defineCSSCompletionSource=isVariable=>context=>{let{state,pos}=context,node=dist_syntaxTree(state).resolveInner(pos,-1),isDash=node.type.isError&&node.from==node.to-1&&"-"==state.doc.sliceString(node.from,node.to);if("PropertyName"==node.name||(isDash||"TagName"==node.name)&&/^(Block|Styles)$/.test(node.resolve(node.to).name))return{from:node.from,options:properties(),validFor:dist_identifier};if("ValueName"==node.name)return{from:node.from,options:values,validFor:dist_identifier};if("PseudoClassName"==node.name)return{from:node.from,options:pseudoClasses,validFor:dist_identifier};if(isVariable(node)||(context.explicit||isDash)&&function isVarArg(node,doc){var _a;if(("("==node.name||node.type.isError)&&(node=node.parent||node),"ArgList"!=node.name)return!1;let callee=null===(_a=node.parent)||void 0===_a?void 0:_a.firstChild;return"Callee"==(null==callee?void 0:callee.name)&&"var"==doc.sliceString(callee.from,callee.to)}(node,state.doc))return{from:isVariable(node)||isDash?node.from:pos,options:variableNames(state.doc,astTop(node),isVariable),validFor:variable};if("TagName"==node.name){for(let{parent}=node;parent;parent=parent.parent)if("Block"==parent.name)return{from:node.from,options:properties(),validFor:dist_identifier};return{from:node.from,options:dist_tags,validFor:dist_identifier}}if("AtKeyword"==node.name)return{from:node.from,options:atRules,validFor:dist_identifier};if(!context.explicit)return null;let above=node.resolve(pos),before=above.childBefore(pos);return before&&":"==before.name&&"PseudoClassSelector"==above.name?{from:pos,options:pseudoClasses,validFor:dist_identifier}:before&&":"==before.name&&"Declaration"==above.name||"ArgList"==above.name?{from:pos,options:values,validFor:dist_identifier}:"Block"==above.name||"Styles"==above.name?{from:pos,options:properties(),validFor:dist_identifier}:null},cssCompletionSource=defineCSSCompletionSource(n=>"VariableName"==n.name),cssLanguage=LRLanguage.define({name:"css",parser:dist_parser.configure({props:[indentNodeProp.add({Declaration:continuedIndent()}),foldNodeProp.add({"Block KeyframeList":foldInside})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function css(){return new LanguageSupport(cssLanguage,cssLanguage.data.of({autocomplete:cssCompletionSource}))}const dist_space=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],trackNewline=new ContextTracker({start:!1,shift:(context,term)=>5==term||6==term||319==term?context:320==term,strict:!1}),insertSemicolon=new ExternalTokenizer((input,stack)=>{let{next}=input;(125==next||-1==next||stack.context)&&input.acceptToken(317)},{contextual:!0,fallback:!0}),noSemicolon=new ExternalTokenizer((input,stack)=>{let after,{next}=input;dist_space.indexOf(next)>-1||(47!=next||47!=(after=input.peek(1))&&42!=after)&&(125==next||59==next||-1==next||stack.context||input.acceptToken(315))},{contextual:!0}),noSemicolonType=new ExternalTokenizer((input,stack)=>{91!=input.next||stack.context||input.acceptToken(316)},{contextual:!0}),operatorToken=new ExternalTokenizer((input,stack)=>{let{next}=input;if(43==next||45==next){if(input.advance(),next==input.next){input.advance();let mayPostfix=!stack.context&&stack.canShift(1);input.acceptToken(mayPostfix?1:2)}}else 63==next&&46==input.peek(1)&&(input.advance(),input.advance(),(input.next<48||input.next>57)&&input.acceptToken(3))},{contextual:!0});function identifierChar(ch,start){return ch>=65&&ch<=90||ch>=97&&ch<=122||95==ch||ch>=192||!start&&ch>=48&&ch<=57}const jsx=new ExternalTokenizer((input,stack)=>{if(60!=input.next||!stack.dialectEnabled(0))return;if(input.advance(),47==input.next)return;let back=0;for(;dist_space.indexOf(input.next)>-1;)input.advance(),back++;if(identifierChar(input.next,!0)){for(input.advance(),back++;identifierChar(input.next,!1);)input.advance(),back++;for(;dist_space.indexOf(input.next)>-1;)input.advance(),back++;if(44==input.next)return;for(let i=0;;i++){if(7==i){if(!identifierChar(input.next,!0))return;break}if(input.next!="extends".charCodeAt(i))break;input.advance(),back++}}input.acceptToken(4,-back)}),jsHighlight=styleTags({"get set async static":tags.modifier,"for while do if else switch try catch finally return throw break continue default case":tags.controlKeyword,"in of await yield void typeof delete instanceof as satisfies":tags.operatorKeyword,"let var const using function class extends":tags.definitionKeyword,"import export from":tags.moduleKeyword,"with debugger new":tags.keyword,TemplateString:tags.special(tags.string),super:tags.atom,BooleanLiteral:tags.bool,this:tags.self,null:tags.null,Star:tags.modifier,VariableName:tags.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":tags.function(tags.variableName),VariableDefinition:tags.definition(tags.variableName),Label:tags.labelName,PropertyName:tags.propertyName,PrivatePropertyName:tags.special(tags.propertyName),"CallExpression/MemberExpression/PropertyName":tags.function(tags.propertyName),"FunctionDeclaration/VariableDefinition":tags.function(tags.definition(tags.variableName)),"ClassDeclaration/VariableDefinition":tags.definition(tags.className),"NewExpression/VariableName":tags.className,PropertyDefinition:tags.definition(tags.propertyName),PrivatePropertyDefinition:tags.definition(tags.special(tags.propertyName)),UpdateOp:tags.updateOperator,"LineComment Hashbang":tags.lineComment,BlockComment:tags.blockComment,Number:tags.number,String:tags.string,Escape:tags.escape,ArithOp:tags.arithmeticOperator,LogicOp:tags.logicOperator,BitOp:tags.bitwiseOperator,CompareOp:tags.compareOperator,RegExp:tags.regexp,Equals:tags.definitionOperator,Arrow:tags.function(tags.punctuation),": Spread":tags.punctuation,"( )":tags.paren,"[ ]":tags.squareBracket,"{ }":tags.brace,"InterpolationStart InterpolationEnd":tags.special(tags.brace),".":tags.derefOperator,", ;":tags.separator,"@":tags.meta,TypeName:tags.typeName,TypeDefinition:tags.definition(tags.typeName),"type enum interface implements namespace module declare":tags.definitionKeyword,"abstract global Privacy readonly override":tags.modifier,"is keyof unique infer asserts":tags.operatorKeyword,JSXAttributeValue:tags.attributeValue,JSXText:tags.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":tags.angleBracket,"JSXIdentifier JSXNameSpacedName":tags.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":tags.attributeName,"JSXBuiltin/JSXIdentifier":tags.standard(tags.tagName)}),dist_spec_identifier={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,in:52,out:55,const:56,extends:60,this:64,true:72,false:72,null:84,void:88,typeof:92,super:108,new:142,delete:154,yield:163,await:167,class:172,public:235,private:235,protected:235,readonly:237,instanceof:256,satisfies:259,import:292,keyof:349,unique:353,infer:359,asserts:395,is:397,abstract:417,implements:419,type:421,let:424,var:426,using:429,interface:435,enum:439,namespace:445,module:447,declare:451,global:455,for:474,of:483,while:486,with:490,do:494,if:498,else:500,switch:504,case:510,try:516,catch:520,finally:524,return:528,throw:532,break:536,continue:540,debugger:544},spec_word={__proto__:null,async:129,get:131,set:133,declare:195,public:197,private:197,protected:197,static:199,abstract:201,override:203,readonly:209,accessor:211,new:401},spec_LessThan={__proto__:null,"<":193},javascript_dist_parser=LRParser.deserialize({version:14,states:"$EOQ%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#DaO.QQlO'#DgO.bQlO'#DrO%[QlO'#DzO0fQlO'#ESOOQ!0Lf'#E['#E[O1PQ`O'#EXOOQO'#Ep'#EpOOQO'#Ik'#IkO1XQ`O'#GsO1dQ`O'#EoO1iQ`O'#EoO3hQ!0MxO'#JqO6[Q!0MxO'#JrO6uQ`O'#F]O6zQ,UO'#FtOOQ!0Lf'#Ff'#FfO7VO7dO'#FfO7eQMhO'#F|O9[Q`O'#F{OOQ!0Lf'#Jr'#JrOOQ!0Lb'#Jq'#JqO9aQ`O'#GwOOQ['#K^'#K^O9lQ`O'#IXO9qQ!0LrO'#IYOOQ['#J_'#J_OOQ['#I^'#I^Q`QlOOQ`QlOOO9yQ!L^O'#DvO:QQlO'#EOO:XQlO'#EQO9gQ`O'#GsO:`QMhO'#CoO:nQ`O'#EnO:yQ`O'#EyO;OQMhO'#FeO;mQ`O'#GsOOQO'#K_'#K_O;rQ`O'#K_O<QQ`O'#G{O<QQ`O'#G|O<QQ`O'#HOO9gQ`O'#HRO<wQ`O'#HUO>`Q`O'#CeO>pQ`O'#HbO>xQ`O'#HhO>xQ`O'#HjO`QlO'#HlO>xQ`O'#HnO>xQ`O'#HqO>}Q`O'#HwO?SQ!0LsO'#H}O%[QlO'#IPO?_Q!0LsO'#IRO?jQ!0LsO'#ITO9qQ!0LrO'#IVO?uQ!0MxO'#CiO@wQpO'#DlQOQ`OOO%[QlO'#EQOA_Q`O'#ETO:`QMhO'#EnOAjQ`O'#EnOAuQ!bO'#FeOOQ['#Cg'#CgOOQ!0Lb'#Dq'#DqOOQ!0Lb'#Ju'#JuO%[QlO'#JuOOQO'#Jx'#JxOOQO'#Ig'#IgOBuQpO'#EgOOQ!0Lb'#Ef'#EfOOQ!0Lb'#J|'#J|OCqQ!0MSO'#EgOC{QpO'#EWOOQO'#Jw'#JwODaQpO'#JxOEnQpO'#EWOC{QpO'#EgPE{O&2DjO'#CbPOOO)CD|)CD|OOOO'#I_'#I_OFWO#tO,59UOOQ!0Lh,59U,59UOOOO'#I`'#I`OFfO&jO,59UOFtQ!L^O'#DcOOOO'#Ib'#IbOF{O#@ItO,59{OOQ!0Lf,59{,59{OGZQlO'#IcOGnQ`O'#JsOImQ!fO'#JsO+}QlO'#JsOItQ`O,5:ROJ[Q`O'#EpOJiQ`O'#KSOJtQ`O'#KROJtQ`O'#KROJ|Q`O,5;^OKRQ`O'#KQOOQ!0Ln,5:^,5:^OKYQlO,5:^OMWQ!0MxO,5:fOMwQ`O,5:nONbQ!0LrO'#KPONiQ`O'#KOO9aQ`O'#KOON}Q`O'#KOO! VQ`O,5;]O! [Q`O'#KOO!#aQ!fO'#JrOOQ!0Lh'#Ci'#CiO%[QlO'#ESO!$PQ!fO,5:sOOQS'#Jy'#JyOOQO-E<i-E<iO9gQ`O,5=_O!$gQ`O,5=_O!$lQlO,5;ZO!&oQMhO'#EkO!(YQ`O,5;ZO!(_QlO'#DyO!(iQpO,5;dO!(qQpO,5;dO%[QlO,5;dOOQ['#FT'#FTOOQ['#FV'#FVO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eOOQ['#FZ'#FZO!)PQlO,5;tOOQ!0Lf,5;y,5;yOOQ!0Lf,5;z,5;zOOQ!0Lf,5;|,5;|O%[QlO'#IoO!+SQ!0LrO,5<iO%[QlO,5;eO!&oQMhO,5;eO!+qQMhO,5;eO!-cQMhO'#E^O%[QlO,5;wOOQ!0Lf,5;{,5;{O!-jQ,UO'#FjO!.gQ,UO'#KWO!.RQ,UO'#KWO!.nQ,UO'#KWOOQO'#KW'#KWO!/SQ,UO,5<SOOOW,5<`,5<`O!/eQlO'#FvOOOW'#In'#InO7VO7dO,5<QO!/lQ,UO'#FxOOQ!0Lf,5<Q,5<QO!0]Q$IUO'#CyOOQ!0Lh'#C}'#C}O!0pO#@ItO'#DRO!1^QMjO,5<eO!1eQ`O,5<hO!3QQ(CWO'#GXO!3_Q`O'#GYO!3dQ`O'#GYO!5SQ(CWO'#G^O!6XQpO'#GbOOQO'#Gn'#GnO!+xQMhO'#GmOOQO'#Gp'#GpO!+xQMhO'#GoO!6zQ$IUO'#JkOOQ!0Lh'#Jk'#JkO!7UQ`O'#JjO!7dQ`O'#JiO!7lQ`O'#CuOOQ!0Lh'#C{'#C{O!7}Q`O'#C}OOQ!0Lh'#DV'#DVOOQ!0Lh'#DX'#DXO1SQ`O'#DZO!+xQMhO'#GPO!+xQMhO'#GRO!8SQ`O'#GTO!8XQ`O'#GUO!3dQ`O'#G[O!+xQMhO'#GaO<QQ`O'#JjO!8^Q`O'#EqO!8{Q`O,5<gOOQ!0Lb'#Cr'#CrO!9TQ`O'#ErO!9}QpO'#EsOOQ!0Lb'#KQ'#KQO!:UQ!0LrO'#K`O9qQ!0LrO,5=cO`QlO,5>sOOQ['#Jg'#JgOOQ[,5>t,5>tOOQ[-E<[-E<[O!<TQ!0MxO,5:bO!9xQpO,5:`O!>nQ!0MxO,5:jO%[QlO,5:jO!AUQ!0MxO,5:lOOQO,5@y,5@yO!AuQMhO,5=_O!BTQ!0LrO'#JhO9[Q`O'#JhO!BfQ!0LrO,59ZO!BqQpO,59ZO!ByQMhO,59ZO:`QMhO,59ZO!CUQ`O,5;ZO!C^Q`O'#HaO!CrQ`O'#KcO%[QlO,5;}O!9xQpO,5<PO!CzQ`O,5=zO!DPQ`O,5=zO!DUQ`O,5=zO9qQ!0LrO,5=zO<QQ`O,5=jOOQO'#Cy'#CyO!DdQpO,5=gO!DlQMhO,5=hO!DwQ`O,5=jO!D|Q!bO,5=mO!EUQ`O'#K_O>}Q`O'#HWO9gQ`O'#HYO!EZQ`O'#HYO:`QMhO'#H[O!E`Q`O'#H[OOQ[,5=p,5=pO!EeQ`O'#H]O!EvQ`O'#CoO!E{Q`O,59PO!FVQ`O,59PO!H[QlO,59POOQ[,59P,59PO!HlQ!0LrO,59PO%[QlO,59PO!JwQlO'#HdOOQ['#He'#HeOOQ['#Hf'#HfO`QlO,5=|O!K_Q`O,5=|O`QlO,5>SO`QlO,5>UO!KdQ`O,5>WO`QlO,5>YO!KiQ`O,5>]O!KnQlO,5>cOOQ[,5>i,5>iO%[QlO,5>iO9qQ!0LrO,5>kOOQ[,5>m,5>mO# xQ`O,5>mOOQ[,5>o,5>oO# xQ`O,5>oOOQ[,5>q,5>qO#!fQpO'#D_O%[QlO'#JuO##XQpO'#JuO##cQpO'#DmO##tQpO'#DmO#&VQlO'#DmO#&^Q`O'#JtO#&fQ`O,5:WO#&kQ`O'#EtO#&yQ`O'#KTO#'RQ`O,5;_O#'WQpO'#DmO#'eQpO'#EVOOQ!0Lf,5:o,5:oO%[QlO,5:oO#'lQ`O,5:oO>}Q`O,5;YO!BqQpO,5;YO!ByQMhO,5;YO:`QMhO,5;YO#'tQ`O,5@aO#'yQ07dO,5:sOOQO-E<e-E<eO#)PQ!0MSO,5;ROC{QpO,5:rO#)ZQpO,5:rOC{QpO,5;RO!BfQ!0LrO,5:rOOQ!0Lb'#Ej'#EjOOQO,5;R,5;RO%[QlO,5;RO#)hQ!0LrO,5;RO#)sQ!0LrO,5;RO!BqQpO,5:rOOQO,5;X,5;XO#*RQ!0LrO,5;RPOOO'#I]'#I]P#*gO&2DjO,58|POOO,58|,58|OOOO-E<]-E<]OOQ!0Lh1G.p1G.pOOOO-E<^-E<^OOOO,59},59}O#*rQ!bO,59}OOOO-E<`-E<`OOQ!0Lf1G/g1G/gO#*wQ!fO,5>}O+}QlO,5>}OOQO,5?T,5?TO#+RQlO'#IcOOQO-E<a-E<aO#+`Q`O,5@_O#+hQ!fO,5@_O#+oQ`O,5@mOOQ!0Lf1G/m1G/mO%[QlO,5@nO#+wQ`O'#IiOOQO-E<g-E<gO#+oQ`O,5@mOOQ!0Lb1G0x1G0xOOQ!0Ln1G/x1G/xOOQ!0Ln1G0Y1G0YO%[QlO,5@kO#,]Q!0LrO,5@kO#,nQ!0LrO,5@kO#,uQ`O,5@jO9aQ`O,5@jO#,}Q`O,5@jO#-]Q`O'#IlO#,uQ`O,5@jOOQ!0Lb1G0w1G0wO!(iQpO,5:uO!(tQpO,5:uOOQS,5:w,5:wO#-}QdO,5:wO#.VQMhO1G2yO9gQ`O1G2yOOQ!0Lf1G0u1G0uO#.eQ!0MxO1G0uO#/jQ!0MvO,5;VOOQ!0Lh'#GW'#GWO#0WQ!0MzO'#JkO!$lQlO1G0uO#2cQ!fO'#JvO%[QlO'#JvO#2mQ`O,5:eOOQ!0Lh'#D_'#D_OOQ!0Lf1G1O1G1OO%[QlO1G1OOOQ!0Lf1G1f1G1fO#2rQ`O1G1OO#5WQ!0MxO1G1PO#5_Q!0MxO1G1PO#7uQ!0MxO1G1PO#7|Q!0MxO1G1PO#:dQ!0MxO1G1PO#<zQ!0MxO1G1PO#=RQ!0MxO1G1PO#=YQ!0MxO1G1PO#?pQ!0MxO1G1PO#?wQ!0MxO1G1PO#BUQ?MtO'#CiO#DPQ?MtO1G1`O#DWQ?MtO'#JrO#DkQ!0MxO,5?ZOOQ!0Lb-E<m-E<mO#FxQ!0MxO1G1PO#GuQ!0MzO1G1POOQ!0Lf1G1P1G1PO#HxQMjO'#J{O#ISQ`O,5:xO#IXQ!0MxO1G1cO#I{Q,UO,5<WO#JTQ,UO,5<XO#J]Q,UO'#FoO#JtQ`O'#FnOOQO'#KX'#KXOOQO'#Im'#ImO#JyQ,UO1G1nOOQ!0Lf1G1n1G1nOOOW1G1y1G1yO#K[Q?MtO'#JqO#KfQ`O,5<bO!)PQlO,5<bOOOW-E<l-E<lOOQ!0Lf1G1l1G1lO#KkQpO'#KWOOQ!0Lf,5<d,5<dO#KsQpO,5<dO#KxQMhO'#DTOOOO'#Ia'#IaO#LPO#@ItO,59mOOQ!0Lh,59m,59mO%[QlO1G2PO!8XQ`O'#IqO#L[Q`O,5<zOOQ!0Lh,5<w,5<wO!+xQMhO'#ItO#LxQMjO,5=XO!+xQMhO'#IvO#MkQMjO,5=ZO!&oQMhO,5=]OOQO1G2S1G2SO#MuQ!dO'#CrO#NYQ(CWO'#ErO$ _QpO'#GbO$ uQ!dO,5<sO$ |Q`O'#KZO9aQ`O'#KZO$![Q`O,5<uO!+xQMhO,5<tO$!aQ`O'#GZO$!rQ`O,5<tO$!wQ!dO'#GWO$#UQ!dO'#K[O$#`Q`O'#K[O!&oQMhO'#K[O$#eQ`O,5<xO$#jQlO'#JuO$#tQpO'#GcO##tQpO'#GcO$$VQ`O'#GgO!3dQ`O'#GkO$$[Q!0LrO'#IsO$$gQpO,5<|OOQ!0Lp,5<|,5<|O$$nQpO'#GcO$${QpO'#GdO$%^QpO'#GdO$%cQMjO,5=XO$%sQMjO,5=ZOOQ!0Lh,5=^,5=^O!+xQMhO,5@UO!+xQMhO,5@UO$&TQ`O'#IxO$&iQ`O,5@TO$&qQ`O,59aOOQ!0Lh,59i,59iO$'hQ$IYO,59uOOQ!0Lh'#Jo'#JoO$(ZQMjO,5<kO$(|QMjO,5<mO@oQ`O,5<oOOQ!0Lh,5<p,5<pO$)WQ`O,5<vO$)]QMjO,5<{O$)mQ`O,5@UO$){Q`O'#KOO!$lQlO1G2RO$*QQ`O1G2RO9aQ`O'#KRO9aQ`O'#EtO%[QlO'#EtO9aQ`O'#IzO$*VQ!0LrO,5@zOOQ[1G2}1G2}OOQ[1G4_1G4_OOQ!0Lf1G/|1G/|OOQ!0Lf1G/z1G/zO$,XQ!0MxO1G0UOOQ[1G2y1G2yO!&oQMhO1G2yO%[QlO1G2yO#.YQ`O1G2yO$.]QMhO'#EkOOQ!0Lb,5@S,5@SO$.jQ!0LrO,5@SOOQ[1G.u1G.uO!BfQ!0LrO1G.uO!BqQpO1G.uO!ByQMhO1G.uO$.{Q`O1G0uO$/QQ`O'#CiO$/]Q`O'#KdO$/eQ`O,5={O$/jQ`O'#KdO$/oQ`O'#KdO$/}Q`O'#JQO$0]Q`O,5@}O$0eQ!fO1G1iOOQ!0Lf1G1k1G1kO9gQ`O1G3fO@oQ`O1G3fO$0lQ`O1G3fO$0qQ`O1G3fOOQ[1G3f1G3fO!DwQ`O1G3UO!&oQMhO1G3RO$0vQ`O1G3ROOQ[1G3S1G3SO!&oQMhO1G3SO$0{Q`O1G3SO$1TQpO'#HQOOQ[1G3U1G3UO!6SQpO'#I|O!D|Q!bO1G3XOOQ[1G3X1G3XOOQ[,5=r,5=rO$1]QMhO,5=tO9gQ`O,5=tO$$VQ`O,5=vO9[Q`O,5=vO!BqQpO,5=vO!ByQMhO,5=vO:`QMhO,5=vO$1kQ`O'#KbO$1vQ`O,5=wOOQ[1G.k1G.kO$1{Q!0LrO1G.kO@oQ`O1G.kO$2WQ`O1G.kO9qQ!0LrO1G.kO$4`Q!fO,5APO$4mQ`O,5APO9aQ`O,5APO$4xQlO,5>OO$5PQ`O,5>OOOQ[1G3h1G3hO`QlO1G3hOOQ[1G3n1G3nOOQ[1G3p1G3pO>xQ`O1G3rO$5UQlO1G3tO$9YQlO'#HsOOQ[1G3w1G3wO$9gQ`O'#HyO>}Q`O'#H{OOQ[1G3}1G3}O$9oQlO1G3}O9qQ!0LrO1G4TOOQ[1G4V1G4VOOQ!0Lb'#G_'#G_O9qQ!0LrO1G4XO9qQ!0LrO1G4ZO$=vQ`O,5@aO!)PQlO,5;`O9aQ`O,5;`O>}Q`O,5:XO!)PQlO,5:XO!BqQpO,5:XO$={Q?MtO,5:XOOQO,5;`,5;`O$>VQpO'#IdO$>mQ`O,5@`OOQ!0Lf1G/r1G/rO$>uQpO'#IjO$?PQ`O,5@oOOQ!0Lb1G0y1G0yO##tQpO,5:XOOQO'#If'#IfO$?XQpO,5:qOOQ!0Ln,5:q,5:qO#'oQ`O1G0ZOOQ!0Lf1G0Z1G0ZO%[QlO1G0ZOOQ!0Lf1G0t1G0tO>}Q`O1G0tO!BqQpO1G0tO!ByQMhO1G0tOOQ!0Lb1G5{1G5{O!BfQ!0LrO1G0^OOQO1G0m1G0mO%[QlO1G0mO$?`Q!0LrO1G0mO$?kQ!0LrO1G0mO!BqQpO1G0^OC{QpO1G0^O$?yQ!0LrO1G0mOOQO1G0^1G0^O$@_Q!0MxO1G0mPOOO-E<Z-E<ZPOOO1G.h1G.hOOOO1G/i1G/iO$@iQ!bO,5<iO$@qQ!fO1G4iOOQO1G4o1G4oO%[QlO,5>}O$@{Q`O1G5yO$ATQ`O1G6XO$A]Q!fO1G6YO9aQ`O,5?TO$AgQ!0MxO1G6VO%[QlO1G6VO$AwQ!0LrO1G6VO$BYQ`O1G6UO$BYQ`O1G6UO9aQ`O1G6UO$BbQ`O,5?WO9aQ`O,5?WOOQO,5?W,5?WO$BvQ`O,5?WO$){Q`O,5?WOOQO-E<j-E<jOOQS1G0a1G0aOOQS1G0c1G0cO#.QQ`O1G0cOOQ[7+(e7+(eO!&oQMhO7+(eO%[QlO7+(eO$CUQ`O7+(eO$CaQMhO7+(eO$CoQ!0MzO,5=XO$EzQ!0MzO,5=ZO$HVQ!0MzO,5=XO$JhQ!0MzO,5=ZO$LyQ!0MzO,59uO% OQ!0MzO,5<kO%#ZQ!0MzO,5<mO%%fQ!0MzO,5<{OOQ!0Lf7+&a7+&aO%'wQ!0MxO7+&aO%(kQlO'#IeO%(xQ`O,5@bO%)QQ!fO,5@bOOQ!0Lf1G0P1G0PO%)[Q`O7+&jOOQ!0Lf7+&j7+&jO%)aQ?MtO,5:fO%[QlO7+&zO%)kQ?MtO,5:bO%)xQ?MtO,5:jO%*SQ?MtO,5:lO%*^QMhO'#IhO%*hQ`O,5@gOOQ!0Lh1G0d1G0dOOQO1G1r1G1rOOQO1G1s1G1sO%*pQ!jO,5<ZO!)PQlO,5<YOOQO-E<k-E<kOOQ!0Lf7+'Y7+'YOOOW7+'e7+'eOOOW1G1|1G1|O%*{Q`O1G1|OOQ!0Lf1G2O1G2OOOOO,59o,59oO%+QQ!dO,59oOOOO-E<_-E<_OOQ!0Lh1G/X1G/XO%+XQ!0MxO7+'kOOQ!0Lh,5?],5?]O%+{QMhO1G2fP%,SQ`O'#IqPOQ!0Lh-E<o-E<oO%,pQMjO,5?`OOQ!0Lh-E<r-E<rO%-cQMjO,5?bOOQ!0Lh-E<t-E<tO%-mQ!dO1G2wO%-tQ!dO'#CrO%.[QMhO'#KRO$#jQlO'#JuOOQ!0Lh1G2_1G2_O%.cQ`O'#IpO%.wQ`O,5@uO%.wQ`O,5@uO%/PQ`O,5@uO%/[Q`O,5@uOOQO1G2a1G2aO%/jQMjO1G2`O!+xQMhO1G2`O%/zQ(CWO'#IrO%0XQ`O,5@vO!&oQMhO,5@vO%0aQ!dO,5@vOOQ!0Lh1G2d1G2dO%2qQ!fO'#CiO%2{Q`O,5=POOQ!0Lb,5<},5<}O%3TQpO,5<}OOQ!0Lb,5=O,5=OOClQ`O,5<}O%3`QpO,5<}OOQ!0Lb,5=R,5=RO$){Q`O,5=VOOQO,5?_,5?_OOQO-E<q-E<qOOQ!0Lp1G2h1G2hO##tQpO,5<}O$#jQlO,5=PO%3nQ`O,5=OO%3yQpO,5=OO!+xQMhO'#ItO%4sQMjO1G2sO!+xQMhO'#IvO%5fQMjO1G2uO%5pQMjO1G5pO%5zQMjO1G5pOOQO,5?d,5?dOOQO-E<v-E<vOOQO1G.{1G.{O!9xQpO,59wO%[QlO,59wOOQ!0Lh,5<j,5<jO%6XQ`O1G2ZO!+xQMhO1G2bO!+xQMhO1G5pO!+xQMhO1G5pO%6^Q!0MxO7+'mOOQ!0Lf7+'m7+'mO!$lQlO7+'mO%7QQ`O,5;`OOQ!0Lb,5?f,5?fOOQ!0Lb-E<x-E<xO%7VQ!dO'#K]O#'oQ`O7+(eO4UQ!fO7+(eO$CXQ`O7+(eO%7aQ!0MvO'#CiO%7tQ!0MvO,5=SO%8fQ`O,5=SO%8nQ`O,5=SOOQ!0Lb1G5n1G5nOOQ[7+$a7+$aO!BfQ!0LrO7+$aO!BqQpO7+$aO!$lQlO7+&aO%8sQ`O'#JPO%9[Q`O,5AOOOQO1G3g1G3gO9gQ`O,5AOO%9[Q`O,5AOO%9dQ`O,5AOOOQO,5?l,5?lOOQO-E=O-E=OOOQ!0Lf7+'T7+'TO%9iQ`O7+)QO9qQ!0LrO7+)QO9gQ`O7+)QO@oQ`O7+)QOOQ[7+(p7+(pO%9nQ!0MvO7+(mO!&oQMhO7+(mO!DrQ`O7+(nOOQ[7+(n7+(nO!&oQMhO7+(nO%9xQ`O'#KaO%:TQ`O,5=lOOQO,5?h,5?hOOQO-E<z-E<zOOQ[7+(s7+(sO%;gQpO'#HZOOQ[1G3`1G3`O!&oQMhO1G3`O%[QlO1G3`O%;nQ`O1G3`O%;yQMhO1G3`O9qQ!0LrO1G3bO$$VQ`O1G3bO9[Q`O1G3bO!BqQpO1G3bO!ByQMhO1G3bO%<XQ`O'#JOO%<mQ`O,5@|O%<uQpO,5@|OOQ!0Lb1G3c1G3cOOQ[7+$V7+$VO@oQ`O7+$VO9qQ!0LrO7+$VO%=QQ`O7+$VO%[QlO1G6kO%[QlO1G6lO%=VQ!0LrO1G6kO%=aQlO1G3jO%=hQ`O1G3jO%=mQlO1G3jOOQ[7+)S7+)SO9qQ!0LrO7+)^O`QlO7+)`OOQ['#Kg'#KgOOQ['#JR'#JRO%=tQlO,5>_OOQ[,5>_,5>_O%[QlO'#HtO%>RQ`O'#HvOOQ[,5>e,5>eO9aQ`O,5>eOOQ[,5>g,5>gOOQ[7+)i7+)iOOQ[7+)o7+)oOOQ[7+)s7+)sOOQ[7+)u7+)uO%>WQpO1G5{O%>rQ?MtO1G0zO%>|Q`O1G0zOOQO1G/s1G/sO%?XQ?MtO1G/sO>}Q`O1G/sO!)PQlO'#DmOOQO,5?O,5?OOOQO-E<b-E<bOOQO,5?U,5?UOOQO-E<h-E<hO!BqQpO1G/sOOQO-E<d-E<dOOQ!0Ln1G0]1G0]OOQ!0Lf7+%u7+%uO#'oQ`O7+%uOOQ!0Lf7+&`7+&`O>}Q`O7+&`O!BqQpO7+&`OOQO7+%x7+%xO$@_Q!0MxO7+&XOOQO7+&X7+&XO%[QlO7+&XO%?cQ!0LrO7+&XO!BfQ!0LrO7+%xO!BqQpO7+%xO%?nQ!0LrO7+&XO%?|Q!0MxO7++qO%[QlO7++qO%@^Q`O7++pO%@^Q`O7++pOOQO1G4r1G4rO9aQ`O1G4rO%@fQ`O1G4rOOQS7+%}7+%}O#'oQ`O<<LPO4UQ!fO<<LPO%@tQ`O<<LPOOQ[<<LP<<LPO!&oQMhO<<LPO%[QlO<<LPO%@|Q`O<<LPO%AXQ!0MzO,5?`O%CdQ!0MzO,5?bO%EoQ!0MzO1G2`O%HQQ!0MzO1G2sO%J]Q!0MzO1G2uO%LhQ!fO,5?PO%[QlO,5?POOQO-E<c-E<cO%LrQ`O1G5|OOQ!0Lf<<JU<<JUO%LzQ?MtO1G0uO& RQ?MtO1G1PO& YQ?MtO1G1PO&#ZQ?MtO1G1PO&#bQ?MtO1G1PO&%cQ?MtO1G1PO&'dQ?MtO1G1PO&'kQ?MtO1G1PO&'rQ?MtO1G1PO&)sQ?MtO1G1PO&)zQ?MtO1G1PO&*RQ!0MxO<<JfO&+yQ?MtO1G1PO&,vQ?MvO1G1PO&-yQ?MvO'#JkO&0PQ?MtO1G1cO&0^Q?MtO1G0UO&0hQMjO,5?SOOQO-E<f-E<fO!)PQlO'#FqOOQO'#KY'#KYOOQO1G1u1G1uO&0rQ`O1G1tO&0wQ?MtO,5?ZOOOW7+'h7+'hOOOO1G/Z1G/ZO&1RQ!dO1G4wOOQ!0Lh7+(Q7+(QP!&oQMhO,5?]O!+xQMhO7+(cO&1YQ`O,5?[O9aQ`O,5?[OOQO-E<n-E<nO&1hQ`O1G6aO&1hQ`O1G6aO&1pQ`O1G6aO&1{QMjO7+'zO&2]Q!dO,5?^O&2gQ`O,5?^O!&oQMhO,5?^OOQO-E<p-E<pO&2lQ!dO1G6bO&2vQ`O1G6bO&3OQ`O1G2kO!&oQMhO1G2kOOQ!0Lb1G2i1G2iOOQ!0Lb1G2j1G2jO%3TQpO1G2iO!BqQpO1G2iOClQ`O1G2iOOQ!0Lb1G2q1G2qO&3TQpO1G2iO&3cQ`O1G2kO$){Q`O1G2jOClQ`O1G2jO$#jQlO1G2kO&3kQ`O1G2jO&4_QMjO,5?`OOQ!0Lh-E<s-E<sO&5QQMjO,5?bOOQ!0Lh-E<u-E<uO!+xQMhO7++[OOQ!0Lh1G/c1G/cO&5[Q`O1G/cOOQ!0Lh7+'u7+'uO&5aQMjO7+'|O&5qQMjO7++[O&5{QMjO7++[O&6YQ!0MxO<<KXOOQ!0Lf<<KX<<KXO&6|Q`O1G0zO!&oQMhO'#IyO&7RQ`O,5@wO&9TQ!fO<<LPO!&oQMhO1G2nO&9[Q!0LrO1G2nOOQ[<<G{<<G{O!BfQ!0LrO<<G{O&9mQ!0MxO<<I{OOQ!0Lf<<I{<<I{OOQO,5?k,5?kO&:aQ`O,5?kO&:fQ`O,5?kOOQO-E<}-E<}O&:tQ`O1G6jO&:tQ`O1G6jO9gQ`O1G6jO@oQ`O<<LlOOQ[<<Ll<<LlO&:|Q`O<<LlO9qQ!0LrO<<LlOOQ[<<LX<<LXO%9nQ!0MvO<<LXOOQ[<<LY<<LYO!DrQ`O<<LYO&;RQpO'#I{O&;^Q`O,5@{O!)PQlO,5@{OOQ[1G3W1G3WOOQO'#I}'#I}O9qQ!0LrO'#I}O&;fQpO,5=uOOQ[,5=u,5=uO&;mQpO'#EgO&;tQpO'#GeO&;yQ`O7+(zO&<OQ`O7+(zOOQ[7+(z7+(zO!&oQMhO7+(zO%[QlO7+(zO&<WQ`O7+(zOOQ[7+(|7+(|O9qQ!0LrO7+(|O$$VQ`O7+(|O9[Q`O7+(|O!BqQpO7+(|O&<cQ`O,5?jOOQO-E<|-E<|OOQO'#H^'#H^O&<nQ`O1G6hO9qQ!0LrO<<GqOOQ[<<Gq<<GqO@oQ`O<<GqO&<vQ`O7+,VO&<{Q`O7+,WO%[QlO7+,VO%[QlO7+,WOOQ[7+)U7+)UO&=QQ`O7+)UO&=VQlO7+)UO&=^Q`O7+)UOOQ[<<Lx<<LxOOQ[<<Lz<<LzOOQ[-E=P-E=POOQ[1G3y1G3yO&=cQ`O,5>`OOQ[,5>b,5>bO&=hQ`O1G4PO9aQ`O7+&fO!)PQlO7+&fOOQO7+%_7+%_O&=mQ?MtO1G6YO>}Q`O7+%_OOQ!0Lf<<Ia<<IaOOQ!0Lf<<Iz<<IzO>}Q`O<<IzOOQO<<Is<<IsO$@_Q!0MxO<<IsO%[QlO<<IsOOQO<<Id<<IdO!BfQ!0LrO<<IdO&=wQ!0LrO<<IsO&>SQ!0MxO<= ]O&>dQ`O<= [OOQO7+*^7+*^O9aQ`O7+*^OOQ[ANAkANAkO&>lQ!fOANAkO!&oQMhOANAkO#'oQ`OANAkO4UQ!fOANAkO&>sQ`OANAkO%[QlOANAkO&>{Q!0MzO7+'zO&A^Q!0MzO,5?`O&CiQ!0MzO,5?bO&EtQ!0MzO7+'|O&HVQ!fO1G4kO&HaQ?MtO7+&aO&JeQ?MvO,5=XO&LlQ?MvO,5=ZO&L|Q?MvO,5=XO&M^Q?MvO,5=ZO&MnQ?MvO,59uO' tQ?MvO,5<kO'#wQ?MvO,5<mO'&]Q?MvO,5<{O'(RQ?MtO7+'kO'(`Q?MtO7+'mO'(mQ`O,5<]OOQO7+'`7+'`OOQ!0Lh7+*c7+*cO'(rQMjO<<K}OOQO1G4v1G4vO'(yQ`O1G4vO')UQ`O1G4vO')dQ`O7++{O')dQ`O7++{O!&oQMhO1G4xO')lQ!dO1G4xO')vQ`O7++|O'*OQ`O7+(VO'*ZQ!dO7+(VOOQ!0Lb7+(T7+(TOOQ!0Lb7+(U7+(UO!BqQpO7+(TOClQ`O7+(TO'*eQ`O7+(VO!&oQMhO7+(VO$){Q`O7+(UO'*jQ`O7+(VOClQ`O7+(UO'*rQMjO<<NvOOQ!0Lh7+$}7+$}O!+xQMhO<<NvO'*|Q!dO,5?eOOQO-E<w-E<wO'+WQ!0MvO7+(YO!&oQMhO7+(YOOQ[AN=gAN=gO9gQ`O1G5VOOQO1G5V1G5VO'+hQ`O1G5VO'+mQ`O7+,UO'+mQ`O7+,UO9qQ!0LrOANBWO@oQ`OANBWOOQ[ANBWANBWOOQ[ANAsANAsOOQ[ANAtANAtO'+uQ`O,5?gOOQO-E<y-E<yO',QQ?MtO1G6gOOQO,5?i,5?iOOQO-E<{-E<{OOQ[1G3a1G3aO',[Q`O,5=POOQ[<<Lf<<LfO!&oQMhO<<LfO&;yQ`O<<LfO',aQ`O<<LfO%[QlO<<LfOOQ[<<Lh<<LhO9qQ!0LrO<<LhO$$VQ`O<<LhO9[Q`O<<LhO',iQpO1G5UO',tQ`O7+,SOOQ[AN=]AN=]O9qQ!0LrOAN=]OOQ[<= q<= qOOQ[<= r<= rO',|Q`O<= qO'-RQ`O<= rOOQ[<<Lp<<LpO'-WQ`O<<LpO'-]QlO<<LpOOQ[1G3z1G3zO>}Q`O7+)kO'-dQ`O<<JQO'-oQ?MtO<<JQOOQO<<Hy<<HyOOQ!0LfAN?fAN?fOOQOAN?_AN?_O$@_Q!0MxOAN?_OOQOAN?OAN?OO%[QlOAN?_OOQO<<Mx<<MxOOQ[G27VG27VO!&oQMhOG27VO#'oQ`OG27VO'-yQ!fOG27VO4UQ!fOG27VO'.QQ`OG27VO'.YQ?MtO<<JfO'.gQ?MvO1G2`O'0]Q?MvO,5?`O'2`Q?MvO,5?bO'4cQ?MvO1G2sO'6fQ?MvO1G2uO'8iQ?MtO<<KXO'8vQ?MtO<<I{OOQO1G1w1G1wO!+xQMhOANAiOOQO7+*b7+*bO'9TQ`O7+*bO'9`Q`O<= gO'9hQ!dO7+*dOOQ!0Lb<<Kq<<KqO$){Q`O<<KqOClQ`O<<KqO'9rQ`O<<KqO!&oQMhO<<KqOOQ!0Lb<<Ko<<KoO!BqQpO<<KoO'9}Q!dO<<KqOOQ!0Lb<<Kp<<KpO':XQ`O<<KqO!&oQMhO<<KqO$){Q`O<<KpO':^QMjOANDbO':hQ!0MvO<<KtOOQO7+*q7+*qO9gQ`O7+*qO':xQ`O<= pOOQ[G27rG27rO9qQ!0LrOG27rO!)PQlO1G5RO';QQ`O7+,RO';YQ`O1G2kO&;yQ`OANBQOOQ[ANBQANBQO!&oQMhOANBQO';_Q`OANBQOOQ[ANBSANBSO9qQ!0LrOANBSO$$VQ`OANBSOOQO'#H_'#H_OOQO7+*p7+*pOOQ[G22wG22wOOQ[ANE]ANE]OOQ[ANE^ANE^OOQ[ANB[ANB[O';gQ`OANB[OOQ[<<MV<<MVO!)PQlOAN?lOOQOG24yG24yO$@_Q!0MxOG24yO#'oQ`OLD,qOOQ[LD,qLD,qO!&oQMhOLD,qO';lQ!fOLD,qO';sQ?MvO7+'zO'=iQ?MvO,5?`O'?lQ?MvO,5?bO'AoQ?MvO7+'|O'CeQMjOG27TOOQO<<M|<<M|OOQ!0LbANA]ANA]O$){Q`OANA]OClQ`OANA]O'CuQ!dOANA]OOQ!0LbANAZANAZO'C|Q`OANA]O!&oQMhOANA]O'DXQ!dOANA]OOQ!0LbANA[ANA[OOQO<<N]<<N]OOQ[LD-^LD-^O'DcQ?MtO7+*mOOQO'#Gf'#GfOOQ[G27lG27lO&;yQ`OG27lO!&oQMhOG27lOOQ[G27nG27nO9qQ!0LrOG27nOOQ[G27vG27vO'DmQ?MtOG25WOOQOLD*eLD*eOOQ[!$(!]!$(!]O#'oQ`O!$(!]O!&oQMhO!$(!]O'DwQ!0MzOG27TOOQ!0LbG26wG26wO$){Q`OG26wO'GYQ`OG26wOClQ`OG26wO'GeQ!dOG26wO!&oQMhOG26wOOQ[LD-WLD-WO&;yQ`OLD-WOOQ[LD-YLD-YOOQ[!)9Ew!)9EwO#'oQ`O!)9EwOOQ!0LbLD,cLD,cO$){Q`OLD,cOClQ`OLD,cO'GlQ`OLD,cO'GwQ!dOLD,cOOQ[!$(!r!$(!rOOQ[!.K;c!.K;cO'HOQ?MvOG27TOOQ!0Lb!$( }!$( }O$){Q`O!$( }OClQ`O!$( }O'ItQ`O!$( }OOQ!0Lb!)9Ei!)9EiO$){Q`O!)9EiOClQ`O!)9EiOOQ!0Lb!.K;T!.K;TO$){Q`O!.K;TOOQ!0Lb!4/0o!4/0oO!)PQlO'#DzO1PQ`O'#EXO'JPQ!fO'#JqO'JWQ!L^O'#DvO'J_QlO'#EOO'JfQ!fO'#CiO'L|Q!fO'#CiO!)PQlO'#EQO'M^QlO,5;ZO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO'#IoO( aQ`O,5<iO!)PQlO,5;eO( iQMhO,5;eO(#SQMhO,5;eO!)PQlO,5;wO!&oQMhO'#GmO( iQMhO'#GmO!&oQMhO'#GoO( iQMhO'#GoO1SQ`O'#DZO1SQ`O'#DZO!&oQMhO'#GPO( iQMhO'#GPO!&oQMhO'#GRO( iQMhO'#GRO!&oQMhO'#GaO( iQMhO'#GaO!)PQlO,5:jO(#ZQpO'#D_O(#eQpO'#JuO!)PQlO,5@nO'M^QlO1G0uO(#oQ?MtO'#CiO!)PQlO1G2PO!&oQMhO'#ItO( iQMhO'#ItO!&oQMhO'#IvO( iQMhO'#IvO(#yQ!dO'#CrO!&oQMhO,5<tO( iQMhO,5<tO'M^QlO1G2RO!)PQlO7+&zO!&oQMhO1G2`O( iQMhO1G2`O!&oQMhO'#ItO( iQMhO'#ItO!&oQMhO'#IvO( iQMhO'#IvO!&oQMhO1G2bO( iQMhO1G2bO'M^QlO7+'mO'M^QlO7+&aO!&oQMhOANAiO( iQMhOANAiO($^Q`O'#EoO($cQ`O'#EoO($kQ`O'#F]O($pQ`O'#EyO($uQ`O'#KSO(%QQ`O'#KQO(%]Q`O,5;ZO(%bQMjO,5<eO(%iQ`O'#GYO(%nQ`O'#GYO(%sQ`O,5<gO(%{Q`O,5;ZO(&TQ?MtO1G1`O(&[Q`O,5<tO(&aQ`O,5<tO(&fQ`O,5<vO(&kQ`O,5<vO(&pQ`O1G2RO(&uQ`O1G0uO(&zQMjO<<K}O('RQMjO<<K}O7eQMhO'#F|O9[Q`O'#F{OAjQ`O'#EnO!)PQlO,5;tO!3dQ`O'#GYO!3dQ`O'#GYO!3dQ`O'#G[O!3dQ`O'#G[O!+xQMhO7+(cO!+xQMhO7+(cO%-mQ!dO1G2wO%-mQ!dO1G2wO!&oQMhO,5=]O!&oQMhO,5=]",stateData:"((X~O'{OS'|OSTOS'}RQ~OPYOQYOSfOY!VOaqOdzOeyOl!POpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!uwO!xxO!|]O$W|O$niO%h}O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO&V!WO&]!XO&_!YO&a!ZO&c![O&f!]O&l!^O&r!_O&t!`O&v!aO&x!bO&z!cO(SSO(UTO(XUO(`VO(n[O~OWtO~P`OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(S!dO(UTO(XUO(`VO(n[O~Oa!wOs!nO!S!oO!b!yO!c!vO!d!vO!|;wO#T!pO#U!pO#V!xO#W!pO#X!pO#[!zO#]!zO(T!lO(UTO(XUO(d!mO(n!sO~O'}!{O~OP]XR]X[]Xa]Xj]Xr]X!Q]X!S]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X'y]X(`]X(q]X(x]X(y]X~O!g%RX~P(qO_!}O(U#PO(V!}O(W#PO~O_#QO(W#PO(X#PO(Y#QO~Ox#SO!U#TO(a#TO(b#VO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(S;{O(UTO(XUO(`VO(n[O~O![#ZO!]#WO!Y(gP!Y(uP~P+}O!^#cO~P`OPYOQYOSfOd!jOe!iOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(UTO(XUO(`VO(n[O~Op#mO![#iO!|]O#i#lO#j#iO(S;|O!k(rP~P.iO!l#oO(S#nO~O!x#sO!|]O%h#tO~O#k#uO~O!g#vO#k#uO~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!]$_O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(`VO(q$YO(x#|O(y#}O~Oa(eX'y(eX'v(eX!k(eX!Y(eX!_(eX%i(eX!g(eX~P1qO#S$dO#`$eO$Q$eOP(fXR(fX[(fXj(fXr(fX!Q(fX!S(fX!](fX!l(fX!p(fX#R(fX#n(fX#o(fX#p(fX#q(fX#r(fX#s(fX#t(fX#u(fX#v(fX#x(fX#z(fX#{(fX(`(fX(q(fX(x(fX(y(fX!_(fX%i(fX~Oa(fX'y(fX'v(fX!Y(fX!k(fXv(fX!g(fX~P4UO#`$eO~O$]$hO$_$gO$f$mO~OSfO!_$nO$i$oO$k$qO~Oh%VOj%cOk%cOl%cOp%WOr%XOs$tOt$tOz%YO|%ZO!O%[O!S${O!_$|O!i%aO!l$xO#j%bO$W%_O$t%]O$v%^O$y%`O(S$sO(UTO(XUO(`$uO(x$}O(y%POg(]P~O!l%dO~O!S%gO!_%hO(S%fO~O!g%lO~Oa%mO'y%mO~O!Q%qO~P%[O(T!lO~P%[O%n%uO~P%[Oh%VO!l%dO(S%fO(T!lO~Oe%|O!l%dO(S%fO~Oj$RO~O!Q&RO!_&OO!l&QO%j&UO(S%fO(T!lO(UTO(XUO`)VP~O!x#sO~O%s&WO!S)RX!_)RX(S)RX~O(S&XO~Ol!PO!u&^O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO~Od&cOe&bO!x&`O%h&aO%{&_O~P<VOd&fOeyOl!PO!_&eO!u&^O!xxO!|]O%h}O%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO~Ob&iO#`&lO%j&gO(T!lO~P=[O!l&mO!u&qO~O!l#oO~O!_XO~Oa%mO'w&yO'y%mO~Oa%mO'w&|O'y%mO~Oa%mO'w'OO'y%mO~O'v]X!Y]Xv]X!k]X&Z]X!_]X%i]X!g]X~P(qO!b']O!c'UO!d'UO(T!lO(UTO(XUO~Os'SO!S'RO!['VO(d'QO!^(hP!^(wP~P@cOn'`O!_'^O(S%fO~Oe'eO!l%dO(S%fO~O!Q&RO!l&QO~Os!nO!S!oO!|;wO#T!pO#U!pO#W!pO#X!pO(T!lO(UTO(XUO(d!mO(n!sO~O!b'kO!c'jO!d'jO#V!pO#['lO#]'lO~PA}Oa%mOh%VO!g#vO!l%dO'y%mO(q'nO~O!p'rO#`'pO~PC]Os!nO!S!oO(UTO(XUO(d!mO(n!sO~O!_XOs(lX!S(lX!b(lX!c(lX!d(lX!|(lX#T(lX#U(lX#V(lX#W(lX#X(lX#[(lX#](lX(T(lX(U(lX(X(lX(d(lX(n(lX~O!c'jO!d'jO(T!lO~PC{O(O'vO(P'vO(Q'xO~O_!}O(U'zO(V!}O(W'zO~O_#QO(W'zO(X'zO(Y#QO~Ov'|O~P%[Ox#SO!U#TO(a#TO(b(PO~O![(RO!Y'VX!Y']X!]'VX!]']X~P+}O!](TO!Y(gX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!](TO!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(`VO(q$YO(x#|O(y#}O~O!Y(gX~PGvO!Y(YO~O!Y(tX!](tX!g(tX!k(tX(q(tX~O#`(tX#k#dX!^(tX~PIyO#`(ZO!Y(vX!](vX~O!]([O!Y(uX~O!Y(_O~O#`$eO~PIyO!^(`O~P`OR#zO!Q#yO!S#{O!l#xO(`VOP!na[!naj!nar!na!]!na!p!na#R!na#n!na#o!na#p!na#q!na#r!na#s!na#t!na#u!na#v!na#x!na#z!na#{!na(q!na(x!na(y!na~Oa!na'y!na'v!na!Y!na!k!nav!na!_!na%i!na!g!na~PKaO!k(aO~O!g#vO#`(bO(q'nO!](sXa(sX'y(sX~O!k(sX~PM|O!S%gO!_%hO!|]O#i(gO#j(fO(S%fO~O!](hO!k(rX~O!k(jO~O!S%gO!_%hO#j(fO(S%fO~OP(fXR(fX[(fXj(fXr(fX!Q(fX!S(fX!](fX!l(fX!p(fX#R(fX#n(fX#o(fX#p(fX#q(fX#r(fX#s(fX#t(fX#u(fX#v(fX#x(fX#z(fX#{(fX(`(fX(q(fX(x(fX(y(fX~O!g#vO!k(fX~P! jOR(lO!Q(kO!l#xO#S$dO!|!{a!S!{a~O!x!{a%h!{a!_!{a#i!{a#j!{a(S!{a~P!#kO!x(pO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(S!dO(UTO(XUO(`VO(n[O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<eO!S${O!_$|O!i=vO!l$xO#j<kO$W%_O$t<gO$v<iO$y%`O(S(tO(UTO(XUO(`$uO(x$}O(y%PO~O#k(vO~O![(xO!k(jP~P%[O(d(zO(n[O~O!S(|O!l#xO(d(zO(n[O~OP;vOQ;vOSfOd=rOe!iOpkOr;vOskOtkOzkO|;vO!O;vO!SWO!WkO!XkO!_!eO!i;yO!lZO!o;vO!p;vO!q;vO!s;zO!u;}O!x!hO$W!kO$n=pO(S)ZO(UTO(XUO(`VO(n[O~O!]$_Oa$qa'y$qa'v$qa!k$qa!Y$qa!_$qa%i$qa!g$qa~Ol)bO~P!&oOh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O%[O!S${O!_$|O!i%aO!l$xO#j%bO$W%_O$t%]O$v%^O$y%`O(S(tO(UTO(XUO(`$uO(x$}O(y%PO~Og(oP~P!+xO!Q)gO!g)fO!_$^X$Z$^X$]$^X$_$^X$f$^X~O!g)fO!_(zX$Z(zX$](zX$_(zX$f(zX~O!Q)gO~P!.RO!Q)gO!_(zX$Z(zX$](zX$_(zX$f(zX~O!_)iO$Z)mO$])hO$_)hO$f)nO~O![)qO~P!)PO$]$hO$_$gO$f)uO~On$zX!Q$zX#S$zX'x$zX(x$zX(y$zX~OgmXg$zXnmX!]mX#`mX~P!/wOx)wO(a)xO(b)zO~On*TO!Q)|O'x)}O(x$}O(y%PO~Og){O~P!0{Og*UO~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<eO!S*WO!_*XO!i=vO!l$xO#j<kO$W%_O$t<gO$v<iO$y%`O(UTO(XUO(`$uO(x$}O(y%PO~O![*[O(S*VO!k(}P~P!1jO#k*^O~O!l*_O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<eO!S${O!_$|O!i=vO!l$xO#j<kO$W%_O$t<gO$v<iO$y%`O(S*aO(UTO(XUO(`$uO(x$}O(y%PO~O![*dO!Y)OP~P!3iOr*pOs!nO!S*fO!b*nO!c*hO!d*hO!l*_O#[*oO%`*jO(T!lO(UTO(XUO(d!mO~O!^*mO~P!5^O#S$dOn(_X!Q(_X'x(_X(x(_X(y(_X!](_X#`(_X~Og(_X$O(_X~P!6`On*uO#`*tOg(^X!](^X~O!]*vOg(]X~Oj%cOk%cOl%cO(S&XOg(]P~Os*yO~O!l+OO~O(S(tO~Op+TO!S%gO![#iO!_%hO!|]O#i#lO#j#iO(S%fO!k(rP~O!g#vO#k+UO~O!S%gO![+WO!]([O!_%hO(S%fO!Y(uP~Os'YO!S+YO![+XO(UTO(XUO(d(zO~O!^(wP~P!9iO!]+ZOa)SX'y)SX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(`VO(q$YO(x#|O(y#}O~Oa!ja!]!ja'y!ja'v!ja!Y!ja!k!jav!ja!_!ja%i!ja!g!ja~P!:aOR#zO!Q#yO!S#{O!l#xO(`VOP!ra[!raj!rar!ra!]!ra!p!ra#R!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#v!ra#x!ra#z!ra#{!ra(q!ra(x!ra(y!ra~Oa!ra'y!ra'v!ra!Y!ra!k!rav!ra!_!ra%i!ra!g!ra~P!<wOR#zO!Q#yO!S#{O!l#xO(`VOP!ta[!taj!tar!ta!]!ta!p!ta#R!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#t!ta#u!ta#v!ta#x!ta#z!ta#{!ta(q!ta(x!ta(y!ta~Oa!ta'y!ta'v!ta!Y!ta!k!tav!ta!_!ta%i!ta!g!ta~P!?_Oh%VOn+dO!_'^O%i+cO~O!g+fOa([X!_([X'y([X!]([X~Oa%mO!_XO'y%mO~Oh%VO!l%dO~Oh%VO!l%dO(S%fO~O!g#vO#k(vO~Ob+qO%j+rO(S+nO(UTO(XUO!^)WP~O!]+sO`)VX~O[+wO~O`+xO~O!_&OO(S%fO(T!lO`)VP~Oh%VO#`+}O~Oh%VOn,QO!_$|O~O!_,SO~O!Q,UO!_XO~O%n%uO~O!x,ZO~Oe,`O~Ob,aO(S#nO(UTO(XUO!^)UP~Oe%|O~O%j!QO(S&XO~P=[O[,fO`,eO~OPYOQYOSfOdzOeyOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!iuO!lZO!oYO!pYO!qYO!svO!xxO!|]O$niO%h}O(UTO(XUO(`VO(n[O~O!_!eO!u!gO$W!kO(S!dO~P!F_O`,eOa%mO'y%mO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!x!hO$W!kO$niO(S!dO(UTO(XUO(`VO(n[O~Oa,kOl!OO!uwO%l!OO%m!OO%n!OO~P!HwO!l&mO~O&],qO~O!_,sO~O&n,uO&p,vOP&kaQ&kaS&kaY&kaa&kad&kae&kal&kap&kar&kas&kat&kaz&ka|&ka!O&ka!S&ka!W&ka!X&ka!_&ka!i&ka!l&ka!o&ka!p&ka!q&ka!s&ka!u&ka!x&ka!|&ka$W&ka$n&ka%h&ka%j&ka%l&ka%m&ka%n&ka%q&ka%s&ka%v&ka%w&ka%y&ka&V&ka&]&ka&_&ka&a&ka&c&ka&f&ka&l&ka&r&ka&t&ka&v&ka&x&ka&z&ka'v&ka(S&ka(U&ka(X&ka(`&ka(n&ka!^&ka&d&kab&ka&i&ka~O(S,{O~Oh!eX!]!RX!^!RX!g!RX!g!eX!l!eX#`!RX~O!]!eX!^!eX~P# }O!g-QO#`-POh(iX!]#hX!^#hX!g(iX!l(iX~O!](iX!^(iX~P#!pOh%VO!g-SO!l%dO!]!aX!^!aX~Os!nO!S!oO(UTO(XUO(d!mO~OP;vOQ;vOSfOd=rOe!iOpkOr;vOskOtkOzkO|;vO!O;vO!SWO!WkO!XkO!_!eO!i;yO!lZO!o;vO!p;vO!q;vO!s;zO!u;}O!x!hO$W!kO$n=pO(UTO(XUO(`VO(n[O~O(S<rO~P#$VO!]-WO!^(hX~O!^-YO~O!g-QO#`-PO!]#hX!^#hX~O!]-ZO!^(wX~O!^-]O~O!c-^O!d-^O(T!lO~P##tO!^-aO~P'_On-dO!_'^O~O!Y-iO~Os!{a!b!{a!c!{a!d!{a#T!{a#U!{a#V!{a#W!{a#X!{a#[!{a#]!{a(T!{a(U!{a(X!{a(d!{a(n!{a~P!#kO!p-nO#`-lO~PC]O!c-pO!d-pO(T!lO~PC{Oa%mO#`-lO'y%mO~Oa%mO!g#vO#`-lO'y%mO~Oa%mO!g#vO!p-nO#`-lO'y%mO(q'nO~O(O'vO(P'vO(Q-uO~Ov-vO~O!Y'Va!]'Va~P!:aO![-zO!Y'VX!]'VX~P%[O!](TO!Y(ga~O!Y(ga~PGvO!]([O!Y(ua~O!S%gO![.OO!_%hO(S%fO!Y']X!]']X~O#`.QO!](sa!k(saa(sa'y(sa~O!g#vO~P#,]O!](hO!k(ra~O!S%gO!_%hO#j.UO(S%fO~Op.ZO!S%gO![.WO!_%hO!|]O#i.YO#j.WO(S%fO!]'`X!k'`X~OR._O!l#xO~Oh%VOn.bO!_'^O%i.aO~Oa#ci!]#ci'y#ci'v#ci!Y#ci!k#civ#ci!_#ci%i#ci!g#ci~P!:aOn=|O!Q)|O'x)}O(x$}O(y%PO~O#k#_aa#_a#`#_a'y#_a!]#_a!k#_a!_#_a!Y#_a~P#/XO#k(_XP(_XR(_X[(_Xa(_Xj(_Xr(_X!S(_X!l(_X!p(_X#R(_X#n(_X#o(_X#p(_X#q(_X#r(_X#s(_X#t(_X#u(_X#v(_X#x(_X#z(_X#{(_X'y(_X(`(_X(q(_X!k(_X!Y(_X'v(_Xv(_X!_(_X%i(_X!g(_X~P!6`O!].oO!k(jX~P!:aO!k.rO~O!Y.tO~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(`VO[#mia#mij#mir#mi!]#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'y#mi(q#mi(x#mi(y#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#n#mi~P#2wO#n$OO~P#2wOP$[OR#zOr$aO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(`VO[#mia#mij#mi!]#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'y#mi(q#mi(x#mi(y#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#r#mi~P#5fO#r$QO~P#5fOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO(`VOa#mi!]#mi#x#mi#z#mi#{#mi'y#mi(q#mi(x#mi(y#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#v#mi~P#8TOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO(`VO(y#}Oa#mi!]#mi#z#mi#{#mi'y#mi(q#mi(x#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#x$UO~P#:kO#x#mi~P#:kO#v$SO~P#8TOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO(`VO(x#|O(y#}Oa#mi!]#mi#{#mi'y#mi(q#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#z#mi~P#=aO#z$WO~P#=aOP]XR]X[]Xj]Xr]X!Q]X!S]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(`]X(q]X(x]X(y]X!]]X!^]X~O$O]X~P#@OOP$[OR#zO[<_Oj<SOr<]O!Q#yO!S#{O!l#xO!p$[O#R<SO#n<PO#o<QO#p<QO#q<QO#r<RO#s<SO#t<SO#u<^O#v<TO#x<VO#z<XO#{<YO(`VO(q$YO(x#|O(y#}O~O$O.vO~P#B]O#S$dO#`<`O$Q<`O$O(fX!^(fX~P! jOa'ca!]'ca'y'ca'v'ca!k'ca!Y'cav'ca!_'ca%i'ca!g'ca~P!:aO[#mia#mij#mir#mi!]#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'y#mi(q#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(`VO(x#mi(y#mi~P#E_On=|O!Q)|O'x)}O(x$}O(y%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(`#mi~P#E_O!].zOg(oX~P!0{Og.|O~Oa$Pi!]$Pi'y$Pi'v$Pi!Y$Pi!k$Piv$Pi!_$Pi%i$Pi!g$Pi~P!:aO$].}O$_.}O~O$]/OO$_/OO~O!g)fO#`/PO!_$cX$Z$cX$]$cX$_$cX$f$cX~O![/QO~O!_)iO$Z/SO$])hO$_)hO$f/TO~O!]<ZO!^(eX~P#B]O!^/UO~O!g)fO$f(zX~O$f/WO~Ov/XO~P!&oOx)wO(a)xO(b/[O~O!S/_O~O(x$}On%aa!Q%aa'x%aa(y%aa!]%aa#`%aa~Og%aa$O%aa~P#LaO(y%POn%ca!Q%ca'x%ca(x%ca!]%ca#`%ca~Og%ca$O%ca~P#MSO!]fX!gfX!kfX!k$zX(qfX~P!/wO![/hO!]([O(S/gO!Y(uP!Y)OP~P!1jOr*pO!b*nO!c*hO!d*hO!l*_O#[*oO%`*jO(T!lO(UTO(XUO~Os<oO!S/iO![+XO!^*mO(d<nO!^(wP~P#NmO!k/jO~P#/XO!]/kO!g#vO(q'nO!k(}X~O!k/pO~O!S%gO![*[O!_%hO(S%fO!k(}P~O#k/rO~O!Y$zX!]$zX!g%RX~P!/wO!]/sO!Y)OX~P#/XO!g/uO~O!Y/wO~OpkO(S/xO~P.iOh%VOr/}O!g#vO!l%dO(q'nO~O!g+fO~Oa%mO!]0RO'y%mO~O!^0TO~P!5^O!c0UO!d0UO(T!lO~P##tOs!nO!S0VO(UTO(XUO(d!mO~O#[0XO~Og%aa!]%aa#`%aa$O%aa~P!0{Og%ca!]%ca#`%ca$O%ca~P!0{Oj%cOk%cOl%cO(S&XOg'lX!]'lX~O!]*vOg(]a~Og0bO~OR0cO!Q0cO!S0dO#S$dOn}a'x}a(x}a(y}a!]}a#`}a~Og}a$O}a~P$&vO!Q)|O'x)}On$sa(x$sa(y$sa!]$sa#`$sa~Og$sa$O$sa~P$'rO!Q)|O'x)}On$ua(x$ua(y$ua!]$ua#`$ua~Og$ua$O$ua~P$(eO#k0gO~Og%Ta!]%Ta#`%Ta$O%Ta~P!0{On0iO#`0hOg(^a!](^a~O!g#vO~O#k0lO~O!]+ZOa)Sa'y)Sa~OR#zO!Q#yO!S#{O!l#xO(`VOP!ri[!rij!rir!ri!]!ri!p!ri#R!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#t!ri#u!ri#v!ri#x!ri#z!ri#{!ri(q!ri(x!ri(y!ri~Oa!ri'y!ri'v!ri!Y!ri!k!riv!ri!_!ri%i!ri!g!ri~P$*bOh%VOr%XOs$tOt$tOz%YO|%ZO!O<eO!S${O!_$|O!i=vO!l$xO#j<kO$W%_O$t<gO$v<iO$y%`O(UTO(XUO(`$uO(x$}O(y%PO~Op0uO%]0vO(S0tO~P$,xO!g+fOa([a!_([a'y([a!]([a~O#k0|O~O[]X!]fX!^fX~O!]0}O!^)WX~O!^1PO~O[1QO~Ob1SO(S+nO(UTO(XUO~O!_&OO(S%fO`'tX!]'tX~O!]+sO`)Va~O!k1VO~P!:aO[1YO~O`1ZO~O#`1^O~On1aO!_$|O~O(d(zO!^)TP~Oh%VOn1jO!_1gO%i1iO~O[1tO!]1rO!^)UX~O!^1uO~O`1wOa%mO'y%mO~O(S#nO(UTO(XUO~O#S$dO#`$eO$Q$eOP(fXR(fX[(fXr(fX!Q(fX!S(fX!](fX!l(fX!p(fX#R(fX#n(fX#o(fX#p(fX#q(fX#r(fX#s(fX#t(fX#u(fX#v(fX#x(fX#z(fX#{(fX(`(fX(q(fX(x(fX(y(fX~Oj1zO&Z1{Oa(fX~P$2cOj1zO#`$eO&Z1{O~Oa1}O~P%[Oa2PO~O&d2SOP&biQ&biS&biY&bia&bid&bie&bil&bip&bir&bis&bit&biz&bi|&bi!O&bi!S&bi!W&bi!X&bi!_&bi!i&bi!l&bi!o&bi!p&bi!q&bi!s&bi!u&bi!x&bi!|&bi$W&bi$n&bi%h&bi%j&bi%l&bi%m&bi%n&bi%q&bi%s&bi%v&bi%w&bi%y&bi&V&bi&]&bi&_&bi&a&bi&c&bi&f&bi&l&bi&r&bi&t&bi&v&bi&x&bi&z&bi'v&bi(S&bi(U&bi(X&bi(`&bi(n&bi!^&bib&bi&i&bi~Ob2YO!^2WO&i2XO~P`O!_XO!l2[O~O&p,vOP&kiQ&kiS&kiY&kia&kid&kie&kil&kip&kir&kis&kit&kiz&ki|&ki!O&ki!S&ki!W&ki!X&ki!_&ki!i&ki!l&ki!o&ki!p&ki!q&ki!s&ki!u&ki!x&ki!|&ki$W&ki$n&ki%h&ki%j&ki%l&ki%m&ki%n&ki%q&ki%s&ki%v&ki%w&ki%y&ki&V&ki&]&ki&_&ki&a&ki&c&ki&f&ki&l&ki&r&ki&t&ki&v&ki&x&ki&z&ki'v&ki(S&ki(U&ki(X&ki(`&ki(n&ki!^&ki&d&kib&ki&i&ki~O!Y2bO~O!]!aa!^!aa~P#B]Os!nO!S!oO![2hO(d!mO!]'WX!^'WX~P@cO!]-WO!^(ha~O!]'^X!^'^X~P!9iO!]-ZO!^(wa~O!^2oO~P'_Oa%mO#`2xO'y%mO~Oa%mO!g#vO#`2xO'y%mO~Oa%mO!g#vO!p2|O#`2xO'y%mO(q'nO~Oa%mO'y%mO~P!:aO!]$_Ov$qa~O!Y'Vi!]'Vi~P!:aO!](TO!Y(gi~O!]([O!Y(ui~O!Y(vi!](vi~P!:aO!](si!k(sia(si'y(si~P!:aO#`3OO!](si!k(sia(si'y(si~O!](hO!k(ri~O!S%gO!_%hO!|]O#i3TO#j3SO(S%fO~O!S%gO!_%hO#j3SO(S%fO~On3[O!_'^O%i3ZO~Oh%VOn3[O!_'^O%i3ZO~O#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'y%aa(`%aa(q%aa!k%aa!Y%aa'v%aav%aa!_%aa%i%aa!g%aa~P#LaO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'y%ca(`%ca(q%ca!k%ca!Y%ca'v%cav%ca!_%ca%i%ca!g%ca~P#MSO#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!]%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'y%aa(`%aa(q%aa!k%aa!Y%aa'v%aa#`%aav%aa!_%aa%i%aa!g%aa~P#/XO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!]%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'y%ca(`%ca(q%ca!k%ca!Y%ca'v%ca#`%cav%ca!_%ca%i%ca!g%ca~P#/XO#k}aP}a[}aa}aj}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a'y}a(`}a(q}a!k}a!Y}a'v}av}a!_}a%i}a!g}a~P$&vO#k$saP$saR$sa[$saa$saj$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa'y$sa(`$sa(q$sa!k$sa!Y$sa'v$sav$sa!_$sa%i$sa!g$sa~P$'rO#k$uaP$uaR$ua[$uaa$uaj$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua'y$ua(`$ua(q$ua!k$ua!Y$ua'v$uav$ua!_$ua%i$ua!g$ua~P$(eO#k%TaP%TaR%Ta[%Taa%Taj%Tar%Ta!S%Ta!]%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta'y%Ta(`%Ta(q%Ta!k%Ta!Y%Ta'v%Ta#`%Tav%Ta!_%Ta%i%Ta!g%Ta~P#/XOa#cq!]#cq'y#cq'v#cq!Y#cq!k#cqv#cq!_#cq%i#cq!g#cq~P!:aO![3dO!]'XX!k'XX~P%[O!].oO!k(ja~O!].oO!k(ja~P!:aO!Y3gO~O$O!na!^!na~PKaO$O!ja!]!ja!^!ja~P#B]O$O!ra!^!ra~P!<wO$O!ta!^!ta~P!?_Og'[X!]'[X~P!+xO!].zOg(oa~OSfO!_3{O$d3|O~O!^4QO~Ov4RO~P#/XOa$mq!]$mq'y$mq'v$mq!Y$mq!k$mqv$mq!_$mq%i$mq!g$mq~P!:aO!Y4TO~P!&oO!S4UO~O!Q)|O'x)}O(y%POn'ha(x'ha!]'ha#`'ha~Og'ha$O'ha~P%,XO!Q)|O'x)}On'ja(x'ja(y'ja!]'ja#`'ja~Og'ja$O'ja~P%,zO(q$YO~P#/XO!YfX!Y$zX!]fX!]$zX!g%RX#`fX~P!/wO(S<xO~P!1jO!S%gO![4XO!_%hO(S%fO!]'dX!k'dX~O!]/kO!k(}a~O!]/kO!g#vO!k(}a~O!]/kO!g#vO(q'nO!k(}a~Og$|i!]$|i#`$|i$O$|i~P!0{O![4aO!Y'fX!]'fX~P!3iO!]/sO!Y)Oa~O!]/sO!Y)Oa~P#/XOP]XR]X[]Xj]Xr]X!Q]X!S]X!Y]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(`]X(q]X(x]X(y]X~Oj%YX!g%YX~P%0kOj4fO!g#vO~Oh%VO!g#vO!l%dO~Oh%VOr4kO!l%dO(q'nO~Or4pO!g#vO(q'nO~Os!nO!S4qO(UTO(XUO(d!mO~O(x$}On%ai!Q%ai'x%ai(y%ai!]%ai#`%ai~Og%ai$O%ai~P%4[O(y%POn%ci!Q%ci'x%ci(x%ci!]%ci#`%ci~Og%ci$O%ci~P%4}Og(^i!](^i~P!0{O#`4wOg(^i!](^i~P!0{O!k4zO~Oa$oq!]$oq'y$oq'v$oq!Y$oq!k$oqv$oq!_$oq%i$oq!g$oq~P!:aO!Y5QO~O!]5RO!_)PX~P#/XOa$zX!_$zX%^]X'y$zX!]$zX~P!/wO%^5UOaoXnoX!QoX!_oX'xoX'yoX(xoX(yoX!]oX~Op5VO(S#nO~O%^5UO~Ob5]O%j5^O(S+nO(UTO(XUO!]'sX!^'sX~O!]0}O!^)Wa~O[5bO~O`5cO~Oa%mO'y%mO~P#/XO!]5kO#`5mO!^)TX~O!^5nO~Or5tOs!nO!S*fO!b!yO!c!vO!d!vO!|;wO#T!pO#U!pO#V!pO#W!pO#X!pO#[5sO#]!zO(T!lO(UTO(XUO(d!mO(n!sO~O!^5rO~P%:YOn5yO!_1gO%i5xO~Oh%VOn5yO!_1gO%i5xO~Ob6QO(S#nO(UTO(XUO!]'rX!^'rX~O!]1rO!^)Ua~O(UTO(XUO(d6SO~O`6WO~Oj6ZO&Z6[O~PM|O!k6]O~P%[Oa6_O~Oa6_O~P%[Ob2YO!^6dO&i2XO~P`O!g6fO~O!g6hOh(ii!](ii!^(ii!g(ii!l(iir(ii(q(ii~O!]#hi!^#hi~P#B]O#`6iO!]#hi!^#hi~O!]!ai!^!ai~P#B]Oa%mO#`6rO'y%mO~Oa%mO!g#vO#`6rO'y%mO~O!](sq!k(sqa(sq'y(sq~P!:aO!](hO!k(rq~O!S%gO!_%hO#j6yO(S%fO~O!_'^O%i6|O~On7QO!_'^O%i6|O~O#k'haP'haR'ha['haa'haj'har'ha!S'ha!l'ha!p'ha#R'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#t'ha#u'ha#v'ha#x'ha#z'ha#{'ha'y'ha(`'ha(q'ha!k'ha!Y'ha'v'hav'ha!_'ha%i'ha!g'ha~P%,XO#k'jaP'jaR'ja['jaa'jaj'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja'y'ja(`'ja(q'ja!k'ja!Y'ja'v'jav'ja!_'ja%i'ja!g'ja~P%,zO#k$|iP$|iR$|i[$|ia$|ij$|ir$|i!S$|i!]$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i'y$|i(`$|i(q$|i!k$|i!Y$|i'v$|i#`$|iv$|i!_$|i%i$|i!g$|i~P#/XO#k%aiP%aiR%ai[%aia%aij%air%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai'y%ai(`%ai(q%ai!k%ai!Y%ai'v%aiv%ai!_%ai%i%ai!g%ai~P%4[O#k%ciP%ciR%ci[%cia%cij%cir%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci'y%ci(`%ci(q%ci!k%ci!Y%ci'v%civ%ci!_%ci%i%ci!g%ci~P%4}O!]'Xa!k'Xa~P!:aO!].oO!k(ji~O$O#ci!]#ci!^#ci~P#B]OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(`VO[#mij#mir#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(q#mi(x#mi(y#mi!]#mi!^#mi~O#n#mi~P%MXO#n<PO~P%MXOP$[OR#zOr<]O!Q#yO!S#{O!l#xO!p$[O#n<PO#o<QO#p<QO#q<QO(`VO[#mij#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(q#mi(x#mi(y#mi!]#mi!^#mi~O#r#mi~P& aO#r<RO~P& aOP$[OR#zO[<_Oj<SOr<]O!Q#yO!S#{O!l#xO!p$[O#R<SO#n<PO#o<QO#p<QO#q<QO#r<RO#s<SO#t<SO#u<^O(`VO#x#mi#z#mi#{#mi$O#mi(q#mi(x#mi(y#mi!]#mi!^#mi~O#v#mi~P&#iOP$[OR#zO[<_Oj<SOr<]O!Q#yO!S#{O!l#xO!p$[O#R<SO#n<PO#o<QO#p<QO#q<QO#r<RO#s<SO#t<SO#u<^O#v<TO(`VO(y#}O#z#mi#{#mi$O#mi(q#mi(x#mi!]#mi!^#mi~O#x<VO~P&%jO#x#mi~P&%jO#v<TO~P&#iOP$[OR#zO[<_Oj<SOr<]O!Q#yO!S#{O!l#xO!p$[O#R<SO#n<PO#o<QO#p<QO#q<QO#r<RO#s<SO#t<SO#u<^O#v<TO#x<VO(`VO(x#|O(y#}O#{#mi$O#mi(q#mi!]#mi!^#mi~O#z#mi~P&'yO#z<XO~P&'yOa#|y!]#|y'y#|y'v#|y!Y#|y!k#|yv#|y!_#|y%i#|y!g#|y~P!:aO[#mij#mir#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(q#mi!]#mi!^#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n<PO#o<QO#p<QO#q<QO(`VO(x#mi(y#mi~P&*uOn=}O!Q)|O'x)}O(x$}O(y%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(`#mi~P&*uO#S$dOP(_XR(_X[(_Xj(_Xn(_Xr(_X!Q(_X!S(_X!l(_X!p(_X#R(_X#n(_X#o(_X#p(_X#q(_X#r(_X#s(_X#t(_X#u(_X#v(_X#x(_X#z(_X#{(_X$O(_X'x(_X(`(_X(q(_X(x(_X(y(_X!](_X!^(_X~O$O$Pi!]$Pi!^$Pi~P#B]O$O!ri!^!ri~P$*bOg'[a!]'[a~P!0{O!^7dO~O!]'ca!^'ca~P#B]O!Y7eO~P#/XO!g#vO(q'nO!]'da!k'da~O!]/kO!k(}i~O!]/kO!g#vO!k(}i~Og$|q!]$|q#`$|q$O$|q~P!0{O!Y'fa!]'fa~P#/XO!g7lO~O!]/sO!Y)Oi~P#/XO!]/sO!Y)Oi~O!Y7oO~Oh%VOr7tO!l%dO(q'nO~Oj7vO!g#vO~Or7yO!g#vO(q'nO~O!Q)|O'x)}O(y%POn'ia(x'ia!]'ia#`'ia~Og'ia$O'ia~P&3vO!Q)|O'x)}On'ka(x'ka(y'ka!]'ka#`'ka~Og'ka$O'ka~P&4iO!Y7{O~Og%Oq!]%Oq#`%Oq$O%Oq~P!0{Og(^q!](^q~P!0{O#`7|Og(^q!](^q~P!0{Oa$oy!]$oy'y$oy'v$oy!Y$oy!k$oyv$oy!_$oy%i$oy!g$oy~P!:aO!g6hO~O!]5RO!_)Pa~O!_'^OP$TaR$Ta[$Taj$Tar$Ta!Q$Ta!S$Ta!]$Ta!l$Ta!p$Ta#R$Ta#n$Ta#o$Ta#p$Ta#q$Ta#r$Ta#s$Ta#t$Ta#u$Ta#v$Ta#x$Ta#z$Ta#{$Ta(`$Ta(q$Ta(x$Ta(y$Ta~O%i6|O~P&7ZO%^8QOa%[i!_%[i'y%[i!]%[i~Oa#cy!]#cy'y#cy'v#cy!Y#cy!k#cyv#cy!_#cy%i#cy!g#cy~P!:aO[8SO~Ob8UO(S+nO(UTO(XUO~O!]0}O!^)Wi~O`8YO~O(d(zO!]'oX!^'oX~O!]5kO!^)Ta~O!^8cO~P%:YO(n!sO~P$${O#[8dO~O!_1gO~O!_1gO%i8fO~On8iO!_1gO%i8fO~O[8nO!]'ra!^'ra~O!]1rO!^)Ui~O!k8rO~O!k8sO~O!k8vO~O!k8vO~P%[Oa8xO~O!g8yO~O!k8zO~O!](vi!^(vi~P#B]Oa%mO#`9SO'y%mO~O!](sy!k(sya(sy'y(sy~P!:aO!](hO!k(ry~O%i9VO~P&7ZO!_'^O%i9VO~O#k$|qP$|qR$|q[$|qa$|qj$|qr$|q!S$|q!]$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q'y$|q(`$|q(q$|q!k$|q!Y$|q'v$|q#`$|qv$|q!_$|q%i$|q!g$|q~P#/XO#k'iaP'iaR'ia['iaa'iaj'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia'y'ia(`'ia(q'ia!k'ia!Y'ia'v'iav'ia!_'ia%i'ia!g'ia~P&3vO#k'kaP'kaR'ka['kaa'kaj'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka'y'ka(`'ka(q'ka!k'ka!Y'ka'v'kav'ka!_'ka%i'ka!g'ka~P&4iO#k%OqP%OqR%Oq[%Oqa%Oqj%Oqr%Oq!S%Oq!]%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq'y%Oq(`%Oq(q%Oq!k%Oq!Y%Oq'v%Oq#`%Oqv%Oq!_%Oq%i%Oq!g%Oq~P#/XO!]'Xi!k'Xi~P!:aO$O#cq!]#cq!^#cq~P#B]O(x$}OP%aaR%aa[%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa$O%aa(`%aa(q%aa!]%aa!^%aa~On%aa!Q%aa'x%aa(y%aa~P&HnO(y%POP%caR%ca[%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca$O%ca(`%ca(q%ca!]%ca!^%ca~On%ca!Q%ca'x%ca(x%ca~P&JuOn=}O!Q)|O'x)}O(y%PO~P&HnOn=}O!Q)|O'x)}O(x$}O~P&JuOR0cO!Q0cO!S0dO#S$dOP}a[}aj}an}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a$O}a'x}a(`}a(q}a(x}a(y}a!]}a!^}a~O!Q)|O'x)}OP$saR$sa[$saj$san$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa$O$sa(`$sa(q$sa(x$sa(y$sa!]$sa!^$sa~O!Q)|O'x)}OP$uaR$ua[$uaj$uan$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua$O$ua(`$ua(q$ua(x$ua(y$ua!]$ua!^$ua~On=}O!Q)|O'x)}O(x$}O(y%PO~OP%TaR%Ta[%Taj%Tar%Ta!S%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta$O%Ta(`%Ta(q%Ta!]%Ta!^%Ta~P'%zO$O$mq!]$mq!^$mq~P#B]O$O$oq!]$oq!^$oq~P#B]O!^9dO~O$O9eO~P!0{O!g#vO!]'di!k'di~O!g#vO(q'nO!]'di!k'di~O!]/kO!k(}q~O!Y'fi!]'fi~P#/XO!]/sO!Y)Oq~Or9lO!g#vO(q'nO~O[9nO!Y9mO~P#/XO!Y9mO~Oj9tO!g#vO~Og(^y!](^y~P!0{O!]'ma!_'ma~P#/XOa%[q!_%[q'y%[q!]%[q~P#/XO[9yO~O!]0}O!^)Wq~O#`9}O!]'oa!^'oa~O!]5kO!^)Ti~P#B]O!S:PO~O!_1gO%i:SO~O(UTO(XUO(d:XO~O!]1rO!^)Uq~O!k:[O~O!k:]O~O!k:^O~O!k:^O~P%[O#`:aO!]#hy!^#hy~O!]#hy!^#hy~P#B]O%i:fO~P&7ZO!_'^O%i:fO~O$O#|y!]#|y!^#|y~P#B]OP$|iR$|i[$|ij$|ir$|i!S$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i$O$|i(`$|i(q$|i!]$|i!^$|i~P'%zO!Q)|O'x)}O(y%POP'haR'ha['haj'han'har'ha!S'ha!l'ha!p'ha#R'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#t'ha#u'ha#v'ha#x'ha#z'ha#{'ha$O'ha(`'ha(q'ha(x'ha!]'ha!^'ha~O!Q)|O'x)}OP'jaR'ja['jaj'jan'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja$O'ja(`'ja(q'ja(x'ja(y'ja!]'ja!^'ja~O(x$}OP%aiR%ai[%aij%ain%air%ai!Q%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai$O%ai'x%ai(`%ai(q%ai(y%ai!]%ai!^%ai~O(y%POP%ciR%ci[%cij%cin%cir%ci!Q%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci$O%ci'x%ci(`%ci(q%ci(x%ci!]%ci!^%ci~O$O$oy!]$oy!^$oy~P#B]O$O#cy!]#cy!^#cy~P#B]O!g#vO!]'dq!k'dq~O!]/kO!k(}y~O!Y'fq!]'fq~P#/XOr:pO!g#vO(q'nO~O[:tO!Y:sO~P#/XO!Y:sO~Og(^!R!](^!R~P!0{Oa%[y!_%[y'y%[y!]%[y~P#/XO!]0}O!^)Wy~O!]5kO!^)Tq~O(S:zO~O!_1gO%i:}O~O!k;QO~O%i;VO~P&7ZOP$|qR$|q[$|qj$|qr$|q!S$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q$O$|q(`$|q(q$|q!]$|q!^$|q~P'%zO!Q)|O'x)}O(y%POP'iaR'ia['iaj'ian'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia$O'ia(`'ia(q'ia(x'ia!]'ia!^'ia~O!Q)|O'x)}OP'kaR'ka['kaj'kan'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka$O'ka(`'ka(q'ka(x'ka(y'ka!]'ka!^'ka~OP%OqR%Oq[%Oqj%Oqr%Oq!S%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq$O%Oq(`%Oq(q%Oq!]%Oq!^%Oq~P'%zOg%e!Z!]%e!Z#`%e!Z$O%e!Z~P!0{O!Y;ZO~P#/XOr;[O!g#vO(q'nO~O[;^O!Y;ZO~P#/XO!]'oq!^'oq~P#B]O!]#h!Z!^#h!Z~P#B]O#k%e!ZP%e!ZR%e!Z[%e!Za%e!Zj%e!Zr%e!Z!S%e!Z!]%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z'y%e!Z(`%e!Z(q%e!Z!k%e!Z!Y%e!Z'v%e!Z#`%e!Zv%e!Z!_%e!Z%i%e!Z!g%e!Z~P#/XOr;fO!g#vO(q'nO~O!Y;gO~P#/XOr;nO!g#vO(q'nO~O!Y;oO~P#/XOP%e!ZR%e!Z[%e!Zj%e!Zr%e!Z!S%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z$O%e!Z(`%e!Z(q%e!Z!]%e!Z!^%e!Z~P'%zOr;rO!g#vO(q'nO~Ov(eX~P1qO!Q%qO~P!)PO(T!lO~P!)PO!YfX!]fX#`fX~P%0kOP]XR]X[]Xj]Xr]X!Q]X!S]X!]]X!]fX!l]X!p]X#R]X#S]X#`]X#`fX#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(`]X(q]X(x]X(y]X~O!gfX!k]X!kfX(qfX~P'JsOP;vOQ;vOSfOd=rOe!iOpkOr;vOskOtkOzkO|;vO!O;vO!SWO!WkO!XkO!_XO!i;yO!lZO!o;vO!p;vO!q;vO!s;zO!u;}O!x!hO$W!kO$n=pO(S)ZO(UTO(XUO(`VO(n[O~O!]<ZO!^$qa~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<fO!S${O!_$|O!i=wO!l$xO#j<lO$W%_O$t<hO$v<jO$y%`O(S(tO(UTO(XUO(`$uO(x$}O(y%PO~Ol)bO~P( iOr!eX(q!eX~P# }Or(iX(q(iX~P#!pO!^]X!^fX~P'JsO!YfX!Y$zX!]fX!]$zX#`fX~P!/wO#k<OO~O!g#vO#k<OO~O#`<`O~Oj<SO~O#`<pO!](vX!^(vX~O#`<`O!](tX!^(tX~O#k<qO~Og<sO~P!0{O#k<yO~O#k<zO~O!g#vO#k<{O~O!g#vO#k<qO~O$O<|O~P#B]O#k<}O~O#k=OO~O#k=TO~O#k=UO~O#k=VO~O#k=WO~O$O=XO~P!0{O$O=YO~P!0{Ok#S#T#U#W#X#[#i#j#u$n$t$v$y%]%^%h%i%j%q%s%v%w%y%{~'}T#o!X'{(T#ps#n#qr!Q'|$]'|(S$_(d~",goto:"$8g)[PPPPPP)]PP)`P)qP+R/WPPPP6bPP6xPP<pPPP@dP@zP@zPPP@zPCSP@zP@zP@zPCWPC]PCzPHtPPPHxPPPPHxK{PPPLRLsPHxPHxPP! RHxPPPHxPHxP!#YHxP!&p!'u!(OP!(r!(v!(r!,TPPPPPPP!,t!'uPP!-U!.vP!2SHxHx!2X!5e!:R!:R!>QPPP!>YHxPPPPPPPPP!AiP!BvPPHx!DXPHxPHxHxHxHxHxPHx!EkP!HuP!K{P!LP!LZ!L_!L_P!HrP!Lc!LcP# iP# mHxPHx# s#$xCW@zP@zP@z@zP#&V@z@z#(i@z#+a@z#-m@z@z#.]#0q#0q#0v#1P#0q#1[PP#0qP@z#1t@z#5s@z@z6bPPP#9xPPP#:c#:cP#:cP#:y#:cPP#;PP#:vP#:v#;d#:v#<O#<U#<X)`#<[)`P#<c#<c#<cP)`P)`P)`P)`PP)`P#<i#<lP#<l)`P#<pP#<sP)`P)`P)`P)`P)`P)`)`PP#<y#=P#=[#=b#=h#=n#=t#>S#>Y#>d#>j#>t#>z#?[#?b#@S#@f#@l#@r#AQ#Ag#C[#Cj#Cq#E]#Ek#G]#Gk#Gq#Gw#G}#HX#H_#He#Ho#IR#IXPPPPPPPPPPP#I_PPPPPPP#JS#MZ#Ns#Nz$ SPPP$&nP$&w$)p$0Z$0^$0a$1`$1c$1j$1rP$1x$1{P$2i$2m$3e$4s$4x$5`PP$5e$5k$5o$5r$5v$5z$6v$7_$7v$7z$7}$8Q$8W$8Z$8_$8cR!|RoqOXst!Z#d%l&p&r&s&u,n,s2S2VY!vQ'^-`1g5qQ%svQ%{yQ&S|Q&h!VS'U!e-WQ'd!iS'j!r!yU*h$|*X*lQ+l%|Q+y&UQ,_&bQ-^']Q-h'eQ-p'kQ0U*nQ1q,`R<m;z%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y,k,n,s-d-l-z.Q.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3d4q5y6Z6[6_6r8i8x9SS#q];w!r)]$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sU*{%[<e<fQ+q&OQ,a&eQ,h&mQ0r+dQ0w+fQ1S+rQ1y,fQ3W.bQ5V0vQ5]0}Q6Q1rQ7O3[Q8U5^R9Y7Q'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s!S!nQ!r!v!y!z$|'U']'^'j'k'l*h*l*n*o-W-^-`-p0U0X1g5q5s%[$ti#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}Q&V|Q'S!eS'Y%h-ZQ+q&OQ,a&eQ0f+OQ1S+rQ1X+xQ1x,eQ1y,fQ5]0}Q5f1ZQ6Q1rQ6T1tQ6U1wQ8U5^Q8X5cQ8q6WQ9|8YQ:Y8nR<o*XrnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VR,c&i&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=r=s[#]WZ#W#Z'V(R!b%im#h#i#l$x%d%g([(f(g(h*W*[*_+W+X+Z,j-Q.O.U.V.W.Y/h/k2[3S3T4X6h6yQ%vxQ%zyS&P|&UQ&]!TQ'a!hQ'c!iQ(o#sS+k%{%|Q+o&OQ,Y&`Q,^&bS-g'd'eQ.d(pQ0{+lQ1R+rQ1T+sQ1W+wQ1l,ZS1p,_,`Q2t-hQ5[0}Q5`1QQ5e1YQ6P1qQ8T5^Q8W5bQ9x8SR:w9y!U$zi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y!^%xy!i!u%z%{%|'T'c'd'e'i's*g+k+l-T-g-h-o/{0O0{2m2t2{4i4j4m7s9pQ+e%vQ,O&YQ,R&ZQ,]&bQ.c(oQ1k,YU1o,^,_,`Q3].dQ5z1lS6O1p1qQ8m6P#f=t#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}o=u<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YW%Ti%V*v=pS&Y!Q&gQ&Z!RQ&[!SQ+S%cR+|&W%]%Si#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}T)x$u)yV*{%[<e<fW'Y!e%h*X-ZS({#y#zQ+`%qQ+v&RS.](k(lQ1b,SQ4x0cR8^5k'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s$i$^c#Y#e%p%r%t(Q(W(r(w)P)Q)R)S)T)U)V)W)X)Y)[)^)`)e)o+a+u-U-s-x-}.P.n.q.u.w.x.y/]0j2c2f2v2}3c3h3i3j3k3l3m3n3o3p3q3r3s3t3w3x4P5O5Y6k6q6v7V7W7a7b8`8|9Q9[9b9c:c:y;R;x=gT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ'W!eR2i-W!W!nQ!e!r!v!y!z$|'U']'^'j'k'l*X*h*l*n*o-W-^-`-p0U0X1g5q5sR1d,UnqOXst!Z#d%l&p&r&s&u,n,s2S2VQ&w!^Q't!xS(q#u<OQ+i%yQ,W&]Q,X&_Q-e'bQ-r'mS.m(v<qS0k+U<{Q0y+jQ1f,VQ2Z,uQ2],vQ2e-RQ2r-fQ2u-jS5P0l=VQ5W0zS5Z0|=WQ6j2gQ6n2sQ6s2zQ8R5XQ8}6lQ9O6oQ9R6tR:`8z$d$]c#Y#e%r%t(Q(W(r(w)P)Q)R)S)T)U)V)W)X)Y)[)^)`)e)o+a+u-U-s-x-}.P.n.q.u.x.y/]0j2c2f2v2}3c3h3i3j3k3l3m3n3o3p3q3r3s3t3w3x4P5O5Y6k6q6v7V7W7a7b8`8|9Q9[9b9c:c:y;R;x=gS(m#p'gQ(}#zS+_%p.wS.^(l(nR3U._'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sS#q];wQ&r!XQ&s!YQ&u![Q&v!]R2R,qQ'_!hQ+b%vQ-c'aS.`(o+eQ2p-bW3Y.c.d0q0sQ6m2qW6z3V3X3]5TU9U6{6}7PU:e9W9X9ZS;T:d:gQ;b;UR;j;cU!wQ'^-`T5o1g5q!Q_OXZ`st!V!Z#d#h%d%l&g&i&p&r&s&u(h,n,s.V2S2V]!pQ!r'^-`1g5qT#q];w%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SS({#y#zS.](k(l!s=^$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sU$fd)],hS(n#p'gU*s%R(u3vU0e*z.i7]Q5T0rQ6{3WQ9X7OR:g9Ym!tQ!r!v!y!z'^'j'k'l-`-p1g5q5sQ'r!uS(d#g1|S-n'i'uQ/n*ZQ/{*gQ2|-qQ4]/oQ4i/}Q4j0OQ4o0WQ7h4WS7s4k4mS7w4p4rQ9g7iQ9k7oQ9p7tQ9u7yS:o9l9mS;Y:p:sS;e;Z;[S;m;f;gS;q;n;oR;t;rQ#wbQ'q!uS(c#g1|S(e#m+TQ+V%eQ+g%wQ+m%}U-m'i'r'uQ.R(dQ/m*ZQ/|*gQ0P*iQ0x+hQ1m,[S2y-n-qQ3R.ZS4[/n/oQ4e/yS4h/{0WQ4l0QQ5|1nQ6u2|Q7g4WQ7k4]U7r4i4o4rQ7u4nQ8k5}S9f7h7iQ9j7oQ9r7wQ9s7xQ:V8lQ:m9gS:n9k9mQ:v9uQ;P:WS;X:o:sS;d;Y;ZS;l;e;gS;p;m;oQ;s;qQ;u;tQ=a=[Q=l=eR=m=fV!wQ'^-`%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SS#wz!j!r=Z$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sR=a=r%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SQ%ej!^%wy!i!u%z%{%|'T'c'd'e'i's*g+k+l-T-g-h-o/{0O0{2m2t2{4i4j4m7s9pS%}z!jQ+h%xQ,[&bW1n,],^,_,`U5}1o1p1qS8l6O6PQ:W8m!r=[$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ=e=qR=f=r%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SY#bWZ#W#Z(R!b%im#h#i#l$x%d%g([(f(g(h*W*[*_+W+X+Z,j-Q.O.U.V.W.Y/h/k2[3S3T4X6h6yQ,i&m!p=]$Z$n)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sR=`'VU'Z!e%h*XR2k-Z%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y,k,n,s-d-l-z.Q.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3d4q5y6Z6[6_6r8i8x9S!r)]$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ,h&mQ0r+dQ3W.bQ7O3[R9Y7Q!b$Tc#Y%p(Q(W(r(w)X)Y)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;x!P<U)[)o-U.w2c2f3h3q3r3w4P6k7W7a7b8`8|9[9b9c:y;R=g!f$Vc#Y%p(Q(W(r(w)U)V)X)Y)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;x!T<W)[)o-U.w2c2f3h3n3o3q3r3w4P6k7W7a7b8`8|9[9b9c:y;R=g!^$Zc#Y%p(Q(W(r(w)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;xQ4V/fz=s)[)o-U.w2c2f3h3w4P6k7W7a7b8`8|9[9b9c:y;R=gQ=x=zR=y={'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sS$oh$pR3|/P'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/P/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sT$kf$qQ$ifS)h$l)lR)t$qT$jf$qT)j$l)l'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/P/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sT$oh$pQ$rhR)s$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9S!s=q$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s#glOPXZst!Z!`!o#S#d#o#{$n%l&i&l&m&p&r&s&u&y'R'`(|)q*f+Y+d,k,n,s-d.b/Q/i0V0d1j1z1{1}2P2S2V2X3[3{4q5y6Z6[6_7Q8i8x!U%Ri$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y#f(u#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}Q+P%`Q/^)|o3v<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!U$yi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=yQ*`$zU*i$|*X*lQ+Q%aQ0Q*j#f=c#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n=d<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YQ=h=tQ=i=uQ=j=vR=k=w!U%Ri$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y#f(u#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}o3v<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YnoOXst!Z#d%l&p&r&s&u,n,s2S2VS*c${*WQ,|&|Q,}'OR4`/s%[%Si#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}Q,P&ZQ1`,RQ5i1_R8]5jV*k$|*X*lU*k$|*X*lT5p1g5qS/y*f/iQ4n0VT7x4q:PQ+g%wQ0P*iQ0x+hQ1m,[Q5|1nQ8k5}Q:V8lR;P:W!U%Oi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=yx*P$v)c*Q*r+R/q0^0_3y4^4{4|4}7f7z9v:l=b=n=oS0Y*q0Z#f<a#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n<b<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!d<t(s)a*Y*b.e.h.l/Y/f/v0p1]3`4S4_4c5h7R7U7m7p7}8P9i9q9w:q:u;W;];h=z={`<u3u7X7[7`9]:h:k;kS=P.g3aT=Q7Z9`!U%Qi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y|*R$v)c*S*q+R/b/q0^0_3y4^4s4{4|4}7f7z9v:l=b=n=oS0[*r0]#f<c#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n<d<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!h<v(s)a*Y*b.f.g.l/Y/f/v0p1]3^3`4S4_4c5h7R7S7U7m7p7}8P9i9q9w:q:u;W;];h=z={d<w3u7Y7Z7`9]9^:h:i:k;kS=R.h3bT=S7[9arnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VQ&d!UR,k&mrnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VR&d!UQ,T&[R1[+|snOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VQ1h,YS5w1k1lU8e5u5v5zS:R8g8hS:{:Q:TQ;_:|R;i;`Q&k!VR,d&gR6T1tR:Y8nS&P|&UR1T+sQ&p!WR,n&qR,t&vT2T,s2VR,x&wQ,w&wR2^,xQ'w!{R-t'wSsOtQ#dXT%os#dQ#OTR'y#OQ#RUR'{#RQ)y$uR/Z)yQ#UVR(O#UQ#XWU(U#X(V-{Q(V#YR-{(WQ-X'WR2j-XQ.p(wS3e.p3fR3f.qQ-`'^R2n-`Y!rQ'^-`1g5qR'h!rQ.{)cR3z.{U#_W%g*WU(]#_(^-|Q(^#`R-|(XQ-['ZR2l-[t`OXst!V!Z#d%l&g&i&p&r&s&u,n,s2S2VS#hZ%dU#r`#h.VR.V(hQ(i#jQ.S(eW.[(i.S3P6wQ3P.TR6w3QQ)l$lR/R)lQ$phR)r$pQ$`cU)_$`-w<[Q-w;xR<[)oQ/l*ZW4Y/l4Z7j9hU4Z/m/n/oS7j4[4]R9h7k$e*O$v(s)a)c*Y*b*q*r*|*}+R.g.h.j.k.l/Y/b/d/f/q/v0^0_0p1]3^3_3`3u3y4S4^4_4c4s4u4{4|4}5h7R7S7T7U7Z7[7^7_7`7f7m7p7z7}8P9]9^9_9i9q9v9w:h:i:j:k:l:q:u;W;];h;k=b=n=o=z={Q/t*bU4b/t4d7nQ4d/vR7n4cS*l$|*XR0S*lx*Q$v)c*q*r+R/q0^0_3y4^4{4|4}7f7z9v:l=b=n=o!d.e(s)a*Y*b.g.h.l/Y/f/v0p1]3`4S4_4c5h7R7U7m7p7}8P9i9q9w:q:u;W;];h=z={U/c*Q.e7Xa7X3u7Z7[7`9]:h:k;kQ0Z*qQ3a.gU4t0Z3a9`R9`7Z|*S$v)c*q*r+R/b/q0^0_3y4^4s4{4|4}7f7z9v:l=b=n=o!h.f(s)a*Y*b.g.h.l/Y/f/v0p1]3^3`4S4_4c5h7R7S7U7m7p7}8P9i9q9w:q:u;W;];h=z={U/e*S.f7Ye7Y3u7Z7[7`9]9^:h:i:k;kQ0]*rQ3b.hU4v0]3b9aR9a7[Q*w%UR0a*wQ5S0pR8O5SQ+[%jR0o+[Q5l1bS8_5l:OR:O8`Q,V&]R1e,VQ5q1gR8b5qQ1s,aS6R1s8oR8o6TQ1O+oW5_1O5a8V9zQ5a1RQ8V5`R9z8WQ+t&PR1U+tQ2V,sR6c2VYrOXst#dQ&t!ZQ+^%lQ,m&pQ,o&rQ,p&sQ,r&uQ2Q,nS2T,s2VR6b2SQ%npQ&x!_Q&{!aQ&}!bQ'P!cQ'o!uQ+]%kQ+i%yQ+{&VQ,c&kQ,z&zW-k'i'q'r'uQ-r'mQ0R*kQ0y+jS1v,d,gQ2_,yQ2`,|Q2a,}Q2u-jW2w-m-n-q-sQ5W0zQ5d1XQ5g1]Q5{1mQ6V1xQ6a2RU6p2v2y2|Q6s2zQ8R5XQ8Z5fQ8[5hQ8a5pQ8j5|Q8p6US9P6q6uQ9R6tQ9{8XQ:U8kQ:Z8qQ:b9QQ:x9|Q;O:VQ;S:cR;a;PQ%yyQ'b!iQ'm!uU+j%z%{%|Q-R'TU-f'c'd'eS-j'i'sQ/z*gS0z+k+lQ2g-TS2s-g-hQ2z-oS4g/{0OQ5X0{Q6l2mQ6o2tQ6t2{U7q4i4j4mQ9o7sR:r9pS$wi=pR*x%VU%Ui%V=pR0`*vQ$viS(s#v+fS)a$b$cQ)c$dQ*Y$xS*b${*WQ*q%OQ*r%QQ*|%]Q*}%^Q+R%bQ.g<aQ.h<cQ.j<gQ.k<iQ.l<kQ/Y)wQ/b*PQ/d*RQ/f*TQ/q*^S/v*d/hQ0^*tQ0_*ul0p+c,Q.a1a1i3Z5x6|8f9V:S:f:};VQ1]+}Q3^<tQ3_<vQ3`<yS3u<^<_Q3y.zS4S/_4UQ4^/rQ4_/sQ4c/uQ4s0YQ4u0[Q4{0gQ4|0hQ4}0iQ5h1^Q7R<}Q7S=PQ7T=RQ7U=TQ7Z<bQ7[<dQ7^<hQ7_<jQ7`<lQ7f4VQ7m4aQ7p4fQ7z4wQ7}5RQ8P5UQ9]<zQ9^<uQ9_<wQ9i7lQ9q7vQ9v7|Q9w8QQ:h=OQ:i=QQ:j=SQ:k=UQ:l9eQ:q9nQ:u9tQ;W=XQ;]:tQ;h;^Q;k=YQ=b=pQ=n=xQ=o=yQ=z=|R={=}Q*z%[Q.i<eR7]<fnpOXst!Z#d%l&p&r&s&u,n,s2S2VQ!fPS#fZ#oQ&z!`W'f!o*f0V4qQ'}#SQ)O#{Q)p$nS,g&i&lQ,l&mQ,y&yS-O'R/iQ-b'`Q.s(|Q/V)qQ0m+YQ0s+dQ2O,kQ2q-dQ3X.bQ4O/QQ4y0dQ5v1jQ6X1zQ6Y1{Q6^1}Q6`2PQ6e2XQ7P3[Q7c3{Q8h5yQ8t6ZQ8u6[Q8w6_Q9Z7QQ:T8iR:_8x#[cOPXZst!Z!`!o#d#o#{%l&i&l&m&p&r&s&u&y'R'`(|*f+Y+d,k,n,s-d.b/i0V0d1j1z1{1}2P2S2V2X3[4q5y6Z6[6_7Q8i8xQ#YWQ#eYQ%puQ%rvS%tw!gS(Q#W(TQ(W#ZQ(r#uQ(w#xQ)P$OQ)Q$PQ)R$QQ)S$RQ)T$SQ)U$TQ)V$UQ)W$VQ)X$WQ)Y$XQ)[$ZQ)^$_Q)`$aQ)e$eW)o$n)q/Q3{Q+a%sQ+u&QS-U'V2hQ-s'pS-x(R-zQ-}(ZQ.P(bQ.n(vQ.q(xQ.u;vQ.w;yQ.x;zQ.y;}Q/]){Q0j+UQ2c-PQ2f-SQ2v-lQ2}.QQ3c.oQ3h<OQ3i<PQ3j<QQ3k<RQ3l<SQ3m<TQ3n<UQ3o<VQ3p<WQ3q<XQ3r<YQ3s.vQ3t<]Q3w<`Q3x<mQ4P<ZQ5O0lQ5Y0|Q6k<pQ6q2xQ6v3OQ7V3dQ7W<qQ7a<sQ7b<{Q8`5mQ8|6iQ9Q6rQ9[<|Q9b=VQ9c=WQ:c9SQ:y9}Q;R:aQ;x#SR=g=sR#[WR'X!el!tQ!r!v!y!z'^'j'k'l-`-p1g5q5sS'T!e-WU*g$|*X*lS-T'U']S0O*h*nQ0W*oQ2m-^Q4m0UR4r0XR(y#xQ!fQT-_'^-`]!qQ!r'^-`1g5qQ#p]R'g;wR)d$dY!uQ'^-`1g5qQ'i!rS's!v!yS'u!z5sS-o'j'kQ-q'lR2{-pT#kZ%dS#jZ%dS%jm,jU(e#h#i#lS.T(f(gQ.X(hQ0n+ZQ3Q.UU3R.V.W.YS6x3S3TR9T6yd#^W#W#Z%g(R([*W+W.O/hr#gZm#h#i#l%d(f(g(h+Z.U.V.W.Y3S3T6yS*Z$x*_Q/o*[Q1|,jQ2d-QQ4W/kQ6g2[Q7i4XQ8{6hT=_'V+XV#aW%g*WU#`W%g*WS(S#W([U(X#Z+W/hS-V'V+XT-y(R.OV'[!e%h*XQ$lfR)v$qT)k$l)lR3}/PT*]$x*_T*e${*WQ0q+cQ1_,QQ3V.aQ5j1aQ5u1iQ6}3ZQ8g5xQ9W6|Q:Q8fQ:d9VQ:|:SQ;U:fQ;`:}R;c;VnqOXst!Z#d%l&p&r&s&u,n,s2S2VQ&j!VR,c&gtmOXst!U!V!Z#d%l&g&p&r&s&u,n,s2S2VR,j&mT%km,jR1c,SR,b&eQ&T|R+z&UR+p&OT&n!W&qT&o!W&qT2U,s2V",nodeNames:"⚠ ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList in out const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:379,context:trackNewline,nodeProps:[["isolate",-8,5,6,14,37,39,51,53,55,""],["group",-26,9,17,19,68,207,211,215,216,218,221,224,234,236,242,244,246,248,251,257,263,265,267,269,271,273,274,"Statement",-34,13,14,32,35,36,42,51,54,55,57,62,70,72,76,80,82,84,85,110,111,120,121,136,139,141,142,143,144,145,147,148,167,169,171,"Expression",-23,31,33,37,41,43,45,173,175,177,178,180,181,182,184,185,186,188,189,190,201,203,205,206,"Type",-3,88,103,109,"ClassItem"],["openedBy",23,"<",38,"InterpolationStart",56,"[",60,"{",73,"(",160,"JSXStartCloseTag"],["closedBy",-2,24,168,">",40,"InterpolationEnd",50,"]",61,"}",74,")",165,"JSXEndTag"]],propSources:[jsHighlight],skippedNodes:[0,5,6,277],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$i&j(Y!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(Y!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$i&j(VpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(VpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$i&j(Vp(Y!b'{0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(W#S$i&j'|0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$i&j(Vp(Y!b'|0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$i&j!p),Q(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#v(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#v(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(U':f$i&j(Y!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$i&j(Y!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$i&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$d`$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$d``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$d`$i&j(Y!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(Y!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$d`(Y!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$i&j(Vp(Y!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$i&j(Vp(Y!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$i&j(Y!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$i&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(Y!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$i&j(VpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(VpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Vp(Y!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$i&j(n%1l(Vp(Y!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$i&j(Vp(Y!b$]#t(S,2j(d$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$i&j(Vp(Y!b$]#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$i&j(Vp(Y!b#p(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$i&j$Q(Ch(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(y+JY$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$i&j#z(Ch(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(X';W$i&j(VpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$i&j(VpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$i&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$d`$i&j(VpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(VpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$d`(VpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!l/.^$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!k!Lf$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$i&j(Vp(Y!b(T%&f#q(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$i&j(Vp(Y!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$i&j(Vp(Y!br+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!]+Jf$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$i&j(Vp(Y!b!Q.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_![!L^$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$i&j(Vp(Y!b#o(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$i&j(Vp(Y!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$i&j(Y!b!X7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$i&j!X7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$i&j!X7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!X7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!X7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$i&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$i&j(Y!b!X7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(Y!b!X7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(Y!b!X7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(Y!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$i&j(Y!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$i&j(Vp!X7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$i&j(Vp!X7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Vp!X7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Vp!X7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(VpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$i&j(VpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$i&j(Vp(Y!b!X7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Vp(Y!b!X7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Vp(Y!b!X7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Vp(Y!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$i&j(Vp(Y!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$i&j(Vp(Y!b'}0/l!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$i&j(Vp(Y!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$i&j(Y!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$i&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(Y!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$i&j(VpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(VpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Vp(Y!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$i&j$Q(Ch(Vp(Y!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Z#t$i&j(Vp(Y!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!g$b$i&j$O)Lv(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#R-<U(Vp(Y!b$n7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$k&j(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#r(Ch(Vp(Y!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$Q(Ch(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#s(Ch(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#`*!Y$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#k(Cl$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#s(Ch$f#|$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#s(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#r(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#r(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(q(Ct$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$i&j#{(Ch(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!|$Ip$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!S0,v$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$i&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$i&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$i&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$i&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$i&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!Y#)l$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#x(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$i&j(Vp(Y!b(`+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$i&j(Vp(Y!b(S,2j$_#t(d$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$i&j(Vp(Y!b$_#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!_#Hb(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(x+JY$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!^(CdvBr$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!q7`$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$i&j(Vp(Y!b'{0/l$]#t(S,2j(d$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$i&j(Vp(Y!b'|0/l$]#t(S,2j(d$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[noSemicolon,noSemicolonType,operatorToken,jsx,2,3,4,5,6,7,8,9,10,11,12,13,14,insertSemicolon,new LocalTokenGroup("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOx~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!U~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(b~~",141,339),new LocalTokenGroup("j~RQYZXz{^~^O(P~~aP!P!Qd~iO(Q~~",25,322)],topRules:{Script:[0,7],SingleExpression:[1,275],SingleClassItem:[2,276]},dialects:{jsx:0,ts:15098},dynamicPrecedences:{80:1,82:1,94:1,169:1,199:1},specialized:[{term:326,get:value=>dist_spec_identifier[value]||-1},{term:342,get:value=>spec_word[value]||-1},{term:95,get:value=>spec_LessThan[value]||-1}],tokenPrec:15124}),snippets=[snippetCompletion("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),snippetCompletion("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),snippetCompletion("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),snippetCompletion("do {\n\t${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),snippetCompletion("while (${}) {\n\t${}\n}",{label:"while",detail:"loop",type:"keyword"}),snippetCompletion("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),snippetCompletion("if (${}) {\n\t${}\n}",{label:"if",detail:"block",type:"keyword"}),snippetCompletion("if (${}) {\n\t${}\n} else {\n\t${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),snippetCompletion("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),snippetCompletion('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),snippetCompletion('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],typescriptSnippets=snippets.concat([snippetCompletion("interface ${name} {\n\t${}\n}",{label:"interface",detail:"definition",type:"keyword"}),snippetCompletion("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),snippetCompletion("enum ${name} {\n\t${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),cache=new NodeWeakMap,ScopeNodes=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function defID(type){return(node,def)=>{let id=node.node.getChild("VariableDefinition");return id&&def(id,type),!0}}const functionContext=["FunctionDeclaration"],gatherCompletions={FunctionDeclaration:defID("function"),ClassDeclaration:defID("class"),ClassExpression:()=>!0,EnumDeclaration:defID("constant"),TypeAliasDeclaration:defID("type"),NamespaceDeclaration:defID("namespace"),VariableDefinition(node,def){node.matchContext(functionContext)||def(node,"variable")},TypeDefinition(node,def){def(node,"type")},__proto__:null};function getScope(doc,node){let cached=cache.get(node);if(cached)return cached;let completions=[],top=!0;function def(node,type){let name=doc.sliceString(node.from,node.to);completions.push({label:name,type})}return node.cursor(IterMode.IncludeAnonymous).iterate(node=>{if(top)top=!1;else if(node.name){let gather=gatherCompletions[node.name];if(gather&&gather(node,def)||ScopeNodes.has(node.name))return!1}else if(node.to-node.from>8192){for(let c of getScope(doc,node.node))completions.push(c);return!1}}),cache.set(node,completions),completions}const Identifier=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,dontComplete=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];function localCompletionSource(context){let inner=dist_syntaxTree(context.state).resolveInner(context.pos,-1);if(dontComplete.indexOf(inner.name)>-1)return null;let isWord="VariableName"==inner.name||inner.to-inner.from<20&&Identifier.test(context.state.sliceDoc(inner.from,inner.to));if(!isWord&&!context.explicit)return null;let options=[];for(let pos=inner;pos;pos=pos.parent)ScopeNodes.has(pos.name)&&(options=options.concat(getScope(context.state.doc,pos)));return{options,from:isWord?inner.from:context.pos,validFor:Identifier}}const javascriptLanguage=LRLanguage.define({name:"javascript",parser:javascript_dist_parser.configure({props:[indentNodeProp.add({IfStatement:continuedIndent({except:/^\s*({|else\b)/}),TryStatement:continuedIndent({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:context=>context.baseIndent,SwitchBody:context=>{let after=context.textAfter,closed=/^\s*\}/.test(after),isCase=/^\s*(case|default)\b/.test(after);return context.baseIndent+(closed?0:isCase?1:2)*context.unit},Block:delimitedIndent({closing:"}"}),ArrowFunction:cx=>cx.baseIndent+cx.unit,"TemplateString BlockComment":()=>null,"Statement Property":continuedIndent({except:/^\s*{/}),JSXElement(context){let closed=/^\s*<\//.test(context.textAfter);return context.lineIndent(context.node.from)+(closed?0:context.unit)},JSXEscape(context){let closed=/\s*\}/.test(context.textAfter);return context.lineIndent(context.node.from)+(closed?0:context.unit)},"JSXOpenTag JSXSelfClosingTag":context=>context.column(context.node.from)+context.unit}),foldNodeProp.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":foldInside,BlockComment:tree=>({from:tree.from+2,to:tree.to-2})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),jsxSublanguage={test:node=>/^JSX/.test(node.name),facet:defineLanguageFacet({commentTokens:{block:{open:"{/*",close:"*/}"}}})},typescriptLanguage=javascriptLanguage.configure({dialect:"ts"},"typescript"),jsxLanguage=javascriptLanguage.configure({dialect:"jsx",props:[sublanguageProp.add(n=>n.isTop?[jsxSublanguage]:void 0)]}),tsxLanguage=javascriptLanguage.configure({dialect:"jsx ts",props:[sublanguageProp.add(n=>n.isTop?[jsxSublanguage]:void 0)]},"typescript");let kwCompletion=name=>({label:name,type:"keyword"});const keywords="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(kwCompletion),typescriptKeywords=keywords.concat(["declare","implements","private","protected","public"].map(kwCompletion));function javascript(config={}){let lang=config.jsx?config.typescript?tsxLanguage:jsxLanguage:config.typescript?typescriptLanguage:javascriptLanguage,completions=config.typescript?typescriptSnippets.concat(typescriptKeywords):snippets.concat(keywords);return new LanguageSupport(lang,[javascriptLanguage.data.of({autocomplete:(nodes=dontComplete,source=completeFromList(completions),context=>{for(let pos=dist_syntaxTree(context.state).resolveInner(context.pos,-1);pos;pos=pos.parent){if(nodes.indexOf(pos.name)>-1)return null;if(pos.type.isTop)break}return source(context)})}),javascriptLanguage.data.of({autocomplete:localCompletionSource}),config.jsx?autoCloseTags:[]]);var nodes,source}function elementName(doc,tree,max=doc.length){for(let ch=null==tree?void 0:tree.firstChild;ch;ch=ch.nextSibling)if("JSXIdentifier"==ch.name||"JSXBuiltin"==ch.name||"JSXNamespacedName"==ch.name||"JSXMemberExpression"==ch.name)return doc.sliceString(ch.from,Math.min(ch.to,max));return""}const dist_android="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),autoCloseTags=EditorView.inputHandler.of((view,from,to,text,defaultInsert)=>{if((dist_android?view.composing:view.compositionStarted)||view.state.readOnly||from!=to||">"!=text&&"/"!=text||!javascriptLanguage.isActiveAt(view.state,from,-1))return!1;let base=defaultInsert(),{state}=base,closeTags=state.changeByRange(range=>{var _a;let name,{head}=range,around=dist_syntaxTree(state).resolveInner(head-1,-1);if("JSXStartTag"==around.name&&(around=around.parent),state.doc.sliceString(head-1,head)!=text||"JSXAttributeValue"==around.name&&around.to>head);else{if(">"==text&&"JSXFragmentTag"==around.name)return{range,changes:{from:head,insert:"</>"}};if("/"==text&&"JSXStartCloseTag"==around.name){let empty=around.parent,base=empty.parent;if(base&&empty.from==head-2&&((name=elementName(state.doc,base.firstChild,head))||"JSXFragmentTag"==(null===(_a=base.firstChild)||void 0===_a?void 0:_a.name))){let insert=`${name}>`;return{range:dist_EditorSelection.cursor(head+insert.length,-1),changes:{from:head,insert}}}}else if(">"==text){let openTag=function findOpenTag(node){for(;;){if("JSXOpenTag"==node.name||"JSXSelfClosingTag"==node.name||"JSXFragmentTag"==node.name)return node;if("JSXEscape"==node.name||!node.parent)return null;node=node.parent}}(around);if(openTag&&"JSXOpenTag"==openTag.name&&!/^\/?>|^<\//.test(state.doc.sliceString(head,head+2))&&(name=elementName(state.doc,openTag,head)))return{range,changes:{from:head,insert:`</${name}>`}}}}return{range}});return!closeTags.changes.empty&&(view.dispatch([base,state.update(closeTags,{userEvent:"input.complete",scrollIntoView:!0})]),!0)});const Targets=["_blank","_self","_top","_parent"],Charsets=["ascii","utf-8","utf-16","latin1","latin1"],Methods=["get","post","put","delete"],Encs=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],Bool=["true","false"],dist_S={},Tags={a:{attrs:{href:null,ping:null,type:null,media:null,target:Targets,hreflang:null}},abbr:dist_S,address:dist_S,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:dist_S,aside:dist_S,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:dist_S,base:{attrs:{href:null,target:Targets}},bdi:dist_S,bdo:dist_S,blockquote:{attrs:{cite:null}},body:dist_S,br:dist_S,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:Encs,formmethod:Methods,formnovalidate:["novalidate"],formtarget:Targets,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:dist_S,center:dist_S,cite:dist_S,code:dist_S,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:dist_S,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:dist_S,div:dist_S,dl:dist_S,dt:dist_S,em:dist_S,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:dist_S,figure:dist_S,footer:dist_S,form:{attrs:{action:null,name:null,"accept-charset":Charsets,autocomplete:["on","off"],enctype:Encs,method:Methods,novalidate:["novalidate"],target:Targets}},h1:dist_S,h2:dist_S,h3:dist_S,h4:dist_S,h5:dist_S,h6:dist_S,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:dist_S,hgroup:dist_S,hr:dist_S,html:{attrs:{manifest:null}},i:dist_S,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:Encs,formmethod:Methods,formnovalidate:["novalidate"],formtarget:Targets,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:dist_S,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:dist_S,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:dist_S,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:Charsets,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:dist_S,noscript:dist_S,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:dist_S,param:{attrs:{name:null,value:null}},pre:dist_S,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:dist_S,rt:dist_S,ruby:dist_S,samp:dist_S,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:Charsets}},section:dist_S,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:dist_S,source:{attrs:{src:null,type:null,media:null}},span:dist_S,strong:dist_S,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:dist_S,summary:dist_S,sup:dist_S,table:dist_S,tbody:dist_S,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:dist_S,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:dist_S,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:dist_S,time:{attrs:{datetime:null}},title:dist_S,tr:dist_S,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},var:dist_S,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:dist_S},GlobalAttrs={accesskey:null,class:null,contenteditable:Bool,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:Bool,autocorrect:Bool,autocapitalize:Bool,style:null,tabindex:null,title:null,translate:["yes","no"],rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":Bool,"aria-autocomplete":["inline","list","both","none"],"aria-busy":Bool,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":Bool,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":Bool,"aria-hidden":Bool,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":Bool,"aria-multiselectable":Bool,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":Bool,"aria-relevant":null,"aria-required":Bool,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},eventAttributes="beforeunload copy cut dragstart dragover dragleave dragenter dragend drag paste focus blur change click load mousedown mouseenter mouseleave mouseup keydown keyup resize scroll unload".split(" ").map(n=>"on"+n);for(let a of eventAttributes)GlobalAttrs[a]=null;class Schema{constructor(extraTags,extraAttrs){this.tags=Object.assign(Object.assign({},Tags),extraTags),this.globalAttrs=Object.assign(Object.assign({},GlobalAttrs),extraAttrs),this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}}function dist_elementName(doc,tree,max=doc.length){if(!tree)return"";let tag=tree.firstChild,name=tag&&tag.getChild("TagName");return name?doc.sliceString(name.from,Math.min(name.to,max)):""}function findParentElement(tree,skip=!1){for(;tree;tree=tree.parent)if("Element"==tree.name){if(!skip)return tree;skip=!1}return null}function allowedChildren(doc,tree,schema){let parentInfo=schema.tags[dist_elementName(doc,findParentElement(tree))];return(null==parentInfo?void 0:parentInfo.children)||schema.allTags}function openTags(doc,tree){let open=[];for(let parent=findParentElement(tree);parent&&!parent.type.isTop;parent=findParentElement(parent.parent)){let tagName=dist_elementName(doc,parent);if(tagName&&"CloseTag"==parent.lastChild.name)break;tagName&&open.indexOf(tagName)<0&&("EndTag"==tree.name||tree.from>=parent.firstChild.to)&&open.push(tagName)}return open}Schema.default=new Schema;const lang_html_dist_identifier=/^[:\-\.\w\u00b7-\uffff]*$/;function completeTag(state,schema,tree,from,to){let end=/\s*>/.test(state.sliceDoc(to,to+5))?"":">",parent=findParentElement(tree,!0);return{from,to,options:allowedChildren(state.doc,parent,schema).map(tagName=>({label:tagName,type:"type"})).concat(openTags(state.doc,tree).map((tag,i)=>({label:"/"+tag,apply:"/"+tag+end,type:"type",boost:99-i}))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function completeCloseTag(state,tree,from,to){let end=/\s*>/.test(state.sliceDoc(to,to+5))?"":">";return{from,to,options:openTags(state.doc,tree).map((tag,i)=>({label:tag,apply:tag+end,type:"type",boost:99-i})),validFor:lang_html_dist_identifier}}function htmlCompletionFor(schema,context){let{state,pos}=context,tree=dist_syntaxTree(state).resolveInner(pos,-1),around=tree.resolve(pos);for(let before,scan=pos;around==tree&&(before=tree.childBefore(scan));){let last=before.lastChild;if(!last||!last.type.isError||last.from<last.to)break;around=tree=before,scan=last.from}return"TagName"==tree.name?tree.parent&&/CloseTag$/.test(tree.parent.name)?completeCloseTag(state,tree,tree.from,pos):completeTag(state,schema,tree,tree.from,pos):"StartTag"==tree.name?completeTag(state,schema,tree,pos,pos):"StartCloseTag"==tree.name||"IncompleteCloseTag"==tree.name?completeCloseTag(state,tree,pos,pos):"OpenTag"==tree.name||"SelfClosingTag"==tree.name||"AttributeName"==tree.name?function completeAttrName(state,schema,tree,from,to){let elt=findParentElement(tree),info=elt?schema.tags[dist_elementName(state.doc,elt)]:null,localAttrs=info&&info.attrs?Object.keys(info.attrs):[];return{from,to,options:(info&&!1===info.globalAttrs?localAttrs:localAttrs.length?localAttrs.concat(schema.globalAttrNames):schema.globalAttrNames).map(attrName=>({label:attrName,type:"property"})),validFor:lang_html_dist_identifier}}(state,schema,tree,"AttributeName"==tree.name?tree.from:pos,pos):"Is"==tree.name||"AttributeValue"==tree.name||"UnquotedAttributeValue"==tree.name?function completeAttrValue(state,schema,tree,from,to){var _a;let token,nameNode=null===(_a=tree.parent)||void 0===_a?void 0:_a.getChild("AttributeName"),options=[];if(nameNode){let attrName=state.sliceDoc(nameNode.from,nameNode.to),attrs=schema.globalAttrs[attrName];if(!attrs){let elt=findParentElement(tree),info=elt?schema.tags[dist_elementName(state.doc,elt)]:null;attrs=(null==info?void 0:info.attrs)&&info.attrs[attrName]}if(attrs){let base=state.sliceDoc(from,to).toLowerCase(),quoteStart='"',quoteEnd='"';/^['"]/.test(base)?(token='"'==base[0]?/^[^"]*$/:/^[^']*$/,quoteStart="",quoteEnd=state.sliceDoc(to,to+1)==base[0]?"":base[0],base=base.slice(1),from++):token=/^[^\s<>='"]*$/;for(let value of attrs)options.push({label:value,apply:quoteStart+value+quoteEnd,type:"constant"})}}return{from,to,options,validFor:token}}(state,schema,tree,"Is"==tree.name?pos:tree.from,pos):!context.explicit||"Element"!=around.name&&"Text"!=around.name&&"Document"!=around.name?null:function completeStartTag(state,schema,tree,pos){let options=[],level=0;for(let tagName of allowedChildren(state.doc,tree,schema))options.push({label:"<"+tagName,type:"type"});for(let open of openTags(state.doc,tree))options.push({label:"</"+open+">",type:"type",boost:99-level++});return{from:pos,to:pos,options,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}(state,schema,tree,pos)}function htmlCompletionSourceWith(config){let{extraTags,extraGlobalAttributes:extraAttrs}=config,schema=extraAttrs||extraTags?new Schema(extraTags,extraAttrs):Schema.default;return context=>htmlCompletionFor(schema,context)}const jsonParser=javascriptLanguage.parser.configure({top:"SingleExpression"}),defaultNesting=[{tag:"script",attrs:attrs=>"text/typescript"==attrs.type||"ts"==attrs.lang,parser:typescriptLanguage.parser},{tag:"script",attrs:attrs=>"text/babel"==attrs.type||"text/jsx"==attrs.type,parser:jsxLanguage.parser},{tag:"script",attrs:attrs=>"text/typescript-jsx"==attrs.type,parser:tsxLanguage.parser},{tag:"script",attrs:attrs=>/^(importmap|speculationrules|application\/(.+\+)?json)$/i.test(attrs.type),parser:jsonParser},{tag:"script",attrs:attrs=>!attrs.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(attrs.type),parser:javascriptLanguage.parser},{tag:"style",attrs:attrs=>(!attrs.lang||"css"==attrs.lang)&&(!attrs.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(attrs.type)),parser:cssLanguage.parser}],defaultAttrs=[{name:"style",parser:cssLanguage.parser.configure({top:"Styles"})}].concat(eventAttributes.map(name=>({name,parser:javascriptLanguage.parser}))),htmlPlain=LRLanguage.define({name:"html",parser:parser.configure({props:[indentNodeProp.add({Element(context){let after=/^(\s*)(<\/)?/.exec(context.textAfter);return context.node.to<=context.pos+after[0].length?context.continue():context.lineIndent(context.node.from)+(after[2]?0:context.unit)},"OpenTag CloseTag SelfClosingTag":context=>context.column(context.node.from)+context.unit,Document(context){if(context.pos+/\s*/.exec(context.textAfter)[0].length<context.node.to)return context.continue();let close,endElt=null;for(let cur=context.node;;){let last=cur.lastChild;if(!last||"Element"!=last.name||last.to!=cur.to)break;endElt=cur=last}return endElt&&(!(close=endElt.lastChild)||"CloseTag"!=close.name&&"SelfClosingTag"!=close.name)?context.lineIndent(endElt.from)+context.unit:null}}),foldNodeProp.add({Element(node){let first=node.firstChild,last=node.lastChild;return first&&"OpenTag"==first.name?{from:first.to,to:"CloseTag"==last.name?last.from:node.to}:null}}),bracketMatchingHandle.add({"OpenTag CloseTag":node=>node.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"\x3c!--",close:"--\x3e"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-._"}}),htmlLanguage=htmlPlain.configure({wrap:configureNesting(defaultNesting,defaultAttrs)});function html(config={}){let wrap,dialect="";!1===config.matchClosingTags&&(dialect="noMatch"),!0===config.selfClosingTags&&(dialect=(dialect?dialect+" ":"")+"selfClosing"),(config.nestedLanguages&&config.nestedLanguages.length||config.nestedAttributes&&config.nestedAttributes.length)&&(wrap=configureNesting((config.nestedLanguages||[]).concat(defaultNesting),(config.nestedAttributes||[]).concat(defaultAttrs)));let lang=wrap?htmlPlain.configure({wrap,dialect}):dialect?htmlLanguage.configure({dialect}):htmlLanguage;return new LanguageSupport(lang,[htmlLanguage.data.of({autocomplete:htmlCompletionSourceWith(config)}),!1!==config.autoCloseTags?dist_autoCloseTags:[],javascript().support,css().support])}const dist_selfClosers=new Set("area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" ")),dist_autoCloseTags=EditorView.inputHandler.of((view,from,to,text,insertTransaction)=>{if(view.composing||view.state.readOnly||from!=to||">"!=text&&"/"!=text||!htmlLanguage.isActiveAt(view.state,from,-1))return!1;let base=insertTransaction(),{state}=base,closeTags=state.changeByRange(range=>{var _a,_b,_c;let name,didType=state.doc.sliceString(range.from-1,range.to)==text,{head}=range,after=dist_syntaxTree(state).resolveInner(head,-1);if(didType&&">"==text&&"EndTag"==after.name){let tag=after.parent;if("CloseTag"!=(null===(_b=null===(_a=tag.parent)||void 0===_a?void 0:_a.lastChild)||void 0===_b?void 0:_b.name)&&(name=dist_elementName(state.doc,tag.parent,head))&&!dist_selfClosers.has(name)){return{range,changes:{from:head,to:head+(">"===state.doc.sliceString(head,head+1)?1:0),insert:`</${name}>`}}}}else if(didType&&"/"==text&&"IncompleteCloseTag"==after.name){let tag=after.parent;if(after.from==head-2&&"CloseTag"!=(null===(_c=tag.lastChild)||void 0===_c?void 0:_c.name)&&(name=dist_elementName(state.doc,tag,head))&&!dist_selfClosers.has(name)){let to=head+(">"===state.doc.sliceString(head,head+1)?1:0),insert=`${name}>`;return{range:dist_EditorSelection.cursor(head+insert.length,-1),changes:{from:head,to,insert}}}}return{range}});return!closeTags.changes.empty&&(view.dispatch([base,state.update(closeTags,{userEvent:"input.complete",scrollIntoView:!0})]),!0)});class PathAnimator extends Helper{directDragMode;htmlTong;cssTong;htmlView;cssView;constructor(){super(),this.directDragMode=!1,this.htmlTong=this.createAbstract({mother:document.body,style:{display:"none"}}),this.cssTong=this.createAbstract({mother:document.body,style:{display:"none"}}),this.htmlView=null,this.cssView=null}saveCurrentState=async(singleXhtmlMode=!1)=>{const instance=this,back=this.back,collection=this.epubXhtmlCollection,{colorChip,svgMaker:localSvgMaker,binaryPath}=PathAnimator,{withOut,percent,markdownBlocks,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();try{const currentHtmlText=instance.htmlView.state.doc.toString(),currentCssText=instance.cssView.state.doc.toString();if(singleXhtmlMode){const currentData=instance.currentXhtml;return await back.frontUpdate(collection,[{_id:currentData._id},instance.createEpubXhtmlData(currentHtmlText,currentCssText)]),{xhtml:currentHtmlText,css:currentCssText}}{if(""===instance.currentCssId||""===instance.currentXhtmlId)throw new Error("invalid id status");const xhtmlId=/\(/gi.test(instance.currentXhtmlId)?instance.valueParser("decode",instance.currentXhtmlId).id:instance.currentXhtmlId,cssId=/\(/gi.test(instance.currentCssId)?instance.valueParser("decode",instance.currentCssId).id:instance.currentCssId,readResultXhtml=await back.frontRead(instance.collectionString,{_id:xhtmlId}),readResultCss=await back.frontRead(instance.collectionString,{_id:cssId});if(readResultXhtml.length>0&&readResultCss.length>0){const xhtmlCurrentStatus=readResultXhtml[0],cssCurrentStatus=readResultCss[0];xhtmlCurrentStatus.data=currentHtmlText,cssCurrentStatus.data=currentCssText,await back.frontUpdate(instance.collectionString,[{_id:xhtmlCurrentStatus._id},xhtmlCurrentStatus]),await back.frontUpdate(instance.collectionString,[{_id:cssCurrentStatus._id},cssCurrentStatus])}return{xhtml:currentHtmlText,css:currentCssText}}}catch(e){throw console.log(e),new Error(e.message)}};saveDebounce=(deleteMode=!1)=>{const instance=this;null!==instance.saveTimeout&&(window.clearTimeout(instance.saveTimeout),instance.saveTimeout=null),deleteMode||(instance.saveTimeout=window.setTimeout(()=>{instance.saveCurrentState(!1).then(()=>{window.clearTimeout(instance.saveTimeout),instance.saveTimeout=null}).catch(e=>{window.clearTimeout(instance.saveTimeout),instance.saveTimeout=null,console.log(e)})},700))};loadXhtmlCssSet=async(xhtmlId,cssId)=>{const instance=this,back=this.back,{colorChip,svgMaker:localSvgMaker,binaryPath}=PathAnimator,{withOut,percent,promptPopup,markdownBlocks,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();try{if(""===instance.currentCssId||""===instance.currentXhtmlId)throw new Error("invalid id status");instance.saveDebounce(!0);try{await instance.saveCurrentState()}catch{}if(null===instance.currentMap)throw new Error("invalid current map status");await sleep(10);const cssEditorView=instance.cssView,htmlEditorView=instance.htmlView;let chapterRow,cssRow,initialContent,cssContent,newState,newCssState;/\(/gi.test(xhtmlId)?[chapterRow]=await back.frontRead(instance.collectionString,{_id:this.valueParser("decode",xhtmlId).id}):[chapterRow]=await back.frontRead(instance.collectionString,{_id:xhtmlId}),/\(/gi.test(cssId)?[cssRow]=await back.frontRead(instance.collectionString,{_id:this.valueParser("decode",cssId).id}):[cssRow]=await back.frontRead(instance.collectionString,{_id:cssId}),initialContent=chapterRow.data,cssContent=cssRow.data,this.currentXhtmlId=xhtmlId,this.currentCssId=cssId,newCssState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:cssContent}}),cssEditorView.dispatch(newCssState),newState=htmlEditorView.state.update({changes:{from:0,to:htmlEditorView.state.doc.length,insert:initialContent}}),htmlEditorView.dispatch(newState),await sleep(10),instance.currentXhtmlId=xhtmlId,instance.currentCssId=cssId,await sleep(10),instance.saveDebounce(!0),await instance.saveCurrentState()}catch(e){console.log(e)}};editorCss=(cssValue,cssProperty="unknown")=>{const{colorChip,svgMaker:localSvgMaker,binaryPath}=PathAnimator,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(),styleTag=document.querySelector("style"),updateCssString=`\n      body,div {\n        ${cssProperty}: ${String("number"==typeof cssValue?String(cssValue)+ea:cssValue)} !important;\n      }\n    `;return"unknown"!==cssProperty&&styleTag.insertAdjacentHTML("beforeend",updateCssString),"number"==typeof cssValue?`${String(cssValue)}${ea} !important`:`${cssValue} !important`};dispatchSelection=(changes,fromValue,toValue,view)=>{const{setQueue}=AbstractNode;0===changes.length?view.dispatch({selection:dist_EditorSelection.range(fromValue,toValue),scrollIntoView:!0}):view.dispatch({changes,selection:dist_EditorSelection.range(fromValue,toValue),scrollIntoView:!0}),view.focus()};singleXhtmlFileUpload=async()=>{const back=this.back,collection=this.epubXhtmlCollection,{colorChip,svgMaker:localSvgMaker,binaryPath}=PathAnimator,{withOut,percent,promptPopup,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(),defaultCss=["h1 {","  display: block;",'  font-family: "pretendard";',"  font-weight: 800;","  font-size: 1.5rem;","  line-height: 1.88;","  text-indent: 0;","  word-spacing: -0.08rem;","}","","p {","  display: block;",'  font-family: "batang";',"  font-weight: 400;","  font-size: 1rem;","  line-height: 1.88;","  word-spacing: -0.08rem;","  text-align: justify;","}","","span {","  display: inline;","  font-size: inherit;","  font-family: inherit;","}"].join("\n");try{let initialContent,cssContent,promptResult,newModel,createResult,thisTitle,promptMiddleResult;for(promptResult=null;null===promptResult;)promptResult=await promptPopup("Xhtml 파일을 올려 주세요!","file",1,"mint",!1,!0,"/streamXhtmlConverter",!0);if(null===promptResult)throw new Error("invalid result");try{promptMiddleResult=JSON.parse(promptResult)}catch{throw new Error("invalid result 2")}return initialContent=promptMiddleResult.data,cssContent=defaultCss,thisTitle=promptMiddleResult.title,"string"!=typeof thisTitle&&(thisTitle="open_"+dateToString(new Date).replace(/[^0-9]/gi,"")),newModel={_id:"",date:new Date,key:this.epubXhtmlKey,data:{xhtml:initialContent,css:cssContent,title:thisTitle}},createResult=await back.frontCreate(collection,newModel),newModel._id=createResult._id,this.currentXhtml=newModel,await sleep(10),{xhtml:initialContent,css:cssContent}}catch(e){throw console.log(e),new Error(e.message)}};injectionImages=()=>{const instance=this,{colorChip,svgMaker:localSvgMaker,binaryPath}=(this.back,this.epubXhtmlCollection,PathAnimator),{withOut,percent,promptPopup,formPopup,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();return async e=>{e.currentTarget;e.preventDefault();return await instance.currentImages(async function(fileNameArr,widthArr,heightArr,urlArr,indexArr,columnArr,targetArr){return(async(fileNames,widthArr,heightArr)=>{await sleep(500);const htmlEditorView=instance.htmlView,htmlCurrentSelection=htmlEditorView.state.selection,cssEditorView=instance.cssView,currentCssText=cssEditorView.state.doc.toString(),currentHtmlTextArr=htmlEditorView.state.doc.toString().split("\n"),bodyIndex=currentHtmlTextArr.findIndex(s=>/<body\s*[^>]*>/gi.test(s)),bodyEndIndex=currentHtmlTextArr.findIndex(s=>/<\/body>/gi.test(s)),targetSelectionEndIndex=-1===bodyEndIndex?0:currentHtmlTextArr.slice(0,bodyEndIndex+1).join("\n").length-7,imageDivClassName=instance.imageResponseDivClassName;let newState,newCssState,imgHtml,startIndent,thisImageGroup,index,targetSelectionIndex=-1===bodyIndex?0:currentHtmlTextArr.slice(0,bodyIndex+1).join("\n").length+1;if(0!==fileNames.length){thisImageGroup=[];for(let i=0;i<fileNames.length;i++)thisImageGroup.push({src:fileNames[i],ratio:0===widthArr[i]||Number.isNaN(widthArr[i])?-1:heightArr[i]/widthArr[i]});if(thisImageGroup.sort((a,b)=>b.ratio-a.ratio),startIndent=currentHtmlTextArr[bodyIndex].split("<body")[0]+"  ",1===thisImageGroup.length)imgHtml=`\n          <img\n            class="init_img"\n            src="${String(instance.isInChapter?"../..":"..")}/Images/${thisImageGroup[0].src}"\n            alt="이미지 설명"\n          />`,imgHtml="\n"+startIndent+imgHtml.split("\n").map(s=>s.trim()).filter(s=>""!==s).join(" ")+"\n";else if(2===thisImageGroup.length){if(imgHtml=`\n${startIndent}<div class="${imageDivClassName}">`,index=0,"media"===instance.imageSelectMode)for(let i=0;i<instance.imageMediaClassNames.length;i++)for(let j=0;j<instance.imageDarkClassNames.length;j++)imgHtml+=`\n${startIndent}  <img class="${instance.imageMediaClassNames[i]+"_"+instance.imageDarkClassNames[j]} ${instance.imageResponsive}" src="${String(instance.isInChapter?"../..":"..")}/Images/${thisImageGroup[2===i?1:0].src}" alt="이미지 설명" />`;else if("dark"===instance.imageSelectMode)for(let i=0;i<instance.imageMediaClassNames.length;i++)for(let j=0;j<instance.imageDarkClassNames.length;j++)imgHtml+=`\n${startIndent}  <img class="${instance.imageMediaClassNames[i]+"_"+instance.imageDarkClassNames[j]} ${instance.imageResponsive}" src="${String(instance.isInChapter?"../..":"..")}/Images/${thisImageGroup[j].src}" alt="이미지 설명" />`;else imgHtml=`\n            <img\n              class="init_img"\n              src="${String(instance.isInChapter?"../..":"..")}/Images/${thisImageGroup[0].src}"\n              alt="이미지 설명"\n            />`,imgHtml="\n"+startIndent+imgHtml.split("\n").map(s=>s.trim()).filter(s=>""!==s).join(" ")+"\n";imgHtml+=`\n${startIndent}</div>`}else{if(3!==thisImageGroup.length)return void instance.blackAlert("이미지 미디어 쿼리는 최대 3개까지 가능합니다!").catch(e=>console.log(e));if("media"!==instance.imageSelectMode)return void instance.blackAlert("이미지 쿼리는 최대 2개까지 가능합니다!").catch(e=>console.log(e));imgHtml=`\n${startIndent}<div class="${imageDivClassName}">`,index=0;for(let i=0;i<instance.imageMediaClassNames.length;i++)for(let j=0;j<instance.imageDarkClassNames.length;j++)imgHtml+=`\n${startIndent}  <img class="${instance.imageMediaClassNames[i]+"_"+instance.imageDarkClassNames[j]} ${instance.imageResponsive}" src="${String(instance.isInChapter?"../..":"..")}/Images/${thisImageGroup[i].src}" alt="이미지 설명" />`;imgHtml+=`\n${startIndent}</div>`}htmlCurrentSelection.ranges.length>0&&htmlCurrentSelection.ranges[0].from===htmlCurrentSelection.ranges[0].to&&targetSelectionIndex<htmlCurrentSelection.ranges[0].from&&htmlCurrentSelection.ranges[0].from<targetSelectionEndIndex&&(targetSelectionIndex=htmlCurrentSelection.ranges[0].from),thisImageGroup.length>1&&(new RegExp("."+instance.imageResponseDivClassName,"g").test(currentCssText)||(newCssState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:currentCssText+"\n\n"+instance.responsiveMediaCss.meida.join("\n")+"\n\n"+instance.responsiveMediaCss.dark.join("\n")}}),cssEditorView.dispatch(newCssState))),instance.dispatchSelection([],targetSelectionIndex,targetSelectionIndex,htmlEditorView),newState=htmlEditorView.state.update({changes:{from:targetSelectionIndex,to:targetSelectionIndex,insert:imgHtml}}),htmlEditorView.dispatch(newState),instance.dispatchSelection([],targetSelectionIndex+1,targetSelectionIndex+imgHtml.length-1,htmlEditorView),instance.saveDebounce()}})(fileNameArr,widthArr,heightArr).catch(e=>console.log(e)),!0}),""}};singleXhtmlLoad=async id=>{const instance=this,back=this.back,collection=this.epubXhtmlCollection,{colorChip,svgMaker:localSvgMaker,binaryPath}=PathAnimator,{withOut,percent,markdownBlocks,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();try{const result=await back.frontRead(collection,{_id:id}),cssEditorView=instance.cssView,htmlEditorView=instance.htmlView;let newState,newCssState;if(0===result.length)throw new Error("invalid result");return newCssState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:""}}),cssEditorView.dispatch(newCssState),newState=htmlEditorView.state.update({changes:{from:0,to:htmlEditorView.state.doc.length,insert:""}}),htmlEditorView.dispatch(newState),this.currentXhtml=result[0],await sleep(10),newCssState=cssEditorView.state.update({changes:{from:0,to:0,insert:instance.currentXhtml?.data.css?instance.currentXhtml?.data.css:""}}),cssEditorView.dispatch(newCssState),newState=htmlEditorView.state.update({changes:{from:0,to:0,insert:instance.currentXhtml?.data.xhtml?instance.currentXhtml?.data.xhtml:""}}),htmlEditorView.dispatch(newState),instance.saveDebounce(),this.currentXhtml}catch(e){throw console.log(e),new Error(e.message)}};cssStatusPopup=cssArr=>{const instance=this,{colorChip,svgMaker:localSvgMaker,binaryPath}=(this.back,PathAnimator),{withOut,percent,promptPopup,contextmenuPopup,setDomColor,markdownBlocks,linkToString,hangulToEnglish,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(),title=4===cssArr.length?["인라인 (1순위)","아이디 (2순위)","클래스 (3순위)","태그 (4순위)"]:["General css","Local css"],classTitle=["This class","Children class"];return new Promise(async(resolve,reject)=>{try{let cancelBack,whiteBase,contentsPaddingBottom,whiteBaseRadius,tongMargin,tongMarginTop,boxWidth,whiteCloseEvent,topOuterMargin,cssBase,gap,index,cssBlockHeight,titleSize,titleWeight,titleMarginBottom,innerCssBoxBorderRadius,visualPaddingBottom,editorInnerMargin,fourView,supportBaseWidth,supportButtonHeight,supportButtonSize,supportButtonWeight,supportButtonBorderRadius,forceBoxWidthBoo,thisGeneralLocalStatus;if(contentsPaddingBottom=mediaNumber(140,130,120,100,16),whiteBaseRadius=mediaNumber(15,15,15,15,3),tongMargin=mediaNumber(30,28,26,22,5),tongMarginTop=mediaNumber(26,24,20,18,5),boxWidth=mediaNumber(1400,1060,840,720,80),gap=mediaNumber(8,8,7,6,1.5),topOuterMargin=mediaNumber(70,70,64,60,16),window.innerHeight-2*topOuterMargin<900&&(topOuterMargin=mediaNumber(45,45,40,36,12),tongMargin=mediaNumber(24,24,22,20,5),tongMarginTop=mediaNumber(20,20,18,16,5),gap=mediaNumber(7,7,6,5,1.5)),cssBlockHeight=(window.innerHeight-2*topOuterMargin-(tongMargin+tongMarginTop)-2*gap)/2,2===cssArr.length&&(cssBlockHeight=(window.innerHeight-2*topOuterMargin-(tongMargin+tongMarginTop))/1),titleSize=mediaNumber(16,16,15,14,3),titleWeight=mediaNumber(800,800,800,800,800),titleMarginBottom=mediaNumber(5,5,4.5,4,1),innerCssBoxBorderRadius=mediaNumber(8,8,7,7,2),visualPaddingBottom=mediaNumber(200,180,160,140,40),editorInnerMargin=mediaNumber(16,16,14,12,1),supportBaseWidth=mediaNumber(132,132,128,128,11),supportButtonHeight=mediaNumber(32,32,31,31,2),supportButtonSize=mediaNumber(12,12,11,11,3),supportButtonWeight=mediaNumber(500,500,500,500,500),supportButtonBorderRadius=mediaNumber(5,5,5,4,1),boxWidth=boxWidth+2*gap+supportBaseWidth,fourView=[],forceBoxWidthBoo=!1,forceBoxWidthBoo=window.innerWidth-2*topOuterMargin>boxWidth,thisGeneralLocalStatus=!1,cssArr.length>1&&"string"==typeof cssArr[0]&&"string"==typeof cssArr[1]&&(/@font\-face/gis.test(cssArr[0])||/@keyframes/gis.test(cssArr[0])||/@font\-face/gis.test(cssArr[1])||/@keyframes/gis.test(cssArr[1]))&&(thisGeneralLocalStatus=!0),whiteCloseEvent=async e=>{const thisCssStrings=[];for(let v of fourView){const currentState=v.state;let mediaBlocks,cssBlocks,thisString,keyframeBlocks,fontFaceBlocks;thisString=(await PrettyCss.launching(currentState.doc.toString())).trim(),thisString=thisString.replace(/\/\*[\s\S]*?\*\//gis,""),cssBlocks=[],mediaBlocks=[],keyframeBlocks=[],fontFaceBlocks=[],thisString=thisString.replace(/\s*(@media[^\{]*\s*\{[^@]*?\}\s*\})/gis,(match,p1)=>(mediaBlocks.push(p1.trim()),"")),thisString=thisString.replace(/\s*(@keyframes[^\{]*\s*\{[^@]*?\}\s*\})/gis,(match,p1)=>(keyframeBlocks.push(p1.trim()),"")),thisString=thisString.replace(/\s*(@font\-face\s*\{[^\}]+\})/gis,(match,p1)=>(fontFaceBlocks.push(p1.trim()),"")),thisString.replace(/\s*([^\{]+\{[^\}]+\})/gis,(match,p1)=>(cssBlocks.unshift(p1.trim()),match)),cssBlocks=cssBlocks.map(s=>s.trim()).filter(s=>""!==s).filter(s=>!/[^\{]+\{\s*\}/gis.test(s)),cssBlocks=cssBlocks.concat(mediaBlocks),cssBlocks=keyframeBlocks.concat(cssBlocks),cssBlocks=fontFaceBlocks.concat(cssBlocks),thisCssStrings.push(cssBlocks)}removeByClass("cssSupportDescriptionPopupClassName"),setTimeout(()=>{removeByClass("cssSupportDescriptionPopupClassName")},300);const motherArr=[...document.querySelectorAll(".cssPopupClassName")];if(motherArr.length>1){const[cancel,whiteBase]=motherArr.map(d=>d);cancel.style.animation="justfadeoutsmall 0.3s ease forwards",whiteBase.style.animation="fadedown 0.3s ease forwards",setQueue(()=>{removeByClass("cssPopupClassName"),resolve(thisCssStrings)},301)}},cancelBack=createAbstract({mother:totalContents,class:["cssPopupClassName"],event:{click:whiteCloseEvent},style:{position:"fixed",top:0,left:0,width:withOut(0),height:withOut(0),opacity:0,animation:"justfadeinsmall 0.4s ease forwards",background:colorExtended.black,zIndex:110}}),whiteBase=createAbstract({mother:totalContents,class:["cssPopupClassName"],style:{position:"fixed",width:forceBoxWidthBoo?boxWidth:withOut(2*topOuterMargin,"px"),height:withOut(2*topOuterMargin,"px"),top:pixelUnit(topOuterMargin),left:forceBoxWidthBoo?withOut(50,boxWidth/2,"px"):pixelUnit(topOuterMargin),borderRadius:whiteBaseRadius,background:colorExtended.gray1,animation:"fadeuporiginal 0.5s ease forwards",zIndex:110,flexDirection:"column",overflow:"hidden"},child:{style:{display:"block",width:withOut(0),height:withOut(0)},child:{style:{display:"flex",flexDirection:"row",width:withOut(2*tongMargin),height:withOut(tongMarginTop+tongMargin),paddingLeft:tongMargin,paddingRight:tongMargin,paddingTop:tongMarginTop,paddingBottom:tongMargin}}}}).children[0],whiteBase=whiteBase.children[0],cssBase=createAbstract({mother:whiteBase,style:{display:"grid",gridTemplateColumns:"1fr 1fr",rowGap:2*gap,columnGap:gap,marginRight:2*gap,flexGrow:1,height:withOut(0)}}),4===cssArr.length){index=0;for(const thisCss of cssArr){const thisCssMother=createAbstract({mother:cssBase,attribute:{"four-index":String(index)},style:{display:"flex",height:cssBlockHeight,flexDirection:"column"},children:[{attribute:{"four-index":String(index)},style:{width:withOut(0),flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:titleMarginBottom,flexGrow:0},child:{text:title[index],style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.black}}},{attribute:{"four-index":String(index)},style:{width:withOut(2*editorInnerMargin),background:colorChip.white,borderRadius:innerCssBoxBorderRadius,flexGrow:1,overflow:"scroll",padding:editorInnerMargin},child:{attribute:{"four-index":String(index)},event:{dragenter$dragover$dragstart$dragleave:e=>{e.stopPropagation(),e.preventDefault()},drop:async event=>{event.preventDefault();const self=event.currentTarget,index=Number(self.mustAttribute("four-index")),view=instance.cssFourView[index],docString=view.state.doc.toString();let position,i0,i1,i2,targetCssStrings,totalCssString,newState,beforeString,afterString;try{position=view.posAtCoords({x:event.clientX,y:event.clientY}),null===position&&(position=docString.length-1);const lineStartPos=view.state.doc.lineAt(position).from,thisText=event.dataTransfer.getData("text/plain"),standard=thisText.split(":")[0].trim();if(beforeString=docString.slice(0,position),afterString=docString.slice(position),i0=beforeString.split("").findLastIndex(s=>"{"===s),i1=beforeString.split("").findLastIndex(s=>"}"===s),-1===i1)if(-1===i0){if(i0=docString.split("").findIndex(s=>"{"===s),-1===i0)throw new Error(thisText);if(afterString=docString.slice(i0),position=i0,i2=afterString.split("").findIndex(s=>"}"===s),-1===i2){targetCssStrings=docString.slice(i0+1),new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=docString.slice(0,i0+1)+targetCssStrings+"\n\n}";try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}else{targetCssStrings=docString.slice(i0+1,position+i2),new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=docString.slice(0,i0+1)+targetCssStrings+docString.slice(position+i2);try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}}else if(i2=afterString.split("").findIndex(s=>"}"===s),-1===i2){targetCssStrings=docString.slice(i0+1),new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=docString.slice(0,i0+1)+targetCssStrings+"\n\n}";try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}else{targetCssStrings=docString.slice(i0+1,position+i2),new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=docString.slice(0,i0+1)+targetCssStrings+docString.slice(position+i2);try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}else{if(-1===i0)throw new Error(thisText);if(i0<=i1&&(afterString=docString.slice(i0),position=i0),i2=afterString.split("").findIndex(s=>"}"===s),-1===i2){targetCssStrings=docString.slice(i0+1),new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=docString.slice(0,i0+1)+targetCssStrings+"\n\n}";try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}else{targetCssStrings=docString.slice(i0+1,position+i2),new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=docString.slice(0,i0+1)+targetCssStrings+docString.slice(position+i2);try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}}view.dispatch({selection:dist_EditorSelection.cursor(lineStartPos),scrollIntoView:!0}),view.focus()}catch(e){const thisText=e.message.trim(),standard=thisText.split(":")[0].trim();let thisSelector;thisSelector="$inline ",1===index?thisSelector="#my_id ":2===index?thisSelector=".my_class ":3===index&&(thisSelector="selector "),targetCssStrings=docString,new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=thisSelector+"{"+targetCssStrings+"\n}";try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}}},style:{width:withOut(0),background:colorChip.white,paddingBottom:visualPaddingBottom}}}]}).children[1].children[0],thisCssString=0===thisCss.length?"":(await PrettyCss.launching(thisCss.reduce((acc,curr)=>{let final,cssString,selector;final="",selector="",cssString="";for(let k in curr.css)cssString+="  "+k+": "+curr.css[k]+";\n";return selector=curr.selector,"inline"===selector&&(selector="$inline"),final=""!==curr.media.trim()?acc+"@media "+curr.media.trim()+" {"+selector+" {\n"+cssString+"}\n}\n\n":acc+selector+" {\n"+cssString+"}\n\n",final},""))).replace(new RegExp(instance.ghostMediaConditionInit+"\\s*"+instance.ghostMediaTrueConditionSmallMax,"gis"),"max-width: "+String(instance.standardPoint[0])+"rem").replace(new RegExp(instance.ghostMediaConditionInit+"\\s*"+instance.ghostMediaTrueConditionSmallMin,"gis"),"min-width: "+String(instance.standardPoint[0])+"rem").replace(new RegExp(instance.ghostMediaConditionInit+"\\s*"+instance.ghostMediaFalseConditionSmallMax,"gis"),"max-width: "+String(instance.standardPoint[0])+"rem").replace(new RegExp(instance.ghostMediaConditionInit+"\\s*"+instance.ghostMediaFalseConditionSmallMin,"gis"),"min-width: "+String(instance.standardPoint[0])+"rem").replace(new RegExp(instance.ghostMediaConditionInit+"\\s*"+instance.ghostMediaTrueConditionBigMax,"gis"),"max-width: "+String(instance.standardPoint[1])+"rem").replace(new RegExp(instance.ghostMediaConditionInit+"\\s*"+instance.ghostMediaTrueConditionBigMin,"gis"),"min-width: "+String(instance.standardPoint[1])+"rem").replace(new RegExp(instance.ghostMediaConditionInit+"\\s*"+instance.ghostMediaFalseConditionBigMax,"gis"),"max-width: "+String(instance.standardPoint[1])+"rem").replace(new RegExp(instance.ghostMediaConditionInit+"\\s*"+instance.ghostMediaFalseConditionBigMin,"gis"),"min-width: "+String(instance.standardPoint[1])+"rem").replace(/\(min\-width\:\s*8px\s*\)/gis,"(prefers-color-scheme: dark)"),contextMenuFunc=event=>{let init,parent,thisIndexString,thisIndex,attResult,safeIndex,gridTemplateColumns;if(event.preventDefault(),init=event.currentTarget,parent=null,thisIndex=-1,null!==init)if(init.getAttribute("four-index"))thisIndexString=init.getAttribute("four-index"),thisIndex=Number(thisIndexString.replace(/[^0-9\-\.]/gi,""));else if(parent=init.parentElement,null!==parent){for(attResult=init.getAttribute("four-index"),safeIndex=0;null===attResult&&!(safeIndex>100);)parent=parent.parentElement,attResult=parent.getAttribute("four-index"),safeIndex++;null!==attResult&&(thisIndexString=attResult,thisIndex=Number(thisIndexString.replace(/[^0-9\-\.]/gi,"")))}switch(thisIndex){case 0:gridTemplateColumns="1fr 1fr";break;case 1:case 2:case 3:gridTemplateColumns="1fr 1fr 1fr"}contextmenuPopup(event,(popupBase,numbersDictionay)=>new Promise((resolve,reject)=>{const titleList=[{title:"스타일 조정",buttons:0===thisIndex?[{title:"인라인 스타일 세팅",event:async e=>{resolve("inline")}},{title:"폰트 선택",event:async e=>{resolve("font_0")}},{title:"트랜스폼",event:async e=>{resolve("transform_0")}},{title:"필터",event:async e=>{resolve("filter_0")}}]:1===thisIndex?[{title:"아이디 세팅",event:async e=>{resolve("id")}},{title:"폰트 선택",event:async e=>{resolve("font_1")}},{title:"미디어 쿼리",event:async e=>{resolve("query_1")}},{title:"다크 모드",event:async e=>{resolve("dark_1")}},{title:"트랜스폼",event:async e=>{resolve("transform_1")}},{title:"필터",event:async e=>{resolve("filter_1")}}]:2===thisIndex?[{title:"클래스 세팅",event:async e=>{resolve("class_set")}},{title:"폰트 선택",event:async e=>{resolve("font_2")}},{title:"미디어 쿼리",event:async e=>{resolve("query_2")}},{title:"다크 모드",event:async e=>{resolve("dark_2")}},{title:"트랜스폼",event:async e=>{resolve("transform_2")}},{title:"필터",event:async e=>{resolve("filter_2")}}]:[{title:"폰트 선택",event:async e=>{resolve("font_3")}},{title:"미디어 쿼리",event:async e=>{resolve("query_3")}},{title:"다크 모드",event:async e=>{resolve("dark_3")}},{title:"트랜스폼",event:async e=>{resolve("transform_3")}},{title:"필터",event:async e=>{resolve("filter_3")}}]}];try{if(void 0===numbersDictionay)throw new Error("invalid context general status");let gap=numbersDictionay.gap,buttonHeight=numbersDictionay.buttonHeight,groupHeight=numbersDictionay.groupHeight,buttonSize=numbersDictionay.buttonSize,groupSize=numbersDictionay.groupSize,groupBetween=numbersDictionay.groupBetween,groupWeight=numbersDictionay.groupWeight,boldVisualTop=numbersDictionay.boldVisualTop,boldVisualRight=numbersDictionay.boldVisualRight,paddingTop=numbersDictionay.paddingTop,buttonWeight=numbersDictionay.buttonWeight;popupBase.style.paddingTop=String(paddingTop)+ea;for(let{title,buttons}of titleList)createAbstract({mother:popupBase,style:{display:"flex",justifyContent:"end",alignItems:"start",flexDirection:"column",height:groupHeight,width:withOut(0),marginBottom:groupBetween},child:{text:"<b%>%b> "+title,style:{display:"inline",position:"relative",fontSize:groupSize,fontWeight:groupWeight,color:colorChip.darkDarkBlack,fontFamily:"pretendard"},bold:{display:"inline",position:"relative",fontSize:groupSize,fontWeight:400,color:colorChip.mint,top:String(boldVisualTop)+ea,marginRight:String(boldVisualRight)+ea,fontFamily:"pretendard"}}}),createAbstract({mother:popupBase,style:{display:"grid",gridTemplateColumns,gap,width:withOut(0)},children:buttons.map((button,buttonIndex)=>({event:{click:e=>{const self=e.currentTarget,eventData={message:"next-click",timestamp:Date.now()},customEvent=new CustomEvent("nextclick",{detail:eventData,bubbles:!0,cancelable:!0});self.dispatchEvent(customEvent)},nextclick:button.event},style:{display:"inline-flex",justifyContent:"center",alignItems:"center",height:buttonHeight,borderRadius:desktop?5:1,background:instance.mintBlueColorsArr[0],cursor:"pointer",transition:"all 0.3s ease"},child:{text:button.title,event:{selectstart:e=>e.preventDefault()},style:{fontSize:buttonSize,fontWeight:buttonWeight,color:colorChip.white,fontFamily:"pretendard"}}}))})}catch(e){reject(e)}})).then(result=>{if("inline"===result){const thisView=instance.cssFourView[0];if(""===thisView.state.doc.toString().trim()){const newState=thisView.state.update({changes:{from:0,to:thisView.state.doc.length,insert:"$inline {\n\n}"}});thisView.dispatch(newState)}else{let past,thisStyleString,thisStyleArr,styleDictionary,text,newState;past=thisView.state.doc.toString().trim(),thisStyleString=past.replace(/^\s*\$\s*[^\{]*\{/gis,"").replace(/\}\s*$/gis,"").trim(),thisStyleArr=thisStyleString.split(";").map(s=>s.trim()).filter(s=>""!==s),styleDictionary={};for(let s of thisStyleArr){const[p,v]=s.split(":").map(k=>k.trim());styleDictionary[p.trim()]=v.trim()}text="$inline {",text+="\n";for(let key in styleDictionary)text+="  ",text+=key+": ",text+=styleDictionary[key]+";",text+="\n";text+="}",newState=thisView.state.update({changes:{from:0,to:thisView.state.doc.length,insert:""}}),thisView.dispatch(newState),newState=thisView.state.update({changes:{from:0,to:0,insert:text}}),thisView.dispatch(newState)}}else if("id"===result)promptPopup("아이디명을 알려주세요!").then(r=>{if(null!==r){const thisView=instance.cssFourView[1];if(""===thisView.state.doc.toString().trim()){const newState=thisView.state.update({changes:{from:0,to:thisView.state.doc.length,insert:"#"+hangulToEnglish(r,!1).replace(/\s/gi,"").replace(/[\.\#,\^\~\>]/gi,"")+" {\n\n}"}});thisView.dispatch(newState)}else{let past,thisStyleString,thisStyleArr,styleDictionary,text,newState;past=thisView.state.doc.toString().trim(),thisStyleString=past.replace(/^\s*\#\s*[^\{]*\{/gis,"").replace(/\}\s*$/gis,"").trim(),thisStyleArr=thisStyleString.split(";").map(s=>s.trim()).filter(s=>""!==s),styleDictionary={};for(let s of thisStyleArr){const[p,v]=s.split(":").map(k=>k.trim());styleDictionary[p.trim()]=v.trim()}text="#"+hangulToEnglish(r).replace(/\s/gi,"").replace(/[\.\#,\^\~\>]/gi,"")+" {",text+="\n";for(let key in styleDictionary)text+="  ",text+=key+": ",text+=styleDictionary[key]+";",text+="\n";text+="}",newState=thisView.state.update({changes:{from:0,to:thisView.state.doc.length,insert:""}}),thisView.dispatch(newState),newState=thisView.state.update({changes:{from:0,to:0,insert:text}}),thisView.dispatch(newState)}}}).catch(e=>{console.log(e)});else if("class_set"===result)promptPopup("클래스명을 알려주세요!").then(r=>{if(null!==r){const thisView=instance.cssFourView[2],newState=(thisView.state.selection.main,thisView.state.update({changes:{from:0,to:0,insert:"."+hangulToEnglish(r).replace(/\s/gi,"").replace(/[\.\#,\^\~\>]/gi,"")+" {\n\n}\n\n"}}));thisView.dispatch(newState)}}).catch(e=>{console.log(e)});else if("class_selection"===result){const generalSelectors=[];instance.shadowHistory((d,i)=>{if(0===i){const shadow=d.querySelector(".shadowDomTargetClassName").shadowRoot,styleSheetList=(shadow.querySelector("style"),shadow.styleSheets);for(let i=0;i<styleSheetList.length;i++){const sheet=styleSheetList[i];if(sheet.ownerNode instanceof HTMLStyleElement)try{if(sheet.cssRules){const cssRulesArray=Array.from(sheet.cssRules).map(rule=>rule.cssText.trim());for(let i=cssRulesArray.length-1;i>=0;i--){const rule=cssRulesArray[i];let thisSelector="",cssValue="";if(rule.replace(/^\s*([^\{]+)\s*\{([^\}]*)\}\s*$/gis,(match,p1,p2)=>(thisSelector=p1.trim().replace(/\n/g," "),cssValue=p2.trim().replace(/\n/g," "),match)),/\.[^\s\.\#\:]*$/gis.test(thisSelector.trim())&&!/____shadow__doms__tempclassname__temp/gi.test(thisSelector.trim()))if(generalSelectors.map(s=>s.title).includes(thisSelector.trim())){const index=generalSelectors.findIndex(s=>s.title===thisSelector.trim());generalSelectors[index].value=generalSelectors[index].value+";"+cssValue.trim()}else generalSelectors.push({title:thisSelector.trim(),value:cssValue.trim()})}}}catch{}}}}),promptPopup("적용을 클래스를 선택해주세요!","list",JSON.stringify(generalSelectors.map(({title,value})=>({title,value:title+" {"+value+"}"})))).then(a=>a?PrettyCss.launching(a):new Promise((resolve,reject)=>resolve(null))).then(a=>{if("string"==typeof a){const thisView=instance.cssFourView[2],newState=(thisView.state.selection.main,thisView.state.update({changes:{from:0,to:0,insert:a+"\n\n"}}));thisView.dispatch(newState)}}).catch(e=>console.log(e))}else if("tag"===result)promptPopup("태그명을 알려주세요!").then(r=>{if(null!==r){const thisView=instance.cssFourView[3],newState=thisView.state.update({changes:{from:0,to:thisView.state.doc.length,insert:"\n\n"+hangulToEnglish(r).replace(/\s/gi,"").replace(/[\.\#,\^\~\>]/gi,"")+" {\n\n}"}});thisView.dispatch(newState)}}).catch(e=>{console.log(e)});else if(/^query/gis.test(result)){const thisView=instance.cssFourView[Number(result.split("_").at(-1))],standardPoint=instance.standardPoint,selection=thisView.state.selection.main,newState=thisView.state.update({changes:{from:selection.from,to:selection.from,insert:`@media (max-width: ${String(standardPoint[0])}rem) {\n\n}\n\n@media (min-width: ${String(standardPoint[0])}rem) and (max-width: ${String(standardPoint[1])}rem) {\n\n}\n\n@media (min-width: ${String(standardPoint[1])}rem) {\n\n}\n`}});thisView.dispatch(newState)}else if(/^dark/gis.test(result)){const thisView=instance.cssFourView[Number(result.split("_").at(-1))],selection=thisView.state.selection.main,newState=thisView.state.update({changes:{from:selection.from,to:selection.from,insert:"@media (prefers-color-scheme: dark) {\n\n}\n"}});thisView.dispatch(newState)}else if(/^transform/gis.test(result)){const thisView=instance.cssFourView[Number(result.split("_").at(-1))],selection=thisView.state.selection.main;instance.transformHelperPopup().then(cssString=>{if(""!==cssString){const newState=thisView.state.update({changes:{from:selection.from,to:selection.from,insert:cssString}});thisView.dispatch(newState)}}).catch(e=>console.log(e))}else if(/^filter/gis.test(result)){const thisView=instance.cssFourView[Number(result.split("_").at(-1))],selection=thisView.state.selection.main;instance.filterHelperPopup().then(cssString=>{if(""!==cssString){const newState=thisView.state.update({changes:{from:selection.from,to:selection.from,insert:cssString}});thisView.dispatch(newState)}}).catch(e=>console.log(e))}else if(/^font/gis.test(result)){const thisView=instance.cssFourView[Number(result.split("_").at(-1))],selection=thisView.state.selection.main;instance.fontSelectionBox().then(result=>{try{const{family,weight}=JSON.parse(result),r="\n"+["font-family: "+family+";","font-weight: "+String(weight)+";"].join("\n")+"\n",newState=thisView.state.update({changes:{from:selection.from,to:selection.from,insert:r}});thisView.dispatch(newState)}catch{}}).catch(e=>console.log(e))}}).catch(e=>{console.log(e)})};thisCssMother.addEventListener("contextmenu",contextMenuFunc);const thisView=await instance.editorInit("css-mini",thisCssMother,thisCssString,{events:EditorView.domEventHandlers({contextmenu:contextMenuFunc})});instance.cssFourView[index]=thisView,fourView.push(thisView),index++}}else if(2===cssArr.length){index=0;for(const thisCss of cssArr){const thisCssMother=createAbstract({mother:cssBase,attribute:{"four-index":String(index)},style:{display:"flex",height:cssBlockHeight,flexDirection:"column"},children:[{attribute:{"four-index":String(index)},style:{width:withOut(0),flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:titleMarginBottom,flexGrow:0},child:{text:thisGeneralLocalStatus?title[index]:classTitle[index],style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.black}}},{attribute:{"four-index":String(index)},style:{width:withOut(2*editorInnerMargin),background:colorChip.white,borderRadius:innerCssBoxBorderRadius,flexGrow:1,overflow:"scroll",padding:editorInnerMargin},child:{attribute:{"four-index":String(index)},event:{dragenter$dragover$dragstart$dragleave:e=>{e.stopPropagation(),e.preventDefault()},drop:async event=>{event.preventDefault();const self=event.currentTarget,index=Number(self.mustAttribute("four-index")),view=fourView[index],docString=view.state.doc.toString();let position,i0,i1,i2,targetCssStrings,totalCssString,newState,beforeString,afterString;try{position=view.posAtCoords({x:event.clientX,y:event.clientY}),null===position&&(position=docString.length-1);const lineStartPos=view.state.doc.lineAt(position).from,thisText=event.dataTransfer.getData("text/plain"),standard=thisText.split(":")[0].trim();if(beforeString=docString.slice(0,position),afterString=docString.slice(position),i0=beforeString.split("").findLastIndex(s=>"{"===s),i1=beforeString.split("").findLastIndex(s=>"}"===s),-1===i1)if(-1===i0){if(i0=docString.split("").findIndex(s=>"{"===s),-1===i0)throw new Error(thisText);if(afterString=docString.slice(i0),position=i0,i2=afterString.split("").findIndex(s=>"}"===s),-1===i2){targetCssStrings=docString.slice(i0+1),new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=docString.slice(0,i0+1)+targetCssStrings+"\n\n}";try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}else{targetCssStrings=docString.slice(i0+1,position+i2),new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=docString.slice(0,i0+1)+targetCssStrings+docString.slice(position+i2);try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}}else if(i2=afterString.split("").findIndex(s=>"}"===s),-1===i2){targetCssStrings=docString.slice(i0+1),new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=docString.slice(0,i0+1)+targetCssStrings+"\n\n}";try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}else{targetCssStrings=docString.slice(i0+1,position+i2),new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=docString.slice(0,i0+1)+targetCssStrings+docString.slice(position+i2);try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}else{if(-1===i0)throw new Error(thisText);if(i0<=i1&&(afterString=docString.slice(i0),position=i0),i2=afterString.split("").findIndex(s=>"}"===s),-1===i2){targetCssStrings=docString.slice(i0+1),new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=docString.slice(0,i0+1)+targetCssStrings+"\n\n}";try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}else{targetCssStrings=docString.slice(i0+1,position+i2),new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=docString.slice(0,i0+1)+targetCssStrings+docString.slice(position+i2);try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}}view.dispatch({selection:dist_EditorSelection.cursor(lineStartPos),scrollIntoView:!0}),view.focus()}catch(e){const thisText=e.message.trim(),standard=thisText.split(":")[0].trim();let thisSelector;thisSelector="$inline ",1===index?thisSelector="#my_id ":2===index?thisSelector=".my_class ":3===index&&(thisSelector="selector "),targetCssStrings=docString,new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=thisSelector+"{"+targetCssStrings+"\n}";try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}}},style:{width:withOut(0),background:colorChip.white,paddingBottom:visualPaddingBottom}}}]}).children[1].children[0],thisCssString=0===thisCss.length?"":(await PrettyCss.launching(thisCss)).replace(new RegExp(instance.ghostMediaConditionInit+"\\s*"+instance.ghostMediaTrueConditionSmallMax,"gis"),"max-width: "+String(instance.standardPoint[0])+"rem").replace(new RegExp(instance.ghostMediaConditionInit+"\\s*"+instance.ghostMediaTrueConditionSmallMin,"gis"),"min-width: "+String(instance.standardPoint[0])+"rem").replace(new RegExp(instance.ghostMediaConditionInit+"\\s*"+instance.ghostMediaFalseConditionSmallMax,"gis"),"max-width: "+String(instance.standardPoint[0])+"rem").replace(new RegExp(instance.ghostMediaConditionInit+"\\s*"+instance.ghostMediaFalseConditionSmallMin,"gis"),"min-width: "+String(instance.standardPoint[0])+"rem").replace(new RegExp(instance.ghostMediaConditionInit+"\\s*"+instance.ghostMediaTrueConditionBigMax,"gis"),"max-width: "+String(instance.standardPoint[1])+"rem").replace(new RegExp(instance.ghostMediaConditionInit+"\\s*"+instance.ghostMediaTrueConditionBigMin,"gis"),"min-width: "+String(instance.standardPoint[1])+"rem").replace(new RegExp(instance.ghostMediaConditionInit+"\\s*"+instance.ghostMediaFalseConditionBigMax,"gis"),"max-width: "+String(instance.standardPoint[1])+"rem").replace(new RegExp(instance.ghostMediaConditionInit+"\\s*"+instance.ghostMediaFalseConditionBigMin,"gis"),"min-width: "+String(instance.standardPoint[1])+"rem").replace(/\(min\-width\:\s*8px\s*\)/gis,"(prefers-color-scheme: dark)"),contextMenuFunc=event=>{let init,parent,thisIndexString,thisIndex,attResult,safeIndex,gridTemplateColumns;if(event.preventDefault(),init=event.currentTarget,parent=null,thisIndex=-1,null!==init)if(init.getAttribute("four-index"))thisIndexString=init.getAttribute("four-index"),thisIndex=Number(thisIndexString.replace(/[^0-9\-\.]/gi,""));else if(parent=init.parentElement,null!==parent){for(attResult=init.getAttribute("four-index"),safeIndex=0;null===attResult&&!(safeIndex>100);)parent=parent.parentElement,attResult=parent.getAttribute("four-index"),safeIndex++;null!==attResult&&(thisIndexString=attResult,thisIndex=Number(thisIndexString.replace(/[^0-9\-\.]/gi,"")))}gridTemplateColumns="1fr 1fr",contextmenuPopup(event,(popupBase,numbersDictionay)=>new Promise((resolve,reject)=>{const titleList=[{title:"스타일 조정",buttons:[{title:"클래스 세팅",event:async e=>{resolve("classset_"+String(thisIndex))}},{title:"클래스 선택",event:async e=>{resolve("classselct_"+String(thisIndex))}},{title:"폰트 선택",event:async e=>{resolve("font_"+String(thisIndex))}},{title:"미디어 쿼리",event:async e=>{resolve("query_"+String(thisIndex))}},{title:"다크 모드",event:async e=>{resolve("dark_"+String(thisIndex))}},{title:"트랜스폼",event:async e=>{resolve("transform_"+String(thisIndex))}},{title:"필터",event:async e=>{resolve("filter_"+String(thisIndex))}},{title:"애니메이션",event:async e=>{resolve("animation_"+String(thisIndex))}}]}];try{if(void 0===numbersDictionay)throw new Error("invalid context general status");let gap=numbersDictionay.gap,buttonHeight=numbersDictionay.buttonHeight,groupHeight=numbersDictionay.groupHeight,buttonSize=numbersDictionay.buttonSize,groupSize=numbersDictionay.groupSize,groupBetween=numbersDictionay.groupBetween,groupWeight=numbersDictionay.groupWeight,boldVisualTop=numbersDictionay.boldVisualTop,boldVisualRight=numbersDictionay.boldVisualRight,paddingTop=numbersDictionay.paddingTop,buttonWeight=numbersDictionay.buttonWeight;popupBase.style.paddingTop=String(paddingTop)+ea;for(let{title,buttons}of titleList)createAbstract({mother:popupBase,style:{display:"flex",justifyContent:"end",alignItems:"start",flexDirection:"column",height:groupHeight,width:withOut(0),marginBottom:groupBetween},child:{text:"<b%>%b> "+title,style:{display:"inline",position:"relative",fontSize:groupSize,fontWeight:groupWeight,color:colorChip.darkDarkBlack,fontFamily:"pretendard"},bold:{display:"inline",position:"relative",fontSize:groupSize,fontWeight:400,color:colorChip.mint,top:String(boldVisualTop)+ea,marginRight:String(boldVisualRight)+ea,fontFamily:"pretendard"}}}),createAbstract({mother:popupBase,style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap,width:withOut(0)},children:buttons.map((button,buttonIndex)=>({event:{click:e=>{const self=e.currentTarget,eventData={message:"next-click",timestamp:Date.now()},customEvent=new CustomEvent("nextclick",{detail:eventData,bubbles:!0,cancelable:!0});self.dispatchEvent(customEvent)},nextclick:button.event},style:{display:"inline-flex",justifyContent:"center",alignItems:"center",height:buttonHeight,borderRadius:desktop?5:1,background:instance.mintBlueColorsArr[Math.floor(buttonIndex/2)],cursor:"pointer",transition:"all 0.3s ease"},child:{text:button.title,event:{selectstart:e=>e.preventDefault()},style:{fontSize:buttonSize,fontWeight:buttonWeight,color:colorChip.white,fontFamily:"pretendard"}}}))})}catch(e){reject(e)}})).then(result=>{if(/^query/gis.test(result)){const thisView=fourView[Number(result.split("_").at(-1))],standardPoint=instance.standardPoint,selection=thisView.state.selection.main,newState=thisView.state.update({changes:{from:selection.from,to:selection.from,insert:`@media (max-width: ${String(standardPoint[0])}rem) {\n\n}\n\n@media (min-width: ${String(standardPoint[0])}rem) and (max-width: ${String(standardPoint[1])}rem) {\n\n}\n\n@media (min-width: ${String(standardPoint[1])}rem) {\n\n}\n`}});thisView.dispatch(newState)}else if(/^dark/gis.test(result)){const thisView=fourView[Number(result.split("_").at(-1))],selection=thisView.state.selection.main,newState=thisView.state.update({changes:{from:selection.from,to:selection.from,insert:"@media (prefers-color-scheme: dark) {\n\n}\n"}});thisView.dispatch(newState)}else if(/^transform/gis.test(result)){const thisView=fourView[Number(result.split("_").at(-1))],selection=thisView.state.selection.main;instance.transformHelperPopup().then(cssString=>{if(""!==cssString){const newState=thisView.state.update({changes:{from:selection.from,to:selection.from,insert:cssString}});thisView.dispatch(newState)}}).catch(e=>console.log(e))}else if(/^animation/gis.test(result)){const thisView=fourView[Number(result.split("_").at(-1))],selection=thisView.state.selection.main;(async()=>{const promptResult=await promptPopup("애니메이션 이름을 지정해주세요!");if("string"==typeof promptResult){const v=promptResult.replace(/[^a-zA-Z0-9\-_]/gis,"").trim();if(""!==v){const cssString=await instance.animationHelperPopup(v),newState=thisView.state.update({changes:{from:selection.from,to:selection.from,insert:cssString}});thisView.dispatch(newState)}}})().catch(e=>console.log(e))}else if(/^filter/gis.test(result)){const thisView=fourView[Number(result.split("_").at(-1))],selection=thisView.state.selection.main;instance.filterHelperPopup().then(cssString=>{if(""!==cssString){const newState=thisView.state.update({changes:{from:selection.from,to:selection.from,insert:cssString}});thisView.dispatch(newState)}}).catch(e=>console.log(e))}else if(/^classset/gis.test(result)){const thisView=fourView[Number(result.split("_").at(-1))];promptPopup("클래스명을 알려주세요!").then(r=>{if(null!==r){const newState=thisView.state.update({changes:{from:0,to:0,insert:"."+hangulToEnglish(r).replace(/\s/gi,"").replace(/[\.\#,\^\~\>]/gi,"")+" {\n\n}\n\n"}});thisView.dispatch(newState)}}).catch(e=>{console.log(e)})}else if(/^classselct/gis.test(result)){const thisView=fourView[Number(result.split("_").at(-1))];instance.classSelectionPopup().then(result=>{if("string"==typeof result&&""!==result){const newState=thisView.state.update({changes:{from:0,to:0,insert:result}});thisView.dispatch(newState)}}).catch(e=>{console.log(e)})}else if(/^font/gis.test(result)){const thisView=fourView[Number(result.split("_").at(-1))];instance.fontSelectionBox().then(result=>{try{const{family,weight}=JSON.parse(result),r="\n"+["font-family: "+family+";","font-weight: "+String(weight)+";"].join("\n")+"\n",selection=thisView.state.selection.main,newState=thisView.state.update({changes:{from:selection.from,to:selection.from,insert:r}});thisView.dispatch(newState)}catch{}}).catch(e=>console.log(e))}}).catch(e=>{console.log(e)})};thisCssMother.addEventListener("contextmenu",contextMenuFunc);const thisView=await instance.editorInit("css-mini",thisCssMother,thisCssString,{events:EditorView.domEventHandlers({contextmenu:contextMenuFunc})});fourView.push(thisView),index++}}instance.setCssSupportButtons(whiteBase,110)}catch(e){console.log(e),reject(e)}})};classSelectionPopup=()=>{const instance=this,back=this.back,{colorChip,svgMaker:localSvgMaker,binaryPath}=PathAnimator,{withOut,percent,promptPopup,contextmenuPopup,setDomColor,markdownBlocks,linkToString,hangulToEnglish,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();return new Promise(async(resolve,reject)=>{try{let generalCssId,generalCssObject,generalCssText,localCssId,localCssObject,localCssText,totalText,fontFaceArr,keyframeArr,mediaArr,allSelectorGroup;generalCssId=instance.valueParser("decode",instance.currentMap.tree.style.general).id,[generalCssObject]=await back.frontRead(instance.collectionString,{_id:generalCssId}),generalCssText=generalCssObject.data,localCssId=instance.valueParser("decode",instance.currentCssId).id,[localCssObject]=await back.frontRead(instance.collectionString,{_id:localCssId}),localCssText=localCssObject.data,totalText=generalCssText+"\n\n"+localCssText,fontFaceArr=[],totalText=totalText.replace(/@font\-face\s*\{[^\}]*\}/gis,match=>(fontFaceArr.push(match.trim()),"")),keyframeArr=[],totalText=totalText.replace(/@keyframes[^\{]*\s*\{[^@]*?\}\s*\}/gis,match=>(keyframeArr.push(match.trim()),"")),mediaArr=[],totalText=totalText.replace(/@media[^\{]*\s*\{[^@]*?\}\s*\}/gis,match=>(mediaArr.push(match.trim()),"")),allSelectorGroup=[];for(let s of mediaArr){let mediaStatus;mediaStatus="";const pureString=s.trim().replace(/^@media\s*([^\{]+?)\{/gi,(match,p1)=>(mediaStatus=p1.trim(),"")).replace(/\s*\}$/gi,"").trim(),thisCssPureArr=[];pureString.replace(/([^\{\}]+?)\s*\{[^\}]*\}/gs,match=>(thisCssPureArr.push(match.trim()),match)),allSelectorGroup=allSelectorGroup.concat(thisCssPureArr)}const thisPureArr=[];totalText.replace(/([^\{\}]+?)\s*\{[^\}]*\}/gs,match=>(thisPureArr.push(match.trim()),match));const cssRulesArray=allSelectorGroup.concat(thisPureArr).map(s=>s.replace(/[\n\t]/gis," ").replace(/\s+/gis," ")),generalSelectors=[];for(let i=cssRulesArray.length-1;i>=0;i--){const rule=cssRulesArray[i];let thisSelector="",cssValue="";if(rule.replace(/^\s*([^\{]+)\s*\{([^\}]*)\}\s*$/gis,(match,p1,p2)=>(thisSelector=p1.trim().replace(/\n/g," "),cssValue=p2.trim().replace(/\n/g," "),match)),/\.[^\s\.\#\:]*$/gis.test(thisSelector.trim())&&!/____shadow__doms__tempclassname__temp/gi.test(thisSelector.trim()))if(generalSelectors.map(s=>s.title).includes(thisSelector.trim())){const index=generalSelectors.findIndex(s=>s.title===thisSelector.trim());generalSelectors[index].value=generalSelectors[index].value+";"+cssValue.trim()}else generalSelectors.push({title:thisSelector.trim(),value:cssValue.trim()})}const promptResult=await promptPopup("적용을 클래스를 선택해주세요!","list",JSON.stringify(generalSelectors.map(({title,value})=>({title,value:title+" {"+value+"}"}))));if(null!==promptResult){resolve(await PrettyCss.launching(promptResult)+"\n\n")}else resolve("")}catch(e){console.log(e),reject(e)}})};insertDivideRow=async(preMatrix=[])=>{const instance=this,{totalContents}=this,{colorChip,svgMaker:localSvgMaker,binaryPath}=PathAnimator,{withOut,percent,markdownBlocks,linkToString,promptPopup,colorPicker,stringToLink,ordinalNumber,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(),result={html:"",css:"",cssUpdate:!1,cssAfter:""};try{const currentCssText=instance.cssView.state.doc.toString(),indent="  ";let tableHtml,tableStringArr,columnsNumber,rowsNumber,zeroQuestionAnswer,firstQuestionAnswer,secondQuestionAnswer,divideRowCss,divideRowCssAfterArr,divideRowCssAfter,thisMode,thisClassStartName,parser,parsedDocument,bodyElement,thisDivideLength,questionMode,getMediauQueryCss,getMainHtml,thisLength,nonQuestionModeFirstWidthDelta,leftMaxLength;if(nonQuestionModeFirstWidthDelta=25,questionMode=!0,thisLength=0,0!==preMatrix.length&&(thisLength=preMatrix[0].length,preMatrix.every(arr=>arr.length===thisLength)&&2===thisLength?questionMode=!1:(questionMode=!0,preMatrix=[],thisLength=0)),0!==preMatrix.length){const standardFontSize=16;let accLength,maxTarget;if(leftMaxLength=preMatrix.map(arr=>arr[0]).reduce((acc,curr)=>acc>curr.length?acc:curr.length,0),maxTarget=preMatrix.map(arr=>arr[0]).find(s=>s.length===leftMaxLength),accLength=0,maxTarget.replace(/[가-힣]/gis,match=>(accLength+=.95*standardFontSize,match)),maxTarget.replace(/[a-z]/gs,match=>(accLength+=.5*standardFontSize,match)),maxTarget.replace(/[A-Z]/gs,match=>(accLength+=.55*standardFontSize,match)),maxTarget.replace(/[^a-zA-Z가-힣]/gs,match=>(accLength+=.25*standardFontSize,match)),0===instance.shadowDoms.length||0===accLength)nonQuestionModeFirstWidthDelta=25;else{const maxShadowDomsWidth=instance.shadowDoms.reduce((acc,curr)=>acc>curr.getBoundingClientRect().width?acc:curr.getBoundingClientRect().width,1);nonQuestionModeFirstWidthDelta=4.2+Number(Math.round(accLength/maxShadowDomsWidth*1e4)/100)}}if(parser=new DOMParser,parsedDocument=parser.parseFromString(instance.htmlView.state.doc.toString(),"text/html"),bodyElement=parsedDocument.querySelector("body"),thisDivideLength=bodyElement.querySelectorAll("."+instance.divideRowClassName).length,zeroQuestionAnswer="열",thisMode="divide",thisClassStartName=instance.divideRowClassName,divideRowCss=[`.${instance.divideRowClassName} {`,`${indent}display: flex;`,`${indent}flex-direction: row;`,`${indent}position: relative;`,`${indent}width: 100%;`,`${indent}margin: 0rem;`,`${indent}padding: 0rem;`,`${indent}box-sizing: border-box;`,"}","",".dividerow_column {",`${indent}padding: 0rem;`,`${indent}margin: 0rem;`,`${indent}display: inline-flex;`,`${indent}position: relative;`,`${indent}flex-direction: column;`,`${indent}align-items: stretch;`,`${indent}flex-grow: 1;`,`${indent}box-sizing: border-box;`,"}","",".dividerow_column p {",`${indent}padding: 0rem;`,`${indent}margin: 0rem;`,`${indent}font-family: inherit;`,`${indent}font-weight: inherit;`,`${indent}text-align: inherit;`,"}",""].join("\n"),getMediauQueryCss=(rowsNumber,columnsNumber,leftRightMatrix=[])=>{const divideRowCssAfterArr=[],getThisWidth=i=>0===leftRightMatrix.length?`calc(100% / ${String(columnsNumber)})`:String(0===i?String(nonQuestionModeFirstWidthDelta)+"%":String(100-nonQuestionModeFirstWidthDelta)+"%");for(let j=0;j<rowsNumber;j++){divideRowCssAfterArr.push(`@media (max-width: ${String(instance.standardPoint[0])}rem) {`);for(let i=0;i<columnsNumber;i++)divideRowCssAfterArr.push(`${indent}.${thisClassStartName}_column_${ordinalNumber(thisDivideLength+1+j)}_${ordinalNumber(i+1)} {`),divideRowCssAfterArr.push(`${indent}${indent}width: ${getThisWidth(i)};`),divideRowCssAfterArr.push(`${indent}${indent}justify-content: start;`),divideRowCssAfterArr.push(`${indent}${indent}text-align: justify;`),0!==leftRightMatrix.length&&0===i?(divideRowCssAfterArr.push(`${indent}${indent}font-family: 'pretendard';`),divideRowCssAfterArr.push(`${indent}${indent}font-weight: 800;`)):(divideRowCssAfterArr.push(`${indent}${indent}font-family: 'batang';`),divideRowCssAfterArr.push(`${indent}${indent}font-weight: 400;`)),divideRowCssAfterArr.push(`${indent}}`);divideRowCssAfterArr.push(`${indent}.${thisClassStartName}_${ordinalNumber(thisDivideLength+1+j)} {`),divideRowCssAfterArr.push(`${indent}${indent}height: auto;`),divideRowCssAfterArr.push(`${indent}}`),divideRowCssAfterArr.push("}"),divideRowCssAfterArr.push(`@media (min-width: ${String(instance.standardPoint[0])}rem) and (max-width: ${String(instance.standardPoint[1])}rem) {`);for(let i=0;i<columnsNumber;i++)divideRowCssAfterArr.push(`${indent}.${thisClassStartName}_column_${ordinalNumber(thisDivideLength+1+j)}_${ordinalNumber(i+1)} {`),divideRowCssAfterArr.push(`${indent}${indent}width: ${getThisWidth(i)};`),divideRowCssAfterArr.push(`${indent}${indent}justify-content: start;`),divideRowCssAfterArr.push(`${indent}${indent}text-align: justify;`),0!==leftRightMatrix.length&&0===i?(divideRowCssAfterArr.push(`${indent}${indent}font-family: 'pretendard';`),divideRowCssAfterArr.push(`${indent}${indent}font-weight: 800;`)):(divideRowCssAfterArr.push(`${indent}${indent}font-family: 'batang';`),divideRowCssAfterArr.push(`${indent}${indent}font-weight: 400;`)),divideRowCssAfterArr.push(`${indent}}`);divideRowCssAfterArr.push(`${indent}.${thisClassStartName}_${ordinalNumber(thisDivideLength+1+j)} {`),divideRowCssAfterArr.push(`${indent}${indent}height: auto;`),divideRowCssAfterArr.push(`${indent}}`),divideRowCssAfterArr.push("}"),divideRowCssAfterArr.push(`@media (min-width: ${String(instance.standardPoint[1])}rem) {`);for(let i=0;i<columnsNumber;i++)divideRowCssAfterArr.push(`${indent}.${thisClassStartName}_column_${ordinalNumber(thisDivideLength+1+j)}_${ordinalNumber(i+1)} {`),divideRowCssAfterArr.push(`${indent}${indent}width: ${getThisWidth(i)};`),divideRowCssAfterArr.push(`${indent}${indent}justify-content: start;`),divideRowCssAfterArr.push(`${indent}${indent}text-align: justify;`),0!==leftRightMatrix.length&&0===i?(divideRowCssAfterArr.push(`${indent}${indent}font-family: 'pretendard';`),divideRowCssAfterArr.push(`${indent}${indent}font-weight: 800;`)):(divideRowCssAfterArr.push(`${indent}${indent}font-family: 'batang';`),divideRowCssAfterArr.push(`${indent}${indent}font-weight: 400;`)),divideRowCssAfterArr.push(`${indent}}`);divideRowCssAfterArr.push(`${indent}.${thisClassStartName}_${ordinalNumber(thisDivideLength+1+j)} {`),divideRowCssAfterArr.push(`${indent}${indent}height: auto;`),divideRowCssAfterArr.push(`${indent}}`),divideRowCssAfterArr.push("}")}return divideRowCssAfterArr},getMainHtml=(rowsNumber,columnsNumber,leftRightMatrix=[])=>{const tableStringArr=[];if(0===leftRightMatrix.length)for(let j=0;j<rowsNumber;j++){const tempArr=[];for(let i=0;i<columnsNumber;i++)tempArr.push("기본 내용");leftRightMatrix.push(objectDeepCopy(tempArr))}for(let j=0;j<rowsNumber;j++){tableStringArr.push(`<div class="${thisClassStartName} ${thisClassStartName}_${ordinalNumber(thisDivideLength+1+j)}">`);for(let i=0;i<columnsNumber;i++)tableStringArr.push(`${indent}<div class="${thisClassStartName}_column ${thisClassStartName}_column_${ordinalNumber(thisDivideLength+1+j)}_${ordinalNumber(i+1)}">`),tableStringArr.push(`${indent}${indent}<p>${leftRightMatrix[j][i]}</p>`),tableStringArr.push(`${indent}</div>`);tableStringArr.push("</div>")}return tableStringArr},questionMode){if(firstQuestionAnswer=await promptPopup("열(세로)의 개수를 알려주세요!"),null!==firstQuestionAnswer){if(columnsNumber=Number(firstQuestionAnswer),secondQuestionAnswer=await promptPopup("행(가로)의 개수를 알려주세요!"),null!==secondQuestionAnswer)return rowsNumber=Number(secondQuestionAnswer),divideRowCssAfterArr=getMediauQueryCss(rowsNumber,columnsNumber,[]),divideRowCssAfter=divideRowCssAfterArr.join("\n"),tableStringArr=getMainHtml(rowsNumber,columnsNumber,[]),tableHtml=tableStringArr.join("\n"),result.cssUpdate=!1,new RegExp("."+thisClassStartName+"\\s*{","gis").test(currentCssText)||(result.cssUpdate=!0,result.css=(divideRowCss+"\n\n"+divideRowCssAfter).trim()),result.cssAfter=divideRowCssAfter.trim(),result.html=tableHtml,result;throw new Error("invalid number")}throw new Error("invalid number")}return rowsNumber=preMatrix.length,columnsNumber=thisLength,divideRowCssAfterArr=getMediauQueryCss(rowsNumber,columnsNumber,preMatrix),divideRowCssAfter=divideRowCssAfterArr.join("\n"),tableStringArr=getMainHtml(rowsNumber,columnsNumber,preMatrix),tableHtml=tableStringArr.join("\n"),result.cssUpdate=!1,new RegExp("."+thisClassStartName+"\\s*{","gis").test(currentCssText)||(result.cssUpdate=!0,result.css=(divideRowCss+"\n\n"+divideRowCssAfter).trim()),result.cssAfter=divideRowCssAfter.trim(),result.html=tableHtml,result}catch(e){return result}};divideRowSizeBox=async(event,divideItem,againMarginPopupMode=!1)=>{const instance=this,{totalContents,shadowDomTargetClassName}=this,{colorChip,svgMaker:localSvgMaker,binaryPath}=PathAnimator,{withOut,percent,markdownBlocks,prettyCalc,linkToString,transformCss,contextmenuPopup,promptPopup,colorPicker,stringToLink,ordinalNumber,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(),excludes=["PRE","CODE","STYLE","OUTPUT","SCRIPT","TEXTAREA","ARTICLE","ASIDE"];try{const originalBaseEvent=event,originalBaseSelf=divideItem,self=divideItem,thisSelf=divideItem,targetShadow=instance.shadowDoms.find(d=>[...d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelectorAll(thisSelf.nodeName)].includes(thisSelf)),scrollTopStandard=targetShadow.children[0]?.children[0]?.children[0],thisSelfComputedStyle=window.getComputedStyle(thisSelf),thisId=thisSelf.getAttribute("data-dropid"),topPaddingTop=Number.isNaN(Number((targetShadow.children[0]?.children[0]).style.paddingTop.replace(/[^0-9]/gi,"")))?0:Number((targetShadow.children[0]?.children[0]).style.paddingTop.replace(/[^0-9]/gi,"")),thisBaseWidth=targetShadow.querySelector("."+shadowDomTargetClassName).getBoundingClientRect().width,thisSelfFirstWidth=thisSelf.getBoundingClientRect().width,thisSelfFirstHeight=thisSelf.getBoundingClientRect().height,thisBaseHeight=thisBaseWidth*(thisSelfFirstHeight/thisSelfFirstWidth),thisSelfFirstLeft=/center/gi.test(thisSelfComputedStyle.alignItems)?(thisBaseWidth-thisSelfFirstWidth)/2:/end/gi.test(thisSelfComputedStyle.alignItems)?thisBaseWidth-thisSelfFirstWidth:0,zIndex=4,movedX=event.clientX,thisMarginPadding={marginTop:"",marginBottom:"",marginRight:"",marginLeft:"",paddingTop:"",paddingBottom:"",paddingRight:"",paddingLeft:""};[...thisSelf.children].map(d=>d);let pastHeight,thisUpStandard,thisDownStandard,thisStandard,previousDoms,nextDoms,siblingDoms,topNumbers,heightNumbers,selfNumber,boxWidth,boxRadius,lineWidth,lineColor,clickArea,whiteBox,clickBox,expandedArea,thisMode,originChilds,shrinkZeroArr,i,left,thisWidth,thisDirection,finalHeightString,thisTextAlign,thisJustifyContent,thisFlexGrow,thisFlexShrink,pastGhostHeight,originalChildren=[...thisSelf.children].map(d=>d),boxMother=originalChildren[0].parentElement,motherBoxStatus=boxMother.getBoundingClientRect(),thisIndex=0;shrinkZeroArr=[],thisDirection=0,finalHeightString="",thisTextAlign="",thisJustifyContent="",thisFlexGrow="",thisFlexShrink="",pastGhostHeight=0,boxWidth=mediaNumber(10,10,10,8,2),boxRadius=mediaNumber(3,3,3,3,1),lineWidth=1,lineColor=colorChip.mint,clickArea=4*boxWidth,expandedArea=60*boxWidth,siblingDoms=[],topNumbers=[],heightNumbers=[],pastHeight="",self.style.height&&(pastHeight=self.style.height),instance.shadowDoms.forEach(d=>{const host=d.querySelector("."+shadowDomTargetClassName);if(targetShadow===d){const thisKind=targetShadow.mustAttribute("kind");let i;i=/mobile/gi.test(thisKind)?0:/tablet/gi.test(thisKind)&&"bigTablet"!==thisKind?1:2,thisMode=i}host.style.overflow="visible"}),i=0,left=0,thisWidth=0;for(let d of originalChildren){const thisBox=d.getBoundingClientRect();if(0!==i&&(left+=thisWidth),thisWidth=thisBox.width,thisBox.x<=movedX&&movedX<thisBox.x+thisBox.width){thisIndex=i;break}i++}const tongHeightNumbersLoad=()=>{if(originChilds=[...thisSelf.children].map(d=>d),void 0===originChilds[thisIndex])throw new Error("invalid status");window.getComputedStyle(originChilds[thisIndex]);for(clickBox={position:"absolute",width:clickArea,height:clickArea,display:"inline-flex",justifyContent:"center",alignItems:"center",background:colorChip.transparent,zIndex,transformOrigin:"50% 50%"},whiteBox={width:boxWidth,height:boxWidth,borderRadius:boxRadius,border:String(lineWidth)+"px solid "+lineColor,boxSizing:"border-box",background:colorChip.white,cursor:"inherit",transformOrigin:"50% 50%"},previousDoms=[],nextDoms=[],previousDoms=[],nextDoms=[],thisUpStandard=self,thisDownStandard=self,thisStandard=self;null!==thisUpStandard.previousElementSibling;)previousDoms.unshift(thisUpStandard.previousElementSibling),thisUpStandard=thisUpStandard.previousElementSibling;for(;null!==thisDownStandard.nextElementSibling;)nextDoms.push(thisDownStandard.nextElementSibling),thisDownStandard=thisDownStandard.nextElementSibling;siblingDoms=[];for(let d of previousDoms)excludes.includes(d.nodeName.toUpperCase())||siblingDoms.push(d);siblingDoms.push(self),selfNumber=siblingDoms.length-1;for(let d of nextDoms)excludes.includes(d.nodeName.toUpperCase())||siblingDoms.push(d);topNumbers=siblingDoms.map(d=>self.getBoundingClientRect().top-scrollTopStandard.getBoundingClientRect().top+d.getBoundingClientRect().top-self.getBoundingClientRect().top+scrollTopStandard.scrollTop+topPaddingTop-scrollTopStandard.scrollTop),heightNumbers=siblingDoms.map(d=>d.getBoundingClientRect().height)};if(originChilds=[...thisSelf.children].map(d=>d),void 0===originChilds[thisIndex])throw new Error("invalid status");const firstWidthPercent=String(originChilds[thisIndex].getBoundingClientRect().width/thisSelf.getBoundingClientRect().width*100)+"%",firstLeftPercent=String(left/thisSelf.getBoundingClientRect().width*100)+"%";tongHeightNumbersLoad();const getParentMainTong=currentDom=>{let target;for(target=currentDom;null!==target&&!target.classList.contains("sizeBoxViewMainBoxClassName");)target=target.parentElement;if(null!==target)return target;throw new Error("invalid ragne")},getGhostTong=mTong=>mTong.querySelector(".ghostChildrenClassName"),targetDoms=siblingDoms.filter(d=>!d.classList.contains("____shadow__doms__tempclassname__temp____2")),selfIndex=targetDoms.findIndex(d=>d===self),getFrontToIndex=(e,currentDom)=>{let yIndex,linkBoo,target,fromIndex,toIndex,fromMiddleTarget,toMiddleTarget,fromMiddleIndex,toMiddleIndex;linkBoo=!1,yIndex=-1;for(let z=0;z<topNumbers.length;z++){const fromNumber=topNumbers[z],toNumber=topNumbers[z]+heightNumbers[z];fromNumber<=e.offsetY&&e.offsetY<toNumber&&(yIndex=z)}if(-1===yIndex)for(let z=0;z<topNumbers.length;z++){const fromNumber=topNumbers[z]-30,toNumber=topNumbers[z]+heightNumbers[z]+30;fromNumber<=e.offsetY&&e.offsetY<toNumber&&(yIndex=z)}if(-1!==yIndex&&void 0!==siblingDoms[yIndex]&&(target=siblingDoms[yIndex],siblingDoms[yIndex].classList.contains("____shadow__doms__tempclassname__temp____2")&&(target=targetDoms[yIndex]),void 0===target?linkBoo=!1:target.classList.contains(instance.divideRowClassName)&&(linkBoo=!0)),fromIndex=-1,toIndex=-1,fromMiddleTarget=targetDoms.slice(0,selfIndex),toMiddleTarget=targetDoms.slice(selfIndex+1),fromMiddleIndex=fromMiddleTarget.findIndex(d=>d.classList.contains(instance.divideRowClassName)),toMiddleIndex=toMiddleTarget.findLastIndex(d=>d.classList.contains(instance.divideRowClassName)),-1!==fromMiddleIndex)for(let f=selfIndex-1;f>=fromMiddleIndex&&void 0!==targetDoms[f]&&targetDoms[f].classList.contains(instance.divideRowClassName);f--)fromIndex=f;if(-1!==toMiddleIndex)for(let f=selfIndex+1;f<=selfIndex+1+toMiddleIndex&&void 0!==targetDoms[f]&&targetDoms[f].classList.contains(instance.divideRowClassName);f++)toIndex=f;return-1===fromIndex&&-1===toIndex?(fromIndex=0,toIndex=0):-1===fromIndex?(fromIndex=0,toIndex-=selfIndex):-1===toIndex?(fromIndex-=selfIndex,toIndex=0):(fromIndex-=selfIndex,toIndex-=selfIndex),[fromIndex,toIndex,linkBoo,target]},sizeBoxEndEvent=e=>{e.stopPropagation();const enSelf=e.currentTarget,[fromIndex,toIndex,linkBoo,target]=getFrontToIndex(e,enSelf);let widthArr,targetMediaQuery,finalHeight,ii;if(widthArr=[],targetMediaQuery="",finalHeight="",ii=-1,instance.shadowDoms.forEach((d,si)=>{const moveMentTarget=d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelector(".movementTargetClassName"),thisKind=d.mustAttribute("kind");if(null!==moveMentTarget){targetMediaQuery=/mobile/gi.test(thisKind)?`@media (max-width: ${String(instance.standardPoint[0])}rem)`:/tablet/gi.test(thisKind)&&"bigTablet"!==thisKind?`@media (min-width: ${String(instance.standardPoint[0])}rem) and (max-width: ${String(instance.standardPoint[1])}rem)`:`@media (min-width: ${String(instance.standardPoint[1])}rem)`,ii=si;try{let acc;acc="",widthArr=JSON.parse(moveMentTarget.getAttribute("width_arr")),widthArr=widthArr.map((s,i)=>{let resultResult;if(resultResult="",widthArr.length-1===i)resultResult=cssCalc(String(100)+"%","-",acc);else{let middleCalc;/^calc/gi.test(s)?(middleCalc=prettyCalc(s),middleCalc=middleCalc.replace(/\s*\-\s*[\-0-9\.]+(rem|em)/gis,""),middleCalc=prettyCalc(middleCalc)):middleCalc=s,acc=0===i?middleCalc:cssCalc(acc,"+",middleCalc,!0),resultResult=s}return prettyCalc(resultResult)})}catch(e){widthArr=[]}}}),finalHeight=finalHeightString,instance.nonMediaUpdateDone?instance.nonMediaUpdate=!1:1===instance.shadowDoms.length?instance.nonMediaUpdate=!0:(instance.nonMediaUpdate=!1,ii===instance.shadowDoms.length-1&&(instance.nonMediaUpdate=!0)),instance.shadowHistory((d,shadowIndex)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,thisSelf=shadow.querySelector('[data-dropid="'+thisId+'"]'),removeTargets=[...shadow.querySelectorAll(".sizeBoxViewMainBoxClassName, .originalCopiedTempClassName")].map(d=>d),styleTag=shadow.querySelector("style"),outputTag=shadow.querySelector("output"),thisKind=d.mustAttribute("kind"),cssEditorView=instance.cssView;let currentCssText=cssEditorView.state.doc.toString();if(widthArr.length>0){if(0!==widthArr.length&&""!==targetMediaQuery){let thisTarget;for(let z=fromIndex;z<=toIndex;z++){if(thisTarget=thisSelf,z<0)for(let k=0;k<Math.abs(z)&&null!==thisTarget.previousElementSibling;k++)thisTarget=thisTarget.previousElementSibling,!thisTarget.classList.contains("____shadow__doms__tempclassname__temp____2")&&thisTarget.classList.contains(instance.divideRowClassName)||(thisTarget=thisTarget.previousElementSibling);else if(z>0)for(let k=0;k<Math.abs(z)&&null!==thisTarget.nextElementSibling;k++)thisTarget=thisTarget.nextElementSibling,!thisTarget.classList.contains("____shadow__doms__tempclassname__temp____2")&&thisTarget.classList.contains(instance.divideRowClassName)||(thisTarget=thisTarget.nextElementSibling);if(thisTarget.children.length===widthArr.length){const thisClassTarget=String([...thisTarget.classList].find(s=>new RegExp(instance.divideRowClassName+"_").test(s))).replace(/_/g,"_column_"),targetChildren=[...thisTarget.children].map(d=>d);for(let i=0;i<targetChildren.length;i++){const targetSelector="."+thisClassTarget+"_"+ordinalNumber(i+1),replaceTarget=(s,convertingMode=!1)=>{let thisStandardFixed,thisStandard=targetMediaQuery;if(convertingMode){thisStandard=instance.mediaInPreview(thisKind,targetMediaQuery+"{}").replace(/\{\}$/gi,"").trim()}return thisStandardFixed=instance.nonMediaUpdate?"@media\\s+\\([^\\)]+[^\\{\\}@]*?":thisStandard.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1),s.replace(new RegExp("("+thisStandardFixed+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(width\\s*\\:\\s*)([^;]*?)(;)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+String(String(p3+p4+p5).trim().replace(/;$/gi,"")+";").replace(/(width\:\s*)[^;]*?;/gis,(match,p)=>p+widthArr[i].replace(/;$/gi,"")+";"))};styleTag.innerHTML=replaceTarget(styleTag.innerHTML,!0),outputTag.innerHTML=replaceTarget(outputTag.innerHTML,!0),currentCssText=replaceTarget(currentCssText,!1)}}}}}else if(""!==finalHeight){const targetSelector="."+String([...thisSelf.classList].find(s=>new RegExp(instance.divideRowClassName+"_").test(s))),replaceTarget=(s,convertingMode=!1)=>{let thisStandard=targetMediaQuery;if(convertingMode){thisStandard=instance.mediaInPreview(thisKind,targetMediaQuery+"{}").replace(/\{\}$/gi,"").trim()}return s.replace(new RegExp("("+thisStandard.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(height\\s*\\:\\s*)([^;]*?)(;)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+String(String(p3+p4+p5).trim().replace(/;$/gi,"")+";").replace(/(height\:\s*)[^;]*?;/gis,(match,p)=>p+finalHeight.replace(/;$/gi,"")+";"))};styleTag.innerHTML=replaceTarget(styleTag.innerHTML,!0),outputTag.innerHTML=replaceTarget(outputTag.innerHTML,!0),currentCssText=replaceTarget(currentCssText,!1)}{const thisClassTarget=String([...thisSelf.classList].find(s=>new RegExp(instance.divideRowClassName+"_").test(s))).replace(/_/g,"_column_"),targetChildren=[...thisSelf.children].map(d=>d);for(let i=0;i<targetChildren.length;i++)if(i===thisIndex){const targetSelector="."+thisClassTarget+"_"+ordinalNumber(i+1),replaceTarget=(s,convertingMode=!1)=>{let thisStandard=targetMediaQuery;if(convertingMode){thisStandard=instance.mediaInPreview(thisKind,targetMediaQuery+"{}").replace(/\{\}$/gi,"").trim().replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)}else thisStandard=thisStandard.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1);if(instance.nonMediaUpdate&&(thisStandard="@media\\s+\\([^\\)]+[^\\{\\}@]*?"),""!==thisTextAlign){let thisTextBoo,thisAlignItems,textAlignBoo;thisTextBoo=!1,textAlignBoo=!1,thisAlignItems="start",/center/gi.test(thisTextAlign)?thisAlignItems="center":/right/gi.test(thisTextAlign)&&(thisAlignItems="end"),s=s.replace(new RegExp("("+thisStandard+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(text\\-align\\s*\\:\\s*)([^;]*?)(;)","gis"),(match,p1,p2,p3,p4,p5)=>{const updated=String(String(p3+p4+p5).trim().replace(/;$/gi,"")+";").replace(/(text\-align\:\s*)[^;]*?;/gis,(match,p)=>p+thisTextAlign+";");return thisTextBoo=!0,p1+p2+updated}),thisTextBoo||(s=s.replace(new RegExp("("+thisStandard+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)","gis"),(match,p1)=>p1+"\n"+("text-align: "+thisTextAlign)+";"),thisTextBoo=!0),textAlignBoo=!1,s=s.replace(new RegExp("("+thisStandard+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^;@]*?)(;)","gis"),(match,p1,p2,p3,p4,p5)=>{const updated=String(String(p3+p4+p5).trim().replace(/;$/gi,"")+";").replace(/(align\-items\:\s*)[^;@]*?;/gis,(match,p)=>p+thisAlignItems+";");return textAlignBoo=!0,p1+p2+updated}),textAlignBoo||(s=s.replace(new RegExp("("+thisStandard+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)","gis"),(match,p1)=>p1+"\n"+("align-items: "+thisAlignItems)+";"))}if(""!==thisJustifyContent){let textJustifyBoo;textJustifyBoo=!1,s=s.replace(new RegExp("("+thisStandard+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(justify\\-content\\s*\\:\\s*)([^;]*?)(;)","gis"),(match,p1,p2,p3,p4,p5)=>{const updated=String(String(p3+p4+p5).trim().replace(/;$/gi,"")+";").replace(/(justify\-content\:\s*)[^;]*?;/gis,(match,p)=>p+thisJustifyContent+";");return textJustifyBoo=!0,p1+p2+updated}),textJustifyBoo||(s=s.replace(new RegExp("("+thisStandard+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)","gis"),(match,p1)=>p1+"\n"+("justify-content: "+thisJustifyContent)+";"))}if(""!==thisFlexGrow){let textJustifyBoo;textJustifyBoo=!1,s=s.replace(new RegExp("("+thisStandard+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(flex\\-grow\\s*\\:\\s*)([^;]*?)(;)","gis"),(match,p1,p2,p3,p4,p5)=>{const updated=String(String(p3+p4+p5).trim().replace(/;$/gi,"")+";").replace(/(flex\-grow\:\s*)[^;]*?;/gis,(match,p)=>p+thisFlexGrow+";");return textJustifyBoo=!0,p1+p2+updated}),textJustifyBoo||(s=s.replace(new RegExp("("+thisStandard+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)","gis"),(match,p1)=>p1+"\n"+("flex-grow: "+thisFlexGrow)+";"))}if(""!==thisFlexShrink){let textJustifyBoo;textJustifyBoo=!1,s=s.replace(new RegExp("("+thisStandard+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(flex\\-shrink\\s*\\:\\s*)([^;]*?)(;)","gis"),(match,p1,p2,p3,p4,p5)=>{const updated=String(String(p3+p4+p5).trim().replace(/;$/gi,"")+";").replace(/(flex\-shrink\:\s*)[^;]*?;/gis,(match,p)=>p+thisFlexShrink+";");return textJustifyBoo=!0,p1+p2+updated}),textJustifyBoo||(s=s.replace(new RegExp("("+thisStandard+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)","gis"),(match,p1)=>p1+"\n"+("flex-shrink: "+thisFlexShrink)+";"))}for(let position in thisMarginPadding)if(""!==thisMarginPadding[position]){const thisIsPadding=/^padding/gi.test(position),thisStartWords=thisIsPadding?"padding":"margin",thisEndDirection=thisIsPadding?position.replace(/^padding/gi,"").toLowerCase():position.replace(/^margin/gi,"").toLowerCase(),regexString=thisStartWords+"\\-"+thisEndDirection,pureString=thisStartWords+"-"+thisEndDirection;let textBoo;textBoo=!1,s=s.replace(new RegExp("("+thisStandard+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)("+regexString+"\\s*\\:\\s*)([^;]*?)(;)","gis"),(match,p1,p2,p3,p4,p5)=>{const updated=String(String(p3+p4+p5).trim().replace(/;$/gi,"")+";").replace(new RegExp("("+regexString+"\\:\\s*)[^;]*?;","gis"),(match,p)=>p+thisMarginPadding[position]+";");return textBoo=!0,p1+p2+updated}),textBoo||(s=s.replace(new RegExp("("+thisStandard+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)","gis"),(match,p1)=>p1+"\n"+(pureString+": "+thisMarginPadding[position])+";")),targetChildren[i].style[position]=""}return s};styleTag.innerHTML=replaceTarget(styleTag.innerHTML,!0),outputTag.innerHTML=replaceTarget(outputTag.innerHTML,!0),currentCssText=replaceTarget(currentCssText,!1),targetChildren[i].style.alignItems="",targetChildren[i].style.textAlign="",targetChildren[i].style.justifyContent="",targetChildren[i].style.flexGrow="",targetChildren[i].style.flexShrink=""}PrettyCss.launching(currentCssText).then(c=>{const newState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:c}});cssEditorView.dispatch(newState)}).catch(e=>console.log(e))}for(let d of removeTargets)try{d.remove()}catch{}}),!linkBoo&&(e.shiftKey||e.metaKey||e.ctrlKey)&&target){const targetDropId=target.getAttribute("data-dropid");instance.shadowHistory((d,shadowIndex)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,childrenTarget=[...shadow.querySelector('[data-dropid="'+thisId+'"]').children].map(s=>s),targetMoved=shadow.querySelector('[data-dropid="'+targetDropId+'"]');if(targetMoved.removeAttribute("draggable"),targetMoved.removeAttribute("data-dropid"),targetMoved.style.animation="","p"===targetMoved.nodeName.toLowerCase()){const thisText=String(targetMoved.textContent).trim();targetMoved.remove();const currentChildrenList=[...childrenTarget[thisIndex].children].map(d=>d);for(let c of currentChildrenList)"p"===c.nodeName.toLowerCase()&&""===c.id.trim()&&0===[...c.classList].map(s=>s.trim()).filter(s=>!/____shadow__doms__tempclassname__temp____2?/gi.test(s)).length&&"string"==typeof c.textContent&&"기본 내용"===c.textContent.trim()&&(c.textContent=thisText)}else{childrenTarget[thisIndex].appendChild(targetMoved);const currentChildrenList=[...childrenTarget[thisIndex].children].map(d=>d);for(let c of currentChildrenList)"p"===c.nodeName.toLowerCase()&&""===c.id.trim()&&0===[...c.classList].map(s=>s.trim()).filter(s=>!/____shadow__doms__tempclassname__temp____2?/gi.test(s)).length&&"string"==typeof c.textContent&&"기본 내용"===c.textContent.trim()&&c.remove()}})}instance.nonMediaUpdate||(instance.nonMediaUpdateDone=!0),removeByClass("sizeBoxViewMainBoxClassName");try{instance.reverseSave()}catch{}linkBoo?instance.divideRowSizeBox(e,target).catch(e=>console.log(e)):(e.shiftKey||e.metaKey||e.ctrlKey)&&target&&instance.divideRowSizeBox(e,self).catch(e=>console.log(e))},sizeContextEvent=async e=>{e.stopPropagation(),e.preventDefault();const movementTarget=e.currentTarget.children[0].children[1],dashBox=movementTarget.children[0].children[0],originalCopied=movementTarget.previousElementSibling.children[0],realOriginal=thisSelf,copiedTarget=[...originalCopied.children][thisIndex],realTarget=[...realOriginal.children][thisIndex],originalBox=dashBox.getBoundingClientRect();let contextIndex,thisDarkPairIndex,pairBoo,thisShadowIndex;movementTarget.setAttribute("original_width",String(originalBox.width)),movementTarget.setAttribute("original_height",String(originalBox.height)),contextIndex=0,thisDarkPairIndex=1,pairBoo=!1,thisShadowIndex=-1,instance.shadowDoms.forEach((d,i)=>{if(null!==d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelector(".movementTargetClassName")){thisShadowIndex=i;const thisKind=d.mustAttribute("kind");contextIndex=/mobile/gi.test(thisKind)?0:/tablet/gi.test(thisKind)&&"bigTablet"!==thisKind?2:4,instance.isInDarkMode?(thisDarkPairIndex=contextIndex,contextIndex+=1):thisDarkPairIndex=contextIndex+1}});const contextResult=await contextmenuPopup(event,(popupBase,numbersDictionay)=>new Promise((resolve,reject)=>{const titleList=[{title:"수평 정렬",buttons:[{title:"왼쪽",event:async e=>{resolve("alignjustify")}},{title:"중앙",event:async e=>{resolve("aligncenter")}},{title:"오른쪽",event:async e=>{resolve("alignright")}}]},{title:"수직 정렬",buttons:[{title:"위쪽",event:async e=>{resolve("verticalstart")}},{title:"중앙",event:async e=>{resolve("verticalcenter")}},{title:"아래쪽",event:async e=>{resolve("verticalend")}}]},{title:"스타일",buttons:[{title:"테두리",event:async e=>{resolve("styleborder")}},{title:"모서리",event:async e=>{resolve("styleborderRadius")}},{title:"배경색",event:async e=>{resolve("stylebackground")}}]},{title:"조정",buttons:[{title:"여백 조정",event:async e=>{resolve("adjustmargin")}},{title:"Grow 조정",event:async e=>{resolve("adjustflex-grow")}},{title:"Shrink 조정",event:async e=>{resolve("adjustflex-shrink")}}]}];try{if(void 0===numbersDictionay)throw new Error("invalid context general status");let gap=numbersDictionay.gap,buttonHeight=numbersDictionay.buttonHeight,groupHeight=numbersDictionay.groupHeight,buttonSize=numbersDictionay.buttonSize,groupSize=numbersDictionay.groupSize,groupBetween=numbersDictionay.groupBetween,groupWeight=numbersDictionay.groupWeight,boldVisualTop=numbersDictionay.boldVisualTop,boldVisualRight=numbersDictionay.boldVisualRight,paddingTop=numbersDictionay.paddingTop,buttonWeight=numbersDictionay.buttonWeight;popupBase.style.paddingTop=String(paddingTop)+ea;for(let{title,buttons}of titleList)createAbstract({mother:popupBase,style:{display:"flex",justifyContent:"end",alignItems:"start",flexDirection:"column",height:groupHeight,width:withOut(0),marginBottom:groupBetween},child:{text:"<b%>%b> "+title,style:{display:"inline",position:"relative",fontSize:groupSize,fontWeight:groupWeight,color:colorChip.darkDarkBlack,fontFamily:"pretendard"},bold:{display:"inline",position:"relative",fontSize:groupSize,fontWeight:400,color:colorChip.mint,top:String(boldVisualTop)+ea,marginRight:String(boldVisualRight)+ea,fontFamily:"pretendard"}}}),createAbstract({mother:popupBase,style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap,width:withOut(0)},children:buttons.map(button=>({event:{click:e=>{const self=e.currentTarget,eventData={message:"next-click",timestamp:Date.now()},customEvent=new CustomEvent("nextclick",{detail:eventData,bubbles:!0,cancelable:!0});self.dispatchEvent(customEvent)},nextclick:button.event},style:{display:"inline-flex",justifyContent:"center",alignItems:"center",height:buttonHeight,borderRadius:desktop?5:1,background:instance.mintBlueColorsArr[titleList.findIndex(o=>o.title===title)],cursor:"pointer",transition:"all 0.3s ease"},child:{text:button.title,event:{selectstart:e=>e.preventDefault()},style:{fontSize:buttonSize,fontWeight:buttonWeight,color:colorChip.white,fontFamily:"pretendard"}}}))})}catch(e){reject(e)}}));if(/^align/gi.test(contextResult)){const shadow=targetShadow.querySelector("."+shadowDomTargetClassName).shadowRoot,thisSelf=shadow.querySelector('[data-dropid="'+thisId+'"]'),copiedSelf=shadow.querySelector(".movementTargetClassName").previousElementSibling.children[0],target0=thisSelf.children[thisIndex],target1=copiedSelf.children[thisIndex];thisTextAlign=contextResult.replace(/^align/gi,""),target0.style.textAlign=thisTextAlign,target1.style.textAlign=thisTextAlign,/justify/gis.test(thisTextAlign)?target1.style.alignItems="start":/right/gi.test(thisTextAlign)?target1.style.alignItems="end":target1.style.alignItems="center"}else if(/^vertical/gi.test(contextResult)){const shadow=targetShadow.querySelector("."+shadowDomTargetClassName).shadowRoot,thisSelf=shadow.querySelector('[data-dropid="'+thisId+'"]'),copiedSelf=shadow.querySelector(".movementTargetClassName").previousElementSibling.children[0],target0=thisSelf.children[thisIndex],target1=copiedSelf.children[thisIndex];thisJustifyContent=contextResult.replace(/^vertical/gi,""),target0.style.justifyContent=thisJustifyContent,target1.style.justifyContent=thisJustifyContent}else if(/^style/gi.test(contextResult)){let promptResult,promptResult2;if("styleborder"===contextResult?(promptResult=await colorPicker("테두리색을 알려주세요! (#000000 형식)"),null!==promptResult&&(/(black|검정|검은)/gi.test(promptResult)&&(promptResult="#000000"),/(white|하얀|흰)/gi.test(promptResult)&&(promptResult="#ffffff"),(""===promptResult||/(default|기본|없음)/gi.test(promptResult))&&(promptResult="#00ABC9"),promptResult="#"+promptResult.replace(/[^a-fA-F0-9]/gi,""),/\#[a-fA-F0-9][a-fA-F0-9][a-fA-F0-9][a-fA-F0-9][a-fA-F0-9][a-fA-F0-9]/gi.test(promptResult)||(promptResult=null)),promptResult2=""):"styleborderRadius"===contextResult?(promptResult=await promptPopup("모서리의 크기를 알려주세요! (숫자 형식)"),null!==promptResult&&(promptResult=promptResult.replace(/[^0-9\-\.]/gi,""),Number.isNaN(Number(promptResult))&&(promptResult=null)),promptResult2=""):(promptResult=await colorPicker("배경색을 알려주세요! (#000000 형식)"),null!==promptResult&&(promptResult="#"+promptResult.replace(/[^a-fA-F0-9]/gi,""),/\#[a-fA-F0-9][a-fA-F0-9][a-fA-F0-9][a-fA-F0-9][a-fA-F0-9][a-fA-F0-9]/gi.test(promptResult)||(promptResult=null)),promptResult2=await promptPopup("전체적으로 적용할까요?","select","전체$제목만")),"string"==typeof promptResult&&"string"==typeof promptResult2){instance.shadowHistory((d,shadowIndex)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,thisSelf=shadow.querySelector('[data-dropid="'+thisId+'"]'),childrenLength=thisSelf.children.length,removeTargets=[...shadow.querySelectorAll(".sizeBoxViewMainBoxClassName, .originalCopiedTempClassName")].map(d=>d);let siblingDoms,thisTarget,safeNum,i,j;for(siblingDoms=[],thisTarget=thisSelf,safeNum=0;null!==thisTarget&&/div/gi.test(thisTarget.nodeName)&&thisTarget.classList.contains(instance.divideRowClassName)&&childrenLength===thisTarget.children.length&&!(safeNum>100);){const t=thisTarget;for(siblingDoms.unshift(t),thisTarget=thisTarget.previousElementSibling;null!==thisTarget&&/abstract\-?div/gis.test(thisTarget.nodeName);)thisTarget=thisTarget.previousElementSibling;safeNum++}for(thisTarget=thisSelf.nextElementSibling;null!==thisTarget&&/abstract\-?div/gis.test(thisTarget.nodeName);)thisTarget=thisTarget.nextElementSibling;for(safeNum=0;null!==thisTarget&&/div/gi.test(thisTarget.nodeName)&&thisTarget.classList.contains(instance.divideRowClassName)&&childrenLength===thisTarget.children.length&&!(safeNum>100);){const t=thisTarget;for(siblingDoms.push(t),thisTarget=thisTarget.nextElementSibling;null!==thisTarget&&/abstract\-?div/gis.test(thisTarget.nodeName);)thisTarget=thisTarget.nextElementSibling;safeNum++}for(let d of removeTargets)try{d.remove()}catch{}if(i=0,j=0,"styleborder"===contextResult)for(const dom of siblingDoms){dom.style.borderTop="1px solid "+promptResult,dom.style.borderLeft="1px solid "+promptResult,dom.style.borderRight="1px solid "+promptResult,i===siblingDoms.length-1&&(dom.style.borderBottom="1px solid "+promptResult);const c=[...dom.children].map(d=>d);j=0;for(let cc of c){const rowDom=cc.children[0];rowDom.style.width="auto",rowDom.style.padding=String(.5)+"rem",cc.style.alignItems="center",rowDom.style.fontFamily="pretendard",rowDom.style.fontWeight=String(0===i?800:400),j!==c.length-1&&(cc.style.borderRight="1px solid "+promptResult),j++}i++}else if("styleborderRadius"===contextResult)for(const dom of siblingDoms)0===i?dom.style.borderTopLeftRadius=dom.style.borderTopRightRadius=String(promptResult)+"rem":i===siblingDoms.length-1&&(dom.style.borderBottomLeftRadius=dom.style.borderBottomRightRadius=String(promptResult)+"rem"),i++;else if(/제목/gi.test(promptResult2))for(const dom of siblingDoms)0===i&&(dom.style.background=promptResult),i++;else for(const dom of siblingDoms)dom.style.background=promptResult,i++}),removeByClass("sizeBoxViewMainBoxClassName");try{instance.reverseSave()}catch{}}}else if(/^adjust/gi.test(contextResult)){if("margin"===contextResult.replace(/^adjust/gi,"")){const marginPaddingBorderContext=await contextmenuPopup(event,popupBase=>new Promise((resolve,reject)=>{const computedStyle=window.getComputedStyle(realTarget);instance.marginPaddingBorderBox(realTarget,popupBase,computedStyle.marginTop,computedStyle.marginRight,computedStyle.marginBottom,computedStyle.marginLeft,computedStyle.paddingTop,computedStyle.paddingRight,computedStyle.paddingBottom,computedStyle.paddingLeft,async(mainBox,type,direction,value)=>(thisMarginPadding[type+capitalizeString(direction)]=value,!0),[copiedTarget],thisShadowIndex).then(s=>{resolve(s)}).catch(e=>reject(e))}));"end"===marginPaddingBorderContext&&(sizeBoxEndEvent(e),setTimeout(async()=>{await instance.divideRowSizeBox(originalBaseEvent,originalBaseSelf,!0)},10))}else{let promptResult;if(promptResult=await promptPopup("해당 값을 숫자로만 입력해주세요!"),null!==promptResult&&(promptResult=promptResult.replace(/[^0-9\-\.]/gi,""),Number.isNaN(Number(promptResult))&&(promptResult=null)),null!==promptResult){const shadow=targetShadow.querySelector("."+shadowDomTargetClassName).shadowRoot,thisSelf=shadow.querySelector('[data-dropid="'+thisId+'"]'),copiedSelf=shadow.querySelector(".movementTargetClassName").previousElementSibling.children[0],target0=thisSelf.children[thisIndex],target1=copiedSelf.children[thisIndex];/grow/gi.test(contextResult)?(thisFlexGrow=promptResult,target0.style.flexGrow=promptResult,target1.style.flexGrow=promptResult):(thisFlexShrink=promptResult,target0.style.flexShrink=promptResult,target1.style.flexShrink=promptResult)}}}},mousedownEvent=e=>{e.preventDefault();const clickArea=e.currentTarget,direction=Number(clickArea.getAttribute("direction")),whiteBox=clickArea.firstChild,dashBox=clickArea.parentElement.parentElement,movementTarget=dashBox.parentElement.parentElement,originalBox=dashBox.getBoundingClientRect(),originBox=movementTarget.getBoundingClientRect();if(originBox.top-10>e.clientY)sizeBoxEndEvent(e);else if(originBox.top+originBox.height+10<e.clientY)sizeBoxEndEvent(e);else{thisDirection=direction,boxMother=originalChildren[0].parentElement,motherBoxStatus=boxMother.getBoundingClientRect(),originalChildren=[...movementTarget.previousElementSibling.children[0].children].map(d=>d),shrinkZeroArr=[];for(let i=0;i<originalChildren.length;i++)originalChildren[i].style.transition="all 0s ease",i===thisIndex?shrinkZeroArr.push(0):""!==originalChildren[i].style.flexShrink.trim()?shrinkZeroArr.push(Number(originalChildren[i].style.flexShrink.replace(/[^0-9\.\-]/gis,""))):shrinkZeroArr.push(-1);shrinkZeroArr.every(n=>0===n)&&(thisIndex===originalChildren.length-1?0===shrinkZeroArr[originalChildren.length-2]&&(shrinkZeroArr[originalChildren.length-2]=1):shrinkZeroArr[originalChildren.length-1]=1),movementTarget.setAttribute("original_width",String(originalBox.width)),movementTarget.setAttribute("original_height",String(originalBox.height)),movementTarget.setAttribute("visual_y",String(e.clientY)),movementTarget.setAttribute("visual_x",String(e.clientX)),null===movementTarget.getAttribute("first_width")&&(movementTarget.setAttribute("first_width",String(originalBox.width)),movementTarget.setAttribute("first_height",String(originalBox.height))),movementTarget.setAttribute("final_direction",String(direction)),whiteBox.setAttribute("visual_y",String(e.clientY)),whiteBox.setAttribute("visual_x",String(e.clientX)),whiteBox.setAttribute("original_width",String(originalBox.width)),whiteBox.setAttribute("original_height",String(originalBox.height)),whiteBox.setAttribute("origin_width",String(originBox.width)),whiteBox.setAttribute("origin_height",String(originBox.height)),clickArea.style.width=pixelUnit(expandedArea),clickArea.style.height=pixelUnit(expandedArea),1===direction?(clickArea.style.top=pixelUnit(expandedArea/2*-1),clickArea.style.left=pixelUnit(expandedArea/2*-1)):2===direction?(clickArea.style.top=pixelUnit(expandedArea/2*-1),clickArea.style.left=cssCalc(String(50)+"%","-",expandedArea/2)):3===direction?(clickArea.style.top=pixelUnit(expandedArea/2*-1),clickArea.style.right=pixelUnit(expandedArea/2*-1)):4===direction?(clickArea.style.top=cssCalc(String(50)+"%","-",expandedArea/2),clickArea.style.left=pixelUnit(expandedArea/2*-1)):5===direction?(clickArea.style.top=cssCalc(String(50)+"%","-",expandedArea/2),clickArea.style.right=pixelUnit(expandedArea/2*-1)):6===direction?(clickArea.style.bottom=pixelUnit(expandedArea/2*-1),clickArea.style.left=pixelUnit(expandedArea/2*-1)):7===direction?(clickArea.style.bottom=pixelUnit(expandedArea/2*-1),clickArea.style.left=cssCalc(String(50)+"%","-",expandedArea/2)):8===direction&&(clickArea.style.bottom=pixelUnit(expandedArea/2*-1),clickArea.style.right=pixelUnit(expandedArea/2*-1))}},mousemoveEvent=e=>{if(1===e.buttons){e.preventDefault();const enSelf=e.currentTarget,[fromIndex,toIndex,linkBoo,target]=getFrontToIndex(e,enSelf),event=e,clickArea=e.currentTarget,direction=Number(clickArea.getAttribute("direction")),dashBox=clickArea.parentElement.parentElement,movementTarget=dashBox.parentElement.parentElement,whiteBoxes=[...dashBox.querySelectorAll(".pointWhiteBoxClassName")].map(d=>d),originalWidth=Number(movementTarget.getAttribute("original_width")),originalHeight=Number(movementTarget.getAttribute("original_height")),centerX=Number(movementTarget.getAttribute("visual_x")),centerY=Number(movementTarget.getAttribute("visual_y")),finalX=-1*(centerX-event.clientX),finalY=-1*(centerY-event.clientY);let finalNumber,standard,origin,thisTransform,scaleStatus,finalPercent,thisDashboardOrigin,leftPercent,finalHeight,finalTop,left=0;if(2===thisDirection||7===thisDirection){const originalCopied=movementTarget.previousElementSibling.children[0];movementTarget.style.transition="all 0s ease",originalCopied.parentElement.style.transition="all 0s ease",originalCopied.parentElement.parentElement.parentElement.style.transition="all 0s ease",originalCopied.style.transition="all 0s ease",2===thisDirection?(standard=originalHeight,finalNumber=1-finalY/standard,origin="50% 100%",finalHeight=finalNumber*standard,finalTop=originalHeight-finalHeight,thisTransform=transformCss({scaleY:finalNumber}),movementTarget.style.height=pixelUnit(finalHeight),originalCopied.parentElement.style.height=pixelUnit(finalHeight),originalCopied.parentElement.parentElement.parentElement.style.height=pixelUnit(finalHeight),originalCopied.style.height=pixelUnit(finalHeight)):(standard=originalHeight,finalNumber=1- -1*finalY/standard,finalHeight=finalNumber*standard,origin="50% 0%",thisTransform=transformCss({scaleY:finalNumber}),movementTarget.style.height=pixelUnit(finalHeight),originalCopied.parentElement.style.height=pixelUnit(finalHeight),originalCopied.parentElement.parentElement.parentElement.style.height=pixelUnit(finalHeight),originalCopied.style.height=pixelUnit(finalHeight));const d=targetShadow,shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,thisSelf=shadow.querySelector('[data-dropid="'+thisId+'"]'),styleTag=shadow.querySelector("style"),outputTag=shadow.querySelector("output"),thisKind=d.getAttribute("kind");let targetMediaQuery;targetMediaQuery=/mobile/gi.test(thisKind)?`@media (max-width: ${String(instance.standardPoint[0])}rem)`:/tablet/gi.test(thisKind)&&"bigTablet"!==thisKind?`@media (min-width: ${String(instance.standardPoint[0])}rem) and (max-width: ${String(instance.standardPoint[1])}rem)`:`@media (min-width: ${String(instance.standardPoint[1])}rem)`;const targetSelector="."+String([...thisSelf.classList].find(s=>new RegExp(instance.divideRowClassName+"_").test(s))),replaceTarget=(s,convertingMode=!1)=>{let thisStandard=targetMediaQuery;if(convertingMode){thisStandard=instance.mediaInPreview(thisKind,targetMediaQuery+"{}").replace(/\{\}$/gi,"").trim()}return s.replace(new RegExp("("+thisStandard.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(height\\s*\\:\\s*)([^;]*?)(;)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+String(String(p3+p4+p5).trim().replace(/;$/gi,"")+";").replace(/(height\:\s*)[^;]*?;/gis,(match,p)=>p+pixelUnit(finalHeight).replace(/;$/gi,"")+";"))};styleTag.innerHTML=replaceTarget(styleTag.innerHTML,!0),outputTag.innerHTML=replaceTarget(outputTag.innerHTML,!0)}else{if(origin=dashBox.getAttribute("origin"),standard=originalWidth,finalNumber=1===direction?1-finalX/standard:3===direction?1- -1*finalX/standard:4===direction?1-finalX/standard:5===direction?1- -1*finalX/standard:6===direction?1-1*finalX/standard:1- -1*finalX/standard,thisTransform=transformCss({scaleX:finalNumber}),movementTarget.setAttribute("final_scale",thisTransform),movementTarget.setAttribute("final_origin",origin),scaleStatus=thisTransform,finalPercent=String(dashBox.getBoundingClientRect().width*Number(scaleStatus.replace(/[^0-9\.\-]/gi,""))/movementTarget.getBoundingClientRect().width*100)+"%",thisIndex===originalChildren.length-1)for(let i=0;i<originalChildren.length;i++)if(i===thisIndex){const computedStyle=window.getComputedStyle(originalChildren[i]);/border\-box/gis.test(computedStyle.boxSizing)?originalChildren[i].style.width=finalPercent:originalChildren[i].style.width=cssCalc(cssCalc(finalPercent,"-",computedStyle.paddingLeft),"-",computedStyle.paddingRight),originalChildren[i].style.width=cssCalc(cssCalc(finalPercent,"-",computedStyle.paddingLeft),"-",computedStyle.paddingRight),originalChildren[i].style.flexShrink=String(0),originalChildren[i].style.flexGrow=String(0)}else{const zeroBoo=-1!==shrinkZeroArr[i];originalChildren[i].style.flexShrink=String(zeroBoo?shrinkZeroArr[i]:1),originalChildren[i].style.flexGrow=String(zeroBoo?shrinkZeroArr[i]:1)}else for(let i=0;i<originalChildren.length;i++)if(i===thisIndex){const computedStyle=window.getComputedStyle(originalChildren[i]);/border\-box/gis.test(computedStyle.boxSizing)?originalChildren[i].style.width=finalPercent:originalChildren[i].style.width=cssCalc(cssCalc(finalPercent,"-",computedStyle.paddingLeft),"-",computedStyle.paddingRight),originalChildren[i].style.flexShrink=String(0),originalChildren[i].style.flexGrow=String(0)}else{const zeroBoo=-1!==shrinkZeroArr[i];i<thisIndex?(originalChildren[i].style.flexShrink=String(zeroBoo?shrinkZeroArr[i]:0),originalChildren[i].style.flexGrow=String(zeroBoo?shrinkZeroArr[i]:0)):(originalChildren[i].style.flexShrink=String(zeroBoo?shrinkZeroArr[i]:1),originalChildren[i].style.flexGrow=String(zeroBoo?shrinkZeroArr[i]:1))}left=0;for(let i=0;i<originalChildren.length&&i!==thisIndex;i++)left+=originalChildren[i].getBoundingClientRect().width;if(leftPercent=String(left/motherBoxStatus.width*100)+"%",thisDashboardOrigin="0% 50%",thisDashboardOrigin=Number(dashBox.getAttribute("main-index"))===originalChildren.length-1?"100% 50%":0===Number(dashBox.getAttribute("main-index"))?"0% 50%":leftPercent+" 50%",dashBox.classList.add("dashBoxSizeClassName_moving"),movementTarget.style.transformOrigin=thisDashboardOrigin,movementTarget.style.transform=thisTransform,whiteBoxes.forEach(d=>{d.style.transform=transformCss({scaleX:1/finalNumber})}),0!==fromIndex||0!==toIndex){let widthArr,left=0;left=0;for(let i=0;i<originalChildren.length&&i!==thisIndex;i++)left+=originalChildren[i].getBoundingClientRect().width;widthArr=[];for(let i=0;i<originalChildren.length;i++)widthArr.push(String(originalChildren[i].getBoundingClientRect().width/boxMother.getBoundingClientRect().width*100)+"%");const d=targetShadow,shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,thisSelf=shadow.querySelector('[data-dropid="'+thisId+'"]'),styleTag=shadow.querySelector("style"),outputTag=shadow.querySelector("output"),thisKind=d.getAttribute("kind");let targetMediaQuery;if(Math.round(thisSelf.getBoundingClientRect().height)!==pastGhostHeight){tongHeightNumbersLoad();const ghostTong=getGhostTong(getParentMainTong(enSelf)),ghostIndex=Number(ghostTong.getAttribute("index"));ghostTong.style.top=pixelUnit(topNumbers[ghostIndex]*(1/instance.previewZoomLevel)),ghostTong.style.height=pixelUnit(heightNumbers[ghostIndex]*(1/instance.previewZoomLevel)),ghostTong.setAttribute("this_top",String(topNumbers[ghostIndex]*(1/instance.previewZoomLevel))),ghostTong.setAttribute("this_height",String(heightNumbers[ghostIndex]*(1/instance.previewZoomLevel)))}if(pastGhostHeight=Math.round(thisSelf.getBoundingClientRect().height),targetMediaQuery=/mobile/gi.test(thisKind)?`@media (max-width: ${String(instance.standardPoint[0])}rem)`:/tablet/gi.test(thisKind)&&"bigTablet"!==thisKind?`@media (min-width: ${String(instance.standardPoint[0])}rem) and (max-width: ${String(instance.standardPoint[1])}rem)`:`@media (min-width: ${String(instance.standardPoint[1])}rem)`,0!==widthArr.length&&""!==targetMediaQuery){let thisTarget;for(let z=fromIndex;z<=toIndex;z++){if(thisTarget=thisSelf,z<0)for(let k=0;k<Math.abs(z)&&null!==thisTarget.previousElementSibling;k++)thisTarget=thisTarget.previousElementSibling,!thisTarget.classList.contains("____shadow__doms__tempclassname__temp____2")&&thisTarget.classList.contains(instance.divideRowClassName)||(thisTarget=thisTarget.previousElementSibling);else if(z>0)for(let k=0;k<Math.abs(z)&&null!==thisTarget.nextElementSibling;k++)thisTarget=thisTarget.nextElementSibling,!thisTarget.classList.contains("____shadow__doms__tempclassname__temp____2")&&thisTarget.classList.contains(instance.divideRowClassName)||(thisTarget=thisTarget.nextElementSibling);if(widthArr.length===thisTarget.children.length){const thisClassTarget=String([...thisTarget.classList].find(s=>new RegExp(instance.divideRowClassName+"_").test(s))).replace(/_/g,"_column_"),targetChildren=[...thisTarget.children].map(d=>d);for(let i=0;i<targetChildren.length;i++){const targetSelector="."+thisClassTarget+"_"+ordinalNumber(i+1),replaceTarget=(s,convertingMode=!1)=>{let thisStandard=targetMediaQuery;if(convertingMode){thisStandard=instance.mediaInPreview(thisKind,targetMediaQuery+"{}").replace(/\{\}$/gi,"").trim()}return s.replace(new RegExp("("+thisStandard.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(width\\s*\\:\\s*)([^;]*?)(;)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+String(String(p3+p4+p5).trim().replace(/;$/gi,"")+";").replace(/(width\:\s*)[^;]*?;/gis,(match,p)=>p+widthArr[i].replace(/;$/gi,"")+";"))};styleTag.innerHTML=replaceTarget(styleTag.innerHTML,!0),outputTag.innerHTML=replaceTarget(outputTag.innerHTML,!0)}}}}}}}},mouseupEvent=e=>{e.preventDefault();const clickAreaDom=e.currentTarget,direction=Number(clickAreaDom.getAttribute("direction")),whiteBox=clickAreaDom.firstChild,dashBox=clickAreaDom.parentElement.parentElement,movementTarget=dashBox.parentElement.parentElement;movementTarget.previousElementSibling.children[0];if(whiteBox.removeAttribute("visual_y"),whiteBox.removeAttribute("visual_x"),dashBox.classList.remove("dashBoxSizeClassName_moving"),clickAreaDom.style.width=pixelUnit(clickArea),clickAreaDom.style.height=pixelUnit(clickArea),1===direction?(clickAreaDom.style.top=pixelUnit(clickArea/2*-1),clickAreaDom.style.left=pixelUnit(clickArea/2*-1)):2===direction?(clickAreaDom.style.top=pixelUnit(clickArea/2*-1),clickAreaDom.style.left=cssCalc(String(50)+"%","-",clickArea/2)):3===direction?(clickAreaDom.style.top=pixelUnit(clickArea/2*-1),clickAreaDom.style.right=pixelUnit(clickArea/2*-1)):4===direction?(clickAreaDom.style.top=cssCalc(String(50)+"%","-",clickArea/2),clickAreaDom.style.left=pixelUnit(clickArea/2*-1)):5===direction?(clickAreaDom.style.top=cssCalc(String(50)+"%","-",clickArea/2),clickAreaDom.style.right=pixelUnit(clickArea/2*-1)):6===direction?(clickAreaDom.style.bottom=pixelUnit(clickArea/2*-1),clickAreaDom.style.left=pixelUnit(clickArea/2*-1)):7===direction?(clickAreaDom.style.bottom=pixelUnit(clickArea/2*-1),clickAreaDom.style.left=cssCalc(String(50)+"%","-",clickArea/2)):8===direction&&(clickAreaDom.style.bottom=pixelUnit(clickArea/2*-1),clickAreaDom.style.right=pixelUnit(clickArea/2*-1)),2!==thisDirection&&7!==thisDirection){if(null!==movementTarget.getAttribute("final_scale")){const scaleStatus=movementTarget.getAttribute("final_scale"),whiteBoxes=[...dashBox.querySelectorAll(".pointWhiteBoxClassName")].map(d=>d),finalPercent=String(dashBox.getBoundingClientRect().width*Number(scaleStatus.replace(/[^0-9\.\-]/gi,""))/movementTarget.getBoundingClientRect().width*100)+"%",boxMother=originalChildren[0].parentElement,motherBoxStatus=boxMother.getBoundingClientRect();let leftPercent,widthArr,left=0;if(thisIndex===originalChildren.length-1)for(let i=0;i<originalChildren.length;i++)if(i===thisIndex){const computedStyle=window.getComputedStyle(originalChildren[i]);/border\-box/gis.test(computedStyle.boxSizing)?originalChildren[i].style.width=finalPercent:originalChildren[i].style.width=cssCalc(cssCalc(finalPercent,"-",computedStyle.paddingLeft),"-",computedStyle.paddingRight),originalChildren[i].style.flexShrink=String(0),originalChildren[i].style.flexGrow=String(0)}else{const zeroBoo=-1!==shrinkZeroArr[i];originalChildren[i].style.flexShrink=String(zeroBoo?shrinkZeroArr[i]:1),originalChildren[i].style.flexGrow=String(zeroBoo?shrinkZeroArr[i]:1)}else for(let i=0;i<originalChildren.length;i++)if(i===thisIndex){const computedStyle=window.getComputedStyle(originalChildren[i]);/border\-box/gis.test(computedStyle.boxSizing)?originalChildren[i].style.width=finalPercent:originalChildren[i].style.width=cssCalc(cssCalc(finalPercent,"-",computedStyle.paddingLeft),"-",computedStyle.paddingRight),originalChildren[i].style.flexShrink=String(0),originalChildren[i].style.flexGrow=String(0)}else{const zeroBoo=-1!==shrinkZeroArr[i];i<thisIndex?(originalChildren[i].style.flexShrink=String(zeroBoo?shrinkZeroArr[i]:0),originalChildren[i].style.flexGrow=String(zeroBoo?shrinkZeroArr[i]:0)):(originalChildren[i].style.flexShrink=String(zeroBoo?shrinkZeroArr[i]:1),originalChildren[i].style.flexGrow=String(zeroBoo?shrinkZeroArr[i]:1))}left=0;for(let i=0;i<originalChildren.length&&i!==thisIndex;i++)left+=originalChildren[i].getBoundingClientRect().width;widthArr=[];for(let i=0;i<originalChildren.length;i++){const computedStyle=window.getComputedStyle(originalChildren[i]),thisPercentNumber=originalChildren[i].getBoundingClientRect().width/boxMother.getBoundingClientRect().width*100,thisPercent=String(Math.round(1e3*thisPercentNumber)/1e3)+"%";/border\-box/gis.test(computedStyle.boxSizing)?widthArr.push(thisPercent):widthArr.push(cssCalc(thisPercent,"-",instance.pixelToRemCalc([computedStyle.paddingRight,computedStyle.paddingLeft],"+")))}leftPercent=String(left/motherBoxStatus.width*100)+"%",movementTarget.style.transform="",dashBox.style.transformOrigin="",dashBox.style.transform="",dashBox.style.width=finalPercent,dashBox.style.left=leftPercent,whiteBoxes.forEach(d=>{d.style.transform=transformCss({scale:1})}),movementTarget.setAttribute("width_arr",JSON.stringify(widthArr))}}else finalHeightString=movementTarget.style.height,movementTarget.setAttribute("final_height",movementTarget.style.height)},mainTong=createAbstract({mother:self,class:["sizeBoxViewMainBoxClassName"],event:{click:sizeBoxEndEvent,dragstart$drop$selectstart$click$contextmenu$dblclick:e=>{e.preventDefault(),e.stopPropagation()}},attribute:{draggable:"false"},style:{position:"absolute",top:topPaddingTop*(1/instance.previewZoomLevel)*-1,left:0,width:String(100)+"vw",height:cssCalc(String(100)+"vh","+",pixelUnit(heightNumbers.reduce((acc,curr)=>acc+curr,0))),background:colorChip.transparent,zIndex:1},child:{attribute:{draggable:"false"},event:{click:sizeBoxEndEvent,dragstart$drop$selectstart$click$contextmenu$dblclick:e=>{e.preventDefault(),e.stopPropagation()}},style:{position:"relative",width:thisSelfFirstWidth*(1/instance.previewZoomLevel),height:withOut(0),display:"block"},children:variableArray(heightNumbers.length).map(i=>{const targetOn=selfNumber===i,event={dragstart$drop$selectstart$click$contextmenu$dblclick:e=>{e.preventDefault(),e.stopPropagation()},mousedown:mousedownEvent,mousemove:mousemoveEvent,mouseup:mouseupEvent};return targetOn&&(pastGhostHeight=Math.round(heightNumbers[i])),{class:["ghostChildrenClassName"],attribute:{toggle:targetOn?"on":"off",draggable:"false",index:String(i),this_top:String(topNumbers[i]),this_height:String(heightNumbers[i])},event:targetOn?{click:e=>{e.stopPropagation()},contextmenu$dblclick:sizeContextEvent}:{click:sizeBoxEndEvent},style:{display:targetOn?"flex":"none",position:"absolute",top:cssCalc(pixelUnit(topNumbers[i]),"*",1/instance.previewZoomLevel),left:pixelUnit(thisSelfFirstLeft),width:thisSelfFirstWidth*(1/instance.previewZoomLevel),height:cssCalc(pixelUnit(heightNumbers[i]),"*",1/instance.previewZoomLevel),background:colorChip.transparent},child:{attribute:{draggable:"false",index:String(i)},event:targetOn?{click:e=>{e.stopPropagation()}}:{click:sizeBoxEndEvent},style:{position:"relative",width:withOut(0),height:withOut(0),background:instance.isInDarkMode?"black":"white"},child:{attribute:{draggable:"false",index:String(i),first_width:String(thisBaseWidth),first_height:String(thisBaseHeight)},event:{click:e=>{e.stopPropagation()}},class:["movementTargetClassName"],style:{position:"absolute",width:withOut(0),height:withOut(0),background:colorChip.transparent},child:{attribute:{draggable:"false",index:String(i)},event:{click:e=>{e.stopPropagation();const movedX=e.clientX,motherBoxStatus=(e.clientY,originalChildren[0].parentElement.getBoundingClientRect()),dashBox=mainTong.querySelector(".dashBoxSizeClassName");let i,left,thisPercent,leftPercent,thisWidth;i=0,left=0,thisWidth=0;for(let d of originalChildren){const thisBox=d.getBoundingClientRect();if(0!==i&&(left+=thisWidth),thisWidth=thisBox.width,thisBox.x<=movedX&&movedX<thisBox.x+thisBox.width)break;i++}thisIndex=i,thisPercent=String(thisWidth/motherBoxStatus.width*100)+"%",leftPercent=String(left/motherBoxStatus.width*100)+"%",dashBox.style.width=thisPercent,dashBox.style.left=leftPercent,dashBox.setAttribute("main-index",String(thisIndex)),dashBox.setAttribute("origin",leftPercent+" 50%")}},style:{position:"relative",width:withOut(0),height:withOut(0),background:colorChip.transparent},child:{attribute:{draggable:"false",index:String(i),origin:"0% 50%","main-index":String(thisIndex)},event:targetOn?{click:e=>{if(e.stopPropagation(),e.shiftKey||e.metaKey||e.ctrlKey){e.clientX;const movedY=e.clientY,targetChildren=[...originalChildren[thisIndex].children].map(d=>d);let minusTarget,minusIndex,i;if(targetChildren.length>1){minusTarget=null,minusIndex=0,i=0;for(let d of targetChildren){const thisBox=d.getBoundingClientRect();thisBox.top<=movedY&&movedY<=thisBox.top+thisBox.height&&(minusTarget=d,minusIndex=i),i++}if(null!==minusTarget){const nowValue=(new Date).valueOf(),dropId=instance.dropAreaTempDomClassName+"_"+String(1e7*nowValue+Math.round(1e7*Math.random()));instance.shadowHistory((d,shadowIndex)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,thisSelf=shadow.querySelector('[data-dropid="'+thisId+'"]'),childrenChildren=[...[...thisSelf.children].map(s=>s)[thisIndex].children].map(s=>s),removeTargets=[...shadow.querySelectorAll(".sizeBoxViewMainBoxClassName, .originalCopiedTempClassName")].map(d=>d),targetMoved=childrenChildren[minusIndex];thisSelf.insertAdjacentElement("afterend",targetMoved),targetMoved.setAttribute("draggable","true"),targetMoved.setAttribute("data-dropid",dropId),targetMoved.style.animation="",instance.domToEventSet(targetMoved,0,360,!1);for(let d of removeTargets)try{d.remove()}catch{}}),removeByClass("sizeBoxViewMainBoxClassName");try{instance.reverseSave()}catch{}instance.divideRowSizeBox(e,self).catch(e=>console.log(e))}}}}}:{click:sizeBoxEndEvent},class:["dashBoxSizeClassName"],style:{position:"absolute",top:0,left:firstLeftPercent,width:firstWidthPercent,height:withOut(0),opacity:targetOn?1:0,boxSizing:"border-box"},children:targetOn?[{style:{display:"block",position:"relative",top:0,left:0,width:withOut(0),height:withOut(0)},children:[{class:["pointWhiteBoxClassName"],attribute:{direction:String(1)},event:{...event},style:{...clickBox,top:clickArea/2*-1,left:clickArea/2*-1,cursor:"nwse-resize"},child:{style:whiteBox}},{class:["pointWhiteBoxClassName"],attribute:{direction:String(2)},event:{...event},style:{...clickBox,top:clickArea/2*-1,left:cssCalc(String(50)+"%","-",clickArea/2),cursor:"ns-resize"},child:{style:whiteBox}},{class:["pointWhiteBoxClassName"],attribute:{direction:String(3)},event:{...event},style:{...clickBox,top:clickArea/2*-1,right:clickArea/2*-1,cursor:"nesw-resize"},child:{style:whiteBox}},{class:["pointWhiteBoxClassName"],attribute:{direction:String(4)},event:{...event},style:{...clickBox,top:cssCalc(String(50)+"%","-",clickArea/2),left:clickArea/2*-1,cursor:"ew-resize"},child:{style:whiteBox}},{class:["pointWhiteBoxClassName"],attribute:{direction:String(5)},event:{...event},style:{...clickBox,top:cssCalc(String(50)+"%","-",clickArea/2),right:clickArea/2*-1,cursor:"ew-resize"},child:{style:whiteBox}},{class:["pointWhiteBoxClassName"],attribute:{direction:String(6)},event:{...event},style:{...clickBox,bottom:clickArea/2*-1,left:clickArea/2*-1,cursor:"nesw-resize"},child:{style:whiteBox}},{class:["pointWhiteBoxClassName"],attribute:{direction:String(7)},event:{...event},style:{...clickBox,bottom:clickArea/2*-1,left:cssCalc(String(50)+"%","-",clickArea/2),cursor:"ns-resize"},child:{style:whiteBox}},{class:["pointWhiteBoxClassName"],attribute:{direction:String(8)},event:{...event},style:{...clickBox,bottom:clickArea/2*-1,right:clickArea/2*-1,cursor:"nwse-resize"},child:{style:whiteBox}}]}]:[]}},previous:{mode:"div",style:{width:withOut(0),height:withOut(0)}}}}}})}});self.insertAdjacentElement("afterend",mainTong);const rTargets=[...mainTong.querySelectorAll(".ghostChildrenClassName")].map(d=>d);for(let r of rTargets)"on"!==r.getAttribute("toggle")&&r.remove();const movementTarget=mainTong.querySelector(".movementTargetClassName"),originalRatio=thisSelfFirstHeight/thisSelfFirstWidth,originalCopied=self.cloneNode(!0),shellDiv=movementTarget.previousElementSibling;originalCopied.style.margin=String(0),originalCopied.removeAttribute("data-pindex"),originalCopied.removeAttribute("data-dropid"),originalCopied.id="";const originChildren=[...originalCopied.children].map(d=>d);originalCopied.style.transition="all 0s ease";for(let c of originChildren)c.style.transition="all 0s ease";if(shellDiv.style.position="relative",shellDiv.style.transition="all 0s ease",shellDiv.style.width=String(100)+"%",shellDiv.style.height=pixelUnit(thisSelfFirstHeight),shellDiv.setAttribute("original-ratio",String(originalRatio)),shellDiv.appendChild(originalCopied),originalChildren=[...originalCopied.children].map(d=>d),againMarginPopupMode){const realTarget=originChilds[thisIndex],copiedTarget=originChildren[thisIndex];if("end"===await contextmenuPopup(event,popupBase=>new Promise((resolve,reject)=>{const computedStyle=window.getComputedStyle(realTarget);instance.marginPaddingBorderBox(realTarget,popupBase,computedStyle.marginTop,computedStyle.marginRight,computedStyle.marginBottom,computedStyle.marginLeft,computedStyle.paddingTop,computedStyle.paddingRight,computedStyle.paddingBottom,computedStyle.paddingLeft,async mainBox=>!0,[copiedTarget]).then(s=>{resolve(s)}).catch(e=>reject(e))})))mainTong.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0})),setTimeout(async()=>{await instance.divideRowSizeBox(originalBaseEvent,originalBaseSelf,!0)},10);else{instance.shadowDoms.forEach((d,shadowIndex)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,removeTargets=(shadow.querySelector('[data-dropid="'+thisId+'"]'),[...shadow.querySelectorAll(".sizeBoxViewMainBoxClassName, .originalCopiedTempClassName")].map(d=>d));for(let d of removeTargets)try{d.remove()}catch{}}),removeByClass("sizeBoxViewMainBoxClassName");try{instance.reverseSave()}catch{}}}}catch(e){console.log(e)}};flexSizeBox=async(event,flexItem)=>{const instance=this,{totalContents,shadowDomTargetClassName}=this,{colorChip,svgMaker:localSvgMaker,binaryPath}=PathAnimator,{withOut,percent,markdownBlocks,linkToString,transformCss,colorPicker,contextmenuPopup,promptPopup,stringToLink,ordinalNumber,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(),baseOriginalEvent=event,baseOriginalItem=flexItem,pointWhiteBoxClassName="flexBoxPointWhiteBoxClassName",excludes=["PRE","CODE","STYLE","OUTPUT","SCRIPT","TEXTAREA","ARTICLE","ASIDE"];try{const self=flexItem,thisSelf=flexItem,targetShadow=instance.shadowDoms.find(d=>[...d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelectorAll(thisSelf.nodeName)].includes(thisSelf)),scrollTopStandard=targetShadow.children[0]?.children[0]?.children[0],thisSelfComputedStyle=window.getComputedStyle(thisSelf),thisId=thisSelf.getAttribute("data-dropid"),topPaddingTop=Number.isNaN(Number((targetShadow.children[0]?.children[0]).style.paddingTop.replace(/[^0-9]/gi,"")))?0:Number((targetShadow.children[0]?.children[0]).style.paddingTop.replace(/[^0-9]/gi,"")),thisBaseWidth=targetShadow.querySelector("."+shadowDomTargetClassName).getBoundingClientRect().width,thisSelfFirstWidth=thisSelf.getBoundingClientRect().width,thisSelfFirstHeight=(thisSelf.children[0].getBoundingClientRect().width,thisSelf.getBoundingClientRect().height),thisBaseHeight=thisBaseWidth*(thisSelfFirstHeight/thisSelfFirstWidth),thisSelfFirstLeft=/center/gi.test(thisSelfComputedStyle.alignItems)?(thisBaseWidth-thisSelfFirstWidth)/2:/end/gi.test(thisSelfComputedStyle.alignItems)?thisBaseWidth-thisSelfFirstWidth:0,zIndex=4,movedX=(scrollTopStandard.getBoundingClientRect().top,event.clientX);event.clientY;[...thisSelf.children].map(d=>d);let pastHeight,thisUpStandard,thisDownStandard,thisStandard,previousDoms,nextDoms,siblingDoms,topNumbers,heightNumbers,selfNumber,boxWidth,boxRadius,lineWidth,lineColor,clickArea,whiteBox,clickBox,expandedArea,thisMode,originChilds,shrinkZeroArr,i,left,thisWidth,thisDirection,finalHeightString,thisTextAlign,thisJustifyContent,pastGhostHeight,originalChildren=[...thisSelf.children].map(d=>d),thisIndex=(originalChildren[0].parentElement.getBoundingClientRect(),0);shrinkZeroArr=[],thisDirection=0,finalHeightString="",thisTextAlign="",thisJustifyContent="",pastGhostHeight=0,boxWidth=mediaNumber(10,10,10,8,2),boxRadius=mediaNumber(3,3,3,3,1),lineWidth=1,lineColor=colorChip.mint,clickArea=4*boxWidth,expandedArea=60*boxWidth,siblingDoms=[],topNumbers=[],heightNumbers=[],pastHeight="",self.style.height&&(pastHeight=self.style.height),instance.shadowDoms.forEach(d=>{const host=d.querySelector("."+shadowDomTargetClassName);if(targetShadow===d){const thisKind=targetShadow.mustAttribute("kind");let i;i=/mobile/gi.test(thisKind)?0:/tablet/gi.test(thisKind)&&"bigTablet"!==thisKind?1:2,thisMode=i}host.style.overflow="visible"}),i=0,left=0,thisWidth=0;for(let d of originalChildren){const thisBox=d.getBoundingClientRect();if(0!==i&&(left+=thisWidth),thisWidth=thisBox.width,thisBox.x<=movedX&&movedX<thisBox.x+thisBox.width){thisIndex=i;break}i++}const tongHeightNumbersLoad=()=>{if(originChilds=[...thisSelf.children].map(d=>d),void 0===originChilds[thisIndex])throw new Error("invalid status");const cStyle=window.getComputedStyle(originChilds[thisIndex]);String(Number(cStyle.width.replace(/[^0-9\.\-]/gi,""))/thisSelf.getBoundingClientRect().width*100),String(left/thisSelf.getBoundingClientRect().width*100);for(clickBox={position:"absolute",width:clickArea,height:clickArea,display:"inline-flex",justifyContent:"center",alignItems:"center",background:colorChip.transparent,zIndex,transformOrigin:"50% 50%"},whiteBox={width:boxWidth,height:boxWidth,borderRadius:boxRadius,border:String(lineWidth)+"px solid "+lineColor,boxSizing:"border-box",background:colorChip.white,cursor:"inherit",transformOrigin:"50% 50%"},previousDoms=[],nextDoms=[],previousDoms=[],nextDoms=[],thisUpStandard=self,thisDownStandard=self,thisStandard=self;null!==thisUpStandard.previousElementSibling;)previousDoms.unshift(thisUpStandard.previousElementSibling),thisUpStandard=thisUpStandard.previousElementSibling;for(;null!==thisDownStandard.nextElementSibling;)nextDoms.push(thisDownStandard.nextElementSibling),thisDownStandard=thisDownStandard.nextElementSibling;siblingDoms=[];for(let d of previousDoms)excludes.includes(d.nodeName.toUpperCase())||siblingDoms.push(d);siblingDoms.push(self),selfNumber=siblingDoms.length-1;for(let d of nextDoms)excludes.includes(d.nodeName.toUpperCase())||siblingDoms.push(d);topNumbers=siblingDoms.map(d=>self.getBoundingClientRect().top-scrollTopStandard.getBoundingClientRect().top+d.getBoundingClientRect().top-self.getBoundingClientRect().top+scrollTopStandard.scrollTop+topPaddingTop-scrollTopStandard.scrollTop),heightNumbers=siblingDoms.map(d=>d.getBoundingClientRect().height)};if(originChilds=[...thisSelf.children].map(d=>d),void 0===originChilds[thisIndex])throw new Error("invalid status");window.getComputedStyle(originChilds[thisIndex]);tongHeightNumbersLoad();siblingDoms.filter(d=>!d.classList.contains("____shadow__doms__tempclassname__temp____2")).findIndex(d=>d===self);const sizeBoxEndEvent=e=>{e.stopPropagation(),instance.shadowHistory((d,shadowIndex)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,removeTargets=(shadow.querySelector('[data-dropid="'+thisId+'"]').children.length,[...shadow.querySelectorAll(".flexSizeMainBoxClassName, .flexBoxoriginalCopiedTempClassName")].map(d=>d));for(let d of removeTargets)try{d.remove()}catch{}}),removeByClass("flexSizeMainBoxClassName");try{instance.reverseSave()}catch{}},sizeContextEvent=async e=>{e.stopPropagation(),e.preventDefault();const contextResult=await contextmenuPopup(event,(popupBase,numbersDictionay)=>new Promise((resolve,reject)=>{const titleList=[{title:"폰트 관리",buttons:[{title:"문단 테두리",event:async e=>{resolve("paragraphborder")}},{title:"폰트 조정",event:async e=>{resolve("paragraphfont")}},{title:"간격 조정",event:async e=>{resolve("paragraphspacing")}}]}];try{if(void 0===numbersDictionay)throw new Error("invalid context general status");let gap=numbersDictionay.gap,buttonHeight=numbersDictionay.buttonHeight,groupHeight=numbersDictionay.groupHeight,buttonSize=numbersDictionay.buttonSize,groupSize=numbersDictionay.groupSize,groupBetween=numbersDictionay.groupBetween,groupWeight=numbersDictionay.groupWeight,boldVisualTop=numbersDictionay.boldVisualTop,boldVisualRight=numbersDictionay.boldVisualRight,paddingTop=numbersDictionay.paddingTop,buttonWeight=numbersDictionay.buttonWeight;popupBase.style.paddingTop=String(paddingTop)+ea;for(let{title,buttons}of titleList)createAbstract({mother:popupBase,style:{display:"flex",justifyContent:"end",alignItems:"start",flexDirection:"column",height:groupHeight,width:withOut(0),marginBottom:groupBetween},child:{text:"<b%>%b> "+title,style:{display:"inline",position:"relative",fontSize:groupSize,fontWeight:groupWeight,color:colorChip.darkDarkBlack,fontFamily:"pretendard"},bold:{display:"inline",position:"relative",fontSize:groupSize,fontWeight:400,color:colorChip.mint,top:String(boldVisualTop)+ea,marginRight:String(boldVisualRight)+ea,fontFamily:"pretendard"}}}),createAbstract({mother:popupBase,style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap,width:withOut(0)},children:buttons.map(button=>({event:{click:e=>{const self=e.currentTarget,eventData={message:"next-click",timestamp:Date.now()},customEvent=new CustomEvent("nextclick",{detail:eventData,bubbles:!0,cancelable:!0});self.dispatchEvent(customEvent)},nextclick:button.event},style:{display:"inline-flex",justifyContent:"center",alignItems:"center",height:buttonHeight,borderRadius:desktop?5:1,background:instance.mintBlueColorsArr[titleList.findIndex(o=>o.title===title)],cursor:"pointer",transition:"all 0.3s ease"},child:{text:button.title,event:{selectstart:e=>e.preventDefault()},style:{fontSize:buttonSize,fontWeight:buttonWeight,color:colorChip.white,fontFamily:"pretendard"}}}))})}catch(e){reject(e)}}));if(/^align/gi.test(contextResult)){instance.shadowHistory((d,shadowIndex)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,thisSelf=shadow.querySelector('[data-dropid="'+thisId+'"]'),removeTargets=(thisSelf.children.length,[...shadow.querySelectorAll(".flexSizeMainBoxClassName, .flexBoxoriginalCopiedTempClassName")].map(d=>d)),computedStyle=window.getComputedStyle(thisSelf);/row/gis.test(computedStyle.flexDirection)?thisSelf.style.justifyContent=contextResult.replace(/^align/gi,"").toLowerCase():thisSelf.style.alignItems=contextResult.replace(/^align/gi,"").toLowerCase();for(let d of removeTargets)try{d.remove()}catch{}}),removeByClass("flexSizeMainBoxClassName");try{instance.reverseSave()}catch{}setTimeout(async()=>{await instance.flexSizeBox(baseOriginalEvent,baseOriginalItem)},100)}else if(/^vertical/gi.test(contextResult)){instance.shadowHistory((d,shadowIndex)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,thisSelf=shadow.querySelector('[data-dropid="'+thisId+'"]'),removeTargets=(thisSelf.children.length,[...shadow.querySelectorAll(".flexSizeMainBoxClassName, .flexBoxoriginalCopiedTempClassName")].map(d=>d)),computedStyle=window.getComputedStyle(thisSelf);/column/gis.test(computedStyle.flexDirection)?thisSelf.style.justifyContent=contextResult.replace(/^vertical/gi,"").toLowerCase():thisSelf.style.alignItems=contextResult.replace(/^vertical/gi,"").toLowerCase();for(let d of removeTargets)try{d.remove()}catch{}}),removeByClass("flexSizeMainBoxClassName");try{instance.reverseSave()}catch{}setTimeout(async()=>{await instance.flexSizeBox(baseOriginalEvent,baseOriginalItem)},100)}else if(/^set/gi.test(contextResult)){if("setrow"===contextResult||"setcolumn"===contextResult){instance.shadowHistory((d,shadowIndex)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,thisSelf=shadow.querySelector('[data-dropid="'+thisId+'"]'),removeTargets=(thisSelf.children.length,[...shadow.querySelectorAll(".flexSizeMainBoxClassName, .flexBoxoriginalCopiedTempClassName")].map(d=>d));thisSelf.style.flexDirection=contextResult.replace(/^set/gi,"").toLowerCase();for(let d of removeTargets)try{d.remove()}catch{}}),removeByClass("flexSizeMainBoxClassName");try{instance.reverseSave()}catch{}setTimeout(async()=>{await instance.flexSizeBox(baseOriginalEvent,baseOriginalItem)},100)}else if("setheight"===contextResult){let promptResult;if(promptResult=await promptPopup("설정할 높이를 알려주세요! (숫자 형식)"),null!==promptResult&&(promptResult=promptResult.replace(/[^0-9\-\.]/gi,""),Number.isNaN(Number(promptResult))&&(promptResult=null)),"string"==typeof promptResult){instance.shadowHistory((d,shadowIndex)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,thisSelf=shadow.querySelector('[data-dropid="'+thisId+'"]'),removeTargets=(thisSelf.children.length,[...shadow.querySelectorAll(".flexSizeMainBoxClassName, .flexBoxoriginalCopiedTempClassName")].map(d=>d));thisSelf.style.height=String(Number(promptResult))+"rem";for(let d of removeTargets)try{d.remove()}catch{}}),removeByClass("flexSizeMainBoxClassName");try{instance.reverseSave()}catch{}setTimeout(async()=>{await instance.flexSizeBox(baseOriginalEvent,baseOriginalItem)},100)}}}else if(/^paragraph/gis.test(contextResult)){const thisOrder=contextResult.replace(/^paragraph/gis,"");if("border"===thisOrder){let promptResult;null===self.querySelector(`.${instance.iwComplexResponseParagraphClassName}`)?await instance.blackAlert("박스 내부에 p태그로 구성된 문단이 있어야 합니다!"):(promptResult=await colorPicker("테두리색을 알려주세요! (#000000 형식)"),null!==promptResult&&(/(black|검정|검은)/gi.test(promptResult)&&(promptResult="#000000"),/(white|하얀|흰)/gi.test(promptResult)&&(promptResult="#ffffff"),(""===promptResult||/(default|기본|없음)/gi.test(promptResult))&&(promptResult="#00ABC9"),promptResult="#"+promptResult.replace(/[^a-fA-F0-9]/gi,""),/\#[a-fA-F0-9][a-fA-F0-9][a-fA-F0-9][a-fA-F0-9][a-fA-F0-9][a-fA-F0-9]/gi.test(promptResult)||(promptResult=null)),"string"==typeof promptResult&&(instance.shadowHistory((d,shadowIndex)=>{const targetDiv=d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelector('[data-dropid="'+thisId+'"]').querySelector(`.${instance.iwComplexResponseParagraphClassName}`);null!==targetDiv&&(targetDiv.style.borderTop="2px solid "+promptResult,targetDiv.style.borderBottom="2px solid "+promptResult)}),sizeBoxEndEvent(e)))}else if("font"===thisOrder){const targetP=self.querySelector("p");null===targetP?await instance.blackAlert("박스 내부에 p태그로 구성된 문단이 있어야 합니다!"):await contextmenuPopup(event,popupBase=>new Promise((resolve,reject)=>{const computedStyle=window.getComputedStyle(targetP);instance.textParagraphContextmenu(targetP,popupBase,"size",computedStyle.fontSize,computedStyle.fontWeight,computedStyle.fontFamily,computedStyle.textAlign,computedStyle.verticalAlign,computedStyle.textIndent,computedStyle.lineHeight,computedStyle.letterSpacing,computedStyle.wordSpacing).then(s=>{instance.reverseSave(),resolve(s)}).catch(e=>reject(e))})),sizeBoxEndEvent(e)}else if("spacing"===thisOrder){const targetP=self.querySelector("p");null===targetP?await instance.blackAlert("박스 내부에 p태그로 구성된 문단이 있어야 합니다!"):await contextmenuPopup(event,popupBase=>new Promise((resolve,reject)=>{const computedStyle=window.getComputedStyle(targetP);instance.textParagraphContextmenu(targetP,popupBase,"spacing",computedStyle.fontSize,computedStyle.fontWeight,computedStyle.fontFamily,computedStyle.textAlign,computedStyle.verticalAlign,computedStyle.textIndent,computedStyle.lineHeight,computedStyle.letterSpacing,computedStyle.wordSpacing).then(s=>{instance.reverseSave(),resolve(s)}).catch(e=>reject(e))})),sizeBoxEndEvent(e)}}},mainTong=createAbstract({mother:self,class:["flexSizeMainBoxClassName"],event:{click:sizeBoxEndEvent,dragstart$drop$selectstart$click$contextmenu$dblclick:e=>{e.preventDefault(),e.stopPropagation()}},attribute:{draggable:"false"},style:{position:"absolute",top:topPaddingTop*(1/instance.previewZoomLevel)*-1,left:0,width:String(100)+"vw",height:cssCalc(String(100)+"vh","+",pixelUnit(heightNumbers.reduce((acc,curr)=>acc+curr,0))),background:colorChip.transparent,zIndex:1},child:{attribute:{draggable:"false"},event:{click:sizeBoxEndEvent,dragstart$drop$selectstart$click$contextmenu$dblclick:e=>{e.preventDefault(),e.stopPropagation()}},style:{position:"relative",width:thisSelfFirstWidth*(1/instance.previewZoomLevel),height:withOut(0),display:"block"},children:variableArray(heightNumbers.length).map(i=>{const targetOn=selfNumber===i,event={dragstart$drop$selectstart$click$contextmenu$dblclick:e=>{e.preventDefault(),e.stopPropagation()}};return targetOn&&(pastGhostHeight=Math.round(heightNumbers[i])),{class:["flexBoxGhostChildrenClassName"],attribute:{toggle:targetOn?"on":"off",draggable:"false",index:String(i),this_top:String(topNumbers[i]),this_height:String(heightNumbers[i])},event:targetOn?{click:e=>{e.stopPropagation()},contextmenu$dblclick:sizeContextEvent}:{click:sizeBoxEndEvent},style:{display:targetOn?"flex":"none",position:"absolute",top:cssCalc(pixelUnit(topNumbers[i]),"*",1/instance.previewZoomLevel),left:pixelUnit(thisSelfFirstLeft),width:thisSelfFirstWidth*(1/instance.previewZoomLevel),height:cssCalc(pixelUnit(heightNumbers[i]),"*",1/instance.previewZoomLevel),background:colorChip.transparent},child:{attribute:{draggable:"false",index:String(i)},event:targetOn?{click:e=>{e.stopPropagation()}}:{click:sizeBoxEndEvent},style:{position:"relative",width:withOut(0),height:withOut(0),background:instance.isInDarkMode?"black":"white"},child:{attribute:{draggable:"false",index:String(i),first_width:String(thisBaseWidth),first_height:String(thisBaseHeight)},event:{click:e=>{e.stopPropagation()}},class:["flexBoxMovementTargetClassName"],style:{position:"absolute",width:withOut(0),height:withOut(0),background:colorChip.transparent},child:{attribute:{draggable:"false",index:String(i)},event:{click:e=>{e.stopPropagation()}},style:{position:"relative",width:withOut(0),height:withOut(0),background:colorChip.transparent},child:{attribute:{draggable:"false",index:String(i),origin:"0% 50%","main-index":String(thisIndex)},event:targetOn?{click:e=>{e.stopPropagation()}}:{click:sizeBoxEndEvent},class:["dashBoxSizeClassName"],style:{position:"absolute",top:0,left:0,width:cssCalc(withOut(0),"*",1),height:withOut(0),opacity:targetOn?1:0,boxSizing:"border-box"},children:targetOn?[{style:{display:"block",position:"relative",top:0,left:0,width:withOut(0),height:withOut(0)},children:[{class:[pointWhiteBoxClassName],attribute:{direction:String(1)},event:{...event},style:{...clickBox,top:clickArea/2*-1,left:clickArea/2*-1,cursor:"nwse-resize"},child:{style:whiteBox}},{class:[pointWhiteBoxClassName],attribute:{direction:String(2)},event:{...event},style:{...clickBox,top:clickArea/2*-1,left:cssCalc(String(50)+"%","-",clickArea/2),cursor:"ns-resize"},child:{style:whiteBox}},{class:[pointWhiteBoxClassName],attribute:{direction:String(3)},event:{...event},style:{...clickBox,top:clickArea/2*-1,right:clickArea/2*-1,cursor:"nesw-resize"},child:{style:whiteBox}},{class:[pointWhiteBoxClassName],attribute:{direction:String(4)},event:{...event},style:{...clickBox,top:cssCalc(String(50)+"%","-",clickArea/2),left:clickArea/2*-1,cursor:"ew-resize"},child:{style:whiteBox}},{class:[pointWhiteBoxClassName],attribute:{direction:String(5)},event:{...event},style:{...clickBox,top:cssCalc(String(50)+"%","-",clickArea/2),right:clickArea/2*-1,cursor:"ew-resize"},child:{style:whiteBox}},{class:[pointWhiteBoxClassName],attribute:{direction:String(6)},event:{...event},style:{...clickBox,bottom:clickArea/2*-1,left:clickArea/2*-1,cursor:"nesw-resize"},child:{style:whiteBox}},{class:[pointWhiteBoxClassName],attribute:{direction:String(7)},event:{...event},style:{...clickBox,bottom:clickArea/2*-1,left:cssCalc(String(50)+"%","-",clickArea/2),cursor:"ns-resize"},child:{style:whiteBox}},{class:[pointWhiteBoxClassName],attribute:{direction:String(8)},event:{...event},style:{...clickBox,bottom:clickArea/2*-1,right:clickArea/2*-1,cursor:"nwse-resize"},child:{style:whiteBox}}]}]:[]}},previous:{mode:"div",style:{width:withOut(0),height:withOut(0)}}}}}})}});self.insertAdjacentElement("afterend",mainTong);const rTargets=[...mainTong.querySelectorAll(".flexBoxGhostChildrenClassName")].map(d=>d);for(let r of rTargets)"on"!==r.getAttribute("toggle")&&r.remove();const movementTarget=mainTong.querySelector(".flexBoxMovementTargetClassName"),originalRatio=thisSelfFirstHeight/thisSelfFirstWidth,originalCopied=self.cloneNode(!0),shellDiv=movementTarget.previousElementSibling;originalCopied.style.margin=String(0),originalCopied.removeAttribute("data-pindex"),originalCopied.removeAttribute("data-dropid"),originalCopied.id="";const originChildren=[...originalCopied.children].map(d=>d);originalCopied.style.transition="all 0s ease";for(let c of originChildren)c.style.transition="all 0s ease";shellDiv.style.position="relative",shellDiv.style.transition="all 0s ease",shellDiv.style.width=String(100)+"%",shellDiv.style.height=pixelUnit(thisSelfFirstHeight),shellDiv.setAttribute("original-ratio",String(originalRatio)),shellDiv.appendChild(originalCopied),originalChildren=[...originalCopied.children].map(d=>d),sizeContextEvent(event).catch(e=>console.log(e))}catch(e){throw console.log(e),e}};injectionRawText=async targetFile=>{const instance=this,{colorChip,svgMaker:localSvgMaker,binaryPath}=(this.back,PathAnimator),{withOut,percent,promptPopup,contextmenuPopup,transformCss,currentCssList,colorPicker,setDebounce,setDomColor,selectByQuery,markdownBlocks,domCssDictionary,linkToString,hangulToEnglish,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(),popupResult=await instance.fileToPopup(targetFile),resultText=popupResult.data;if(""!==resultText)if("injection"===popupResult.mode){const index=await instance.previewSelection(),htmlEditorView=instance.htmlView,currentHtmlText=htmlEditorView.state.doc.toString(),currentHtmlTextArr=currentHtmlText.split("\n"),children=[...(new DOMParser).parseFromString(currentHtmlText,"text/html").body.children].map(d=>d),bodyIndex=currentHtmlTextArr.findIndex(s=>/<body\s*[^>]*>/gi.test(s)),bodyEndIndex=currentHtmlTextArr.findIndex(s=>/<\/body>/gi.test(s)),targetSelectionEndIndex=-1===bodyEndIndex?0:currentHtmlTextArr.slice(0,bodyEndIndex+1).join("\n").length-7,targetSelectionIndex=-1===bodyIndex?0:currentHtmlTextArr.slice(0,bodyIndex+1).join("\n").length+1;let newState,i,frontHtml,backHtml,finalResult;if(0!==children.length&&!Number.isNaN(index)&&index>=0){frontHtml="",backHtml="",i=0;for(let c of children)i<index?frontHtml+=c.outerHTML+"\n":i===index?frontHtml+=c.outerHTML+"\n"+popupResult.data+"\n":backHtml+=c.outerHTML+"\n",i++;finalResult=frontHtml+"\n"+backHtml}else finalResult=popupResult.data;targetSelectionIndex+1<targetSelectionEndIndex-1?(newState=htmlEditorView.state.update({changes:{from:targetSelectionIndex+1,to:targetSelectionEndIndex-1,insert:"\n\n"}}),htmlEditorView.dispatch(newState)):await instance.autoInspector(!0);const currentHtmlTextArrUpdated=instance.htmlView.state.doc.toString().split("\n"),bodyIndexUpdated=currentHtmlTextArrUpdated.findIndex(s=>/<body\s*[^>]*>/gi.test(s)),targetSelectionIndexUpdated=-1===bodyIndexUpdated?0:currentHtmlTextArrUpdated.slice(0,bodyIndexUpdated+1).join("\n").length+1;newState=htmlEditorView.state.update({changes:{from:targetSelectionIndexUpdated+1,to:targetSelectionIndexUpdated+1,insert:finalResult}}),htmlEditorView.dispatch(newState),await instance.autoInspector(!0)}else{if("진행"===await promptPopup("body 태그 사이 내용이 지워지고 대체될 예정입니다.","select","진행$취소")){const htmlEditorView=instance.htmlView,currentHtmlTextArr=htmlEditorView.state.doc.toString().split("\n"),bodyIndex=currentHtmlTextArr.findIndex(s=>/<body\s*[^>]*>/gi.test(s)),bodyEndIndex=currentHtmlTextArr.findIndex(s=>/<\/body>/gi.test(s)),targetSelectionEndIndex=-1===bodyEndIndex?0:currentHtmlTextArr.slice(0,bodyEndIndex+1).join("\n").length-7,targetSelectionIndex=-1===bodyIndex?0:currentHtmlTextArr.slice(0,bodyIndex+1).join("\n").length+1;let newState;targetSelectionIndex+1<targetSelectionEndIndex-1?(newState=htmlEditorView.state.update({changes:{from:targetSelectionIndex+1,to:targetSelectionEndIndex-1,insert:"\n\n"}}),htmlEditorView.dispatch(newState)):await instance.autoInspector(!0);const currentHtmlTextArrUpdated=instance.htmlView.state.doc.toString().split("\n"),bodyIndexUpdated=currentHtmlTextArrUpdated.findIndex(s=>/<body\s*[^>]*>/gi.test(s)),targetSelectionIndexUpdated=-1===bodyIndexUpdated?0:currentHtmlTextArrUpdated.slice(0,bodyIndexUpdated+1).join("\n").length+1;newState=htmlEditorView.state.update({changes:{from:targetSelectionIndexUpdated+1,to:targetSelectionIndexUpdated+1,insert:resultText}}),htmlEditorView.dispatch(newState),await instance.autoInspector(!0)}}};previewPopup=async()=>{const instance=this,back=this.back,{colorChip,svgMaker:localSvgMaker,binaryPath}=PathAnimator,{withOut,percent,promptPopup,contextmenuPopup,transformCss,currentCssList,colorPicker,setDebounce,setDomColor,selectByQuery,markdownBlocks,domCssDictionary,linkToString,hangulToEnglish,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(),whitePopupClassName=instance.whitePreviewPopupClassName,shadowDomTargetClassName=instance.shadowDomTargetClassName,modeDictionary=instance.modeDictionary;try{let safeNum;for(safeNum=0;instance.whitePopupCloseDoing&&(await sleep(100),safeNum++,!(safeNum>50)););instance.isInDarkMode=!1;const thisMap=instance.currentMap,zIndex=104;let cancelBack,contentsPaddingBottom,whiteBaseRadius,tongMargin,tongMarginTop,whiteCloseEvent,imageDocuments,fontDocuments,imageResources,fontResources,blobUrlsToRevoke,imageInfos,fontInfos,cleanup,fontStyles,generalCss,generalCssString,thisTargetFontFamilyName,thisTargetFontWeight,htmlContent,cXhtml,cCss,cXhtmlString,cCssString,parser,parsedDocument,parseError,bodyElement,bodyInImageTargets,targetImageFileName,foundIndex,url,pathname,naviHeight,mobileSize,bigMobileSize,tabletSize,outerMargin,viewBetween,outerOuterMargin,titleAreaHeight,titleSize,bigTabletSize,titleWeight,titleSpecialMarginRight,widthAcc,createPreviewPopup,modeArr,titleSpecialVisualTop,innerWidthStandard,descriptionAreaWidth,descriptionSize,descriptionWeight,desktopSize,descriptionArr,wordSpacing,accNumber,closeIconWidth,bigBigMobileSize,resizeStack,resizeFrom,resizePopup,resizeDebounceEvent,thisTargetFontSource,thisFontUrl,thisFont,shadowDoms,thisOriginalImageUrl,outputString,buttonHeight,buttonMarginTop,buttonBorderRadius,buttonPadding,buttonSize,buttonWeight,innerWidthStandardZoom,descriptionAreaWidthZoom,mobileSizeZoom,bigMobileSizeZoom,bigBigMobileSizeZoom,tabletSizeZoom,bigTabletSizeZoom,desktopSizeZoom,viewBetweenZoom,zommButtonBetween,whiteOrder,cssConverting;contentsPaddingBottom=mediaNumber(140,130,120,100,16),whiteBaseRadius=mediaNumber(15,15,15,15,3),tongMargin=mediaNumber(26,26,26,24,5.2),tongMarginTop=mediaNumber(26,26,26,24,6),naviHeight=mediaNumber(40,40,36,32,24),outerOuterMargin=mediaNumber(16,16,15,15,1),outerMargin=mediaNumber(30,30,28,28,3),viewBetween=mediaNumber(11,11,10,10,1),mobileSize=modeDictionary.mobile.size,bigMobileSize=modeDictionary.bigMobile.size,bigBigMobileSize=modeDictionary.bigBigMobile.size,tabletSize=modeDictionary.tablet.size,bigTabletSize=modeDictionary.bigTablet.size,desktopSize=modeDictionary.desktop.size,buttonHeight=mediaNumber(33,33,33,31,3),buttonMarginTop=mediaNumber(30,30,28,26,3),buttonBorderRadius=mediaNumber(8,8,8,8,1),buttonPadding=mediaNumber(11,11,11,10,1),buttonSize=mediaNumber(16,16,16,15,1),buttonWeight=mediaNumber(800,800,800,800,80),titleSpecialMarginRight=mediaNumber(7,7,6,5,1),titleSpecialVisualTop=mediaNumber(-1,-1,-.5,-.5,0),titleAreaHeight=mediaNumber(42,42,40,38,3),titleSize=mediaNumber(18,18,17,16,3),titleWeight=800,descriptionAreaWidth=mediaNumber(60,50,50,40,12),descriptionSize=mediaNumber(13,13,12,11,1),closeIconWidth=mediaNumber(22,22,20,18,1),zommButtonBetween=mediaNumber(7,7,6,6,1),descriptionWeight=400,wordSpacing=-4,innerWidthStandard=window.innerWidth-2*outerMargin-2*outerOuterMargin,innerWidthStandardZoom=innerWidthStandard*(1/instance.previewZoomLevel),descriptionAreaWidthZoom=descriptionAreaWidth*(1/instance.previewZoomLevel),mobileSizeZoom=1*mobileSize,bigMobileSizeZoom=1*bigMobileSize,bigBigMobileSizeZoom=1*bigBigMobileSize,tabletSizeZoom=1*tabletSize,bigTabletSizeZoom=1*bigTabletSize,desktopSizeZoom=1*desktopSize,viewBetweenZoom=1*viewBetween,modeArr=innerWidthStandardZoom-mobileSizeZoom-tabletSizeZoom-desktopSizeZoom-3*viewBetweenZoom>=descriptionAreaWidthZoom?["mobile","tablet","desktop"]:innerWidthStandardZoom-mobileSizeZoom-tabletSizeZoom-desktopSizeZoom-3*viewBetweenZoom>=descriptionAreaWidthZoom||innerWidthStandardZoom-mobileSizeZoom-tabletSizeZoom-bigTabletSizeZoom-3*viewBetweenZoom>=descriptionAreaWidthZoom?["mobile","tablet","bigTablet"]:innerWidthStandardZoom-mobileSizeZoom-bigMobileSizeZoom-desktopSizeZoom-3*viewBetweenZoom>=descriptionAreaWidthZoom?["mobile","bigMobile","desktop"]:innerWidthStandardZoom-mobileSizeZoom-bigMobileSizeZoom-bigTabletSizeZoom-3*viewBetweenZoom>=descriptionAreaWidthZoom?["mobile","bigMobile","bigTablet"]:innerWidthStandardZoom-bigTabletSizeZoom-desktopSizeZoom-2*viewBetweenZoom>=descriptionAreaWidthZoom?["bigTablet","desktop"]:innerWidthStandardZoom-tabletSizeZoom-desktopSizeZoom-2*viewBetweenZoom>=descriptionAreaWidthZoom?["tablet","desktop"]:innerWidthStandardZoom-bigBigMobileSizeZoom-desktopSizeZoom-2*viewBetweenZoom>=descriptionAreaWidthZoom?["bigBigMobile","desktop"]:innerWidthStandardZoom-bigMobileSizeZoom-desktopSizeZoom-2*viewBetweenZoom>=descriptionAreaWidthZoom?["bigMobile","desktop"]:innerWidthStandardZoom-mobileSizeZoom-desktopSizeZoom-2*viewBetweenZoom>=descriptionAreaWidthZoom?["mobile","desktop"]:innerWidthStandardZoom-mobileSizeZoom-bigTabletSizeZoom-2*viewBetweenZoom>=descriptionAreaWidthZoom?["mobile","bigTablet"]:innerWidthStandardZoom-mobileSizeZoom-tabletSizeZoom-2*viewBetweenZoom>=descriptionAreaWidthZoom?["mobile","tablet"]:innerWidthStandardZoom-desktopSizeZoom-1*viewBetweenZoom>=descriptionAreaWidthZoom?["desktop"]:innerWidthStandardZoom-bigTabletSizeZoom-1*viewBetweenZoom>=descriptionAreaWidthZoom?["bigTablet"]:innerWidthStandardZoom-tabletSizeZoom-1*viewBetweenZoom>=descriptionAreaWidthZoom?["tablet"]:innerWidthStandardZoom-bigBigMobileSizeZoom-1*viewBetweenZoom>=descriptionAreaWidthZoom?["bigBigMobile"]:innerWidthStandardZoom-bigMobileSizeZoom-1*viewBetweenZoom>=descriptionAreaWidthZoom?["bigMobile"]:["mobile"],accNumber=2*outerOuterMargin+outerMargin;for(let m of modeArr)accNumber+=modeDictionary[m].size+viewBetween+2;accNumber=(accNumber-viewBetween+outerMargin)*instance.previewZoomLevel,descriptionAreaWidth=(window.innerWidth-accNumber)*(1/instance.previewZoomLevel),descriptionArr=[],instance.previewZoomLevel>1&&(descriptionSize/=instance.previewZoomLevel,buttonSize/=instance.previewZoomLevel),window.history.pushState({mode:"white"},""),[generalCss]=await back.frontRead(instance.collectionString,{_id:instance.valueParser("decode",thisMap.tree.style.general).id}),generalCssString=generalCss.data,[cXhtml]=await back.frontRead(instance.collectionString,{_id:instance.valueParser("decode",instance.currentXhtmlId).id}),[cCss]=await back.frontRead(instance.collectionString,{_id:instance.valueParser("decode",instance.currentCssId).id}),imageDocuments=await back.frontRead(instance.collectionBlob,{projectId:instance.currentId,key:"blob"}),fontDocuments=await back.frontRead(instance.collectionBlob,{projectId:instance.currentId,key:"font"}),imageResources=[],fontResources=[];for(let b of imageDocuments)imageResources.push({fileName:b.fileName,data:b.data});for(let b of fontDocuments)thisTargetFontFamilyName="",thisTargetFontWeight="400",thisTargetFontSource="",generalCssString.split("\n").join("").replace(/@font\-face\s*\{([^\}]+)\}/gi,(match,p1)=>(new RegExp(b.fileName,"g").test(p1)&&(p1.replace(/font\-family\:\s*[\'\"]([^\'\"]+)[\"\']/gi,(m,p)=>(thisTargetFontFamilyName=p,m)),p1.replace(/font\-weight\:\s*([0-9]+)/gi,(mz,pz)=>(thisTargetFontWeight=pz.replace(/[^0-9]/gi,""),mz)),p1.replace(/src\:\s*url\s*\(['"]?([^'"\)]+)['"]?\)/gi,(mk,pk)=>(thisTargetFontSource=pk,mk))),match)),fontResources.push({fileName:thisTargetFontFamilyName,format:/\.ttf$/gi.test(b.fileName)?"truetype":/\.woff2$/gi.test(b.fileName)?"font-woff2":/\.woff$/gi.test(b.fileName)?"font-woff":"opentype",data:b.data,weight:Number(thisTargetFontWeight),source:thisTargetFontSource});blobUrlsToRevoke=[],imageInfos=imageResources.map(res=>{const url=URL.createObjectURL(res.data);return blobUrlsToRevoke.push(url),{name:res.fileName,url}}),fontInfos=[];for(let res of fontResources){const findResult=instance.customFonts.find(o=>o.format===res.format.toLowerCase()&&o.name===res.fileName&&o.weight===res.weight);void 0===findResult?(thisFontUrl=URL.createObjectURL(res.data),thisFont=new FontFace(res.fileName,`url(${thisFontUrl})`,{weight:String("number"==typeof res.weight?res.weight:400),style:"normal"}),await thisFont.load(),document.fonts.add(thisFont),blobUrlsToRevoke.push(thisFontUrl),fontInfos.push({name:res.fileName,format:res.format.toLowerCase(),url:thisFontUrl,source:res.source,weight:"number"==typeof res.weight?res.weight:400}),instance.customFonts.push({name:res.fileName,format:res.format.toLowerCase(),url:thisFontUrl,source:res.source,weight:"number"==typeof res.weight?res.weight:400})):fontInfos.push(objectDeepCopy(findResult))}if(cXhtmlString=/html/gi.test(instance.valueParser("decode",instance.currentXhtmlId).name)?cXhtml.data:"<body>해당 파일은 미리보기를 볼 수 없습니다.</body>",cCssString=cCss.data,parser=new DOMParser,parsedDocument=parser.parseFromString(cXhtmlString,/\.xhtml/gi.test(instance.valueParser("decode",instance.currentXhtmlId).name)?"application/xhtml+xml":"text/html"),parseError=parsedDocument.querySelector("parsererror"),null===parseError&&(bodyElement=parsedDocument.querySelector("body"),null!==bodyElement)){bodyInImageTargets=[...bodyElement.querySelectorAll("img")];for(let i of bodyInImageTargets)url=new URL(i.src,document.baseURI),pathname=url.pathname,pathname.endsWith("/")&&pathname.length>1&&(pathname=pathname.slice(0,-1)),targetImageFileName=pathname.split("/").at(-1),"string"==typeof targetImageFileName&&(foundIndex=imageInfos.findIndex(o=>o.name===targetImageFileName),-1!==foundIndex&&(thisOriginalImageUrl="",thisOriginalImageUrl=/^http/.test(i.src)?i.src.replace(window.location.host,"").split("/").filter(s=>""!==s).slice(1).join("/"):i.src.replace(window.location.host,"").split("/").filter(s=>""!==s).join("/"),cXhtmlString.replace(new RegExp("(src|Src|SRC)\\s*=\\s*(['\"])([^'\"]*)("+thisOriginalImageUrl+")"),(match,p1,p2,p3,p4)=>(thisOriginalImageUrl=p3+p4,match)),i.setAttribute("data-originalsrc",thisOriginalImageUrl),i.src=imageInfos[foundIndex].url));cXhtmlString=bodyElement.innerHTML,cssConverting=cssString=>{cssString=cssString.replace(/(url\(")([^"]*?)("\))/gis,(match,p1,pathname,p3)=>{const targetImageFileName=pathname.split("/").at(-1);if("string"==typeof targetImageFileName){const foundIndex=imageInfos.findIndex(o=>o.name===targetImageFileName);return-1!==foundIndex?p1+imageInfos[foundIndex].url+p3:match}return match}),cssString=cssString.replace(/(url\(')([^']*?)('\))/gis,(match,p1,pathname,p3)=>{const targetImageFileName=pathname.split("/").at(-1);if("string"==typeof targetImageFileName){const foundIndex=imageInfos.findIndex(o=>o.name===targetImageFileName);return-1!==foundIndex?p1+imageInfos[foundIndex].url+p3:match}return match})},cssConverting(generalCssString),cssConverting(cCssString)}fontStyles="",fontInfos.forEach(font=>{fontStyles+=`\n@font-face { font-family: '${font.name}'; font-weight: ${String(font.weight)}; src: url(${font.url}) format('${font.format}'); font-style: normal; }`}),fontStyles+="\n\n"+generalCssString.replace(/@font\-face[\s]*\{([\s\S]*?)\}/gi,"").split("\n").filter(s=>""!==s.trim()).join("\n").replace(/html\s*\{\s*font\-size\:\s*100\%;?\s*}/gi,"")+"\n",fontStyles+="\n\n"+cCssString.replace(/@font\-face[\s]*\{([\s\S]*?)\}/gi,"").split("\n").filter(s=>""!==s.trim()).join("\n").replace(/html\s*\{\s*font\-size\:\s*100\%;?\s*}/gi,"")+"\n",outputString="@media (min-width: 8px) {\n* { color: white; }\n}\n\n",fontStyles=fontStyles.replace(/(@media\s+.+?\s*\{\s*)((?:[^{}]*|\{[^{}]*\})*)(\s*\})/gis,(match,p1,p2,p3)=>/prefers\-color\-scheme\s*:\s*dark/gis.test(p1)?(outputString+=p1.replace(/prefers\-color\-scheme\s*:\s*dark/gis,"min-width: 8px")+p2+"\n"+p3+"\n\n","\n\n"):match),htmlContent=`\n      <!DOCTYPE html>\n      <html lang="ko">\n      <head>\n        <meta charset="utf-8">\n        <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no,user-scalable=no">\n        <title>Preview</title>\n        <style>\n          html {\n            -webkit-text-size-adjust:100%;\n            -webkit-font-smoothing: antialiased;\n            -moz-osx-font-smoothing: grayscale;\n            -ms-touch-action: manipulation;\n            touch-action: manipulation;\n            background-color: white;\n            color: ${AbstractNode.colorExtended.black};\n          }\n          html, body { margin:0;padding:0;font-size:16px;padding-bottom: 160px !important }\n          html::-webkit-scrollbar{display:none;}\n          body::-webkit-scrollbar{display:none;}\n          *::-webkit-scrollbar{display:none;}\n          *{ cursor: pointer; transition: all 0.3s ease; }\n          *{ transition: color 0.3s ease; }\n \n          @keyframes ____shadow__doms__tempclassname__temp____2_animation {\n            from{opacity:0;padding-bottom: 0px;}\n            to{opacity:1;padding-bottom: ${String(instance.dropAfterAreaHeight)}px;}\n          }\n\n          @keyframes ____shadow__doms__tempclassname__temp____2_animation_out {\n            from{opacity:1;padding-bottom: ${String(instance.dropAfterAreaHeight)}px;}\n            to{opacity:0;padding-bottom: 0px;}\n          }\n\n          .____shadow__doms__tempclassname__temp____ {\n            --pseudo-opacity: 0;\n            --pseudo-padding-bottom: 0px;\n            --pseudo-margin-bottom: 0px;\n            transition: all 0.4s ease;\n            position: relative;\n          }\n\n          .____shadow__doms__tempclassname__temp____2 {\n            display: block;\n            width: 100%;\n            position: relative;\n            padding-bottom: 0px;\n            opacity: 0;\n            background-color: ${colorChip.mint.replace(/,\s*1\)/g,", 0.1)")};\n            border-radius: 3px;\n            border-bottom: ${String(instance.dropAfterAreaBorderWidth)}px solid ${colorChip.mint};\n            animation: ____shadow__doms__tempclassname__temp____2_animation 0.4s ease forwards;\n          }\n\n          @keyframes marching-ants {\n            to {\n              background-position: 100%;\n            }\n          }\n\n          .dashBoxSizeClassName {\n            --border-width: 1px;\n            --border-color: ${colorChip.mint};\n            --dash-length: 4px;\n            --animation-speed: 20s;\n            border: var(--border-width) solid transparent;\n            mix-blend-mode: multiply;\n            background-image:\n              linear-gradient(white, white),\n              repeating-linear-gradient(\n                -45deg,\n                var(--border-color) 0,\n                var(--border-color) var(--dash-length),\n                transparent 0,\n                transparent calc(var(--dash-length) * 2)\n              );\n            background-origin: border-box;\n            background-clip: padding-box, border-box;\n            background-size: calc(var(--dash-length) * 2 * 1.414) calc(var(--dash-length) * 2 * 1.414);\n            animation: marching-ants var(--animation-speed) linear infinite;\n          }\n\n          .dashBoxSizeClassName_moving {\n            background: transparent !important;\n            border: 1px solid ${colorChip.mint};\n            border-image: repeating-linear-gradient(\n                -45deg,\n                var(--border-color) 0,\n                var(--border-color) var(--dash-length),\n                transparent 0,\n                transparent calc(var(--dash-length) * 2)\n              );\n            border-image-slice: 1 1 1 1;\n          }\n\n          img{border:0}\n\n          ${fontStyles}\n        </style>\n        <output style="display:none;">\n          ${outputString}\n        </output>\n      </head>\n      <body class="${instance.shadowBodyClassName}">\n      ${cXhtmlString}\n      <script>\n        [ ...document.querySelectorAll("a") ].forEach((a) => {\n          a.addEventListener("click", (e) => {\n            e.preventDefault();\n          });\n        });\n      <\/script>\n      </body>\n      </html>`,cleanup=()=>{instance.shadowDoms=[],blobUrlsToRevoke.forEach(url=>{try{URL.revokeObjectURL(url)}catch{}})},whiteCloseEvent=e=>{const motherArr=selectByClass(whitePopupClassName);instance.whitePopupCloseDoing=!0;for(let t of motherArr)new RegExp("whitePopupClassNameDownTarget","g").test(t.className)?t.style.animation="fadedownentire 0.5s ease forwards":new RegExp("whitePopupClassNameFadeOutTarget","g").test(t.className)?t.style.animation="fadedown 0.5s ease forwards":t.style.animation="justfadeoutoriginal 0.5s ease forwards";setQueue(()=>{window.removeEventListener("resize",AbstractNode.stacks.resizeEvent),removeByClass(whitePopupClassName),instance.whitePopupCloseDoing=!1},500),cleanup(),window.history.pushState({mode:"base"},"")},instance.whitePopupCloseEvent=whiteCloseEvent,resizeStack=0,resizeFrom=0,resizePopup=0,resizeDebounceEvent=()=>{let timeout;const reEvent=async()=>{window.innerWidth<760&&window.location.reload(),whiteCloseEvent(new Event("click")),setQueue(()=>{instance.previewPopup().catch(e=>console.log(e))},1e3),resizeStack=0};return e=>{0===resizeStack&&(resizeStack=1,resizeFrom=window.innerWidth);clearTimeout(timeout),timeout=setTimeout(()=>{timeout=null,reEvent().catch(e=>console.log(e))},800)}},AbstractNode.stacks.resizeEvent=resizeDebounceEvent(),window.addEventListener("resize",AbstractNode.stacks.resizeEvent),cancelBack=createAbstract({mother:totalContents,class:[whitePopupClassName],event:{click:whiteCloseEvent},style:{position:"fixed",top:0,left:0,width:withOut(0),height:withOut(0),opacity:0,animation:"justfadeinoriginal 0.4s ease forwards",background:gradientCss(colorExtended.black,colorExtended.black,.92,.7),backdropFilter:"blur(4px)",zIndex:zIndex-1,zoom:instance.previewZoomLevel}}),createAbstract({mother:totalContents,class:[whitePopupClassName,"whitePopupClassNameFadeOutTarget"],event:{click:whiteCloseEvent,dragenter$dragover$dragstart$dragleave$drop:e=>{e.stopPropagation(),e.preventDefault()}},style:{position:"fixed",top:outerOuterMargin,left:outerOuterMargin,width:withOut(2*outerOuterMargin,ea),height:withOut(outerOuterMargin,ea),borderTopLeftRadius:whiteBaseRadius,borderTopRightRadius:whiteBaseRadius,borderBottomLeftRadius:0,borderBottomRightRadius:0,border:"1.5px dashed "+colorChip.white,opacity:0,animation:"justfadeinoriginal 0.4s ease forwards",borderBottom:"",zIndex:zIndex-1,zoom:instance.previewZoomLevel},child:{event:{dragenter$dragover$dragstart$dragleave$drop:e=>{e.stopPropagation(),e.preventDefault()}},style:{display:"flex",flexDirection:"row",position:"relative",width:withOut(2*(outerMargin-1.5)),height:withOut(0),paddingLeft:outerMargin-1.5,paddingRight:outerMargin-1.5,justifyContent:"start",alignItems:"start"},children:modeArr.map(m=>{const thisWidth=modeDictionary[m].size,thisTitle=`<u%>%u> ${modeDictionary[m].title} (${String(modeDictionary[m].size)}px)`;return{event:{dragenter$dragover$dragstart$dragleave$drop:e=>{e.stopPropagation(),e.preventDefault()}},style:{paddingTop:outerMargin,width:pixelUnit(thisWidth),marginRight:pixelUnit(viewBetween),display:"inline-flex",flexDirection:"column",justifyContent:"start",alignItems:"start"},child:{style:{width:withOut(0),height:titleAreaHeight,display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start"},child:{text:thisTitle,style:{display:"flex",flexDirection:"row",fontSize:titleSize,fontWeight:titleWeight,color:colorChip.white},under:{fontSize:titleSize,marginRight:titleSpecialMarginRight,fontWeight:300,position:"relative",top:titleSpecialVisualTop,color:colorChip.white}}}}}).concat([{style:{position:"absolute",bottom:outerMargin/2,right:.7*outerMargin,display:"inline-flex",flexDirection:"column",justifyContent:"end",alignItems:"start",width:descriptionAreaWidth},children:[{text:descriptionArr.map(s=>s.join(" ")).join("\n\n"),style:{fontFamily:"pretendard",fontSize:descriptionSize,fontWeight:descriptionWeight,color:colorChip.white,lineHeight:1.75}},{attribute:{toggle:"off"},event:{click$contextmenu$dblclick:e=>{e.preventDefault();const self=e.currentTarget,toggle=String(self.getAttribute("toggle")),textDom=self.firstChild;e.preventDefault(),e.stopPropagation(),instance.shadowHistory((d,shadowIndex)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,styleTag=shadow.querySelector("style"),outputTag=shadow.querySelector("output");"off"===toggle?(instance.isInDarkMode=!0,d.style.backgroundColor="black",self.style.backgroundColor="black",textDom.querySelector("path").setAttribute("fill",colorChip.white),styleTag.insertAdjacentHTML("beforeend","\n\n"+outputTag.innerHTML),self.setAttribute("toggle","on")):(instance.isInDarkMode=!1,d.style.backgroundColor="white",self.style.backgroundColor="white",textDom.querySelector("path").setAttribute("fill",colorChip.black),styleTag.innerHTML=styleTag.innerHTML.replace(/(@media\s+.+?\s*\{\s*)((?:[^{}]*|\{[^{}]*\})*)(\s*\})/gis,(match,p1,p2,p3)=>/min\-width\s*:\s*8px/gis.test(p1)?"\n\n":match),self.setAttribute("toggle","off"))})}},style:{height:buttonHeight,borderRadius:buttonBorderRadius,background:colorChip.white,marginTop:buttonMarginTop,display:"inline-flex",justifyContent:"center",alignItems:"center",paddingRight:buttonPadding,paddingLeft:buttonPadding,cursor:"pointer"},child:{mode:"svg",source:svgMaker.darkMoon(colorChip.black),style:{height:buttonSize}}}]},{mode:"svg",source:svgMaker.minusCircleIcon(colorChip.white),event:{click:async e=>{e.stopPropagation(),e.preventDefault(),instance.previewZoomLevel=instance.previewZoomLevel-.1,whiteCloseEvent(new Event("click")),setQueue(()=>{instance.previewPopup().catch(e=>console.log(e))},600)}},style:{position:"absolute",top:outerMargin,right:outerMargin,width:closeIconWidth,cursor:"pointer"}},{mode:"svg",source:svgMaker.plusCircleIcon(colorChip.white),event:{click:async e=>{e.stopPropagation(),e.preventDefault(),instance.previewZoomLevel=instance.previewZoomLevel+.1,whiteCloseEvent(new Event("click")),setQueue(()=>{instance.previewPopup().catch(e=>console.log(e))},600)}},style:{position:"absolute",top:outerMargin,right:outerMargin+closeIconWidth+zommButtonBetween,width:closeIconWidth,cursor:"pointer"}}])}}),widthAcc=0,shadowDoms=[],createPreviewPopup=(m,order)=>{const thisWidth=modeDictionary[m].size,thisLeft=outerMargin+outerOuterMargin+widthAcc,thisDom=createAbstract({mother:totalContents,class:[whitePopupClassName,"whitePopupClassNameDownTarget"],attribute:{kind:m,size:String(thisWidth),order:String(order)},style:{position:"fixed",width:pixelUnit(thisWidth),height:withOut(outerMargin+outerOuterMargin+titleAreaHeight),top:outerMargin+outerOuterMargin+titleAreaHeight,left:pixelUnit(thisLeft),borderTopLeftRadius:whiteBaseRadius,borderTopRightRadius:whiteBaseRadius,borderBottomLeftRadius:0,borderBottomRightRadius:0,background:colorChip.white,animation:"fadeupentire 0.5s ease forwards",zIndex,flexDirection:"column",overflow:"hidden",transition:"all 0.3s ease",zoom:instance.previewZoomLevel},child:{style:{display:"block",width:withOut(0),height:withOut(0),overflow:"scroll"},child:{style:{display:"block",width:withOut(2*tongMargin),height:withOut(tongMarginTop),paddingLeft:tongMargin,paddingRight:tongMargin,paddingTop:tongMarginTop},child:{class:[shadowDomTargetClassName],style:{width:withOut(0),height:"auto",border:0,outline:0,paddingBottom:200}}}}}),parsedHtml=(new DOMParser).parseFromString(htmlContent,"text/html"),shadowRoot=thisDom.querySelector("."+shadowDomTargetClassName).attachShadow({mode:"open"});parsedHtml.querySelectorAll('style, link[rel="stylesheet"]').forEach(styleNode=>{shadowRoot.appendChild(styleNode.cloneNode(!0))});const contentContainer=document.createDocumentFragment(),nodesToMove=Array.from(parsedHtml.body.childNodes);for(const node of nodesToMove)contentContainer.appendChild(node);return shadowRoot.appendChild(contentContainer),shadowDoms.push(thisDom),thisWidth+viewBetween},whiteOrder=0;for(let m of modeArr)widthAcc+=createPreviewPopup(m,whiteOrder),whiteOrder++;instance.shadowDoms=shadowDoms,instance.shadowDoms.forEach((d,shadowIndex)=>{const host=d.querySelector("."+shadowDomTargetClassName),shadow=host.shadowRoot,thisKind=(shadow.querySelectorAll("."+instance.imageResponseDivClassName),host.getBoundingClientRect().width,instance.standardPoint,instance.imageMediaClassNames,d.mustAttribute("kind")),thisStyleTag=shadow.querySelector("style"),outputTag=shadow.querySelector("output");thisStyleTag.innerHTML=instance.mediaInPreview(thisKind,thisStyleTag.innerHTML),outputTag.innerHTML=instance.mediaInPreview(thisKind,outputTag.innerHTML)});const reverseSave=()=>{if(instance.shadowDoms.length>0){const shadow=instance.shadowDoms[0].querySelector("."+shadowDomTargetClassName).shadowRoot,removeAbstractTargets=[...shadow.querySelectorAll("abstract-div")].map(d=>d);for(let d of removeAbstractTargets)try{d.remove()}catch{}const finalParsedHtml=(new DOMParser).parseFromString(shadow.innerHTML,"text/html"),removeTargets=finalParsedHtml.body.querySelectorAll("style, script, output");for(let t of removeTargets)t.remove();const imageTargets=[...finalParsedHtml.body.querySelectorAll("img")],childrenTarget=[...finalParsedHtml.body.children];for(let c of imageTargets)c.src=String(c.getAttribute("data-originalsrc")),c.removeAttribute("data-originalsrc"),c.removeAttribute("data-pindex"),c.removeAttribute("data-imageindex"),c.style.transition="";for(let c of childrenTarget)if(c.classList.contains("____shadow__doms__tempclassname__temp____2"))c.remove();else{c.style.transition="",c.style.animation="",c.style.cursor="","p"!==c.nodeName&&"P"!==c.nodeName||(c.style.position=""),c.removeAttribute("xmlns"),c.removeAttribute("data-dropid"),c.removeAttribute("draggable"),c.removeAttribute("data-pindex"),c.removeAttribute("data-imageindex"),c.removeAttribute("data-originalsrc"),c.classList.contains("____shadow__doms__tempclassname__temp____")&&c.classList.remove("____shadow__doms__tempclassname__temp____"),0===[...c.classList].length&&c.removeAttribute("class"),c.style["--pseudo-opacity"]="",c.style["--pseudo-padding-bottom"]="",c.style["--pseudo-margin-bottom"]="",delete c.style["--pseudo-opacity"],delete c.style["--pseudo-padding-bottom"],delete c.style["--pseudo-margin-bottom"],/style\s*=\s*(""|'')/gi.test(c.outerHTML)&&c.removeAttribute("style");const thisChildrenChildren=[...c.querySelectorAll([...new Set(instance.editorTargetTagNames.map(s=>s.toLowerCase()))].join(", "))];for(let z=0;z<thisChildrenChildren.length;z++)thisChildrenChildren[z].removeAttribute("data-pindex"),thisChildrenChildren[z].removeAttribute("root-dropid")}const removeAttributeList=["data-pindex","data-imageindex","data-originalsrc","draggable","xmlns","data-dropid"];for(let att of removeAttributeList){const targets=[...finalParsedHtml.body.querySelectorAll("["+att+"]")];for(let t of targets)t.removeAttribute(att)}for(let name of removeAttributeList){const targets=[...finalParsedHtml.body.querySelectorAll("."+name)];for(let t of targets)t.classList.remove(name)}const htmlEditorView=instance.htmlView,currentHtmlTextArr=htmlEditorView.state.doc.toString().split("\n"),bodyIndex=currentHtmlTextArr.findIndex(s=>/<body\s*[^>]*>/gi.test(s)),bodyEndIndex=currentHtmlTextArr.findIndex(s=>/<\/body>/gi.test(s)),targetSelectionEndIndex=-1===bodyEndIndex?0:currentHtmlTextArr.slice(0,bodyEndIndex+1).join("\n").length-7,targetSelectionIndex=-1===bodyIndex?0:currentHtmlTextArr.slice(0,bodyIndex+1).join("\n").length+1;if(targetSelectionIndex+1<targetSelectionEndIndex-1){const removeState=htmlEditorView.state.update({changes:{from:targetSelectionIndex+1,to:targetSelectionEndIndex-1,insert:"\n\n"}});htmlEditorView.dispatch(removeState);const newHtmlState=htmlEditorView.state.update({changes:{from:targetSelectionIndex+1,to:targetSelectionIndex+1,insert:finalParsedHtml.body.innerHTML.replace(/\&nbsp;/g,"&#160;")}});htmlEditorView.dispatch(newHtmlState)}instance.autoInspector(!0).catch(e=>console.log(e))}};instance.reverseSave=reverseSave;const toEditorContextEvent=event=>{event.preventDefault();const thisBaseEvent=event,self=event.currentTarget;let thisMotherTarget,motherFindBoo,motherSafeIndex,dashBoxMarginTop,dashBoxMarginLeft;for(thisMotherTarget=self,motherFindBoo=!1,motherSafeIndex=0,dashBoxMarginTop=-8,dashBoxMarginLeft=-12;!motherFindBoo;){if(motherSafeIndex>100)throw new Error("invalid preview status");"string"==typeof thisMotherTarget.getAttribute("data-dropid")&&""!==thisMotherTarget.getAttribute("data-dropid")?motherFindBoo=!0:(motherFindBoo=!1,thisMotherTarget=thisMotherTarget.parentElement),motherSafeIndex++}if((!/div/gi.test(thisMotherTarget.nodeName.toLowerCase())||!thisMotherTarget.classList.contains(instance.divideRowClassName)&&!thisMotherTarget.classList.contains(instance.flexBoxClassName)||event.ctrlKey||event.altKey||event.metaKey||event.shiftKey)&&instance.editorTargetTagNames.includes(self.nodeName)){const domToColor=(dom,mode="on")=>{const stack=[dom];for(;stack.length>0;){const current=stack.pop();current.style.color="on"===mode?"transparent":"";const children=Array.from(current.children);for(let i=children.length-1;i>=0;i--)stack.push(children[i])}},thisPureValue=self.innerHTML.trim().split("\n").join(" ");let pastHeight;pastHeight="",self.style.height&&(pastHeight=self.style.height),self.style.position="relative",domToColor(self,"on");const justCancelEvent=e=>{e.preventDefault();try{const thisPIndex=Number(self.getAttribute("data-pindex")),targets=[...self.querySelectorAll("."+instance.tempTextareaEditorClassName)];for(let t of targets)t.remove();let thisDom,thisId,safeNumber;for(self.style.height=""!==pastHeight?pastHeight:"",thisDom=self,thisId=null,safeNumber=0;null===thisId&&(thisId=thisDom.getAttribute("data-dropid"),null===thisId&&null!==thisDom.parentElement&&(thisDom=thisDom.parentElement,thisId=thisDom.getAttribute("data-dropid")),!(safeNumber>10));)safeNumber++;null!==thisId&&(instance.shadowHistory((d,shadowIndex)=>{const thisTarget=d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelector('[data-dropid="'+thisId+'"]');if(instance.editorTargetTagNames.includes(thisTarget.nodeName))domToColor(thisTarget,"off");else{const[pTarget]=[...thisTarget.querySelectorAll([...new Set(instance.editorTargetTagNames.map(s=>s.toLowerCase()))].join(", "))].filter(d=>d.getAttribute("data-pindex")===String(thisPIndex));pTarget&&domToColor(pTarget,"off")}}),reverseSave())}catch{}},textareaForceCancelEvent=(thisSelf,e)=>{e.preventDefault();try{const thisSelfParent=thisSelf.parentElement,thisPIndex=Number(thisSelfParent.getAttribute("data-pindex")),replaceValue=String(thisSelfParent.querySelector("article").innerHTML).trim().split("\n").join("").replace(/style\=['"]\s*color\s*:\s*transparent\s*;?['"]/gis," ").replace(/(style\=)(['"])\s*color\s*:\s*transparent\s*;/gis,(match,p1,p2)=>p1+p2).replace(/scolor\s*:\s*transparent\s*;/gis,"").replace(/scolor\s*:\s*transparent\s*/gis,";"),targets=[...thisSelfParent.querySelectorAll("."+instance.tempTextareaEditorClassName)];for(let t of targets)t.remove();let thisDom,thisId,safeNumber;for(self.style.height=""!==pastHeight?pastHeight:"",thisDom=thisSelfParent,thisId=null,safeNumber=0;null===thisId&&(thisId=thisDom.getAttribute("data-dropid"),null===thisId&&null!==thisDom.parentElement&&(thisDom=thisDom.parentElement,thisId=thisDom.getAttribute("data-dropid")),!(safeNumber>10));)safeNumber++;null!==thisId&&(instance.shadowHistory((d,shadowIndex)=>{const thisTarget=d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelector('[data-dropid="'+thisId+'"]');if(instance.editorTargetTagNames.includes(thisTarget.nodeName))thisTarget.replaceChildren(),domToColor(thisTarget,"off"),thisTarget.innerHTML=replaceValue;else{const[pTarget]=[...thisTarget.querySelectorAll([...new Set(instance.editorTargetTagNames.map(s=>s.toLowerCase()))].join(", "))].filter(d=>d.getAttribute("data-pindex")===String(thisPIndex));pTarget&&(pTarget.replaceChildren(),domToColor(pTarget,"off"),pTarget.innerHTML=replaceValue)}}),reverseSave())}catch{}},textareaCancelEvent=e=>{e.preventDefault();try{const thisSelfParent=e.currentTarget.parentElement,thisPIndex=Number(thisSelfParent.getAttribute("data-pindex")),replaceValue=String(thisSelfParent.querySelector("article").innerHTML).trim().split("\n").join("").replace(/style\=['"]\s*color\s*:\s*transparent\s*;?['"]/gis," ").replace(/(style\=)(['"])\s*color\s*:\s*transparent\s*;/gis,(match,p1,p2)=>p1+p2).replace(/scolor\s*:\s*transparent\s*;/gis,"").replace(/scolor\s*:\s*transparent\s*/gis,";"),targets=[...thisSelfParent.querySelectorAll("."+instance.tempTextareaEditorClassName)];for(let t of targets)t.remove();let thisDom,thisId,safeNumber;for(self.style.height=""!==pastHeight?pastHeight:"",thisDom=thisSelfParent,thisId=null,safeNumber=0;null===thisId&&(thisId=thisDom.getAttribute("data-dropid"),null===thisId&&null!==thisDom.parentElement&&(thisDom=thisDom.parentElement,thisId=thisDom.getAttribute("data-dropid")),!(safeNumber>10));)safeNumber++;if(null!==thisId){if("object"==typeof e.abstract&&null!==e.abstract&&"string"==typeof e.abstract.dropid){const rId=e.abstract.dropid;instance.shadowHistory((d,shadowIndex)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,thisTarget=shadow.querySelector('[data-dropid="'+thisId+'"]'),removeTarget=shadow.querySelector('[data-dropid="'+rId+'"]');if(null!==removeTarget)try{removeTarget.remove()}catch{}if(instance.editorTargetTagNames.includes(thisTarget.nodeName))thisTarget.replaceChildren(),domToColor(thisTarget,"off"),thisTarget.innerHTML=replaceValue;else{const[pTarget]=[...thisTarget.querySelectorAll([...new Set(instance.editorTargetTagNames.map(s=>s.toLowerCase()))].join(", "))].filter(d=>d.getAttribute("data-pindex")===String(thisPIndex));pTarget&&(pTarget.replaceChildren(),domToColor(pTarget,"off"),pTarget.innerHTML=replaceValue)}})}else instance.shadowHistory((d,shadowIndex)=>{const thisTarget=d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelector('[data-dropid="'+thisId+'"]');if(instance.editorTargetTagNames.includes(thisTarget.nodeName))thisTarget.replaceChildren(),domToColor(thisTarget,"off"),thisTarget.innerHTML=replaceValue;else{const[pTarget]=[...thisTarget.querySelectorAll([...new Set(instance.editorTargetTagNames.map(s=>s.toLowerCase()))].join(", "))].filter(d=>d.getAttribute("data-pindex")===String(thisPIndex));pTarget&&(pTarget.replaceChildren(),domToColor(pTarget,"off"),pTarget.innerHTML=replaceValue)}});reverseSave()}}catch(e){}},textareaContextmenuEvent=async event=>{event.preventDefault(),event.stopPropagation();const thisSelfSelection=event.currentTarget,thisContextArea=event.currentTarget,thisType=/contextmenu/gi.test(event.type)?"mouse":"keyboard",pastHeight=String(thisSelfSelection.getAttribute("pastheight")),thisSelfParent=thisSelfSelection.parentElement,thisSelf=thisSelfParent.querySelector("article"),replaceValue=String(thisSelfParent.querySelector("article").innerHTML).trim().split("\n").join("").replace(/style\=['"]\s*color\s*:\s*transparent\s*;?['"]/gis," ").replace(/(style\=)(['"])\s*color\s*:\s*transparent\s*;/gis,(match,p1,p2)=>p1+p2).replace(/scolor\s*:\s*transparent\s*;/gis,"").replace(/scolor\s*:\s*transparent\s*/gis,";"),selectionRoot=window.getSelection(),selection=instance.shadowDoms.find(d=>d.querySelector("."+shadowDomTargetClassName).parentElement===selectionRoot?.focusNode).querySelector("."+shadowDomTargetClassName).shadowRoot.getSelection();let pureContents="",spanInSpanMother="",spanInSpanMotherSame=!1,spanMotherStart=-1,spanMotherEnd=-1;const matchResult=[...thisSelfParent.querySelector("article").innerHTML.matchAll(new RegExp(selection.toString(),"g"))].filter(o=>{let selectionOffsetNumber,standard,offset,start;start=0,offset=0,selectionOffsetNumber=selection.anchorOffset,selection.focusOffset<selectionOffsetNumber&&(selectionOffsetNumber=selection.focusOffset),standard=selectionOffsetNumber-1,selection.anchorNode?.textContent&&(start=thisSelf.innerHTML.indexOf(selection.anchorNode?.textContent),offset=((thisMother,targetNode)=>{if(targetNode.nodeType===Node.TEXT_NODE){let offset=0;const stack=[],initialChildren=Array.from(thisMother.childNodes).reverse();for(const child of initialChildren)stack.push({node:child,childBoo:!0});for(;stack.length>0;){const{node:currentNode,childBoo:currentChildBoo}=stack.pop();if(currentNode.nodeType===Node.TEXT_NODE){if(currentNode===targetNode)return offset;offset+=currentNode.textContent?.length??0}else currentNode.nodeType===Node.ELEMENT_NODE?currentChildBoo&&(targetNode.parentElement&&currentNode.outerHTML===targetNode.parentElement.outerHTML&&(spanMotherStart=offset,spanMotherEnd=offset+targetNode.parentElement.outerHTML.length),offset+=currentNode.outerHTML.length):null!==currentNode.textContent&&(offset+=currentNode.textContent.length)}return spanInSpanMother=targetNode.parentElement.outerHTML,spanInSpanMotherSame=!1,pureContents=spanInSpanMother.trim().replace(/^<[^>]+>/gi,"").replace(/<\/[^>]+>$/gi,""),-1}{spanInSpanMother=targetNode.outerHTML,spanInSpanMotherSame=!0;let offset=0;const stack=[],initialChildren=Array.from(thisMother.childNodes).reverse();for(const child of initialChildren)stack.push({node:child,childBoo:!0});for(;stack.length>0;){const{node:currentNode,childBoo:currentChildBoo}=stack.pop();if(currentNode.nodeType===Node.TEXT_NODE)offset+=currentNode.textContent?.length??0;else if(currentNode.nodeType===Node.ELEMENT_NODE){if(currentNode===targetNode)return spanMotherStart=offset,spanMotherEnd=offset+targetNode.outerHTML.length,offset;currentChildBoo&&(offset+=currentNode.outerHTML.length)}else null!==currentNode.textContent&&(offset+=currentNode.textContent.length)}return-1}})(thisSelf,selection.anchorNode));const bigOne=start+standard>offset+standard?start+standard:offset+standard;return o.index>=bigOne});let isDragBoolean=!1,startIndex=-1,startNumber=-1,endNumber=-1,startSpace=0,endSpace=0;try{if(matchResult.sort((a,b)=>a.index-b.index),startIndex=0===matchResult.length?-1:matchResult[0].index,-1===startIndex)throw new Error("no index");if(selection&&selection.rangeCount>0){const range=selection.getRangeAt(0);"Range"===selection.type?(isDragBoolean=!0,startNumber=range.startOffset,endNumber=range.endOffset):"Caret"===selection.type&&(isDragBoolean=!1),range.collapsed?isDragBoolean=!1:(isDragBoolean=!0,startNumber=range.startOffset,endNumber=range.endOffset)}else isDragBoolean=!1;-1!==startIndex?-1!==startNumber&&-1!==endNumber&&(endNumber=endNumber-startNumber+startIndex,startNumber=startIndex,selection.toString().replace(/^(\s*)(\S.*\S|\S)(\s*)$/is,(match,p1,p2,p3)=>(startSpace=p1.length,endSpace=p3.length,match)),endNumber-=endSpace,startNumber+=startSpace):isDragBoolean=!1}catch(e){console.log(e),isDragBoolean=!1,startIndex=-1,startNumber=-1,endNumber=-1}const childNodes=thisSelfParent.childNodes;for(let i=childNodes.length-1;i>=0;i--){const currentNode=childNodes[i];let shouldRemove=!0;if(currentNode.nodeType===Node.ELEMENT_NODE){const currentElement=currentNode;(currentElement.classList.contains("editorContextMenuTempTempCancelBackClassName")||currentElement.classList.contains("editorContextMenuTempTempCancelArticleClassName")||currentElement.classList.contains("dashBoxSizeClassName"))&&(shouldRemove=!1)}shouldRemove&&thisSelfParent.removeChild(currentNode)}thisSelfParent.insertAdjacentHTML("afterbegin",replaceValue),self.style.height=""!==pastHeight?pastHeight:"",""!==spanInSpanMother&&""!==pureContents&&(spanInSpanMotherSame=pureContents===selection.toString());try{let thisId,thisDom,safeNumber,thisPIndex,contextResult;for(thisDom=self,thisId=null,thisPIndex=Number(self.getAttribute("data-pindex")),safeNumber=0;null===thisId&&(thisId=thisDom.getAttribute("data-dropid"),null===thisId&&null!==thisDom.parentElement&&(thisDom=thisDom.parentElement,thisId=thisDom.getAttribute("data-dropid")),!(safeNumber>10));)safeNumber++;if(contextResult="mouse"===thisType?await contextmenuPopup(event,(popupBase,numbersDictionay)=>new Promise((resolve,reject)=>{const paragraphEventList=[{title:"폰트 조정",event:async e=>{resolve("size")}},{title:"정렬 조정",event:async e=>{resolve("align")}},{title:"간격 조정",event:async e=>{resolve("spacing")}}],titleList=isDragBoolean?[{title:"조정",buttons:paragraphEventList},{title:"스타일화",buttons:[{title:"볼드",event:async e=>{resolve("bold")}},{title:"이텔릭",event:async e=>{resolve("italic")}},{title:"밑줄",event:async e=>{resolve("underline")}},{title:"서브스크립트",event:async e=>{resolve("sub")}},{title:"슈퍼스크립트",event:async e=>{resolve("sup")}},{title:"일반",event:async e=>{resolve("normal")}}]}]:[{title:"조정",buttons:paragraphEventList}];try{if(void 0===numbersDictionay)throw new Error("invalid context general status");let gap=numbersDictionay.gap,buttonHeight=numbersDictionay.buttonHeight,groupHeight=numbersDictionay.groupHeight,buttonSize=numbersDictionay.buttonSize,groupSize=numbersDictionay.groupSize,groupBetween=numbersDictionay.groupBetween,groupWeight=numbersDictionay.groupWeight,boldVisualTop=numbersDictionay.boldVisualTop,boldVisualRight=numbersDictionay.boldVisualRight,paddingTop=numbersDictionay.paddingTop,buttonWeight=numbersDictionay.buttonWeight;popupBase.style.paddingTop=String(paddingTop)+ea;for(let{title,buttons}of titleList)createAbstract({mother:popupBase,style:{display:"flex",justifyContent:"end",alignItems:"start",flexDirection:"column",height:groupHeight,width:withOut(0),marginBottom:groupBetween},child:{text:"<b%>%b> "+title,style:{display:"inline",position:"relative",fontSize:groupSize,fontWeight:groupWeight,color:colorChip.darkDarkBlack,fontFamily:"pretendard"},bold:{display:"inline",position:"relative",fontSize:groupSize,fontWeight:400,color:colorChip.mint,top:String(boldVisualTop)+ea,marginRight:String(boldVisualRight)+ea,fontFamily:"pretendard"}}}),createAbstract({mother:popupBase,style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap,width:withOut(0)},children:buttons.map(button=>({event:{click:e=>{const self=e.currentTarget,eventData={message:"next-click",timestamp:Date.now()},customEvent=new CustomEvent("nextclick",{detail:eventData,bubbles:!0,cancelable:!0});self.dispatchEvent(customEvent)},nextclick:button.event},style:{display:"inline-flex",justifyContent:"center",alignItems:"center",height:buttonHeight,borderRadius:desktop?5:1,background:instance.mintBlueColorsArr[titleList.findIndex(o=>o.title===title)],cursor:"pointer",transition:"all 0.3s ease"},child:{text:button.title,event:{selectstart:e=>e.preventDefault()},style:{fontSize:buttonSize,fontWeight:buttonWeight,color:colorChip.white,fontFamily:"pretendard"}}}))})}catch(e){reject(e)}})):["b","B","ㅠ"].includes(event.key)?"bold":["i","I","ㅑ"].includes(event.key)?"italic":["u","U","ㅕ"].includes(event.key)?"underline":["1"].includes(event.key)?"sup":["2"].includes(event.key)?"sub":["j","J","ㅓ"].includes(event.key)?"normal":/ArrowUp/gi.test(event.key)?"up":"down","size"===contextResult||"align"===contextResult||"spacing"===contextResult){await contextmenuPopup(event,popupBase=>new Promise((resolve,reject)=>{const computedStyle=window.getComputedStyle(self);instance.textParagraphContextmenu(self,popupBase,contextResult,computedStyle.fontSize,computedStyle.fontWeight,computedStyle.fontFamily,computedStyle.textAlign,computedStyle.verticalAlign,computedStyle.textIndent,computedStyle.lineHeight,computedStyle.letterSpacing,computedStyle.wordSpacing).then(s=>{reverseSave(),resolve(s)}).catch(e=>reject(e))}));justCancelEvent.bind(thisContextArea)(event)}else if("bold"===contextResult||"italic"===contextResult||"underline"===contextResult||"strike"===contextResult||"sub"===contextResult||"sup"===contextResult||"normal"===contextResult)if(isDragBoolean){const tap="  ",css={bold:`.bold {\n${tap}font-family: "pretendard";\n${tap}font-weight: 800;\n${tap}font-size: 1em;\n${tap}vertical-align: -0.05em;\n}`,italic:`.italic {\n${tap}display: inline-block;\n${tap}margin-right: 0.3em;\n${tap}transform: skewX(-15deg);\n${tap}transform-origin: 0 100%;\n}`,underline:`.underline {\n${tap}text-decoration: underline;\n${tap}text-decoration-style: solid;\n}`,strike:`.strike {\n${tap}text-decoration-line: line-through;\n${tap}text-decoration-color: red;\n${tap}text-decoration-style: solid\n}`,sub:`.sub {\n${tap}font-family: "pretendard";\n${tap}font-weight: 700;\n${tap}font-size: 0.5em;\n${tap}margin-right: 0.1em;\n${tap}vertical-align: sub;\n}`,sup:`.sup {\n${tap}font-family: "pretendard";\n${tap}font-weight: 700;\n${tap}font-size: 0.5em;\n${tap}margin-right: 0.1em;\n${tap}vertical-align: super;\n}`,normal:""}[contextResult],className=contextResult;let originalHtml,afterText,beforeText,converted,thisSection;instance.shadowHistory((d,shadowIndex)=>{const thisTarget=d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelector("style"),currentCssText=thisTarget.innerHTML;""!==css&&(new RegExp("."+className+"\\s*{","gs").test(currentCssText)||(thisTarget.innerHTML=css+"\n\n"+currentCssText))});const cssEditorView=instance.cssView,currentCssText=cssEditorView.state.doc.toString();if(""!==css&&!new RegExp("."+className+"\\s*{","gs").test(currentCssText)){const newState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:css+"\n\n"+currentCssText}});cssEditorView.dispatch(newState)}if(""===spanInSpanMother||""===spanInSpanMother.trim())thisSection=thisSelf.innerHTML.slice(startNumber,endNumber),originalHtml=thisSelf.innerHTML,afterText=originalHtml.slice(endNumber),beforeText=originalHtml.slice(0,startNumber),converted=beforeText+`<span class="${contextResult}">`+thisSection+"</span>"+afterText,thisSelf.innerHTML=converted;else if(spanInSpanMotherSame)thisSection=thisSelf.innerHTML.slice(spanMotherStart,spanMotherEnd),originalHtml=thisSelf.innerHTML,afterText=originalHtml.slice(spanMotherEnd),beforeText=originalHtml.slice(0,spanMotherStart),converted="normal"===contextResult?beforeText+pureContents+afterText:beforeText+`<span class="${contextResult}">`+pureContents+"</span>"+afterText,thisSelf.innerHTML=converted;else{let openTagLength=0,endTagLength=0,originalOpen="",originalCLose="";spanInSpanMother.replace(/^(<[^>]+>)[^<]*(<\/[^>]+>)$/gis,(match,p1,p2)=>(originalOpen=p1,originalCLose=p2,openTagLength=p1.length,endTagLength=p2.length,match)),thisSection=thisSelf.innerHTML.slice(spanMotherStart,spanMotherEnd),originalHtml=thisSelf.innerHTML,beforeText=originalHtml.slice(0,spanMotherStart),afterText=originalHtml.slice(spanMotherEnd),converted=startNumber-openTagLength===spanMotherStart?"normal"===contextResult?beforeText+thisSelf.innerHTML.slice(startNumber,endNumber)+originalOpen+originalHtml.slice(endNumber,spanMotherEnd-endTagLength)+originalCLose+afterText:beforeText+`<span class="${contextResult}">`+thisSelf.innerHTML.slice(startNumber,endNumber)+"</span>"+originalOpen+originalHtml.slice(endNumber,spanMotherEnd-endTagLength)+originalCLose+afterText:endNumber+endTagLength===spanMotherEnd?"normal"===contextResult?beforeText+originalOpen+originalHtml.slice(spanMotherStart+openTagLength,startNumber)+originalCLose+thisSelf.innerHTML.slice(startNumber,endNumber)+afterText:beforeText+originalOpen+originalHtml.slice(spanMotherStart+openTagLength,startNumber)+originalCLose+`<span class="${contextResult}">`+thisSelf.innerHTML.slice(startNumber,endNumber)+"</span>"+afterText:"normal"===contextResult?beforeText+originalOpen+originalHtml.slice(spanMotherStart+openTagLength,startNumber)+originalCLose+thisSelf.innerHTML.slice(startNumber,endNumber)+originalOpen+originalHtml.slice(endNumber,spanMotherEnd-endTagLength)+originalCLose+afterText:beforeText+originalOpen+originalHtml.slice(spanMotherStart+openTagLength,startNumber)+originalCLose+`<span class="${contextResult}">`+thisSelf.innerHTML.slice(startNumber,endNumber)+"</span>"+originalOpen+originalHtml.slice(endNumber,spanMotherEnd-endTagLength)+originalCLose+afterText,thisSelf.innerHTML=converted}textareaForceCancelEvent(thisContextArea,event)}else{justCancelEvent.bind(thisContextArea)(event)}else if("up"===contextResult||"down"===contextResult){const computedStyle=window.getComputedStyle(self),rootSizePixel=window.getComputedStyle(window.document.querySelector("html")).fontSize,rootEa="rem",toRem=targetValue=>{const base=Number(rootSizePixel.replace(/[^0-9\.\-]/gi,""));if(0===base||Number.isNaN(base))throw new Error("invalid root status");const thisValue=Number(targetValue.replace(/[^0-9\.\-]/gi,""));return String(Math.floor(thisValue/base*1e4)/1e4)+rootEa},applyValue=(position,value)=>{const thisTextArea=self.querySelector("article");"string"==typeof thisId&&instance.shadowHistory((d,shadowIndex)=>{const thisTarget=d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelector('[data-dropid="'+thisId+'"]');let finalTarget;if(finalTarget=null,instance.editorTargetTagNames.includes(thisTarget.nodeName))finalTarget=thisTarget;else{const[pTarget]=[...thisTarget.querySelectorAll([...new Set(instance.editorTargetTagNames.map(s=>s.toLowerCase()))].join(", "))].filter(d=>d.getAttribute("data-pindex")===String(thisPIndex));pTarget&&(finalTarget=pTarget)}null!==finalTarget&&(finalTarget.style[position]=value,thisTextArea.style[position]=value)})},delta=.05;let currentNumber,nextNumber,nextSize,fontSize=computedStyle.fontSize,lineHeight=computedStyle.lineHeight;0!==Number(rootSizePixel.replace(/[^0-9\.\-]/gi,""))&&(/px/gi.test(fontSize)&&(lineHeight=String(Math.floor(Number(lineHeight.replace(/[^0-9\.\-]/gi,""))/Number(fontSize.replace(/[^0-9\.\-]/gi,""))*1e3)/1e3),fontSize=toRem(fontSize)),currentNumber=Number(fontSize.replace(/[^0-9\.\-]/gi,"")),nextNumber="up"===contextResult?currentNumber+delta:currentNumber-delta,nextSize=String(nextNumber)+rootEa,applyValue("font-size",nextSize))}}catch(e){console.log(e);justCancelEvent.bind(thisContextArea)(event)}},computedStyle=window.getComputedStyle(self),lineHeight=String(Math.floor(Number(computedStyle.lineHeight.replace(/[^0-9\.\-]/gi,""))/Number(computedStyle.fontSize.replace(/[^0-9\.\-]/gi,""))*1e3)/1e3),tempEditor=createDom({mother:self,class:[instance.tempTextareaEditorClassName,"editorContextMenuTempTempCancelArticleClassName"],mode:"article",text:thisPureValue,attribute:{spellcheck:"false",contenteditable:"true",pastheight:pastHeight,draggable:"false"},previous:{class:[instance.tempTextareaEditorClassName,"dashBoxSizeClassName"],style:{position:"absolute",top:-8,left:-12,width:withOut(-24),height:withOut(-16),borderRadius:2}},event:{keydown:e=>{/Tab/gi.test(e.key)||/Enter/gi.test(e.key)?e.preventDefault():("b"===e.key||"B"===e.key||"ㅠ"===e.key||"i"===e.key||"I"===e.key||"ㅑ"===e.key||"u"===e.key||"U"===e.key||"ㅕ"===e.key||"1"===e.key||"2"===e.key||"j"===e.key||"J"===e.key||"ㅓ"===e.key||/ArrowUp/gi.test(e.key)||/ArrowDown/gi.test(e.key))&&(e.ctrlKey||e.metaKey||e.shiftKey)&&(e.preventDefault(),textareaContextmenuEvent(e))},selectstart:e=>{e.stopPropagation()},dragstart:e=>{e.preventDefault(),e.stopPropagation()},blur:e=>{if(!instance.editorBlurBan){const contextmenuPromptAsideClassName="contextmenuPromptAsideClassName";if(null===document.querySelector("."+contextmenuPromptAsideClassName))try{const self=e.currentTarget;textareaCancelEvent.bind(self)(e)}catch{}}},keyup:e=>{const thisSelf=e.currentTarget;if(thisSelf.style.height="auto",thisSelf.style.height=String(thisSelf.scrollHeight)+"px",self.style.height=String(thisSelf.scrollHeight)+"px",/Tab/gi.test(e.key)){e.preventDefault();textareaCancelEvent.bind(thisSelf)(e)}else if(/Enter/gi.test(e.key))if(e.shiftKey){e.preventDefault();const thisSelfParent=thisSelf.parentElement,selectionRoot=window.getSelection(),selection=instance.shadowDoms.find(d=>d.querySelector("."+shadowDomTargetClassName).parentElement===selectionRoot?.focusNode).querySelector("."+shadowDomTargetClassName).shadowRoot.getSelection(),findXOffset=(thisMother,targetNode)=>{let offset=0;const stack=[],initialChildren=Array.from(thisMother.childNodes).reverse();for(const child of initialChildren)stack.push({node:child,childBoo:!0});for(;stack.length>0;){const{node:currentNode,childBoo:currentChildBoo}=stack.pop();if(currentNode.nodeType===Node.TEXT_NODE){if(currentNode===targetNode)return offset;offset+=currentNode.textContent?.length??0}else currentNode.nodeType===Node.ELEMENT_NODE?currentChildBoo&&(offset+=currentNode.outerHTML.length):null!==currentNode.textContent&&(offset+=currentNode.textContent.length)}return-1},htmlFilter=s=>s.trim().split("\n").join("").replace(/style\=['"]\s*color\s*:\s*transparent\s*;?['"]/gis," ").replace(/(style\=)(['"])\s*color\s*:\s*transparent\s*;/gis,(match,p1,p2)=>p1+p2).replace(/scolor\s*:\s*transparent\s*;/gis,"").replace(/scolor\s*:\s*transparent\s*/gis,";");try{const sliceIndex=findXOffset(thisSelf,selection.anchorNode)+selection.anchorOffset,beforeText=thisSelf.innerHTML.slice(0,sliceIndex),afterText=thisSelf.innerHTML.slice(sliceIndex);let openTag,closeTag,thisDom,thisId,safeNumber,contextResult;if(selection.anchorNode?.parentElement?.nodeName&&/article/gi.test(selection.anchorNode.parentElement.nodeName)&&0!==sliceIndex&&""!==beforeText.trim()){openTag="",closeTag="",self.outerHTML.replace(/^(<[^>]+>).*(<\/[^>]+>)$/gis,(match,p1,p2)=>(openTag=p1,closeTag=p2,match)),contextResult=openTag+htmlFilter(beforeText)+closeTag+openTag+htmlFilter(afterText)+closeTag;const thisPIndex=Number(thisSelfParent.getAttribute("data-pindex")),targets=[...thisSelfParent.querySelectorAll("."+instance.tempTextareaEditorClassName)];try{for(let t of targets)t.remove()}catch{}for(self.style.height=""!==pastHeight?pastHeight:"",thisDom=thisSelfParent,thisId=null,safeNumber=0;null===thisId&&(thisId=thisDom.getAttribute("data-dropid"),null===thisId&&null!==thisDom.parentElement&&(thisDom=thisDom.parentElement,thisId=thisDom.getAttribute("data-dropid")),!(safeNumber>10));)safeNumber++;if(null!==thisId){const nowValue=(new Date).valueOf(),dropId=instance.dropAreaTempDomClassName+"_"+String(1e7*nowValue+Math.round(1e7*Math.random()));instance.shadowHistory((d,shadowIndex)=>{const thisSelf=d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelector('[data-dropid="'+String(thisId)+'"]'),parent=thisSelf.parentNode,nextDom=thisSelf.nextElementSibling,doc=(new DOMParser).parseFromString(contextResult.trim(),"text/html"),first=doc.body.children[0],second=doc.body.children[1];if(first.style.height="",second.style.height="",first.style.animation="",second.style.animation="",domToColor(first,"off"),domToColor(second,"off"),domToEventSet(first,0,360),domToEventSet(second,0,360),first.style.marginBottom=String(.6)+"rem",instance.editorTargetTagNames.includes(thisSelf.nodeName))first.setAttribute("data-dropid",String(thisId)),second.setAttribute("data-dropid",dropId),null!==nextDom?(parent.insertBefore(first,nextDom),parent.insertBefore(second,nextDom)):(parent.appendChild(first),parent.appendChild(second)),thisSelf.remove();else{const[pTarget]=[...thisSelf.querySelectorAll([...new Set(instance.editorTargetTagNames.map(s=>s.toLowerCase()))].join(", "))].filter(d=>d.getAttribute("data-pindex")===String(thisPIndex));if(pTarget){first.setAttribute("data-pindex",String(thisPIndex)),second.setAttribute("data-pindex",String(thisPIndex+1e4+Math.ceil(100*Math.random()))),first.removeAttribute("draggable"),first.removeAttribute("data-dropid"),second.removeAttribute("draggable"),second.removeAttribute("data-dropid");const nextDom=pTarget.nextElementSibling;null!==nextDom?(pTarget.parentElement.insertBefore(first,nextDom),pTarget.parentElement.insertBefore(second,nextDom)):(pTarget.parentElement.appendChild(first),pTarget.parentElement.appendChild(second)),pTarget.remove()}}}),reverseSave()}}else textareaCancelEvent(e)}catch(e){console.log(e)}}else{e.preventDefault();textareaCancelEvent.bind(thisSelf)(e)}else("b"===e.key||"B"===e.key||"ㅠ"===e.key||"i"===e.key||"I"===e.key||"ㅑ"===e.key||"u"===e.key||"U"===e.key||"ㅕ"===e.key||"1"===e.key||"2"===e.key||"j"===e.key||"J"===e.key||"ㅓ"===e.key||/ArrowUp/gi.test(e.key)||/ArrowDown/gi.test(e.key))&&(e.ctrlKey||e.metaKey||e.shiftKey)&&e.preventDefault()},paste:async e=>{e.preventDefault();const self=e.currentTarget,clipboard=e.clipboardData;if(!clipboard)return;const rawText=clipboard.getData("text/plain");if(!rawText.trim())return;const selectionRoot=window.getSelection(),selection=instance.shadowDoms.find(d=>d.querySelector("."+shadowDomTargetClassName).parentElement===selectionRoot?.focusNode).querySelector("."+shadowDomTargetClassName).shadowRoot.getSelection();if(self.focus(),!selection||0===selection.rangeCount)return;const range=selection.getRangeAt(0);if(!self.contains(range.commonAncestorContainer))return;selection.isCollapsed||range.deleteContents();const lines=rawText.split(/\r?\n/);for(let i=0;i<lines.length;i++){if(i>0){const br=document.createElement("br");range.insertNode(br),range.setStartAfter(br)}if(lines[i]){const textNode=document.createTextNode(lines[i]);range.insertNode(textNode),range.setStartAfter(textNode)}}range.collapse(!0),selection.removeAllRanges(),selection.addRange(range)},contextmenu:textareaContextmenuEvent},style:{position:"absolute",top:0,left:0,width:withOut(0),height:withOut(0),background:colorChip.transparent,border:0,outline:0,padding:0,margin:0,resize:"none",overflow:"visible",fontFamily:computedStyle.fontFamily,fontSize:computedStyle.fontSize,fontWeight:computedStyle.fontWeight,textAlign:computedStyle.textAlign,lineHeight,wordSpacing:computedStyle.wordSpacing,letterSpacing:computedStyle.letterSpacing,textIndent:computedStyle.textIndent,verticalAlign:computedStyle.verticalAlign,fontColor:colorChip.mint,display:"block",zIndex:2}}),excludes=["PRE","CODE","STYLE","OUTPUT","SCRIPT","TEXTAREA","ARTICLE","ASIDE"],targetShadow=instance.shadowDoms.find(d=>[...d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelectorAll(self.nodeName)].includes(self)),scrollTopStandard=targetShadow.firstChild?.firstChild?.firstChild,topPaddingTop=Number.isNaN(Number((targetShadow.firstChild?.firstChild).style.paddingTop.replace(/[^0-9]/gi,"")))?0:Number((targetShadow.firstChild?.firstChild).style.paddingTop.replace(/[^0-9]/gi,""));let thisUpStandard,thisDownStandard,thisStandard,previousDoms,nextDoms,siblingDoms,topNumbers,heightNumbers,thisSelfIndex,tempIndex;for(previousDoms=[],nextDoms=[],thisUpStandard=self,thisDownStandard=self,thisStandard=self,thisSelfIndex=-1;null!==thisUpStandard.previousElementSibling;)previousDoms.unshift(thisUpStandard.previousElementSibling),thisUpStandard=thisUpStandard.previousElementSibling;for(;null!==thisDownStandard.nextElementSibling;)nextDoms.push(thisDownStandard.nextElementSibling),thisDownStandard=thisDownStandard.nextElementSibling;siblingDoms=[],tempIndex=0;for(let d of previousDoms)excludes.includes(d.nodeName.toUpperCase())||(siblingDoms.push(d),tempIndex++);thisSelfIndex=tempIndex,siblingDoms.push(self),tempIndex++;for(let d of nextDoms)excludes.includes(d.nodeName.toUpperCase())||siblingDoms.push(d);topNumbers=siblingDoms.map(d=>self.getBoundingClientRect().top-scrollTopStandard.getBoundingClientRect().top+d.getBoundingClientRect().top-self.getBoundingClientRect().top+scrollTopStandard.scrollTop+topPaddingTop-scrollTopStandard.scrollTop),heightNumbers=siblingDoms.map(d=>d.getBoundingClientRect().height);const combineParagraph=e=>{e.preventDefault(),e.stopPropagation(),instance.editorBlurBan=!1;const self=e.currentTarget,index=Number(self.getAttribute("index")),grandMother=self.parentElement.parentElement,targetCombine=index=>{let targetHtml;if(targetHtml="","P"===siblingDoms[index].nodeName.toUpperCase())targetHtml=siblingDoms[index].innerHTML;else if([...siblingDoms[index].querySelectorAll("p[data-pindex]")].length>0){const targets=[...siblingDoms[index].querySelectorAll("p[data-pindex]")];for(let d of targets)targetHtml=d.innerHTML+" "}targetHtml=targetHtml.trim(),textareaCancelEvent({...e,abstract:{dropid:siblingDoms[index].getAttribute("data-dropid")},preventDefault:()=>{},currentTarget:grandMother}),thisStandard.innerHTML=thisStandard.innerHTML+" "+targetHtml,siblingDoms[index].remove()};if(Math.abs(index-thisSelfIndex)<=4||Math.abs(index-thisSelfIndex)%2==0||index<=thisSelfIndex)return targetCombine(index),new Promise((resolve,reject)=>{resolve([])});{const divideRowTargets=[],deletedId=[];divideRowTargets.push(thisStandard.firstChild.textContent.trim()),deletedId.push(siblingDoms[thisSelfIndex].getAttribute("data-dropid"));for(let i=thisSelfIndex+1;i<index+1;i++)divideRowTargets.push(siblingDoms[i].innerText.trim()),deletedId.push(siblingDoms[i].getAttribute("data-dropid"));return divideRowTargets.every(s=>""!==s.trim())&&divideRowTargets.every((s,i)=>i%2!=0||s.length<96)?(instance.globalWhiteLoading=instance.whiteProgressLoading(null,!0,!1,zIndex+10),textareaCancelEvent({...e,abstract:{},preventDefault:()=>{},currentTarget:grandMother}),instance.shadowHistory((d,i)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot;for(let t of deletedId){shadow.querySelector('[data-dropid="'+t+'"]').remove()}}),new Promise((resolve,reject)=>{resolve(divideRowTargets)})):(targetCombine(index),new Promise((resolve,reject)=>{resolve([])}))}},convertDivideRow=async e=>{e.preventDefault(),e.stopPropagation();const{left,right}=e.abstract;if(!Array.isArray(left)||!Array.isArray(right))throw new Error("invalid abstract event");instance.editorBlurBan=!1;const thisId=void 0===siblingDoms[thisSelfIndex-1]?"":String(siblingDoms[thisSelfIndex-1].getAttribute("data-dropid")),self=e.currentTarget,matrix=(Number(self.getAttribute("index")),self.parentElement.parentElement,[]);for(let i=0;i<left.length;i++)matrix.push([left[i],right[i]]);const divideResult=await instance.insertDivideRow(matrix),cssEditorView=instance.cssView,currentCssText=cssEditorView.state.doc.toString();if(divideResult.cssUpdate){const newCssState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:divideResult.css+"\n\n"+currentCssText}});cssEditorView.dispatch(newCssState)}else{const newCssState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:currentCssText+"\n\n"+divideResult.cssAfter}});cssEditorView.dispatch(newCssState)}const divLength=(new DOMParser).parseFromString(divideResult.html.trim(),"text/html").body.children.length,dropIds=variableArray(divLength).map(i=>instance.dropAreaTempDomClassName+"_"+String(100*(new Date).valueOf()+Math.round(100*Math.random())));return instance.shadowHistory((d,shadowIndex)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,targets=[...(new DOMParser).parseFromString(divideResult.html.trim(),"text/html").body.children].map(s=>s),styleTag=shadow.querySelector("style"),thisKind=d.mustAttribute("kind");let thisSelf,parent,nextDom,target,i;thisSelf=null!==shadow.querySelector('[data-dropid="'+thisId+'"]')?shadow.querySelector('[data-dropid="'+thisId+'"]'):shadow.querySelector("output"),parent=thisSelf.parentNode,nextDom=thisSelf.nextElementSibling,divideResult.cssUpdate?styleTag.innerHTML=styleTag.innerHTML+"\n\n"+divideResult.css:styleTag.innerHTML=styleTag.innerHTML+"\n\n"+divideResult.cssAfter,styleTag.innerHTML=instance.mediaInPreview(thisKind,styleTag.innerHTML),target=thisSelf,i=0;for(const raw of targets){const nextDom=target.nextElementSibling;target=raw,target.setAttribute("data-dropid",dropIds[i]),target.style.animation="",target.style.marginBottom=String(1)+"rem",domToEventSet(target,0,360),null!==nextDom?parent.insertBefore(target,nextDom):parent.appendChild(target),i++}}),null!==instance.globalWhiteLoading&&(await sleep(600),await instance.globalWhiteLoading.softRemove()),reverseSave(),matrix};createAbstract({mother:self,class:[instance.tempTextareaEditorClassName,"editorContextMenuTempTempCancelBackClassName"],event:{click$contextmenu$dblclick:textareaCancelEvent},style:{position:"absolute",top:(scrollTopStandard.getBoundingClientRect().top-self.getBoundingClientRect().top-topPaddingTop)*(1/instance.previewZoomLevel),left:0,width:String(100)+"vw",height:cssCalc(String(100)+"vh","+",pixelUnit(heightNumbers.reduce((acc,curr)=>acc+curr,0))),background:colorChip.transparent,zIndex:1},child:{style:{position:"relative",width:withOut(0),height:withOut(0),display:"block"},children:variableArray(heightNumbers.length).map(i=>({attribute:{index:String(i)},event:{mousedown:e=>{e.stopPropagation(),instance.editorBlurBan=!0},mouseup:e=>{instance.editorBlurBan=!1},click:e=>{if(instance.editorBlurBan=!1,e.ctrlKey||e.shiftKey||e.metaKey){const thisClickSelf=e.currentTarget;e.preventDefault(),e.stopPropagation(),combineParagraph(e).then(b=>{0===b.length?setTimeout(()=>{toEditorContextEvent({...thisBaseEvent,preventDefault:()=>{},stopPropagation:()=>{},currentTarget:self})},200):setTimeout(()=>{convertDivideRow({...thisBaseEvent,preventDefault:()=>{},stopPropagation:()=>{},currentTarget:thisClickSelf,abstract:{left:b.filter((a,k)=>k%2==0),right:b.filter((a,k)=>k%2==1)}}).catch(e=>console.log(e))},200)}).catch(a=>console.log(a))}},contextmenu:combineParagraph},style:{position:"absolute",top:cssCalc(pixelUnit(topNumbers[i]),"*",1/instance.previewZoomLevel),width:withOut(0),height:cssCalc(pixelUnit(heightNumbers[i]),"*",1/instance.previewZoomLevel),background:colorChip.transparent}}))}});try{tempEditor.focus()}catch{}}},sizeBoxViewEvent=(self,event,contextDirectMode=!1)=>{event.preventDefault();const originalBaseSelf=self,originalBaseEvent=event;if(!instance.editorTargetTagNames.includes(self.nodeName)){const thisSelf=self,targetShadow=instance.shadowDoms.find(d=>[...d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelectorAll(thisSelf.nodeName)].includes(thisSelf)),thisSelfComputedStyle=window.getComputedStyle(thisSelf);let pastHeight,thisMode,paddingGhostMode,thisTargetClassName;""!==thisSelf.id&&"string"==typeof thisSelf.id||(thisSelf.id="r_"+uniqueValue("short"));const thisBaseId=thisSelf.id;if(pastHeight="",self.style.height&&(pastHeight=self.style.height),paddingGhostMode=!1,/img/gi.test(self.nodeName))thisMode="img";else{if(![...self.children].every(dom=>/img/gi.test(String(dom.nodeName))))return!1;{thisMode="div";const computedStyle=window.getComputedStyle(self.children[0]);self.style.paddingTop.length>0&&/absolute/gi.test(computedStyle.position)&&(paddingGhostMode=!0)}}if("div"===thisMode){const thisSelfChildren=[...thisSelf.children].map(d=>d);if(0===thisSelfChildren.length)return;if(!thisSelfChildren.every(d=>/img/gi.test(d.nodeName.toLowerCase())))return;const thisFinalTarget=thisSelfChildren[thisSelfChildren.length-1],targetLength=6-thisSelfChildren.length,preAlt=null===thisSelf.children[0].getAttribute("alt")?"이미지 설명":String(thisSelf.children[0].getAttribute("alt"));for(let i=0;i<targetLength;i++){const selfCopied=thisFinalTarget.cloneNode(!0);try{selfCopied.classList.remove("____shadow__doms__tempclassname__temp____")}catch{}selfCopied.setAttribute("alt",preAlt),selfCopied.removeAttribute("draggable"),selfCopied.removeAttribute("data-dropid"),selfCopied.removeAttribute("data-imageindex"),selfCopied.style.animation="",thisSelf.appendChild(selfCopied)}}if(thisTargetClassName="",instance.shadowDoms.forEach(d=>{const host=d.querySelector("."+shadowDomTargetClassName);if(targetShadow===d){const thisKind=targetShadow.mustAttribute("kind"),j=instance.isInDarkMode?1:0;let i;i=/mobile/gi.test(thisKind)?0:/tablet/gi.test(thisKind)&&"bigTablet"!==thisKind?1:2,thisTargetClassName=instance.imageMediaClassNames[i]+"_"+instance.imageDarkClassNames[j]}host.style.overflow="visible"}),""===thisTargetClassName)return;if("div"===thisMode){if(void 0===[...thisSelf.children].map(d=>d).find(d=>d.classList.contains(thisTargetClassName)))return}const thisMainImageTarget="img"===thisMode?thisSelf:[...thisSelf.children].map(d=>d).find(d=>d.classList.contains(thisTargetClassName)),thisSelfFirstWidth=thisMainImageTarget.getBoundingClientRect().width,thisSelfFirstHeight=thisSelf.getBoundingClientRect().height,innerMode=null===thisSelf.getAttribute("data-dropid"),thisId=innerMode?thisSelf.getAttribute("data-imageindex"):thisSelf.getAttribute("data-dropid"),thisProperty=innerMode?"data-imageindex":"data-dropid",thisBaseSectorAttArr=[thisProperty,thisId],sizeBoxViewMainBoxClassName="sizeBoxViewMainBoxClassName",pointWhiteBoxClassName="pointWhiteBoxClassName",originalCopiedTempClassName="originalCopiedTempClassName",dashBoxSizeClassName="dashBoxSizeClassName",ghostChildrenClassName="ghostChildrenClassName",movementTargetClassName="movementTargetClassName",excludes=["PRE","CODE","STYLE","OUTPUT","SCRIPT","TEXTAREA","ARTICLE","ASIDE"],scrollTopStandard=targetShadow.children[0]?.children[0]?.children[0],topPaddingTop=Number.isNaN(Number((targetShadow.children[0]?.children[0]).style.paddingTop.replace(/[^0-9]/gi,"")))?0:Number((targetShadow.children[0]?.children[0]).style.paddingTop.replace(/[^0-9]/gi,"")),thisBaseWidth=targetShadow.querySelector("."+shadowDomTargetClassName).getBoundingClientRect().width,thisBaseHeight=thisBaseWidth*(thisSelfFirstHeight/thisSelfFirstWidth),thisSelfFirstLeft=/center/gi.test(thisSelfComputedStyle.alignItems)?(thisBaseWidth-thisSelfFirstWidth)/2:/end/gi.test(thisSelfComputedStyle.alignItems)?thisBaseWidth-thisSelfFirstWidth:0,zIndex=4;let thisUpStandard,thisDownStandard,thisStandard,previousDoms,nextDoms,siblingDoms,topNumbers,applyTopNumbers,heightNumbers,applyHeightNumbers,selfNumber,boxWidth,boxRadius,lineWidth,lineColor,clickArea,whiteBox,clickBox,expandedArea,standard,tempTarget,thisBacakgroundCover;if(boxWidth=mediaNumber(10,10,10,8,2),boxRadius=mediaNumber(3,3,3,3,1),lineWidth=1,lineColor=colorChip.mint,clickArea=4*boxWidth,expandedArea=60*boxWidth,clickBox={position:"absolute",width:clickArea,height:clickArea,display:"inline-flex",justifyContent:"center",alignItems:"center",background:colorChip.transparent,zIndex,transformOrigin:"50% 50%"},whiteBox={width:boxWidth,height:boxWidth,borderRadius:boxRadius,border:String(lineWidth)+"px solid "+lineColor,boxSizing:"border-box",background:colorChip.white,cursor:"inherit",transformOrigin:"50% 50%"},previousDoms=[],nextDoms=[],siblingDoms=[],standard=self,innerMode){for(tempTarget=self;null===tempTarget.getAttribute("data-dropid");){if(null===tempTarget.parentElement)throw new Error("invalid dom status");tempTarget=tempTarget.parentElement}standard=tempTarget}else standard=self;for(thisBacakgroundCover=String(window.getComputedStyle(standard).backgroundColor).trim(),(""===thisBacakgroundCover||"null"===thisBacakgroundCover||"undefined"===thisBacakgroundCover||/rgba\(0,\s*0,\s*0,\s*0\)/gis.test(thisBacakgroundCover)||/#00000000/gis.test(thisBacakgroundCover))&&(thisBacakgroundCover=instance.isInDarkMode?"black":"white"),thisUpStandard=standard,thisDownStandard=standard,thisStandard=standard;null!==thisUpStandard.previousElementSibling;)previousDoms.unshift(thisUpStandard.previousElementSibling),thisUpStandard=thisUpStandard.previousElementSibling;for(;null!==thisDownStandard.nextElementSibling;)nextDoms.push(thisDownStandard.nextElementSibling),thisDownStandard=thisDownStandard.nextElementSibling;for(let d of previousDoms)excludes.includes(d.nodeName.toUpperCase())||siblingDoms.push(d);siblingDoms.push(standard),selfNumber=siblingDoms.length-1;for(let d of nextDoms)excludes.includes(d.nodeName.toUpperCase())||siblingDoms.push(d);topNumbers=siblingDoms.map(d=>standard.getBoundingClientRect().top-scrollTopStandard.getBoundingClientRect().top+d.getBoundingClientRect().top-standard.getBoundingClientRect().top+scrollTopStandard.scrollTop+topPaddingTop-scrollTopStandard.scrollTop),applyTopNumbers=topNumbers.map((t,i)=>{if(i!==selfNumber)return t;if(innerMode){const thisTarget=siblingDoms[i].querySelector("["+thisProperty+'="'+thisId+'"]'),computedStyle=window.getComputedStyle(siblingDoms[i]),computedStyle2=window.getComputedStyle(thisTarget),pt=Number(computedStyle.paddingTop.replace(/[^0-9\.\-]/gis,"")),mt=Number(computedStyle2.marginTop.replace(/[^0-9\.\-]/gis,"")),pt2=Number(computedStyle2.paddingTop.replace(/[^0-9\.\-]/gis,""));let finalNumber;return finalNumber=t,Number.isNaN(pt)||(finalNumber+=pt),Number.isNaN(mt)||(finalNumber+=mt),Number.isNaN(pt2)||(finalNumber+=pt2),finalNumber}{const computedStyle=window.getComputedStyle(siblingDoms[i]),pt=Number(computedStyle.paddingTop.replace(/[^0-9\.\-]/gis,""));let finalNumber;return finalNumber=t,Number.isNaN(pt)||(finalNumber+=pt),finalNumber}}),heightNumbers=siblingDoms.map(d=>d.getBoundingClientRect().height),applyHeightNumbers=heightNumbers.map((h,i)=>{if(i!==selfNumber)return h;if(innerMode){return siblingDoms[i].querySelector("["+thisProperty+'="'+thisId+'"]').getBoundingClientRect().height}{const computedStyle=window.getComputedStyle(siblingDoms[i]),pt=Number(computedStyle.paddingTop.replace(/[^0-9\.\-]/gis,"")),pd=Number(computedStyle.paddingBottom.replace(/[^0-9\.\-]/gis,""));let finalNumber;return finalNumber=h,Number.isNaN(pt)||(finalNumber-=pt),Number.isNaN(pd)||(finalNumber-=pd),finalNumber}});const sizeBoxEndEvent=e=>{e.stopPropagation();const original=thisSelf;let widthHeightRatio,widthPercent,finalPaddingTop,finalWidthValue,finalHeightValue,thisIndex,thisDarkPairIndex,thisIndexSrc,pairSrc,innerModeFinalWidth;widthPercent=100,widthHeightRatio=1,finalPaddingTop=0,finalWidthValue="",finalHeightValue="",thisIndex=0,thisDarkPairIndex=1,innerModeFinalWidth=0,instance.shadowDoms.forEach(d=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,moveMentTarget=shadow.querySelector("."+movementTargetClassName),thisSelf=shadow.querySelector("["+thisProperty+'="'+thisId+'"]');if(null!==moveMentTarget){const originalWidth=Number(moveMentTarget.getAttribute("first_width")),originalHeight=Number(moveMentTarget.getAttribute("first_height")),finalWidth=null===moveMentTarget.getAttribute("converted_width")?originalWidth:Number(moveMentTarget.getAttribute("converted_width")),finalHeight=null===moveMentTarget.getAttribute("converted_height")?originalHeight:Number(moveMentTarget.getAttribute("converted_height")),widthRatio=innerMode?finalWidth/thisSelf.getBoundingClientRect().width:finalWidth/originalWidth,thisKind=d.mustAttribute("kind");widthPercent=Math.round(100*widthRatio*100)/100,widthHeightRatio=finalHeight/finalWidth,finalPaddingTop=Math.round(widthPercent*widthHeightRatio*100)/100,innerModeFinalWidth=thisSelf.getBoundingClientRect().width*(widthPercent/100),thisIndex=/mobile/gi.test(thisKind)?0:/tablet/gi.test(thisKind)&&"bigTablet"!==thisKind?2:4,instance.isInDarkMode?(thisDarkPairIndex=thisIndex,thisIndex+=1):thisDarkPairIndex=thisIndex+1}}),Number.isNaN(widthPercent)||0===widthPercent?(finalWidthValue=String(100)+"%",widthPercent=100):finalWidthValue=String(widthPercent)+"%",innerMode&&(finalWidthValue=String(Math.floor(innerModeFinalWidth/thisBaseWidth*1e4)/100)+"%"),instance.shadowHistory((d,shadowIndex)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,thisSelf=shadow.querySelector("["+thisProperty+'="'+thisId+'"]'),removeTargets=[...shadow.querySelectorAll("."+sizeBoxViewMainBoxClassName+", ."+originalCopiedTempClassName)].map(d=>d),parent=thisSelf.parentNode,nextDom=thisSelf.nextElementSibling,thisKind=d.mustAttribute("kind"),mediaCssString=instance.responsiveMediaCss.meida.join("\n"),darkCssString=instance.responsiveMediaCss.dark.join("\n"),styleTag=shadow.querySelector("style"),outputTag=shadow.querySelector("output");if(new RegExp("."+instance.imageResponseDivClassName,"g").test(styleTag.innerHTML)||(instance.isInDarkMode?styleTag.innerHTML=styleTag.innerHTML+"\n\n"+mediaCssString+"\n\n"+darkCssString.replace(/prefers-color-scheme\:\s*dark/gis,"min-width: 8px"):styleTag.innerHTML=styleTag.innerHTML+"\n\n"+mediaCssString,outputTag.innerHTML=outputTag.innerHTML+"\n\n"+darkCssString.replace(/prefers-color-scheme\:\s*dark/gis,"min-width: 8px")),styleTag.innerHTML=instance.mediaInPreview(thisKind,styleTag.innerHTML),outputTag.innerHTML=instance.mediaInPreview(thisKind,outputTag.innerHTML),0===shadowIndex){const cssEditorView=instance.cssView,currentCssText=cssEditorView.state.doc.toString();if(!new RegExp("."+instance.imageResponseDivClassName,"g").test(currentCssText)){const newCssState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:currentCssText+"\n\n"+mediaCssString+"\n\n"+darkCssString}});cssEditorView.dispatch(newCssState)}}if(/img/gi.test(thisSelf.nodeName)){const preAlt=null===thisSelf.getAttribute("alt")?"이미지 설명":String(thisSelf.getAttribute("alt"));thisSelf.id="";const targetMother=document.createElement("DIV");targetMother.classList.add(instance.imageResponseDivClassName),targetMother.id=thisBaseId,targetMother.setAttribute("data-dropid",String(original.getAttribute("data-dropid"))),targetMother.style.animation="";for(let i=0;i<instance.imageMediaClassNames.length;i++)for(let j=0;j<instance.imageDarkClassNames.length;j++){const selfCopied=thisSelf.cloneNode(!0),index=2*i+j;selfCopied.classList.contains(instance.imageMediaClassNames[i]+"_"+instance.imageDarkClassNames[j])||selfCopied.classList.add(instance.imageMediaClassNames[i]+"_"+instance.imageDarkClassNames[j]),selfCopied.classList.contains(instance.imageResponsive)||selfCopied.classList.add(instance.imageResponsive);try{selfCopied.classList.remove("____shadow__doms__tempclassname__temp____")}catch{}if(selfCopied.setAttribute("alt",preAlt),selfCopied.removeAttribute("draggable"),selfCopied.removeAttribute("data-dropid"),selfCopied.style.animation="",targetMother.appendChild(selfCopied),index===thisIndex||index===thisDarkPairIndex)if(innerMode){const divTarget=selfCopied.parentElement;selfCopied.style.width=String(100)+"%",selfCopied.style.height=String(100)+"%",divTarget.style.transition="all 0s ease",divTarget.style.width=finalWidthValue,divTarget.style.flexShrink=String(0),divTarget.style.flexGrow=String(0)}else selfCopied.style.width=finalWidthValue}domToEventSet(targetMother,0,360),null!==nextDom?parent.insertBefore(targetMother,nextDom):parent.appendChild(targetMother),thisSelf.remove()}else{const preAlt=null===thisSelf.children[0].getAttribute("alt")?"이미지 설명":String(thisSelf.children[0].getAttribute("alt")),childrenListRaw=[...thisSelf.children].map(d=>d),thisFinalTarget=childrenListRaw[childrenListRaw.length-1],targetLength=6-childrenListRaw.length;for(let i=0;i<targetLength;i++){const selfCopied=thisFinalTarget.cloneNode(!0);try{selfCopied.classList.remove("____shadow__doms__tempclassname__temp____")}catch{}selfCopied.setAttribute("alt",preAlt),selfCopied.removeAttribute("draggable"),selfCopied.removeAttribute("data-dropid"),selfCopied.style.animation="",thisSelf.appendChild(selfCopied)}const childrenList=[...thisSelf.children].map(d=>d);thisIndexSrc="",pairSrc="";for(let i=0;i<instance.imageMediaClassNames.length;i++)for(let j=0;j<instance.imageDarkClassNames.length;j++){const index=2*i+j,selfCopied=childrenList[index];index===thisIndex&&(thisIndexSrc=selfCopied.src),index===thisDarkPairIndex&&(pairSrc=selfCopied.src)}const pairBoo=thisIndexSrc===pairSrc;for(let i=0;i<instance.imageMediaClassNames.length;i++)for(let j=0;j<instance.imageDarkClassNames.length;j++){const index=2*i+j,selfCopied=childrenList[index];selfCopied.classList.contains(instance.imageMediaClassNames[i]+"_"+instance.imageDarkClassNames[j])||selfCopied.classList.add(instance.imageMediaClassNames[i]+"_"+instance.imageDarkClassNames[j]),selfCopied.classList.contains(instance.imageResponsive)||selfCopied.classList.add(instance.imageResponsive);try{selfCopied.classList.remove("____shadow__doms__tempclassname__temp____")}catch{}if(selfCopied.setAttribute("alt",preAlt),selfCopied.removeAttribute("draggable"),selfCopied.removeAttribute("data-dropid"),selfCopied.style.animation="",pairBoo){if(index===thisIndex||index===thisDarkPairIndex)if(innerMode){const divTarget=selfCopied.parentElement;selfCopied.style.width=String(100)+"%",selfCopied.style.height=String(100)+"%",divTarget.style.transition="all 0s ease",divTarget.style.width=finalWidthValue,divTarget.style.flexShrink=String(0),divTarget.style.flexGrow=String(0)}else selfCopied.style.width=finalWidthValue}else if(index===thisIndex)if(innerMode){const divTarget=selfCopied.parentElement;selfCopied.style.width=String(100)+"%",selfCopied.style.height=String(100)+"%",divTarget.style.transition="all 0s ease",divTarget.style.width=finalWidthValue,divTarget.style.flexShrink=String(0),divTarget.style.flexGrow=String(0)}else selfCopied.style.width=finalWidthValue}}for(let d of removeTargets)try{d.remove()}catch{}}),removeByClass(sizeBoxViewMainBoxClassName),reverseSave()},sizeContextEvent=async e=>{e.stopPropagation(),e.preventDefault();const movementTarget=e.currentTarget.children[0].children[0],originalBox=(movementTarget.children[0].children[1].children[0].children[0].children[0],movementTarget.getBoundingClientRect()),childrenList=(originalBox.width,originalBox.height,[...thisSelf.children].map(d=>d));let thisIndex,thisDarkPairIndex,thisIndexSrc,pairSrc,pairBoo;if(0===childrenList.length)return sizeBoxEndEvent(e),void setTimeout(()=>{sizeBoxViewEvent(originalBaseSelf,originalBaseEvent)},0);movementTarget.setAttribute("original_width",String(originalBox.width)),movementTarget.setAttribute("original_height",String(originalBox.height)),thisIndex=0,thisDarkPairIndex=1,pairBoo=!1,instance.shadowDoms.forEach(d=>{if(null!==d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelector("."+movementTargetClassName)){const thisKind=d.mustAttribute("kind");thisIndex=/mobile/gi.test(thisKind)?0:/tablet/gi.test(thisKind)&&"bigTablet"!==thisKind?2:4,instance.isInDarkMode?(thisDarkPairIndex=thisIndex,thisIndex+=1):thisDarkPairIndex=thisIndex+1}}),thisIndexSrc="",pairSrc="";for(let i=0;i<instance.imageMediaClassNames.length;i++)for(let j=0;j<instance.imageDarkClassNames.length;j++){const index=2*i+j,selfCopied=childrenList[index];index===thisIndex&&(thisIndexSrc=selfCopied.src),index===thisDarkPairIndex&&(pairSrc=selfCopied.src)}pairBoo=thisIndexSrc===pairSrc;const contextResult=await contextmenuPopup(event,(popupBase,numbersDictionay)=>new Promise((resolve,reject)=>{const titleList=[{title:"정렬",buttons:[{title:"왼쪽",event:async e=>{resolve("start")}},{title:"중앙",event:async e=>{resolve("center")}},{title:"오른쪽",event:async e=>{resolve("end")}}]},{title:"스타일",buttons:[{title:"투명도",event:async e=>{resolve("styleopacity")}},{title:"모서리",event:async e=>{resolve("styleborder-radius")}},{title:"배경색",event:async e=>{resolve("stylebackground")}}]}];try{if(void 0===numbersDictionay)throw new Error("invalid context general status");let gap=numbersDictionay.gap,buttonHeight=numbersDictionay.buttonHeight,groupHeight=numbersDictionay.groupHeight,buttonSize=numbersDictionay.buttonSize,groupSize=numbersDictionay.groupSize,groupBetween=numbersDictionay.groupBetween,groupWeight=numbersDictionay.groupWeight,boldVisualTop=numbersDictionay.boldVisualTop,boldVisualRight=numbersDictionay.boldVisualRight,paddingTop=numbersDictionay.paddingTop,buttonWeight=numbersDictionay.buttonWeight;popupBase.style.paddingTop=String(paddingTop)+ea;for(let{title,buttons}of titleList)createAbstract({mother:popupBase,style:{display:"flex",justifyContent:"end",alignItems:"start",flexDirection:"column",height:groupHeight,width:withOut(0),marginBottom:groupBetween},child:{text:"<b%>%b> "+title,style:{display:"inline",position:"relative",fontSize:groupSize,fontWeight:groupWeight,color:colorChip.darkDarkBlack,fontFamily:"pretendard"},bold:{display:"inline",position:"relative",fontSize:groupSize,fontWeight:400,color:colorChip.mint,top:String(boldVisualTop)+ea,marginRight:String(boldVisualRight)+ea,fontFamily:"pretendard"}}}),createAbstract({mother:popupBase,style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap,width:withOut(0)},children:buttons.map(button=>({event:{click:e=>{const self=e.currentTarget,eventData={message:"next-click",timestamp:Date.now()},customEvent=new CustomEvent("nextclick",{detail:eventData,bubbles:!0,cancelable:!0});self.dispatchEvent(customEvent)},nextclick:button.event},style:{display:"inline-flex",justifyContent:"center",alignItems:"center",height:buttonHeight,borderRadius:desktop?5:1,background:instance.mintBlueColorsArr[titleList.findIndex(o=>o.title===title)],cursor:"pointer",transition:"all 0.3s ease"},child:{text:button.title,event:{selectstart:e=>e.preventDefault()},style:{fontSize:buttonSize,fontWeight:buttonWeight,color:colorChip.white,fontFamily:"pretendard"}}}))})}catch(e){reject(e)}}));if(/^style/gi.test(contextResult)){let promptResult,targetMediaQuery,targetDarkMediaQuery,targetSelector=`#${thisBaseId}.${this.imageResponseDivClassName}`;if("styleopacity"===contextResult?(promptResult=await promptPopup("투명도를 알려주세요! (0 ~ 1 숫자 형식)"),null!==promptResult&&(promptResult=promptResult.replace(/[^0-9\-\.]/gi,""),Number.isNaN(Number(promptResult))&&(promptResult=null),promptResult=String(promptResult))):"styleborder-radius"===contextResult?(promptResult=await promptPopup("모서리의 크기를 알려주세요! (숫자 형식)"),null!==promptResult&&(promptResult=promptResult.replace(/[^0-9\-\.]/gi,""),Number.isNaN(Number(promptResult))&&(promptResult=null),promptResult=String(promptResult)+"rem")):(promptResult=await colorPicker("배경색을 알려주세요! (#000000 형식)"),null!==promptResult&&(promptResult="#"+promptResult.replace(/[^a-fA-F0-9]/gi,""),/\#[a-fA-F0-9][a-fA-F0-9][a-fA-F0-9][a-fA-F0-9][a-fA-F0-9][a-fA-F0-9]/gi.test(promptResult)||(promptResult=null))),thisIndex<2?(targetMediaQuery=`@media (max-width: ${String(instance.standardPoint[0])}rem)`,targetDarkMediaQuery=`@media (max-width: ${String(instance.standardPoint[0])}rem) and (prefers-color-scheme: dark)`):thisIndex<4?(targetMediaQuery=`@media (min-width: ${String(instance.standardPoint[0])}rem) and (max-width: ${String(instance.standardPoint[1])}rem)`,targetDarkMediaQuery=`@media (min-width: ${String(instance.standardPoint[0])}rem) and (max-width: ${String(instance.standardPoint[1])}rem) and (prefers-color-scheme: dark)`):(targetMediaQuery=`@media (min-width: ${String(instance.standardPoint[1])}rem)`,targetDarkMediaQuery=`@media (min-width: ${String(instance.standardPoint[1])}rem) and (prefers-color-scheme: dark)`),"string"==typeof promptResult){const thisProperty=contextResult.replace(/^style/gi,"").trim(),thisValue=promptResult;instance.shadowHistory((d,shadowIndex)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,thisKind=d.mustAttribute("kind"),targetMediaQueryShadow=instance.mediaInPreview(thisKind,targetMediaQuery+"{}").replace(/\{\}$/gi,""),styleTag=(instance.mediaInPreview(thisKind,targetDarkMediaQuery+"{}").replace(/\{\}$/gi,"").replace(/prefers-color-scheme\:\s*dark/gis,"min-width: 8px"),shadow.querySelector("style")),outputTag=shadow.querySelector("output");if(new RegExp("\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{[^@]*?"+thisProperty+"\\s*\\:\\s*[^\\!]+\\s*\\!important","gis").test(styleTag.innerHTML)||new RegExp("\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{[^@]*?align\\-items\\s*\\:\\s*[^\\!]+\\s*\\!important","gis").test(styleTag.innerHTML)){if(new RegExp(targetMediaQueryShadow.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{[^@]*?"+thisProperty+"\\s*\\:\\s*[^\\!]+\\s*\\!important","gis").test(styleTag.innerHTML)&&new RegExp("\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{[^@]*?align\\-items\\s*\\:\\s*[^\\!]+\\s*\\!important","gis").test(styleTag.innerHTML)){if(0===shadowIndex){const cssEditorView=instance.cssView;let currentCssText=cssEditorView.state.doc.toString();instance.isInDarkMode?(currentCssText=currentCssText.replace(new RegExp("("+targetDarkMediaQuery.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)("+thisProperty+"\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+p3+thisValue+" "+p5.trim()),pairBoo&&(currentCssText=currentCssText.replace(new RegExp("("+targetMediaQuery.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)("+thisProperty+"\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+p3+thisValue+" "+p5.trim()))):(currentCssText=currentCssText.replace(new RegExp("("+targetMediaQuery.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)("+thisProperty+"\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+p3+thisValue+" "+p5.trim()),pairBoo&&(currentCssText=currentCssText.replace(new RegExp("("+targetDarkMediaQuery.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)("+thisProperty+"\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+p3+thisValue+" "+p5.trim())));const newState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:currentCssText}});cssEditorView.dispatch(newState)}const tl=instance.mediaInPreview(thisKind,targetMediaQuery+"{}").replace(/\{\}$/gi,""),td=instance.mediaInPreview(thisKind,targetDarkMediaQuery+"{}").replace(/\{\}$/gi,"").replace(/prefers-color-scheme\:\s*dark/gis,"min-width: 8px");instance.isInDarkMode?(outputTag.innerHTML=outputTag.innerHTML.replace(new RegExp("("+td.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)("+thisProperty+"\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+p3+thisValue+" "+p5.trim()),styleTag.innerHTML=styleTag.innerHTML.replace(new RegExp("("+td.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)("+thisProperty+"\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+p3+thisValue+" "+p5.trim()),pairBoo&&(styleTag.innerHTML=styleTag.innerHTML.replace(new RegExp("("+tl.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)("+thisProperty+"\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+p3+thisValue+" "+p5.trim()))):(styleTag.innerHTML=styleTag.innerHTML.replace(new RegExp("("+tl.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)("+thisProperty+"\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+p3+thisValue+" "+p5.trim()),pairBoo&&(outputTag.innerHTML=outputTag.innerHTML.replace(new RegExp("("+td.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)("+thisProperty+"\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+p3+thisValue+" "+p5.trim())))}else if(new RegExp("\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{[^@]*?align\\-items\\s*\\:\\s*[^\\!]+\\s*\\!important","gis").test(styleTag.innerHTML)){if(0===shadowIndex){const cssEditorView=instance.cssView;let currentCssText=cssEditorView.state.doc.toString();instance.isInDarkMode?(currentCssText=currentCssText.replace(new RegExp("("+targetDarkMediaQuery.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>match+";\n"+thisProperty+": "+thisValue+" !important;\n"),pairBoo&&(currentCssText=currentCssText.replace(new RegExp("("+targetMediaQuery.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>match+";\n"+thisProperty+": "+thisValue+" !important;\n"))):(currentCssText=currentCssText.replace(new RegExp("("+targetMediaQuery.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>match+";\n"+thisProperty+": "+thisValue+" !important;\n"),pairBoo&&(currentCssText=currentCssText.replace(new RegExp("("+targetDarkMediaQuery.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>match+";\n"+thisProperty+": "+thisValue+" !important;\n")));const newState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:currentCssText}});cssEditorView.dispatch(newState)}const tl=instance.mediaInPreview(thisKind,targetMediaQuery+"{}").replace(/\{\}$/gi,""),td=instance.mediaInPreview(thisKind,targetDarkMediaQuery+"{}").replace(/\{\}$/gi,"").replace(/prefers-color-scheme\:\s*dark/gis,"min-width: 8px");instance.isInDarkMode?(outputTag.innerHTML=outputTag.innerHTML.replace(new RegExp("("+td.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>match+";\n"+thisProperty+": "+thisValue+" !important;\n"),styleTag.innerHTML=styleTag.innerHTML.replace(new RegExp("("+td.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>match+";\n"+thisProperty+": "+thisValue+" !important;\n"),pairBoo&&(styleTag.innerHTML=styleTag.innerHTML.replace(new RegExp("("+tl.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>match+";\n"+thisProperty+": "+thisValue+" !important;\n"))):(styleTag.innerHTML=styleTag.innerHTML.replace(new RegExp("("+tl.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>match+";\n"+thisProperty+": "+thisValue+" !important;\n"),pairBoo&&(outputTag.innerHTML=outputTag.innerHTML.replace(new RegExp("("+td.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>match+";\n"+thisProperty+": "+thisValue+" !important;\n")))}}else if(instance.isInDarkMode){const mediaCss=pairBoo?instance.responsiveMediaCss.div.join("\n").replace(new RegExp("("+targetMediaQuery.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+String("."+targetSelector.split(".")[1]).replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>match+";\n"+thisProperty+": "+thisValue+" !important;\n").replace(new RegExp(`\\.${this.imageResponseDivClassName}`,"gi"),targetSelector):instance.responsiveMediaCss.div.join("\n").replace(new RegExp(`\\.${this.imageResponseDivClassName}`,"gi"),targetSelector),darkCss=instance.responsiveMediaCss.divDark.join("\n").replace(new RegExp("("+targetDarkMediaQuery.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+String("."+targetSelector.split(".")[1]).replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>match+";\n"+thisProperty+": "+thisValue+" !important;\n").replace(new RegExp(`\\.${this.imageResponseDivClassName}`,"gi"),targetSelector);if(0===shadowIndex){const cssEditorView=instance.cssView,currentCssText=cssEditorView.state.doc.toString(),cssTarget=mediaCss+"\n\n"+darkCss,newState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:currentCssText+"\n\n"+cssTarget}});cssEditorView.dispatch(newState)}styleTag.innerHTML=styleTag.innerHTML+"\n\n"+mediaCss+"\n\n"+darkCss.replace(/prefers-color-scheme\:\s*dark/gis,"min-width: 8px"),outputTag.innerHTML=outputTag.innerHTML+"\n\n"+darkCss.replace(/prefers-color-scheme\:\s*dark/gis,"min-width: 8px")}else{const mediaCss=instance.responsiveMediaCss.div.join("\n").replace(new RegExp("("+targetMediaQuery.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+String("."+targetSelector.split(".")[1]).replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>match+";\n"+thisProperty+": "+thisValue+" !important;\n").replace(new RegExp(`\\.${this.imageResponseDivClassName}`,"gi"),targetSelector),darkCss=pairBoo?instance.responsiveMediaCss.divDark.join("\n").replace(new RegExp("("+targetDarkMediaQuery.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+String("."+targetSelector.split(".")[1]).replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>match+";\n"+thisProperty+": "+thisValue+" !important;\n").replace(new RegExp(`\\.${this.imageResponseDivClassName}`,"gi"),targetSelector):instance.responsiveMediaCss.divDark.join("\n").replace(new RegExp(`\\.${this.imageResponseDivClassName}`,"gi"),targetSelector);if(0===shadowIndex){const cssEditorView=instance.cssView,currentCssText=cssEditorView.state.doc.toString(),cssTarget=mediaCss+"\n\n"+darkCss,newState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:currentCssText+"\n\n"+cssTarget}});cssEditorView.dispatch(newState)}styleTag.innerHTML=styleTag.innerHTML+"\n\n"+mediaCss,outputTag.innerHTML=outputTag.innerHTML+"\n\n"+darkCss.replace(/prefers-color-scheme\:\s*dark/gis,"min-width: 8px")}if(/border\-radius/gis.test(thisProperty)){const childrenList=[...shadow.querySelector("["+thisBaseSectorAttArr[0]+"="+thisBaseSectorAttArr[1]+"]").children].map(d=>d);if(childrenList.length>0)for(let i of childrenList)i.style.borderRadius=thisValue}if(/background/gis.test(thisProperty)&&"white"!==promptResult&&"black"!==promptResult&&"#fff"!==promptResult&&"#000"!==promptResult&&"#FFF"!==promptResult&&"#ffffff"!==promptResult&&"#000000"!==promptResult&&"#FFFFFF"!==promptResult&&"transparent"!==promptResult){const childrenList=[...shadow.querySelector("["+thisBaseSectorAttArr[0]+"="+thisBaseSectorAttArr[1]+"]").children].map(d=>d);if(childrenList.length>0)for(let i of childrenList)i.style.borderRadius=""}styleTag.innerHTML=instance.mediaInPreview(thisKind,styleTag.innerHTML),outputTag.innerHTML=instance.mediaInPreview(thisKind,outputTag.innerHTML)});try{instance.reverseSave()}catch{}}}else if(["start","center","end"].includes(contextResult)){let targetMediaQuery,targetDarkMediaQuery,targetSelector=`#${thisBaseId}.${this.imageResponseDivClassName}`;thisIndex<2?(targetMediaQuery=`@media (max-width: ${String(instance.standardPoint[0])}rem)`,targetDarkMediaQuery=`@media (max-width: ${String(instance.standardPoint[0])}rem) and (prefers-color-scheme: dark)`):thisIndex<4?(targetMediaQuery=`@media (min-width: ${String(instance.standardPoint[0])}rem) and (max-width: ${String(instance.standardPoint[1])}rem)`,targetDarkMediaQuery=`@media (min-width: ${String(instance.standardPoint[0])}rem) and (max-width: ${String(instance.standardPoint[1])}rem) and (prefers-color-scheme: dark)`):(targetMediaQuery=`@media (min-width: ${String(instance.standardPoint[1])}rem)`,targetDarkMediaQuery=`@media (min-width: ${String(instance.standardPoint[1])}rem) and (prefers-color-scheme: dark)`),instance.shadowHistory((d,shadowIndex)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,thisKind=d.mustAttribute("kind"),styleTag=shadow.querySelector("style"),outputTag=shadow.querySelector("output");if(new RegExp("\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{[^@]*?align\\-items\\s*\\:\\s*[^\\!]+\\s*\\!important","gis").test(styleTag.innerHTML)){if(0===shadowIndex){const cssEditorView=instance.cssView;let currentCssText=cssEditorView.state.doc.toString();instance.isInDarkMode?(currentCssText=currentCssText.replace(new RegExp("("+targetDarkMediaQuery.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+p3+contextResult+" "+p5.trim()),pairBoo&&(currentCssText=currentCssText.replace(new RegExp("("+targetMediaQuery.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+p3+contextResult+" "+p5.trim()))):(currentCssText=currentCssText.replace(new RegExp("("+targetMediaQuery.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+p3+contextResult+" "+p5.trim()),pairBoo&&(currentCssText=currentCssText.replace(new RegExp("("+targetDarkMediaQuery.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+p3+contextResult+" "+p5.trim())));const newState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:currentCssText}});cssEditorView.dispatch(newState)}const tl=instance.mediaInPreview(thisKind,targetMediaQuery+"{}").replace(/\{\}$/gi,""),td=instance.mediaInPreview(thisKind,targetDarkMediaQuery+"{}").replace(/\{\}$/gi,"").replace(/prefers-color-scheme\:\s*dark/gis,"min-width: 8px");instance.isInDarkMode?(outputTag.innerHTML=outputTag.innerHTML.replace(new RegExp("("+td.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+p3+contextResult+" "+p5.trim()),styleTag.innerHTML=styleTag.innerHTML.replace(new RegExp("("+td.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+p3+contextResult+" "+p5.trim()),pairBoo&&(styleTag.innerHTML=styleTag.innerHTML.replace(new RegExp("("+tl.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+p3+contextResult+" "+p5.trim()))):(styleTag.innerHTML=styleTag.innerHTML.replace(new RegExp("("+tl.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+p3+contextResult+" "+p5.trim()),pairBoo&&(outputTag.innerHTML=outputTag.innerHTML.replace(new RegExp("("+td.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+targetSelector.replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+p3+contextResult+" "+p5.trim())))}else if(instance.isInDarkMode){const mediaCss=pairBoo?instance.responsiveMediaCss.div.join("\n").replace(new RegExp("("+targetMediaQuery.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+String("."+targetSelector.split(".")[1]).replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+p3+contextResult+" "+p5.trim()).replace(new RegExp(`\\.${this.imageResponseDivClassName}`,"gi"),targetSelector):instance.responsiveMediaCss.div.join("\n").replace(new RegExp(`\\.${this.imageResponseDivClassName}`,"gi"),targetSelector),darkCss=instance.responsiveMediaCss.divDark.join("\n").replace(new RegExp("("+targetDarkMediaQuery.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+String("."+targetSelector.split(".")[1]).replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+p3+contextResult+" "+p5.trim()).replace(new RegExp(`\\.${this.imageResponseDivClassName}`,"gi"),targetSelector);if(0===shadowIndex){const cssEditorView=instance.cssView,currentCssText=cssEditorView.state.doc.toString(),cssTarget=mediaCss+"\n\n"+darkCss,newState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:currentCssText+"\n\n"+cssTarget}});cssEditorView.dispatch(newState)}styleTag.innerHTML=styleTag.innerHTML+"\n\n"+mediaCss+"\n\n"+darkCss.replace(/prefers-color-scheme\:\s*dark/gis,"min-width: 8px"),outputTag.innerHTML=outputTag.innerHTML+"\n\n"+darkCss.replace(/prefers-color-scheme\:\s*dark/gis,"min-width: 8px")}else{const mediaCss=instance.responsiveMediaCss.div.join("\n").replace(new RegExp("("+targetMediaQuery.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+String("."+targetSelector.split(".")[1]).replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+p3+contextResult+" "+p5.trim()).replace(new RegExp(`\\.${this.imageResponseDivClassName}`,"gi"),targetSelector),darkCss=pairBoo?instance.responsiveMediaCss.divDark.join("\n").replace(new RegExp("("+targetDarkMediaQuery.replace(/([\(\)])/gi,(match,p1)=>"\\"+p1)+"\\s*\\{[^@]*?"+String("."+targetSelector.split(".")[1]).replace(/\./gi,"\\.")+"\\s*\\{)([^@]*?)(align\\-items\\s*\\:\\s*)([^\\!]+)(\\s*\\!important)","gis"),(match,p1,p2,p3,p4,p5)=>p1+p2+p3+contextResult+" "+p5.trim()).replace(new RegExp(`\\.${this.imageResponseDivClassName}`,"gi"),targetSelector):instance.responsiveMediaCss.divDark.join("\n").replace(new RegExp(`\\.${this.imageResponseDivClassName}`,"gi"),targetSelector);if(0===shadowIndex){const cssEditorView=instance.cssView,currentCssText=cssEditorView.state.doc.toString(),cssTarget=mediaCss+"\n\n"+darkCss,newState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:currentCssText+"\n\n"+cssTarget}});cssEditorView.dispatch(newState)}styleTag.innerHTML=styleTag.innerHTML+"\n\n"+mediaCss,outputTag.innerHTML=outputTag.innerHTML+"\n\n"+darkCss.replace(/prefers-color-scheme\:\s*dark/gis,"min-width: 8px")}styleTag.innerHTML=instance.mediaInPreview(thisKind,styleTag.innerHTML),outputTag.innerHTML=instance.mediaInPreview(thisKind,outputTag.innerHTML)})}""!==contextResult&&(sizeBoxEndEvent(e),setTimeout(async()=>{await sizeBoxViewEvent(originalBaseSelf,originalBaseEvent,!0)},100))},mousedownEvent=e=>{e.preventDefault();const clickArea=e.currentTarget,direction=Number(clickArea.getAttribute("direction")),whiteBox=clickArea.firstChild,dashBox=clickArea.parentElement.parentElement,movementTarget=(dashBox.previousElementSibling,dashBox.parentElement.parentElement),originalBox=movementTarget.getBoundingClientRect();movementTarget.setAttribute("original_width",String(originalBox.width)),movementTarget.setAttribute("original_height",String(originalBox.height)),movementTarget.setAttribute("visual_y",String(e.clientY)),movementTarget.setAttribute("visual_x",String(e.clientX)),null===movementTarget.getAttribute("first_width")&&(movementTarget.setAttribute("first_width",String(originalBox.width)),movementTarget.setAttribute("first_height",String(originalBox.height))),movementTarget.setAttribute("final_direction",String(direction)),whiteBox.setAttribute("visual_y",String(e.clientY)),whiteBox.setAttribute("visual_x",String(e.clientX)),whiteBox.setAttribute("original_width",String(originalBox.width)),whiteBox.setAttribute("original_height",String(originalBox.height)),clickArea.style.width=pixelUnit(expandedArea),clickArea.style.height=pixelUnit(expandedArea),1===direction?(clickArea.style.top=pixelUnit(expandedArea/2*-1),clickArea.style.left=pixelUnit(expandedArea/2*-1)):2===direction?(clickArea.style.top=pixelUnit(expandedArea/2*-1),clickArea.style.left=cssCalc(String(50)+"%","-",expandedArea/2)):3===direction?(clickArea.style.top=pixelUnit(expandedArea/2*-1),clickArea.style.right=pixelUnit(expandedArea/2*-1)):4===direction?(clickArea.style.top=cssCalc(String(50)+"%","-",expandedArea/2),clickArea.style.left=pixelUnit(expandedArea/2*-1)):5===direction?(clickArea.style.top=cssCalc(String(50)+"%","-",expandedArea/2),clickArea.style.right=pixelUnit(expandedArea/2*-1)):6===direction?(clickArea.style.bottom=pixelUnit(expandedArea/2*-1),clickArea.style.left=pixelUnit(expandedArea/2*-1)):7===direction?(clickArea.style.bottom=pixelUnit(expandedArea/2*-1),clickArea.style.left=cssCalc(String(50)+"%","-",expandedArea/2)):8===direction&&(clickArea.style.bottom=pixelUnit(expandedArea/2*-1),clickArea.style.right=pixelUnit(expandedArea/2*-1))},mousemoveEvent=e=>{if(1===e.buttons){e.preventDefault();const event=e,clickArea=e.currentTarget,direction=Number(clickArea.getAttribute("direction")),dashBox=(clickArea.firstChild,clickArea.parentElement.parentElement),movementTarget=dashBox.parentElement.parentElement,whiteBoxes=[...dashBox.querySelectorAll("."+pointWhiteBoxClassName)].map(d=>d),centerX=Number(movementTarget.getAttribute("visual_x")),centerY=Number(movementTarget.getAttribute("visual_y")),finalX=-1*(centerX-event.clientX),finalY=-1*(centerY-event.clientY),originalWidth=Number(movementTarget.getAttribute("original_width")),originalHeight=Number(movementTarget.getAttribute("original_height"));let finalNumber,standard,origin,thisTransform;1===direction?(standard=originalWidth,finalNumber=1-finalX/standard,origin="100% 100%",thisTransform=transformCss({scale:finalNumber}),movementTarget.style.transformOrigin=origin,movementTarget.style.transform=thisTransform,whiteBoxes.forEach(d=>{d.style.transform=transformCss({scale:1/finalNumber})})):2===direction?(standard=originalHeight,finalNumber=1-finalY/standard,origin="50% 100%",thisTransform=transformCss({scaleY:finalNumber}),movementTarget.style.transformOrigin=origin,movementTarget.style.transform=thisTransform,whiteBoxes.forEach(d=>{d.style.transform=transformCss({scaleY:1/finalNumber})})):3===direction?(standard=originalWidth,finalNumber=1- -1*finalX/standard,origin="0% 100%",thisTransform=transformCss({scale:finalNumber}),movementTarget.style.transformOrigin=origin,movementTarget.style.transform=thisTransform,whiteBoxes.forEach(d=>{d.style.transform=transformCss({scale:1/finalNumber})})):4===direction?(standard=originalWidth,finalNumber=1-finalX/standard,origin="100% 50%",thisTransform=transformCss({scaleX:finalNumber}),movementTarget.style.transformOrigin=origin,movementTarget.style.transform=thisTransform,whiteBoxes.forEach(d=>{d.style.transform=transformCss({scaleX:1/finalNumber})})):5===direction?(standard=originalWidth,finalNumber=1- -1*finalX/standard,origin="0% 50%",thisTransform=transformCss({scaleX:finalNumber}),movementTarget.style.transformOrigin=origin,movementTarget.style.transform=thisTransform,whiteBoxes.forEach(d=>{d.style.transform=transformCss({scaleX:1/finalNumber})})):6===direction?(standard=originalWidth,finalNumber=1-1*finalX/standard,origin="100% 0%",thisTransform=transformCss({scale:finalNumber}),movementTarget.style.transformOrigin=origin,movementTarget.style.transform=thisTransform,whiteBoxes.forEach(d=>{d.style.transform=transformCss({scale:1/finalNumber})})):7===direction?(standard=originalHeight,finalNumber=1- -1*finalY/standard,origin="50% 0%",thisTransform=transformCss({scaleY:finalNumber}),movementTarget.style.transformOrigin=origin,movementTarget.style.transform=thisTransform,whiteBoxes.forEach(d=>{d.style.transform=transformCss({scaleY:1/finalNumber})})):(standard=originalWidth,finalNumber=1- -1*finalX/standard,origin="0% 0%",thisTransform=transformCss({scale:finalNumber}),movementTarget.style.transformOrigin=origin,movementTarget.style.transform=thisTransform,whiteBoxes.forEach(d=>{d.style.transform=transformCss({scale:1/finalNumber})})),movementTarget.setAttribute("final_scale",thisTransform),movementTarget.setAttribute("final_origin",origin)}},mouseupEvent=e=>{e.preventDefault();const clickAreaDom=e.currentTarget,direction=Number(clickAreaDom.getAttribute("direction")),whiteBox=clickAreaDom.firstChild,dashBox=clickAreaDom.parentElement.parentElement,movementTarget=dashBox.parentElement.parentElement,originalCopied=dashBox.previousElementSibling;if(null!==movementTarget.getAttribute("final_scale")){whiteBox.removeAttribute("visual_y"),whiteBox.removeAttribute("visual_x"),clickAreaDom.style.width=pixelUnit(clickArea),clickAreaDom.style.height=pixelUnit(clickArea),1===direction?(clickAreaDom.style.top=pixelUnit(clickArea/2*-1),clickAreaDom.style.left=pixelUnit(clickArea/2*-1)):2===direction?(clickAreaDom.style.top=pixelUnit(clickArea/2*-1),clickAreaDom.style.left=cssCalc(String(50)+"%","-",clickArea/2)):3===direction?(clickAreaDom.style.top=pixelUnit(clickArea/2*-1),clickAreaDom.style.right=pixelUnit(clickArea/2*-1)):4===direction?(clickAreaDom.style.top=cssCalc(String(50)+"%","-",clickArea/2),clickAreaDom.style.left=pixelUnit(clickArea/2*-1)):5===direction?(clickAreaDom.style.top=cssCalc(String(50)+"%","-",clickArea/2),clickAreaDom.style.right=pixelUnit(clickArea/2*-1)):6===direction?(clickAreaDom.style.bottom=pixelUnit(clickArea/2*-1),clickAreaDom.style.left=pixelUnit(clickArea/2*-1)):7===direction?(clickAreaDom.style.bottom=pixelUnit(clickArea/2*-1),clickAreaDom.style.left=cssCalc(String(50)+"%","-",clickArea/2)):8===direction&&(clickAreaDom.style.bottom=pixelUnit(clickArea/2*-1),clickAreaDom.style.right=pixelUnit(clickArea/2*-1));{const scaleStatus=movementTarget.getAttribute("final_scale"),originStatus=movementTarget.getAttribute("final_origin"),originalWidth=Number(movementTarget.getAttribute("original_width")),originalHeight=Number(movementTarget.getAttribute("original_height")),whiteBoxes=[...dashBox.querySelectorAll("."+pointWhiteBoxClassName)].map(d=>d);let topRaw=/calc/gi.test(movementTarget.style.top)?"":movementTarget.style.top.replace(/[^0-9\.\-]/gi,""),leftRaw=/calc/gi.test(movementTarget.style.left)?"":movementTarget.style.left.replace(/[^0-9\.\-]/gi,""),top=0,left=0,width=originalWidth,height=originalHeight;""!==topRaw.trim()&&(top=Number(topRaw.trim())),""!==leftRaw.trim()&&(left=Number(leftRaw.trim())),/img/gi.test(originalCopied.nodeName)||originalCopied.querySelectorAll("img").forEach(i=>{i.style.width=String(100)+"%",i.style.height=String(100)+"%"}),/scaleX/gi.test(scaleStatus)?(originalCopied.style.width=movementTarget.style.width=pixelUnit(width*Number(scaleStatus.replace(/[^0-9\.\-]/gi,""))),paddingGhostMode?(movementTarget.style.height=pixelUnit(height),originalCopied.style.paddingTop=pixelUnit(height)):originalCopied.style.height=movementTarget.style.height=pixelUnit(height),originalCopied.style.transform=movementTarget.style.transform="","100% 50%"===originStatus?(movementTarget.style.top=pixelUnit(top),movementTarget.style.left=pixelUnit(left+(1-Number(scaleStatus.replace(/[^0-9\.\-]/gi,"")))*width)):"0% 50%"===originStatus&&(movementTarget.style.top=pixelUnit(top),movementTarget.style.left=pixelUnit(left))):/scaleY/gi.test(scaleStatus)?(paddingGhostMode?(movementTarget.style.height=pixelUnit(height*Number(scaleStatus.replace(/[^0-9\.\-]/gi,""))),originalCopied.style.paddingTop=pixelUnit(height*Number(scaleStatus.replace(/[^0-9\.\-]/gi,"")))):originalCopied.style.height=movementTarget.style.height=pixelUnit(height*Number(scaleStatus.replace(/[^0-9\.\-]/gi,""))),originalCopied.style.width=movementTarget.style.width=pixelUnit(width),originalCopied.style.transform=movementTarget.style.transform="","50% 100%"===originStatus?(movementTarget.style.top=pixelUnit(top+(1-Number(scaleStatus.replace(/[^0-9\.\-]/gi,"")))*height),movementTarget.style.left=pixelUnit(left)):"50% 0%"===originStatus&&(movementTarget.style.top=pixelUnit(top),movementTarget.style.left=pixelUnit(left))):(originalCopied.style.width=movementTarget.style.width=pixelUnit(width*Number(scaleStatus.replace(/[^0-9\.\-]/gi,""))),paddingGhostMode?(movementTarget.style.height=pixelUnit(height*Number(scaleStatus.replace(/[^0-9\.\-]/gi,""))),originalCopied.style.paddingTop=pixelUnit(height*Number(scaleStatus.replace(/[^0-9\.\-]/gi,"")))):originalCopied.style.height=movementTarget.style.height=pixelUnit(height*Number(scaleStatus.replace(/[^0-9\.\-]/gi,""))),originalCopied.style.transform=movementTarget.style.transform="","100% 100%"===originStatus?(movementTarget.style.top=pixelUnit(top+(1-Number(scaleStatus.replace(/[^0-9\.\-]/gi,"")))*height),movementTarget.style.left=pixelUnit(left+(1-Number(scaleStatus.replace(/[^0-9\.\-]/gi,"")))*width)):"0% 100%"===originStatus?(movementTarget.style.top=pixelUnit(top+(1-Number(scaleStatus.replace(/[^0-9\.\-]/gi,"")))*height),movementTarget.style.left=pixelUnit(left)):"100% 0%"===originStatus?(movementTarget.style.top=pixelUnit(top),movementTarget.style.left=pixelUnit(left+(1-Number(scaleStatus.replace(/[^0-9\.\-]/gi,"")))*width)):"0% 0%"===originStatus&&(movementTarget.style.top=pixelUnit(top),movementTarget.style.left=pixelUnit(left))),whiteBoxes.forEach(d=>{d.style.transform=transformCss({scale:1})}),movementTarget.setAttribute("converted_width",String(Number(movementTarget.style.width.replace(/[^0-9\.\-]/gi,"")))),movementTarget.setAttribute("converted_height",String(Number(movementTarget.style.height.replace(/[^0-9\.\-]/gi,"")))),movementTarget.setAttribute("converted_top",String(Number(movementTarget.style.top.replace(/[^0-9\.\-]/gi,"")))),movementTarget.setAttribute("converted_left",String(Number(movementTarget.style.left.replace(/[^0-9\.\-]/gi,""))))}}},mainTong=createAbstract({mother:standard,class:[sizeBoxViewMainBoxClassName],event:{click:sizeBoxEndEvent,dragstart$drop$selectstart$click$contextmenu$dblclick:e=>{e.preventDefault(),e.stopPropagation()}},attribute:{draggable:"false"},style:{position:"absolute",top:-1*topPaddingTop,left:0,width:String(100)+"vw",height:cssCalc(String(100)+"vh","+",pixelUnit(heightNumbers.reduce((acc,curr)=>acc+curr,0))),background:colorChip.transparent,zIndex:1,zoom:1/instance.previewZoomLevel},child:{attribute:{draggable:"false"},event:{click:sizeBoxEndEvent,dragstart$drop$selectstart$click$contextmenu$dblclick:e=>{e.preventDefault(),e.stopPropagation()}},style:{position:"relative",width:thisSelfFirstWidth,height:withOut(0),display:"block"},children:variableArray(heightNumbers.length).map(i=>{const targetOn=selfNumber===i,event={dragstart$drop$selectstart$click$contextmenu$dblclick:e=>{e.preventDefault(),e.stopPropagation()},mousedown:mousedownEvent,mousemove:mousemoveEvent,mouseup:mouseupEvent};return{class:[ghostChildrenClassName],attribute:{toggle:targetOn?"on":"off",draggable:"false",index:String(i)},event:targetOn?{click:contextDirectMode?sizeContextEvent:e=>{e.stopPropagation()},contextmenu$dblclick:sizeContextEvent}:{click:sizeBoxEndEvent},style:{display:targetOn?"flex":"none",position:"absolute",top:pixelUnit(applyTopNumbers[i]),left:pixelUnit(thisSelfFirstLeft),width:thisSelfFirstWidth,height:pixelUnit(applyHeightNumbers[i]),background:colorChip.transparent},child:{attribute:{draggable:"false",index:String(i)},event:targetOn?{click:e=>{e.stopPropagation()}}:{click:sizeBoxEndEvent},style:{position:"relative",width:withOut(0),height:withOut(0),background:thisBacakgroundCover},child:{attribute:{draggable:"false",index:String(i),first_width:String(innerMode?self.getBoundingClientRect().width:thisBaseWidth),first_height:String(thisBaseHeight)},event:{click:e=>{e.stopPropagation()}},class:[movementTargetClassName],style:{position:"absolute",width:withOut(0),height:withOut(0),background:colorChip.transparent},child:{attribute:{draggable:"false",index:String(i)},event:{click:e=>{e.stopPropagation()}},style:{position:"relative",width:withOut(0),height:withOut(0),background:colorChip.transparent},child:{attribute:{draggable:"false",index:String(i)},event:targetOn?{click:e=>{e.stopPropagation()}}:{click:sizeBoxEndEvent},class:[dashBoxSizeClassName],style:{position:"absolute",top:0,left:0,width:withOut(0),height:withOut(0),opacity:targetOn?1:0,boxSizing:"border-box"},children:targetOn?[{style:{display:"block",position:"relative",top:0,left:0,width:withOut(0),height:withOut(0)},children:[{class:[pointWhiteBoxClassName],attribute:{direction:String(1)},event:{...event},style:{...clickBox,top:clickArea/2*-1,left:clickArea/2*-1,cursor:"nwse-resize"},child:{style:whiteBox}},{class:[pointWhiteBoxClassName],attribute:{direction:String(2)},event:{...event},style:{...clickBox,top:clickArea/2*-1,left:cssCalc(String(50)+"%","-",clickArea/2),cursor:"ns-resize"},child:{style:whiteBox}},{class:[pointWhiteBoxClassName],attribute:{direction:String(3)},event:{...event},style:{...clickBox,top:clickArea/2*-1,right:clickArea/2*-1,cursor:"nesw-resize"},child:{style:whiteBox}},{class:[pointWhiteBoxClassName],attribute:{direction:String(4)},event:{...event},style:{...clickBox,top:cssCalc(String(50)+"%","-",clickArea/2),left:clickArea/2*-1,cursor:"ew-resize"},child:{style:whiteBox}},{class:[pointWhiteBoxClassName],attribute:{direction:String(5)},event:{...event},style:{...clickBox,top:cssCalc(String(50)+"%","-",clickArea/2),right:clickArea/2*-1,cursor:"ew-resize"},child:{style:whiteBox}},{class:[pointWhiteBoxClassName],attribute:{direction:String(6)},event:{...event},style:{...clickBox,bottom:clickArea/2*-1,left:clickArea/2*-1,cursor:"nesw-resize"},child:{style:whiteBox}},{class:[pointWhiteBoxClassName],attribute:{direction:String(7)},event:{...event},style:{...clickBox,bottom:clickArea/2*-1,left:cssCalc(String(50)+"%","-",clickArea/2),cursor:"ns-resize"},child:{style:whiteBox}},{class:[pointWhiteBoxClassName],attribute:{direction:String(8)},event:{...event},style:{...clickBox,bottom:clickArea/2*-1,right:clickArea/2*-1,cursor:"nwse-resize"},child:{style:whiteBox}}]}]:[],previous:{mode:"div",style:{width:withOut(0),height:withOut(0)}}}}}}}})}});standard.insertAdjacentElement("afterend",mainTong);const rTargets=[...mainTong.querySelectorAll("."+ghostChildrenClassName)].map(d=>d);for(let r of rTargets)"on"!==r.getAttribute("toggle")&&r.remove();const dashBox=mainTong.querySelector("."+dashBoxSizeClassName),originalRatio=thisSelfFirstHeight/thisSelfFirstWidth,originalCopied=thisMainImageTarget.cloneNode(!0),shellDiv=dashBox.previousElementSibling;if(originalCopied.style.margin=String(0),originalCopied.removeAttribute("data-pindex"),originalCopied.removeAttribute("data-dropid"),originalCopied.id="",/style\s*\=/gis.test(originalCopied.outerHTML)&&/width\s*\:/gis.test(originalCopied.outerHTML)&&"string"==typeof originalCopied.style.width&&""!==originalCopied.style.width&&/%$/gi.test(originalCopied.style.width)){const moveMentTarget=mainTong.querySelector("."+movementTargetClassName),finalWidth=(innerMode?self.getBoundingClientRect().width:thisBaseWidth)*(Number(originalCopied.style.width.replace(/[^0-9\.\-]/gi,""))/100);moveMentTarget.setAttribute("converted_width",String(finalWidth)),originalCopied.style.width=""}if(shellDiv.style.position="relative",shellDiv.style.transition="all 0s ease",shellDiv.style.width=String(100)+"%",shellDiv.style.height=pixelUnit(thisSelfFirstHeight),shellDiv.setAttribute("original-ratio",String(originalRatio)),shellDiv.appendChild(originalCopied),contextDirectMode)try{mainTong.querySelector("."+ghostChildrenClassName).click()}catch{}}},domToEventSet=(d,thisWidth,finalWidth,freshStatus=!1)=>{d.addEventListener("selectstart",event=>{event.preventDefault(),event.stopPropagation()}),d.setAttribute("draggable","true"),d.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),d.classList.add("____shadow__doms__tempclassname__temp____");try{d.removeAttribute("contenteditable")}catch{}if(instance.editorTargetTagNames.includes(d.nodeName))d.setAttribute("data-pindex",String(0)),d.addEventListener("dblclick",toEditorContextEvent);else{if(!freshStatus){const rootDropId=String(d.getAttribute("data-dropid")),innerPTargets=[...d.querySelectorAll([...new Set(instance.editorTargetTagNames.map(s=>s.toLowerCase()))].join(", "))],innerImageTargets=[...d.querySelectorAll("div."+instance.imageResponseDivClassName)];for(let i=0;i<innerPTargets.length;i++){const pTag=innerPTargets[i];pTag.setAttribute("root-dropid",rootDropId),pTag.setAttribute("data-pindex",String(i)),pTag.addEventListener("dblclick",toEditorContextEvent)}for(let i=0;i<innerImageTargets.length;i++){const imageTag=innerImageTargets[i];imageTag.setAttribute("data-imageindex",rootDropId+"_i"+String(i)),imageTag.addEventListener("dblclick",event=>{const self=event.currentTarget;sizeBoxViewEvent(self,event)})}}/div/gi.test(d.nodeName.toLowerCase())&&d.classList.contains(instance.divideRowClassName)?d.addEventListener("dblclick",async event=>{const self=event.currentTarget;event.ctrlKey||event.altKey||event.metaKey||event.shiftKey||(event.stopPropagation(),event.preventDefault(),await instance.divideRowSizeBox(event,self))}):/div/gi.test(d.nodeName.toLowerCase())&&d.classList.contains(instance.flexBoxClassName)?d.addEventListener("dblclick",async event=>{const self=event.currentTarget;event.ctrlKey||event.altKey||event.metaKey||event.shiftKey||(event.stopPropagation(),event.preventDefault(),await instance.flexSizeBox(event,self))}):instance.sizeBoxTargetTagNames.includes(d.nodeName)&&d.addEventListener("dblclick",event=>{if(null===event.currentTarget.getAttribute("data-dropid"))return;const self=event.currentTarget;sizeBoxViewEvent(self,event)})}d.addEventListener("click",async event=>{if(null!==event.currentTarget.getAttribute("data-dropid")&&(event.metaKey||event.altKey||event.ctrlKey)){const self=event.currentTarget;instance.editorTargetTagNames.includes(self.nodeName)?toEditorContextEvent(event):instance.sizeBoxTargetTagNames.includes(self.nodeName)&&sizeBoxViewEvent(self,event)}}),d.addEventListener("contextmenu",async event=>{if(event.preventDefault(),null===event.currentTarget.getAttribute("data-dropid"))return;const self=event.currentTarget,thisSelf=self,thisId=self.getAttribute("data-dropid");self.insertAdjacentHTML("afterend",'<div class="____shadow__doms__tempclassname__temp____2"></div>');const thisTempDom=self.nextElementSibling;(async()=>{for(let abstractDom of instance.shadowDoms){const removeTargets=[...abstractDom.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelectorAll(".____shadow__doms__tempclassname__temp____2")].map(d=>d).filter(d=>d!==thisTempDom);for(let t of removeTargets)t.style.animation="____shadow__doms__tempclassname__temp____2_animation_out 0.4s ease forwards",await sleep(400),t.remove()}})().catch(e=>console.log(e));const contextResult=await contextmenuPopup(event,(popupBase,numbersDictionay)=>new Promise((resolve,reject)=>{const injectionEventList=[{title:"블록 박스",event:async e=>{let promptResult,promptResult2,promptResult3;if(promptResult=await promptPopup("버튼에 들어갈 문구를 적어주세요!"),await sleep(300),promptResult2=await colorPicker("배경색을 알려주세요!"),await sleep(300),promptResult3=await colorPicker("글자색을 알려주세요!"),null!==promptResult&&null!==promptResult2&&null!==promptResult3){instance.currentMap,instance.valueParser("decode",instance.currentMap.tree.style.general).id,instance.valueParser("decode",instance.currentCssId).id;let cssString;cssString=instance.basicButtonStyle.join("\n");const cssEditorView=instance.cssView,currentCssText=cssEditorView.state.doc.toString();if(!new RegExp("."+instance.imageResponseDivClassName,"g").test(currentCssText)){const newCssState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:currentCssText+"\n\n"+cssString}});cssEditorView.dispatch(newCssState)}instance.shadowHistory((d,shadowIndex)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,styleTag=(shadow.querySelector('[data-dropid="'+thisId+'"]'),d.mustAttribute("kind"),shadow.querySelector("style"));styleTag.innerHTML=cssString+"\n\n"+styleTag.innerHTML}),reverseSave();const finalHtmlString=`<div class="${instance.basicButtonBaseClassName}"><div style="background:${promptResult2.trim()}" class="${instance.basicButtonClassName}"><p style="color:${promptResult3.trim()}">${promptResult.trim()}</p></div></div>`;resolve(finalHtmlString)}else resolve("")}},{title:"여백",event:async e=>{resolve('<div class="margin"><p>&#160;</p></div>')}},{title:"구분자",event:async e=>{resolve('<div class="divider"><p>&#160;</p></div>')}},{title:"문단",event:async e=>{resolve('<p class="paragraph">문단</p>')}},{title:"버튼",event:async e=>{resolve("<interaction>")}},{title:"표, 열",event:async e=>{resolve("<pyo>")}}],titleList=[{title:"주입",buttons:injectionEventList},{title:"액션",buttons:[{title:"여백 조정",event:async e=>{resolve("margin")}},{title:"상세 조정",event:async e=>{resolve("divide")}},{title:"삭제",event:async e=>{resolve("delete")}},{title:"트랜스폼",event:async e=>{resolve("cssinjection_transform")}},{title:"필터",event:async e=>{resolve("cssinjection_filter")}},{title:"애니메이션",event:async e=>{resolve("cssinjection_animation")}}]},{title:"전환",buttons:[{title:"제목",event:async e=>{resolve("title")}},{title:"중간 제목",event:async e=>{resolve("middle_title")}},{title:"플렉스",event:async e=>{resolve("flexbox")}},{title:"주석",event:async e=>{resolve("small_h5")}},{title:"명조 주석",event:async e=>{resolve("small_h6")}},{title:"본문",event:async e=>{resolve("paragraph")}}]},{title:"관리",buttons:[{title:"클래스",event:async e=>{resolve("classList")}},{title:"아이디",event:async e=>{resolve("idStatus")}},{title:"스타일",event:async e=>{resolve("style")}}]}];try{if(void 0===numbersDictionay)throw new Error("invalid context general status");let gap=numbersDictionay.gap,buttonHeight=numbersDictionay.buttonHeight,groupHeight=numbersDictionay.groupHeight,buttonSize=numbersDictionay.buttonSize,groupSize=numbersDictionay.groupSize,groupBetween=numbersDictionay.groupBetween,groupWeight=numbersDictionay.groupWeight,boldVisualTop=numbersDictionay.boldVisualTop,boldVisualRight=numbersDictionay.boldVisualRight,paddingTop=numbersDictionay.paddingTop,buttonWeight=numbersDictionay.buttonWeight;popupBase.style.paddingTop=String(paddingTop)+ea;for(let{title,buttons}of titleList)createAbstract({mother:popupBase,style:{display:"flex",justifyContent:"end",alignItems:"start",flexDirection:"column",height:groupHeight,width:withOut(0),marginBottom:groupBetween},child:{text:"<b%>%b> "+title,style:{display:"inline",position:"relative",fontSize:groupSize,fontWeight:groupWeight,color:colorChip.darkDarkBlack,fontFamily:"pretendard"},bold:{display:"inline",position:"relative",fontSize:groupSize,fontWeight:400,color:colorChip.mint,top:String(boldVisualTop)+ea,marginRight:String(boldVisualRight)+ea,fontFamily:"pretendard"}}}),createAbstract({mother:popupBase,style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap,width:withOut(0)},children:buttons.map(button=>({event:{click:e=>{const self=e.currentTarget,eventData={message:"next-click",timestamp:Date.now()},customEvent=new CustomEvent("nextclick",{detail:eventData,bubbles:!0,cancelable:!0});self.dispatchEvent(customEvent)},nextclick:button.event},style:{display:"inline-flex",justifyContent:"center",alignItems:"center",height:buttonHeight,borderRadius:desktop?5:1,background:instance.mintBlueColorsArr[titleList.findIndex(o=>o.title===title)],cursor:"pointer",transition:"all 0.3s ease"},child:{text:button.title,event:{selectstart:e=>e.preventDefault()},style:{fontSize:buttonSize,fontWeight:buttonWeight,color:colorChip.white,fontFamily:"pretendard"}}}))})}catch(e){reject(e)}})),tempTarget=self.nextElementSibling;tempTarget.style.animation="____shadow__doms__tempclassname__temp____2_animation_out 0.4s ease forwards",setTimeout(()=>{tempTarget.remove()},401);const paragraphCNames=["title","middle_title","paragraph","small_h5","small_h6"],styleButtons=["style","class","inline"],manageButtons=["classList","idStatus"];if(""!==contextResult)if(/^</gi.test(contextResult)){const nowValue=Math.ceil((new Date).valueOf()/10),dropId=instance.dropAreaTempDomClassName+"_"+String(100*nowValue+Math.round(100*Math.random()));if("<pyo>"===contextResult){const divideResult=await instance.insertDivideRow([]),cssEditorView=instance.cssView,currentCssText=cssEditorView.state.doc.toString();if(divideResult.cssUpdate){const newCssState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:divideResult.css+"\n\n"+currentCssText}});cssEditorView.dispatch(newCssState)}else{const newCssState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:currentCssText+"\n\n"+divideResult.cssAfter}});cssEditorView.dispatch(newCssState)}const divLength=(new DOMParser).parseFromString(divideResult.html.trim(),"text/html").body.children.length,dropIds=variableArray(divLength).map(i=>instance.dropAreaTempDomClassName+"_"+String(100*nowValue+Math.round(100*Math.random())));instance.shadowHistory((d,shadowIndex)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,thisSelf=shadow.querySelector('[data-dropid="'+thisId+'"]'),parent=thisSelf.parentNode,targets=(thisSelf.nextElementSibling,[...(new DOMParser).parseFromString(divideResult.html.trim(),"text/html").body.children].map(s=>s)),styleTag=shadow.querySelector("style"),thisKind=d.mustAttribute("kind");let target,i;divideResult.cssUpdate?styleTag.innerHTML=styleTag.innerHTML+"\n\n"+divideResult.css:styleTag.innerHTML=styleTag.innerHTML+"\n\n"+divideResult.cssAfter,styleTag.innerHTML=instance.mediaInPreview(thisKind,styleTag.innerHTML),target=thisSelf,i=0;for(const raw of targets){const nextDom=target.nextElementSibling;target=raw,target.setAttribute("data-dropid",dropIds[i]),target.style.animation="",domToEventSet(target,thisWidth,finalWidth),null!==nextDom?parent.insertBefore(target,nextDom):parent.appendChild(target),i++}})}else if("<interaction>"===contextResult){const indent="  ",cssEditorView=instance.cssView,currentCssText=cssEditorView.state.doc.toString(),inputCss=["input {",`${indent}display: none !important;`,"}","\n",`.${instance.blankDivClassName} {`,`${indent}position: relative;`,`${indent}box-sizing: border-box;`,`${indent}width: 100%;`,`${indent}margin: 0rem;`,`${indent}padding: 0rem;`,"}"].join("\n"),newCssState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:inputCss+"\n\n"+currentCssText}});let firstQuestionAnswer,popupResult,injectionClassName;if(new RegExp("input\\s*{","gis").test(currentCssText)||cssEditorView.dispatch(newCssState),firstQuestionAnswer=await promptPopup("적용 클래스를 알려주세요! (공백시, 자동 생성)"),null!==firstQuestionAnswer&&(injectionClassName=instance.hangulToEnglish(firstQuestionAnswer.trim(),!1).replace(/^\.+/gis,"").replace(/\s/gis,"_").trim(),""===injectionClassName&&(injectionClassName="c_"+uniqueValue("short")),injectionClassName=injectionClassName.replace(/^\.+/gis,"").replace(/\s/gis,"_"),popupResult=await instance.buttonHelperPopup(injectionClassName),""!==popupResult))try{const result=JSON.parse(popupResult);instance.shadowHistory((d,shadowIndex)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,thisSelf=shadow.querySelector('[data-dropid="'+thisId+'"]'),parent=thisSelf.parentNode,nextDom=thisSelf.nextElementSibling,styleTag=(d.mustAttribute("kind"),shadow.querySelector("style"));styleTag.innerHTML=styleTag.innerHTML+"\n\n"+inputCss+"\n\n"+result.css.join("\n\n");const targetMother=document.createElement("DIV");targetMother.classList.add(instance.blankDivClassName),targetMother.setAttribute("data-dropid",String(thisSelf.getAttribute("data-dropid"))),targetMother.style.animation="";const selfCopied=thisSelf.cloneNode(!0);console.log(selfCopied.classList);try{selfCopied.classList.remove("____shadow__doms__tempclassname__temp____")}catch{}selfCopied.removeAttribute("draggable"),selfCopied.removeAttribute("data-dropid"),selfCopied.style.animation="",targetMother.appendChild(selfCopied),targetMother.insertAdjacentHTML("afterbegin",result.html),selfCopied.classList.add(injectionClassName),domToEventSet(targetMother,thisWidth,finalWidth),null!==nextDom?parent.insertBefore(targetMother,nextDom):parent.appendChild(targetMother),thisSelf.remove()}),cssEditorView.dispatch(cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:result.css.join("\n\n")+"\n\n"+cssEditorView.state.doc.toString()}})),reverseSave()}catch{}}else if(new RegExp(instance.basicButtonBaseClassName).test(contextResult)){let finalPercent;finalPercent="",instance.shadowHistory((d,shadowIndex)=>{const host=d.querySelector("."+shadowDomTargetClassName),thisBaseWidth=host.getBoundingClientRect().width,thisSelf=host.shadowRoot.querySelector('[data-dropid="'+thisId+'"]'),parent=thisSelf.parentNode,nextDom=thisSelf.nextElementSibling,target=(new DOMParser).parseFromString(contextResult.trim(),"text/html").body.firstChild;target.setAttribute("data-dropid",dropId),target.style.animation="",domToEventSet(target,thisWidth,finalWidth),null!==nextDom?parent.insertBefore(target,nextDom):parent.appendChild(target),finalPercent=String(Math.round(target.children[0].getBoundingClientRect().width/thisBaseWidth*1e4)/100)+"%"}),""!==finalPercent&&instance.shadowHistory((d,shadowIndex)=>{const host=d.querySelector("."+shadowDomTargetClassName);host.getBoundingClientRect().width;host.shadowRoot.querySelector('[data-dropid="'+dropId+'"]').style.width=finalPercent})}else instance.shadowHistory((d,shadowIndex)=>{const thisSelf=d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelector('[data-dropid="'+thisId+'"]'),parent=thisSelf.parentNode,nextDom=thisSelf.nextElementSibling,target=(new DOMParser).parseFromString(contextResult.trim(),"text/html").body.firstChild;target.setAttribute("data-dropid",dropId),target.style.animation="",domToEventSet(target,thisWidth,finalWidth),null!==nextDom?parent.insertBefore(target,nextDom):parent.appendChild(target)});reverseSave()}else if(["margin","padding","border"].includes(contextResult)){if(/img/gis.test(self.nodeName.toLowerCase())){const dropId=instance.dropAreaTempDomClassName+"_"+String(Math.ceil((new Date).valueOf()/10)+0+Math.round(100*Math.random())),generatedDom=await instance.sixImageGenerate(self,[{dropId,src:self.getAttribute("src"),originalSrc:self.getAttribute("data-originalsrc")}]);await contextmenuPopup(event,popupBase=>new Promise((resolve,reject)=>{const computedStyle=window.getComputedStyle(generatedDom);instance.marginPaddingBorderBox(generatedDom,popupBase,computedStyle.marginTop,computedStyle.marginRight,computedStyle.marginBottom,computedStyle.marginLeft,computedStyle.paddingTop,computedStyle.paddingRight,computedStyle.paddingBottom,computedStyle.paddingLeft,async mainBox=>!1).then(s=>{reverseSave(),resolve(s)}).catch(e=>reject(e))}))}else{await contextmenuPopup(event,popupBase=>new Promise((resolve,reject)=>{const computedStyle=window.getComputedStyle(self);instance.marginPaddingBorderBox(self,popupBase,computedStyle.marginTop,computedStyle.marginRight,computedStyle.marginBottom,computedStyle.marginLeft,computedStyle.paddingTop,computedStyle.paddingRight,computedStyle.paddingBottom,computedStyle.paddingLeft,async mainBox=>!1).then(s=>{reverseSave(),resolve(s)}).catch(e=>reject(e))}))}reverseSave()}else if(["delete"].includes(contextResult)){let promptResult;promptResult=await promptPopup("해당 블록을 삭제할까요?","select","삭제$취소"),"삭제"===promptResult&&(instance.shadowHistory((d,shadowIndex)=>{d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelector('[data-dropid="'+thisId+'"]').remove()}),reverseSave())}else if(["copy"].includes(contextResult)){const nowValue=Math.ceil((new Date).valueOf()/10),copyDropId=instance.dropAreaTempDomClassName+"_"+String(1e4*nowValue+Math.round(1e4*Math.random()));instance.shadowHistory((d,shadowIndex)=>{const thisSelf=d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelector('[data-dropid="'+thisId+'"]'),parent=thisSelf.parentNode;thisSelf.style.animation="";const targetCopied=thisSelf.cloneNode(!0);targetCopied.setAttribute("data-dropid",copyDropId),domToEventSet(targetCopied,thisWidth,finalWidth),null!==thisSelf.nextElementSibling?parent.insertBefore(targetCopied,thisSelf.nextElementSibling):parent.appendChild(targetCopied)}),reverseSave()}else if(paragraphCNames.includes(contextResult)){const tagTargets=["p","P","h1","H1","h3","H3","h5","H5","h6","H6"];instance.shadowHistory((d,shadowIndex)=>{const thisSelf=d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelector('[data-dropid="'+thisId+'"]'),thisPIndex=Number(self.getAttribute("data-pindex")),[pTarget]=[...thisSelf.querySelectorAll([...new Set(instance.editorTargetTagNames.map(s=>s.toLowerCase()))].join(", "))].filter(d=>d.getAttribute("data-pindex")===String(thisPIndex));thisSelf.style.animation="";const replaceFunc=(match,p1,p2,p3,p4)=>{let cNames=p3.split(" ").map(s=>paragraphCNames.includes(s)?contextResult:s);return cNames=[...new Set(cNames)],p1+p2+cNames.join(" ")+p4};let thisHtmlString,thisNodeName,convertNodeName,openTag,closeTag,convertedHtml,targetCopied;thisSelf.style.setProperty("--pseudo-opacity",""),thisSelf.style.setProperty("--pseudo-padding-bottom",""),thisSelf.style.setProperty("--pseudo-margin-bottom",""),thisHtmlString=thisSelf.outerHTML.replace(/[ ]*style\=""/gi,"").trim(),thisNodeName=thisSelf.nodeName.toLowerCase(),convertNodeName="title"===contextResult?"h1":"middle_title"===contextResult?"h3":"paragraph"===contextResult?"p":"small_h5"===contextResult?"h5":"h6",tagTargets.includes(thisNodeName)?(openTag="",closeTag="",thisHtmlString.replace(/^\s*(<[^>]+>).*(<\/[^>]+>)\s*$/gis,(match,p1,p2)=>(openTag=p1,closeTag=p2,match)),convertedHtml=thisHtmlString.replace(/^\s*(<[^>]+>)(.*)(<\/[^>]+>)\s*$/gis,(match,p1,p2,p3)=>openTag.replace(new RegExp("^\\s*<\\s*"+thisNodeName,"gis"),"<"+convertNodeName).replace(/(class\s*\=\s*)(["])([^"]*)(["])/gis,replaceFunc).replace(/(class\s*\=\s*)(['])([^']*)(['])/gis,replaceFunc)+p2+closeTag.replace(new RegExp("<\\s*\\/\\s*"+thisNodeName+"\\s*>\\s*$","gis"),"</"+convertNodeName+">")),thisSelf.insertAdjacentHTML("afterend",convertedHtml),targetCopied=thisSelf.nextElementSibling,targetCopied.setAttribute("data-dropid",thisId),thisSelf.remove(),domToEventSet(targetCopied,thisWidth,finalWidth)):(openTag="",closeTag="",thisHtmlString=pTarget.outerHTML.replace(/[ ]*style\=""/gi,"").trim(),thisNodeName=pTarget.nodeName.toLowerCase(),thisHtmlString.replace(/^\s*(<[^>]+>).*(<\/[^>]+>)\s*$/gis,(match,p1,p2)=>(openTag=p1,closeTag=p2,match)),convertedHtml=thisHtmlString.replace(/^\s*(<[^>]+>)(.*)(<\/[^>]+>)\s*$/gis,(match,p1,p2,p3)=>openTag.replace(new RegExp("^\\s*<\\s*"+thisNodeName,"gis"),"<"+convertNodeName).replace(/(class\s*\=\s*)(["])([^"]*)(["])/gis,replaceFunc).replace(/(class\s*\=\s*)(['])([^']*)(['])/gis,replaceFunc)+p2+closeTag.replace(new RegExp("<\\s*\\/\\s*"+thisNodeName+"\\s*>\\s*$","gis"),"</"+convertNodeName+">")),pTarget.insertAdjacentHTML("afterend",convertedHtml),targetCopied=pTarget.nextElementSibling,targetCopied.setAttribute("root-dropid",thisId),targetCopied.setAttribute("data-pindex",String(thisPIndex)),pTarget.remove())}),reverseSave()}else if(["flexbox"].includes(contextResult)){const tap="  ",cssString=`.${instance.flexBoxClassName} {\n${tap}display: flex;\n${tap}flex-direction: column;\n}`,cssEditorView=instance.cssView,currentCssText=cssEditorView.state.doc.toString();if(!new RegExp("."+instance.flexBoxClassName,"g").test(currentCssText)){const newCssState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:cssString+"\n\n"+currentCssText}});cssEditorView.dispatch(newCssState)}instance.shadowHistory((d,shadowIndex)=>{const thisSelf=d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelector('[data-dropid="'+thisId+'"]');thisSelf.style.animation="",thisSelf.insertAdjacentHTML("beforebegin",`<div class="${instance.flexBoxClassName}"></div>`);const tempMother=thisSelf.previousElementSibling;tempMother.setAttribute("data-dropid",String(thisSelf.getAttribute("data-dropid"))),thisSelf.removeAttribute("data-dropid"),tempMother.setAttribute("draggable","true"),thisSelf.removeAttribute("draggable"),tempMother.classList.add("____shadow__doms__tempclassname__temp____"),thisSelf.classList.remove("____shadow__doms__tempclassname__temp____"),0===[...thisSelf.classList].length&&thisSelf.removeAttribute("class"),tempMother.appendChild(thisSelf)}),reverseSave(),setQueue(()=>{instance.whitePopupCloseEvent(new Event("click")),setQueue(()=>{instance.previewPopup().catch(e=>console.log(e))},200)},0)}else if(styleButtons.includes(contextResult)){let thisDomCss,thisSelfOriginalCssBackup;thisDomCss=[],instance.shadowDoms.forEach((d,i)=>{if(0===i){const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,thisSelf=shadow.querySelector('[data-dropid="'+thisId+'"]'),getDictionary=(shadow.styleSheets,targetDom=>{const targetArrArr=domCssDictionary(targetDom,shadow),targetClassList=[...targetDom.classList].filter(c=>!/____shadow__doms__tempclassname__temp/g.test(c)).map(c=>"."+c);"string"==typeof targetDom.id&&""!==targetDom.id.trim()&&0===targetArrArr[1].length&&targetArrArr[1].push({css:{},media:"",selector:"#"+targetDom.id.trim(),type:"id"});for(let selector of targetClassList)targetArrArr[2].map(o=>o.selector).includes(selector)||targetArrArr[2].push({css:{},media:"",selector,type:"class"});return targetArrArr}),recursionParsing=targetDom=>{const childElements=[...targetDom.children].map(c=>c);let targets;targets=[];for(let c of childElements){targets.includes(c)||targets.push(c);const childChild=recursionParsing(c);for(let a of childChild)targets.includes(a)||targets.push(a)}return targets},allChildrenDoms=recursionParsing(thisSelf),startMatrix=getDictionary(thisSelf);for(let h of allChildrenDoms){const[,b,c,d]=getDictionary(h),targetTwo=b.filter(dict=>-1===startMatrix[1].findIndex(original=>original.selector===dict.selector&&original.media===dict.media)),targetThree=c.filter(dict=>-1===startMatrix[2].findIndex(original=>original.selector===dict.selector&&original.media===dict.media)),targetFour=d.filter(dict=>-1===startMatrix[3].findIndex(original=>original.selector===dict.selector&&original.media===dict.media));for(let bb of targetTwo)startMatrix[1].push(objectDeepCopy(bb));for(let cc of targetThree)startMatrix[2].push(objectDeepCopy(cc));for(let dd of targetFour)startMatrix[3].push(objectDeepCopy(dd))}thisDomCss=startMatrix,thisSelfOriginalCssBackup=objectDeepCopy(startMatrix)}});const originalCssArr=thisDomCss.flat(),cssStrings=await instance.cssStatusPopup(thisDomCss);let inlineCss,idCss,classCss,tagCss,loopTargets,updatedCssBlocks,updatedCssBlocksMedia,updatedCssBlocksKeyframes,generalCssId,generalCssObject,generalCssText,newGeneralCssText,newLocalCssText,localCssId,localCssObject,localCssText,generalMediaCssText,localMediaCssText,generalKeyframesCssText,localKeyframesCssText,generalMediaCssTextArr,localMediaCssTextArr,generalKeyframesCssTextArr,localKeyframesCssTextArr,generalCssTextArr,localCssTextArr,generalMediaBlocks,localMediaBlocks,tempMediaCondition,tempMediaContents,tempCssDictionary,generalCssRawArr,localCssRawArr,generalCssBlocksMedia,localCssBlocksMedia,cssEditorView,newState,finalGeneralCssTextArr,finalLocalCssTextArr,thisClassList,thisClassListSet,updatedSelectorSet;inlineCss=cssStrings[0].length>0?cssStrings[0][0].replace(/^\$[^\{}]+\{/gi,"").replace(/\}$/gi,"").trim().split("\n").map(s=>s.trim()).filter(s=>""!==s).map(s=>/;$/.test(s)?s:s+";").join("\n").trim():"",idCss=cssStrings[1],classCss=cssStrings[2],tagCss=cssStrings[3],loopTargets=idCss.concat(classCss).concat(tagCss),updatedCssBlocks=[],updatedCssBlocksMedia=[],updatedCssBlocksKeyframes=[],thisClassList=[],loopTargets=loopTargets.map(s=>s.trim()).map(s=>/^@media\s*/gis.test(s)&&/\(min\-width:\s*8px\)/gis.test(s)?s.replace(/\(min\-width:\s*8px\)/gis,"(prefers-color-scheme: dark)"):s),instance.shadowHistory((d,i)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,thisSelf=shadow.querySelector('[data-dropid="'+thisId+'"]'),styleTag=shadow.querySelector("style"),styleSheetList=shadow.styleSheets,sheet=styleTag.sheet,thisKind=d.mustAttribute("kind");""!==inlineCss?thisSelf.setAttribute("style",inlineCss):(thisSelf.setAttribute("style",inlineCss),thisSelf.removeAttribute("style"));const selectorsArr=[];for(let block of loopTargets)if(!/^@/.test(block)){const trimmedSelector=block.split("{")[0].trim().replace(/\n/gi," ").replace(/  /g," ").trim();selectorsArr.push(trimmedSelector)}let thisSelector,thisStyleString,thisStyleArr,styleDictionary,thisSelectorOriginal,thisOriginalString,thisStyleOriginalString,thisStyleOriginalArr,styleDictionaryOriginal,selectorArr0,selectorArr1,newRuleTexts,thisFinalStringCss,thisFinalBlock,allRulesText,tempMediaCondition,tempMediaContents,thisMediaBlocks,tempCssDictionary,cssRawArr;thisSelector="",thisStyleString="",newRuleTexts=[],thisFinalStringCss="",allRulesText="",updatedCssBlocks=[],updatedCssBlocksMedia=[],updatedCssBlocksKeyframes=[],thisClassList=[],thisClassList=[...thisSelf.classList].filter(s=>!/____shadow__doms__tempclassname/gi.test(s)).map(s=>"."+s),thisSelf.id&&""!==thisSelf.id&&thisClassList.push("#"+thisSelf.id),thisClassList=[...new Set(thisClassList)],thisClassList=thisClassList.concat(),thisClassList=thisClassList.concat(thisClassList.map(s=>thisSelf.nodeName.toLowerCase()+s));for(let thisBlockString of loopTargets)if(/^@/.test(thisBlockString))if(/@media/gi.test(thisBlockString)){tempMediaCondition="",tempMediaContents=thisBlockString.trim().replace(/^@media\s+(.+?)\s*\{/gis,(match,p1)=>(tempMediaCondition=p1.trim(),"")).replace(/\}\s*$/gis,"").trim(),thisMediaBlocks=[],tempMediaContents.replace(/\s*([^\{]+)\s*\{([^\}]*)\}/gis,(match,p1,p2)=>(thisMediaBlocks.push({selector:p1.trim(),raw:match.trim(),cssRaw:p2.trim()}),match));for(let{selector,raw,cssRaw}of thisMediaBlocks){cssRawArr=cssRaw.trim().split(";").map(s=>s.trim()).filter(s=>""!==s),tempCssDictionary={};for(let s of cssRawArr){const[p,v]=s.split(":").map(k=>k.trim());tempCssDictionary[p.trim()]=v.trim()}updatedCssBlocksMedia.push({selector,raw,media:tempMediaCondition,css:objectDeepCopy(tempCssDictionary)})}newRuleTexts.push(thisBlockString)}else/@keyframes/gi.test(thisBlockString)&&updatedCssBlocksKeyframes.push(thisBlockString),newRuleTexts.push(thisBlockString);else{thisBlockString.replace(/^\s*([^\{]+)\s*\{([^\}]*)\}\s*$/gis,(match,p1,p2)=>(thisSelector=p1.trim().replace(/\n/g," "),thisStyleString=p2.trim().split("\n").map(s=>s.trim()).filter(s=>""!==s).join(""),match)),thisStyleArr=thisStyleString.split(";").map(s=>s.trim()).filter(s=>""!==s),styleDictionary={};for(let s of thisStyleArr){const[p,v]=s.split(":").map(k=>k.trim());styleDictionary[p.trim()]=v.trim()}thisStyleOriginalString="",thisStyleOriginalArr=[],styleDictionaryOriginal={};for(let i=sheet.cssRules.length-1;i>=0;i--){const rule=sheet.cssRules[i];if(rule instanceof CSSStyleRule){const styleRule=rule;if(!/^@/.test(styleRule.cssText.trim())&&selectorsArr.includes(styleRule.selectorText.trim())&&(thisSelectorOriginal=styleRule.selectorText.trim(),selectorArr0=thisSelector.split(","),selectorArr1=thisSelectorOriginal.split(","),selectorArr0.map(s=>s.trim()).filter(s=>""!==s).sort(),selectorArr1.map(s=>s.trim()).filter(s=>""!==s).sort(),thisSelector===thisSelectorOriginal||selectorArr0.join(",")===selectorArr1.join(","))){thisOriginalString=styleRule.cssText.trim(),thisOriginalString.replace(/^\s*([^\{]+)\s*\{([^\}]*)\}\s*$/gis,(match,p1,p2)=>(thisStyleOriginalString=p2.trim().split("\n").map(s=>s.trim()).filter(s=>""!==s).join(""),match)),thisStyleOriginalArr=thisStyleOriginalString.split(";").map(s=>s.trim()).filter(s=>""!==s);for(let s of thisStyleOriginalArr){const[p,v]=s.split(":").map(k=>k.trim());styleDictionaryOriginal[p.trim()]=v.trim()}try{sheet.deleteRule(i)}catch{}}}}thisFinalStringCss="",thisFinalBlock="";for(let k in styleDictionary)thisFinalStringCss+=k+": "+styleDictionary[k]+";\n";thisFinalBlock=thisSelector+" {\n"+thisFinalStringCss.trim()+"\n}",updatedCssBlocks.push({selector:thisSelector,css:objectDeepCopy(styleDictionary),raw:thisFinalBlock}),newRuleTexts.push(thisFinalBlock)}for(let cssDict of originalCssArr)for(let i=0;i<styleSheetList.length;i++){const sheet=styleSheetList[i];if(sheet.ownerNode instanceof HTMLStyleElement)try{if(sheet.cssRules){const cssRulesArray=Array.from(sheet.cssRules).map(rule=>rule.cssText.trim());for(let i=cssRulesArray.length-1;i>=0;i--){const rule=cssRulesArray[i];let thisSelector="";if(/^@media/.test(rule))rule.trim().replace(/^@media\s+.+?\s*\{/gis,"").replace(/\}\s*$/gis,"").replace(/^\s*([^\{]+)\s*\{([^\}]*)\}\s*$/gis,(match,p1,p2)=>(thisSelector=p1.trim().replace(/\n/g," "),match));else{if(/@keyframes/gi.test(rule))continue;rule.replace(/^\s*([^\{]+)\s*\{([^\}]*)\}\s*$/gis,(match,p1,p2)=>(thisSelector=p1.trim().replace(/\n/g," "),match))}const a0=thisSelector.trim(),a1=cssDict.selector,a0Arr=a0.split(",").map(s=>s.trim()).filter(s=>""!==s),a1Arr=a1.split(",").map(s=>s.trim()).filter(s=>""!==s);if(a0Arr.sort(),a1Arr.sort(),a0Arr.join(",")===a1Arr.join(","))try{sheet.deleteRule(i)}catch{}}}}catch{}}for(let newRuleText of newRuleTexts)try{if(thisSelector="",newRuleText.replace(/^\s*([^\{]+)\s*\{([^\}]*)\}\s*$/gis,(match,p1,p2)=>(thisSelector=p1.trim().replace(/\n/g," ").trim(),match)),""!==thisSelector&&!/,/gi.test(thisSelector))if(/\.[^\.:\s#\(\)\{\}~\+\/\\\*]+(::?[^:\s]*)?$/is.test(thisSelector)){if(!thisSelf.classList.contains(thisSelector.replace(/^\./gi,""))){const thisSelfPureClassList=[...new Set(thisSelfOriginalCssBackup[2].map(c=>c.selector.trim()))].map(s=>s.trim().replace(/^\./gi,""));thisSelfPureClassList.includes(thisSelector.replace(/^\./gi,""))||thisSelf.classList.add(thisSelector.replace(/^\./gi,""))}}else/#[^\.:\s#\(\)\{\}~\+\/\\\*]+(::?[^:\s]*)?$/is.test(thisSelector)&&thisSelf.id!==thisSelector.replace(/^\#/gi,"")&&(thisSelf.id=thisSelector.replace(/^\#/gi,""));const newIndex=sheet.cssRules.length;if(/\(\s*prefers\-color\-scheme:\s*dark\s*\)/gis.test(newRuleText)){const convertedString=newRuleText.replace(/\(\s*prefers\-color\-scheme:\s*dark\s*\)/gis,"(min-width: 8px)"),styleTag=shadow.querySelector("style"),outputTag=shadow.querySelector("output");let selector,tempRawString,thisMediaConditionString;selector="",thisMediaConditionString="",tempRawString=convertedString.replace(/(@media\s+.+?\s*\{\s*)/gis,(match,p1,p2,p3)=>(thisMediaConditionString=p1.trim(),"")).trim(),tempRawString.replace(/^\s*([^\{]*)\{/gis,(match,p1)=>(selector=p1.trim(),match)),""!==selector&&(new RegExp(thisMediaConditionString+".*?"+selector,"gis").test(styleTag.innerHTML)||(outputTag.innerHTML=outputTag.innerHTML+"\n\n"+convertedString)),instance.isInDarkMode&&sheet.insertRule(convertedString,newIndex)}else sheet.insertRule(newRuleText,newIndex)}catch{}for(let i=0;i<sheet.cssRules.length;i++){allRulesText+=sheet.cssRules[i].cssText+"\n"}styleTag.innerHTML=instance.mediaInPreview(thisKind,allRulesText)}),generalCssId=instance.valueParser("decode",instance.currentMap.tree.style.general).id,[generalCssObject]=await back.frontRead(instance.collectionString,{_id:generalCssId}),generalCssText=generalCssObject.data,localCssId=instance.valueParser("decode",instance.currentCssId).id,[localCssObject]=await back.frontRead(instance.collectionString,{_id:localCssId}),localCssText=localCssObject.data,generalMediaCssText="",generalMediaCssTextArr=[],generalKeyframesCssText="",generalKeyframesCssTextArr=[],generalCssText=generalCssText.replace(/\/\*[\s\S]*?\*\//gis,"").replace(/\s*@media[^\{]*\s*\{[^@]*?\}\s*\}/gis,match=>(generalMediaCssTextArr.push(match.trim()),generalMediaCssText+=match,generalMediaCssText+="\n\n","")).replace(/\s*@(keyframes|font\-face)[^\{]*\s*\{[^@]*?\}(\s*\})?/gis,match=>(generalKeyframesCssTextArr.push(match.trim()),generalKeyframesCssText+=match,generalKeyframesCssText+="\n\n","")).trim(),generalMediaCssText=generalMediaCssText.trim(),generalKeyframesCssText=generalKeyframesCssText.trim(),generalCssTextArr=[],generalCssText.replace(/\s*([^\{]+)\s*\{([^\}]*)\}/gis,(match,p1,p2)=>{const thisStyleArr=p2.trim().split(";").map(s=>s.trim()).filter(s=>""!==s),styleDictionary={};for(let s of thisStyleArr){const[p,v]=s.split(":").map(k=>k.trim());styleDictionary[p.trim()]=v.trim()}return generalCssTextArr.push({selector:p1.trim(),raw:match.trim(),css:styleDictionary}),match}),localMediaCssText="",localMediaCssTextArr=[],localKeyframesCssText="",localKeyframesCssTextArr=[],localCssText=localCssText.replace(/\/\*[\s\S]*?\*\//gis,"").replace(/\s*@media[^\{]*\s*\{[^@]*?\}\s*\}/gis,match=>(localMediaCssText+=match,localMediaCssTextArr.push(match.trim()),localMediaCssText+="\n\n","")).replace(/\s*@(keyframes|font\-face)[^\{]*\s*\{[^@]*?\}(\s*\})?/gis,match=>(localKeyframesCssText+=match,localKeyframesCssTextArr.push(match.trim()),localKeyframesCssText+="\n\n","")).trim(),localMediaCssText=localMediaCssText.trim(),localKeyframesCssText=localKeyframesCssText.trim(),localCssTextArr=[],localCssText.replace(/\s*([^\{]+)\s*\{([^\}]*)\}/gis,(match,p1,p2)=>{const thisStyleArr=p2.trim().split(";").map(s=>s.trim()).filter(s=>""!==s),styleDictionary={};for(let s of thisStyleArr){const[p,v]=s.split(":").map(k=>k.trim());styleDictionary[p.trim()]=v.trim()}return localCssTextArr.push({selector:p1.trim(),raw:match.trim(),css:styleDictionary}),match}),generalMediaBlocks=[];for(let t of generalMediaCssTextArr)tempMediaCondition="",tempMediaContents=t.trim().replace(/^@media\s+(.+?)\s*\{/gis,(match,p1)=>(tempMediaCondition=p1.trim(),"")).replace(/\}\s*$/gis,"").trim(),tempMediaContents.replace(/\s*([^\{]+)\s*\{([^\}]*)\}/gis,(match,p1,p2)=>(generalMediaBlocks.push({selector:p1.trim(),raw:match.trim(),cssRaw:p2.trim(),media:tempMediaCondition}),match));generalCssBlocksMedia=[];for(let{selector,raw,cssRaw,media}of generalMediaBlocks){generalCssRawArr=cssRaw.trim().split(";").map(s=>s.trim()).filter(s=>""!==s),tempCssDictionary={};for(let s of generalCssRawArr){const[p,v]=s.split(":").map(k=>k.trim());tempCssDictionary[p.trim()]=v.trim()}generalCssBlocksMedia.push({selector,raw,media,css:objectDeepCopy(tempCssDictionary)})}localMediaBlocks=[];for(let t of localMediaCssTextArr)tempMediaCondition="",tempMediaContents=t.trim().replace(/^@media\s+(.+?)\s*\{/gis,(match,p1)=>(tempMediaCondition=p1.trim(),"")).replace(/\}\s*$/gis,"").trim(),tempMediaContents.replace(/\s*([^\{]+)\s*\{([^\}]*)\}/gis,(match,p1,p2)=>(localMediaBlocks.push({selector:p1.trim(),raw:match.trim(),cssRaw:p2.trim(),media:tempMediaCondition}),match));localCssBlocksMedia=[];for(let{selector,raw,cssRaw,media}of localMediaBlocks){localCssRawArr=cssRaw.trim().split(";").map(s=>s.trim()).filter(s=>""!==s),tempCssDictionary={};for(let s of localCssRawArr){const[p,v]=s.split(":").map(k=>k.trim());tempCssDictionary[p.trim()]=v.trim()}localCssBlocksMedia.push({selector,raw,media,css:objectDeepCopy(tempCssDictionary)})}const selectorCompare=(s0,s1)=>{const s0Arr=s0.split(",").map(s=>s.trim()).filter(s=>""!==s),s1Arr=s1.split(",").map(s=>s.trim()).filter(s=>""!==s);let boo;return boo=!1,s0Arr.sort(),s1Arr.sort(),(s0.trim()===s1.trim()||s0Arr.join(",")===s1Arr.join(","))&&(boo=!0),boo},setDifference=(setA,setB)=>{const difference=new Set;for(const elem of setA)setB.has(elem)||difference.add(elem);return difference};newGeneralCssText=generalCssText,newLocalCssText=localCssText,thisClassListSet=new Set(originalCssArr.map(o=>o.selector)),updatedSelectorSet=new Set(updatedCssBlocks.map(s=>s.selector).concat(updatedCssBlocksMedia.map(s=>s.selector)));const deleteSelectors=[...setDifference(thisClassListSet,updatedSelectorSet)];try{for(let block of updatedCssBlocks){let position="local",thisIndex=-1,generalIndex=-1,localIndex=-1;generalIndex=generalCssTextArr.findIndex(o=>selectorCompare(o.selector,block.selector)),localIndex=localCssTextArr.findIndex(o=>selectorCompare(o.selector,block.selector)),-1!==generalIndex&&-1!==localIndex?(position="local",thisIndex=localIndex):-1!==generalIndex?(position="general",thisIndex=generalIndex):-1!==localIndex?(position="local",thisIndex=localIndex):(position="local",thisIndex=-1),-1!==thisIndex?"general"===position?(generalCssTextArr[thisIndex].selector=block.selector,generalCssTextArr[thisIndex].raw=block.raw,generalCssTextArr[thisIndex].css=objectDeepCopy(block.css)):(localCssTextArr[thisIndex].selector=block.selector,localCssTextArr[thisIndex].raw=block.raw,localCssTextArr[thisIndex].css=objectDeepCopy(block.css)):localCssTextArr.push({selector:block.selector,raw:block.raw,css:objectDeepCopy(block.css)})}for(let block of updatedCssBlocksMedia){let position="local",thisIndex=-1,generalIndex=-1,localIndex=-1;generalIndex=generalCssBlocksMedia.findIndex(o=>selectorCompare(o.selector,block.selector)&&o.media.toLowerCase()===block.media.toLowerCase()),localIndex=localCssBlocksMedia.findIndex(o=>selectorCompare(o.selector,block.selector)&&o.media.toLowerCase()===block.media.toLowerCase()),-1!==generalIndex&&generalCssBlocksMedia[generalIndex].media===block.media&&-1!==localIndex&&localCssBlocksMedia[localIndex].media===block.media?(position="local",thisIndex=localIndex):-1!==generalIndex&&generalCssBlocksMedia[generalIndex].media===block.media?(position="general",thisIndex=generalIndex):-1!==localIndex&&localCssBlocksMedia[localIndex].media===block.media?(position="local",thisIndex=localIndex):(position="local",thisIndex=-1),-1!==thisIndex?"general"===position?(generalCssBlocksMedia[thisIndex].selector=block.selector,generalCssBlocksMedia[thisIndex].raw=block.raw,generalCssBlocksMedia[thisIndex].css=objectDeepCopy(block.css)):(localCssBlocksMedia[thisIndex].selector=block.selector,localCssBlocksMedia[thisIndex].raw=block.raw,localCssBlocksMedia[thisIndex].css=objectDeepCopy(block.css)):localCssBlocksMedia.push({css:objectDeepCopy(block.css),media:block.media,selector:block.selector,raw:block.raw})}finalGeneralCssTextArr=[],finalLocalCssTextArr=[];for(let c of generalCssTextArr){const dict=objectDeepCopy(c),thisSelector=dict.selector;if(!deleteSelectors.includes(thisSelector))if(/^@/.test(thisSelector))finalGeneralCssTextArr.push(dict);else if(finalGeneralCssTextArr.map(o=>o.selector).includes(thisSelector)){const index=finalGeneralCssTextArr.findIndex(o=>o.selector===thisSelector),newCssDict={...objectDeepCopy(finalGeneralCssTextArr[index]).css,...dict.css};let rawString;rawString="";for(let key in newCssDict)rawString+="\n  "+key+":"+newCssDict[key]+";";rawString=thisSelector+" {\n  "+rawString.trim()+"\n}",finalGeneralCssTextArr[index]={selector:thisSelector,raw:rawString,css:newCssDict}}else finalGeneralCssTextArr.push(dict)}for(let c of localCssTextArr){const dict=objectDeepCopy(c),thisSelector=dict.selector;if(!deleteSelectors.includes(thisSelector))if(/^@/.test(thisSelector))finalLocalCssTextArr.push(dict);else if(finalLocalCssTextArr.map(o=>o.selector).includes(thisSelector)){const index=finalLocalCssTextArr.findIndex(o=>o.selector===thisSelector),newCssDict={...objectDeepCopy(finalLocalCssTextArr[index]).css,...dict.css};let rawString;rawString="";for(let key in newCssDict)rawString+="\n  "+key+":"+newCssDict[key]+";";rawString=thisSelector+" {\n  "+rawString.trim()+"\n}",finalLocalCssTextArr[index]={selector:thisSelector,raw:rawString,css:newCssDict}}else finalLocalCssTextArr.push(dict)}generalCssTextArr=objectDeepCopy(finalGeneralCssTextArr),localCssTextArr=objectDeepCopy(finalLocalCssTextArr);const sortFunction=(a,b)=>{const getCode=char=>"."===char?1e4:"#"===char?1e3:char.charCodeAt(0);let delta0=96,delta1=96,aIndex=0,bIndex=0;return a=a.trim(),b=b.trim(),/^@/.test(a.trim())?(delta0=96,delta1=96):(delta0=a.split("{")[0].length+1,delta1=b.split("{")[0].length+1),a.length>0&&(aIndex=a.split("").slice(0,1).reduce((acc,curr)=>acc+getCode(curr),0)+a.split("").slice(1,delta0).reduce((acc,curr)=>acc+curr.charCodeAt(0),0)),b.length>0&&(bIndex=b.split("").slice(0,1).reduce((acc,curr)=>acc+getCode(curr),0)+b.split("").slice(1,delta1).reduce((acc,curr)=>acc+curr.charCodeAt(0),0)),aIndex-bIndex},f_general_keyframes=generalKeyframesCssTextArr.concat([]).map(s=>s.trim()).filter(s=>""!==s),f_general_middle=generalCssTextArr.map(o=>o.raw),f_general_media=generalCssBlocksMedia.map(o=>"@media "+o.media+" {\n"+o.raw+"\n}"),f_local_keyframes=localKeyframesCssTextArr.concat(updatedCssBlocksKeyframes).map(s=>s.trim()).filter(s=>""!==s),f_local_middle=localCssTextArr.map(o=>o.raw),f_local_media=localCssBlocksMedia.map(o=>"@media "+o.media+" {\n"+o.raw+"\n}");f_general_keyframes.sort(sortFunction),f_general_middle.sort(sortFunction),f_general_media.sort(sortFunction),f_local_keyframes.sort(sortFunction),f_local_middle.sort(sortFunction),f_local_media.sort(sortFunction),newGeneralCssText=f_general_keyframes.join("\n\n"),newGeneralCssText+="\n\n",newGeneralCssText+=f_general_middle.join("\n\n"),newGeneralCssText+="\n\n",newGeneralCssText+=f_general_media.join("\n\n").trim(),newGeneralCssText=newGeneralCssText.trim(),newLocalCssText=f_local_keyframes.join("\n\n"),newLocalCssText+="\n\n",newLocalCssText+=f_local_middle.join("\n\n"),newLocalCssText+="\n\n",newLocalCssText+=f_local_media.join("\n\n").trim(),newLocalCssText=newLocalCssText.trim()}catch{}try{await back.frontUpdate(instance.collectionString,[{_id:generalCssId},{...generalCssObject,data:newGeneralCssText}]),generalCssId===localCssId?(await back.frontUpdate(instance.collectionString,[{_id:localCssId},{...localCssObject,data:newGeneralCssText+"\n\n"+newLocalCssText}]),cssEditorView=instance.cssView,newState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:""}}),cssEditorView.dispatch(newState),newState=cssEditorView.state.update({changes:{from:0,to:0,insert:newGeneralCssText}}),cssEditorView.dispatch(newState)):(await back.frontUpdate(instance.collectionString,[{_id:localCssId},{...localCssObject,data:newLocalCssText}]),cssEditorView=instance.cssView,newState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:""}}),cssEditorView.dispatch(newState),newState=cssEditorView.state.update({changes:{from:0,to:0,insert:newLocalCssText}}),cssEditorView.dispatch(newState))}catch{}reverseSave()}else if(manageButtons.includes(contextResult))if("classList"===contextResult){let thisDomCss,thisDomCssResult;thisDomCssResult=[],thisDomCss=[],instance.shadowDoms.forEach((d,i)=>{if(0===i){const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,thisSelf=shadow.querySelector('[data-dropid="'+thisId+'"]'),getClassList=dom=>[...dom.classList].filter(c=>!/____shadow__doms__tempclassname__temp/g.test(c)&&!/____shadow__doms__tempclassname__temp2/g.test(c)).map(c=>"."+c),getChildClassList=dom=>{let childrenClassList=[];const childrenList=[...dom.children].map(d=>d);for(let c of childrenList)childrenClassList=childrenClassList.concat(getClassList(c)),childrenClassList=childrenClassList.concat(getChildClassList(c));return childrenClassList=[...new Set(childrenClassList)],childrenClassList},getSelector=styleString=>{let thisSelector,thisCssValue;return thisSelector="",thisCssValue="",styleString.trim().replace(/^([^\{\}]+?)\{([^\}]*)\}/gis,(match,p1,p2)=>(thisSelector=p1.trim(),thisCssValue=p2.trim(),match)),{selector:thisSelector.split(",").map(s=>s.trim()).filter(s=>""!==s),css:thisCssValue,media:""}},targetClassList=getClassList(thisSelf),childTargetClassList=getChildClassList(thisSelf),totalStyleClassList=currentCssList(shadow);let thisClassStatus,thisChildrenClassStatus,thisClassBoolean,thisChildrenClassBoolean;thisClassBoolean=!1,thisChildrenClassBoolean=!1,thisClassStatus=[],thisChildrenClassStatus=[],totalStyleClassList.forEach(styleString=>{if(/^@/gi.test(styleString.trim()))if(/keyframes/gi.test(styleString));else if(/font\-face/gi.test(styleString));else{let mediaStatus;mediaStatus="";const pureString=styleString.trim().replace(/^@media\s*([^\{]+?)\{/gi,(match,p1)=>(mediaStatus=p1.trim(),"")).replace(/\s*\}$/gi,"").trim(),thisCssPureArr=[];pureString.replace(/([^\{\}]+?)\s*\{[^\}]*\}/gs,match=>(thisCssPureArr.push(match.trim()),match));for(let p of thisCssPureArr){const thisStatus=getSelector(p);thisStatus.media=mediaStatus,thisClassBoolean=!1;for(let factor of thisStatus.selector){const target=factor;-1!==targetClassList.findIndex(s=>new RegExp(s.replace(/\./gi,"\\.")+"\\s*(::?[^:\\s]*)?$").test(target))&&(thisClassBoolean=!0)}thisClassBoolean&&thisClassStatus.push(thisStatus),thisChildrenClassBoolean=!1;for(let factor of thisStatus.selector){const target=factor;-1!==childTargetClassList.findIndex(s=>new RegExp(s.replace(/\./gi,"\\.")+"\\s*(::?[^:\\s]*)?$").test(target))&&(thisChildrenClassBoolean=!0)}thisChildrenClassBoolean&&thisChildrenClassStatus.push(objectDeepCopy(thisStatus))}}else if(/^\/\*/gi.test(styleString.trim()));else{const thisStatus=getSelector(styleString);thisClassBoolean=!1;for(let factor of thisStatus.selector){const target=factor;-1!==targetClassList.findIndex(s=>new RegExp(s.replace(/\./gi,"\\.")+"\\s*(::?[^:\\s]*)?$").test(target))&&(thisClassBoolean=!0)}thisClassBoolean&&thisClassStatus.push(thisStatus),thisChildrenClassBoolean=!1;for(let factor of thisStatus.selector){const target=factor;-1!==childTargetClassList.findIndex(s=>new RegExp(s.replace(/\./gi,"\\.")+"\\s*(::?[^:\\s]*)?$").test(target))&&(thisChildrenClassBoolean=!0)}thisChildrenClassBoolean&&thisChildrenClassStatus.push(objectDeepCopy(thisStatus))}}),thisDomCss=[thisClassStatus.map(o=>""!==o.media?"@media "+o.media+" { "+o.selector.join(", ")+" { "+o.css+" } }":o.selector.join(", ")+" { "+o.css+" }"),thisChildrenClassStatus.map(o=>""!==o.media?"@media "+o.media+" { "+o.selector.join(", ")+" { "+o.css+" } }":o.selector.join(", ")+" { "+o.css+" }")]}}),thisDomCssResult=[];for(let arr of thisDomCss){const thisArr=[];for(let str of arr){const thisCssString=(await PrettyCss.launching(str)).replace(new RegExp(instance.ghostMediaConditionInit+"\\s*"+instance.ghostMediaTrueConditionSmallMax,"gis"),"max-width: "+String(instance.standardPoint[0])+"rem").replace(new RegExp(instance.ghostMediaConditionInit+"\\s*"+instance.ghostMediaTrueConditionSmallMin,"gis"),"min-width: "+String(instance.standardPoint[0])+"rem").replace(new RegExp(instance.ghostMediaConditionInit+"\\s*"+instance.ghostMediaFalseConditionSmallMax,"gis"),"max-width: "+String(instance.standardPoint[0])+"rem").replace(new RegExp(instance.ghostMediaConditionInit+"\\s*"+instance.ghostMediaFalseConditionSmallMin,"gis"),"min-width: "+String(instance.standardPoint[0])+"rem").replace(new RegExp(instance.ghostMediaConditionInit+"\\s*"+instance.ghostMediaTrueConditionBigMax,"gis"),"max-width: "+String(instance.standardPoint[1])+"rem").replace(new RegExp(instance.ghostMediaConditionInit+"\\s*"+instance.ghostMediaTrueConditionBigMin,"gis"),"min-width: "+String(instance.standardPoint[1])+"rem").replace(new RegExp(instance.ghostMediaConditionInit+"\\s*"+instance.ghostMediaFalseConditionBigMax,"gis"),"max-width: "+String(instance.standardPoint[1])+"rem").replace(new RegExp(instance.ghostMediaConditionInit+"\\s*"+instance.ghostMediaFalseConditionBigMin,"gis"),"min-width: "+String(instance.standardPoint[1])+"rem").replace(/\(min\-width\:\s*8px\s*\)/gis,"(prefers-color-scheme: dark)");thisArr.push(thisCssString)}thisDomCssResult.push(objectDeepCopy(thisArr))}{const originalCss=thisDomCssResult.map(arr=>arr.join("\n\n").trim()),cssStrings=await await instance.cssStatusPopup(originalCss);let classCss,loopTargets,updatedCssBlocks,updatedCssBlocksMedia,updatedCssBlocksKeyframes,generalCssId,generalCssObject,generalCssText,newGeneralCssText,newLocalCssText,localCssId,localCssObject,localCssText,generalMediaCssText,localMediaCssText,generalMediaCssTextArr,localMediaCssTextArr,generalKeyframesCssText,localKeyframesCssText,generalKeyframesCssTextArr,localKeyframesCssTextArr,generalCssTextArr,localCssTextArr,generalMediaBlocks,localMediaBlocks,tempMediaCondition,tempMediaContents,tempCssDictionary,generalCssRawArr,localCssRawArr,generalCssBlocksMedia,localCssBlocksMedia,cssEditorView,newState,finalGeneralCssTextArr,finalLocalCssTextArr,thisClassList,thisClassListSet,updatedSelectorSet,totalText,fontFaceArr,keyframeArr,mediaArr,allSelectorGroup,totalText2,fontFaceArr2,keyframeArr2,mediaArr2,allSelectorGroup2;classCss=cssStrings[0].concat(cssStrings[1]),loopTargets=classCss,updatedCssBlocks=[],updatedCssBlocksMedia=[],updatedCssBlocksKeyframes=[],thisClassList=[],loopTargets=loopTargets.map(s=>s.trim()).map(s=>/^@media\s*/gis.test(s)&&/\(min\-width:\s*8px\)/gis.test(s)?s.replace(/\(min\-width:\s*8px\)/gis,"(prefers-color-scheme: dark)"):s),totalText=originalCss[0].split("\n").concat(originalCss[1].split("\n")).map(s=>s.trim()).map(s=>/^@media\s*/gis.test(s)&&/\(min\-width:\s*8px\)/gis.test(s)?s.replace(/\(min\-width:\s*8px\)/gis,"(prefers-color-scheme: dark)"):s).join("\n"),fontFaceArr=[],totalText=totalText.replace(/@font\-face\s*\{[^\}]*\}/gis,match=>(fontFaceArr.push(match.trim()),"")),keyframeArr=[],totalText=totalText.replace(/@keyframes[^\{]*\s*\{[^@]*?\}\s*\}/gis,match=>(keyframeArr.push(match.trim()),"")),mediaArr=[],totalText=totalText.replace(/@media[^\{]*\s*\{[^@]*?\}\s*\}/gis,match=>(mediaArr.push(match.trim()),"")),allSelectorGroup=[];for(let s of mediaArr){let mediaStatus;mediaStatus="";const pureString=s.trim().replace(/^@media\s*([^\{]+?)\{/gi,(match,p1)=>(mediaStatus=p1.trim(),"")).replace(/\s*\}$/gi,"").trim(),thisCssPureArr=[];pureString.replace(/([^\{\}]+?)\s*\{[^\}]*\}/gs,match=>(thisCssPureArr.push(match.trim()),match)),allSelectorGroup=allSelectorGroup.concat(thisCssPureArr)}const thisPureArr=[];totalText.replace(/([^\{\}]+?)\s*\{[^\}]*\}/gs,match=>(thisPureArr.push(match.trim()),match));const cssRulesArray=allSelectorGroup.concat(thisPureArr).map(s=>s.replace(/[\n\t]/gis," ").replace(/\s+/gis," "));totalText2=cssStrings[0].map(s=>s.trim()).map(s=>/^@media\s*/gis.test(s)&&/\(min\-width:\s*8px\)/gis.test(s)?s.replace(/\(min\-width:\s*8px\)/gis,"(prefers-color-scheme: dark)"):s).join("\n"),fontFaceArr2=[],totalText2=totalText2.replace(/@font\-face\s*\{[^\}]*\}/gis,match=>(fontFaceArr2.push(match.trim()),"")),keyframeArr2=[],totalText2=totalText2.replace(/@keyframes[^\{]*\s*\{[^@]*?\}\s*\}/gis,match=>(keyframeArr2.push(match.trim()),"")),mediaArr2=[],totalText2=totalText2.replace(/@media[^\{]*\s*\{[^@]*?\}\s*\}/gis,match=>(mediaArr2.push(match.trim()),"")),allSelectorGroup2=[];for(let s of mediaArr2){let mediaStatus;mediaStatus="";const pureString=s.trim().replace(/^@media\s*([^\{]+?)\{/gi,(match,p1)=>(mediaStatus=p1.trim(),"")).replace(/\s*\}$/gi,"").trim(),thisCssPureArr=[];pureString.replace(/([^\{\}]+?)\s*\{[^\}]*\}/gs,match=>(thisCssPureArr.push(match.trim()),match)),allSelectorGroup2=allSelectorGroup2.concat(thisCssPureArr)}const thisPureArr2=[];totalText2.replace(/([^\{\}]+?)\s*\{[^\}]*\}/gs,match=>(thisPureArr2.push(match.trim()),match));const cssRulesArray2=allSelectorGroup2.concat(thisPureArr2).map(s=>s.replace(/[\n\t]/gis," ").replace(/\s+/gis," "));instance.shadowHistory((d,i)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,thisSelf=shadow.querySelector('[data-dropid="'+thisId+'"]'),styleTag=shadow.querySelector("style"),styleSheetList=shadow.styleSheets,sheet=styleTag.sheet,thisKind=d.mustAttribute("kind"),selectorsArr=[];for(let block of loopTargets)if(!/^@/.test(block)){const trimmedSelector=block.split("{")[0].trim().replace(/\n/gi," ").replace(/  /g," ").trim();selectorsArr.push(trimmedSelector)}let thisSelector,thisStyleString,thisStyleArr,styleDictionary,thisSelectorOriginal,thisOriginalString,thisStyleOriginalString,thisStyleOriginalArr,styleDictionaryOriginal,selectorArr0,selectorArr1,newRuleTexts,thisFinalStringCss,thisFinalBlock,allRulesText,tempMediaCondition,tempMediaContents,thisMediaBlocks,tempCssDictionary,cssRawArr;thisSelector="",thisStyleString="",newRuleTexts=[],thisFinalStringCss="",allRulesText="",updatedCssBlocks=[],updatedCssBlocksMedia=[],updatedCssBlocksKeyframes=[],thisClassList=[],thisClassList=[...thisSelf.classList].filter(s=>!/____shadow__doms__tempclassname/gi.test(s)).map(s=>"."+s),thisSelf.id&&""!==thisSelf.id&&thisClassList.push("#"+thisSelf.id),thisClassList=[...new Set(thisClassList)],thisClassList=thisClassList.concat(),thisClassList=thisClassList.concat(thisClassList.map(s=>thisSelf.nodeName.toLowerCase()+s));for(let thisBlockString of loopTargets)if(/^@/.test(thisBlockString))if(/@media/gi.test(thisBlockString)){tempMediaCondition="",tempMediaContents=thisBlockString.trim().replace(/^@media\s+(.+?)\s*\{/gis,(match,p1)=>(tempMediaCondition=p1.trim(),"")).replace(/\}\s*$/gis,"").trim(),thisMediaBlocks=[],tempMediaContents.replace(/\s*([^\{]+)\s*\{([^\}]*)\}/gis,(match,p1,p2)=>(thisMediaBlocks.push({selector:p1.trim(),raw:match.trim(),cssRaw:p2.trim()}),match));for(let{selector,raw,cssRaw}of thisMediaBlocks){cssRawArr=cssRaw.trim().split(";").map(s=>s.trim()).filter(s=>""!==s),tempCssDictionary={};for(let s of cssRawArr){const[p,v]=s.split(":").map(k=>k.trim());tempCssDictionary[p.trim()]=v.trim()}updatedCssBlocksMedia.push({selector,raw,media:tempMediaCondition,css:objectDeepCopy(tempCssDictionary)})}newRuleTexts.push(thisBlockString)}else/@keyframes/gi.test(thisBlockString)&&updatedCssBlocksKeyframes.push(thisBlockString),newRuleTexts.push(thisBlockString);else{thisBlockString.replace(/^\s*([^\{]+)\s*\{([^\}]*)\}\s*$/gis,(match,p1,p2)=>(thisSelector=p1.trim().replace(/\n/g," "),thisStyleString=p2.trim().split("\n").map(s=>s.trim()).filter(s=>""!==s).join(""),match)),thisStyleArr=thisStyleString.split(";").map(s=>s.trim()).filter(s=>""!==s),styleDictionary={};for(let s of thisStyleArr){const[p,v]=s.split(":").map(k=>k.trim());styleDictionary[p.trim()]=v.trim()}thisStyleOriginalString="",thisStyleOriginalArr=[],styleDictionaryOriginal={};for(let i=sheet.cssRules.length-1;i>=0;i--){const rule=sheet.cssRules[i];if(rule instanceof CSSStyleRule){const styleRule=rule;if(!/^@/.test(styleRule.cssText.trim())&&selectorsArr.includes(styleRule.selectorText.trim())&&(thisSelectorOriginal=styleRule.selectorText.trim(),selectorArr0=thisSelector.split(","),selectorArr1=thisSelectorOriginal.split(","),selectorArr0.map(s=>s.trim()).filter(s=>""!==s).sort(),selectorArr1.map(s=>s.trim()).filter(s=>""!==s).sort(),thisSelector===thisSelectorOriginal||selectorArr0.join(",")===selectorArr1.join(","))){thisOriginalString=styleRule.cssText.trim(),thisOriginalString.replace(/^\s*([^\{]+)\s*\{([^\}]*)\}\s*$/gis,(match,p1,p2)=>(thisStyleOriginalString=p2.trim().split("\n").map(s=>s.trim()).filter(s=>""!==s).join(""),match)),thisStyleOriginalArr=thisStyleOriginalString.split(";").map(s=>s.trim()).filter(s=>""!==s);for(let s of thisStyleOriginalArr){const[p,v]=s.split(":").map(k=>k.trim());styleDictionaryOriginal[p.trim()]=v.trim()}try{sheet.deleteRule(i)}catch{}}}}thisFinalStringCss="",thisFinalBlock="";for(let k in styleDictionary)thisFinalStringCss+=k+": "+styleDictionary[k]+";\n";thisFinalBlock=thisSelector+" {\n"+thisFinalStringCss.trim()+"\n}",updatedCssBlocks.push({selector:thisSelector,css:objectDeepCopy(styleDictionary),raw:thisFinalBlock}),newRuleTexts.push(thisFinalBlock)}for(let originalCssString of cssRulesArray)for(let i=0;i<styleSheetList.length;i++){const sheet=styleSheetList[i];if(sheet.ownerNode instanceof HTMLStyleElement)try{if(sheet.cssRules){const cssRulesArray=Array.from(sheet.cssRules).map(rule=>rule.cssText.trim());for(let i=cssRulesArray.length-1;i>=0;i--){const rule=cssRulesArray[i];let thisSelector="",originalSelector="";if(/^@media/.test(rule))rule.trim().replace(/^@media\s+.+?\s*\{/gis,"").replace(/\}\s*$/gis,"").replace(/^\s*([^\{]+)\s*\{([^\}]*)\}\s*$/gis,(match,p1,p2)=>(thisSelector=p1.trim().replace(/\n/g," "),match));else{if(/@keyframes/gi.test(rule))continue;rule.replace(/^\s*([^\{]+)\s*\{([^\}]*)\}\s*$/gis,(match,p1,p2)=>(thisSelector=p1.trim().replace(/\n/g," "),match))}/^@media/.test(originalCssString)?originalCssString.trim().replace(/^@media\s+.+?\s*\{/gis,"").replace(/\}\s*$/gis,"").replace(/^\s*([^\{]+)\s*\{([^\}]*)\}\s*$/gis,(match,p1,p2)=>(originalSelector=p1.trim().replace(/\n/g," "),match)):originalCssString.replace(/^\s*([^\{]+)\s*\{([^\}]*)\}\s*$/gis,(match,p1,p2)=>(originalSelector=p1.trim().replace(/\n/g," "),match));const a0=thisSelector.trim(),a1=originalSelector.trim(),a0Arr=a0.split(",").map(s=>s.trim()).filter(s=>""!==s),a1Arr=a1.split(",").map(s=>s.trim()).filter(s=>""!==s);if(a0Arr.sort(),a1Arr.sort(),a0Arr.join(",")===a1Arr.join(","))try{sheet.deleteRule(i)}catch{}}}}catch{}}for(let newRuleText of newRuleTexts)try{if(thisSelector="",newRuleText.replace(/^\s*([^\{]+)\s*\{([^\}]*)\}\s*$/gis,(match,p1,p2)=>(thisSelector=p1.trim().replace(/\n/g," ").trim(),match)),""!==thisSelector&&!/,/gi.test(thisSelector)&&/\.[^\.:\s#\(\)\{\}~\+\/\\\*]+(::?[^:\s]*)?$/is.test(thisSelector)&&!thisSelf.classList.contains(thisSelector.replace(/^\./gi,""))){[...new Set(cssRulesArray2.map(thisBlockString=>{let ss="";return thisBlockString.replace(/^\s*([^\{]+)\s*\{([^\}]*)\}\s*$/gis,(match,p1,p2)=>(ss=p1.trim().replace(/\n/g," "),match)),ss.trim()}))].map(s=>s.trim().replace(/^\./gi,"")).includes(thisSelector.replace(/^\./gi,""))&&thisSelf.classList.add(thisSelector.replace(/^\./gi,""))}const newIndex=sheet.cssRules.length;if(/\(\s*prefers\-color\-scheme:\s*dark\s*\)/gis.test(newRuleText)){const convertedString=newRuleText.replace(/\(\s*prefers\-color\-scheme:\s*dark\s*\)/gis,"(min-width: 8px)"),styleTag=shadow.querySelector("style"),outputTag=shadow.querySelector("output");let selector,tempRawString,thisMediaConditionString;selector="",thisMediaConditionString="",tempRawString=convertedString.replace(/(@media\s+.+?\s*\{\s*)/gis,(match,p1,p2,p3)=>(thisMediaConditionString=p1.trim(),"")).trim(),tempRawString.replace(/^\s*([^\{]*)\{/gis,(match,p1)=>(selector=p1.trim(),match)),""!==selector&&(new RegExp(thisMediaConditionString+".*?"+selector,"gis").test(styleTag.innerHTML)||(outputTag.innerHTML=outputTag.innerHTML+"\n\n"+convertedString)),instance.isInDarkMode&&sheet.insertRule(convertedString,newIndex)}else sheet.insertRule(newRuleText,newIndex)}catch{}for(let i=0;i<sheet.cssRules.length;i++){allRulesText+=sheet.cssRules[i].cssText+"\n"}styleTag.innerHTML=instance.mediaInPreview(thisKind,allRulesText)}),generalCssId=instance.valueParser("decode",instance.currentMap.tree.style.general).id,[generalCssObject]=await back.frontRead(instance.collectionString,{_id:generalCssId}),generalCssText=generalCssObject.data,localCssId=instance.valueParser("decode",instance.currentCssId).id,[localCssObject]=await back.frontRead(instance.collectionString,{_id:localCssId}),localCssText=localCssObject.data,generalMediaCssText="",generalMediaCssTextArr=[],generalKeyframesCssText="",generalKeyframesCssTextArr=[],generalCssText=generalCssText.replace(/\/\*[\s\S]*?\*\//gis,"").replace(/\s*@media[^\{]*\s*\{[^@]*?\}\s*\}/gis,match=>(generalMediaCssTextArr.push(match.trim()),generalMediaCssText+=match,generalMediaCssText+="\n\n","")).replace(/\s*@(keyframes|font\-face)[^\{]*\s*\{[^@]*?\}(\s*\})?/gis,match=>(generalKeyframesCssTextArr.push(match.trim()),generalKeyframesCssText+=match,generalKeyframesCssText+="\n\n","")).trim(),generalMediaCssText=generalMediaCssText.trim(),generalKeyframesCssText=generalKeyframesCssText.trim(),generalCssTextArr=[],generalCssText.replace(/\s*([^\{]+)\s*\{([^\}]*)\}/gis,(match,p1,p2)=>{const thisStyleArr=p2.trim().split(";").map(s=>s.trim()).filter(s=>""!==s),styleDictionary={};for(let s of thisStyleArr){const[p,v]=s.split(":").map(k=>k.trim());styleDictionary[p.trim()]=v.trim()}return generalCssTextArr.push({selector:p1.trim(),raw:match.trim(),css:styleDictionary}),match}),localMediaCssText="",localMediaCssTextArr=[],localKeyframesCssText="",localKeyframesCssTextArr=[],localCssText=localCssText.replace(/\/\*[\s\S]*?\*\//gis,"").replace(/\s*@media[^\{]*\s*\{[^@]*?\}\s*\}/gis,match=>(localMediaCssText+=match,localMediaCssTextArr.push(match.trim()),localMediaCssText+="\n\n","")).replace(/\s*@(keyframes|font\-face)[^\{]*\s*\{[^@]*?\}(\s*\})?/gis,match=>(localKeyframesCssText+=match,localKeyframesCssTextArr.push(match.trim()),localKeyframesCssText+="\n\n","")).trim(),localMediaCssText=localMediaCssText.trim(),localKeyframesCssText=localKeyframesCssText.trim(),localCssTextArr=[],localCssText.replace(/\s*([^\{]+)\s*\{([^\}]*)\}/gis,(match,p1,p2)=>{const thisStyleArr=p2.trim().split(";").map(s=>s.trim()).filter(s=>""!==s),styleDictionary={};for(let s of thisStyleArr){const[p,v]=s.split(":").map(k=>k.trim());styleDictionary[p.trim()]=v.trim()}return localCssTextArr.push({selector:p1.trim(),raw:match.trim(),css:styleDictionary}),match}),generalMediaBlocks=[];for(let t of generalMediaCssTextArr)tempMediaCondition="",tempMediaContents=t.trim().replace(/^@media\s+(.+?)\s*\{/gis,(match,p1)=>(tempMediaCondition=p1.trim(),"")).replace(/\}\s*$/gis,"").trim(),tempMediaContents.replace(/\s*([^\{]+)\s*\{([^\}]*)\}/gis,(match,p1,p2)=>(generalMediaBlocks.push({selector:p1.trim(),raw:match.trim(),cssRaw:p2.trim(),media:tempMediaCondition}),match));generalCssBlocksMedia=[];for(let{selector,raw,cssRaw,media}of generalMediaBlocks){generalCssRawArr=cssRaw.trim().split(";").map(s=>s.trim()).filter(s=>""!==s),tempCssDictionary={};for(let s of generalCssRawArr){const[p,v]=s.split(":").map(k=>k.trim());tempCssDictionary[p.trim()]=v.trim()}generalCssBlocksMedia.push({selector,raw,media,css:objectDeepCopy(tempCssDictionary)})}localMediaBlocks=[];for(let t of localMediaCssTextArr)tempMediaCondition="",tempMediaContents=t.trim().replace(/^@media\s+(.+?)\s*\{/gis,(match,p1)=>(tempMediaCondition=p1.trim(),"")).replace(/\}\s*$/gis,"").trim(),tempMediaContents.replace(/\s*([^\{]+)\s*\{([^\}]*)\}/gis,(match,p1,p2)=>(localMediaBlocks.push({selector:p1.trim(),raw:match.trim(),cssRaw:p2.trim(),media:tempMediaCondition}),match));localCssBlocksMedia=[];for(let{selector,raw,cssRaw,media}of localMediaBlocks){localCssRawArr=cssRaw.trim().split(";").map(s=>s.trim()).filter(s=>""!==s),tempCssDictionary={};for(let s of localCssRawArr){const[p,v]=s.split(":").map(k=>k.trim());tempCssDictionary[p.trim()]=v.trim()}localCssBlocksMedia.push({selector,raw,media,css:objectDeepCopy(tempCssDictionary)})}const selectorCompare=(s0,s1)=>{const s0Arr=s0.split(",").map(s=>s.trim()).filter(s=>""!==s),s1Arr=s1.split(",").map(s=>s.trim()).filter(s=>""!==s);let boo;return boo=!1,s0Arr.sort(),s1Arr.sort(),(s0.trim()===s1.trim()||s0Arr.join(",")===s1Arr.join(","))&&(boo=!0),boo},setDifference=(setA,setB)=>{const difference=new Set;for(const elem of setA)setB.has(elem)||difference.add(elem);return difference};newGeneralCssText=generalCssText,newLocalCssText=localCssText,thisClassListSet=new Set(cssRulesArray.map(thisBlockString=>{let thisSelector="";return thisBlockString.replace(/^\s*([^\{]+)\s*\{([^\}]*)\}\s*$/gis,(match,p1,p2)=>(thisSelector=p1.trim().replace(/\n/g," "),match)),thisSelector.trim()})),updatedSelectorSet=new Set(updatedCssBlocks.map(s=>s.selector).concat(updatedCssBlocksMedia.map(s=>s.selector)));const deleteSelectors=[...setDifference(thisClassListSet,updatedSelectorSet)];try{for(let block of updatedCssBlocks){let position="local",thisIndex=-1,generalIndex=-1,localIndex=-1;generalIndex=generalCssTextArr.findIndex(o=>selectorCompare(o.selector,block.selector)),localIndex=localCssTextArr.findIndex(o=>selectorCompare(o.selector,block.selector)),-1!==generalIndex&&-1!==localIndex?(position="local",thisIndex=localIndex):-1!==generalIndex?(position="general",thisIndex=generalIndex):-1!==localIndex?(position="local",thisIndex=localIndex):(position="local",thisIndex=-1),-1!==thisIndex?"general"===position?(generalCssTextArr[thisIndex].selector=block.selector,generalCssTextArr[thisIndex].raw=block.raw,generalCssTextArr[thisIndex].css=objectDeepCopy(block.css)):(localCssTextArr[thisIndex].selector=block.selector,localCssTextArr[thisIndex].raw=block.raw,localCssTextArr[thisIndex].css=objectDeepCopy(block.css)):localCssTextArr.push({selector:block.selector,raw:block.raw,css:objectDeepCopy(block.css)})}for(let block of updatedCssBlocksMedia){let position="local",thisIndex=-1,generalIndex=-1,localIndex=-1;generalIndex=generalCssBlocksMedia.findIndex(o=>selectorCompare(o.selector,block.selector)&&o.media.toLowerCase()===block.media.toLowerCase()),localIndex=localCssBlocksMedia.findIndex(o=>selectorCompare(o.selector,block.selector)&&o.media.toLowerCase()===block.media.toLowerCase()),-1!==generalIndex&&generalCssBlocksMedia[generalIndex].media===block.media&&-1!==localIndex&&localCssBlocksMedia[localIndex].media===block.media?(position="local",thisIndex=localIndex):-1!==generalIndex&&generalCssBlocksMedia[generalIndex].media===block.media?(position="general",thisIndex=generalIndex):-1!==localIndex&&localCssBlocksMedia[localIndex].media===block.media?(position="local",thisIndex=localIndex):(position="local",thisIndex=-1),-1!==thisIndex?"general"===position?(generalCssBlocksMedia[thisIndex].selector=block.selector,generalCssBlocksMedia[thisIndex].raw=block.raw,generalCssBlocksMedia[thisIndex].css=objectDeepCopy(block.css)):(localCssBlocksMedia[thisIndex].selector=block.selector,localCssBlocksMedia[thisIndex].raw=block.raw,localCssBlocksMedia[thisIndex].css=objectDeepCopy(block.css)):localCssBlocksMedia.push({css:objectDeepCopy(block.css),media:block.media,selector:block.selector,raw:block.raw})}finalGeneralCssTextArr=[],finalLocalCssTextArr=[];for(let c of generalCssTextArr){const dict=objectDeepCopy(c),thisSelector=dict.selector;if(!deleteSelectors.includes(thisSelector))if(/^@/.test(thisSelector))finalGeneralCssTextArr.push(dict);else if(finalGeneralCssTextArr.map(o=>o.selector).includes(thisSelector)){const index=finalGeneralCssTextArr.findIndex(o=>o.selector===thisSelector),newCssDict={...objectDeepCopy(finalGeneralCssTextArr[index]).css,...dict.css};let rawString;rawString="";for(let key in newCssDict)rawString+="\n  "+key+":"+newCssDict[key]+";";rawString=thisSelector+" {\n  "+rawString.trim()+"\n}",finalGeneralCssTextArr[index]={selector:thisSelector,raw:rawString,css:newCssDict}}else finalGeneralCssTextArr.push(dict)}for(let c of localCssTextArr){const dict=objectDeepCopy(c),thisSelector=dict.selector;if(!deleteSelectors.includes(thisSelector))if(/^@/.test(thisSelector))finalLocalCssTextArr.push(dict);else if(finalLocalCssTextArr.map(o=>o.selector).includes(thisSelector)){const index=finalLocalCssTextArr.findIndex(o=>o.selector===thisSelector),newCssDict={...objectDeepCopy(finalLocalCssTextArr[index]).css,...dict.css};let rawString;rawString="";for(let key in newCssDict)rawString+="\n  "+key+":"+newCssDict[key]+";";rawString=thisSelector+" {\n  "+rawString.trim()+"\n}",finalLocalCssTextArr[index]={selector:thisSelector,raw:rawString,css:newCssDict}}else finalLocalCssTextArr.push(dict)}generalCssTextArr=objectDeepCopy(finalGeneralCssTextArr),localCssTextArr=objectDeepCopy(finalLocalCssTextArr);const sortFunction=(a,b)=>{const getCode=char=>"."===char?1e4:"#"===char?1e3:char.charCodeAt(0);let delta0=96,delta1=96,aIndex=0,bIndex=0;return a=a.trim(),b=b.trim(),/^@/.test(a.trim())?(delta0=96,delta1=96):(delta0=a.split("{")[0].length+1,delta1=b.split("{")[0].length+1),a.length>0&&(aIndex=a.split("").slice(0,1).reduce((acc,curr)=>acc+getCode(curr),0)+a.split("").slice(1,delta0).reduce((acc,curr)=>acc+curr.charCodeAt(0),0)),b.length>0&&(bIndex=b.split("").slice(0,1).reduce((acc,curr)=>acc+getCode(curr),0)+b.split("").slice(1,delta1).reduce((acc,curr)=>acc+curr.charCodeAt(0),0)),aIndex-bIndex},f_general_keyframes=generalKeyframesCssTextArr.concat([]).map(s=>s.trim()).filter(s=>""!==s),f_general_middle=generalCssTextArr.map(o=>o.raw),f_general_media=generalCssBlocksMedia.map(o=>"@media "+o.media+" {\n"+o.raw+"\n}"),f_local_keyframes=localKeyframesCssTextArr.concat(updatedCssBlocksKeyframes).map(s=>s.trim()).filter(s=>""!==s),f_local_middle=localCssTextArr.map(o=>o.raw),f_local_media=localCssBlocksMedia.map(o=>"@media "+o.media+" {\n"+o.raw+"\n}");f_general_keyframes.sort(sortFunction),f_general_middle.sort(sortFunction),f_general_media.sort(sortFunction),f_local_keyframes.sort(sortFunction),f_local_middle.sort(sortFunction),f_local_media.sort(sortFunction),newGeneralCssText=f_general_keyframes.join("\n\n"),newGeneralCssText+="\n\n",newGeneralCssText+=f_general_middle.join("\n\n"),newGeneralCssText+="\n\n",newGeneralCssText+=f_general_media.join("\n\n").trim(),newGeneralCssText=newGeneralCssText.trim(),newLocalCssText=f_local_keyframes.join("\n\n"),newLocalCssText+="\n\n",newLocalCssText+=f_local_middle.join("\n\n"),newLocalCssText+="\n\n",newLocalCssText+=f_local_media.join("\n\n").trim(),newLocalCssText=newLocalCssText.trim()}catch{}try{await back.frontUpdate(instance.collectionString,[{_id:generalCssId},{...generalCssObject,data:newGeneralCssText}]),generalCssId===localCssId?(await back.frontUpdate(instance.collectionString,[{_id:localCssId},{...localCssObject,data:newGeneralCssText+"\n\n"+newLocalCssText}]),cssEditorView=instance.cssView,newState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:""}}),cssEditorView.dispatch(newState),newState=cssEditorView.state.update({changes:{from:0,to:0,insert:newGeneralCssText}}),cssEditorView.dispatch(newState)):(await back.frontUpdate(instance.collectionString,[{_id:localCssId},{...localCssObject,data:newLocalCssText}]),cssEditorView=instance.cssView,newState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:""}}),cssEditorView.dispatch(newState),newState=cssEditorView.state.update({changes:{from:0,to:0,insert:newLocalCssText}}),cssEditorView.dispatch(newState))}catch{}reverseSave()}}else{let aId;aId="",instance.shadowDoms.forEach((d,i)=>{if(0===i){const thisSelf=d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelector('[data-dropid="'+thisId+'"]');aId=thisSelf.id}});const promptResult=""===aId.trim()?await promptPopup("아이디명을 알려주세요! 현재 아이디 없음"):await promptPopup("아이디명을 알려주세요! 현재 아이디: "+aId);if(null!==promptResult){const injectionId=hangulToEnglish(promptResult,!1).replace(/\s/gi,"").replace(/[\.\#,\^\~\>]/gi,"");instance.shadowHistory((d,i)=>{d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelector('[data-dropid="'+thisId+'"]').id=injectionId}),reverseSave()}}else if(["divide"].includes(contextResult))/div/gi.test(thisSelf.nodeName.toLowerCase())&&thisSelf.classList.contains(instance.divideRowClassName)?await instance.divideRowSizeBox(event,thisSelf):/div/gi.test(thisSelf.nodeName.toLowerCase())&&(thisSelf.classList.contains(instance.flexBoxClassName)||thisSelf.classList.contains(instance.iwComplexResponseDivClassName))?await instance.flexSizeBox(event,thisSelf):await instance.blackAlert("해당 아이템은 열 또는 플랙스 아이템만 가능합니다!");else if(/^cssinjection_/gi.test(contextResult)){instance.currentMap,instance.valueParser("decode",instance.currentMap.tree.style.general).id,instance.valueParser("decode",instance.currentCssId).id;const thisView=instance.cssView;let cssString,keyframeAndFontFace,cssDictionary,cssMatrix;cssString=/transform/gis.test(contextResult)?await instance.transformHelperPopup():/filter/gis.test(contextResult)?await instance.filterHelperPopup():await instance.animationHelperPopup("a_"+uniqueValue("short")),keyframeAndFontFace="",cssString=cssString.replace(/@keyframes[^\{]*\{[^@]*?\}\s*\}/gis,match=>(keyframeAndFontFace+=match,"")),keyframeAndFontFace+="\n\n",cssString=cssString.replace(/@font\-face[^\{]*\{[^@\{\}]*?\}/gis,match=>(keyframeAndFontFace+=match,"")),keyframeAndFontFace=keyframeAndFontFace.trim(),cssString=cssString.trim(),cssString=cssString.replace(/[\t\n]/gis," ").replace(/\s+/gis," ").trim(),cssMatrix=cssString.split(";").map(s=>s.trim()).filter(s=>""!==s).map(s=>s.split(":").map(k=>k.trim())),cssDictionary={};for(let[property,value]of cssMatrix)""!==property.trim()&&""!==value.trim()&&(cssDictionary[property.trim()]=value.trim());thisView.dispatch(thisView.state.update({changes:{from:0,to:0,insert:keyframeAndFontFace+"\n\n"}})),instance.shadowHistory((d,shadowIndex)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,thisSelf=shadow.querySelector('[data-dropid="'+thisId+'"]'),styleTag=(d.mustAttribute("kind"),shadow.querySelector("style"));styleTag.innerHTML=keyframeAndFontFace+"\n\n"+styleTag.innerHTML;for(let key in cssDictionary)thisSelf.style[key]=cssDictionary[key]}),reverseSave()}}),d.addEventListener("dragstart",event=>{const self=event.currentTarget,transfer=event.dataTransfer;if(transfer.effectAllowed="all",/img/gi.test(self.nodeName)||null!==self.querySelector("img")){const thisImage=/img/gi.test(self.nodeName)?self:[...self.querySelectorAll("img")].map(d=>d).filter(i=>{const computedStyle=window.getComputedStyle(i);return!/none/g.test(computedStyle.display)}).at(0),ghostElement=thisImage.cloneNode(!0);ghostElement.style.position="absolute",ghostElement.style.top=pixelUnit(-9999),ghostElement.style.left=pixelUnit(-9999),ghostElement.style.width=pixelUnit(finalWidth),ghostElement.style.height="auto",ghostElement.style.borderRadius=pixelUnit(8),ghostElement.style.pointerEvents="none",document.body.appendChild(ghostElement),transfer.setDragImage(ghostElement,2,2),setTimeout(()=>{document.body.removeChild(ghostElement)},0)}else{const thisDom=self,computedStyle=window.getComputedStyle(thisDom),ghostElement=thisDom.cloneNode(!0);ghostElement.style.fontFamily=computedStyle.fontFamily,ghostElement.style.fontSize=computedStyle.fontSize,ghostElement.style.fontWeight=computedStyle.fontWeight,ghostElement.style.color=computedStyle.color,ghostElement.style.textAlign=computedStyle.textAlign,ghostElement.style.lineHeight=computedStyle.lineHeight,ghostElement.style.wordSpacing=computedStyle.wordSpacing,ghostElement.style.textIndent=computedStyle.textIndent,ghostElement.style.position="absolute",ghostElement.style.top=pixelUnit(-9999),ghostElement.style.left=pixelUnit(-9999),ghostElement.style.width=pixelUnit(thisWidth<600?600:thisWidth),ghostElement.style.height="auto",ghostElement.style.borderRadius=pixelUnit(8),ghostElement.style.pointerEvents="none",ghostElement.style.paddingLeft=String(16)+ea,ghostElement.style.paddingRight=String(16)+ea,ghostElement.style.paddingTop=String(12)+ea,ghostElement.style.paddingBottom=String(12)+ea,ghostElement.style.background="white";const getChildrenAndJustFirstView=dom=>{const ghostChildren=[...dom.children].map(d=>d);if(ghostChildren.length>0)for(let i=0;i<ghostChildren.length;i++)0===i?(ghostChildren[i].style.display="block",ghostChildren[i].style.width="100%",getChildrenAndJustFirstView(ghostChildren[i])):ghostChildren[i].style.display="none"};getChildrenAndJustFirstView(ghostElement),document.body.appendChild(ghostElement),transfer.setDragImage(ghostElement,2,2),setTimeout(()=>{document.body.removeChild(ghostElement)},0)}transfer.setData("text/plain",String(self.getAttribute("data-dropid")))}),d.addEventListener("dragend",event=>{event.preventDefault(),event.stopPropagation()}),d.addEventListener("dragenter",event=>{if(event.preventDefault(),event.stopPropagation(),null!==event.currentTarget.getAttribute("data-dropid")&&(instance.dragCounter=instance.dragCounter+1,1===instance.dragCounter)){event.currentTarget.insertAdjacentHTML("afterend",'<div class="____shadow__doms__tempclassname__temp____2"></div>')}}),d.addEventListener("dragover",event=>{event.preventDefault(),event.stopPropagation()}),d.addEventListener("dragleave",event=>{if(event.preventDefault(),event.stopPropagation(),null===event.currentTarget.getAttribute("data-dropid"))return;const self=event.currentTarget,targetShadow=instance.shadowDoms.find(d=>[...d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelectorAll(self.nodeName)].includes(self));if(instance.dragCounter=instance.dragCounter-1,0===instance.dragCounter){const removeTargets=[...targetShadow.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelectorAll(".____shadow__doms__tempclassname__temp____2")].map(d=>d);for(let tempTarget of removeTargets)tempTarget.style.animation="____shadow__doms__tempclassname__temp____2_animation_out 0.4s ease forwards";setTimeout(()=>{for(let tempTarget of removeTargets)tempTarget.remove()},401)}}),d.addEventListener("drop",async event=>{if(event.preventDefault(),null===event.currentTarget.getAttribute("data-dropid"))return;instance.dragCounter=0;const self=event.currentTarget,thisId=self.getAttribute("data-dropid"),transfer=event.dataTransfer,tempTarget=self.nextElementSibling,targetShadow=instance.shadowDoms.find(d=>[...d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelectorAll(self.nodeName)].includes(self)),targetShadowOrder=Number(targetShadow.mustAttribute("order"));let mediaMode,mediaTarget,mediaSize,thisMediaMode,thisIndex;if(mediaMode=!1,instance.shadowDoms.length>1&&(mediaMode=targetShadowOrder<instance.shadowDoms.length-1),instance.shadowDoms.length-1===targetShadowOrder&&(mediaMode=/div/gi.test(self.nodeName.toLowerCase())&&self.children.length>=2&&/img/gi.test(self.children[0].nodeName.toLowerCase())),instance.isInDarkMode&&(mediaMode=!0),mediaTarget=targetShadow.mustAttribute("kind"),mediaSize=instance.modeDictionary[mediaTarget],thisMediaMode=/모바일/gi.test(mediaSize.title)?"mobile":/데스크탑/gi.test(mediaSize.title)?"desktop":"tablet",thisIndex="mobile"===thisMediaMode?0:"tablet"===thisMediaMode?1:2,/div/gis.test(tempTarget.nodeName.toLowerCase())&&tempTarget.classList.contains("____shadow__doms__tempclassname__temp____2")&&(tempTarget.style.animation="____shadow__doms__tempclassname__temp____2_animation_out 0.2s ease forwards"),setTimeout(()=>{instance.shadowDoms.forEach(d=>{const removeTargets=[...d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelectorAll(".____shadow__doms__tempclassname__temp____2")].map(d=>d);for(let t of removeTargets)t.remove()})},201),null!==transfer){const droppedElementId=transfer.getData("text/plain");if("string"==typeof droppedElementId&&""!==droppedElementId.trim())if(event.ctrlKey||event.metaKey||event.altKey)instance.shadowHistory((d,shadowIndex)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,thisSelf=shadow.querySelector('[data-dropid="'+thisId+'"]'),target=shadow.querySelector('[data-dropid="'+droppedElementId+'"]');if(null!==target){const parent=thisSelf.parentNode;target.style.animation="";const targetCopied=target.cloneNode(!0);targetCopied.setAttribute("data-dropid",instance.dropAreaTempDomClassName+"_"+String((new Date).valueOf())),domToEventSet(targetCopied,thisWidth,finalWidth),null!==thisSelf.nextElementSibling?parent.insertBefore(targetCopied,thisSelf.nextElementSibling):parent.appendChild(targetCopied)}}),reverseSave();else{let modeNumber,dropedItemIsParagraph;if(dropedItemIsParagraph=!1,modeNumber=0,self.classList.contains(instance.imageResponseDivClassName)||/img/gis.test(self.nodeName.toLowerCase())?(instance.shadowDoms.forEach((d,i)=>{if(0===i){const target=d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelector('[data-dropid="'+droppedElementId+'"]');null!==target&&"p"===target.nodeName.toLowerCase()&&(dropedItemIsParagraph=!0)}}),dropedItemIsParagraph?(modeNumber=2,/img/gis.test(self.nodeName.toLowerCase())&&(modeNumber=1)):modeNumber=0):modeNumber=0,0===modeNumber)instance.shadowHistory((d,shadowIndex)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,thisSelf=shadow.querySelector('[data-dropid="'+thisId+'"]'),target=shadow.querySelector('[data-dropid="'+droppedElementId+'"]');if(null!==target){const parent=thisSelf.parentNode;target.style.animation="",null!==thisSelf.nextElementSibling?parent.insertBefore(target,thisSelf.nextElementSibling):parent.appendChild(target)}});else{const dropId=instance.dropAreaTempDomClassName+"_"+String(Math.ceil((new Date).valueOf()/10)+0+Math.round(100*Math.random()));let generatedDomId;if(1===modeNumber){const generatedDom=await instance.sixImageGenerate(self,[{dropId,src:self.getAttribute("src"),originalSrc:self.getAttribute("data-originalsrc")}]);generatedDomId=generatedDom.getAttribute("data-dropid")}else generatedDomId=self.getAttribute("data-dropid");const cssEditorView=instance.cssView,currentCssText=cssEditorView.state.doc.toString();if(!new RegExp("."+instance.iwComplexResponseDivClassName,"g").test(currentCssText)){const newCssState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:currentCssText+"\n\n"+instance.iwResponsiveMediaCss.join("\n")}});cssEditorView.dispatch(newCssState)}const iwDivDropId=instance.dropAreaTempDomClassName+"_"+String(Math.ceil((new Date).valueOf()/10)+0+Math.round(100*Math.random()));instance.shadowHistory((d,shadowIndex)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,thisSelf=shadow.querySelector('[data-dropid="'+generatedDomId+'"]'),target=shadow.querySelector('[data-dropid="'+droppedElementId+'"]'),parent=([...thisSelf.children].map(s=>s),thisSelf.parentNode),nextDom=thisSelf.nextElementSibling,styleTag=(d.mustAttribute("kind"),shadow.querySelector("style"));shadow.querySelector("output");if(new RegExp("."+instance.iwComplexResponseDivClassName,"g").test(styleTag.innerHTML)||(styleTag.innerHTML=styleTag.innerHTML+"\n\n"+instance.iwResponsiveMediaCss.join("\n")),null!==target){const targetMother=document.createElement("DIV");targetMother.classList.add(instance.iwComplexResponseDivClassName),targetMother.setAttribute("data-dropid",iwDivDropId),targetMother.style.animation="";const targetParagraphMother=document.createElement("DIV");if(targetParagraphMother.classList.add(instance.iwComplexResponseParagraphClassName),targetParagraphMother.style.animation="",target.removeAttribute("draggable"),target.removeAttribute("data-dropid"),target.style.animation="",target.style.width=String(100)+"%",target.style.margin=String(0),target.style.padding=String(0),targetParagraphMother.appendChild(target),thisSelf.removeAttribute("draggable"),thisSelf.setAttribute("data-imageindex",String(thisSelf.getAttribute("data-dropid"))),thisSelf.removeAttribute("data-dropid"),thisSelf.style.animation="",thisSelf.style.marginRight=String(1.5)+"rem",thisSelf.style.flexShrink=String(1),targetMother.appendChild(thisSelf),targetMother.appendChild(targetParagraphMother),domToEventSet(targetMother,0,360),nextDom===target){const nextNextDom=nextDom.nextElementSibling;null!==nextNextDom?parent.insertBefore(targetMother,nextNextDom):parent.appendChild(targetMother)}else null!==nextDom?parent.insertBefore(targetMother,nextDom):parent.appendChild(targetMother)}})}reverseSave()}else if(transfer.files.length>0){instance.newImageDropDoing=!0;const files=transfer.files,loading=AbstractNode.whiteProgressLoading(null,!0);try{if([...files].some(f=>!instance.imageExe.includes(String(f.name.split(".").at(-1)).toLowerCase())))throw new Error("not image");const thisNames=[],thisUrl=[];for(const rawFile of files){const originalBlob=rawFile,newFileName="s"+uniqueValue("short").slice(0,6)+"_"+hangulToEnglish(rawFile.name.replace(/[\\\/:\*\?"<>\| ]/gi,"_")),newFileOptions={type:rawFile.type,lastModified:rawFile.lastModified},targetFile=new File([originalBlob],newFileName,newFileOptions);try{if(0!==targetFile.size){if(!instance.imageExe.includes(String(targetFile.name.split(".").at(-1)).toLowerCase()))throw new Error("not image");const thisMap=instance.currentMap,blobModel={_id:instance.epubBlobIdMaker(thisMap.projectId),date:new Date,projectId:thisMap.projectId,key:"blob",fileName:targetFile.name,absolute:instance.absoluteBase.image+"/"+targetFile.name,data:targetFile},{_id}=await back.frontCreate(instance.collectionBlob,blobModel);thisMap.tree.image.push(instance.valueParser("encode",_id,targetFile.name)),await back.frontUpdate(instance.collectionMap,[{_id:thisMap._id},thisMap]),instance.currentMap=thisMap,await sleep(200),thisNames.push(targetFile.name),thisUrl.push(URL.createObjectURL(targetFile))}}catch{throw await instance.blackAlert("올바른 이미지 파일을 올려주세요!"),new Error("upload fail")}}for(let u of thisUrl)blobUrlsToRevoke.push(u);const imageInfo=[];Math.ceil((new Date).valueOf()/10);for(let i=0;i<thisNames.length;i++){const dropId=instance.dropAreaTempDomClassName+"_"+String(Math.ceil((new Date).valueOf()/10)+i+Math.round(100*Math.random())),originalSrc=String(instance.isInChapter?"../..":"..")+"/Images/"+thisNames[i];imageInfo.push({dropId,originalSrc,src:thisUrl[i]})}1===imageInfo.length&&mediaMode?await instance.sixImageGenerate(self,imageInfo):instance.shadowHistory((d,shadowIndex)=>{const thisSelf=d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelector('[data-dropid="'+thisId+'"]'),parent=thisSelf.parentNode,nextDom=thisSelf.nextElementSibling;for(let info of imageInfo){const target=document.createElement("IMG");target.setAttribute("alt","이미지 설명"),target.src=info.src,target.setAttribute("data-dropid",info.dropId),target.setAttribute("data-originalsrc",info.originalSrc),target.style.animation="",domToEventSet(target,thisWidth,finalWidth),null!==nextDom?parent.insertBefore(target,nextDom):parent.appendChild(target)}}),reverseSave()}catch{try{if([...files].some(f=>!instance.documentExe.includes(String(f.name.split(".").at(-1)).toLowerCase())))throw new Error("not documents");try{loading.remove(),instance.newImageDropDoing=!1}catch{}instance.whitePopupCloseEvent(new Event("click"));const[targetFile]=[...files];await instance.injectionRawText(targetFile),setQueue(()=>{instance.previewPopup().catch(e=>console.log(e))},500)}catch{await instance.blackAlert("올바른 문서 파일을 올려주세요!")}}try{loading.remove(),instance.newImageDropDoing=!1}catch{}}}})};instance.domToEventSet=domToEventSet,instance.shadowHistory((d,shadowIndex)=>{const host=d.querySelector("."+shadowDomTargetClassName),targets=[...host.shadowRoot.children].filter(d=>!/style/gi.test(d.nodeName)&&!/script/gi.test(d.nodeName)),thisWidth=host.getBoundingClientRect().width,finalWidth=.75*thisWidth<360?360:.75*thisWidth;let index;index=0;for(let d of targets)d.setAttribute("data-dropid",instance.dropAreaTempDomClassName+"_"+String(index)),domToEventSet(d,thisWidth,finalWidth),index++})}catch(e){console.log(e)}};previewSelection=()=>{const instance=this,back=this.back,{colorChip,svgMaker:localSvgMaker,binaryPath}=PathAnimator,{withOut,percent,promptPopup,contextmenuPopup,transformCss,currentCssList,colorPicker,setDebounce,setDomColor,selectByQuery,markdownBlocks,domCssDictionary,linkToString,hangulToEnglish,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();return new Promise(async(resolve,reject)=>{try{const whitePopupClassName=instance.whitePreviewPopupClassName,whitePopupClassNameDownTarget="whitePopupClassNameDownTarget",whitePopupClassNameFadeOutTarget="whitePopupClassNameFadeOutTarget",shadowDomTargetClassName=instance.shadowDomTargetClassName,modeDictionary=instance.modeDictionary;let safeNum;for(safeNum=0;instance.whitePopupCloseDoing&&(await sleep(100),safeNum++,!(safeNum>50)););instance.isInDarkMode=!1;const thisMap=instance.currentMap,zIndex=104;let cancelBack,contentsPaddingBottom,whiteBaseRadius,tongMargin,tongMarginTop,whiteCloseEvent,imageDocuments,fontDocuments,imageResources,fontResources,blobUrlsToRevoke,imageInfos,fontInfos,cleanup,fontStyles,generalCss,generalCssString,thisTargetFontFamilyName,thisTargetFontWeight,htmlContent,cXhtml,cCss,cXhtmlString,cCssString,parser,parsedDocument,parseError,bodyElement,bodyInImageTargets,targetImageFileName,foundIndex,url,pathname,naviHeight,mobileSize,bigMobileSize,tabletSize,outerMargin,viewBetween,outerOuterMargin,titleAreaHeight,titleSize,bigTabletSize,titleWeight,titleSpecialMarginRight,widthAcc,createPreviewPopup,modeArr,titleSpecialVisualTop,innerWidthStandard,descriptionAreaWidth,descriptionSize,descriptionWeight,desktopSize,descriptionArr,wordSpacing,accNumber,closeIconWidth,bigBigMobileSize,thisTargetFontSource,thisFontUrl,thisFont,shadowDoms,thisOriginalImageUrl,outputString,buttonHeight,buttonMarginTop,buttonBorderRadius,buttonPadding,buttonSize,buttonWeight,innerWidthStandardZoom,descriptionAreaWidthZoom,mobileSizeZoom,bigMobileSizeZoom,bigBigMobileSizeZoom,tabletSizeZoom,bigTabletSizeZoom,desktopSizeZoom,viewBetweenZoom,zommButtonBetween,whiteOrder,cssConverting,selectionEvent;contentsPaddingBottom=mediaNumber(140,130,120,100,16),whiteBaseRadius=mediaNumber(15,15,15,15,3),tongMargin=mediaNumber(26,26,26,24,5.2),tongMarginTop=mediaNumber(26,26,26,24,6),naviHeight=mediaNumber(40,40,36,32,24),outerOuterMargin=mediaNumber(16,16,15,15,1),outerMargin=mediaNumber(30,30,28,28,3),viewBetween=mediaNumber(11,11,10,10,1),mobileSize=modeDictionary.mobile.size,bigMobileSize=modeDictionary.bigMobile.size,bigBigMobileSize=modeDictionary.bigBigMobile.size,tabletSize=modeDictionary.tablet.size,bigTabletSize=modeDictionary.bigTablet.size,desktopSize=modeDictionary.desktop.size,buttonHeight=mediaNumber(33,33,33,31,3),buttonMarginTop=mediaNumber(30,30,28,26,3),buttonBorderRadius=mediaNumber(8,8,8,8,1),buttonPadding=mediaNumber(11,11,11,10,1),buttonSize=mediaNumber(16,16,16,15,1),buttonWeight=mediaNumber(800,800,800,800,80),titleSpecialMarginRight=mediaNumber(7,7,6,5,1),titleSpecialVisualTop=mediaNumber(-1,-1,-.5,-.5,0),titleAreaHeight=mediaNumber(42,42,40,38,3),titleSize=mediaNumber(18,18,17,16,3),titleWeight=800,descriptionAreaWidth=mediaNumber(60,50,50,40,12),descriptionSize=mediaNumber(13,13,12,11,1),closeIconWidth=mediaNumber(22,22,20,18,1),zommButtonBetween=mediaNumber(7,7,6,6,1),descriptionWeight=400,wordSpacing=-4,innerWidthStandard=window.innerWidth-2*outerMargin-2*outerOuterMargin,innerWidthStandardZoom=innerWidthStandard*(1/instance.previewZoomLevel),descriptionAreaWidthZoom=descriptionAreaWidth*(1/instance.previewZoomLevel),mobileSizeZoom=1*mobileSize,bigMobileSizeZoom=1*bigMobileSize,bigBigMobileSizeZoom=1*bigBigMobileSize,tabletSizeZoom=1*tabletSize,bigTabletSizeZoom=1*bigTabletSize,desktopSizeZoom=1*desktopSize,viewBetweenZoom=1*viewBetween,modeArr=innerWidthStandardZoom-mobileSizeZoom-tabletSizeZoom-desktopSizeZoom-3*viewBetweenZoom>=descriptionAreaWidthZoom?["mobile","tablet","desktop"]:innerWidthStandardZoom-mobileSizeZoom-tabletSizeZoom-desktopSizeZoom-3*viewBetweenZoom>=descriptionAreaWidthZoom||innerWidthStandardZoom-mobileSizeZoom-tabletSizeZoom-bigTabletSizeZoom-3*viewBetweenZoom>=descriptionAreaWidthZoom?["mobile","tablet","bigTablet"]:innerWidthStandardZoom-mobileSizeZoom-bigMobileSizeZoom-desktopSizeZoom-3*viewBetweenZoom>=descriptionAreaWidthZoom?["mobile","bigMobile","desktop"]:innerWidthStandardZoom-mobileSizeZoom-bigMobileSizeZoom-bigTabletSizeZoom-3*viewBetweenZoom>=descriptionAreaWidthZoom?["mobile","bigMobile","bigTablet"]:innerWidthStandardZoom-bigTabletSizeZoom-desktopSizeZoom-2*viewBetweenZoom>=descriptionAreaWidthZoom?["bigTablet","desktop"]:innerWidthStandardZoom-tabletSizeZoom-desktopSizeZoom-2*viewBetweenZoom>=descriptionAreaWidthZoom?["tablet","desktop"]:innerWidthStandardZoom-bigBigMobileSizeZoom-desktopSizeZoom-2*viewBetweenZoom>=descriptionAreaWidthZoom?["bigBigMobile","desktop"]:innerWidthStandardZoom-bigMobileSizeZoom-desktopSizeZoom-2*viewBetweenZoom>=descriptionAreaWidthZoom?["bigMobile","desktop"]:innerWidthStandardZoom-mobileSizeZoom-desktopSizeZoom-2*viewBetweenZoom>=descriptionAreaWidthZoom?["mobile","desktop"]:innerWidthStandardZoom-mobileSizeZoom-bigTabletSizeZoom-2*viewBetweenZoom>=descriptionAreaWidthZoom?["mobile","bigTablet"]:innerWidthStandardZoom-mobileSizeZoom-tabletSizeZoom-2*viewBetweenZoom>=descriptionAreaWidthZoom?["mobile","tablet"]:innerWidthStandardZoom-desktopSizeZoom-1*viewBetweenZoom>=descriptionAreaWidthZoom?["desktop"]:innerWidthStandardZoom-bigTabletSizeZoom-1*viewBetweenZoom>=descriptionAreaWidthZoom?["bigTablet"]:innerWidthStandardZoom-tabletSizeZoom-1*viewBetweenZoom>=descriptionAreaWidthZoom?["tablet"]:innerWidthStandardZoom-bigBigMobileSizeZoom-1*viewBetweenZoom>=descriptionAreaWidthZoom?["bigBigMobile"]:innerWidthStandardZoom-bigMobileSizeZoom-1*viewBetweenZoom>=descriptionAreaWidthZoom?["bigMobile"]:["mobile"],accNumber=2*outerOuterMargin+outerMargin;for(let m of modeArr)accNumber+=modeDictionary[m].size+viewBetween+2;accNumber=(accNumber-viewBetween+outerMargin)*instance.previewZoomLevel,descriptionAreaWidth=(window.innerWidth-accNumber)*(1/instance.previewZoomLevel),descriptionArr=[],instance.previewZoomLevel>1&&(descriptionSize/=instance.previewZoomLevel,buttonSize/=instance.previewZoomLevel),window.history.pushState({mode:"white"},""),[generalCss]=await back.frontRead(instance.collectionString,{_id:instance.valueParser("decode",thisMap.tree.style.general).id}),generalCssString=generalCss.data,[cXhtml]=await back.frontRead(instance.collectionString,{_id:instance.valueParser("decode",instance.currentXhtmlId).id}),[cCss]=await back.frontRead(instance.collectionString,{_id:instance.valueParser("decode",instance.currentCssId).id}),imageDocuments=await back.frontRead(instance.collectionBlob,{projectId:instance.currentId,key:"blob"}),fontDocuments=await back.frontRead(instance.collectionBlob,{projectId:instance.currentId,key:"font"}),imageResources=[],fontResources=[];for(let b of imageDocuments)imageResources.push({fileName:b.fileName,data:b.data});for(let b of fontDocuments)thisTargetFontFamilyName="",thisTargetFontWeight="400",thisTargetFontSource="",generalCssString.split("\n").join("").replace(/@font\-face\s*\{([^\}]+)\}/gi,(match,p1)=>(new RegExp(b.fileName,"g").test(p1)&&(p1.replace(/font\-family\:\s*[\'\"]([^\'\"]+)[\"\']/gi,(m,p)=>(thisTargetFontFamilyName=p,m)),p1.replace(/font\-weight\:\s*([0-9]+)/gi,(mz,pz)=>(thisTargetFontWeight=pz.replace(/[^0-9]/gi,""),mz)),p1.replace(/src\:\s*url\s*\(['"]?([^'"\)]+)['"]?\)/gi,(mk,pk)=>(thisTargetFontSource=pk,mk))),match)),fontResources.push({fileName:thisTargetFontFamilyName,format:/\.ttf$/gi.test(b.fileName)?"truetype":/\.woff2$/gi.test(b.fileName)?"font-woff2":/\.woff$/gi.test(b.fileName)?"font-woff":"opentype",data:b.data,weight:Number(thisTargetFontWeight),source:thisTargetFontSource});blobUrlsToRevoke=[],imageInfos=imageResources.map(res=>{const url=URL.createObjectURL(res.data);return blobUrlsToRevoke.push(url),{name:res.fileName,url}}),fontInfos=[];for(let res of fontResources){const findResult=instance.customFonts.find(o=>o.format===res.format.toLowerCase()&&o.name===res.fileName&&o.weight===res.weight);void 0===findResult?(thisFontUrl=URL.createObjectURL(res.data),thisFont=new FontFace(res.fileName,`url(${thisFontUrl})`,{weight:String("number"==typeof res.weight?res.weight:400),style:"normal"}),await thisFont.load(),document.fonts.add(thisFont),blobUrlsToRevoke.push(thisFontUrl),fontInfos.push({name:res.fileName,format:res.format.toLowerCase(),url:thisFontUrl,source:res.source,weight:"number"==typeof res.weight?res.weight:400}),instance.customFonts.push({name:res.fileName,format:res.format.toLowerCase(),url:thisFontUrl,source:res.source,weight:"number"==typeof res.weight?res.weight:400})):fontInfos.push(objectDeepCopy(findResult))}if(cXhtmlString=/html/gi.test(instance.valueParser("decode",instance.currentXhtmlId).name)?cXhtml.data:"<body>해당 파일은 미리보기를 볼 수 없습니다.</body>",cCssString=cCss.data,parser=new DOMParser,parsedDocument=parser.parseFromString(cXhtmlString,/\.xhtml/gi.test(instance.valueParser("decode",instance.currentXhtmlId).name)?"application/xhtml+xml":"text/html"),parseError=parsedDocument.querySelector("parsererror"),null===parseError&&(bodyElement=parsedDocument.querySelector("body"),null!==bodyElement)){bodyInImageTargets=[...bodyElement.querySelectorAll("img")];for(let i of bodyInImageTargets)url=new URL(i.src,document.baseURI),pathname=url.pathname,pathname.endsWith("/")&&pathname.length>1&&(pathname=pathname.slice(0,-1)),targetImageFileName=pathname.split("/").at(-1),"string"==typeof targetImageFileName&&(foundIndex=imageInfos.findIndex(o=>o.name===targetImageFileName),-1!==foundIndex&&(thisOriginalImageUrl="",thisOriginalImageUrl=/^http/.test(i.src)?i.src.replace(window.location.host,"").split("/").filter(s=>""!==s).slice(1).join("/"):i.src.replace(window.location.host,"").split("/").filter(s=>""!==s).join("/"),cXhtmlString.replace(new RegExp("(src|Src|SRC)\\s*=\\s*(['\"])([^'\"]*)("+thisOriginalImageUrl+")"),(match,p1,p2,p3,p4)=>(thisOriginalImageUrl=p3+p4,match)),i.setAttribute("data-originalsrc",thisOriginalImageUrl),i.src=imageInfos[foundIndex].url));cXhtmlString=bodyElement.innerHTML,cssConverting=cssString=>{cssString=cssString.replace(/(url\(")([^"]*?)("\))/gis,(match,p1,pathname,p3)=>{const targetImageFileName=pathname.split("/").at(-1);if("string"==typeof targetImageFileName){const foundIndex=imageInfos.findIndex(o=>o.name===targetImageFileName);return-1!==foundIndex?p1+imageInfos[foundIndex].url+p3:match}return match}),cssString=cssString.replace(/(url\(')([^']*?)('\))/gis,(match,p1,pathname,p3)=>{const targetImageFileName=pathname.split("/").at(-1);if("string"==typeof targetImageFileName){const foundIndex=imageInfos.findIndex(o=>o.name===targetImageFileName);return-1!==foundIndex?p1+imageInfos[foundIndex].url+p3:match}return match})},cssConverting(generalCssString),cssConverting(cCssString)}fontStyles="",fontInfos.forEach(font=>{fontStyles+=`\n@font-face { font-family: '${font.name}'; font-weight: ${String(font.weight)}; src: url(${font.url}) format('${font.format}'); font-style: normal; }`}),fontStyles+="\n\n"+generalCssString.replace(/@font\-face[\s]*\{([\s\S]*?)\}/gi,"").split("\n").filter(s=>""!==s.trim()).join("\n").replace(/html\s*\{\s*font\-size\:\s*100\%;?\s*}/gi,"")+"\n",fontStyles+="\n\n"+cCssString.replace(/@font\-face[\s]*\{([\s\S]*?)\}/gi,"").split("\n").filter(s=>""!==s.trim()).join("\n").replace(/html\s*\{\s*font\-size\:\s*100\%;?\s*}/gi,"")+"\n",outputString="@media (min-width: 8px) {\n* { color: white; }\n}\n\n",fontStyles=fontStyles.replace(/(@media\s+.+?\s*\{\s*)((?:[^{}]*|\{[^{}]*\})*)(\s*\})/gis,(match,p1,p2,p3)=>/prefers\-color\-scheme\s*:\s*dark/gis.test(p1)?(outputString+=p1.replace(/prefers\-color\-scheme\s*:\s*dark/gis,"min-width: 8px")+p2+"\n"+p3+"\n\n","\n\n"):match),htmlContent=`\n      <!DOCTYPE html>\n      <html lang="ko">\n      <head>\n        <meta charset="utf-8">\n        <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no,user-scalable=no">\n        <title>Preview</title>\n        <style>\n          html {\n            -webkit-text-size-adjust:100%;\n            -webkit-font-smoothing: antialiased;\n            -moz-osx-font-smoothing: grayscale;\n            -ms-touch-action: manipulation;\n            touch-action: manipulation;\n            background-color: white;\n            color: ${AbstractNode.colorExtended.black};\n          }\n          html, body { margin:0;padding:0;font-size:16px;padding-bottom: 160px !important }\n          html::-webkit-scrollbar{display:none;}\n          body::-webkit-scrollbar{display:none;}\n          *::-webkit-scrollbar{display:none;}\n          *{ cursor: pointer; transition: all 0.3s ease; }\n          *{ transition: color 0.3s ease; }\n \n          @keyframes ____shadow__doms__tempclassname__temp____2_animation {\n            from{opacity:0;padding-bottom: 0px;}\n            to{opacity:1;padding-bottom: ${String(instance.dropAfterAreaHeight)}px;}\n          }\n\n          @keyframes ____shadow__doms__tempclassname__temp____2_animation_out {\n            from{opacity:1;padding-bottom: ${String(instance.dropAfterAreaHeight)}px;}\n            to{opacity:0;padding-bottom: 0px;}\n          }\n\n          .____shadow__doms__tempclassname__temp____ {\n            --pseudo-opacity: 0;\n            --pseudo-padding-bottom: 0px;\n            --pseudo-margin-bottom: 0px;\n            transition: all 0.4s ease;\n            position: relative;\n          }\n\n          .____shadow__doms__tempclassname__temp____2 {\n            display: block;\n            width: 100%;\n            position: relative;\n            padding-bottom: 0px;\n            opacity: 0;\n            background-color: ${colorChip.mint.replace(/,\s*1\)/g,", 0.1)")};\n            border-radius: 3px;\n            border-bottom: ${String(instance.dropAfterAreaBorderWidth)}px solid ${colorChip.mint};\n            animation: ____shadow__doms__tempclassname__temp____2_animation 0.4s ease forwards;\n          }\n\n          @keyframes marching-ants {\n            to {\n              background-position: 100%;\n            }\n          }\n\n          .dashBoxSizeClassName {\n            --border-width: 1px;\n            --border-color: ${colorChip.mint};\n            --dash-length: 4px;\n            --animation-speed: 20s;\n            border: var(--border-width) solid transparent;\n            mix-blend-mode: multiply;\n            background-image:\n              linear-gradient(white, white),\n              repeating-linear-gradient(\n                -45deg,\n                var(--border-color) 0,\n                var(--border-color) var(--dash-length),\n                transparent 0,\n                transparent calc(var(--dash-length) * 2)\n              );\n            background-origin: border-box;\n            background-clip: padding-box, border-box;\n            background-size: calc(var(--dash-length) * 2 * 1.414) calc(var(--dash-length) * 2 * 1.414);\n            animation: marching-ants var(--animation-speed) linear infinite;\n          }\n\n          .dashBoxSizeClassName_moving {\n            background: transparent !important;\n            border: 1px solid ${colorChip.mint};\n            border-image: repeating-linear-gradient(\n                -45deg,\n                var(--border-color) 0,\n                var(--border-color) var(--dash-length),\n                transparent 0,\n                transparent calc(var(--dash-length) * 2)\n              );\n            border-image-slice: 1 1 1 1;\n          }\n\n          .__class_injection____selection {\n            cursor: pointer;\n            border-radius: 10px;\n            background: transparent;\n            transition: all 0.3s ease;\n          }\n\n          .__class_injection____selection:hover {\n            background: ${colorChip.mint.replace(/1\)$/gi,"0.3)")};\n          }\n\n          img{border:0}\n\n          ${fontStyles}\n        </style>\n        <output style="display:none;">\n          ${outputString}\n        </output>\n      </head>\n      <body class="${instance.shadowBodyClassName}">\n      ${cXhtmlString}\n      <script>\n        [ ...document.querySelectorAll("a") ].forEach((a) => \n          a.addEventListener("click", (e) => {\n            e.preventDefault();\n          });\n        });\n      <\/script>\n      </body>\n      </html>`,cleanup=()=>{instance.shadowDoms=[],blobUrlsToRevoke.forEach(url=>{try{URL.revokeObjectURL(url)}catch{}})},selectionEvent=index=>e=>{const motherArr=selectByClass(whitePopupClassName);instance.whitePopupCloseDoing=!0;for(let t of motherArr)new RegExp(whitePopupClassNameDownTarget,"g").test(t.className)?t.style.animation="fadedownentire 0.5s ease forwards":new RegExp(whitePopupClassNameFadeOutTarget,"g").test(t.className)?t.style.animation="fadedown 0.5s ease forwards":t.style.animation="justfadeoutoriginal 0.5s ease forwards";setQueue(()=>{window.removeEventListener("resize",AbstractNode.stacks.resizeEvent),removeByClass(whitePopupClassName),instance.whitePopupCloseDoing=!1,resolve(index)},500),cleanup(),window.history.pushState({mode:"base"},"")},whiteCloseEvent=e=>{const motherArr=selectByClass(whitePopupClassName);instance.whitePopupCloseDoing=!0;for(let t of motherArr)new RegExp(whitePopupClassNameDownTarget,"g").test(t.className)?t.style.animation="fadedownentire 0.5s ease forwards":new RegExp(whitePopupClassNameFadeOutTarget,"g").test(t.className)?t.style.animation="fadedown 0.5s ease forwards":t.style.animation="justfadeoutoriginal 0.5s ease forwards";setQueue(()=>{window.removeEventListener("resize",AbstractNode.stacks.resizeEvent),removeByClass(whitePopupClassName),instance.whitePopupCloseDoing=!1,resolve(-1)},500),cleanup(),window.history.pushState({mode:"base"},"")},cancelBack=createAbstract({mother:totalContents,class:[whitePopupClassName],event:{click:whiteCloseEvent},style:{position:"fixed",top:0,left:0,width:withOut(0),height:withOut(0),opacity:0,animation:"justfadeinoriginal 0.4s ease forwards",background:gradientCss(colorExtended.black,colorExtended.black,.92,.7),backdropFilter:"blur(4px)",zIndex:zIndex-1,zoom:instance.previewZoomLevel}}),createAbstract({mother:totalContents,class:[whitePopupClassName,whitePopupClassNameFadeOutTarget],event:{click:whiteCloseEvent,dragenter$dragover$dragstart$dragleave$drop:e=>{e.stopPropagation(),e.preventDefault()}},style:{position:"fixed",top:outerOuterMargin,left:outerOuterMargin,width:withOut(2*outerOuterMargin,ea),height:withOut(outerOuterMargin,ea),borderTopLeftRadius:whiteBaseRadius,borderTopRightRadius:whiteBaseRadius,borderBottomLeftRadius:0,borderBottomRightRadius:0,border:"1.5px dashed "+colorChip.white,opacity:0,animation:"justfadeinoriginal 0.4s ease forwards",borderBottom:"",zIndex:zIndex-1,zoom:instance.previewZoomLevel},child:{event:{dragenter$dragover$dragstart$dragleave$drop:e=>{e.stopPropagation(),e.preventDefault()}},style:{display:"flex",flexDirection:"row",position:"relative",width:withOut(2*(outerMargin-1.5)),height:withOut(0),paddingLeft:outerMargin-1.5,paddingRight:outerMargin-1.5,justifyContent:"start",alignItems:"start"},children:modeArr.map(m=>{const thisWidth=modeDictionary[m].size,thisTitle=`<u%>%u> ${modeDictionary[m].title} (${String(modeDictionary[m].size)}px)`;return{event:{dragenter$dragover$dragstart$dragleave$drop:e=>{e.stopPropagation(),e.preventDefault()}},style:{paddingTop:outerMargin,width:pixelUnit(thisWidth),marginRight:pixelUnit(viewBetween),display:"inline-flex",flexDirection:"column",justifyContent:"start",alignItems:"start"},child:{style:{width:withOut(0),height:titleAreaHeight,display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start"},child:{text:thisTitle,style:{display:"flex",flexDirection:"row",fontSize:titleSize,fontWeight:titleWeight,color:colorChip.white},under:{fontSize:titleSize,marginRight:titleSpecialMarginRight,fontWeight:300,position:"relative",top:titleSpecialVisualTop,color:colorChip.white}}}}}).concat([{style:{position:"absolute",bottom:outerMargin/2,right:.7*outerMargin,display:"inline-flex",flexDirection:"column",justifyContent:"end",alignItems:"start",width:descriptionAreaWidth},children:[{text:descriptionArr.map(s=>s.join(" ")).join("\n\n"),style:{fontFamily:"pretendard",fontSize:descriptionSize,fontWeight:descriptionWeight,color:colorChip.white,lineHeight:1.75}},{attribute:{toggle:"off"},event:{click$contextmenu$dblclick:e=>{e.preventDefault();const self=e.currentTarget,toggle=String(self.getAttribute("toggle")),textDom=self.firstChild;e.preventDefault(),e.stopPropagation(),instance.shadowHistory((d,shadowIndex)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,styleTag=shadow.querySelector("style"),outputTag=shadow.querySelector("output");"off"===toggle?(instance.isInDarkMode=!0,d.style.backgroundColor="black",self.style.backgroundColor="black",textDom.querySelector("path").setAttribute("fill",colorChip.white),styleTag.insertAdjacentHTML("beforeend","\n\n"+outputTag.innerHTML),self.setAttribute("toggle","on")):(instance.isInDarkMode=!1,d.style.backgroundColor="white",self.style.backgroundColor="white",textDom.querySelector("path").setAttribute("fill",colorChip.black),styleTag.innerHTML=styleTag.innerHTML.replace(/(@media\s+.+?\s*\{\s*)((?:[^{}]*|\{[^{}]*\})*)(\s*\})/gis,(match,p1,p2,p3)=>/min\-width\s*:\s*8px/gis.test(p1)?"\n\n":match),self.setAttribute("toggle","off"))})}},style:{height:buttonHeight,borderRadius:buttonBorderRadius,background:colorChip.white,marginTop:buttonMarginTop,display:"inline-flex",justifyContent:"center",alignItems:"center",paddingRight:buttonPadding,paddingLeft:buttonPadding,cursor:"pointer"},child:{mode:"svg",source:svgMaker.darkMoon(colorChip.black),style:{height:buttonSize}}}]},{mode:"svg",source:svgMaker.minusCircleIcon(colorChip.white),event:{click:async e=>{e.stopPropagation(),e.preventDefault(),instance.previewZoomLevel=instance.previewZoomLevel-.1,whiteCloseEvent(new Event("click")),setQueue(()=>{instance.previewPopup().catch(e=>console.log(e))},600)}},style:{position:"absolute",top:outerMargin,right:outerMargin,width:closeIconWidth,cursor:"pointer"}},{mode:"svg",source:svgMaker.plusCircleIcon(colorChip.white),event:{click:async e=>{e.stopPropagation(),e.preventDefault(),instance.previewZoomLevel=instance.previewZoomLevel+.1,whiteCloseEvent(new Event("click")),setQueue(()=>{instance.previewPopup().catch(e=>console.log(e))},600)}},style:{position:"absolute",top:outerMargin,right:outerMargin+closeIconWidth+zommButtonBetween,width:closeIconWidth,cursor:"pointer"}}])}}),widthAcc=0,shadowDoms=[],createPreviewPopup=(m,order)=>{const thisWidth=modeDictionary[m].size,thisLeft=outerMargin+outerOuterMargin+widthAcc,thisDom=createAbstract({mother:totalContents,class:[whitePopupClassName,whitePopupClassNameDownTarget],attribute:{kind:m,size:String(thisWidth),order:String(order)},style:{position:"fixed",width:pixelUnit(thisWidth),height:withOut(outerMargin+outerOuterMargin+titleAreaHeight),top:outerMargin+outerOuterMargin+titleAreaHeight,left:pixelUnit(thisLeft),borderTopLeftRadius:whiteBaseRadius,borderTopRightRadius:whiteBaseRadius,borderBottomLeftRadius:0,borderBottomRightRadius:0,background:colorChip.white,animation:"fadeupentire 0.5s ease forwards",zIndex,flexDirection:"column",overflow:"hidden",transition:"all 0.3s ease",zoom:instance.previewZoomLevel},child:{style:{display:"block",width:withOut(0),height:withOut(0),overflow:"scroll"},child:{style:{display:"block",width:withOut(2*tongMargin),height:withOut(tongMarginTop),paddingLeft:tongMargin,paddingRight:tongMargin,paddingTop:tongMarginTop},child:{class:[shadowDomTargetClassName],style:{width:withOut(0),height:"auto",border:0,outline:0,paddingBottom:200}}}}}),parsedHtml=(new DOMParser).parseFromString(htmlContent,"text/html"),shadowRoot=thisDom.querySelector("."+shadowDomTargetClassName).attachShadow({mode:"open"});parsedHtml.querySelectorAll('style, link[rel="stylesheet"]').forEach(styleNode=>{shadowRoot.appendChild(styleNode.cloneNode(!0))});const contentContainer=document.createDocumentFragment(),nodesToMove=Array.from(parsedHtml.body.childNodes);for(const node of nodesToMove)contentContainer.appendChild(node);return shadowRoot.appendChild(contentContainer),shadowDoms.push(thisDom),thisWidth+viewBetween},whiteOrder=0;for(let m of modeArr)widthAcc+=createPreviewPopup(m,whiteOrder),whiteOrder++;shadowDoms.forEach((d,shadowIndex)=>{const host=d.querySelector("."+shadowDomTargetClassName),shadow=host.shadowRoot,thisKind=(shadow.querySelectorAll("."+instance.imageResponseDivClassName),host.getBoundingClientRect().width,instance.standardPoint,instance.imageMediaClassNames,d.mustAttribute("kind")),thisStyleTag=shadow.querySelector("style"),outputTag=shadow.querySelector("output"),targetTargets=[...shadow.children].map(c=>c).filter(d=>!/(style|output|script)/gi.test(d.nodeName));let index;thisStyleTag.innerHTML=instance.mediaInPreview(thisKind,thisStyleTag.innerHTML),outputTag.innerHTML=instance.mediaInPreview(thisKind,outputTag.innerHTML),index=0;for(let dom of targetTargets){const computedStyle=window.getComputedStyle(dom);dom.classList.add("__class_injection____selection"),dom.addEventListener("click",selectionEvent(index)),dom.style.background="",dom.style.backgroundColor="",""!==computedStyle.paddingTop?dom.style.paddingTop=pixelUnit(8):dom.style.paddingTop=cssCalc(computedStyle.paddingTop,"+",pixelUnit(8)),""!==computedStyle.paddingBottom?dom.style.paddingBottom=pixelUnit(8):dom.style.paddingBottom=cssCalc(computedStyle.paddingBottom,"+",pixelUnit(8)),""!==computedStyle.paddingLeft?dom.style.paddingLeft=pixelUnit(10):dom.style.paddingLeft=cssCalc(computedStyle.paddingLeft,"+",pixelUnit(10)),""!==computedStyle.paddingRight?dom.style.paddingRight=pixelUnit(10):dom.style.paddingRight=cssCalc(computedStyle.paddingRight,"+",pixelUnit(10)),index++}})}catch(e){console.log(e)}})};currentFontFiles=(selectMode=!1)=>{const instance=this,back=this.back,{colorChip,svgMaker:localSvgMaker,binaryPath}=(this.collectionMap,PathAnimator),{withOut,percent,promptPopup,setDomColor,markdownBlocks,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(),fontArr=instance.currentMap.tree.font.map(s=>({id:instance.valueParser("decode",s).id,name:instance.valueParser("decode",s).name}));let whiteTongBase,whiteWidth,whiteTong,grayBox,paddingTop,paddingLeft,paddingBottom,cancelEvent,inputSize,size0,size1,marginLeft,lineHeight,inputBoxHeight,grayBoxBetween,questionWordVisualTopPlus,questionMinusLeft,gap,maxHeightLength,generalCssId,generalCssString,generalFontFaceArr,borderRadius,nameBoxWidth,weightBoxWidth,nameBoxSize,fontGrid,plusWidth,plusMarginLeft,plusTop;return whiteWidth=mediaNumber(750,740,720,560,90),paddingTop=mediaNumber(20,19,18,17,3.5),paddingLeft=mediaNumber(23,22,21,20,3.9),paddingBottom=mediaNumber(23,22,21,20,4.1),inputSize=mediaNumber(15,15,14.5,14.5,3),size0=mediaNumber(15,15,14.5,14,3.1),size1=mediaNumber(16,16,15.5,15,3.4),marginLeft=mediaNumber(15,15,15,15,4.8),lineHeight=1.5,inputBoxHeight=mediaNumber(32,31,30,29,6.5),grayBoxBetween=mediaNumber(6,5,5,5,1.2),questionWordVisualTopPlus=mediaNumber(0,0,0,0,0),questionMinusLeft=mediaNumber(-13.5,-13.5,-13,-12.5,-4.2),gap=mediaNumber(2,2,1.5,1,.5),maxHeightLength=mediaNumber(29,24,21,16,8),borderRadius=mediaNumber(5,5,4,4,1),nameBoxWidth=mediaNumber(120,120,120,120,30),nameBoxSize=mediaNumber(13,13,12,12,3),weightBoxWidth=mediaNumber(70,70,60,56,20),fontGrid=mediaString("1fr 1fr 1fr","1fr 1fr 1fr","1fr 1fr","1fr 1fr","1fr"),plusWidth=mediaNumber(14,13.5,13,12,14.5),plusMarginLeft=mediaNumber(4,4,4,4,4),plusTop=mediaNumber(-.2,-.2,-.1,-0,-.5),generalCssId=instance.currentMap?.tree.style.general,generalCssId=instance.valueParser("decode",generalCssId).id,new Promise((resolve,reject)=>{back.frontRead(instance.collectionString,{_id:generalCssId}).then(docs=>{generalCssString=docs[0].data,generalFontFaceArr=[],generalCssString=generalCssString.split("\n").join(" "),generalCssString.replace(/@font\-face[ ]*\{([^\}]*)\}/gi,(match,p1)=>{const fontInfo={id:"",name:"",file:"",weight:0,load:!1};return p1.replace(/font\-family[ ]*\:[ ]*['"]([^'"]+)['"]/gi,(m,p)=>(fontInfo.name=p,"")),p1.replace(/src[ ]*\:[ ]*url\(([^\)]+)\)/gi,(m,p)=>(fontInfo.file=p.split("/").at(-1),"")),p1.replace(/font\-weight[ ]*\:[ ]*([0-9]+)/gi,(m,p)=>(fontInfo.weight=Number(p.replace(/[^0-9]/gi,"")),"")),generalFontFaceArr.push(fontInfo),""}),generalFontFaceArr=generalFontFaceArr.filter(o=>""!==o.name&&""!==o.file&&!Number.isNaN(o.weight)&&0!==o.weight),generalFontFaceArr=generalFontFaceArr.map(o=>{const obj={...o},target=fontArr.find(k=>k.name===o.file);return void 0===target||(obj.load=!0,obj.id=target.id),obj}).filter(o=>o.load),cancelEvent=()=>e=>{e.preventDefault(),e.stopPropagation();const targets=[...document.querySelectorAll(".fontWhitePopupClassName")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}resolve("")},whiteTongBase=createAbstract({mother:document.body,class:["fontWhitePopupClassName"],event:{drop:e=>{e.stopPropagation()},keyup:e=>{e.stopPropagation()},keydown:e=>{e.stopPropagation()},click:cancelEvent()},style:{display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",top:String(0)+"vh",left:String(1)+"vw",width:String(98)+"vw",height:String(100)+"vh",background:"transparent",zIndex:899}}),whiteTong=createAbstract({mother:whiteTongBase,event:{click:e=>{e.stopPropagation()}},style:{display:"block",position:"relative",width:String(whiteWidth-2*paddingLeft)+ea,paddingTop:String(paddingTop)+ea,paddingBottom:String(paddingBottom)+ea,paddingLeft:String(paddingLeft)+ea,paddingRight:String(paddingLeft)+ea,borderRadius:String(5)+"px",boxShadow:"0px 3px 15px -9px "+colorExtended.shadow,background:colorExtended.white,animation:"fadeuporiginal 0.5s ease forwards"}}),createAbstract({mother:whiteTong,text:"현재 등록된 폰트 파일 ",event:{click:async e=>{const self=e.currentTarget;e.preventDefault(),cancelEvent().call(self,e);const fontLevel=[{index:100,target:"thin"},{index:200,target:"extralight"},{index:300,target:"light"},{index:400,target:"regular"},{index:500,target:"medium"},{index:600,target:"semibold"},{index:800,target:"extrabold"},{index:700,target:"bold"},{index:900,target:"black"}];let fontName,promptResult,resultArr,middleArr,parsedData,safeNum,finalCssString,generalCssId,generalCssObject,generalCssText,newGeneralCssText,cssEditorView,newState;for(safeNum=0,fontName=null;null===fontName&&(fontName=await promptPopup("폰트 이름을 영문으로만 적어주세요!"),"string"!=typeof fontName?fontName=null:(fontName=fontName.replace(/[^a-zA-Z0-9_\-]/gi,"").replace(/\n/gi,"").replace(/\t/gi,"").replace(/ /gi,"").replace(/^[0-9]/gi,"").replace(/^[0-9]/gi,"").replace(/^[0-9]/gi,"").replace(/^[0-9]/gi,"").trim(),""===fontName&&(fontName=null),/^[0-9]/gi.test(fontName)&&(fontName=null)),!(safeNum>0));)safeNum++;if(null!==fontName&&(promptResult=await promptPopup("폰트 파일을 올려 주세요!","file",9,"mint",!1,!1,"",!1),null!==promptResult))try{resultArr=promptResult.map((b,index)=>b instanceof File&&"string"==typeof b.name&&0!==b.size?JSON.stringify({title:"index_"+String(index),data:b.name}):null),resultArr=resultArr.filter(s=>null!==s),middleArr=resultArr.map(s=>{try{if(null===s)return null;const o=JSON.parse(s);let fileName,exe,thisType,thisIndex,foundedTarget,orinalFileName,originalIndex;if(fileName=o.data.trim(),foundedTarget=-1,/\//gi.test(fileName)&&(fileName=fileName.split("/").at(-1)),orinalFileName=fileName,fileName=fileName.toLowerCase(),originalIndex=100*Number(o.title.replace(/[^0-9]/gi,""))+100,/\./gi.test(fileName)){if(exe=fileName.split(".").at(-1),exe=exe.toLowerCase(),thisIndex=100,"ttf"===exe){if(/\-/gi.test(fileName))thisType=fileName.split("-").at(-1).replace(new RegExp("."+exe+"$"),""),thisType=thisType.trim().toLowerCase(),thisIndex=fontLevel.map(o=>o.target).includes(thisType)?fontLevel.find(o=>o.target===thisType).index:originalIndex;else{foundedTarget=-1;for(let obj of fontLevel)if(new RegExp(obj.target,"gi").test(fileName)){foundedTarget=obj.index;break}thisIndex=-1!==foundedTarget?foundedTarget:originalIndex}return-1===thisIndex&&(thisIndex=originalIndex),{index:thisIndex,fileName:"../Fonts/"+orinalFileName,original:originalIndex}}return null}return null}catch{return null}}).filter(o=>null!==o),middleArr.map(o=>o.index).length!==[...new Set(middleArr.map(o=>o.index))].length&&(middleArr=middleArr.map(o=>(o.index=o.original,o))),parsedData=middleArr.map(o=>`@font-face{font-family:"${fontName}";src:url(${String(o.fileName)})format("truetype");font-weight:${String(o.index)};font-style:normal}`),finalCssString=parsedData.join("\n"),generalCssId=instance.valueParser("decode",instance.currentMap.tree.style.general).id,[generalCssObject]=await back.frontRead(instance.collectionString,{_id:generalCssId}),generalCssText=generalCssObject.data,newGeneralCssText="\n\n"+generalCssText,parsedData.forEach(c=>{let name,weight;name="",weight="",c.replace(/font\-family\:"([^"]+)"/gi,(match,p1)=>(name=p1,match)),c.replace(/font\-weight\:([0-9]+)/gi,(match,p1)=>(weight=p1,match)),new RegExp('"'+name+'"[^\\}]*'+weight,"g").test(generalCssText)||new RegExp(weight+'[^\\}]*"'+name+'"',"g").test(generalCssText)||(newGeneralCssText=c+"\n"+newGeneralCssText)}),await back.frontUpdate(instance.collectionString,[{_id:generalCssId},{...generalCssObject,data:newGeneralCssText}]),instance.valueParser("decode",instance.currentCssId).id===generalCssId&&(cssEditorView=instance.cssView,newState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:""}}),cssEditorView.dispatch(newState),newState=cssEditorView.state.update({changes:{from:0,to:0,insert:newGeneralCssText}}),cssEditorView.dispatch(newState));const thisMap=instance.currentMap;for(let b of promptResult)if(b instanceof File&&0!==b.size&&/ttf$/gi.test(String(b.name.trim().split(".").at(-1)))){const blobModel={_id:instance.epubBlobIdMaker(thisMap.projectId),date:new Date,projectId:thisMap.projectId,key:"font",fileName:b.name,absolute:instance.absoluteBase.font+"/"+b.name,data:b},{_id}=await back.frontCreate(instance.collectionBlob,blobModel);thisMap.tree.font.push(instance.valueParser("encode",_id,b.name))}await back.frontUpdate(instance.collectionMap,[{_id:thisMap._id},thisMap]),instance.currentMap=thisMap,await sleep(200),instance.saveDebounce()}catch{}await instance.currentFontFiles()}},style:{position:"relative",marginLeft:String(marginLeft)+ea,fontFamily:"pretendard",fontSize:String(size1)+ea,fontWeight:String(700),color:colorExtended.black,lineHeight:String(1.5),flexDirection:"row",justifyContent:"start",alignItems:"center",cursor:"pointer"},child:{text:">",style:{fontSize:String(size0)+ea,fontWeight:String(400),color:colorChip.mint,position:"absolute",fontFamily:"altertypo",top:String(questionWordVisualTopPlus)+ea,left:String(questionMinusLeft)+ea,lineHeight:String(1.5)},next:{mode:"svg",source:svgMaker.plusIcon(colorChip.mint),style:{display:"inline-flex",position:"relative",width:plusWidth,marginLeft:plusMarginLeft,top:plusTop}}}}),grayBox=createAbstract({mother:whiteTong,style:{left:String(marginLeft)+ea,width:withOut(marginLeft,ea),minHeight:String(inputBoxHeight)+ea,maxHeight:inputBoxHeight*maxHeightLength+gap*(maxHeightLength-1),marginTop:String(grayBoxBetween)+ea,overflow:"scroll"},child:{style:{display:"grid",gridTemplateColumns:fontGrid,gap}}});for(let id of generalFontFaceArr){const thisFontTargets=fontArr.filter(o=>o.name===id.file);id.load&&createAbstract({mother:grayBox.firstChild,attribute:{info:JSON.stringify(thisFontTargets),family:id.name,weight:String(id.weight)},event:{contextmenu:async e=>{const self=e.currentTarget;e.preventDefault();try{const infoArr=JSON.parse(String(self.getAttribute("info")));if(0===infoArr.length)throw new Error("invalid info status");const{id,name:fileName}=infoArr[0];String(self.getAttribute("family"));let promptResult;if(promptResult=await promptPopup("해당 폰트를 완전히 삭제할까요?","select","삭제$취소"),null!==promptResult&&"삭제"===promptResult){const thisMap=instance.currentMap;await back.frontDelete(instance.collectionBlob,{_id:id}),thisMap.tree.font=thisMap.tree.font.filter(s=>!new RegExp(id,"g").test(s)),await back.frontUpdate(instance.collectionMap,[{_id:thisMap._id},thisMap]),instance.currentMap=thisMap;const generalCssId=instance.valueParser("decode",instance.currentMap.tree.style.general).id,[generalCssObject]=await back.frontRead(instance.collectionString,{_id:generalCssId}),newGeneralCssText=generalCssObject.data.split("\n").join("__split__").replace(new RegExp("@font-face\\s*\\{[^\\{\\}]+"+fileName+"['\"]?\\s*\\)[^\\{\\}]+\\}","gi"),match=>"__split__").split("__split__").join("\n");if(generalCssObject.data=newGeneralCssText,await back.frontUpdate(instance.collectionString,[{_id:generalCssObject._id},generalCssObject]),instance.valueParser("decode",instance.currentCssId).id===generalCssObject._id){const cssEditorView=instance.cssView,newCssState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:newGeneralCssText}});cssEditorView.dispatch(newCssState)}instance.saveDebounce(!0),await instance.saveCurrentState();cancelEvent().bind(self)(e),await sleep(400),await instance.currentFontFiles()}}catch(e){console.log(e)}},click:async e=>{const self=e.currentTarget;try{const family=String(self.getAttribute("family")),weight=Number(self.getAttribute("weight"));if(!Number.isNaN(weight)&&""!==family&&selectMode){const targets=[...document.querySelectorAll(".fontWhitePopupClassName")];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}resolve(JSON.stringify({family,weight}))}}catch(e){console.log(e)}}},style:{width:withOut(0),height:inputBoxHeight,borderRadius,display:"flex",flexDirection:"row",cursor:"pointer"},children:[{style:{minWidth:nameBoxWidth,height:withOut(0),borderRadius,background:colorChip.mint,display:"inline-flex",justifyContent:"center",alignItems:"center",marginRight:gap,flexGrow:1},child:{text:id.name,style:{fontFamily:"redditmono",fontSize:nameBoxSize,fontWeight:400,color:colorChip.white}}},{style:{width:weightBoxWidth,height:withOut(0),borderRadius,background:colorChip.black,display:"inline-flex",justifyContent:"center",alignItems:"center",flexGrow:0},child:{text:String(id.weight),style:{fontFamily:"redditmono",fontSize:nameBoxSize,fontWeight:400,color:colorChip.white}}}]})}setTimeout(()=>{grayBox.getBoundingClientRect().height<grayBox.firstChild.getBoundingClientRect().height&&(grayBox.style.borderBottom="1px solid "+colorChip.mintDark,grayBox.style.paddingBottom=String(2*paddingBottom)+ea),selectMode||resolve("")},100)}).catch(e=>{console.log(e),reject(e)})})};currentImages=async(imageClickCallBack=async(f,w,h,u,i,c,t)=>{})=>{const instance=this,back=this.back,{colorChip,svgMaker:localSvgMaker,binaryPath}=(this.collectionMap,PathAnimator),{withOut,percent,promptPopup,setDomColor,markdownBlocks,linkToString,stringToLink,hangulToEnglish,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();try{const imageWhitePopupClassName="imageWhitePopupClassName",selectionImageClassName="selectionImageClassName",selectionCheckAreaClassName="selectionCheckAreaClassName",coverImageTongClassName="coverImageTongClassName",specialTargetsList=[{index:0,fileName:"cover.jpg",className:"thisProjectFrontCoverClassName",title:"커버 이미지",question:"커버 이미지를 바꿀까요? (jpg 업로드 가능)",type:["jpg","jpeg"]},{index:1,fileName:"subCover.jpg",className:"thisProjectBackCoverClassName",title:"후면 커버 이미지",question:"후면 커버 이미지를 바꿀까요? (jpg 업로드 가능)",type:["jpg","jpeg"]},{index:2,fileName:"info.png",className:"thisProjectBookInfoClassName",title:"서지 정보 이미지",question:"서지 정보 이미지를 바꿀까요? (png 업로드 가능)",type:["png"]}],specialTargets=(specialTargetsList.map(o=>o.className).map(s=>"."+s).join(" "),specialTargetsList.map(o=>o.fileName)),zIndex=899;let whiteTongBase,whiteWidth,whiteTong,grayBox,paddingTop,paddingLeft,paddingBottom,cancelEvent,inputSize,size0,size1,marginLeft,lineHeight,inputBoxHeight,grayBoxBetween,questionWordVisualTopPlus,questionMinusLeft,gap,maxHeightLength,borderRadius,nameBoxWidth,weightBoxWidth,nameBoxSize,plusWidth,plusMarginLeft,plusTop,columnsLength,targetImages,columnsDom,imageBetween,targetDom,imageBorderRadius,loadingPromises,imageInfos,shortestColumnIndex,columnHeights,columnWidth,displayHeight,selectionCheckIconWidth,selectionCheckIconTop,selectionCheckIconLeft,index,imageClickEvent,coverClickEvent,imageInputDropEvent,coverInputDropEvent,imageDeleteEvent,fileNameArr,urlArr,indexArr,columnArr,widthArr,heightArr,domArr,buttonWidth,buttonHeight,buttonSize,coverZoneWidth,coverImageTong,maxHeightVh,coverChildren,buttonBetween;instance.imageSelectClassName="normal",whiteWidth=mediaNumber(1400,1150,900,800,94),coverZoneWidth=mediaNumber(5,5,4,4,1),paddingTop=mediaNumber(20,19,18,17,3.5),paddingLeft=mediaNumber(23,22,21,20,3.9),paddingBottom=mediaNumber(23,22,21,20,4.1),inputSize=mediaNumber(15,15,14.5,14.5,3),size0=mediaNumber(15,15,14.5,14,3.1),size1=mediaNumber(16,16,15.5,15,3.4),marginLeft=mediaNumber(15,15,15,15,4.8),lineHeight=1.5,inputBoxHeight=mediaNumber(32,31,30,29,6.5),grayBoxBetween=mediaNumber(6,5,5,5,1.2),questionWordVisualTopPlus=mediaNumber(0,0,0,0,0),questionMinusLeft=mediaNumber(-13.5,-13.5,-13,-12.5,-4.2),gap=mediaNumber(2,2,1.5,1,.5),maxHeightLength=mediaNumber(29,25,24,21,8),borderRadius=mediaNumber(5,5,4,4,1),nameBoxWidth=mediaNumber(120,120,120,120,30),nameBoxSize=mediaNumber(13,13,12,12,3),weightBoxWidth=mediaNumber(70,70,60,56,20),maxHeightVh=80,plusWidth=mediaNumber(14,13.5,13,12,14.5),plusMarginLeft=mediaNumber(4,4,4,4,4),plusTop=mediaNumber(-.2,-.2,-.1,-0,-.5),columnsLength=mediaNumber(4,4,3,3,2),imageBorderRadius=mediaNumber(6,6,5,4,1),imageBetween=mediaNumber(4,4,3,2,1),selectionCheckIconWidth=mediaNumber(16,16,15,14,1),selectionCheckIconTop=mediaNumber(14,14,13,12,1),selectionCheckIconLeft=mediaNumber(16,16,15,14,1),buttonWidth=mediaNumber(46,46,45,45,47),buttonHeight=mediaNumber(22,22,22,22,22),buttonSize=mediaNumber(12,12,12,12,47),buttonBetween=mediaNumber(2,2,2,1,0),this.newImageDropDoing=!1,grayBoxBetween-=imageBetween,fileNameArr=[],urlArr=[],indexArr=[],columnArr=[],widthArr=[],heightArr=[],domArr=[];const loading=AbstractNode.whiteProgressLoading(null,!0);targetImages=await back.frontRead(instance.collectionBlob,{projectId:instance.currentMap.projectId,key:"blob"}),imageInfos=[],loadingPromises=[];for(let b of targetImages){const url=URL.createObjectURL(b.data),tempImg=new Image,loadPromise=new Promise((resolve,reject)=>{tempImg.onload=()=>{imageInfos.push({_id:b._id,fileName:b.fileName,url,heightRatio:tempImg.naturalHeight/tempImg.naturalWidth,data:b.data}),resolve()},tempImg.onerror=err=>{URL.revokeObjectURL(url),reject(err)}});tempImg.src=url,loadingPromises.push(loadPromise)}await Promise.all(loadingPromises),await sleep(150),loading.remove(),cancelEvent=()=>async e=>{e.preventDefault(),e.stopPropagation();for(let b of imageInfos)URL.revokeObjectURL(b.url);await imageClickCallBack(fileNameArr,widthArr,heightArr,urlArr,indexArr,columnArr,domArr),selectByClass(imageWhitePopupClassName)[0].firstChild.style.animation="fadedown 0.3s ease forwards",await sleep(300);const targets=[...document.querySelectorAll("."+imageWhitePopupClassName)];for(let z=0;z<targets.length;z++)try{targets[z].remove()}catch{}},whiteTongBase=createAbstract({mother:document.body,class:[imageWhitePopupClassName],event:{keyup:e=>{e.stopPropagation()},keydown:e=>{e.stopPropagation()},click:cancelEvent(),dragenter$dragover$dragstart$dragleave$drop:e=>{e.stopPropagation(),e.preventDefault()}},style:{display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",top:String(0)+"vh",left:String(1)+"vw",width:String(98)+"vw",height:String(100)+"vh",background:"transparent",zIndex}}),whiteTong=createAbstract({mother:whiteTongBase,event:{click:e=>{e.stopPropagation()},dragenter$dragover$dragstart$dragleave$drop:e=>{e.stopPropagation(),e.preventDefault()}},style:{display:"block",position:"relative",width:String(whiteWidth-2*paddingLeft)+ea,paddingTop:String(paddingTop)+ea,paddingBottom:String(paddingBottom)+ea,paddingLeft:String(paddingLeft)+ea,paddingRight:String(paddingLeft)+ea,borderRadius:String(5)+"px",boxShadow:"0px 3px 15px -9px "+colorExtended.shadow,background:gradientCss(colorExtended.gray1,colorExtended.gray1,.85,.6),backdropFilter:"blur(4px)",animation:"fadeuporiginal 0.5s ease forwards"}}),imageClickEvent=()=>async e=>{e.preventDefault();const self=e.currentTarget,targetImg=self.querySelector("img"),toggle=String(self.getAttribute("toggle")),fileName=String(self.getAttribute("file")),url=String(self.getAttribute("url")),index=Number(self.getAttribute("index")),column=Number(self.getAttribute("column"));if("off"===toggle)self.setAttribute("toggle","on"),self.querySelector("."+selectionCheckAreaClassName).style.opacity=String(1),fileNameArr.push(fileName),urlArr.push(url),indexArr.push(index),columnArr.push(column),widthArr.push(targetImg.naturalWidth),heightArr.push(targetImg.naturalHeight),domArr.push(self),"normal"===instance.imageSelectMode?setTimeout(async()=>{cancelEvent().bind(self)(e)},100):"dark"===instance.imageSelectMode?2===fileNameArr.length&&setTimeout(async()=>{cancelEvent().bind(self)(e)},100):3===fileNameArr.length&&setTimeout(async()=>{cancelEvent().bind(self)(e)},100);else{self.setAttribute("toggle","off"),self.querySelector("."+selectionCheckAreaClassName).style.opacity=String(0);const deleteTargetIndexArr=fileNameArr.map(i=>i===fileName?0:1),deleteFilter=(z,i)=>1===deleteTargetIndexArr[i];fileNameArr=fileNameArr.filter(deleteFilter),urlArr=urlArr.filter(deleteFilter),indexArr=indexArr.filter(deleteFilter),columnArr=columnArr.filter(deleteFilter),widthArr=widthArr.filter(deleteFilter),heightArr=heightArr.filter(deleteFilter),domArr=domArr.filter(deleteFilter)}},imageDeleteEvent=()=>async e=>{e.preventDefault();const self=e.currentTarget,id=String(self.getAttribute("unique"));let promptResult;if(promptResult=await promptPopup("해당 이미지를 완전히 삭제할까요?","select","삭제$취소"),null!==promptResult&&"삭제"===promptResult){const thisMap=instance.currentMap;await back.frontDelete(instance.collectionBlob,{_id:id}),thisMap.tree.image=thisMap.tree.image.filter(s=>!new RegExp(id,"g").test(s)),await back.frontUpdate(instance.collectionMap,[{_id:thisMap._id},thisMap]),instance.currentMap=thisMap,instance.saveDebounce(!0),await instance.saveCurrentState();const c=cancelEvent().bind(self);await c(e),await sleep(400),await instance.currentImages(imageClickCallBack)}},coverClickEvent=index=>async e=>{const self=e.currentTarget;e.preventDefault();const thisTargetObject=specialTargetsList.find(o=>o.index===index);let promptResult,fileResponse,fileBlob,rows,targetRow;if(promptResult=await promptPopup(thisTargetObject.question,"select","대체$취소"),null!==promptResult){const c=cancelEvent().bind(self);if(await c(e),fileResponse=await promptPopup(thisTargetObject.title+" 파일을 올려주세요!","file",1,"mint",!1,!1,"/",!1,async value=>"fileName"===value?thisTargetObject.fileName:!!thisTargetObject.type.includes(value.trim().toLowerCase().split(".").at(-1))),null!==fileResponse&&fileResponse.length>0){[fileBlob]=fileResponse;try{const thisMap=instance.currentMap;if(rows=await back.frontRead(instance.collectionBlob,{fileName:thisTargetObject.fileName,projectId:thisMap.projectId}),0===rows.length){const blobModel={_id:instance.epubBlobIdMaker(thisMap.projectId),date:new Date,projectId:thisMap.projectId,key:"blob",fileName:thisTargetObject.fileName,absolute:instance.absoluteBase.image+"/"+thisTargetObject.fileName,data:fileBlob},{_id}=await back.frontCreate(instance.collectionBlob,blobModel);thisMap.tree.image.push(instance.valueParser("encode",_id,thisTargetObject.fileName)),await back.frontUpdate(instance.collectionMap,[{_id:thisMap._id},thisMap]),instance.currentMap=thisMap}else targetRow=rows[0],targetRow.data=fileBlob,await back.frontDelete(instance.collectionBlob,{_id:targetRow._id}),await back.frontCreate(instance.collectionBlob,targetRow);await sleep(200),instance.saveDebounce()}catch{}}await instance.currentImages(imageClickCallBack)}},imageInputDropEvent=()=>async e=>{e.preventDefault();const self=e.currentTarget;if(e.dataTransfer.files.length>0&&!instance.newImageDropDoing){instance.newImageDropDoing=!0;const files=e.dataTransfer.files,loading=AbstractNode.whiteProgressLoading(null,!0);try{if([...files].some(f=>!instance.imageExe.includes(String(f.name.split(".").at(-1)).toLowerCase())))throw new Error("not image");for(const rawFile of files){const originalBlob=rawFile,newFileName="s"+uniqueValue("short").slice(0,6)+"_"+hangulToEnglish(rawFile.name.replace(/[\\\/:\*\?"<>\| ]/gi,"_")),newFileOptions={type:rawFile.type,lastModified:rawFile.lastModified},targetFile=new File([originalBlob],newFileName,newFileOptions);try{if(0!==targetFile.size){if(!instance.imageExe.includes(String(targetFile.name.split(".").at(-1)).toLowerCase()))throw new Error("not image");const thisMap=instance.currentMap,blobModel={_id:instance.epubBlobIdMaker(thisMap.projectId),date:new Date,projectId:thisMap.projectId,key:"blob",fileName:targetFile.name,absolute:instance.absoluteBase.image+"/"+targetFile.name,data:targetFile},{_id}=await back.frontCreate(instance.collectionBlob,blobModel);thisMap.tree.image.push(instance.valueParser("encode",_id,targetFile.name)),await back.frontUpdate(instance.collectionMap,[{_id:thisMap._id},thisMap]),instance.currentMap=thisMap,await sleep(200)}}catch{throw await instance.blackAlert("올바른 이미지 파일을 올려주세요!"),new Error("upload fail")}}instance.saveDebounce(!0),await instance.saveCurrentState();const c=cancelEvent().bind(self);await c(e),await sleep(400),await instance.currentImages(imageClickCallBack)}catch{await instance.blackAlert("올바른 이미지 파일을 올려주세요!")}loading.remove(),await sleep(300),instance.newImageDropDoing=!1}},coverInputDropEvent=index=>async e=>{e.preventDefault();const self=e.currentTarget,index=Number(self.getAttribute("index")),thisTargetObject=specialTargetsList[index];if(e.dataTransfer.files.length>0&&!instance.newImageDropDoing){instance.newImageDropDoing=!0;const files=e.dataTransfer.files,loading=AbstractNode.whiteProgressLoading(null,!0);try{if([...files].some(f=>!instance.imageExe.includes(String(f.name.split(".").at(-1)).toLowerCase())))throw new Error("not image");if([...files].some(f=>!thisTargetObject.type.includes(String(f.name.split(".").at(-1)).toLowerCase())))throw new Error("invalid image type");for(const rawFile of files){const originalBlob=rawFile,newFileName=thisTargetObject.fileName,newFileOptions={type:rawFile.type,lastModified:rawFile.lastModified},targetFile=new File([originalBlob],newFileName,newFileOptions);try{if(0!==targetFile.size){if(!instance.imageExe.includes(String(targetFile.name.split(".").at(-1)).toLowerCase()))throw new Error("not image");const thisMap=instance.currentMap,rows=await back.frontRead(instance.collectionBlob,{fileName:thisTargetObject.fileName,projectId:thisMap.projectId});if(0===rows.length){const blobModel={_id:instance.epubBlobIdMaker(thisMap.projectId),date:new Date,projectId:thisMap.projectId,key:"blob",fileName:thisTargetObject.fileName,absolute:instance.absoluteBase.image+"/"+thisTargetObject.fileName,data:targetFile},{_id}=await back.frontCreate(instance.collectionBlob,blobModel);thisMap.tree.image.push(instance.valueParser("encode",_id,thisTargetObject.fileName)),await back.frontUpdate(instance.collectionMap,[{_id:thisMap._id},thisMap]),instance.currentMap=thisMap}else{const targetRow=rows[0];targetRow.data=targetFile,await back.frontDelete(instance.collectionBlob,{_id:targetRow._id}),await back.frontCreate(instance.collectionBlob,targetRow)}instance.currentMap=thisMap,await sleep(200)}}catch(e){throw console.log(e),await instance.blackAlert("올바른 이미지 파일을 올려주세요!"),new Error("upload fail")}}instance.saveDebounce(!0),await instance.saveCurrentState();const c=cancelEvent().bind(self);await c(e),await sleep(400),await instance.currentImages(imageClickCallBack)}catch{await instance.blackAlert("올바른 이미지 파일을 올려주세요!")}loading.remove(),await sleep(300),instance.newImageDropDoing=!1}},createAbstract({mother:whiteTong,text:"현재 등록된 이미지 파일 ",event:{click:async e=>{const self=e.currentTarget;e.preventDefault();const c=cancelEvent().bind(self);let promptResult;if(await c(e),promptResult=await promptPopup("이미지 파일을 올려 주세요!","file",1,"mint",!1,!1,"",!1),null!==promptResult)try{const thisMap=instance.currentMap;for(let b of promptResult)if(b instanceof File&&0!==b.size){if(!instance.imageExe.includes(String(b.name.split(".").at(-1)).toLowerCase()))throw new Error("not image");const blobModel={_id:instance.epubBlobIdMaker(thisMap.projectId),date:new Date,projectId:thisMap.projectId,key:"blob",fileName:b.name,absolute:instance.absoluteBase.image+"/"+b.name,data:b},{_id}=await back.frontCreate(instance.collectionBlob,blobModel);thisMap.tree.image.push(instance.valueParser("encode",_id,b.name))}await back.frontUpdate(instance.collectionMap,[{_id:thisMap._id},thisMap]),instance.currentMap=thisMap,await sleep(200),instance.saveDebounce()}catch{await instance.blackAlert("올바른 이미지 파일을 올려주세요!")}await instance.currentImages(imageClickCallBack)}},style:{position:"relative",marginLeft:String(marginLeft)+ea,fontFamily:"pretendard",fontSize:String(size1)+ea,fontWeight:String(700),color:colorExtended.black,lineHeight:String(lineHeight),flexDirection:"row",justifyContent:"start",alignItems:"center",cursor:"pointer"},child:{text:">",style:{fontSize:String(size0)+ea,fontWeight:String(400),color:colorChip.mint,position:"absolute",fontFamily:"altertypo",top:String(questionWordVisualTopPlus)+ea,left:String(questionMinusLeft)+ea,lineHeight:String(lineHeight)},next:{mode:"svg",source:svgMaker.plusIcon(colorChip.mint),style:{display:"inline-flex",position:"relative",width:plusWidth,marginLeft:plusMarginLeft,top:plusTop}}}}),createAbstract({mother:whiteTong,class:[instance.imageSelectClassName],attribute:{toggle:"off"},event:{click:e=>{const siblings=selectByClass(instance.imageSelectClassName),self=e.currentTarget,firstDom=self.firstChild;if("off"===String(self.getAttribute("toggle"))){for(let d of siblings)d===self?(self.style.background=colorChip.mint,setDomColor(firstDom,colorChip.white),self.setAttribute("toggle","on")):(d.style.background=colorChip.gray3,setDomColor(d.firstChild,colorChip.deactive),d.setAttribute("toggle","off"));instance.imageSelectMode="dark"}else instance.imageSelectMode="normal",self.style.background=colorChip.gray3,setDomColor(firstDom,colorChip.deactive),self.setAttribute("toggle","off")}},style:{width:1.5*buttonWidth,height:buttonHeight,borderRadius:5,background:colorChip.gray3,display:"inline-flex",position:"absolute",right:paddingLeft+buttonWidth+buttonBetween+1.8*buttonWidth+buttonBetween,top:paddingTop,justifyContent:"center",alignItems:"center",cursor:"pointer",transition:"all 0.3s ease"},child:{text:"다크 모드",style:{fontFamily:"pretendard",fontSize:buttonSize,fontWeight:600,color:colorChip.deactive}}}),createAbstract({mother:whiteTong,class:[instance.imageSelectClassName],attribute:{toggle:"off"},event:{click:e=>{const siblings=selectByClass(instance.imageSelectClassName),self=e.currentTarget,firstDom=self.firstChild;if("off"===String(self.getAttribute("toggle"))){for(let d of siblings)d===self?(self.style.background=colorChip.mint,setDomColor(firstDom,colorChip.white),self.setAttribute("toggle","on")):(d.style.background=colorChip.gray3,setDomColor(d.firstChild,colorChip.deactive),d.setAttribute("toggle","off"));instance.imageSelectMode="media"}else instance.imageSelectMode="normal",self.style.background=colorChip.gray3,setDomColor(firstDom,colorChip.deactive),self.setAttribute("toggle","off")}},style:{width:1.8*buttonWidth,height:buttonHeight,borderRadius:5,background:colorChip.gray3,display:"inline-flex",position:"absolute",right:paddingLeft+buttonWidth+buttonBetween,top:paddingTop,justifyContent:"center",alignItems:"center",cursor:"pointer",transition:"all 0.3s ease"},child:{text:"미디어 쿼리",style:{fontFamily:"pretendard",fontSize:buttonSize,fontWeight:600,color:colorChip.deactive}}}),createAbstract({mother:whiteTong,event:{click:cancelEvent()},style:{width:buttonWidth,height:buttonHeight,borderRadius:5,background:colorChip.mint,display:"inline-flex",position:"absolute",right:paddingLeft,top:paddingTop,justifyContent:"center",alignItems:"center",cursor:"pointer"},child:{text:"완료",style:{fontFamily:"pretendard",fontSize:buttonSize,fontWeight:600,color:colorChip.white}}}),grayBox=createAbstract({mother:whiteTong,event:{dragenter$dragover$dragstart$dragleave:e=>{e.stopPropagation(),e.preventDefault()},drop:imageInputDropEvent()},style:{display:"flex",flexDirection:"row",width:withOut(0),minHeight:inputBoxHeight,maxHeight:String(maxHeightVh)+"vh",paddingTop:grayBoxBetween,overflow:"scroll",justifyContent:"start",alignItems:"start"},children:[{event:{dragenter$dragover$dragstart$dragleave:e=>{e.stopPropagation(),e.preventDefault()}},style:{display:"flex",flexDirection:"row",position:"relative",marginRight:imageBetween,width:cssCalc(cssCalc(cssCalc(withOut(0),"-",imageBetween),"/",coverZoneWidth),"*",String(coverZoneWidth-1))}},{style:{display:"flex",flexDirection:"row",position:"relative",width:cssCalc(cssCalc(cssCalc(withOut(0),"-",imageBetween),"/",coverZoneWidth),"*",String(1))}}]}),coverImageTong=createAbstract({mother:grayBox.children[1],class:[coverImageTongClassName],event:{dragenter$dragover$dragstart$dragleave$drop:e=>{e.stopPropagation(),e.preventDefault()}},style:{display:"block",width:withOut(0)}}),columnsDom=[];for(let i=0;i<columnsLength;i++)columnsDom.push(createAbstract({mother:grayBox.children[0],event:{dragenter$dragover$dragstart$dragleave:e=>{e.stopPropagation(),e.preventDefault()},drop:imageInputDropEvent()},style:{display:"inline-block",width:cssCalc(cssCalc(withOut(0),"-",imageBetween*(columnsLength-1)),"/",String(columnsLength)),marginRight:i===columnsLength-1?0:imageBetween}}));columnHeights=new Array(columnsLength).fill(0),index=0;for(let b of imageInfos){if(specialTargets.includes(b.fileName))createAbstract({mother:coverImageTong,class:[selectionImageClassName],event:{dragenter$dragover$dragstart$dragleave:e=>{e.stopPropagation(),e.preventDefault()},drop:coverInputDropEvent(Number(specialTargetsList.find(o=>o.fileName===b.fileName)?.index)),click:coverClickEvent(Number(specialTargetsList.find(o=>o.fileName===b.fileName)?.index))},attribute:{unique:b._id,file:b.fileName,url:b.url,index:String(specialTargetsList.find(o=>o.fileName===b.fileName)?.index),toggle:"off"},style:{width:withOut(0),height:"auto",overflow:"hidden",borderRadius:imageBorderRadius,marginTop:imageBetween,background:colorChip.gray2},children:[{mode:"img",attribute:{file:b.fileName},source:b.url,style:{display:"block",width:withOut(0),height:"auto"}},{class:[selectionCheckAreaClassName],style:{position:"absolute",top:0,left:0,width:withOut(0),height:withOut(0),background:gradientCss(colorChip.mint,colorChip.mint,.1,.3),transition:"all 0.1s ease",opacity:0},child:{style:{position:"relative",width:withOut(0),height:withOut(0)},child:{mode:"svg",source:svgMaker.checkCircle(colorChip.mint),style:{position:"absolute",width:selectionCheckIconWidth,top:selectionCheckIconTop,left:selectionCheckIconLeft}}}}]});else{shortestColumnIndex=0;for(let i=1;i<columnsLength;i++)columnHeights[i]<columnHeights[shortestColumnIndex]&&(shortestColumnIndex=i);targetDom=columnsDom[shortestColumnIndex],createAbstract({mother:targetDom,class:[selectionImageClassName],event:{dragenter$dragover$dragstart$dragleave:e=>{e.stopPropagation(),e.preventDefault()},drop:imageInputDropEvent(),click:imageClickEvent(),contextmenu:imageDeleteEvent()},attribute:{unique:b._id,file:b.fileName,url:b.url,column:String(shortestColumnIndex),index:String(index),toggle:"off"},style:{width:withOut(0),height:"auto",overflow:"hidden",borderRadius:imageBorderRadius,marginTop:imageBetween,background:colorChip.gray2},children:[{mode:"img",attribute:{file:b.fileName},source:b.url,style:{display:"block",width:withOut(0),height:"auto"}},{class:[selectionCheckAreaClassName],style:{position:"absolute",top:0,left:0,width:withOut(0),height:withOut(0),background:gradientCss(colorChip.mint,colorChip.mint,.1,.3),transition:"all 0.1s ease",opacity:0},child:{style:{position:"relative",width:withOut(0),height:withOut(0)},child:{mode:"svg",source:svgMaker.checkCircle(colorChip.mint),style:{position:"absolute",width:selectionCheckIconWidth,top:selectionCheckIconTop,left:selectionCheckIconLeft}}}}]}),columnWidth=targetDom.getBoundingClientRect().width,displayHeight=b.heightRatio*columnWidth,columnHeights[shortestColumnIndex]+=displayHeight+imageBetween}index++}coverChildren=[...coverImageTong.children],coverChildren.sort((a,b)=>Number(a.getAttribute("index"))-Number(b.getAttribute("index")));for(let c of coverChildren)coverImageTong.appendChild(c);await sleep(100),grayBox.getBoundingClientRect().height<grayBox.firstChild.getBoundingClientRect().height&&(grayBox.style.borderBottom="1px solid "+colorChip.gray4,grayBox.style.paddingBottom=String(2*paddingBottom)+ea)}catch(e){console.log(e)}};fileTreeBuilder=async(treeBase,initLoad=0)=>{const instance=this,back=this.back,{colorChip,svgMaker:localSvgMaker,binaryPath}=(this.collectionMap,PathAnimator),{withOut,percent,promptPopup,setDomColor,contextmenuPopup,transformCss,markdownBlocks,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();try{let map,mapRows;if(mapRows=await back.frontRead(instance.collectionMap,{}),await instance.rewriteOptions(),void 0===mapRows.find(o=>o.projectId===instance.currentId))throw new Error("invalid id");map=mapRows.find(o=>o.projectId===instance.currentId);const{navigatorButtonClassName,navigatorButtonClassNameChapter,refreshMemoryToken}=this,targetRow=map;let buttonMother,chapters,thisChapterIndex,tempObj,chapterMother,buttonGap,titleSize,titleWeight,titleUnderWeight,titleUnderMarginRight,titleUnderVisualTop,titleMarginBottom,buttonHeight,buttonBorderRadius,buttonSize,buttonWeight,authorMother,motherBetween,wordSpacing,innerPadding,mouseEnterEvent,mouseLeaveEvent,clickEvent,chapterContextEvent,dropEvent,dragStartEvent,dragEndEvent,dragEnterEvent,dragLeaveEvent,dragOverEvent,dragTextEnterEvent,dragTextLeaveEvent,dragTextOverEvent,dragFirstEnterEvent,dragFirstLeaveEvent,dragFirstOverEvent,dropFirstEvent,dropSave,toggleBoo,chapterMinLength,chapterMaxLength,chapterIndex,blackButtonWeight;innerPadding=mediaNumber(18,18,16,14,3),titleSize=mediaNumber(13.5,13.5,13,12.5,3),titleWeight=mediaNumber(800,800,800,800,800),titleUnderWeight=mediaNumber(400,400,400,400,400),titleUnderMarginRight=mediaNumber(5,5,5,5,5),titleUnderVisualTop=mediaNumber(-.5,-.5,-.5,-.5,-.5),titleMarginBottom=mediaNumber(3,3,3,3,3),buttonGap=mediaNumber(2,2,2,2,2),buttonHeight=mediaNumber(31.5,31.5,30.5,29,31.5),buttonBorderRadius=mediaNumber(6,6,6,5,1),buttonSize=mediaNumber(13,13,12,11.5,3),buttonWeight=mediaNumber(500,500,500,500,500),blackButtonWeight=mediaNumber(400,400,400,400,400),motherBetween=mediaNumber(14,14,14,13,14),wordSpacing=mediaNumber(-4.3,-4.3,-4.3,-4.3,-1),chapterMinLength=1,chapterMaxLength=mediaNumber(16,16,12,9,1),mouseEnterEvent=e=>{const self=e.currentTarget;if("string"==typeof self.getAttribute("dragdoing")){"true"===self.getAttribute("dragdoing")||(self.style.background=colorChip.rose,setDomColor(self.children[0],colorChip.white))}},mouseLeaveEvent=e=>{const self=e.currentTarget;"on"===self.getAttribute("toggle")?(self.style.background=colorChip.mint,setDomColor(self.children[0],colorChip.white)):(self.style.background=colorChip.gray1,setDomColor(self.children[0],colorChip.black))},clickEvent=(isInChapter,rewrite=!1)=>async e=>{e.preventDefault();const self=e.currentTarget,xhtml=String(self.getAttribute("xhtml")),css=String(self.getAttribute("css")),siblings=selectByClass(navigatorButtonClassName);window.localStorage.setItem(refreshMemoryToken,xhtml),!isInChapter&&rewrite&&await instance.rewriteOptions();for(let s of siblings)s===self?(s.setAttribute("toggle","on"),s.style.background=colorChip.mint,setDomColor(s.firstChild,colorChip.white)):(s.setAttribute("toggle","off"),s.style.background=colorChip.gray1,setDomColor(s.firstChild,colorChip.black));instance.isInChapter=isInChapter,await instance.loadXhtmlCssSet(xhtml,css)},chapterContextEvent=(isInChapter,index)=>async event=>{event.preventDefault();const result=await contextmenuPopup(event,(popupBase,numbersDictionay)=>new Promise((resolve,reject)=>{const titleList=[{title:"챕터 조정",buttons:[{title:"복제 (상단)",event:async e=>{resolve("up")}},{title:"복제 (하단)",event:async e=>{resolve("down")}},{title:"챕터 삭제",event:async e=>{resolve("delete")}}]}];try{if(void 0===numbersDictionay)throw new Error("invalid context general status");let gap=numbersDictionay.gap,buttonHeight=numbersDictionay.buttonHeight,groupHeight=numbersDictionay.groupHeight,buttonSize=numbersDictionay.buttonSize,groupSize=numbersDictionay.groupSize,groupBetween=numbersDictionay.groupBetween,groupWeight=numbersDictionay.groupWeight,boldVisualTop=numbersDictionay.boldVisualTop,boldVisualRight=numbersDictionay.boldVisualRight,paddingTop=numbersDictionay.paddingTop,buttonWeight=numbersDictionay.buttonWeight;popupBase.style.paddingTop=String(paddingTop)+ea;for(let{title,buttons}of titleList)createAbstract({mother:popupBase,style:{display:"flex",justifyContent:"end",alignItems:"start",flexDirection:"column",height:groupHeight,width:withOut(0),marginBottom:groupBetween},child:{text:"<b%>%b> "+title,style:{display:"inline",position:"relative",fontSize:groupSize,fontWeight:groupWeight,color:colorChip.darkDarkBlack,fontFamily:"pretendard"},bold:{display:"inline",position:"relative",fontSize:groupSize,fontWeight:400,color:colorChip.mint,top:String(boldVisualTop)+ea,marginRight:String(boldVisualRight)+ea,fontFamily:"pretendard"}}}),createAbstract({mother:popupBase,style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap,width:withOut(0)},children:buttons.map((button,buttonIndex)=>({event:{click:e=>{const self=e.currentTarget,eventData={message:"next-click",timestamp:Date.now()},customEvent=new CustomEvent("nextclick",{detail:eventData,bubbles:!0,cancelable:!0});self.dispatchEvent(customEvent)},nextclick:button.event},style:{display:"inline-flex",justifyContent:"center",alignItems:"center",height:buttonHeight,borderRadius:desktop?5:1,background:instance.mintBlueColorsArr[0],cursor:"pointer",transition:"all 0.3s ease"},child:{text:button.title,event:{selectstart:e=>e.preventDefault()},style:{fontSize:buttonSize,fontWeight:buttonWeight,color:colorChip.white,fontFamily:"pretendard"}}}))})}catch(e){reject(e)}}));if(["up","down","delete"].includes(result)&&null!==instance.currentMap){const currentChapterStatus=objectDeepCopy(instance.currentMap.tree.text.chapter),currentChapterLength=currentChapterStatus.length,currentLocalStatus=objectDeepCopy(instance.currentMap.tree.style.local),loading=(currentLocalStatus.length,instance.whiteProgressLoading(null,!0,!1)),chapterRole="chapter";let lastChapterId,lastChapter,projectId,lastChapterXhtml,targetChapterXhtml,lastLocalId,lastLocal,lastLocalCss,targetLocalCss,chapterTong,localTong;if("up"===result||"down"===result){const thisMap=instance.currentMap;projectId="",targetChapterXhtml="",targetLocalCss="",chapterTong=[],localTong=[];for(let i=0;i<currentChapterLength;i++){lastChapterId=currentChapterStatus.at(i),[lastChapter]=await back.frontRead(instance.collectionString,{_id:instance.valueParser("decode",lastChapterId).id}),lastLocalId=currentLocalStatus.at(i),"string"==typeof lastLocalId?([lastLocal]=await back.frontRead(instance.collectionString,{_id:instance.valueParser("decode",lastLocalId).id}),lastLocalCss=lastLocal.data):lastLocalCss="",projectId=lastChapter.projectId,lastChapterXhtml=lastChapter.data,i===index&&(targetChapterXhtml=lastChapterXhtml,targetLocalCss=lastLocalCss);const thisNumber="down"===result?i<=index?i+1:i+2:i<index?i+1:i+2,thisFileName=chapterRole+String(thisNumber)+".xhtml",thisLocalName="local"+String(thisNumber)+".css",thisFixedXhtml=lastChapterXhtml.replace(/(<title>[ ]*[^0-9<>]*)([0-9]+)([ ]*<\/title>)/gi,(match,p1,p2,p3)=>`${p1}${String(thisNumber)}${p3}`).replace(/(\.\.\/Styles\/[^0-9\.<>]+)([0-9]+)(\.css")/g,(match,p1,p2,p3)=>`${p1}${String(thisNumber)}${p3}`),_id=instance.valueParser("decode",lastChapterId).id,cssId=instance.valueParser("decode",lastLocalId).id;lastChapter.absolute=instance.absoluteBase.chapter+"/"+thisFileName,lastChapter.data=thisFixedXhtml,lastChapter.fileName=thisFileName,chapterTong.push(objectDeepCopy(lastChapter)),thisMap.tree.text.chapter[i]=instance.valueParser("encode",_id,thisFileName),"string"==typeof lastLocalId&&(lastLocal.absolute=instance.absoluteBase.style+"/"+thisLocalName,lastLocal.fileName=thisLocalName,lastLocal.data=lastLocalCss,localTong.push(objectDeepCopy(lastLocal)),thisMap.tree.style.local[i]=instance.valueParser("encode",cssId,thisLocalName))}for(let i=0;i<chapterTong.length;i++){const thisChapter=chapterTong[i],thisLocal=localTong[i];if(null!==thisChapter){if(instance.valueParser("decode",instance.currentXhtmlId).id===thisChapter._id){const htmlEditorView=instance.htmlView;let newState;newState=htmlEditorView.state.update({changes:{from:0,to:htmlEditorView.state.doc.length,insert:thisChapter.data}}),htmlEditorView.dispatch(newState)}await back.frontUpdate(instance.collectionString,[{_id:thisChapter._id},thisChapter])}if(null!==thisLocal){if(instance.valueParser("decode",instance.currentCssId).id===thisLocal._id){const cssEditorView=instance.cssView;let newCssState;newCssState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:thisLocal.data}}),cssEditorView.dispatch(newCssState)}await back.frontUpdate(instance.collectionString,[{_id:thisLocal._id},thisLocal])}}if("up"===result){const thisNumber=index+1,thisFileName=chapterRole+String(thisNumber)+".xhtml",thisLocalName="local"+String(thisNumber)+".css",thisFixedXhtml=targetChapterXhtml.replace(/(<title>[ ]*[^0-9<>]*)([0-9]+)([ ]*<\/title>)/gi,(match,p1,p2,p3)=>`${p1}${String(thisNumber)}${p3}`).replace(/(\.\.\/Styles\/[^0-9\.<>]+)([0-9]+)(\.css")/g,(match,p1,p2,p3)=>`${p1}${String(thisNumber)}${p3}`),stringModel={_id:instance.epubStringIdMaker(projectId),date:new Date,projectId,fileName:thisFileName,key:chapterRole,absolute:instance.absoluteBase.chapter+"/"+thisFileName,data:thisFixedXhtml},{_id}=await back.frontCreate(instance.collectionString,stringModel);thisMap.tree.text.chapter.splice(index,0,instance.valueParser("encode",_id,thisFileName));const localModel={_id:instance.epubStringIdMaker(projectId),date:new Date,projectId,fileName:thisLocalName,key:"localCss",absolute:instance.absoluteBase.style+"/"+thisLocalName,data:targetLocalCss},{_id:cssId}=await back.frontCreate(instance.collectionString,localModel);thisMap.tree.style.local.splice(index,0,instance.valueParser("encode",cssId,thisLocalName))}else if("down"===result){const thisNumber=index+2,thisFileName=chapterRole+String(thisNumber)+".xhtml",thisLocalName="local"+String(thisNumber)+".css",thisFixedXhtml=targetChapterXhtml.replace(/(<title>[ ]*[^0-9<>]*)([0-9]+)([ ]*<\/title>)/gi,(match,p1,p2,p3)=>`${p1}${String(thisNumber)}${p3}`).replace(/(\.\.\/Styles\/[^0-9\.<>]+)([0-9]+)(\.css")/g,(match,p1,p2,p3)=>`${p1}${String(thisNumber)}${p3}`),stringModel={_id:instance.epubStringIdMaker(projectId),date:new Date,projectId,fileName:thisFileName,key:chapterRole,absolute:instance.absoluteBase.chapter+"/"+thisFileName,data:thisFixedXhtml},{_id}=await back.frontCreate(instance.collectionString,stringModel);thisMap.tree.text.chapter.splice(index+1,0,instance.valueParser("encode",_id,thisFileName));const localModel={_id:instance.epubStringIdMaker(projectId),date:new Date,projectId,fileName:thisLocalName,key:"localCss",absolute:instance.absoluteBase.style+"/"+thisLocalName,data:targetLocalCss},{_id:cssId}=await back.frontCreate(instance.collectionString,localModel);thisMap.tree.style.local.splice(index+1,0,instance.valueParser("encode",cssId,thisLocalName))}await back.frontUpdate(instance.collectionMap,[{_id:thisMap._id},thisMap]),instance.currentMap=thisMap,await instance.blackAlert("챕터 조정이 완료되었습니다!"),await sleep(500),await instance.fileTreeBuilder(selectByClass(instance.treeBaseClassName)[0],"up"===result?index:index<chapterTong.length?index+1:index),await loading.softRemove()}else{const thisMap=instance.currentMap,targetChapterIdRaw=instance.currentMap.tree.text.chapter[index],targetChapterId=instance.valueParser("decode",targetChapterIdRaw).id,targetCssIdRaw=instance.currentMap.tree.style.local[index];for(let i=0;i<currentChapterLength;i++)if(i!==index){lastChapterId=currentChapterStatus.at(i),[lastChapter]=await back.frontRead(instance.collectionString,{_id:instance.valueParser("decode",lastChapterId).id}),lastLocalId=currentLocalStatus.at(i),"string"==typeof lastLocalId?([lastLocal]=await back.frontRead(instance.collectionString,{_id:instance.valueParser("decode",lastLocalId).id}),lastLocalCss=lastLocal.data):lastLocalCss="",projectId=lastChapter.projectId,lastChapterXhtml=lastChapter.data;const thisNumber=i<index?i+1:i,thisFileName=chapterRole+String(thisNumber)+".xhtml",thisLocalName="local"+String(thisNumber)+".css",thisFixedXhtml=lastChapterXhtml.replace(/(<title>[ ]*[^0-9<>]*)([0-9]+)([ ]*<\/title>)/gi,(match,p1,p2,p3)=>`${p1}${String(thisNumber)}${p3}`).replace(/(\.\.\/Styles\/[^0-9\.<>]+)([0-9]+)(\.css")/g,(match,p1,p2,p3)=>`${p1}${String(thisNumber)}${p3}`),_id=instance.valueParser("decode",lastChapterId).id,cssId=instance.valueParser("decode",lastLocalId).id;lastChapter.absolute=instance.absoluteBase.chapter+"/"+thisFileName,lastChapter.data=thisFixedXhtml,lastChapter.fileName=thisFileName,await back.frontUpdate(instance.collectionString,[{_id},lastChapter]),thisMap.tree.text.chapter[i]=instance.valueParser("encode",_id,thisFileName),"string"==typeof lastLocalId&&(lastLocal.absolute=instance.absoluteBase.style+"/"+thisLocalName,lastLocal.fileName=thisLocalName,await back.frontUpdate(instance.collectionString,[{_id:cssId},lastLocal]),thisMap.tree.style.local[i]=instance.valueParser("encode",cssId,thisLocalName))}if(await back.frontDelete(instance.collectionString,{_id:targetChapterId}),thisMap.tree.text.chapter.splice(index,1),"string"==typeof targetCssIdRaw){const targetCssId=instance.valueParser("decode",targetCssIdRaw).id;await back.frontDelete(instance.collectionString,{_id:targetCssId}),thisMap.tree.style.local.splice(index,1)}await back.frontUpdate(instance.collectionMap,[{_id:thisMap._id},thisMap]),instance.currentMap=thisMap,await instance.blackAlert("챕터 조정이 완료되었습니다!"),await sleep(500),await instance.fileTreeBuilder(selectByClass(instance.treeBaseClassName)[0],thisMap.tree.text.chapter.length===index?index-1:index),await loading.softRemove()}}},dropSave=async index=>{const siblings=selectByClass(navigatorButtonClassNameChapter);if(siblings.forEach(d=>d.setAttribute("move","false")),siblings.forEach(d=>d.setAttribute("dragdoing","false")),siblings.forEach(d=>d.children[0].style.fontSize=pixelUnit(buttonSize)),siblings.forEach(d=>d.style.height=pixelUnit(buttonHeight)),siblings.forEach(d=>d.style.marginBottom=pixelUnit(buttonGap)),siblings.forEach(d=>d.style.marginTop=pixelUnit(0)),null!==instance.currentMap){const thisMap=instance.currentMap,changedIndexArray=siblings.map(d=>Number(d.getAttribute("index"))),loading=instance.whiteProgressLoading(null,!0,!1),currentChapterStatus=objectDeepCopy(instance.currentMap.tree.text.chapter),currentLocalStatus=(currentChapterStatus.length,objectDeepCopy(instance.currentMap.tree.style.local)),chapterRole=(currentLocalStatus.length,"chapter");let thisChapterId,thisChapter,thisLocalId,thisLocal,thisLocalCss,projectId,thisChapterXhtml,originalIndex,chapterTong,localTong;projectId="",thisChapterXhtml="",thisLocalCss="",originalIndex=0,chapterTong=[],localTong=[];for(let i of changedIndexArray){thisChapterId=currentChapterStatus.at(i),[thisChapter]=await back.frontRead(instance.collectionString,{_id:instance.valueParser("decode",thisChapterId).id}),thisLocalId=currentLocalStatus.at(i),"string"==typeof thisLocalId?([thisLocal]=await back.frontRead(instance.collectionString,{_id:instance.valueParser("decode",thisLocalId).id}),thisLocalCss=thisLocal.data):thisLocalCss="",projectId=thisChapter.projectId,thisChapterXhtml=thisChapter.data;const thisNumber=originalIndex+1,thisFileName=chapterRole+String(thisNumber)+".xhtml",thisLocalName="local"+String(thisNumber)+".css",thisFixedXhtml=thisChapterXhtml.replace(/(<title>[ ]*[^0-9<>]*)([0-9]+)([ ]*<\/title>)/gi,(match,p1,p2,p3)=>`${p1}${String(thisNumber)}${p3}`).replace(/(\.\.\/Styles\/[^0-9\.<>]+)([0-9]+)(\.css")/g,(match,p1,p2,p3)=>`${p1}${String(thisNumber)}${p3}`),_id=instance.valueParser("decode",thisChapterId).id,cssId=instance.valueParser("decode",thisLocalId).id;thisChapter.absolute=instance.absoluteBase.chapter+"/"+thisFileName,thisChapter.data=thisFixedXhtml,thisChapter.fileName=thisFileName,chapterTong.push(objectDeepCopy(thisChapter)),thisMap.tree.text.chapter[originalIndex]=instance.valueParser("encode",_id,thisFileName),"string"==typeof thisLocalId?(thisLocal.absolute=instance.absoluteBase.style+"/"+thisLocalName,thisLocal.fileName=thisLocalName,thisLocal.data=thisLocalCss,localTong.push(objectDeepCopy(thisLocal)),thisMap.tree.style.local[originalIndex]=instance.valueParser("encode",cssId,thisLocalName)):localTong.push(null),originalIndex++}for(let i=0;i<chapterTong.length;i++){const thisChapter=chapterTong[i],thisLocal=localTong[i];if(null!==thisChapter){if(instance.valueParser("decode",instance.currentXhtmlId).id===thisChapter._id){const htmlEditorView=instance.htmlView;let newState;newState=htmlEditorView.state.update({changes:{from:0,to:htmlEditorView.state.doc.length,insert:thisChapter.data}}),htmlEditorView.dispatch(newState)}await back.frontUpdate(instance.collectionString,[{_id:thisChapter._id},thisChapter])}if(null!==thisLocal){if(instance.valueParser("decode",instance.currentCssId).id===thisLocal._id){const cssEditorView=instance.cssView;let newCssState;newCssState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:thisLocal.data}}),cssEditorView.dispatch(newCssState)}await back.frontUpdate(instance.collectionString,[{_id:thisLocal._id},thisLocal])}}await back.frontUpdate(instance.collectionMap,[{_id:thisMap._id},thisMap]),instance.currentMap=thisMap,await instance.blackAlert("챕터 조정이 완료되었습니다!"),await sleep(500),await instance.fileTreeBuilder(selectByClass(instance.treeBaseClassName)[0],index<chapterIndex?index+1:index),await loading.softRemove()}},dropEvent=async event=>{event.preventDefault();const self=event.currentTarget,transfer=event.dataTransfer;if(null===transfer)return;const index=Number(self.getAttribute("index")),chapterIndex=JSON.parse(transfer.getData("text/plain")).index,thisSelf=self,target=document.querySelector("."+navigatorButtonClassNameChapter+'[chapterindex="c'+String(chapterIndex)+'"]'),parent=thisSelf.parentNode;null!==instance.currentMap&&(target.style.animation="",null!==thisSelf.nextElementSibling?parent.insertBefore(target,thisSelf.nextElementSibling):parent.appendChild(target)),await dropSave(index)},dragStartEvent=event=>{const self=event.currentTarget,thisDom=self,computedStyle=window.getComputedStyle(thisDom),ghostElement=thisDom.cloneNode(!0),transfer=event.dataTransfer,thisWidth=mediaNumber(116,110,100,90,0),chapterIndex=Number(self.getAttribute("index")),siblings=selectByClass(navigatorButtonClassNameChapter);self.setAttribute("move","true"),siblings.forEach(d=>d.setAttribute("dragdoing","true")),transfer.effectAllowed="all",ghostElement.style.fontFamily=computedStyle.fontFamily,ghostElement.style.fontSize=computedStyle.fontSize,ghostElement.style.fontWeight=computedStyle.fontWeight,ghostElement.style.color=computedStyle.color,ghostElement.style.textAlign=computedStyle.textAlign,ghostElement.style.lineHeight=computedStyle.lineHeight,ghostElement.style.wordSpacing=computedStyle.wordSpacing,ghostElement.style.textIndent=computedStyle.textIndent,ghostElement.style.position="absolute",ghostElement.style.top=pixelUnit(-9999),ghostElement.style.left=pixelUnit(-9999),ghostElement.style.width=pixelUnit(thisWidth),ghostElement.style.height=pixelUnit(buttonHeight),ghostElement.style.borderRadius=pixelUnit(buttonBorderRadius),ghostElement.style.pointerEvents="none",document.body.appendChild(ghostElement),transfer.setDragImage(ghostElement,2,2),setTimeout(()=>{document.body.removeChild(ghostElement)},0),self.children[0].style.fontSize=pixelUnit(0),self.style.height=pixelUnit(0),self.style.marginBottom=pixelUnit(0),transfer.setData("text/plain",JSON.stringify({index:chapterIndex}))},dragEndEvent=event=>{event.currentTarget;const siblings=selectByClass(navigatorButtonClassNameChapter);siblings.forEach(d=>d.setAttribute("move","false")),siblings.forEach(d=>d.setAttribute("dragdoing","false")),siblings.forEach(d=>d.children[0].style.fontSize=pixelUnit(buttonSize)),siblings.forEach(d=>d.style.height=pixelUnit(buttonHeight)),siblings.forEach(d=>d.style.marginBottom=pixelUnit(buttonGap)),siblings.forEach(d=>d.style.marginTop=pixelUnit(0))},dragEnterEvent=event=>{const self=event.currentTarget,siblings=selectByClass(navigatorButtonClassNameChapter);"true"===self.getAttribute("move")||(siblings.forEach(d=>{d!==self&&d.style.height.replace(/[^0-9]/gis,"")!==String(0)&&(d.style.marginBottom=pixelUnit(buttonGap))}),self.style.marginBottom=pixelUnit(buttonHeight+buttonGap))},dragLeaveEvent=event=>{const self=event.currentTarget;selectByClass(navigatorButtonClassNameChapter);"true"===self.getAttribute("move")||(self.style.marginBottom=pixelUnit(buttonGap))},dragOverEvent=event=>{const self=event.currentTarget,siblings=selectByClass(navigatorButtonClassNameChapter);"true"===self.getAttribute("move")||(siblings.forEach(d=>{d!==self&&d.style.height.replace(/[^0-9]/gis,"")!==String(0)&&(d.style.marginBottom=pixelUnit(buttonGap))}),self.style.marginBottom=pixelUnit(buttonHeight+buttonGap))},dragTextEnterEvent=event=>{event.stopPropagation();const self=event.currentTarget.parentElement,siblings=selectByClass(navigatorButtonClassNameChapter);"true"===self.getAttribute("move")||(siblings.forEach(d=>{d!==self&&d.style.height.replace(/[^0-9]/gis,"")!==String(0)&&(d.style.marginBottom=pixelUnit(buttonGap))}),self.style.marginBottom=pixelUnit(buttonHeight+buttonGap))},dragTextLeaveEvent=event=>{event.stopPropagation();const self=event.currentTarget.parentElement;selectByClass(navigatorButtonClassNameChapter);"true"===self.getAttribute("move")||(self.style.marginBottom=pixelUnit(buttonGap))},dragTextOverEvent=event=>{event.stopPropagation();const self=event.currentTarget.parentElement,siblings=selectByClass(navigatorButtonClassNameChapter);"true"===self.getAttribute("move")||(siblings.forEach(d=>{d!==self&&d.style.height.replace(/[^0-9]/gis,"")!==String(0)&&(d.style.marginBottom=pixelUnit(buttonGap))}),self.style.marginBottom=pixelUnit(buttonHeight+buttonGap))},dragFirstEnterEvent=event=>{const siblings=selectByClass(navigatorButtonClassNameChapter);siblings.forEach(d=>{d.style.marginBottom=pixelUnit(buttonGap)}),siblings[0].style.marginTop=pixelUnit(buttonHeight+buttonGap)},dragFirstLeaveEvent=event=>{const siblings=selectByClass(navigatorButtonClassNameChapter);siblings.forEach(d=>{d.style.marginBottom=pixelUnit(buttonGap)}),siblings.forEach(d=>{d.style.marginTop=pixelUnit(buttonGap)})},dragFirstOverEvent=event=>{const siblings=selectByClass(navigatorButtonClassNameChapter);siblings.forEach(d=>{d.style.marginBottom=pixelUnit(buttonGap)}),siblings[0].style.marginTop=pixelUnit(buttonHeight+buttonGap)},dropFirstEvent=async event=>{event.preventDefault();const transfer=event.dataTransfer;if(null===transfer)return;const chapterIndex=JSON.parse(transfer.getData("text/plain")).index,target=document.querySelector("."+navigatorButtonClassNameChapter+'[chapterindex="c'+String(chapterIndex)+'"]'),parent=target.parentNode;null!==instance.currentMap&&(target.style.animation="",parent.insertBefore(target,parent.children[0])),await dropSave(-1)},cleanChildren(treeBase),buttonMother=createAbstract({mother:treeBase,style:{position:"relative",width:withOut(0),display:"flex",flexDirection:"column",maxHeight:cssCalc(String(100)+"%","-",String(3*buttonHeight+2*buttonGap+innerPadding+motherBetween)+ea),overflow:"scroll"}}),createAbstract({mother:buttonMother,style:{width:withOut(0),display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:titleMarginBottom},child:{text:"<u%>%u> 프로젝트",style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.black,display:"inline-flex",flexDirection:"row",wordSpacing},under:{fontSize:titleSize,fontWeight:titleUnderWeight,color:colorChip.mint,marginRight:titleUnderMarginRight,top:titleUnderVisualTop,wordSpacing}}}),authorMother=createAbstract({mother:buttonMother,style:{width:withOut(0),display:"grid",gap:buttonGap,gridTemplateColumns:"1fr"},children:variableArray(1).map(i=>{const titleList=[targetRow.title];return{event:{click:async e=>{e.currentTarget;e.preventDefault();const thisMap=instance.currentMap;let promptResult;if(promptResult=await promptPopup("새로운 프로젝트명을 8자 이내로 알려주세요!","text"),null!==promptResult){thisMap.title=promptResult.trim().replace(/[\!\@\#\$\%\^\&\*\(\)\+\=\<\>\[\]\{\}\?\/\|]/gi,"").trim();AbstractNode.whiteProgressLoading(null,!0);await back.frontUpdate(instance.collectionMap,[{_id:thisMap._id},thisMap]),await sleep(1e3),window.location.reload()}}},style:{width:withOut(0),height:buttonHeight,background:colorChip.black,borderRadius:buttonBorderRadius,justifyContent:"center",alignItems:"center",wordSpacing,cursor:"pointer"},child:{text:titleList[i],style:{fontSize:buttonSize,fontWeight:buttonWeight,color:colorChip.white,wordSpacing}}}})}),targetRow.tree.text.chapter.sort((a,b)=>Number(this.valueParser("decode",a).name.replace(/[^0-9]/gi,""))-Number(this.valueParser("decode",b).name.replace(/[^0-9]/gi,""))),chapters=[];for(let c of targetRow.tree.text.chapter)tempObj=this.valueParser("decode",c),thisChapterIndex=Number(tempObj.name.replace(/[^0-9]/gi,"")),chapters.push({id:tempObj.id,index:thisChapterIndex,name:tempObj.name});createAbstract({mother:buttonMother,event:{dragend$dragenter$dragover$dragleave$drop$contextmenu$selectstart$dragstart:e=>{e.preventDefault()},dragenter:dragFirstEnterEvent,dragleave:dragFirstLeaveEvent,dragover:dragFirstOverEvent,drop:dropFirstEvent},style:{width:withOut(0),display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:titleMarginBottom,marginTop:motherBetween},child:{text:"<u%>%u> 챕터",event:{dragend$dragenter$dragover$dragleave$drop$contextmenu$selectstart$dragstart:e=>{e.preventDefault()},dragenter:dragFirstEnterEvent,dragleave:dragFirstLeaveEvent,dragover:dragFirstOverEvent,drop:dropFirstEvent},style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.black,display:"inline-flex",flexDirection:"row",wordSpacing},under:{fontSize:titleSize,fontWeight:titleUnderWeight,color:colorChip.mint,marginRight:titleUnderMarginRight,top:titleUnderVisualTop,wordSpacing}}}),chapterMother=createAbstract({mother:buttonMother,style:{width:withOut(0),display:"block",minHeight:buttonHeight*chapterMinLength+buttonGap*(chapterMinLength-1),maxHeight:buttonHeight*chapterMaxLength+buttonGap*(chapterMaxLength-1),overflow:"scroll",marginBottom:motherBetween-buttonGap},child:{style:{width:withOut(0),display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"start"}}}),chapterIndex=0;for(let c of chapters)toggleBoo=instance.valueParser("encode",c.id,c.name)===window.localStorage.getItem(refreshMemoryToken),createAbstract({mother:chapterMother.firstChild,class:[navigatorButtonClassName,navigatorButtonClassNameChapter],attribute:{first:0===chapterIndex?"true":"false",toggle:toggleBoo?"on":"off",xhtml:instance.valueParser("encode",c.id,c.name),index:String(chapterIndex),chapterindex:"c"+String(chapterIndex),dragdoing:"false",draggable:"true",move:"false",css:void 0===targetRow.tree.style.local[c.index-1]?targetRow.tree.style.general:targetRow.tree.style.local[c.index-1]},event:{dragend$dragenter$dragover$dragleave$drop$contextmenu$selectstart:e=>{e.preventDefault()},mouseenter:mouseEnterEvent,mouseleave:mouseLeaveEvent,click:clickEvent(!0,!1),contextmenu:chapterContextEvent(!0,chapterIndex),drop:dropEvent,dragend:dragEndEvent,dragstart:dragStartEvent,dragenter:dragEnterEvent,dragleave:dragLeaveEvent,dragover:dragOverEvent},style:{display:"flex",width:withOut(0),height:buttonHeight,background:toggleBoo?colorChip.mint:colorChip.gray1,borderRadius:buttonBorderRadius,justifyContent:"center",alignItems:"center",cursor:"pointer",transition:"all 0.2s ease",marginBottom:buttonGap},child:{event:{dragend$dragenter$dragover$dragleave$drop$contextmenu$selectstart:e=>{e.preventDefault()},dragenter:dragTextEnterEvent,dragleave:dragTextLeaveEvent,dragover:dragTextOverEvent},text:"챕터 "+String(chapterIndex+1),style:{fontSize:buttonSize,fontWeight:buttonWeight,color:toggleBoo?colorChip.white:colorChip.black,wordSpacing,transition:"all 0.2s ease"}}}),chapterIndex++;createAbstract({mother:buttonMother,style:{width:withOut(0),display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:titleMarginBottom},child:{text:"<u%>%u> 필수 정보",style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.black,display:"inline-flex",flexDirection:"row",wordSpacing},under:{fontSize:titleSize,fontWeight:titleUnderWeight,color:colorChip.mint,marginRight:titleUnderMarginRight,top:titleUnderVisualTop,wordSpacing}}}),authorMother=createAbstract({mother:buttonMother,style:{width:withOut(0),display:"grid",gap:buttonGap,gridTemplateColumns:"1fr"},children:variableArray(4).map(i=>{const xhtmlCssMatrix=[[targetRow.tree.text.author,targetRow.tree.style.general],[targetRow.tree.text.context,targetRow.tree.style.nav],[targetRow.tree.text.info,targetRow.tree.style.general],[targetRow.tree.text.content,targetRow.tree.style.general]];return toggleBoo=xhtmlCssMatrix[i][0]===window.localStorage.getItem(refreshMemoryToken),{class:[navigatorButtonClassName],attribute:{toggle:toggleBoo?"on":"off",xhtml:xhtmlCssMatrix[i][0],css:xhtmlCssMatrix[i][1],dragdoing:"false"},event:{dragstart$selectstart:e=>e.preventDefault(),mouseenter:mouseEnterEvent,mouseleave:mouseLeaveEvent,click$contextmenu:clickEvent(!1,i%2==1)},style:{width:withOut(0),height:buttonHeight,background:toggleBoo?colorChip.mint:colorChip.gray1,borderRadius:buttonBorderRadius,justifyContent:"center",alignItems:"center",cursor:"pointer",transition:"all 0.2s ease",wordSpacing},child:{text:["작가 소개","목차","서지 정보","설정 파일"][i],style:{fontSize:buttonSize,fontWeight:buttonWeight,color:toggleBoo?colorChip.white:colorChip.black,wordSpacing,transition:"all 0.2s ease"}}}})}),createAbstract({mother:buttonMother,style:{width:withOut(0),display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:titleMarginBottom,marginTop:motherBetween},child:{text:"<u%>%u> 기타",style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.black,display:"inline-flex",flexDirection:"row",wordSpacing},under:{fontSize:titleSize,fontWeight:titleUnderWeight,color:colorChip.mint,marginRight:titleUnderMarginRight,top:titleUnderVisualTop,wordSpacing}}}),authorMother=createAbstract({mother:buttonMother,style:{width:withOut(0),display:"grid",gap:buttonGap,gridTemplateColumns:"1fr"},children:variableArray(2).map(i=>{const xhtmlCssMatrix=[[targetRow.tree.text.navigator.epub3,targetRow.tree.style.general],[targetRow.tree.text.navigator.epub2,targetRow.tree.style.general]];return toggleBoo=xhtmlCssMatrix[i][0]===window.localStorage.getItem(refreshMemoryToken),{class:[navigatorButtonClassName],attribute:{toggle:toggleBoo?"on":"off",xhtml:xhtmlCssMatrix[i][0],css:xhtmlCssMatrix[i][1],dragdoing:"false"},event:{dragstart$selectstart:e=>e.preventDefault(),mouseenter:mouseEnterEvent,mouseleave:mouseLeaveEvent,click$contextmenu:clickEvent(!1,!0)},style:{width:withOut(0),height:buttonHeight,background:toggleBoo?colorChip.mint:colorChip.gray1,borderRadius:buttonBorderRadius,justifyContent:"center",alignItems:"center",cursor:"pointer",transition:"all 0.2s ease",wordSpacing},child:{text:["네비게이터","호환 정보"][i],style:{fontSize:buttonSize,fontWeight:buttonWeight,color:toggleBoo?colorChip.white:colorChip.black,wordSpacing,transition:"all 0.2s ease"}}}})}),createAbstract({mother:treeBase,style:{position:"absolute",bottom:innerPadding,left:innerPadding,width:withOut(2*innerPadding),display:"flex",flexDirection:"column",overflow:"scroll",justifyContent:"end",background:gradientCss(colorChip.gray1,colorChip.gray2,1,1,90),borderRadius:2*buttonBorderRadius},child:{style:{width:withOut(0),display:"grid",gap:0,gridTemplateColumns:"1fr 1fr"},children:variableArray(4).map(i=>{const xyValue=[transformCss({x:2.5,y:2.5,scale:1.03}),transformCss({x:-2.5,y:2.5,scale:1.03}),transformCss({x:2.5,y:-2.5,scale:1.03}),transformCss({x:-2.5,y:-2.5,scale:1.03})];return{attribute:{index:String(i)},event:{click$contextmenu:async e=>{e.preventDefault();const self=e.currentTarget,index=Number(self.getAttribute("index"));null!==instance.currentMap&&(0===index?await instance.currentFontFiles():1===index?await instance.currentImages():2===index?(instance.saveDebounce(!0),instance.autoInspector(!0).then(()=>instance.previewPopup()).catch(e=>console.log(e))):(instance.saveDebounce(!0),instance.autoInspector(!0).then(()=>instance.driveConverting()).catch(e=>console.log(e))))},mouseenter:e=>{e.currentTarget.style.opacity=String(.7)},mouseleave:e=>{e.currentTarget.style.opacity=String(1)}},style:{display:"inline-flex",width:withOut(0),height:"auto",cursor:"pointer",justifyContent:"center",alignItems:"center",transition:"all 0.3s ease",background:colorChip.transparent},child:{mode:"img",source:binaryPath+"/target"+["/font.png","/image.png","/epub.png","/folderIcon.png"][i],style:{width:withOut(0),transform:xyValue[i],transition:"all 0.3s ease",background:colorChip.transparent}}}})}}),setTimeout(()=>{const targetButtons=selectByClass(navigatorButtonClassName);if(0===initLoad){const newIndex=targetButtons.map(d=>d.getAttribute("xhtml")).findIndex(i=>i===window.localStorage.getItem(refreshMemoryToken));-1!==newIndex&&(initLoad=newIndex)}targetButtons.length>initLoad&&(targetButtons[initLoad].scrollIntoView({behavior:"smooth",block:"end"}),targetButtons[initLoad].click())},200)}catch(e){console.log(e)}};baseMaker=async()=>{const instance=this,back=this.back,{colorChip,svgMaker:localSvgMaker,binaryPath}=PathAnimator,{withOut,percent,promptPopup,markdownBlocks,hangulToEnglish,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();try{let htmlTong,cssBase,cssTong,initialContent,cssContent,totalMother,totalBase,cssBoxWidth,outerPadding,innerPadding,boxBetween,borderRadius,cssTongHeight,popupVisualHeight,pastStandard,treeBaseWidth,treeBase,treeAreaWidth,mapRows,map,chapterRow,cssRow,targetCssId,targetXhtmlId,visualPaddingBottom,topBarHeight,titlePaddingLeft,titleSize,titleArrowWidth,titleArrowHeight,titleArrowVisualTop,titleArrowMargin,renderSize,titleColor,titleBarBackground,mainIconHeight,reloadMode;if(cssBoxWidth=mediaNumber(370,340,300,260,360),outerPadding=mediaNumber(12,12,12,10,2),innerPadding=mediaNumber(16,16,16,15,3),boxBetween=mediaNumber(6,5,4,3,1),borderRadius=mediaNumber(12,12,12,10,2),cssTongHeight=82,popupVisualHeight=mediaNumber(300,290,280,240,80),treeBaseWidth=mediaNumber(116,110,100,90,0),treeAreaWidth=desktop?treeBaseWidth+boxBetween:0,visualPaddingBottom=mediaNumber(200,180,160,140,40),titleSize=mediaNumber(12,12,12,11,3),mainIconHeight=mediaNumber(10.5,10.5,10.5,10,2.5),renderSize=titleSize-2,topBarHeight=mediaNumber(25,25,24,23,0),titlePaddingLeft=outerPadding,titleArrowWidth=mediaNumber(22,22,22,21,4),titleArrowHeight=mediaNumber(7,7,7,6,1),titleArrowVisualTop=mediaNumber(-.5,-.5,-.5,-.5,0),titleArrowMargin=mediaNumber(4,4,4,3,1),titleColor=colorChip.black,titleBarBackground=gradientCss(colorChip.gray3,colorChip.gray3,.2,.5),this.topBarHeight=topBarHeight,reloadMode=!1,pastStandard=new Date,pastStandard.setFullYear(pastStandard.getFullYear()-1),""===this.currentId||null===this.currentMap)if(null===window.localStorage.getItem(this.lastProjectIdStorageToken))mapRows=await back.frontRead(instance.collectionMap,{$gte:{date:pastStandard}}),mapRows.sort((a,b)=>b.date.valueOf()-a.date.valueOf()),0===mapRows.length&&(await instance.createNewProject([]),mapRows=await back.frontRead(instance.collectionMap,{$gte:{date:pastStandard}}),mapRows.sort((a,b)=>b.date.valueOf()-a.date.valueOf())),[map]=mapRows,this.currentMap=map,this.currentId=map.projectId;else{const targetId=window.localStorage.getItem(this.lastProjectIdStorageToken);mapRows=await back.frontRead(instance.collectionMap,{}),void 0===mapRows.find(o=>o.projectId===targetId)?(window.localStorage.removeItem(this.lastProjectIdStorageToken),mapRows=await back.frontRead(instance.collectionMap,{$gte:{date:pastStandard}}),mapRows.sort((a,b)=>b.date.valueOf()-a.date.valueOf()),0===mapRows.length&&(await instance.createNewProject([]),mapRows=await back.frontRead(instance.collectionMap,{$gte:{date:pastStandard}}),mapRows.sort((a,b)=>b.date.valueOf()-a.date.valueOf())),[map]=mapRows,this.currentMap=map,this.currentId=map.projectId):(map=mapRows.find(o=>o.projectId===targetId),this.currentMap=map,this.currentId=map.projectId)}else{if(mapRows=await back.frontRead(instance.collectionMap,{}),void 0===mapRows.find(o=>o.projectId===this.currentId))throw new Error("invalid id");map=mapRows.find(o=>o.projectId===this.currentId),this.currentMap=map,this.currentId=map.projectId}if(""===this.currentId||null===this.currentMap)throw new Error("loading error");if(targetXhtmlId="",0===this.currentMap.tree.text.chapter.length)throw await back.frontDelete(instance.collectionMap,{_id:this.currentMap._id}),new Error("invalid chapter status");if(targetXhtmlId=this.currentMap.tree.text.chapter[0],targetCssId=this.currentMap.tree.style.general,0!==this.currentMap.tree.style.local.length&&(targetCssId=this.currentMap.tree.style.local[0]),[chapterRow]=await back.frontRead(this.collectionString,{_id:this.valueParser("decode",this.currentMap.tree.text.chapter[0]).id}),[cssRow]=await back.frontRead(this.collectionString,{_id:this.valueParser("decode",targetCssId).id}),initialContent=chapterRow.data,cssContent=cssRow.data,window.localStorage.setItem(this.lastProjectIdStorageToken,this.currentId),this.currentXhtmlId=targetXhtmlId,this.currentCssId=targetCssId,selectByClass(instance.totalMotherClassName).length>0){const[pastMother]=selectByClass(instance.totalMotherClassName);pastMother.style.animation="justfadeoutoriginal 0.3s ease forwards",await sleep(300),pastMother.remove(),cleanChildren(totalContents),reloadMode=!0}totalMother=createAbstract({mother:totalContents,class:[instance.totalMotherClassName],style:{padding:outerPadding,paddingLeft:desktop?outerPadding+treeBaseWidth+2*innerPadding+boxBetween:outerPadding,width:withOut(desktop?outerPadding+outerPadding+treeBaseWidth+2*innerPadding+boxBetween:2*outerPadding),height:cssCalc(cssCalc(String(100)+"vh","-",2*outerPadding),"-",topBarHeight),top:topBarHeight,display:"flex",flexDirection:desktop?"row":"column",position:"relative",animation:reloadMode?"justfadeinoriginal 0.5s ease forwards":""},child:{style:{position:"absolute",top:0,left:0,height:cssCalc(String(100)+"vh","+",pixelUnit(popupVisualHeight)),width:withOut(0),background:colorChip.gray1},previous:{class:[instance.topBarClassName],style:{display:desktop?"flex":"none",position:"absolute",top:-1*topBarHeight,left:0,height:topBarHeight,width:withOut(0),background:titleBarBackground,zIndex:3,boxSizing:"border-box",borderBottom:"1px solid "+colorChip.gray3},child:{style:{top:0,left:0,width:withOut(2*titlePaddingLeft),height:withOut(0),position:"relative",display:"flex",alignItems:"center",paddingLeft:titlePaddingLeft,paddingRight:titlePaddingLeft,flexDirection:"row"},children:[{mode:"img",source:binaryPath+"/logo.png",style:{display:"inline-flex",position:"relative",height:mainIconHeight}},{text:"render",style:{display:"inline-flex",position:"relative",fontSize:renderSize,top:titleArrowVisualTop,textAlign:"right",flexGrow:1,fontWeight:600,color:colorChip.black,fontFamily:"cabinet"}}]}}}}),treeBase=createAbstract({mother:totalMother,style:{display:desktop?"inline-flex":"none",position:"absolute",left:0,top:0,width:treeBaseWidth+2*innerPadding,height:cssCalc(cssCalc(String(100)+"vh","+",pixelUnit(popupVisualHeight)),"-",topBarHeight),background:colorChip.white,boxShadow:"3px 2px 13px -9px "+colorChip.shadow,zIndex:2},child:{class:[instance.treeBaseClassName],style:{position:"relative",display:"flex",width:withOut(2*innerPadding),height:cssCalc(cssCalc(String(100)+"vh","-",innerPadding),"-",topBarHeight),paddingTop:innerPadding,paddingLeft:innerPadding,paddingRight:innerPadding}}}).firstChild,await this.fileTreeBuilder(treeBase),totalBase=createAbstract({mother:totalMother,style:{width:desktop?cssCalc(String(100)+"%","-",String(cssBoxWidth+boxBetween)+ea):withOut(2*innerPadding),height:withOut(desktop?0:cssTongHeight+boxBetween),paddingLeft:innerPadding,paddingRight:innerPadding,borderRadius,background:colorChip.white,boxShadow:"0px 3px 12px -9px "+colorChip.shadow,overflow:"hidden",display:"inline-flex",marginRight:desktop?boxBetween:"",marginBottom:desktop?"":boxBetween},child:{style:{width:withOut(0),position:"relative",paddingTop:innerPadding,height:withOut(innerPadding),overflow:"scroll"}}}),cssBase=createAbstract({mother:totalMother,style:{width:desktop?cssBoxWidth:withOut(0),height:desktop?withOut(0):cssTongHeight,overflow:"hidden",display:"inline-flex",flexDirection:"column"},children:[{style:{flexGrow:1,width:withOut(2*innerPadding),background:colorChip.white,boxShadow:"0px 3px 12px -9px "+colorChip.shadow,borderRadius,paddingLeft:innerPadding,paddingRight:innerPadding,paddingTop:innerPadding,overflow:"scroll"}},{style:{flexGrow:0,width:withOut(2*innerPadding),background:colorChip.white,boxShadow:"0px 3px 12px -9px "+colorChip.shadow,borderRadius,padding:0,marginTop:boxBetween,paddingLeft:innerPadding,paddingRight:innerPadding}}]}),await this.baseButtonMaker(cssBase.children[1]),htmlTong=createAbstract({mother:totalBase.firstChild,event:{dragenter$dragover$dragstart$dragleave:e=>{e.stopPropagation(),e.preventDefault()},drop:async event=>{event.preventDefault();event.currentTarget;const files=event.dataTransfer.files;let position;if(null!==instance.htmlView&&(position=instance.htmlView.posAtCoords({x:event.clientX,y:event.clientY}),null!==position)){const view=instance.htmlView,lineStartPos=view.state.doc.lineAt(position).from;if(view.dispatch({selection:dist_EditorSelection.cursor(lineStartPos),scrollIntoView:!0}),view.focus(),[...files].every(f=>instance.imageExe.includes(String(f.name.split(".").at(-1)).toLowerCase()))){const loading=AbstractNode.whiteProgressLoading(null,!0);await sleep(300);try{let imgHtmlArr;imgHtmlArr=[];for(const rawFile of files){const originalBlob=rawFile,newFileName="s"+uniqueValue("short").slice(0,6)+"_"+hangulToEnglish(rawFile.name.replace(/[\\\/:\*\?"<>\| ]/gi,"_")),newFileOptions={type:rawFile.type,lastModified:rawFile.lastModified},targetFile=new File([originalBlob],newFileName,newFileOptions);try{if(0!==targetFile.size){if(!instance.imageExe.includes(String(targetFile.name.split(".").at(-1)).toLowerCase()))throw new Error("not image");const thisMap=instance.currentMap,blobModel={_id:instance.epubBlobIdMaker(thisMap.projectId),date:new Date,projectId:thisMap.projectId,key:"blob",fileName:targetFile.name,absolute:instance.absoluteBase.image+"/"+targetFile.name,data:targetFile},{_id}=await back.frontCreate(instance.collectionBlob,blobModel);thisMap.tree.image.push(instance.valueParser("encode",_id,targetFile.name)),await back.frontUpdate(instance.collectionMap,[{_id:thisMap._id},thisMap]),instance.currentMap=thisMap,imgHtmlArr.push(`<img class="init_img" src="${String(instance.isInChapter?"../..":"..")}/Images/${targetFile.name}" alt="이미지 설명" />`),await sleep(200)}}catch{throw await instance.blackAlert("올바른 이미지 파일을 올려주세요!"),new Error("upload fail")}}const selection=view.state.selection.main,newState=view.state.update({changes:{from:selection.from,to:selection.from,insert:imgHtmlArr.join("\n")}});view.dispatch(newState)}catch{await instance.blackAlert("올바른 이미지 파일을 올려주세요!")}loading.remove(),await sleep(200),instance.autoInspector()}else if([...files].every(f=>instance.documentExe.includes(String(f.name.split(".").at(-1)).toLowerCase())))try{const[targetFile]=[...files];await instance.injectionRawText(targetFile)}catch{}}}},style:{width:withOut(0),paddingBottom:visualPaddingBottom}}),cssTong=createAbstract({mother:cssBase.firstChild,style:{width:withOut(0),paddingBottom:visualPaddingBottom}}),this.htmlTong.remove(),this.htmlTong=htmlTong,this.cssTong.remove(),this.cssTong=cssTong,await this.editorInit("html",htmlTong,initialContent),await this.editorInit("css",cssTong,cssContent)}catch(e){console.log(e),window.location.reload()}};baseButtonMaker=async buttonMother=>{const instance=this,back=this.back,{colorChip,svgMaker:localSvgMaker,binaryPath}=(this.epubXhtmlCollection,PathAnimator),{withOut,percent,promptPopup,formPopup,colorParsing,getUserPhone,markdownBlocks,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();try{let outerPadding,innerPadding,borderRadius,gap,buttonSize,buttonWeight,wordSpacing,activeColor,deactiveColor,buttonList,studyButtonList,buttonBorderRadius,buttonItemHeight,buttonBase,iconHeight,iconLeft,buttonTitleVisualLeft,gapFr,studyButtonBase,buttonVerticalLength,buttonHorizontalLength,slashVisualMargin,manualTextString,wordSpacingCode,manualVisualLeft,firstMint,firstMintRGB,greenDelta,blueDelta,r,g,b,colorsArr,delta,buttonIndex,studyIndex,loopIndex;outerPadding=mediaNumber(15,14,12,10,2),innerPadding=mediaNumber(18,18,16,14,3),borderRadius=mediaNumber(12,12,12,10,2),buttonBorderRadius=mediaNumber(6,6,6,5,1),gap=mediaNumber(2,2,2,2,.5),gapFr=mediaString("1fr 1fr 1fr","1fr 1fr 1fr","1fr 1fr 1fr","1fr 1fr","1fr 1fr 1fr"),firstMint=/^rgb/gi.test(colorChip.mint)?colorChip.mint:"rgba("+colorParsing(colorChip.mint).map(n=>String(n)).join(", ")+", 1)",r=0,g=0,b=0,firstMint.replace(/rgba?\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,?/gi,(match,p1,p2,p3)=>(r=Number(p1),g=Number(p2),b=Number(p3),match)),firstMintRGB=[r,g,b],greenDelta=instance.greenDelta,blueDelta=instance.blueDelta,buttonSize=mediaNumber(14,13,12.5,12.5,3.2),buttonWeight=mediaNumber(400,400,400,400,400),wordSpacing=mediaNumber(-5,-5,-5,-5,-1),activeColor=colorChip.mint,deactiveColor=colorChip.gray2,buttonItemHeight=mediaNumber(32,30,30,29,7),iconHeight=mediaNumber(buttonSize-.5,buttonSize-.5,buttonSize-.5,buttonSize-.5,buttonSize+0),iconLeft=mediaNumber(.7*(buttonItemHeight-buttonSize)+4.5,.7*(buttonItemHeight-buttonSize)+3.5,.62*(buttonItemHeight-buttonSize),.7*(buttonItemHeight-buttonSize)+10,.7*(buttonItemHeight-buttonSize)+3.5),buttonTitleVisualLeft=mediaNumber(1.1*(buttonItemHeight-buttonSize)-3,1.1*(buttonItemHeight-buttonSize)-2.5,1.1*(buttonItemHeight-buttonSize)-3,1.1*(buttonItemHeight-buttonSize)-1.5,1.1*(buttonItemHeight-buttonSize)+.5),slashVisualMargin=mediaNumber(.5,0,0,0,1.2),wordSpacingCode=mediaNumber(-6,-6,-4,-4,-1),manualVisualLeft=mediaNumber(2,2,1,0,.5),manualTextString=mediaString("HTML<b%/%b>CSS<b%/%b>에디터 사용 설명","HTML<b%/%b>CSS<b%/%b>에디터 사용 설명","코드 및 에디터 사용 설명서","설명 자료","HTML<b%/%b>CSS<b%/%b>에디터 사용 설명"),buttonList=[{title:"다운로드",icon:binaryPath+"/icon/download.png",event:{electstart:e=>e.preventDefault(),click$dblclick:async e=>{e.currentTarget;if(e.preventDefault(),instance.getUserPlanStatus()){try{await instance.autoInspector()}catch{}try{await instance.rewriteOptions()}catch{}await instance.allFileDownload(!1)}else instance.blackAlert("무료 플랜에서는 epub 파일을 다운로드하실 수 없습니다!")},contextmenu:async e=>{e.currentTarget;if(e.preventDefault(),instance.getUserPlanStatus()){try{await instance.autoInspector()}catch{}try{await instance.rewriteOptions()}catch{}await instance.allFileDownload(!0)}else instance.blackAlert("무료 플랜에서는 epub 파일을 다운로드하실 수 없습니다!")}},attribute:{},toggle:!1},{title:"불러오기",icon:binaryPath+"/icon/upload.png",event:{electstart:e=>e.preventDefault(),click$contextmenu$dblclick:async e=>{e.currentTarget;let select0,mapRows,map,uploadResult;if(e.preventDefault(),select0=await promptPopup("어떤 종류의 데이터를 불러올까요?","select","외부 파일$내부 저장소"),null!==select0)if("내부 저장소"===select0)instance.autoInspector(!0).then(()=>instance.driveConverting(!0)).catch(e=>console.log(e));else if(uploadResult=await promptPopup("epub 파일 또는 zip 파일을 올려 주세요!","file",1,"mint",!1,!1,"",!1),null!==uploadResult)for(let b of uploadResult)try{if(/\.epub$/gi.test(b.name)||/\.zip$/gi.test(b.name)){const unzipResult=await Zip.unzipFile(b),loading=instance.grayLoading(),{projectId}=await instance.loadProject(unzipResult);loading.remove();try{if(instance.currentId=projectId,mapRows=await back.frontRead(instance.collectionMap,{}),void 0===mapRows.find(o=>o.projectId===this.currentId))throw new Error("invalid id");map=mapRows.find(o=>o.projectId===this.currentId),this.currentMap=map,this.currentId=map.projectId,await instance.baseMaker()}catch{}}else instance.blackAlert("해당 파일은 불러올 수 없는 파일입니다!").catch(e=>console.log(e))}catch{instance.blackAlert("해당 파일은 불러올 수 없는 파일입니다!").catch(e=>console.log(e))}}},attribute:{},toggle:!1},{title:"신규 생성",icon:binaryPath+"/icon/new.png",event:{electstart:e=>e.preventDefault(),click$contextmenu$dblclick:async e=>{e.currentTarget;e.preventDefault();let mapRows,map;if(await formPopup({form:[{property:"title",question:"책의 제목을 알려주세요!",valueType:"string",placeHolder:"책 제목",required:!1,default:"북 샘플"},{property:"author",question:"저자 이름을 알려주세요!",valueType:"string",placeHolder:"성함",required:!1,default:"작가명"},{property:"publisher",question:"출판사명을 알려주세요!",valueType:"string",placeHolder:"출판사명",required:!1,default:"Abstract cloud"},{property:"chapter",question:"이 책은 총 몇 장으로 구성되나요? (챕터의 개수)",valueType:"number",required:!1,numberEa:"장",placeHolder:String(8),default:8},{property:"publishDate",question:"출판일을 알려주세요!",valueType:"threeDate",required:!1,default:new Date},{property:"category",question:"책의 카테고리를 알려주세요!",valueType:"threeMatrix",placeHolder:"문학, 에세이, 인문",required:!1,default:["문학","에세이","인문"]},{property:"description",question:"간단한 책의 설명을 알려주세요.",valueType:"long",required:!1,default:"책의 설명 부분입니다."}],button:"생성",submitHost:"",submitUrl:"/",color:"mint",noAjax:!0}))try{const inputMatrix=JSON.parse(window.localStorage.getItem(AbstractNode.formPopupInputMatrixTempToken)),loading=instance.grayLoading(),{projectId}=await instance.createNewProject(inputMatrix);loading.remove();try{if(instance.currentId=projectId,mapRows=await back.frontRead(instance.collectionMap,{}),void 0===mapRows.find(o=>o.projectId===this.currentId))throw new Error("invalid id");map=mapRows.find(o=>o.projectId===this.currentId),this.currentMap=map,this.currentId=map.projectId,await instance.baseMaker()}catch{}}catch{}}},attribute:{},toggle:!1},{title:"원문 넣기",icon:binaryPath+"/icon/documents.png",event:{electstart:e=>e.preventDefault(),click$contextmenu$dblclick:async e=>{e.currentTarget;let promptResult2,promptResult;if(e.preventDefault(),promptResult=null,promptResult2=await promptPopup("원문을 넣을 방식을 알려주세요!","select","파일 업로드$드라이브"),null!==promptResult2)if(/파일 업로드/gi.test(promptResult2)){if(promptResult=await promptPopup("문서 파일을 올려 주세요! (idml, docx, hwp, epub)","file",1,"mint",!1,!1,"",!1),null!==promptResult&&promptResult.length>0)try{const[targetFile]=promptResult;await instance.injectionRawText(targetFile)}catch{}}else instance.autoInspector(!0).then(()=>instance.driveConverting()).catch(e=>console.log(e))}},attribute:{},toggle:!1},{title:"챕터 조정",icon:binaryPath+"/icon/book.png",event:{electstart:e=>e.preventDefault(),click$contextmenu$dblclick:async e=>{e.currentTarget;if(e.preventDefault(),null!==instance.currentMap){const currentChapterStatus=instance.currentMap.tree.text.chapter,currentChapterLength=currentChapterStatus.length,currentLocalStatus=instance.currentMap.tree.style.local,chapterRole=(currentLocalStatus.length,"chapter");let chapterResponse,newChapterLength,confirmPrompt,lastChapterId,lastChapter,addLength,projectId,lastChapterXhtml,subtractLength,lastLocalId,lastLocal,lastLocalCss;if(chapterResponse=await promptPopup("챕터의 총개수를 알려주세요!","text"),null!==chapterResponse&&!Number.isNaN(Number(chapterResponse.replace(/[^0-9]/gi,""))))if(newChapterLength=Number(chapterResponse.replace(/[^0-9]/gi,"")),newChapterLength>=100)instance.blackAlert("100장 이상의 챕터는 권장하지 않습니다.").catch(e=>console.log(e));else if(newChapterLength<=0)instance.blackAlert("정상적인 챕터의 개수를 적어주세요!").catch(e=>console.log(e));else if(newChapterLength===currentChapterLength)instance.blackAlert("현재 챕터 개수와 같습니다.").catch(e=>console.log(e));else if(newChapterLength<currentChapterLength){if(confirmPrompt=await promptPopup("기존에 있는 챕터가 뒤에서부터 삭제될 예정입니다!","select","진행$취소"),"진행"===confirmPrompt){subtractLength=currentChapterLength-newChapterLength;for(let i=0;i<subtractLength;i++){const targetChapterIdRaw=instance.currentMap.tree.text.chapter[currentChapterLength-1-i],targetChapterId=instance.valueParser("decode",targetChapterIdRaw).id;await back.frontDelete(instance.collectionString,{_id:targetChapterId});const thisMap=instance.currentMap;thisMap.tree.text.chapter.pop();const targetCssIdRaw=instance.currentMap.tree.style.local[currentChapterLength-1-i];if("string"==typeof targetCssIdRaw){const targetCssId=instance.valueParser("decode",targetCssIdRaw).id;await back.frontDelete(instance.collectionString,{_id:targetCssId}),thisMap.tree.style.local.pop()}await back.frontUpdate(instance.collectionMap,[{_id:thisMap._id},thisMap]),instance.currentMap=thisMap}instance.fileTreeBuilder(selectByClass(instance.treeBaseClassName)[0],newChapterLength-1).then(()=>instance.blackAlert("챕터 조정이 완료되었습니다!")).catch(e=>console.log(e))}}else{addLength=newChapterLength-currentChapterLength,lastChapterId=currentChapterStatus.at(-1),[lastChapter]=await back.frontRead(instance.collectionString,{_id:instance.valueParser("decode",lastChapterId).id}),lastLocalId=currentLocalStatus.at(-1),"string"==typeof lastLocalId?([lastLocal]=await back.frontRead(instance.collectionString,{_id:instance.valueParser("decode",lastLocalId).id}),lastLocalCss=lastLocal.data):lastLocalCss="",projectId=lastChapter.projectId,lastChapterXhtml=lastChapter.data;for(let i=0;i<addLength;i++){const thisMap=instance.currentMap,thisNumber=currentChapterLength+i+1,thisFileName=chapterRole+String(thisNumber)+".xhtml",thisFixedXhtml=lastChapterXhtml.replace(/(<title>[ ]*[^0-9<>]*)([0-9]+)([ ]*<\/title>)/gi,(match,p1,p2,p3)=>`${p1}${String(thisNumber)}${p3}`).replace(/(\.\.\/Styles\/[^0-9\.<>]+)([0-9]+)(\.css")/g,(match,p1,p2,p3)=>`${p1}${String(thisNumber)}${p3}`),stringModel={_id:instance.epubStringIdMaker(projectId),date:new Date,projectId,fileName:thisFileName,key:chapterRole,absolute:instance.absoluteBase.chapter+"/"+thisFileName,data:thisFixedXhtml},{_id}=await back.frontCreate(instance.collectionString,stringModel);thisMap.tree.text.chapter.push(instance.valueParser("encode",_id,thisFileName));const thisLocalName="local"+String(thisNumber)+".css",localModel={_id:instance.epubStringIdMaker(projectId),date:new Date,projectId,fileName:thisLocalName,key:"localCss",absolute:instance.absoluteBase.style+"/"+thisLocalName,data:lastLocalCss},{_id:cssId}=await back.frontCreate(instance.collectionString,localModel);thisMap.tree.style.local.push(instance.valueParser("encode",cssId,thisLocalName)),await back.frontUpdate(instance.collectionMap,[{_id:thisMap._id},thisMap]),instance.currentMap=thisMap}instance.fileTreeBuilder(selectByClass(instance.treeBaseClassName)[0],newChapterLength-1).then(()=>instance.blackAlert("챕터 조정이 완료되었습니다!")).catch(e=>console.log(e))}}}},attribute:{},toggle:!1},{title:"내용 삭제",icon:binaryPath+"/icon/delete.png",event:{electstart:e=>e.preventDefault(),click$contextmenu$dblclick:async e=>{e.currentTarget;e.preventDefault();const htmlEditorView=instance.htmlView,cssEditorView=instance.cssView,generalCssId=instance.valueParser("decode",instance.currentMap.tree.style.general).id,localCssId=instance.valueParser("decode",instance.currentCssId).id,currentHtmlTextArr=(htmlEditorView.state.selection,htmlEditorView.state.doc.toString().split("\n")),bodyIndex=currentHtmlTextArr.findIndex(s=>/<body\s*[^>]*>/gi.test(s)),bodyEndIndex=currentHtmlTextArr.findIndex(s=>/<\/body>/gi.test(s)),targetSelectionEndIndex=-1===bodyEndIndex?0:currentHtmlTextArr.slice(0,bodyEndIndex+1).join("\n").length-7,targetSelectionIndex=-1===bodyIndex?0:currentHtmlTextArr.slice(0,bodyIndex+1).join("\n").length+1;let newState,confirmPrompt;targetSelectionIndex+1<targetSelectionEndIndex-1?(confirmPrompt=await promptPopup("body 태그 사이의 모든 내용이 지워질 예정입니다.","select","진행$취소"),"진행"===confirmPrompt&&(generalCssId!==localCssId&&cssEditorView.dispatch(cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.toString().length,insert:"\n\n"}})),newState=htmlEditorView.state.update({changes:{from:targetSelectionIndex+1,to:targetSelectionEndIndex-1,insert:"\n\n"}}),htmlEditorView.dispatch(newState),instance.dispatchSelection([],targetSelectionIndex,targetSelectionIndex+3,htmlEditorView),instance.saveDebounce())):instance.autoInspector(!0).catch(e=>console.log(e))}},attribute:{},toggle:!1}],buttonHorizontalLength=gapFr.split(" ").length,buttonVerticalLength=Math.ceil(buttonList.length/buttonHorizontalLength),delta=buttonVerticalLength+1,colorsArr=[];for(let i=0;i<9999*delta;i++){const thisRGB=firstMintRGB.map((n,k)=>0===k?n:1===k?n+greenDelta*i:n+blueDelta*i);if(thisRGB.some(n=>n>255||n<0))break;colorsArr.push(colorParsing(thisRGB))}buttonIndex=0,studyIndex=delta-1,instance.mintBlueColorsArr=colorsArr,studyButtonList=[{event:{mouseenter:e=>{e.currentTarget.style.background=colorChip.black},mouseleave:e=>{e.currentTarget.style.background=colorsArr[studyIndex]},click:async e=>{instance.blankHref(ADDRESS.ABSTRACTHOST+"/abstract/books")}},style:{display:"inline-flex",height:buttonItemHeight,justifyContent:"center",alignItems:"center",background:colorsArr[studyIndex],borderRadius:buttonBorderRadius,marginRight:gap,cursor:"pointer",transition:"all 0.2s ease",width:cssCalc(cssCalc(withOut(0),"-",gap*(buttonHorizontalLength-1)),"/",buttonHorizontalLength)},child:{event:{selectstart$contextmenu$dblclick:e=>e.preventDefault()},text:"설명 문서",style:{fontSize:buttonSize,wordSpacing:wordSpacingCode,fontWeight:buttonWeight,color:colorChip.white,transition:"all 0.2s ease",paddingLeft:buttonTitleVisualLeft+manualVisualLeft,flexDirection:"row",position:"relative"},bold:{fontSize:buttonSize,wordSpacing,fontWeight:buttonWeight,color:colorChip.white,opacity:.4,marginRight:slashVisualMargin,marginLeft:slashVisualMargin},previous:{mode:"img",source:binaryPath+"/icon/html.png",style:{position:"absolute",height:iconHeight,left:iconLeft,top:String(50)+"%",transform:"translateY(-50%)"}}}},{event:{mouseenter:e=>{e.currentTarget.style.background=colorChip.black},mouseleave:e=>{e.currentTarget.style.background=colorsArr[studyIndex]},click:async e=>{const thisMap=instance.currentMap,chapterLength=thisMap.tree.text.chapter.length;if(thisMap.tree.text.context===instance.currentXhtmlId)try{const htmlEditorView=instance.htmlView,currentHtmlText=(htmlEditorView.state.selection,htmlEditorView.state.doc.toString()),parsedDocument=(new DOMParser).parseFromString(currentHtmlText,"text/html"),h3Targets=[...parsedDocument.body.querySelectorAll("h3")].map(d=>d),h3TextStatus=[...parsedDocument.body.querySelectorAll("h3")].map(n=>String(n.textContent)).map(s=>s.trim().replace(/^([0-9]+\.\s*)(\S)/gis,(match,p1,p2)=>p2).trim()),justTitleFixBoolean=h3TextStatus.length===chapterLength,inputStr=justTitleFixBoolean?h3TextStatus:variableArray(chapterLength).map(n=>String("챕터 제목을 입력해주세요.")),result=await instance.frontContextListPopup(inputStr);if(result.context.length===chapterLength&&""!==result.html){const blankTap=new Array(2).fill(" ",0).join(""),currentHtmlTextArr=currentHtmlText.split("\n"),bodyIndex=currentHtmlTextArr.findIndex(s=>/<body\s*[^>]*>/gi.test(s)),bodyEndIndex=currentHtmlTextArr.findIndex(s=>/<\/body>/gi.test(s)),targetSelectionEndIndex=-1===bodyEndIndex?0:currentHtmlTextArr.slice(0,bodyEndIndex+1).join("\n").length-7,targetSelectionIndex=-1===bodyIndex?0:currentHtmlTextArr.slice(0,bodyIndex+1).join("\n").length+1;let newState,confirmPrompt;if(targetSelectionIndex+1<targetSelectionEndIndex-1&&(confirmPrompt=justTitleFixBoolean?"진행":await promptPopup("body 태그 사이의 모든 내용이 지워질 예정입니다.","select","진행$취소"),"진행"===confirmPrompt)){if(justTitleFixBoolean){for(let i=0;i<chapterLength;i++)h3Targets[i].textContent=String(i+1)+". "+result.context[i];newState=htmlEditorView.state.update({changes:{from:targetSelectionIndex+1,to:targetSelectionEndIndex-1,insert:"\n\n"}}),htmlEditorView.dispatch(newState),newState=htmlEditorView.state.update({changes:{from:targetSelectionIndex+1,to:targetSelectionIndex+1,insert:parsedDocument.body.innerHTML}}),htmlEditorView.dispatch(newState)}else newState=htmlEditorView.state.update({changes:{from:targetSelectionIndex+1,to:targetSelectionEndIndex-1,insert:"\n\n"}}),htmlEditorView.dispatch(newState),newState=htmlEditorView.state.update({changes:{from:targetSelectionIndex+1,to:targetSelectionIndex+1,insert:result.html}}),htmlEditorView.dispatch(newState);instance.autoInspector(!0).catch(e=>console.log(e)),setTimeout(async()=>{let contextGroup,olIndex,olEndIndex,middleArray0,middleArray1,middleArray2,thisExist,navString,originalTocString,originalTocStringArr,ulIndex,ulEndIndex,middleArray3,middleArray4,middleArray5,tocString,contentOpfTarget,contentOpfContents,metaDataString,tocContents,contextArr,thisContextTarget,thisBookId,indexIndex,fileTree=instance.extractAllId(!0).map(s=>instance.valueParser("decode",s)),navTarget=fileTree.find(o=>"nav.xhtml"===o.name),tocTarget=fileTree.find(o=>"toc.ncx"===o.name),navContents=(await back.frontRead(instance.collectionString,{_id:navTarget.id}))[0],originalNavStringArr=navContents.data.split("\n");contentOpfTarget=fileTree.find(o=>"content.opf"===o.name),contentOpfContents=(await back.frontRead(instance.collectionString,{_id:contentOpfTarget.id}))[0],metaDataString=contentOpfContents.data,thisBookId="",metaDataString.replace(/<dc:identifier(\s|[^>])*>([^<]+)<\/dc:identifier>/gis,(match,p1,p2)=>(thisBookId=String(p2).trim(),match)),contextGroup=[];for(let i=0;i<result.context.length;i++)contextGroup.push({number:String(i+1),href:"chapter/chapter"+String(i+1)+".xhtml"});olIndex=originalNavStringArr.findIndex(s=>/<ol>/gi.test(s)),olEndIndex=originalNavStringArr.findIndex(s=>/<\/ol>/gi.test(s)),middleArray0=originalNavStringArr.slice(0,olIndex+1),middleArray1=originalNavStringArr.slice(olIndex+1,olEndIndex),middleArray2=originalNavStringArr.slice(olEndIndex),contextArr=[];for(let c of contextGroup)thisExist=!1,thisExist=middleArray1.some(s=>new RegExp(c.href.replace(/^\s*\.\//,""),"gi").test(s)),thisExist?(thisContextTarget="",middleArray1.find(s=>new RegExp(c.href.replace(/^\s*\.\//,""),"gi").test(s))?.replace(/>(\s*[^<]*\s*)<\s*\/\s*a/gi,(match,p1)=>(thisContextTarget=p1,match)),contextArr.push(thisContextTarget.trim())):(middleArray1.push(`${blankTap}${blankTap}${blankTap}<li><a href="${c.href}">목차 내용</a></li>`),contextArr.push("목차 내용"));middleArray1=middleArray1.filter(s=>{let hrefString;return hrefString="",s.replace(/href\s*=\s*['"]([^'"]+)['"]/gi,(m,p1)=>(hrefString=p1,m)),contextGroup.map(c=>c.href.replace(/^\s*\.\//,"")).includes(hrefString)}),middleArray1.sort((a,b)=>{let aTarget,bTarget;return aTarget=0,bTarget=0,a.replace(/chapter([0-9]+)\.xhtml/gi,(match,p1)=>(aTarget=Number(p1.replace(/[^0-9]/gi,"")),"")),b.replace(/chapter([0-9]+)\.xhtml/gi,(match,p1)=>(bTarget=Number(p1.replace(/[^0-9]/gi,"")),"")),aTarget-bTarget}),middleArray1.every(s=>!/<li>/gi.test(s))&&(middleArray1=middleArray1.filter(a=>""!==a),middleArray1=middleArray1.map(s=>s.replace(/^(\s*)(<a.*?<\/a>)/gi,(match,p1,p2)=>p1+"<li>"+p2+"</li>"))),middleArray1=middleArray1.slice(0,result.context.length).map((s,i)=>s.replace(/^(\s*)(<li>\s*<a\s+href=['"][^0-9]+)([0-9]+)(\.[^>]*>)(.*?)(<\/a>\s*<\/li>)/gi,(match,p1,p2,p3,p4,p5,p6)=>p1+p2+String(i+1)+p4+result.context[i].trim()+p6)),navString=middleArray0.concat(middleArray1).concat(middleArray2).join("\n"),navString=navString.replace(/href="\.\//gi,'href="').replace(/hidden=""/gi,'hidden="hidden"').replace(/hidden\s*>/gi,'hidden="hidden">'),navContents=(await back.frontRead(instance.collectionString,{_id:navTarget.id}))[0],navContents.data=navString,await back.frontUpdate(instance.collectionString,[{_id:navTarget.id},navContents]),tocContents=(await back.frontRead(instance.collectionString,{_id:tocTarget.id}))[0],originalTocString=tocContents.data,originalTocStringArr=originalTocString.split("\n"),ulIndex=originalTocStringArr.findIndex(s=>/<navMap>/gi.test(s)),ulEndIndex=originalTocStringArr.findIndex(s=>/<\/navMap>/gi.test(s)),middleArray3=originalTocStringArr.slice(0,ulIndex+1),middleArray4=originalTocStringArr.slice(ulIndex+1,ulEndIndex),middleArray5=originalTocStringArr.slice(ulEndIndex),indexIndex=1;for(let c of contextGroup)thisExist=!1,thisExist=middleArray4.some(s=>new RegExp(c.href.replace(/^\s*\.\//,""),"gi").test(s)),thisExist||middleArray4.push(`${blankTap}${blankTap}<navPoint id="navPoint-${String(indexIndex)}" playOrder="${String(indexIndex)}"><navLabel><text>목차 내용</text></navLabel><content src="${c.href}"/></navPoint>`),indexIndex++;if(middleArray4=middleArray4.filter(s=>{let hrefString;return hrefString="",s.replace(/src\s*=\s*['"]([^'"]+)['"]/gi,(m,p1)=>(hrefString=p1,m)),contextGroup.map(c=>c.href.replace(/^\s*\.\//,"")).includes(hrefString)}),middleArray4.sort((a,b)=>{let aTarget,bTarget;return aTarget=0,bTarget=0,a.replace(/chapter([0-9]+)\.xhtml/gi,(match,p1)=>(aTarget=Number(p1.replace(/[^0-9]/gi,"")),"")),b.replace(/chapter([0-9]+)\.xhtml/gi,(match,p1)=>(bTarget=Number(p1.replace(/[^0-9]/gi,"")),"")),aTarget-bTarget}),middleArray4=middleArray4.map(s=>s.trim()).filter(s=>""!==s).map(s=>blankTap.repeat(2)+s),contextArr.length===middleArray4.length)for(let i=0;i<contextArr.length;i++)middleArray4[i]=middleArray4[i].replace(/(<text>)(\s*[^<]*\s*)(<\/text>)/gi,(match,p1,p2,p3)=>p1+contextArr[i]+p3);tocString=middleArray3.concat(middleArray4).concat(middleArray5).join("\n").replace(/__\{bookId\}__/gi,match=>{let bookId;return bookId="",metaDataString.replace(/<dc\:identifier[^>]+>([^<]+)</gi,(match,p1)=>(bookId=p1,match)),bookId}),tocString=tocString.replace(/src="\.\//gi,'src="'),""!==thisBookId&&(tocString=tocString.replace(/<\s*meta\s*name=['"]dtb\:uid['"]\s*content=['"][^'"]+['"]\s*\/\s*>/gis,match=>`<meta name="dtb:uid" content="${thisBookId}"/>`)),tocContents=(await back.frontRead(instance.collectionString,{_id:tocTarget.id}))[0],tocContents.data=tocString,await back.frontUpdate(instance.collectionString,[{_id:tocTarget.id},tocContents])},0)}}}catch{}else await instance.blackAlert("목차 페이지에서 실행해주세요!")}},style:{display:"inline-flex",height:buttonItemHeight,justifyContent:"center",alignItems:"center",background:colorsArr[studyIndex],borderRadius:buttonBorderRadius,marginRight:gap,cursor:"pointer",transition:"all 0.2s ease",width:cssCalc(cssCalc(withOut(0),"-",gap*(buttonHorizontalLength-1)),"/",buttonHorizontalLength)},child:{event:{selectstart$contextmenu$dblclick:e=>e.preventDefault()},text:"목차 생성",style:{fontSize:buttonSize,wordSpacing,fontWeight:buttonWeight,color:colorChip.white,transition:"all 0.2s ease",paddingLeft:buttonTitleVisualLeft},previous:{mode:"img",source:binaryPath+"/icon/list.png",style:{position:"absolute",height:iconHeight,left:iconLeft,top:String(50)+"%",transform:"translateY(-50%)"}}}},{event:{mouseenter:e=>{e.currentTarget.style.background=colorChip.black},mouseleave:e=>{e.currentTarget.style.background=colorsArr[studyIndex]},click:async e=>{if(instance.getUserPlanStatus()){e.currentTarget;e.preventDefault();try{await instance.autoInspector()}catch{}try{await instance.rewriteOptions()}catch{}await instance.getCurrentHtml()}else instance.blackAlert("무료 플랜에서는 링크를 생성하실 수 없습니다!")}},style:{display:"inline-flex",height:buttonItemHeight,justifyContent:"center",alignItems:"center",background:colorsArr[studyIndex],borderRadius:buttonBorderRadius,cursor:"pointer",transition:"all 0.2s ease",width:cssCalc(cssCalc(withOut(0),"-",gap*(buttonHorizontalLength-1)),"/",buttonHorizontalLength)},child:{event:{selectstart$contextmenu$dblclick:e=>e.preventDefault()},text:"링크 생성",style:{fontSize:buttonSize,wordSpacing,fontWeight:buttonWeight,color:colorChip.white,transition:"all 0.2s ease",paddingLeft:buttonTitleVisualLeft},previous:{mode:"img",source:binaryPath+"/icon/cloud.png",style:{position:"absolute",height:iconHeight,left:iconLeft,top:String(50)+"%",transform:"translateY(-50%)"}}}}],3!==buttonHorizontalLength&&(studyButtonList=studyButtonList.slice(0,2),studyButtonList.at(-1).style.marginRight=0),cleanChildren(buttonMother),buttonBase=createAbstract({mother:buttonMother,style:{paddingTop:innerPadding,paddingBottom:gap,width:withOut(0),display:"grid",gridTemplateColumns:gapFr,gap,justifyContent:"center",alignItems:"center",height:buttonItemHeight*buttonVerticalLength+gap*(buttonVerticalLength-1)}}),loopIndex=0;for(let order of buttonList)buttonIndex=Math.floor(loopIndex/buttonHorizontalLength),createAbstract({mother:buttonBase,attribute:{...order.attribute,"button-index":String(loopIndex)},event:{...order.event,...order.toggle?{}:{mouseenter:e=>{e.currentTarget.style.background=colorChip.black},mouseleave:e=>{const self=e.currentTarget,buttonIndex=Math.floor(Number(self.mustAttribute("button-index"))/buttonHorizontalLength);self.style.background=colorsArr[buttonIndex]}}},style:{display:"inline-flex",height:buttonItemHeight,justifyContent:"center",alignItems:"center",background:order.toggle?deactiveColor:colorsArr[buttonIndex],borderRadius:buttonBorderRadius,cursor:"pointer",transition:"all 0.2s ease"},child:{event:{selectstart$contextmenu$dblclick:e=>e.preventDefault()},text:order.title,style:{fontSize:buttonSize,wordSpacing,fontWeight:buttonWeight,color:order.toggle?colorChip.deactive:colorChip.white,transition:"all 0.2s ease",paddingLeft:buttonTitleVisualLeft},previous:{mode:"img",source:"string"==typeof order.icon?order.icon:binaryPath+"/icon/download.png",style:{position:"absolute",height:iconHeight,left:iconLeft,top:String(50)+"%",transform:"translateY(-50%)"}}}}),loopIndex++;studyButtonBase=createAbstract({mother:buttonMother,style:{width:withOut(0),paddingBottom:innerPadding,height:buttonItemHeight,flexDirection:"row"},children:studyButtonList})}catch(e){console.log(e)}};contextButtons=(event,view,mode="html")=>{const instance=this,{totalContents}=this,{colorChip,svgMaker:localSvgMaker,binaryPath}=PathAnimator,{withOut,percent,markdownBlocks,linkToString,promptPopup,stringToLink,ordinalNumber,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(),position=(this.back,{x:event.pageX,y:event.pageY}),selection=view.state.selection.main,selectedText=view.state.doc.sliceString(selection.from,selection.to),groupDictionary={category:"종류",style:"스타일화",list:"목록화",action:"액션",inject:"주입"},tap="  ";let buttonList,removeEvent,cancelBack,contextPopup,gap,boxWidth,boxPadding,buttonHeight,buttonSize,buttonWeight,groupSet,middleBoxGroup,targetMiddle,groupSize,groupBetween,paddingTop,groupHeight,boldVisualTop,boldVisualRight,groupWeight,overflow,wordSpacing,inAttributeStatus,loopIndex,groupIndex;if(gap=mediaNumber(2,2,2,1,.5),boxWidth=mediaNumber(320,290,290,270,58),boxPadding=mediaNumber(12,11,11,10,2.4),paddingTop=mediaNumber(2,2.5,2.5,3.5,1),buttonHeight=mediaNumber(29,28,28,25,5.6),groupHeight=mediaNumber(28,27,27,24,5.1),buttonSize=mediaNumber(13.5,13,13,12.5,2.8),groupSize=mediaNumber(13,12.5,12.5,12.5,2.8),groupBetween=mediaNumber(1,1,1,1,.1),buttonWeight=600,groupWeight=600,boldVisualTop=mediaNumber(-1,-1,-1,-1,-.1),boldVisualRight=mediaNumber(-2,-2,-1.5,-1,-.5),wordSpacing=mediaNumber(-4.3,-4.3,-4.3,-4.3,-1),inAttributeStatus=!1,"html"===mode)buttonList=[{title:"복사",property:"copy",convert:!1,group:"action"},{title:"붙여넣기",property:"paste",convert:!1,group:"action"},{title:"삭제",property:"delete",convert:!1,group:"action"},{title:"제목",property:"title",convert:!0,target:"h1",group:"category",css:`h1.title {\n${tap}font-size: 1.5rem;\n${tap}margin-top: 1rem;\n}`},{title:"중간 제목",property:"middle_title",convert:!0,target:"h3",group:"category",css:`h3.middle_title {\n${tap}font-size: 1.15rem;\n}`},{title:"본문",property:"paragraph",convert:!0,target:"p",group:"category",css:`.paragraph {\n${tap}display: block;\n${tap}font-family: "batang";\n${tap}font-weight: 400;\n${tap}font-size: 1rem;\n${tap}line-height: 1.88;\n${tap}word-spacing: -0.08rem;\n${tap}text-align: justify;\n}`},{title:"볼드",property:"bold",convert:!1,group:"style",css:`.bold {\n${tap}font-family: "pretendard";\n${tap}font-weight: 800;\n${tap}font-size: 1em;\n${tap}vertical-align: -0.05em;\n}`},{title:"이텔릭",property:"italic",convert:!1,group:"style",css:`.italic {\n${tap}display: inline-block;\n${tap}margin-right: 0.3em;\n${tap}transform: skewX(-15deg);\n${tap}transform-origin: 0 100%;\n}`},{title:"밑줄",property:"underline",convert:!1,group:"style",css:`.underline {\n${tap}text-decoration: underline;\n${tap}text-decoration-style: solid;\n}`},{title:"취소선",property:"strike",convert:!1,group:"style",css:`.strike {\n${tap}text-decoration-line: line-through;\n${tap}text-decoration-color: red;\n${tap}text-decoration-style: solid\n}`},{title:"하이라이트",property:"highlight",convert:!1,group:"style",css:`.highlight {\n${tap}background-color: yellow;\n}`},{title:"서브스크립트",property:"sub",convert:!1,group:"style",css:`.sub {\n${tap}font-family: "pretendard";\n${tap}font-weight: 700;\n${tap}font-size: 0.5em;\n${tap}margin-right: 0.1em;\n${tap}vertical-align: sub;\n}`},{title:"슈퍼스크립트",property:"sup",convert:!1,group:"style",css:`.sup {\n${tap}font-family: "pretendard";\n${tap}font-weight: 700;\n${tap}font-size: 0.5em;\n${tap}margin-right: 0.1em;\n${tap}vertical-align: super;\n}`},{title:"링크",property:"link",convert:!1,target:"a",group:"style",css:`a.link {\n${tap}color: inherit;\n${tap}text-decoration: underline;\n${tap}text-decoration-style: double;\n${tap}text-decoration-color: #cccccc;\n}`},{title:"플렉스",property:"flexbox",convert:!1,target:"div",group:"style",css:`.${instance.flexBoxClassName} {\n${tap}display: flex;\n${tap}flex-direction: column;\n}`}];else{if("css"!==mode)throw new Error("invalid mode");buttonList=[{title:"복사",property:"copy",convert:!1,group:"action"},{title:"붙여넣기",property:"paste",convert:!1,group:"action"},{title:"삭제",property:"delete",convert:!1,group:"action"},{title:"미디어",property:"mediaquery",convert:!1,group:"inject"},{title:"다크 모드",property:"darkmode",convert:!1,group:"inject"},{title:"편집기",property:"csseditor",convert:!1,group:"inject"},{title:"트랜스폼",property:"transform",convert:!1,group:"inject"},{title:"필터",property:"cssfilter",convert:!1,group:"inject"},{title:"애니메이션",property:"animation",convert:!1,group:"inject"}]}if("html"===mode)if(selection.from===selection.to)buttonList=buttonList.filter(o=>"action"===o.group),buttonList=buttonList.concat([{title:"이미지",property:"class",convert:!0,target:"div",group:"inject",css:"",event:instance.injectionImages()},{title:"여백",property:"id",convert:!0,target:"div",group:"inject",css:"",event:async e=>{e.currentTarget;e.preventDefault();const htmlEditorView=instance.htmlView,htmlCurrentSelection=htmlEditorView.state.selection,currentHtmlTextArr=htmlEditorView.state.doc.toString().split("\n"),bodyIndex=currentHtmlTextArr.findIndex(s=>/<body\s*[^>]*>/gi.test(s)),bodyEndIndex=currentHtmlTextArr.findIndex(s=>/<\/body>/gi.test(s)),targetSelectionEndIndex=-1===bodyEndIndex?0:currentHtmlTextArr.slice(0,bodyEndIndex+1).join("\n").length-7;let newState,imgHtml,startIndent,targetSelectionIndex=-1===bodyIndex?0:currentHtmlTextArr.slice(0,bodyIndex+1).join("\n").length+1;return startIndent=currentHtmlTextArr[bodyIndex].split("<body")[0]+"  ",imgHtml=`\n${startIndent}<div class="margin"><p>&#160;</p></div>\n`,htmlCurrentSelection.ranges.length>0&&htmlCurrentSelection.ranges[0].from===htmlCurrentSelection.ranges[0].to&&targetSelectionIndex<htmlCurrentSelection.ranges[0].from&&htmlCurrentSelection.ranges[0].from<targetSelectionEndIndex&&(targetSelectionIndex=htmlCurrentSelection.ranges[0].from),instance.dispatchSelection([],targetSelectionIndex,targetSelectionIndex,htmlEditorView),newState=htmlEditorView.state.update({changes:{from:targetSelectionIndex,to:targetSelectionIndex,insert:imgHtml}}),htmlEditorView.dispatch(newState),instance.dispatchSelection([],targetSelectionIndex+1,targetSelectionIndex+imgHtml.length-1,htmlEditorView),instance.saveDebounce(),""}},{title:"구분자",property:"style",convert:!0,target:"div",group:"inject",css:"",event:async e=>{e.currentTarget;e.preventDefault();const htmlEditorView=instance.htmlView,htmlCurrentSelection=htmlEditorView.state.selection,currentHtmlTextArr=htmlEditorView.state.doc.toString().split("\n"),bodyIndex=currentHtmlTextArr.findIndex(s=>/<body\s*[^>]*>/gi.test(s)),bodyEndIndex=currentHtmlTextArr.findIndex(s=>/<\/body>/gi.test(s)),targetSelectionEndIndex=-1===bodyEndIndex?0:currentHtmlTextArr.slice(0,bodyEndIndex+1).join("\n").length-7;let newState,imgHtml,startIndent,targetSelectionIndex=-1===bodyIndex?0:currentHtmlTextArr.slice(0,bodyIndex+1).join("\n").length+1;return startIndent=currentHtmlTextArr[bodyIndex].split("<body")[0]+"  ",imgHtml=`\n${startIndent}<div class="divider"><p>&#160;</p></div>\n`,htmlCurrentSelection.ranges.length>0&&htmlCurrentSelection.ranges[0].from===htmlCurrentSelection.ranges[0].to&&targetSelectionIndex<htmlCurrentSelection.ranges[0].from&&htmlCurrentSelection.ranges[0].from<targetSelectionEndIndex&&(targetSelectionIndex=htmlCurrentSelection.ranges[0].from),instance.dispatchSelection([],targetSelectionIndex,targetSelectionIndex,htmlEditorView),newState=htmlEditorView.state.update({changes:{from:targetSelectionIndex,to:targetSelectionIndex,insert:imgHtml}}),htmlEditorView.dispatch(newState),instance.dispatchSelection([],targetSelectionIndex+1,targetSelectionIndex+imgHtml.length-1,htmlEditorView),instance.saveDebounce(),""}},{title:"표, 열",property:"table",convert:!0,target:"div",group:"inject",css:"",event:async e=>{e.currentTarget;e.preventDefault();const cssEditorView=instance.cssView,currentCssText=cssEditorView.state.doc.toString(),htmlEditorView=instance.htmlView,htmlCurrentSelection=htmlEditorView.state.selection,currentHtmlTextArr=htmlEditorView.state.doc.toString().split("\n"),bodyIndex=currentHtmlTextArr.findIndex(s=>/<body\s*[^>]*>/gi.test(s)),bodyEndIndex=currentHtmlTextArr.findIndex(s=>/<\/body>/gi.test(s)),targetSelectionEndIndex=-1===bodyEndIndex?0:currentHtmlTextArr.slice(0,bodyEndIndex+1).join("\n").length-7;let tableHtml,tableStringArr,newState,newCssState,startIndent,cssString,cssUpdate,targetSelectionIndex=-1===bodyIndex?0:currentHtmlTextArr.slice(0,bodyIndex+1).join("\n").length+1;const result=await instance.insertDivideRow([]);return cssString=result.css,cssUpdate=result.cssUpdate,startIndent=currentHtmlTextArr[bodyIndex].split("<body")[0]+"  ",tableStringArr=result.html.split("\n").map(s=>startIndent+s),tableHtml="\n"+tableStringArr.join("\n")+"\n\n",cssUpdate?(newCssState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:cssString+"\n\n"+currentCssText}}),cssEditorView.dispatch(newCssState)):(newCssState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:currentCssText+"\n\n"+result.cssAfter}}),cssEditorView.dispatch(newCssState)),htmlCurrentSelection.ranges.length>0&&htmlCurrentSelection.ranges[0].from===htmlCurrentSelection.ranges[0].to&&targetSelectionIndex<htmlCurrentSelection.ranges[0].from&&htmlCurrentSelection.ranges[0].from<targetSelectionEndIndex&&(targetSelectionIndex=htmlCurrentSelection.ranges[0].from),instance.dispatchSelection([],targetSelectionIndex,targetSelectionIndex,htmlEditorView),newState=htmlEditorView.state.update({changes:{from:targetSelectionIndex,to:targetSelectionIndex,insert:tableHtml}}),htmlEditorView.dispatch(newState),instance.dispatchSelection([],targetSelectionIndex+1,targetSelectionIndex+tableHtml.length-1,htmlEditorView),instance.saveDebounce(),""}},{title:"버튼",property:"button",convert:!0,target:"div",group:"inject",css:"",event:async e=>{e.currentTarget;e.preventDefault();const cssEditorView=instance.cssView,currentCssText=cssEditorView.state.doc.toString(),htmlEditorView=instance.htmlView,htmlCurrentSelection=htmlEditorView.state.selection,currentHtmlTextArr=htmlEditorView.state.doc.toString().split("\n"),bodyIndex=currentHtmlTextArr.findIndex(s=>/<body\s*[^>]*>/gi.test(s)),bodyEndIndex=currentHtmlTextArr.findIndex(s=>/<\/body>/gi.test(s)),targetSelectionEndIndex=-1===bodyEndIndex?0:currentHtmlTextArr.slice(0,bodyEndIndex+1).join("\n").length-7;let updatedHtml,updatedStringArr,newState,newCssState,firstQuestionAnswer,startIndent,inputCss,popupResult,injectionClassName,updatedSelectionIndex=-1===bodyIndex?0:currentHtmlTextArr.slice(0,bodyIndex+1).join("\n").length+1;if(new RegExp("input\\s*{","gis").test(currentCssText)||(inputCss=["input {","  display: none !important;","}","\n",`.${instance.blankDivClassName} {`,"  position: relative;","  box-sizing: border-box;","  width: 100%;","  margin: 0rem;","  padding: 0rem;","}"].join("\n"),newCssState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:inputCss+"\n\n"+currentCssText}}),cssEditorView.dispatch(newCssState)),firstQuestionAnswer=await promptPopup("적용 클래스를 알려주세요! (공백시, 자동 생성)"),null!==firstQuestionAnswer&&(injectionClassName=instance.hangulToEnglish(firstQuestionAnswer.trim(),!1).replace(/^\.+/gis,"").replace(/\s/gis,"_").trim(),""===injectionClassName&&(injectionClassName="c_"+uniqueValue("short")),injectionClassName=injectionClassName.replace(/^\.+/gis,"").replace(/\s/gis,"_"),popupResult=await instance.buttonHelperPopup(injectionClassName),""!==popupResult))try{const result=JSON.parse(popupResult);updatedStringArr=result.html.split("\n"),startIndent=currentHtmlTextArr[bodyIndex].split("<body")[0]+"  ",updatedStringArr=updatedStringArr.map(s=>startIndent+s),updatedHtml="\n"+updatedStringArr.join("\n")+"\n\n",htmlCurrentSelection.ranges.length>0&&htmlCurrentSelection.ranges[0].from===htmlCurrentSelection.ranges[0].to&&updatedSelectionIndex<htmlCurrentSelection.ranges[0].from&&htmlCurrentSelection.ranges[0].from<targetSelectionEndIndex&&(updatedSelectionIndex=htmlCurrentSelection.ranges[0].from),newCssState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:result.css.join("\n\n")+"\n\n"+cssEditorView.state.doc.toString()}}),cssEditorView.dispatch(newCssState),instance.dispatchSelection([],updatedSelectionIndex,updatedSelectionIndex,htmlEditorView),newState=htmlEditorView.state.update({changes:{from:updatedSelectionIndex,to:updatedSelectionIndex,insert:updatedHtml+"\n\n\n"}}),htmlEditorView.dispatch(newState),instance.dispatchSelection([],updatedSelectionIndex+1,updatedSelectionIndex+updatedHtml.length-1,htmlEditorView),instance.saveDebounce()}catch{}return""}},{title:"블록",property:"block",convert:!0,target:"div",group:"inject",css:"",event:async e=>{e.currentTarget;e.preventDefault();const cssEditorView=instance.cssView,currentCssText=cssEditorView.state.doc.toString(),htmlEditorView=instance.htmlView,htmlCurrentSelection=htmlEditorView.state.selection,currentHtmlTextArr=htmlEditorView.state.doc.toString().split("\n"),bodyIndex=currentHtmlTextArr.findIndex(s=>/<body\s*[^>]*>/gi.test(s)),bodyEndIndex=currentHtmlTextArr.findIndex(s=>/<\/body>/gi.test(s)),targetSelectionEndIndex=-1===bodyEndIndex?0:currentHtmlTextArr.slice(0,bodyEndIndex+1).join("\n").length-7;let tableHtml,tableStringArr,newState,newCssState,startIndent,tableCss,targetSelectionIndex=-1===bodyIndex?0:currentHtmlTextArr.slice(0,bodyIndex+1).join("\n").length+1;return tableCss=[".block {","  background-color: #f5f5f5;","  padding: 1rem;","  border-radius: 0.5rem;","}","",".block p {","  background-color: #f5f5f5;","  padding: 0;","  margin: 0;","}"].join("\n"),tableStringArr=[],tableStringArr.push("\x3c!--블록--\x3e"),tableStringArr.push('<div class="block">'),tableStringArr.push("  <p>블록 내부 내용</p>"),tableStringArr.push("</div>"),startIndent=currentHtmlTextArr[bodyIndex].split("<body")[0]+"  ",tableStringArr=tableStringArr.map(s=>startIndent+s),tableHtml="\n"+tableStringArr.join("\n")+"\n\n",new RegExp(".block\\s*{","gis").test(currentCssText)||(newCssState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:tableCss+"\n\n"+currentCssText}}),cssEditorView.dispatch(newCssState)),htmlCurrentSelection.ranges.length>0&&htmlCurrentSelection.ranges[0].from===htmlCurrentSelection.ranges[0].to&&targetSelectionIndex<htmlCurrentSelection.ranges[0].from&&htmlCurrentSelection.ranges[0].from<targetSelectionEndIndex&&(targetSelectionIndex=htmlCurrentSelection.ranges[0].from),instance.dispatchSelection([],targetSelectionIndex,targetSelectionIndex,htmlEditorView),newState=htmlEditorView.state.update({changes:{from:targetSelectionIndex,to:targetSelectionIndex,insert:tableHtml}}),htmlEditorView.dispatch(newState),instance.dispatchSelection([],targetSelectionIndex+1,targetSelectionIndex+tableHtml.length-1,htmlEditorView),instance.saveDebounce(),""}}]);else{let position,tree,node;position=view.posAtCoords({x:event.clientX,y:event.clientY}),null!==position&&(tree=dist_syntaxTree(view.state),node=tree.resolveInner(position,1),null!==node&&("TagName"!==node.name&&"OpenTag"!==node.name&&"CloseTag"!==node.name&&"<"!==node.name&&">"!==node.name&&"AttributeName"!==node.name&&"Attribute"!==node.name&&"AttributeValue"!==node.name&&"Is"!==node.name||(buttonList=buttonList.filter(o=>"action"===o.group),buttonList=buttonList.concat([{title:"클래스",property:"class",convert:!0,target:"div",group:"category",css:"",event:async e=>{let customClassName;if(customClassName=await promptPopup("클래스 이름을 적어주세요!"),null===customClassName)return"";{customClassName=customClassName.replace(/[^a-zA-Z0-9_\-]/g,""),/^[0-9]/.test(customClassName)&&(customClassName="c-"+customClassName),/^\-[0-9]+/.test(customClassName)&&(customClassName="c"+customClassName),customClassName=customClassName.replace(/(\-)([0-9]+)/g,(match,p1,p2)=>p1+"c"+p2),customClassName=customClassName.replace(/\-\-+/gi,"-"),""===customClassName&&(customClassName="custom_class_"+uniqueValue("hex"));const htmlSelection=instance.htmlView.state.selection.main,selectedText=instance.htmlView.state.doc.sliceString(htmlSelection.from,htmlSelection.to);let newTagStatusString;if(!/<\//g.test(selectedText)){newTagStatusString=/class\=/gi.test(selectedText)?selectedText.replace(/(class\=["'])([^"']+)(["'])/gi,(match,p1,p2,p3)=>p1+customClassName+p3):/\/\s*>/gi.test(selectedText)?selectedText.replace(/\/\s*>/gi,match=>'  class="'+customClassName+'"   '+match):selectedText.replace(/>/gi,match=>'  class="'+customClassName+'"   '+match),newTagStatusString=newTagStatusString.replace(/\s\s+/gi," ").replace(/\s+\/\s*>/g," />").replace(/\s+>/g,">");const newState=instance.htmlView.state.update({changes:{from:htmlSelection.from,to:htmlSelection.to,insert:newTagStatusString}});instance.htmlView.dispatch(newState);const cssEditorView=instance.cssView,currentCssText=cssEditorView.state.doc.toString();if(!new RegExp("."+customClassName+"\\s*{","gis").test(currentCssText)){const newCssState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:"."+customClassName+" {\n\n}\n\n"+currentCssText}});cssEditorView.dispatch(newCssState)}}return customClassName}}},{title:"아이디",property:"id",convert:!0,target:"div",group:"category",css:"",event:async e=>{let customClassName;if(customClassName=await promptPopup("아이디 이름을 적어주세요!"),null===customClassName)return"";{customClassName=customClassName.replace(/[^a-zA-Z0-9_\-]/g,""),/^[0-9]/.test(customClassName)&&(customClassName="i-"+customClassName),/^\-[0-9]+/.test(customClassName)&&(customClassName="i"+customClassName),customClassName=customClassName.replace(/(\-)([0-9]+)/g,(match,p1,p2)=>p1+"i"+p2),customClassName=customClassName.replace(/\-\-+/gi,"-"),""===customClassName&&(customClassName="custom_id_"+uniqueValue("hex"));const htmlSelection=instance.htmlView.state.selection.main,selectedText=instance.htmlView.state.doc.sliceString(htmlSelection.from,htmlSelection.to);let newTagStatusString;if(!/<\//g.test(selectedText)){newTagStatusString=/id\=/gi.test(selectedText)?selectedText.replace(/(id\=["'])([^"']+)(["'])/gi,(match,p1,p2,p3)=>p1+customClassName+p3):/\/\s*>/gi.test(selectedText)?selectedText.replace(/\/\s*>/gi,match=>'  id="'+customClassName+'"   '+match):selectedText.replace(/>/gi,match=>'  id="'+customClassName+'"   '+match),newTagStatusString=newTagStatusString.replace(/\s\s+/gi," ").replace(/\s+\/\s*>/g," />").replace(/\s+>/g,">");const newState=instance.htmlView.state.update({changes:{from:htmlSelection.from,to:htmlSelection.to,insert:newTagStatusString}});instance.htmlView.dispatch(newState);const cssEditorView=instance.cssView,currentCssText=cssEditorView.state.doc.toString();if(!new RegExp("#"+customClassName+"\\s*{","gis").test(currentCssText)){const newCssState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:"#"+customClassName+" {\n\n}\n\n"+currentCssText}});cssEditorView.dispatch(newCssState)}}return customClassName}}},{title:"폰트 선택",property:"style",convert:!0,target:"div",group:"category",css:"",event:async e=>{const htmlSelection=instance.htmlView.state.selection.main,selectedText=instance.htmlView.state.doc.sliceString(htmlSelection.from,htmlSelection.to);let newTagStatusString,thisFamily;thisFamily=await instance.currentFontFiles(!0);try{const{family,weight}=JSON.parse(thisFamily);if(""!==family&&!/<\//g.test(selectedText))if(/style\=/gi.test(selectedText)){newTagStatusString=/\/\s*>/gi.test(selectedText)?selectedText.replace(/(style=["])([^"]*)(["])([^>]*\/\s*>)/gi,(match,p1,p2,p3,p4)=>"  "+p1+p2.replace(/font\-family\s*\:\s*[']?[^'";\:]+[']?;/gi,"").replace(/font\-weight\s*\:\s*[0-9]+;/gi,"").trim().replace(/;$/gi,"")+";font-family: '"+family+"';font-weight: "+String(weight)+";"+p3+"   "+p4):selectedText.replace(/(style=["])([^"]*)(["])([^>]*>)/gi,(match,p1,p2,p3,p4)=>"  "+p1+p2.replace(/font\-family\s*\:\s*[']?[^'";\:]+[']?;/gi,"").replace(/font\-weight\s*\:\s*[0-9]+;/gi,"").trim().replace(/;$/gi,"")+";font-family: '"+family+"';font-weight: "+String(weight)+";"+p3+"   "+p4),newTagStatusString=newTagStatusString.replace(/\s\s+/gi," ").replace(/\s+\/\s*>/g," />").replace(/\s+>/g,">");const newState=instance.htmlView.state.update({changes:{from:htmlSelection.from,to:htmlSelection.to,insert:newTagStatusString}});instance.htmlView.dispatch(newState)}else{newTagStatusString=/\/\s*>/gi.test(selectedText)?selectedText.replace(/\/\s*>/gi,match=>"  style=\"font-family: '"+family+"';font-weight: "+String(weight)+';"   '+match):selectedText.replace(/>/gi,match=>"  style=\"font-family: '"+family+"';font-weight: "+String(weight)+';"   '+match),newTagStatusString=newTagStatusString.replace(/\s\s+/gi," ").replace(/\s+\/\s*>/g," />").replace(/\s+>/g,">");const newState=instance.htmlView.state.update({changes:{from:htmlSelection.from,to:htmlSelection.to,insert:newTagStatusString}});instance.htmlView.dispatch(newState)}}catch{}return""}}]),inAttributeStatus=!0)))}groupSet=[...new Set(buttonList.map(b=>b.group))],removeEvent=e=>{e.preventDefault(),totalContents.style.overflow="hidden";selectByClass("contextPopupClassName").forEach(d=>d.remove())},totalContents.style.overflow="visible",cancelBack=createAbstract({mother:document.body,class:["contextPopupClassName"],event:{click:removeEvent,dblclick:removeEvent,contextmenu:removeEvent},style:{zIndex:999,top:0,left:0,width:String(100)+"vw",height:String(100)+"vh",position:"fixed",background:colorChip.transparent}}),overflow=position.x+(desktop?boxWidth:boxWidth/100*window.innerWidth)>window.innerWidth,contextPopup=createAbstract({mother:document.body,class:["contextPopupClassName"],attribute:{text:selectedText},style:{zIndex:999,width:boxWidth,background:gradientCss(colorChip.white,colorChip.white,.7,.5),"backdrop-filter":"blur(2px)",animation:"fadeuporiginal 0.3s ease forwards",position:"absolute",left:pixelUnit(overflow?position.x-(desktop?boxWidth:boxWidth/100*window.innerWidth):position.x),top:pixelUnit(position.y),boxShadow:"0px 3px 22px -12px "+colorChip.shadow,borderRadius:desktop?10:2,justifyContent:"center",alignItems:"center",padding:boxPadding,paddingTop,border:0}}),middleBoxGroup=[];for(let group of groupSet)createAbstract({mother:contextPopup,style:{display:"flex",justifyContent:"end",alignItems:"start",flexDirection:"column",height:groupHeight,width:withOut(0),marginBottom:groupBetween},child:{text:"<b%>%b> "+("종류"===String(groupDictionary[group])&&inAttributeStatus?"속성":String(groupDictionary[group])),style:{display:"inline",position:"relative",fontSize:groupSize,fontWeight:600,color:colorChip.darkDarkBlack},bold:{display:"inline",position:"relative",fontSize:groupSize,fontWeight:400,color:colorChip.mint,top:String(boldVisualTop)+ea,marginRight:String(boldVisualRight)+ea}}}),middleBoxGroup.push(createAbstract({mother:contextPopup,attribute:{group},style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap,width:withOut(0)}}));loopIndex=0;for(let button of buttonList){if(targetMiddle=middleBoxGroup.find(a=>a.getAttribute("group")===button.group),groupIndex=middleBoxGroup.findIndex(a=>a.getAttribute("group")===button.group),targetMiddle){const thisButton=createAbstract({mother:targetMiddle,attribute:{name:button.property,target:button.target?button.target:"p",convert:button.convert?String(1):String(0),css:void 0===button.css?String(0):button.css,group:button.group,mode,cindex:String(groupIndex),attstatus:"function"==typeof button.event?String(1):String(0)},event:{selectstart:e=>e.preventDefault(),contextmenu:removeEvent,click:e=>{const self=e.currentTarget,mode=String(self.getAttribute("mode")),className=String(self.getAttribute("name")),group=String(self.getAttribute("group")),convertMode=self.getAttribute("convert")===String(1),css=String(self.getAttribute("css")),attributeStatus=self.getAttribute("attstatus")===String(1),startString=`<span class="${className}">`;let tree,newTagName,node,targetElementNode,tagName,openTagNode,closeTagNode,openTagNameNode,closeTagNameNode,closeTagTextCheck,changes,nothingHappen,classAttributeNode,classAttributeValueNode,currentChild,selectedText,view,selection,childTree,childTreeArr,openChildString,closeChildString,originalSelectedText,originalSelectedTextArr,paragraphs,newState,bodyIndent,indent,thisViewState,bodyIndex;if("html"===mode)view=instance.htmlView;else{if("css"!==mode)throw new Error("invalid mode");view=instance.cssView}if(selection=view.state.selection.main,bodyIndent="  ",indent="  ",thisViewState=view.state,bodyIndex=thisViewState.doc.toString().split("\n").findIndex(s=>/<body\s*[^>]*>/gi.test(s)),-1!==bodyIndex&&(bodyIndent=String(" ").repeat(thisViewState.doc.toString().split("\n")[bodyIndex].replace(/[^\s]/gi,"").length)),"inject"===group){const standardPoint=instance.standardPoint,selection=view.state.selection.main;if("mediaquery"===className)view.dispatch({changes:{from:selection.from,to:selection.from,insert:`@media (max-width: ${String(standardPoint[0])}rem) {\n\n}\n\n@media (min-width: ${String(standardPoint[0])}rem) and (max-width: ${String(standardPoint[1])}rem) {\n\n}\n\n@media (min-width: ${String(standardPoint[1])}rem) {\n\n}\n`}});else if("darkmode"===className)view.dispatch({changes:{from:selection.from,to:selection.from,insert:"@media (prefers-color-scheme: dark) {\n\n}\n"}});else if("fontselect"===className){const cssSelection=instance.cssView.state.selection.main;instance.currentFontFiles(!0).then(thisFamily=>{try{const{family,weight}=JSON.parse(thisFamily);""!==family&&instance.cssView.dispatch({changes:{from:cssSelection.from,to:cssSelection.from,insert:`\n  font-family: "${family}";\n  font-weight: ${String(weight)};\n`}})}catch{}}).catch(e=>{console.log(e)})}else if("csseditor"===className)instance.cssTotalEditor();else if("transform"===className){instance.currentMap;const editorOpen=async()=>{const cssString=await instance.transformHelperPopup(),thisView=instance.cssView,selection=thisView.state.selection.main,newState=thisView.state.update({changes:{from:selection.from,to:selection.from,insert:cssString}});thisView.dispatch(newState),await sleep(200),instance.saveDebounce()};instance.valueParser("decode",instance.currentMap.tree.style.general).id!==instance.valueParser("decode",instance.currentCssId).id&&editorOpen().catch(e=>console.log(e))}else if("cssfilter"===className){instance.currentMap;const editorOpen=async()=>{const cssString=await instance.filterHelperPopup(),thisView=instance.cssView,selection=thisView.state.selection.main,newState=thisView.state.update({changes:{from:selection.from,to:selection.from,insert:cssString}});thisView.dispatch(newState),await sleep(200),instance.saveDebounce()};instance.valueParser("decode",instance.currentMap.tree.style.general).id!==instance.valueParser("decode",instance.currentCssId).id&&editorOpen().catch(e=>console.log(e))}else if("animation"===className){instance.currentMap;const editorOpen=async()=>{const cssString=await instance.animationHelperPopup("a_"+uniqueValue("short")),thisView=instance.cssView,selection=thisView.state.selection.main,newState=thisView.state.update({changes:{from:selection.from,to:selection.from,insert:cssString}});thisView.dispatch(newState)};instance.valueParser("decode",instance.currentMap.tree.style.general).id!==instance.valueParser("decode",instance.currentCssId).id&&editorOpen().catch(e=>console.log(e))}else{const eventData={message:"next-click",timestamp:Date.now()},customEvent=new CustomEvent("nextclick",{detail:eventData,bubbles:!0,cancelable:!0});self.dispatchEvent(customEvent)}}else if("action"===group)if("delete"===className)view.dispatch({changes:{from:selection.from,to:selection.to,insert:""}});else if("paste"===className)navigator.clipboard.readText().then(text=>{const newState=view.state.update({changes:{from:selection.from,to:selection.from,insert:text}});view.dispatch(newState)}).catch(e=>console.log(e));else if("copy"===className){selectedText=view.state.doc.sliceString(selection.from,selection.to);try{navigator.clipboard.writeText(selectedText).then(()=>instance.blackAlert("클립보드에 복사되었습니다!")).catch(e=>console.log(e))}catch{}}else(async()=>{let result,safeNumber;for(result=null,safeNumber=0;null===result&&(result=await instance.prompt("링크 주소를 알려주세요!"),"string"==typeof result&&(/^http/gi.test(result)?result=result.trim():/^\s*#/gi.test(result)?result=result.trim().replace(/[^#a-zA-Z0-9_\-]/gi,""):/^\s*[챕쳅]터/gi.test(result)||/^\s*chapter/gi.test(result)?(result=result.trim(),result=/#/gi.test(result)?(instance.isInChapter?"":"chapter/")+"chapter"+result.split("#")[0].replace(/[^0-9]/gi,"")+".xhtml#"+result.split("#")[1].trim():(instance.isInChapter?"":"chapter/")+"chapter"+result.replace(/[^0-9]/gi,"")+".xhtml"):/^\s*(작가|저자)/gi.test(result)?(result=result.trim(),result=/#/gi.test(result)?(instance.isInChapter?"../":"")+"author"+result.split("#")[0].replace(/[^0-9]/gi,"")+".xhtml#"+result.split("#")[1].trim():(instance.isInChapter?"../":"")+"author"+result.replace(/[^0-9]/gi,"")+".xhtml"):/^\s*목차/gi.test(result)?(result=result.trim(),result=/#/gi.test(result)?(instance.isInChapter?"../":"")+"context"+result.split("#")[0].replace(/[^0-9]/gi,"")+".xhtml#"+result.split("#")[1].trim():(instance.isInChapter?"../":"")+"context"+result.replace(/[^0-9]/gi,"")+".xhtml"):/\./gi.test(result)&&/[a-zA-Z]/gi.test(result)&&result.length>4?result="https://"+result.trim().replace(/^\//gi,"").replace(/^\//gi,"").replace(/^\//gi,""):(instance.blackAlert("링크 전체 주소를 복사 붙여넣기 해주세요! (http부터 시작)").catch(e=>console.log(e)),result=null)),!(safeNumber>0));)safeNumber++;safeNumber<=0&&"string"==typeof result&&instance.dispatchSelection([{from:selection.to,insert:"</a>"},{from:selection.from,insert:`<a href="${result}" class="${className}">`}],selection.from,selection.to+startString.length+7,view)})().catch(e=>console.log(e));else if(convertMode)if(attributeStatus){const eventData={message:"next-click",timestamp:Date.now()},customEvent=new CustomEvent("nextclick",{detail:eventData,bubbles:!0,cancelable:!0});self.dispatchEvent(customEvent)}else{for(tree=dist_syntaxTree(view.state),node=tree.resolve(selection.from,1),targetElementNode=null,newTagName=String(self.getAttribute("target")),childTree="",/>/gi.test(newTagName)&&(childTree=newTagName.split(">").map(s=>s.trim()).slice(1).join(" > "),newTagName=newTagName.split(">").map(s=>s.trim())[0]),nothingHappen=!0,classAttributeNode=null,classAttributeValueNode=null;node.parent;){if("Element"===node.name){const tagNameNode=node.getChildren("OpenTag");if(tagNameNode&&(tagName="",view.state.doc.sliceString(tagNameNode[0].from,tagNameNode[0].to).replace(new RegExp("<[ ]*([^ >]+)","gi"),(match,p1)=>(tagName=p1,"")),instance.textTags.includes(tagName.toLowerCase()))){targetElementNode=node;break}}if(!node.parent)break;node=node.parent}if(null!==targetElementNode&&(openTagNode=targetElementNode.firstChild,closeTagNode=targetElementNode.lastChild,closeTagTextCheck=closeTagNode?view.state.doc.sliceString(closeTagNode.from,closeTagNode.from+2):"",openTagNode&&closeTagNode&&"</"===closeTagTextCheck&&(openTagNameNode=openTagNode.getChild("TagName"),closeTagNameNode=closeTagNode.getChild("TagName"),openTagNameNode&&closeTagNameNode))){changes=[{from:closeTagNameNode.from,to:closeTagNameNode.to,insert:newTagName},{from:openTagNameNode.from,to:openTagNameNode.to,insert:newTagName}];try{for(currentChild=openTagNode.firstChild,classAttributeValueNode=null;currentChild;){if("Attribute"===currentChild.name){const attrNameNode=currentChild.getChild("AttributeName");if(attrNameNode&&"class"===view.state.doc.sliceString(attrNameNode.from,attrNameNode.to)){classAttributeNode=currentChild,classAttributeValueNode=currentChild.getChild("AttributeValue");break}}currentChild=currentChild.nextSibling}if(view.dispatch({changes}),""!==childTree){for(tree=dist_syntaxTree(view.state),node=tree.resolve(selection.from,1),targetElementNode=null;node.parent;){if("Element"===node.name){const tagNameNode=node.getChildren("OpenTag");if(tagNameNode&&(tagName="",view.state.doc.sliceString(tagNameNode[0].from,tagNameNode[0].to).replace(new RegExp("<[ ]*([^ >]+)","gi"),(match,p1)=>(tagName=p1,"")),instance.textTags.includes(tagName.toLowerCase()))){targetElementNode=node;break}}if(!node.parent)break;node=node.parent}if(null!==targetElementNode&&(openTagNode=targetElementNode.firstChild,closeTagNode=targetElementNode.lastChild,closeTagTextCheck=closeTagNode?view.state.doc.sliceString(closeTagNode.from,closeTagNode.from+2):"",openTagNode&&closeTagNode&&"</"===closeTagTextCheck&&(openTagNameNode=openTagNode.getChild("TagName"),closeTagNameNode=closeTagNode.getChild("TagName"),openTagNameNode&&closeTagNameNode))){changes=[],openChildString="",closeChildString="",childTreeArr=childTree.split(" > ");for(let c of childTreeArr)openChildString+=`<${c}>`,closeChildString+=`</${c}>`;""!==openChildString&&""!==closeChildString&&(changes.push({from:openTagNameNode.parent.to,insert:openChildString}),changes.push({from:closeTagNameNode.parent.from,insert:closeChildString})),view.dispatch({changes})}}nothingHappen=!1}catch{}}nothingHappen&&(originalSelectedText=view.state.doc.sliceString(selection.from,selection.to),originalSelectedTextArr=originalSelectedText.trim().split("\n").map(line=>line.trim()).filter(line=>line.length>0),originalSelectedTextArr=originalSelectedTextArr.map(s=>s.trim()).filter(s=>""!==s),paragraphs="",originalSelectedTextArr.forEach(p=>{const escapedParagraph=p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");paragraphs+="\n",paragraphs+=`<${newTagName} class="${className}">`,paragraphs+="\n",paragraphs+=escapedParagraph,paragraphs+="\n",paragraphs+=`</${newTagName}>`,paragraphs+="\n"}),paragraphs=paragraphs.trim(),paragraphs=paragraphs.split("\n").map(s=>/<p/gi.test(s)||/<\/p/gi.test(s)?bodyIndent+"  "+s:bodyIndent+"    "+s).join("\n"),newState=view.state.update({changes:{from:selection.from,to:selection.to,insert:""}}),view.dispatch(newState),newState=view.state.update({changes:{from:selection.from,to:selection.from,insert:paragraphs}}),view.dispatch(newState),instance.dispatchSelection([],selection.from,selection.from+paragraphs.length,view))}else if(newTagName=null!==self.getAttribute("target")?self.getAttribute("target"):"span","p"===newTagName&&(newTagName="span"),"a"===newTagName)(async()=>{let result,safeNumber;for(result=null,safeNumber=0;null===result&&(result=await instance.prompt("링크 주소를 알려주세요!"),"string"==typeof result&&(/^http/gi.test(result)?result=result.trim():/^\s*#/gi.test(result)?result=result.trim().replace(/[^#a-zA-Z0-9_\-]/gi,""):/^\s*[챕쳅]터/gi.test(result)||/^\s*chapter/gi.test(result)?(result=result.trim(),result=/#/gi.test(result)?(instance.isInChapter?"":"chapter/")+"chapter"+result.split("#")[0].replace(/[^0-9]/gi,"")+".xhtml#"+result.split("#")[1].trim():(instance.isInChapter?"":"chapter/")+"chapter"+result.replace(/[^0-9]/gi,"")+".xhtml"):/^\s*(작가|저자)/gi.test(result)?(result=result.trim(),result=/#/gi.test(result)?(instance.isInChapter?"../":"")+"author"+result.split("#")[0].replace(/[^0-9]/gi,"")+".xhtml#"+result.split("#")[1].trim():(instance.isInChapter?"../":"")+"author"+result.replace(/[^0-9]/gi,"")+".xhtml"):/^\s*목차/gi.test(result)?(result=result.trim(),result=/#/gi.test(result)?(instance.isInChapter?"../":"")+"context"+result.split("#")[0].replace(/[^0-9]/gi,"")+".xhtml#"+result.split("#")[1].trim():(instance.isInChapter?"../":"")+"context"+result.replace(/[^0-9]/gi,"")+".xhtml"):/\./gi.test(result)&&/[a-zA-Z]/gi.test(result)&&result.length>4?result="https://"+result.trim().replace(/^\//gi,"").replace(/^\//gi,"").replace(/^\//gi,""):(instance.blackAlert("링크 전체 주소를 복사 붙여넣기 해주세요! (http부터 시작)").catch(e=>console.log(e)),result=null)),!(safeNumber>0));)safeNumber++;if(null!==result){const startString=`<${newTagName} href="${result}" class="${className}">`,endString=`</${newTagName}>`;if(css!==String(0)&&""!==css){const cssEditorView=instance.cssView,currentCssText=cssEditorView.state.doc.toString();if(!new RegExp("."+className+"\\s*{","gs").test(currentCssText)){const newState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:css+"\n\n"+currentCssText}});cssEditorView.dispatch(newState)}}instance.dispatchSelection([{from:selection.to,insert:endString},{from:selection.from,insert:startString}],selection.from,selection.to+startString.length+endString.length,view),instance.saveDebounce(!0),instance.saveCurrentState().then(()=>{removeEvent.call(self,e)}).catch(e=>console.log(e))}})().catch(e=>console.log(e));else{const startString=`<${newTagName} class="${className}">`,endString=`</${newTagName}>`;if(css!==String(0)&&""!==css){const cssEditorView=instance.cssView,currentCssText=cssEditorView.state.doc.toString();if(!new RegExp("."+className+"\\s*{","gs").test(currentCssText)){const newState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:css+"\n\n"+currentCssText}});cssEditorView.dispatch(newState)}}instance.dispatchSelection([{from:selection.to,insert:endString},{from:selection.from,insert:startString}],selection.from,selection.to+startString.length+endString.length,view)}instance.saveDebounce(!0),instance.saveCurrentState().then(()=>{removeEvent.call(self,e)}).catch(e=>console.log(e))},mouseenter:e=>{e.currentTarget.style.background=colorChip.black},mouseleave:e=>{const self=e.currentTarget,index=Number(self.mustAttribute("cindex"));self.style.background=instance.mintBlueColorsArr[index]}},style:{display:"inline-flex",justifyContent:"center",alignItems:"center",height:buttonHeight,borderRadius:desktop?5:1,background:instance.mintBlueColorsArr[groupIndex],cursor:"pointer",transition:"all 0.3s ease"},child:{text:button.title,event:{selectstart:e=>e.preventDefault()},style:{fontSize:buttonSize,fontWeight:600,color:colorChip.white,wordSpacing}}});"function"==typeof button.event&&thisButton.addEventListener("nextclick",button.event)}loopIndex++}};htmlEvents=()=>{const instance=this,{colorChip,svgMaker:localSvgMaker,binaryPath}=PathAnimator,{withOut,percent,markdownBlocks,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();try{const allSelectEvent=(forceAllSelect=!1)=>(event,view)=>{let position,tree,node,elementNode,openTagNode,closeTagNode,closeTagTextCheck,contentFrom,contentTo,parentTagNode,parentAttributeNode,initialSelection,hadExistingSelection,grandParentNode;if(event.preventDefault(),position=view.posAtCoords({x:event.clientX,y:event.clientY}),forceAllSelect){if(null===position)return void instance.contextButtons(event,view)}else if(null===position||!instance.directDragMode)return void instance.contextButtons(event,view);if(initialSelection=view.state.selection.main,hadExistingSelection=!initialSelection.empty,tree=dist_syntaxTree(view.state),node=tree.resolveInner(position,1),null!==node)if("TagName"===node.name||"OpenTag"===node.name||"CloseTag"===node.name||"SelfClosingTag"===node.name||"<"===node.name||">"===node.name||"AttributeName"===node.name||"Attribute"===node.name||"AttributeValue"===node.name||"Is"===node.name)parentTagNode=node.parent,!parentTagNode||"OpenTag"!==parentTagNode.name&&"CloseTag"!==parentTagNode.name&&"SelfClosingTag"!==parentTagNode.name?parentTagNode&&"Attribute"===parentTagNode.name?(grandParentNode=parentTagNode.parent,!grandParentNode||"OpenTag"!==grandParentNode.name&&"SelfClosingTag"!==grandParentNode.name||instance.dispatchSelection([],grandParentNode.from,grandParentNode.to,view),instance.contextButtons(event,view)):instance.contextButtons(event,view):(instance.dispatchSelection([],parentTagNode.from,parentTagNode.to,view),instance.contextButtons(event,view));else if("AttributeName"===node.name||"Attribute"===node.name)parentAttributeNode=node.parent,parentAttributeNode&&"Attribute"===parentAttributeNode.name?(instance.dispatchSelection([],parentAttributeNode.from,parentAttributeNode.to,view),instance.contextButtons(event,view)):instance.contextButtons(event,view);else if("AttributeValue"===node.name)node.to>node.from&&node.to-1>=node.from+1?(instance.dispatchSelection([],node.from+1,node.to-1,view),instance.contextButtons(event,view)):instance.contextButtons(event,view);else{if(hadExistingSelection)return void instance.contextButtons(event,view);for(elementNode=null;node;){if("Element"===node.name){elementNode=node;break}node=node.parent}if(null===elementNode)return void instance.contextButtons(event,view);if(openTagNode=elementNode.firstChild,closeTagNode=elementNode.lastChild,closeTagTextCheck=closeTagNode?view.state.doc.sliceString(closeTagNode.from,Math.min(closeTagNode.from+2,closeTagNode.to)):"",openTagNode&&closeTagNode&&"</"===closeTagTextCheck&&openTagNode.to<closeTagNode.from)return contentFrom=openTagNode.to,contentTo=closeTagNode.from,instance.dispatchSelection([],contentFrom,contentTo,view),void instance.contextButtons(event,view)}else instance.contextButtons(event,view)};return EditorView.domEventHandlers({dblclick:allSelectEvent(!0),contextmenu:allSelectEvent(!1),mousedown:(event,view)=>{if(2===event.button){const pos=view.posAtCoords({x:event.clientX,y:event.clientY});if(null!==pos){const initialSelection=view.state.selection.main;initialSelection.from<=pos&&pos<=initialSelection.to&&!initialSelection.empty||view.dispatch({selection:dist_EditorSelection.cursor(pos),scrollIntoView:!0})}view.focus()}},mouseup:(event,view)=>{instance.directDragMode&&setQueue(()=>{view.state.selection.main.empty||instance.contextButtons(event,view)})},keydown:(event,view)=>{"Enter"!==event.key&&"Space"!==event.key&&"Backspace"!==event.key&&"Tab"!==event.key&&(("s"===event.key||"S"===event.key||"ㄴ"===event.key)&&(event.ctrlKey||event.metaKey)?(event.preventDefault(),instance.saveDebounce()):instance.saveDebounce())}})}catch(e){throw console.log(e),new Error(e.message)}};cssTotalEditor=()=>{const instance=this,back=this.back,{colorChip,svgMaker:localSvgMaker,binaryPath}=PathAnimator,{withOut,percent,markdownBlocks,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();instance.saveDebounce(!0),instance.saveCurrentState().then(()=>{const thisMap=instance.currentMap,generalCssId=instance.valueParser("decode",instance.currentMap.tree.style.general).id,localCssId=instance.valueParser("decode",instance.currentCssId).id;if(generalCssId!==localCssId)return(async()=>{const[generalCss]=await back.frontRead(instance.collectionString,{_id:instance.valueParser("decode",thisMap.tree.style.general).id}),generalCssString=generalCss.data,[cCss]=await back.frontRead(instance.collectionString,{_id:instance.valueParser("decode",instance.currentCssId).id}),cCssString=cCss.data,cssStrings=await instance.cssStatusPopup([generalCssString,cCssString]),sortFunction=(a,b)=>{const getCode=char=>"."===char?1e4:"#"===char?1e3:char.charCodeAt(0);let delta0=96,delta1=96,aIndex=0,bIndex=0;return a=a.trim(),b=b.trim(),/^@/.test(a.trim())?(delta0=96,delta1=96):(delta0=a.split("{")[0].length+1,delta1=b.split("{")[0].length+1),a.length>0&&(aIndex=a.split("").slice(0,1).reduce((acc,curr)=>acc+getCode(curr),0)+a.split("").slice(1,delta0).reduce((acc,curr)=>acc+curr.charCodeAt(0),0)),b.length>0&&(bIndex=b.split("").slice(0,1).reduce((acc,curr)=>acc+getCode(curr),0)+b.split("").slice(1,delta1).reduce((acc,curr)=>acc+curr.charCodeAt(0),0)),aIndex-bIndex},f_general_keyframes=cssStrings[0].filter(s=>/^@(keyframes|font\-face)/gis.test(s.trim())),f_general_middle=cssStrings[0].filter(s=>!/^@(keyframes|font\-face)/gis.test(s.trim())&&!/^@media/gis.test(s.trim())),f_general_media=cssStrings[0].filter(s=>/^@media/gis.test(s.trim())),f_local_keyframes=cssStrings[1].filter(s=>/^@(keyframes|font\-face)/gis.test(s.trim())),f_local_middle=cssStrings[1].filter(s=>!/^@(keyframes|font\-face)/gis.test(s.trim())&&!/^@media/gis.test(s.trim())),f_local_media=cssStrings[1].filter(s=>/^@media/gis.test(s.trim()));f_general_keyframes.sort(sortFunction),f_general_middle.sort(sortFunction),f_general_media.sort(sortFunction),f_local_keyframes.sort(sortFunction),f_local_middle.sort(sortFunction),f_local_media.sort(sortFunction);const[generalCssObject]=await back.frontRead(instance.collectionString,{_id:generalCssId}),[localCssObject]=await back.frontRead(instance.collectionString,{_id:localCssId}),g=String(f_general_keyframes.join("\n\n").trim()+"\n\n"+f_general_middle.join("\n\n").trim()+"\n\n"+f_general_media.join("\n\n").trim()).trim(),l=String(f_local_keyframes.join("\n\n").trim()+"\n\n"+f_local_middle.join("\n\n").trim()+"\n\n"+f_local_media.join("\n\n").trim()).trim();try{await back.frontUpdate(instance.collectionString,[{_id:generalCssId},{...generalCssObject,data:g}]),await back.frontUpdate(instance.collectionString,[{_id:localCssId},{...localCssObject,data:l}]);const cssEditorView=instance.cssView,newState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:l}});cssEditorView.dispatch(newState),await sleep(200),instance.saveDebounce()}catch{}})()}).catch(e=>console.log(e))};cssEvents=()=>{const instance=this,{colorChip,svgMaker:localSvgMaker,binaryPath}=PathAnimator,{withOut,percent,markdownBlocks,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();try{const moreMenuEvent=()=>(event,view)=>{let position,line;event.preventDefault(),position=view.posAtCoords({x:event.clientX,y:event.clientY}),null!==position?(line=view.state.doc.lineAt(position),instance.dispatchSelection([],line.from,line.to,view),instance.contextButtons(event,view,"css")):instance.contextButtons(event,view,"css")};return EditorView.domEventHandlers({dblclick:(event,view)=>{event.preventDefault(),instance.cssTotalEditor()},contextmenu:moreMenuEvent(),mousedown:(event,view)=>{if(2===event.button){const pos=view.posAtCoords({x:event.clientX,y:event.clientY});if(null!==pos){const initialSelection=view.state.selection.main;initialSelection.from<=pos&&pos<=initialSelection.to&&!initialSelection.empty||view.dispatch({selection:dist_EditorSelection.cursor(pos),scrollIntoView:!0})}view.focus()}},mouseup:(event,view)=>{instance.directDragMode&&setQueue(()=>{view.state.selection.main.empty||instance.contextButtons(event,view,"css")})},keydown:(event,view)=>{"Enter"!==event.key&&"Space"!==event.key&&"Backspace"!==event.key&&"Tab"!==event.key&&(("s"===event.key||"S"===event.key||"ㄴ"===event.key)&&(event.ctrlKey||event.metaKey)?(event.preventDefault(),instance.saveDebounce(!0),instance.saveCurrentState().then(()=>instance.blackAlert("저장되었습니다!",async()=>{},!0)).catch(e=>console.log(e))):instance.saveDebounce())}})}catch(e){throw console.log(e),new Error(e.message)}};editorInit=async(mode,editorMother,initialContent,option)=>{const instance=this,{colorChip,svgMaker:localSvgMaker,binaryPath}=PathAnimator,{withOut,percent,markdownBlocks,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();try{let state,view,fontSize,wordSpacing,gutterPaddingLeft,gutterMinWidth,gutterFontSize,indentWidthStandard,guttersMarginRight,extensionArr,numberView;fontSize=mediaNumber(14.5,14.5,14,13,3),indentWidthStandard=mediaNumber(4.6,4.6,4.3,3.8,1.35),wordSpacing=mediaNumber(-4.3,-4.3,-4.3,-4.3,-2.5),gutterMinWidth=mediaNumber(30,27,27,25,3.4),gutterPaddingLeft=mediaNumber(10,9,9,9,.25),gutterFontSize=mediaNumber(14,14,14,13,2.7),guttersMarginRight=mediaNumber(10,9,8,7,1),numberView=!0,"object"==typeof option&&null!==option&&!1===option.numberView&&(numberView=!1);const hangingIndentPlugin=ViewPlugin.fromClass(class{decorations;constructor(view){this.decorations=this.buildDecorations(view)}update=update=>{(update.docChanged||update.viewportChanged)&&(this.decorations=this.buildDecorations(update.view))};buildDecorations=view=>{const builder=new RangeSetBuilder,indentCurve=(mediaEa(),n=>n<=1?1*indentWidthStandard:n<=3||n<=6?indentWidthStandard*n:n<=8?indentWidthStandard*(n-.4):n<=10?indentWidthStandard*(n-.6):n<=12?indentWidthStandard*(n-1):n<=14?indentWidthStandard*(n-1.2):n<=16?indentWidthStandard*(n-1.4):n<=18?indentWidthStandard*(n-2):n<=20?indentWidthStandard*(n-2.2):n<=22?indentWidthStandard*(n-2.6):n<=24?indentWidthStandard*(n-3):n<=26?indentWidthStandard*(n-3.2):indentWidthStandard*(n-3.4));let line,text,match,spaceCount,indentWidth;for(let{from,to}of view.visibleRanges)try{for(line=view.state.doc.lineAt(from);line.from<=to;)text=line.text,match=text.match(/^(\s+)/),null!==match&&match.length>1?(spaceCount=match[1].length,indentWidth=indentCurve(spaceCount),mobile&&(indentWidth=window.innerWidth>700?spaceCount*(window.innerWidth/100)*1.4:window.innerWidth>670?spaceCount*(window.innerWidth/100)*1.39:window.innerWidth>650||window.innerWidth>630?spaceCount*(window.innerWidth/100)*1.37:window.innerWidth>600?spaceCount*(window.innerWidth/100)*1.36:window.innerWidth>570?spaceCount*(window.innerWidth/100)*1.35:window.innerWidth>540?spaceCount*(window.innerWidth/100)*1.33:window.innerWidth>520?spaceCount*(window.innerWidth/100)*1.3:window.innerWidth>500?spaceCount*(window.innerWidth/100)*1.29:window.innerWidth>480?spaceCount*(window.innerWidth/100)*1.27:window.innerWidth>450?spaceCount*(window.innerWidth/100)*1.25:window.innerWidth>420?spaceCount*(window.innerWidth/100)*1.22:window.innerWidth>400?spaceCount*(window.innerWidth/100)*1.2:window.innerWidth>385?spaceCount*(window.innerWidth/100)*1.15:spaceCount*(window.innerWidth/100)*1.1),builder.add(line.from,line.from,Decoration.line({attributes:{style:`text-indent: -${String(indentWidth)}px; padding-left: ${String(indentWidth)}px;`}}))):builder.add(line.from,line.from,Decoration.line({attributes:{style:`text-indent: -${String(0)}px; padding-left: ${String(0)}px;`}})),line=view.state.doc.line(line.number+1)}catch{}return builder.finish()};destroy(){}},{decorations:v=>v.decorations}),preventDefaultClickHandler=ViewPlugin.fromClass(class{constructor(view){view.dom.addEventListener("mousedown",e=>{2===e.detail&&(e.preventDefault(),e.stopPropagation())},{capture:!0})}update(update){}destroy(){}}),saveKeyHandler=target=>(instance.saveDebounce(),!1),saveKeymap=keymap.of([{key:"Enter",run:saveKeyHandler},{key:"Space",run:saveKeyHandler},{key:"Backspace",run:saveKeyHandler},{key:"Tab",run:saveKeyHandler}]),autoComplete=[{key:"Tab",run:acceptCompletion}],upgradeSearchKeyMap=[{key:"Mod-f",run:view=>{const target=[...searchKeymap].find(o=>"Mod-f"===o.key);return null===document.querySelector(".cm-panel.cm-search")?AbstractNode.timeouts.upgradeSearchKeyMap_inputSearch=setTimeout(async()=>{void 0!==AbstractNode.timeouts.upgradeSearchKeyMap_inputSearch&&null!==AbstractNode.timeouts.upgradeSearchKeyMap_inputSearch&&(clearTimeout(AbstractNode.timeouts.upgradeSearchKeyMap_inputSearch),AbstractNode.timeouts.upgradeSearchKeyMap_inputSearch=null);try{let safeNum,targets=[...view.dom.querySelectorAll(".cm-panel.cm-search input.cm-textfield")];for(safeNum=0;0===targets.length;){if(safeNum>20)throw new Error("cannot find search inputs");await sleep(500),targets=[...view.dom.querySelectorAll(".cm-panel.cm-search input.cm-textfield")],safeNum++}if(targets.length>0)for(let i of targets)i.addEventListener("keydown",event=>{(event.metaKey||event.ctrlKey)&&("f"!==event.key&&"F"!==event.key&&"ㄹ"!==event.key&&"g"!==event.key&&"G"!==event.key&&"ㅎ"!==event.key||setTimeout(async()=>{closeSearchPanel(view)},0))})}catch(e){console.log(e)}},0):setTimeout(async()=>{closeSearchPanel(view)},0),target.run(view)},scope:"editor search-panel"},...[...searchKeymap].filter(o=>"Mod-f"!==o.key)],abstractTheme=EditorView.theme({"&":{backgroundColor:this.editorCss(colorChip.white),color:this.editorCss(colorChip.darkDarkBlack),border:this.editorCss(0),outline:this.editorCss("none"),fontSize:this.editorCss(fontSize,"font-size"),fontWeight:this.editorCss(String(500),"font-weight"),lineHeight:this.editorCss(String(1.7),"line-height"),letterSpacing:this.editorCss(0,"word-spacing"),wordSpacing:this.editorCss(pixelUnit(wordSpacing),"word-spacing")},".cm-activeLineGutter":{backgroundColor:this.editorCss(colorChip.mint),color:this.editorCss(colorChip.white)},".cm-activeLine":{backgroundColor:this.editorCss(colorChip.mintWhite)},".cm-angle-bracket":{color:this.editorCss(colorChip.mint),fontWeight:this.editorCss(String(400))},".cm-doctype, .cm-xmlstarter":{color:this.editorCss(colorChip.mint),fontWeight:this.editorCss(String(400))},".cm-attr-quote, .cm-attr-quote .ͼr, .cm-attr-quote .cr":{color:this.editorCss(colorChip.rose),fontWeight:this.editorCss(String(400))},".cm-attribute-name":{color:this.editorCss(colorChip.rose),marginLeft:this.editorCss(String(3.2)+"px")},".cm-gutters":{cursor:"pointer",border:"none",marginRight:this.editorCss(guttersMarginRight)},".cm-content, .cm-line":{backgroundColor:this.editorCss(colorChip.transparent)},".cm-editor .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground":{backgroundColor:this.editorCss(colorChip.softYellow),border:"none"},".cm-gutters .cm-gutterElement, .cm-lineNumbers .cm-gutterElement":{color:colorChip.deactive,fontSize:this.editorCss(gutterFontSize),paddingLeft:this.editorCss(gutterPaddingLeft),minWidth:this.editorCss(gutterMinWidth),verticalAlign:"middle",lineHeight:this.editorCss(String(1.8))},".cm-foldGutter .cm-gutterElement":{cursor:"pointer"},".cm-css-brace":{color:this.editorCss(colorChip.mint),fontWeight:this.editorCss(String(400))},".cm-css-property":{color:this.editorCss(colorChip.rose),fontWeight:this.editorCss("400")},".cm-css-selector, .cm-css-selector *":{color:this.editorCss(colorChip.mint),fontWeight:this.editorCss("400")},".cm-css-value, .cm-css-value *, .cm-css-number, .cm-css-number *, .cm-css-declaration, .cm-css-declaration *":{color:this.editorCss(colorChip.darkDarkBlack),fontWeight:this.editorCss("400")},".cm-css-bin, .cm-css-bin *, .cm-css-unit, .cm-css-unit *":{color:this.editorCss(colorChip.rose),fontWeight:this.editorCss("400")},".cm-css-call, .cm-css-call *":{color:this.editorCss(colorChip.rose),fontWeight:this.editorCss("400")},".cm-css-color, .cm-css-color *":{color:this.editorCss(colorChip.darkDarkBlack),fontWeight:this.editorCss("400")},".cm-css-semicolon, &.cm-focused .cm-selectionBackground,":{color:this.editorCss(colorChip.deactive),fontWeight:this.editorCss("400")},".cm-cursor":{borderLeft:"1.5px solid black",marginLeft:"-0.75px",display:"inline-block",width:"0"},".cm-cursor.cm-cursor-secondary":{borderLeft:"1.5px solid rgba(0, 0, 0, 0.4)"},".cm-editor ::selection":{color:this.editorCss(colorChip.white)},".cm-tooltip-autocomplete":{"background-color":colorChip.white,border:"0px solid "+colorChip.transparent,"border-radius":pixelUnit(6),"box-shadow":"0px 4px 18px -9px "+colorChip.shadow},".cm-tooltip-autocomplete li .cm-completionLabel":{"font-family":"redditmono !important",color:colorChip.darkDarkblack+" !important","padding-left":pixelUnit(6)+" !important"},".cm-tooltip-autocomplete li[aria-selected=true] .cm-completionLabel":{color:colorChip.white+" !important"},".cm-tooltip-autocomplete li[aria-selected=true]":{background:colorChip.mint+" !important","border-radius":pixelUnit(4)+" !important"},".cm-tooltip-autocomplete li":{"padding-top":pixelUnit(6)+" !important","padding-bottom":pixelUnit(7)+" !important"},".cm-tooltip-autocomplete li div::after":{content:" !important",display:"none !important"},".cm-tooltip-autocomplete li div":{display:"none !important"},".cm-panel.cm-search":{"padding-top":pixelUnit(26)+" !important","padding-bottom":pixelUnit(26)+" !important","padding-left":pixelUnit(8)+" !important","padding-right":pixelUnit(8)+" !important",display:"flex !important","flex-direction":"row !important","flex-wrap":"wrap !important",position:"relative !important"},".cm-panel.cm-search br":{content:"","flex-basis":"100% !important",display:"block !important",position:"relative !important",height:"0 !important",margin:"0 !important",overflow:"hidden !important"},".cm-panel.cm-search label":{display:"none !important"},".cm-panels-bottom":{"border-top":"1px solid "+colorChip.rose+" !important"},".cm-panel.cm-search [name=close]":{color:colorChip.rose+" !important"},".cm-panel.cm-search input":{"margin-top":pixelUnit(0)+" !important","margin-bottom":pixelUnit(5)+" !important","margin-left":pixelUnit(0)+" !important","margin-right":pixelUnit(5)+" !important",outline:pixelUnit(0)+" !important","font-size":percent(80)+" !important","font-family":'"redditmono", "pretendard" !important',border:"0px solid "+colorChip.white+" !important","border-radius":pixelUnit(4)+" !important",background:colorChip.gray1+" !important","word-spacing":pixelUnit(-3)+" !important","padding-top":pixelUnit(7)+" !important","padding-bottom":pixelUnit(8)+" !important","padding-left":pixelUnit(8)+" !important","min-width":String(60)+"% !important",flex:String(1)+" !important"},".cm-panel.cm-search .cm-button":{"margin-top":pixelUnit(0)+" !important","margin-bottom":pixelUnit(5)+" !important","margin-right":pixelUnit(5)+" !important",background:colorChip.rose+" !important","padding-top":pixelUnit(4)+" !important","padding-bottom":pixelUnit(6)+" !important",border:"0px solid "+colorChip.white+" !important","border-radius":pixelUnit(4)+" !important","font-size":percent(80)+" !important","font-family":'"pretendard" !important',"font-weight":String(800)+" !important","word-spacing":pixelUnit(-1)+" !important",color:colorChip.white+" !important",flex:String(0)+" !important"},".cm-panel.cm-search .cm-button[name=select], .cm-panel.cm-search .cm-button[name=prev], .cm-panel.cm-search .cm-button[name=replaceAll]":{display:"none !important"}},{dark:!1}),myHighlightStyle=HighlightStyle.define([{tag:tags.keyword,color:colorChip.blueDarkDim,fontWeight:400},{tag:tags.comment,color:colorChip.deactive,fontWeight:400},{tag:tags.string,color:colorChip.blueDarkDim,fontWeight:400},{tag:tags.variableName,color:colorChip.blueDarkDim,fontWeight:400},{tag:tags.number,color:colorChip.blueDarkDim,fontWeight:400},{tag:tags.operator,color:colorChip.rose,fontWeight:500},{tag:tags.tagName,color:colorChip.mint,fontWeight:400},{tag:tags.attributeName,color:colorChip.rose,fontWeight:500}]);if("html"===mode){const doctypeMark=Decoration.mark({class:"cm-doctype"}),doctypeHighlighter=ViewPlugin.fromClass(class{decorations;constructor(view){this.decorations=this.buildDecorations(view)}update=update=>{(update.docChanged||update.viewportChanged)&&(this.decorations=this.buildDecorations(update.view))};buildDecorations=view=>{const builder=new RangeSetBuilder,doc=view.state.doc,searchLimit=Math.min(doc.length,500);for(const{from,to}of view.visibleRanges)if(from<searchLimit){const text=doc.sliceString(0,Math.min(to,searchLimit)),doctypeKeyword="<!DOCTYPE";let startIndex=text.indexOf(doctypeKeyword);if(-1!==startIndex&&startIndex>=from){let endIndex=text.indexOf(">",startIndex+doctypeKeyword.length);-1!==endIndex&&builder.add(startIndex,endIndex+1,doctypeMark)}}return builder.finish()}},{decorations:v=>v.decorations}),xmlMark=Decoration.mark({class:"cm-xmlstarter"}),xmlHighlighter=ViewPlugin.fromClass(class{decorations;constructor(view){this.decorations=this.buildDecorations(view)}update=update=>{(update.docChanged||update.viewportChanged)&&(this.decorations=this.buildDecorations(update.view))};buildDecorations=view=>{const builder=new RangeSetBuilder,regex=/<(\?)[^>]+(\?)?>/gi;let match;for(const{from,to}of view.visibleRanges){const text=view.state.doc.sliceString(from,to);for(regex.lastIndex=0;null!==(match=regex.exec(text));){const matchText=match[0],matchStart=from+match.index,matchEnd=matchStart+matchText.length;try{builder.add(matchStart,matchEnd,xmlMark)}catch{}0===matchText.length&&regex.lastIndex===match.index&&regex.lastIndex++}}return builder.finish()}},{decorations:v=>v.decorations}),angleBracketMark=Decoration.mark({class:"cm-angle-bracket"}),angleBracketHighlighter=ViewPlugin.fromClass(class{decorations;constructor(view){this.decorations=this.buildDecorations(view)}update=update=>{(update.docChanged||update.viewportChanged)&&(this.decorations=this.buildDecorations(update.view))};buildDecorations=view=>{const builder=new RangeSetBuilder,regex=/(<\/?|>|\/[ ]*>)/g;let match;for(const{from,to}of view.visibleRanges){const text=view.state.doc.sliceString(from,to);for(regex.lastIndex=0;null!==(match=regex.exec(text));){const matchText=match[0],matchStart=from+match.index,matchEnd=matchStart+matchText.length;try{builder.add(matchStart,matchEnd,angleBracketMark)}catch{}0===matchText.length&&regex.lastIndex===match.index&&regex.lastIndex++}}return builder.finish()}},{decorations:v=>v.decorations}),attrQuoteMark=Decoration.mark({class:"cm-attr-quote"}),attrQuoteHighlighter=ViewPlugin.fromClass(class{decorations;constructor(view){this.decorations=this.buildDecorations(view)}update=update=>{(update.docChanged||update.viewportChanged)&&(this.decorations=this.buildDecorations(update.view))};buildDecorations=view=>{const builder=new RangeSetBuilder,tree=dist_syntaxTree(view.state);for(const{from,to}of view.visibleRanges)tree.iterate({from,to,enter:nodeRef=>{if("AttributeValue"===nodeRef.name){const nodeFrom=nodeRef.from,nodeTo=nodeRef.to;if(nodeTo>nodeFrom){const firstChar=view.state.doc.sliceString(nodeFrom,nodeFrom+1),lastChar=view.state.doc.sliceString(nodeTo-1,nodeTo);'"'===firstChar&&builder.add(nodeFrom,nodeFrom+1,attrQuoteMark),'"'===lastChar&&nodeTo>nodeFrom+1&&builder.add(nodeTo-1,nodeTo,attrQuoteMark)}}}});return builder.finish()}},{decorations:v=>v.decorations}),attrNameMark=Decoration.mark({class:"cm-attribute-name"}),attrNameHighlighter=ViewPlugin.fromClass(class{decorations;constructor(view){this.decorations=this.buildDecorations(view)}update=update=>{(update.docChanged||update.viewportChanged)&&(this.decorations=this.buildDecorations(update.view))};buildDecorations=view=>{const builder=new RangeSetBuilder,tree=dist_syntaxTree(view.state);for(const{from,to}of view.visibleRanges)tree.iterate({from,to,enter:nodeRef=>{if("AttributeName"===nodeRef.name){const nodeFrom=nodeRef.from,nodeTo=nodeRef.to;builder.add(nodeFrom,nodeTo,attrNameMark)}}});return builder.finish()}},{decorations:v=>v.decorations}),tagCompleteHelper=context=>{const word=context.matchBefore(/\w*\.?\w*/);if(!word||word.from===word.to&&!context.explicit)return null;const tagDictionary={div:{label:"div",apply:(view,completion,from,to)=>{view.dispatch({changes:{from,to,insert:"<div></div>"},selection:{anchor:from+5},userEvent:"input.complete"})}},img:{label:"img",apply:(view,completion,from,to)=>{view.dispatch({changes:{from,to,insert:'<img src="" alt="" />'},selection:{anchor:from},userEvent:"input.complete"})}},a:{label:"a",apply:(view,completion,from,to)=>{view.dispatch({changes:{from,to,insert:'<a href=""></a>'},selection:{anchor:from+9},userEvent:"input.complete"})}},p:{label:"p",apply:(view,completion,from,to)=>{view.dispatch({changes:{from,to,insert:"<p></p>"},selection:{anchor:from+3},userEvent:"input.complete"})}},h1:{label:"h1",apply:(view,completion,from,to)=>{view.dispatch({changes:{from,to,insert:"<h1></h1>"},selection:{anchor:from+4},userEvent:"input.complete"})}},h3:{label:"h3",apply:(view,completion,from,to)=>{view.dispatch({changes:{from,to,insert:"<h3></h3>"},selection:{anchor:from+4},userEvent:"input.complete"})}},html:{label:"html",apply:(view,completion,from,to)=>{view.dispatch({changes:{from,to,insert:"<html></html>"},selection:{anchor:from+6},userEvent:"input.complete"})}},head:{label:"head",apply:(view,completion,from,to)=>{view.dispatch({changes:{from,to,insert:"<head></head>"},selection:{anchor:from+6},userEvent:"input.complete"})}},body:{label:"body",apply:(view,completion,from,to)=>{view.dispatch({changes:{from,to,insert:"<body></body>"},selection:{anchor:from+6},userEvent:"input.complete"})}},style:{label:"style",apply:(view,completion,from,to)=>{view.dispatch({changes:{from,to,insert:"<style></style>"},selection:{anchor:from+7},userEvent:"input.complete"})}}};return word.text.startsWith("d")?{from:word.from,options:[tagDictionary.div],filter:!0}:word.text.startsWith("p")?{from:word.from,options:[tagDictionary.p],filter:!0}:word.text.startsWith("a")?{from:word.from,options:[tagDictionary.a],filter:!0}:word.text.startsWith("h")?{from:word.from,options:[tagDictionary.h1,tagDictionary.h3,tagDictionary.html,tagDictionary.head],filter:!0}:word.text.startsWith("s")?{from:word.from,options:[tagDictionary.style],filter:!0}:word.text.startsWith("b")?{from:word.from,options:[tagDictionary.body],filter:!0}:null},pasteFilterHandler=ViewPlugin.fromClass(class{view;constructor(view){this.view=view}handlePaste(event,view){const pastedText=event.clipboardData?.getData("text/plain");if(pastedText){if(event.preventDefault(),instance.innerCopyStart)view.dispatch(view.state.replaceSelection(pastedText));else{const escapedText=String(pastedText).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");view.dispatch(view.state.replaceSelection(escapedText))}return!0}return!1}},{eventHandlers:{paste(event,view){const handlerInstance=view.plugin(pasteFilterHandler);handlerInstance&&handlerInstance.handlePaste(event,view)}}});state=EditorState.create({doc:initialContent,extensions:[lineNumbers(),highlightActiveLineGutter(),highlightSpecialChars(),dist_history(),foldGutter(),dropCursor(),EditorState.allowMultipleSelections.of(!0),EditorView.lineWrapping,indentOnInput(),bracketMatching(),closeBrackets(),autocompletion(),html().language.data.of({autocomplete:tagCompleteHelper}),rectangularSelection(),highlightActiveLine(),drawSelection(),search(),keymap.of([...closeBracketsKeymap,...defaultKeymap,...upgradeSearchKeyMap,...historyKeymap,...foldKeymap,...autoComplete,...completionKeymap,indentWithTab]),abstractTheme,doctypeHighlighter,xmlHighlighter,angleBracketHighlighter,attrQuoteHighlighter,attrNameHighlighter,hangingIndentPlugin,preventDefaultClickHandler,pasteFilterHandler,instance.htmlEvents(),Prec.highest(saveKeymap),syntaxHighlighting(myHighlightStyle,{fallback:!0}),html()]})}else if("css"===mode){const cssBraceMark=Decoration.mark({class:"cm-css-brace"}),cssBraceHighlighter=ViewPlugin.fromClass(class{decorations;constructor(view){this.decorations=this.buildDecorations(view)}update(update){(update.docChanged||update.viewportChanged)&&(this.decorations=this.buildDecorations(update.view))}buildDecorations(view){const builder=new RangeSetBuilder,regex=/[{}]/g;let match;for(const{from,to}of view.visibleRanges){const text=view.state.doc.sliceString(from,to);for(regex.lastIndex=0;null!==(match=regex.exec(text));){const matchStart=from+match.index,matchEnd=matchStart+1;try{builder.add(matchStart,matchEnd,cssBraceMark)}catch{}0===match[0].length&&regex.lastIndex===match.index&&regex.lastIndex++}}return builder.finish()}},{decorations:v=>v.decorations}),cssSelectorMark=Decoration.mark({class:"cm-css-selector"}),cssSelectorHighlighter=ViewPlugin.fromClass(class{decorations;constructor(view){this.decorations=this.buildDecorations(view)}update(update){(update.docChanged||update.viewportChanged)&&(this.decorations=this.buildDecorations(update.view))}buildDecorations(view){const builder=new RangeSetBuilder,tree=dist_syntaxTree(view.state),selectorNodeNames=new Set(["TagSelector","ClassSelector","IdName","IDSelector","TypeSelector","PseudoClassSelector","PseudoElementSelector","AttributeSelector","UniversalSelector"]);for(const{from,to}of view.visibleRanges)tree.iterate({from,to,enter:node=>{selectorNodeNames.has(node.name)&&builder.add(node.from,node.to,cssSelectorMark)}});return builder.finish()}},{decorations:v=>v.decorations}),cssPropertyMark=Decoration.mark({class:"cm-css-property"}),cssValueMark=Decoration.mark({class:"cm-css-value"}),cssNumberMark=Decoration.mark({class:"cm-css-number"}),cssColorMark=Decoration.mark({class:"cm-css-color"}),cssFunctionMark=Decoration.mark({class:"cm-css-function"}),cssSemicolonMark=Decoration.mark({class:"cm-css-semicolon"}),cssCallMark=Decoration.mark({class:"cm-css-call"}),cssBinMark=Decoration.mark({class:"cm-css-bin"}),cssArgMark=Decoration.mark({class:"cm-css-arg"}),cssUnitMark=Decoration.mark({class:"cm-css-unit"}),unifiedCSSHighlighter=ViewPlugin.fromClass(class{decorations;constructor(view){this.decorations=this.build(view)}update(update){(update.docChanged||update.viewportChanged)&&(this.decorations=this.build(update.view))}build(view){const tree=dist_syntaxTree(view.state),decos=[];tree.iterate({from:0,to:view.state.doc.length,enter:node=>{"PropertyName"===node.name?decos.push({from:node.from,to:node.to,deco:cssPropertyMark}):"StringLiteral"===node.name||"ValueName"===node.name?decos.push({from:node.from,to:node.to,deco:cssValueMark}):"Unit"===node.name?decos.push({from:node.from,to:node.to,deco:cssUnitMark}):"ColorLiteral"===node.name?decos.push({from:node.from,to:node.to,deco:cssColorMark}):"NumberLiteral"===node.name?decos.push({from:node.from,to:node.to,deco:cssNumberMark}):"Callee"===node.name?decos.push({from:node.from,to:node.to,deco:cssCallMark}):"BinOp"===node.name?decos.push({from:node.from,to:node.to,deco:cssBinMark}):"CallExpression"===node.name?decos.push({from:node.from,to:node.to,deco:cssFunctionMark}):"ArgList"===node.name&&decos.push({from:node.from,to:node.to,deco:cssArgMark});";"===view.state.doc.sliceString(node.to,node.to+1)&&decos.push({from:node.to,to:node.to+1,deco:cssSemicolonMark})}}),decos.sort((a,b)=>a.from-b.from);const builder=new RangeSetBuilder;for(const{from,to,deco}of decos)try{builder.add(from,to,deco)}catch{}return builder.finish()}},{decorations:v=>v.decorations});state=EditorState.create({doc:initialContent,extensions:[lineNumbers(),highlightActiveLineGutter(),highlightSpecialChars(),dist_history(),foldGutter(),dropCursor(),EditorState.allowMultipleSelections.of(!0),EditorView.lineWrapping,indentOnInput(),bracketMatching(),closeBrackets(),autocompletion(),rectangularSelection(),highlightActiveLine(),drawSelection(),search(),keymap.of([...closeBracketsKeymap,...defaultKeymap,...upgradeSearchKeyMap,...historyKeymap,...foldKeymap,...autoComplete,...completionKeymap,indentWithTab]),abstractTheme,hangingIndentPlugin,preventDefaultClickHandler,cssBraceHighlighter,unifiedCSSHighlighter,cssSelectorHighlighter,instance.cssEvents(),Prec.highest(saveKeymap),syntaxHighlighting(myHighlightStyle,{fallback:!0}),css()]})}else if("css-mini"===mode){const cssBraceMark=Decoration.mark({class:"cm-css-brace"}),cssBraceHighlighter=ViewPlugin.fromClass(class{decorations;constructor(view){this.decorations=this.buildDecorations(view)}update(update){(update.docChanged||update.viewportChanged)&&(this.decorations=this.buildDecorations(update.view))}buildDecorations(view){const builder=new RangeSetBuilder,regex=/[{}]/g;let match;for(const{from,to}of view.visibleRanges){const text=view.state.doc.sliceString(from,to);for(regex.lastIndex=0;null!==(match=regex.exec(text));){const matchStart=from+match.index,matchEnd=matchStart+1;try{builder.add(matchStart,matchEnd,cssBraceMark)}catch{}0===match[0].length&&regex.lastIndex===match.index&&regex.lastIndex++}}return builder.finish()}},{decorations:v=>v.decorations}),cssSelectorMark=Decoration.mark({class:"cm-css-selector"}),cssSelectorHighlighter=ViewPlugin.fromClass(class{decorations;constructor(view){this.decorations=this.buildDecorations(view)}update(update){(update.docChanged||update.viewportChanged)&&(this.decorations=this.buildDecorations(update.view))}buildDecorations(view){const builder=new RangeSetBuilder,tree=dist_syntaxTree(view.state),selectorNodeNames=new Set(["TagSelector","ClassSelector","IdName","IDSelector","TypeSelector","PseudoClassSelector","PseudoElementSelector","AttributeSelector","UniversalSelector"]);for(const{from,to}of view.visibleRanges)tree.iterate({from,to,enter:node=>{selectorNodeNames.has(node.name)&&builder.add(node.from,node.to,cssSelectorMark)}});return builder.finish()}},{decorations:v=>v.decorations}),cssPropertyMark=Decoration.mark({class:"cm-css-property"}),cssValueMark=Decoration.mark({class:"cm-css-value"}),cssNumberMark=Decoration.mark({class:"cm-css-number"}),cssColorMark=Decoration.mark({class:"cm-css-color"}),cssFunctionMark=Decoration.mark({class:"cm-css-function"}),cssSemicolonMark=Decoration.mark({class:"cm-css-semicolon"}),cssCallMark=Decoration.mark({class:"cm-css-call"}),cssBinMark=Decoration.mark({class:"cm-css-bin"}),cssArgMark=Decoration.mark({class:"cm-css-arg"}),cssUnitMark=Decoration.mark({class:"cm-css-unit"}),unifiedCSSHighlighter=ViewPlugin.fromClass(class{decorations;constructor(view){this.decorations=this.build(view)}update(update){(update.docChanged||update.viewportChanged)&&(this.decorations=this.build(update.view))}build(view){const tree=dist_syntaxTree(view.state),decos=[];tree.iterate({from:0,to:view.state.doc.length,enter:node=>{"PropertyName"===node.name?decos.push({from:node.from,to:node.to,deco:cssPropertyMark}):"StringLiteral"===node.name||"ValueName"===node.name?decos.push({from:node.from,to:node.to,deco:cssValueMark}):"Unit"===node.name?decos.push({from:node.from,to:node.to,deco:cssUnitMark}):"ColorLiteral"===node.name?decos.push({from:node.from,to:node.to,deco:cssColorMark}):"NumberLiteral"===node.name?decos.push({from:node.from,to:node.to,deco:cssNumberMark}):"Callee"===node.name?decos.push({from:node.from,to:node.to,deco:cssCallMark}):"BinOp"===node.name?decos.push({from:node.from,to:node.to,deco:cssBinMark}):"CallExpression"===node.name?decos.push({from:node.from,to:node.to,deco:cssFunctionMark}):"ArgList"===node.name&&decos.push({from:node.from,to:node.to,deco:cssArgMark});";"===view.state.doc.sliceString(node.to,node.to+1)&&decos.push({from:node.to,to:node.to+1,deco:cssSemicolonMark})}}),decos.sort((a,b)=>a.from-b.from);const builder=new RangeSetBuilder;for(const{from,to,deco}of decos)try{builder.add(from,to,deco)}catch{}return builder.finish()}},{decorations:v=>v.decorations});extensionArr=[lineNumbers(),highlightActiveLineGutter(),highlightSpecialChars(),dist_history(),foldGutter(),dropCursor(),EditorState.allowMultipleSelections.of(!0),EditorView.lineWrapping,indentOnInput(),bracketMatching(),closeBrackets(),autocompletion(),rectangularSelection(),highlightActiveLine(),drawSelection(),search(),keymap.of([...closeBracketsKeymap,...defaultKeymap,...upgradeSearchKeyMap,...historyKeymap,...foldKeymap,...autoComplete,...completionKeymap,indentWithTab]),abstractTheme,hangingIndentPlugin,cssBraceHighlighter,unifiedCSSHighlighter,cssSelectorHighlighter,syntaxHighlighting(myHighlightStyle,{fallback:!0}),css(),EditorView.domEventHandlers({dragover:(event,view)=>{event.preventDefault()},drop:(event,view)=>(event.preventDefault(),!0)})],numberView||(extensionArr=[highlightSpecialChars(),dist_history(),dropCursor(),EditorState.allowMultipleSelections.of(!0),indentOnInput(),bracketMatching(),closeBrackets(),autocompletion(),rectangularSelection(),highlightActiveLine(),drawSelection(),search(),keymap.of([...closeBracketsKeymap,...defaultKeymap,...upgradeSearchKeyMap,...historyKeymap,...foldKeymap,...autoComplete,...completionKeymap,indentWithTab]),abstractTheme,hangingIndentPlugin,cssBraceHighlighter,unifiedCSSHighlighter,cssSelectorHighlighter,syntaxHighlighting(myHighlightStyle,{fallback:!0}),css(),EditorView.domEventHandlers({dragover:(event,view)=>{event.preventDefault()},drop:(event,view)=>(event.preventDefault(),!0)})]),void 0!==option&&option.events&&(extensionArr=[...extensionArr,option.events]),state=EditorState.create({doc:initialContent,extensions:extensionArr})}else{if("html-mini"!==mode)throw new Error("invalid mode");{const angleBracketMark=Decoration.mark({class:"cm-angle-bracket"}),angleBracketHighlighter=ViewPlugin.fromClass(class{decorations;constructor(view){this.decorations=this.buildDecorations(view)}update=update=>{(update.docChanged||update.viewportChanged)&&(this.decorations=this.buildDecorations(update.view))};buildDecorations=view=>{const builder=new RangeSetBuilder,regex=/(<\/?|>|\/[ ]*>)/g;let match;for(const{from,to}of view.visibleRanges){const text=view.state.doc.sliceString(from,to);for(regex.lastIndex=0;null!==(match=regex.exec(text));){const matchText=match[0],matchStart=from+match.index,matchEnd=matchStart+matchText.length;try{builder.add(matchStart,matchEnd,angleBracketMark)}catch{}0===matchText.length&&regex.lastIndex===match.index&&regex.lastIndex++}}return builder.finish()}},{decorations:v=>v.decorations}),attrQuoteMark=Decoration.mark({class:"cm-attr-quote"}),attrQuoteHighlighter=ViewPlugin.fromClass(class{decorations;constructor(view){this.decorations=this.buildDecorations(view)}update=update=>{(update.docChanged||update.viewportChanged)&&(this.decorations=this.buildDecorations(update.view))};buildDecorations=view=>{const builder=new RangeSetBuilder,tree=dist_syntaxTree(view.state);for(const{from,to}of view.visibleRanges)tree.iterate({from,to,enter:nodeRef=>{if("AttributeValue"===nodeRef.name){const nodeFrom=nodeRef.from,nodeTo=nodeRef.to;if(nodeTo>nodeFrom){const firstChar=view.state.doc.sliceString(nodeFrom,nodeFrom+1),lastChar=view.state.doc.sliceString(nodeTo-1,nodeTo);'"'===firstChar&&builder.add(nodeFrom,nodeFrom+1,attrQuoteMark),'"'===lastChar&&nodeTo>nodeFrom+1&&builder.add(nodeTo-1,nodeTo,attrQuoteMark)}}}});return builder.finish()}},{decorations:v=>v.decorations}),attrNameMark=Decoration.mark({class:"cm-attribute-name"}),attrNameHighlighter=ViewPlugin.fromClass(class{decorations;constructor(view){this.decorations=this.buildDecorations(view)}update=update=>{(update.docChanged||update.viewportChanged)&&(this.decorations=this.buildDecorations(update.view))};buildDecorations=view=>{const builder=new RangeSetBuilder,tree=dist_syntaxTree(view.state);for(const{from,to}of view.visibleRanges)tree.iterate({from,to,enter:nodeRef=>{if("AttributeName"===nodeRef.name){const nodeFrom=nodeRef.from,nodeTo=nodeRef.to;builder.add(nodeFrom,nodeTo,attrNameMark)}}});return builder.finish()}},{decorations:v=>v.decorations});extensionArr=[lineNumbers(),highlightActiveLineGutter(),highlightSpecialChars(),dist_history(),foldGutter(),dropCursor(),EditorState.allowMultipleSelections.of(!0),EditorView.lineWrapping,indentOnInput(),bracketMatching(),closeBrackets(),autocompletion(),rectangularSelection(),highlightActiveLine(),drawSelection(),search(),keymap.of([...closeBracketsKeymap,...defaultKeymap,...upgradeSearchKeyMap,...historyKeymap,...foldKeymap,...autoComplete,...completionKeymap,indentWithTab]),abstractTheme,angleBracketHighlighter,attrQuoteHighlighter,attrNameHighlighter,hangingIndentPlugin,preventDefaultClickHandler,Prec.highest(saveKeymap),syntaxHighlighting(myHighlightStyle,{fallback:!0}),html()],void 0!==option&&option.events&&(extensionArr=[...extensionArr,option.events]),state=EditorState.create({doc:initialContent,extensions:extensionArr})}}return view=new EditorView({state,parent:editorMother}),"html"===mode?this.htmlView=view:"css"===mode&&(this.cssView=view),"html"!==mode&&"css"!==mode||window.setTimeout(()=>{this.htmlTong.querySelector(".cm-gutters").addEventListener("mouseup",event=>{const view=instance.htmlView;if(null!==event.target.closest(".cm-gutter.cm-lineNumbers")){const docPos=view.posAtCoords({x:event.clientX,y:event.clientY});if(null!==docPos){const line=view.state.doc.lineAt(docPos);setTimeout(()=>{instance.dispatchSelection([],line.from,line.to,view)},0)}}})},500),view}catch(e){throw console.log(e),new Error(e.message)}};cssUpdate=()=>{const{totalContents,ea,loadingRun,media}=this;let updateCssString;totalContents.style.overflow="hidden",document.body.style.position="relative",updateCssString='\n      html {\n        font-size: 16px;\n        font-family: "redditmono", "pretendard";\n      }\n      * {\n        transition:all 0s;\n        font-family: "redditmono", "pretendard";\n      }\n      body, div {\n        font-size: 16px;\n        font-family: "redditmono", "pretendard";\n      }\n    ';document.querySelector("style").insertAdjacentHTML("beforeend",'\n      html {\n        font-size: 16px;\n        font-family: "redditmono", "pretendard";\n      }\n      * {\n        transition:all 0s;\n        font-family: "redditmono", "pretendard";\n      }\n      body, div {\n        font-size: 16px;\n        font-family: "redditmono", "pretendard";\n      }\n    ')};transformHelperPopup=()=>{this.back;const{colorChip,svgMaker:localSvgMaker,binaryPath}=PathAnimator,{withOut,percent,promptPopup,contextmenuPopup,transformCss,selectByQuery,setDomColor,markdownBlocks,linkToString,hangulToEnglish,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();return new Promise(async(resolve,reject)=>{try{let cancelBack,whiteBase,contentsPaddingBottom,whiteBaseRadius,tongMargin,tongMarginTop,boxWidth,whiteCloseEvent,topOuterMargin,cssBase,gap,cssBlockHeight,titleSize,titleWeight,titleMarginBottom,innerCssBoxBorderRadius,visualPaddingBottom,editorInnerMargin,fourView,supportBaseWidth,supportButtonHeight,supportButtonSize,supportButtonWeight,supportButtonBorderRadius,forceBoxWidthBoo,titleWordSpacing,middleTitleSize,middleTitleWeight,middleTitlePaddingRight,translateMiddleWidth,originMiddleWidth,whiteInputHeight,whiteInputBorderRadius,originBox,originChildren,originValueMatrix,valueSize,valueWeight,black,valueCommandOut,transformValueGroupClassNameArr,finalTransformString,finalTransformOrigin,tongHeight;finalTransformString="",finalTransformOrigin="",contentsPaddingBottom=mediaNumber(140,130,120,100,16),whiteBaseRadius=mediaNumber(15,15,15,15,3),tongMargin=mediaNumber(30,28,26,22,5),tongMarginTop=mediaNumber(26,24,20,18,5),boxWidth=mediaNumber(1400,1060,840,720,80),gap=mediaNumber(8,8,7,6,1.5),topOuterMargin=mediaNumber(70,70,64,60,16),window.innerHeight-2*topOuterMargin<900&&(topOuterMargin=mediaNumber(45,45,40,36,12),tongMargin=mediaNumber(24,24,22,20,5),tongMarginTop=mediaNumber(20,20,18,16,5),gap=mediaNumber(7,7,6,5,1.5)),tongHeight=mediaNumber(640,640,620,600,60),cssBlockHeight=(window.innerHeight-2*topOuterMargin-(tongMargin+tongMarginTop)-2*gap)/2,titleSize=mediaNumber(15,13.5,12.5,11,3),titleWeight=mediaNumber(800,800,800,800,800),titleMarginBottom=mediaNumber(5,4.5,4,3,1),innerCssBoxBorderRadius=mediaNumber(8,8,7,7,2),visualPaddingBottom=mediaNumber(200,180,160,140,40),editorInnerMargin=mediaNumber(16,16,14,12,1),titleWordSpacing=mediaNumber(-4,-4,-4,-3,-3),middleTitleSize=mediaNumber(13,12,11,10,3),middleTitleWeight=mediaNumber(600,600,600,600,600),middleTitlePaddingRight=mediaNumber(10,10,9,8,2),translateMiddleWidth=mediaNumber(66,66,64,58,2),originMiddleWidth=mediaNumber(56,56,54,42,4),whiteInputHeight=mediaNumber(26,26,25,24,2),whiteInputBorderRadius=mediaNumber(8,8,7,7,2),valueSize=mediaNumber(12,11,10.5,9,2.8),valueWeight=mediaNumber(500,500,500,500,500),supportBaseWidth=mediaNumber(132,132,128,128,11),supportButtonHeight=mediaNumber(32,32,31,31,2),supportButtonSize=mediaNumber(12,12,11,11,3),supportButtonWeight=mediaNumber(500,500,500,500,500),supportButtonBorderRadius=mediaNumber(5,5,5,4,1),fourView=[],forceBoxWidthBoo=!1,forceBoxWidthBoo=window.innerWidth-2*topOuterMargin>boxWidth,black=colorChip.darkDarkBlack,transformValueGroupClassNameArr=["originValueGroupClassNameArr","translateValueGroupClassNameArr","scaleValueGroupClassNameArr","rotateValueGroupClassNameArr","skewValueGroupClassNameArr"],whiteCloseEvent=async e=>{const motherArr=[...document.querySelectorAll(".cssTransformPopupClassName")];if(motherArr.length>1){const[cancel,whiteBase]=motherArr.map(d=>d);cancel.style.animation="justfadeoutsmall 0.3s ease forwards",whiteBase.style.animation="fadedown 0.3s ease forwards",setQueue(()=>{let thisFinalString;removeByClass("cssTransformPopupClassName"),thisFinalString="",""!==finalTransformOrigin.trim()&&(thisFinalString+="transform-origin: "+finalTransformOrigin.trim()+";\n"),""!==finalTransformString.trim()&&(thisFinalString+="transform: "+finalTransformString.trim()+";\n"),resolve(thisFinalString)},301)}},cancelBack=createAbstract({mother:totalContents,class:["cssTransformPopupClassName"],event:{click:whiteCloseEvent},style:{position:"fixed",top:0,left:0,width:withOut(0),height:withOut(0),opacity:0,animation:"justfadeinsmall 0.4s ease forwards",background:colorExtended.black,zIndex:150}}),whiteBase=createAbstract({mother:totalContents,class:["cssTransformPopupClassName"],style:{position:"fixed",width:forceBoxWidthBoo?boxWidth:withOut(2*topOuterMargin,"px"),height:tongHeight,top:withOut(50,tongHeight/2,"px"),left:forceBoxWidthBoo?withOut(50,boxWidth/2,"px"):pixelUnit(topOuterMargin),borderRadius:whiteBaseRadius,background:colorExtended.gray1,animation:"fadeuporiginal 0.5s ease forwards",zIndex:150,flexDirection:"column",overflow:"hidden"},child:{style:{display:"block",width:withOut(0),height:withOut(0)},child:{style:{display:"flex",flexDirection:"column",width:withOut(2*tongMargin),height:withOut(tongMarginTop+tongMargin),paddingLeft:tongMargin,paddingRight:tongMargin,paddingTop:tongMarginTop,paddingBottom:tongMargin}}}}).children[0],whiteBase=whiteBase.children[0],cssBase=createAbstract({mother:whiteBase,style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr",rowGap:2*gap,columnGap:2.5*gap,flexGrow:0,flexShrink:0,marginBottom:1.5*gap}});const getFinalTransform=async()=>{const[originXDom]=selectByQuery(".cssTransformValueBoxClassName[kind=origin-x]"),[originYDom]=selectByQuery(".cssTransformValueBoxClassName[kind=origin-y]"),[translateXDom]=selectByQuery(".cssTransformValueBoxClassName[kind=translate-x]"),[translateYDom]=selectByQuery(".cssTransformValueBoxClassName[kind=translate-y]"),[scaleXDom]=selectByQuery(".cssTransformValueBoxClassName[kind=scale-x]"),[scaleYDom]=selectByQuery(".cssTransformValueBoxClassName[kind=scale-y]"),[skewXDom]=selectByQuery(".cssTransformValueBoxClassName[kind=skew-x]"),[skewYDom]=selectByQuery(".cssTransformValueBoxClassName[kind=skew-y]"),[rotateDom]=selectByQuery(".cssTransformValueBoxClassName[kind=rotate-plus]"),scaleBoo=scaleXDom.textContent?.trim()===scaleYDom.textContent?.trim(),skewBoo=skewXDom.textContent?.trim()===skewYDom.textContent?.trim();let thisTransform,thisOrigin;thisOrigin=originXDom.textContent?.trim()+" "+originYDom.textContent?.trim(),thisTransform=transformCss(scaleBoo&&skewBoo?{x:translateXDom.textContent?.trim(),y:translateYDom.textContent?.trim(),scale:Number(scaleXDom.textContent?.trim()),rotation:Number(String(rotateDom.textContent?.trim()).replace(/[^0-9\.\-]/gi,"")),skew:Number(String(skewXDom.textContent?.trim().replace(/[^0-9\.\-]/gi,"")))}:scaleBoo?{x:translateXDom.textContent?.trim(),y:translateYDom.textContent?.trim(),scale:Number(scaleXDom.textContent?.trim()),rotation:Number(String(rotateDom.textContent?.trim()).replace(/[^0-9\.\-]/gi,"")),skewX:Number(String(skewXDom.textContent?.trim().replace(/[^0-9\.\-]/gi,""))),skewY:Number(String(skewYDom.textContent?.trim().replace(/[^0-9\.\-]/gi,"")))}:skewBoo?{x:translateXDom.textContent?.trim(),y:translateYDom.textContent?.trim(),scaleX:Number(scaleXDom.textContent?.trim()),scaleY:Number(scaleYDom.textContent?.trim()),rotation:Number(String(rotateDom.textContent?.trim()).replace(/[^0-9\.\-]/gi,"")),skew:Number(String(skewXDom.textContent?.trim().replace(/[^0-9\.\-]/gi,"")))}:{x:translateXDom.textContent?.trim(),y:translateYDom.textContent?.trim(),scaleX:Number(scaleXDom.textContent?.trim()),scaleY:Number(scaleYDom.textContent?.trim()),rotation:Number(String(rotateDom.textContent?.trim()).replace(/[^0-9\.\-]/gi,"")),skewX:Number(String(skewXDom.textContent?.trim().replace(/[^0-9\.\-]/gi,""))),skewY:Number(String(skewYDom.textContent?.trim().replace(/[^0-9\.\-]/gi,"")))}),finalTransformOrigin=thisOrigin,finalTransformString=thisTransform,setTimeout(()=>{const[target]=selectByClass("finalApplyTransformDomClassName");""===finalTransformOrigin&&(finalTransformOrigin="50% 50%"),target.style.transformOrigin=finalTransformOrigin,target.style.transform=finalTransformString})};originValueMatrix=[[media[0]||media[1]?"시작":"1","0% 0%"],[media[0]||media[1]?"중앙":"2","50% 50%"],[media[0]||media[1]?"끝":"3","100% 100%"]],originChildren=[...variableArray(originValueMatrix.length).map(i=>({attribute:{value:originValueMatrix[i][1],toggle:1===i?"on":"off"},event:{click:async e=>{const self=e.currentTarget,siblings=selectByClass("cssTransformOriginBoxClassName"),value=(self.getAttribute("toggle"),self.mustAttribute("value")),targets=[...document.querySelectorAll(transformValueGroupClassNameArr.map(s=>"."+s).join(", "))].map(d=>d);targets.sort((a,b)=>transformValueGroupClassNameArr.findIndex(s=>a.classList.contains(s))-transformValueGroupClassNameArr.findIndex(s=>b.classList.contains(s)));for(let d of siblings)d.mustAttribute("value")===value?(d.style.background=colorChip.mint,setDomColor(d.children[0],colorChip.white),d.children[0].style.color=colorChip.white,d.setAttribute("toggle","on")):(d.style.background=colorChip.white,setDomColor(d.children[0],colorChip.deactive),d.setAttribute("toggle","off"));for(let index=0;index<targets.length;index++){const target=targets[index];if(0===index){const[x,y]=[...target.querySelectorAll(".cssTransformValueBoxClassName")];x.textContent=value.split(" ")[0].trim(),y.textContent=value.split(" ")[1].trim()}}setTimeout(async()=>{await getFinalTransform()},0)}},class:["cssTransformOriginBoxClassName"],style:{display:"inline-flex",height:withOut(0),borderRadius:whiteInputBorderRadius,transition:"all 0.3s ease",background:1===i?colorChip.mint:colorChip.white,justifyContent:"center",alignItems:"center",cursor:"pointer"},child:{event:{selectstart:e=>e.preventDefault()},text:originValueMatrix[i][0],style:{transition:"all 0.3s ease",fontSize:valueSize,fontWeight:valueWeight,fontColor:1===i?colorChip.white:colorChip.deactive}}}))],originBox={style:{height:whiteInputHeight,borderRadius:whiteInputBorderRadius,flexGrow:1,flexShrink:1,display:"inline-grid",gridTemplateColumns:"1fr 1fr 1fr",gap:gap/3},children:originChildren},valueCommandOut=(kind,value)=>({attribute:{kind,value,toggle:["translate","scale-x","scale-y"].includes(kind)?"off":"on"},event:{click:async e=>{const self=e.currentTarget,kind=self.mustAttribute("kind");self.mustAttribute("kind"),self.mustAttribute("toggle");let promptResult,thisValue;if(promptResult=await promptPopup("해당 값을 숫자로만 적어주세요!"),null!==promptResult&&(thisValue=Number(promptResult.replace(/[^0-9\-\.]/gi,"")),!Number.isNaN(thisValue))){const[textDom]=selectByQuery(".cssTransformValueBoxClassName[kind="+kind+"]");if("origin-x"===kind||"origin-y"===kind)textDom.textContent=String(thisValue)+"%";else if("translate-x"===kind||"translate-y"===kind){const[sumDom]=selectByQuery(".cssTransformValueBoxClassName[kind=translate]");textDom.textContent=String(thisValue)+"rem",sumDom.parentElement.setAttribute("toggle","off"),setDomColor(sumDom,colorChip.deactive);const[xDom]=selectByQuery(".cssTransformValueBoxClassName[kind=translate-x]"),[yDom]=selectByQuery(".cssTransformValueBoxClassName[kind=translate-y]");xDom.parentElement.setAttribute("toggle","on"),setDomColor(xDom,black),yDom.parentElement.setAttribute("toggle","on"),setDomColor(yDom,black)}else if("rotate-plus"===kind||"rotate-minus"===kind){const[reverseDom]=selectByQuery(".cssTransformValueBoxClassName[kind="+("rotate-plus"===kind?"rotate-minus":"rotate-plus")+"]");thisValue<0?(textDom.textContent=String(thisValue)+"deg",reverseDom.textContent=String(Math.abs(thisValue))+"deg"):(textDom.textContent=String(thisValue)+"deg",reverseDom.textContent=String(-1*thisValue)+"deg")}else if("scale-x"===kind||"scale-y"===kind){const[sumDom]=selectByQuery(".cssTransformValueBoxClassName[kind=scale]");textDom.textContent=String(thisValue)+"",sumDom.parentElement.setAttribute("toggle","off"),setDomColor(sumDom,colorChip.deactive);const[xDom]=selectByQuery(".cssTransformValueBoxClassName[kind=scale-x]"),[yDom]=selectByQuery(".cssTransformValueBoxClassName[kind=scale-y]");xDom.parentElement.setAttribute("toggle","on"),setDomColor(xDom,black),yDom.parentElement.setAttribute("toggle","on"),setDomColor(yDom,black)}else if("skew-x"===kind||"skew-y"===kind)textDom.textContent=String(thisValue)+"deg";else if("translate"===kind){const[xDom]=selectByQuery(".cssTransformValueBoxClassName[kind=translate-x]"),[yDom]=selectByQuery(".cssTransformValueBoxClassName[kind=translate-y]");textDom.textContent=String(thisValue)+"rem",textDom.parentElement.setAttribute("toggle","on"),setDomColor(textDom,black),xDom.textContent=String(thisValue)+"rem",xDom.parentElement.setAttribute("toggle","off"),setDomColor(xDom,colorChip.deactive),yDom.textContent=String(thisValue)+"rem",yDom.parentElement.setAttribute("toggle","off"),setDomColor(yDom,colorChip.deactive)}else if("scale"===kind){const[xDom]=selectByQuery(".cssTransformValueBoxClassName[kind=scale-x]"),[yDom]=selectByQuery(".cssTransformValueBoxClassName[kind=scale-y]");textDom.textContent=String(thisValue)+"",textDom.parentElement.setAttribute("toggle","on"),setDomColor(textDom,black),xDom.textContent=String(thisValue)+"",xDom.parentElement.setAttribute("toggle","off"),setDomColor(xDom,colorChip.deactive),yDom.textContent=String(thisValue)+"",yDom.parentElement.setAttribute("toggle","off"),setDomColor(yDom,colorChip.deactive)}setTimeout(async()=>{await getFinalTransform()},0)}}},style:{height:whiteInputHeight,borderRadius:whiteInputBorderRadius,flexGrow:1,flexShrink:1,background:colorChip.white,display:"inline-flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},child:{attribute:{kind,value},class:["cssTransformValueBoxClassName"],event:{selectstart:e=>e.preventDefault()},text:value,style:{fontSize:valueSize,fontWeight:valueWeight,fontColor:["translate","scale-x","scale-y"].includes(kind)?colorChip.deactive:black}}}),createAbstract({mother:cssBase,class:[transformValueGroupClassNameArr[0]],style:{display:"flex",flexDirection:"column",width:withOut(0)},children:[{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:gap},child:{text:"기준점 (origin)",style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.darkDarkBlack,wordSpacing:titleWordSpacing}}},{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:gap/2},children:[{text:"사전 정의",style:{fontSize:middleTitleSize,fontWeight:middleTitleWeight,color:colorChip.darkDarkBlack,flexGrow:0,flexShrink:0,paddingRight:middleTitlePaddingRight,width:translateMiddleWidth,wordSpacing:titleWordSpacing}},originBox]},{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:gap/2},children:[{text:"가로 방향 %",style:{fontSize:middleTitleSize,fontWeight:middleTitleWeight,color:colorChip.darkDarkBlack,flexGrow:0,flexShrink:0,paddingRight:middleTitlePaddingRight,width:translateMiddleWidth,wordSpacing:titleWordSpacing}},valueCommandOut("origin-x","50%")]},{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:gap/2},children:[{text:"세로 방향 %",style:{fontSize:middleTitleSize,fontWeight:middleTitleWeight,color:colorChip.darkDarkBlack,flexGrow:0,flexShrink:0,paddingRight:middleTitlePaddingRight,width:translateMiddleWidth,wordSpacing:titleWordSpacing}},valueCommandOut("origin-y","50%")]}]}),createAbstract({mother:cssBase,class:[transformValueGroupClassNameArr[1]],style:{display:"flex",flexDirection:"column",width:withOut(0)},children:[{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:gap},child:{text:"이동 (translate)",style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.darkDarkBlack,wordSpacing:titleWordSpacing}}},{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:gap/2},children:[{text:"대각선 축",style:{fontSize:middleTitleSize,fontWeight:middleTitleWeight,color:colorChip.darkDarkBlack,flexGrow:0,flexShrink:0,paddingRight:middleTitlePaddingRight,width:originMiddleWidth,wordSpacing:titleWordSpacing}},valueCommandOut("translate","0rem")]},{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:gap/2},children:[{text:"x축",style:{fontSize:middleTitleSize,fontWeight:middleTitleWeight,color:colorChip.darkDarkBlack,flexGrow:0,flexShrink:0,paddingRight:middleTitlePaddingRight,width:originMiddleWidth,wordSpacing:titleWordSpacing}},valueCommandOut("translate-x","0rem")]},{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:gap/2},children:[{text:"y축",style:{fontSize:middleTitleSize,fontWeight:middleTitleWeight,color:colorChip.darkDarkBlack,flexGrow:0,flexShrink:0,paddingRight:middleTitlePaddingRight,width:originMiddleWidth,wordSpacing:titleWordSpacing}},valueCommandOut("translate-y","0rem")]}]}),createAbstract({mother:cssBase,class:[transformValueGroupClassNameArr[2]],style:{display:"flex",flexDirection:"column",width:withOut(0)},children:[{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:gap},child:{text:"확대 축소 (scale)",style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.darkDarkBlack,wordSpacing:titleWordSpacing}}},{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:gap/2},children:[{text:"비율 유지",style:{fontSize:middleTitleSize,fontWeight:middleTitleWeight,color:colorChip.darkDarkBlack,flexGrow:0,flexShrink:0,paddingRight:middleTitlePaddingRight,width:originMiddleWidth,wordSpacing:titleWordSpacing}},valueCommandOut("scale","1")]},{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:gap/2},children:[{text:"가로 방향",style:{fontSize:middleTitleSize,fontWeight:middleTitleWeight,color:colorChip.darkDarkBlack,flexGrow:0,flexShrink:0,paddingRight:middleTitlePaddingRight,width:originMiddleWidth,wordSpacing:titleWordSpacing}},valueCommandOut("scale-x","1")]},{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:gap/2},children:[{text:"세로 방향",style:{fontSize:middleTitleSize,fontWeight:middleTitleWeight,color:colorChip.darkDarkBlack,flexGrow:0,flexShrink:0,paddingRight:middleTitlePaddingRight,width:originMiddleWidth,wordSpacing:titleWordSpacing}},valueCommandOut("scale-y","1")]}]}),createAbstract({mother:cssBase,class:[transformValueGroupClassNameArr[3]],style:{display:"flex",flexDirection:"column",width:withOut(0)},children:[{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:gap},child:{text:"회전 (rotate)",style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.darkDarkBlack,wordSpacing:titleWordSpacing}}},{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:gap/2},children:[{text:"기준점",style:{fontSize:middleTitleSize,fontWeight:middleTitleWeight,color:colorChip.darkDarkBlack,flexGrow:0,flexShrink:0,paddingRight:middleTitlePaddingRight,width:translateMiddleWidth,wordSpacing:titleWordSpacing}},originBox]},{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:gap/2},children:[{text:"시계 방향",style:{fontSize:middleTitleSize,fontWeight:middleTitleWeight,color:colorChip.darkDarkBlack,flexGrow:0,flexShrink:0,paddingRight:middleTitlePaddingRight,width:translateMiddleWidth,wordSpacing:titleWordSpacing}},valueCommandOut("rotate-plus","0deg")]},{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:gap/2},children:[{text:"반시계 방향",style:{fontSize:middleTitleSize,fontWeight:middleTitleWeight,color:colorChip.darkDarkBlack,flexGrow:0,flexShrink:0,paddingRight:middleTitlePaddingRight,width:translateMiddleWidth,wordSpacing:titleWordSpacing}},valueCommandOut("rotate-minus","-0deg")]}]}),createAbstract({mother:cssBase,class:[transformValueGroupClassNameArr[4]],style:{display:"flex",flexDirection:"column",width:withOut(0)},children:[{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:gap},child:{text:"기울이기 (skew)",style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.darkDarkBlack,wordSpacing:titleWordSpacing}}},{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:gap/2},children:[{text:"기준점",style:{fontSize:middleTitleSize,fontWeight:middleTitleWeight,color:colorChip.darkDarkBlack,flexGrow:0,flexShrink:0,paddingRight:middleTitlePaddingRight,width:originMiddleWidth,wordSpacing:titleWordSpacing}},originBox]},{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:gap/2},children:[{text:"x축",style:{fontSize:middleTitleSize,fontWeight:middleTitleWeight,color:colorChip.darkDarkBlack,flexGrow:0,flexShrink:0,paddingRight:middleTitlePaddingRight,width:originMiddleWidth,wordSpacing:titleWordSpacing}},valueCommandOut("skew-x","0deg")]},{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:gap/2},children:[{text:"y축",style:{fontSize:middleTitleSize,fontWeight:middleTitleWeight,color:colorChip.darkDarkBlack,flexGrow:0,flexShrink:0,paddingRight:middleTitlePaddingRight,width:originMiddleWidth,wordSpacing:titleWordSpacing}},valueCommandOut("skew-y","0deg")]}]}),createAbstract({mother:whiteBase,style:{display:"flex",width:withOut(0),flexGrow:1,flexShrink:1,borderRadius:whiteInputBorderRadius,background:colorChip.white,justifyContent:"center",alignItems:"center",paddingTop:tongMargin/2,paddingBottom:tongMargin/2},child:{style:{display:"flex",width:withOut(tongMargin/2*2),height:withOut(tongMargin/2*2),borderRadius:whiteInputBorderRadius,background:colorChip.white,justifyContent:"center",alignItems:"center",border:"1px dashed "+colorChip.mint,boxSizing:"border-box",flexGrow:1,flexShrink:1,transition:"all 0.5s ease"},child:{previous:{style:{width:String(70)+"%",height:String(50)+"%",borderRadius:whiteInputBorderRadius,background:colorChip.transparent,display:"flex",flexGrow:0,flexShrink:0,justifyContent:"center",alignItems:"center",border:"1px dashed "+colorChip.mint,boxSizing:"border-box",position:"absolute",transformOrigin:"50% 50%",transform:"translate(-50%, -50%)",left:String(50)+"%",top:String(50)+"%"},child:{text:"original",style:{fontSize:1.3*titleSize,fontWeight:400,fontColor:colorChip.mint}}},class:["finalApplyTransformDomClassName"],style:{width:String(70)+"%",height:String(50)+"%",borderRadius:whiteInputBorderRadius,background:colorChip.gradientTrasparentMint,display:"flex",flexGrow:0,flexShrink:0,justifyContent:"center",boxSizing:"border-box",alignItems:"center",transition:"transform 0.5s ease"},child:{text:"contents",style:{fontSize:1.3*titleSize,fontWeight:400,fontColor:colorChip.white,transition:"transform 0.5s ease"}}}}})}catch(e){console.log(e),reject(e)}})};filterHelperPopup=()=>{this.back;const{colorChip,svgMaker:localSvgMaker,binaryPath}=PathAnimator,{withOut,percent,promptPopup,contextmenuPopup,transformCss,colorParsing,colorPicker,selectByQuery,setDomColor,markdownBlocks,linkToString,hangulToEnglish,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();return new Promise(async(resolve,reject)=>{try{let cancelBack,whiteBase,contentsPaddingBottom,whiteBaseRadius,tongMargin,tongMarginTop,boxWidth,whiteCloseEvent,topOuterMargin,cssBase,gap,cssBlockHeight,titleSize,titleWeight,titleMarginBottom,innerCssBoxBorderRadius,visualPaddingBottom,editorInnerMargin,fourView,supportBaseWidth,supportButtonHeight,supportButtonSize,supportButtonWeight,supportButtonBorderRadius,forceBoxWidthBoo,titleWordSpacing,middleTitleSize,middleTitleWeight,middleTitlePaddingRight,translateMiddleWidth,originMiddleWidth,whiteInputHeight,whiteInputBorderRadius,valueSize,valueWeight,black,valueCommandOut,transformValueGroupClassNameArr,tongHeight,finalBackground,finalBorder,finalBorderRadius,finalMixBlend,finalBackdrop,finalShadow,finalGradient,ratio0,ratio1;finalBackground="",finalBorder="",finalBorderRadius="",finalMixBlend="",finalBackdrop="",finalShadow="",finalGradient="",ratio0=mediaNumber(.97,.9,.8,.8,.4),ratio1=mediaNumber(1.25,1.2,1.1,1,.4),contentsPaddingBottom=mediaNumber(140,130,120,100,16),whiteBaseRadius=mediaNumber(15,15,15,15,3),tongMargin=mediaNumber(30,28,26,22,5),tongMarginTop=mediaNumber(26,24,20,18,5),boxWidth=mediaNumber(1400,1060,840,720,80),gap=mediaNumber(8,8,7,6,1.5),topOuterMargin=mediaNumber(70,70,64,60,16),window.innerHeight-2*topOuterMargin<900&&(topOuterMargin=mediaNumber(45,45,40,36,12),tongMargin=mediaNumber(24,24,22,20,5),tongMarginTop=mediaNumber(20,20,18,16,5),gap=mediaNumber(7,7,6,5,1.5)),tongHeight=mediaNumber(640,640,620,600,60),cssBlockHeight=(window.innerHeight-2*topOuterMargin-(tongMargin+tongMarginTop)-2*gap)/2,titleSize=mediaNumber(15,13.5,12.5,11,3),titleWeight=mediaNumber(800,800,800,800,800),titleMarginBottom=mediaNumber(5,4.5,4,3,1),innerCssBoxBorderRadius=mediaNumber(8,8,7,7,2),visualPaddingBottom=mediaNumber(200,180,160,140,40),editorInnerMargin=mediaNumber(16,16,14,12,1),titleWordSpacing=mediaNumber(-4,-4,-4,-3,-3),middleTitleSize=mediaNumber(13,12,11,10,3),middleTitleWeight=mediaNumber(600,600,600,600,600),middleTitlePaddingRight=mediaNumber(10,10,9,8,2),translateMiddleWidth=mediaNumber(60,60,54,42,2),originMiddleWidth=mediaNumber(42,38,32,26,4),whiteInputHeight=mediaNumber(26,26,25,24,2),whiteInputBorderRadius=mediaNumber(8,8,7,7,2),valueSize=mediaNumber(12,11,10.5,9,2.8),valueWeight=mediaNumber(500,500,500,500,500),supportBaseWidth=mediaNumber(132,132,128,128,11),supportButtonHeight=mediaNumber(32,32,31,31,2),supportButtonSize=mediaNumber(12,12,11,11,3),supportButtonWeight=mediaNumber(500,500,500,500,500),supportButtonBorderRadius=mediaNumber(5,5,5,4,1),fourView=[],forceBoxWidthBoo=!1,forceBoxWidthBoo=window.innerWidth-2*topOuterMargin>boxWidth,black=colorChip.darkDarkBlack,transformValueGroupClassNameArr=["backgroundValueGroupClassNameArr","shadowValueGroupClassNameArr","gradientGroupClassNameArr","blendValueGroupClassNameArr","backdropValueGroupClassNameArr"],whiteCloseEvent=async e=>{const motherArr=[...document.querySelectorAll(".cssFilterPopupClassName")];if(motherArr.length>1){const[cancel,whiteBase]=motherArr.map(d=>d);cancel.style.animation="justfadeoutsmall 0.3s ease forwards",whiteBase.style.animation="fadedown 0.3s ease forwards",setQueue(()=>{let thisFinalString;removeByClass("cssFilterPopupClassName"),thisFinalString="",""!==finalBackground.trim()&&(thisFinalString+="background: "+finalBackground.trim()+";\n"),""!==finalBorder.trim()&&(thisFinalString+="border: "+finalBorder.trim()+";\n"),""!==finalBorderRadius.trim()&&(thisFinalString+="border-radius: "+finalBorderRadius.trim()+";\n"),""!==finalMixBlend.trim()&&(thisFinalString+="mix-blend-mode: "+finalMixBlend.trim()+";\n"),""!==finalBackdrop.trim()&&(thisFinalString+="backdrop-filter: "+finalBackdrop.trim()+";\n"),""!==finalShadow.trim()&&(thisFinalString+="box-shadow: "+finalShadow.trim()+";\n"),""!==finalGradient.trim()&&(thisFinalString=thisFinalString.replace(/background\: [^;]+;\n/gis,""),thisFinalString+="background: "+finalGradient.trim()+";\n"),resolve(thisFinalString)},301)}},cancelBack=createAbstract({mother:totalContents,class:["cssFilterPopupClassName"],event:{click:whiteCloseEvent},style:{position:"fixed",top:0,left:0,width:withOut(0),height:withOut(0),opacity:0,animation:"justfadeinsmall 0.4s ease forwards",background:colorExtended.black,zIndex:150}}),whiteBase=createAbstract({mother:totalContents,class:["cssFilterPopupClassName"],style:{position:"fixed",width:forceBoxWidthBoo?boxWidth:withOut(2*topOuterMargin,"px"),height:tongHeight,top:withOut(50,tongHeight/2,"px"),left:forceBoxWidthBoo?withOut(50,boxWidth/2,"px"):pixelUnit(topOuterMargin),borderRadius:whiteBaseRadius,background:colorExtended.gray1,animation:"fadeuporiginal 0.5s ease forwards",zIndex:150,flexDirection:"column",overflow:"hidden"},child:{style:{display:"block",width:withOut(0),height:withOut(0)},child:{style:{display:"flex",flexDirection:"column",width:withOut(2*tongMargin),height:withOut(tongMarginTop+tongMargin),paddingLeft:tongMargin,paddingRight:tongMargin,paddingTop:tongMarginTop,paddingBottom:tongMargin}}}}).children[0],whiteBase=whiteBase.children[0],cssBase=createAbstract({mother:whiteBase,style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr",rowGap:2*gap,columnGap:2.5*gap,flexGrow:0,flexShrink:0,marginBottom:1.5*gap}});const getFinalTransform=async()=>{setTimeout(()=>{const[target]=selectByClass("finalApplyFilterDomClassName");""!==finalBackground&&(target.style.background=finalBackground),""!==finalBorder&&(target.style.border=finalBorder),""!==finalBorderRadius&&(target.style.borderRadius=finalBorderRadius),""!==finalMixBlend&&(target.style.mixBlendMode="normal"===finalMixBlend?"":finalMixBlend),""!==finalBackdrop&&(target.style.backdropFilter="none"===finalBackdrop?"":finalBackdrop),""!==finalShadow&&(target.style.boxShadow=finalShadow),""!==finalGradient&&(target.style.background=finalGradient)})};valueCommandOut=(kind,value)=>({attribute:{kind,value,toggle:"on"},event:{click:async e=>{const self=e.currentTarget,kind=self.mustAttribute("kind");self.mustAttribute("kind"),self.mustAttribute("toggle");let promptResult,promptResult2,promptResult3,promptResult4;if(promptResult=null,promptResult2="",promptResult3="",promptResult4="","background-color"===kind){const thisBackground=""===finalBackground?colorChip.mintSharp:colorParsing(finalBackground.split(",").map(s=>s.replace(/[^0-9\-\.]/gi,"")).map(s=>Number(s)).slice(0,3));promptResult=await colorPicker("색상을 #000000 형태로 적어주세요!",thisBackground);const thisBackground2=""===finalBackground?"1":String(finalBackground.split(",").map(s=>s.replace(/[^0-9\-\.]/gi,"")).map(s=>Number(s)).at(-1));promptResult2=await promptPopup("투명도를 숫자의 형태로 적어주세요!","text",thisBackground2)}else if("background-opacity"===kind){const thisBackground=""===finalBackground?"0.9":String(finalBackground.split(",").map(s=>s.replace(/[^0-9\-\.]/gi,"")).map(s=>Number(s)).at(-1));promptResult=await promptPopup("투명도를 숫자의 형태로 적어주세요!","text",thisBackground)}else if("border"===kind){const thisBorder=""===finalBorder?"0px solid #000000":finalBorder;promptResult=await promptPopup("테두리의 설정을 올바르게 적어주세요!","text",thisBorder)}else if("border-radius"===kind){const thisBorder=""===finalBorderRadius?"0rem":finalBorderRadius;promptResult=await promptPopup("모서리 굴림 정도를 숫자로 적어주세요!","text",thisBorder)}else if("mix-blend"===kind)promptResult=await promptPopup("믹스 블랜드 모드를 선택해주세요!","select",["normal","multiply","screen","overlay","darken","lighten","color-burn","color-dodge","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"].join("$"));else if("backdrop"===kind)promptResult=await promptPopup("백드롭 필터를 선택해주세요!","select",["none","blur","brightness","contrast","grayscale","invert","lighten","saturate","sepia"].join("$")),"none"!==promptResult?(promptResult2=await promptPopup("필터 적용 정도를 숫자로 적어주세요!","text"),promptResult2="string"!=typeof promptResult2||Number.isNaN(Number(promptResult2.replace(/[^0-9\-\.]/gi,"")))?null:"blur"===promptResult?String(Number(promptResult2.replace(/[^0-9\-\.]/gi,"")))+"px":String(Number(promptResult2.replace(/[^0-9\-\.]/gi,"")))+"%"):promptResult2="";else if("shadow-color"===kind){const thisShadow=""===finalShadow?"#404040":/rgb\(/gi.test(finalShadow)?colorParsing(finalShadow.split(" ").slice(4)[0].split(",").map(s=>s.replace(/[^0-9\-\.]/gi,"")).map(s=>Number(s)).slice(0,3)):finalShadow.split(" ").slice(4)[0].trim();promptResult=await colorPicker("색상을 #000000 형태로 적어주세요!",thisShadow);const thisShadow2=""===finalShadow?"0px 0px 0px 0px":finalShadow.trim().split(" ").map(s=>s.trim()).filter(s=>""!==s).slice(0,4).join(" ");promptResult2=await promptPopup("0px 0px 0px 0px 형태로 적어주세요!","text",thisShadow2)}else if("shadow-xy"===kind){const thisShadow=""===finalShadow?"0px 0px 0px 0px":finalShadow.trim().split(" ").map(s=>s.trim()).filter(s=>""!==s).slice(0,4).join(" ");promptResult=await promptPopup("0px 0px 0px 0px 형태로 적어주세요!","text",thisShadow);const thisShadow2=""===finalShadow?"#404040":/rgb\(/gi.test(finalShadow)?colorParsing(finalShadow.split(" ").slice(4)[0].split(",").map(s=>s.replace(/[^0-9\-\.]/gi,"")).map(s=>Number(s)).slice(0,3)):finalShadow.split(" ").slice(4)[0].trim();promptResult2=await colorPicker("색상을 #000000 형태로 적어주세요!",thisShadow2)}else if(/^gradient/.test(kind))if(""===finalGradient)promptResult=await colorPicker("시작 색상을 #000000 형태로 적어주세요!","#0082D2"),promptResult2=await promptPopup("시작 색상 투명도를 숫자의 형태로 적어주세요!","text",String(.9)),promptResult3=await colorPicker("끝 색상을 #000000 형태로 적어주세요!","#00ABC9"),promptResult4=await promptPopup("끝 색상 투명도를 숫자의 형태로 적어주세요!","text",String(.8));else{const fromToArr=[];finalGradient.replace(/rgba\(([^\)]+)\)/gis,(match,p1)=>(fromToArr.push(p1.split(",").map(s=>s.trim()).filter(s=>""!==s).map(s=>String(Number(s.replace(/[^0-9\.\-]/gi,""))))),match));const fromColor=colorParsing(fromToArr[0].slice(0,3).map(s=>Number(s))),fromOpacity=fromToArr[0].at(-1),toColor=colorParsing(fromToArr[1].slice(0,3).map(s=>Number(s))),toOpacity=fromToArr[1].at(-1);promptResult=await colorPicker("시작 색상을 #000000 형태로 적어주세요!",fromColor),promptResult2=await promptPopup("시작 색상 투명도를 숫자의 형태로 적어주세요!","text",fromOpacity),promptResult3=await colorPicker("끝 색상을 #000000 형태로 적어주세요!",toColor),promptResult4=await promptPopup("끝 색상 투명도를 숫자의 형태로 적어주세요!","text",toOpacity)}if(null!==promptResult&&null!==promptResult2&&null!==promptResult3&&null!==promptResult4){if("background-color"===kind){if(/#?[0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F]/gi.test(promptResult.trim())&&!Number.isNaN(Number(promptResult2.replace(/[^0-9\-\.]/gi,"")))){const[textDom]=selectByQuery(".cssFilterValueBoxClassName[kind="+kind+"]"),[textDom2]=selectByQuery(".cssFilterValueBoxClassName[kind=background-opacity]"),backgroundString="#"+promptResult.trim().replace(/^#/gi,""),opacity=String(Number(promptResult2.replace(/[^0-9\-\.]/gi,""))),parsedColor=colorParsing(backgroundString);textDom.textContent=backgroundString,textDom2.textContent=opacity,finalBackground="rgba("+parsedColor.map(n=>String(n)).join(", ")+", "+opacity+")"}}else if("background-opacity"===kind){if(!Number.isNaN(Number(promptResult.replace(/[^0-9\-\.]/gi,"")))){const[textDom]=selectByQuery(".cssFilterValueBoxClassName[kind=background-color]"),[textDom2]=selectByQuery(".cssFilterValueBoxClassName[kind="+kind+"]"),opacity=String(Number(promptResult.replace(/[^0-9\-\.]/gi,""))),thisBackground=""===finalBackground?"rgba(255, 255, 255, "+opacity+")":finalBackground.replace(/,\s*[0-9\-\.]+\)/gis,", "+opacity+")"),backgroundSharp=""===finalBackground?colorChip.mintSharp:colorParsing(finalBackground.split(",").map(s=>s.replace(/[^0-9\-\.]/gi,"")).map(s=>Number(s)).slice(0,3));textDom.textContent=backgroundSharp,textDom2.textContent=opacity,finalBackground=thisBackground}}else if("border"===kind){if(/[0-9]+(rem|em|px)\s+[a-zA-Z0-9]+\s+#[0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F]/gis.test(promptResult.trim())){const[textDom]=selectByQuery(".cssFilterValueBoxClassName[kind="+kind+"]");promptResult=promptResult.trim().replace(/ \s+/gis," "),finalBorder=promptResult,textDom.textContent=finalBorder}}else if("border-radius"===kind){if(!Number.isNaN(Number(promptResult.replace(/[^0-9\-\.]/gi,"")))){const[textDom]=selectByQuery(".cssFilterValueBoxClassName[kind="+kind+"]");finalBorderRadius=String(Number(promptResult.replace(/[^0-9\-\.]/gi,"")))+"rem",textDom.textContent=finalBorderRadius}}else if("mix-blend"===kind){const[textDom]=selectByQuery(".cssFilterValueBoxClassName[kind="+kind+"]");finalMixBlend=promptResult,textDom.textContent=finalMixBlend}else if("backdrop"===kind){const[textDom]=selectByQuery(".cssFilterValueBoxClassName[kind="+kind+"]");"none"===promptResult?(textDom.textContent="none",finalBackdrop="none"):(finalBackdrop=promptResult+"("+promptResult2+")",textDom.textContent=finalBackdrop)}else if("shadow-color"===kind){if(/#?[0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F]/gi.test(promptResult.trim())&&/[0-9\.\-]+px\s+[0-9\.\-]+px\s+[0-9\.\-]+px\s+[0-9\.\-]+px/gis.test(promptResult2.trim())){const[textDom]=selectByQuery(".cssFilterValueBoxClassName[kind=shadow-color]"),[textDom2]=selectByQuery(".cssFilterValueBoxClassName[kind=shadow-xy]"),shadowColor=promptResult.trim(),shadowForce=promptResult2.trim().replace(/ \s+/gis," ");finalShadow=shadowForce+" "+shadowColor,textDom.textContent=shadowColor,textDom2.textContent=shadowForce}}else if("shadow-xy"===kind){if(/#?[0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F]/gi.test(promptResult2.trim())&&/[0-9\.\-]+px\s+[0-9\.\-]+px\s+[0-9\.\-]+px\s+[0-9\.\-]+px/gis.test(promptResult.trim())){const[textDom]=selectByQuery(".cssFilterValueBoxClassName[kind=shadow-color]"),[textDom2]=selectByQuery(".cssFilterValueBoxClassName[kind=shadow-xy]"),shadowColor=promptResult2.trim(),shadowForce=promptResult.trim().replace(/ \s+/gis," ");finalShadow=shadowForce+" "+shadowColor,textDom.textContent=shadowColor,textDom2.textContent=shadowForce}}else if(/^gradient/.test(kind)&&/#?[0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F]/gi.test(promptResult.trim())&&!Number.isNaN(Number(promptResult2.replace(/[^0-9\-\.]/gi,"")))&&/#?[0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F]/gi.test(promptResult3.trim())&&!Number.isNaN(Number(promptResult4.replace(/[^0-9\-\.]/gi,"")))){const[textDom]=selectByQuery(".cssFilterValueBoxClassName[kind=gradient-from]"),[textDom2]=selectByQuery(".cssFilterValueBoxClassName[kind=gradient-to]"),startColor="#"+promptResult.trim().replace(/^#/gi,""),startOpacity=String(Number(promptResult2.replace(/[^0-9\-\.]/gi,""))),startParsedColor=colorParsing(startColor),endColor="#"+promptResult3.trim().replace(/^#/gi,""),endOpacity=String(Number(promptResult4.replace(/[^0-9\-\.]/gi,""))),endParsedColor=colorParsing(startColor),start="rgba("+startParsedColor.map(n=>String(n)).join(", ")+", "+startOpacity+")",end="rgba("+endParsedColor.map(n=>String(n)).join(", ")+", "+endOpacity+")";finalGradient=`linear-gradient(142deg, ${start} 0%, ${end} 100%)`,textDom.textContent=startColor,textDom2.textContent=endColor}setTimeout(async()=>{await getFinalTransform()},0)}}},style:{height:whiteInputHeight,borderRadius:whiteInputBorderRadius,flexGrow:1,flexShrink:1,background:colorChip.white,display:"inline-flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},child:{attribute:{kind,value},class:["cssFilterValueBoxClassName"],event:{selectstart:e=>e.preventDefault()},text:value,style:{fontSize:valueSize,fontWeight:valueWeight,fontColor:["translate","scale-x","scale-y"].includes(kind)?colorChip.deactive:black}}}),createAbstract({mother:cssBase,class:[transformValueGroupClassNameArr[0]],style:{display:"flex",flexDirection:"column",width:withOut(0)},children:[{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:gap},child:{text:"배경 (background)",style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.darkDarkBlack,wordSpacing:titleWordSpacing}}},{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:gap/2},children:[{text:"배경색",style:{fontSize:middleTitleSize,fontWeight:middleTitleWeight,color:colorChip.darkDarkBlack,flexGrow:0,flexShrink:0,paddingRight:middleTitlePaddingRight,width:originMiddleWidth,wordSpacing:titleWordSpacing}},valueCommandOut("background-color",colorChip.mintSharp)]},{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:gap/2},children:[{text:"투명도",style:{fontSize:middleTitleSize,fontWeight:middleTitleWeight,color:colorChip.darkDarkBlack,flexGrow:0,flexShrink:0,paddingRight:middleTitlePaddingRight,width:originMiddleWidth,wordSpacing:titleWordSpacing}},valueCommandOut("background-opacity","0.9")]}]}),createAbstract({mother:cssBase,class:[transformValueGroupClassNameArr[3]],style:{display:"flex",flexDirection:"column",width:withOut(0)},children:[{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:gap},child:{text:"테두리 (border)",style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.darkDarkBlack,wordSpacing:titleWordSpacing}}},{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:gap/2},children:[{text:"테두리",style:{fontSize:middleTitleSize,fontWeight:middleTitleWeight,color:colorChip.darkDarkBlack,flexGrow:0,flexShrink:0,paddingRight:middleTitlePaddingRight,width:originMiddleWidth,wordSpacing:titleWordSpacing}},valueCommandOut("border","0px solid #000000")]},{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:gap/2},children:[{text:"모서리",style:{fontSize:middleTitleSize,fontWeight:middleTitleWeight,color:colorChip.darkDarkBlack,flexGrow:0,flexShrink:0,paddingRight:middleTitlePaddingRight,width:originMiddleWidth,wordSpacing:titleWordSpacing}},valueCommandOut("border-radius","1rem")]}]}),createAbstract({mother:cssBase,class:[transformValueGroupClassNameArr[3]],style:{display:"flex",flexDirection:"column",width:withOut(0)},children:[{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:gap},child:{text:"필터 (blend)",style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.darkDarkBlack,wordSpacing:titleWordSpacing}}},{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:gap/2},children:[{text:"블랜드",style:{fontSize:middleTitleSize,fontWeight:middleTitleWeight,color:colorChip.darkDarkBlack,flexGrow:0,flexShrink:0,paddingRight:middleTitlePaddingRight,width:originMiddleWidth,wordSpacing:titleWordSpacing}},valueCommandOut("mix-blend","normal")]},{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:gap/2},children:[{text:"백드롭",style:{fontSize:middleTitleSize,fontWeight:middleTitleWeight,color:colorChip.darkDarkBlack,flexGrow:0,flexShrink:0,paddingRight:middleTitlePaddingRight,width:originMiddleWidth,wordSpacing:titleWordSpacing}},valueCommandOut("backdrop","none")]}]}),createAbstract({mother:cssBase,class:[transformValueGroupClassNameArr[1]],style:{display:"flex",flexDirection:"column",width:withOut(0)},children:[{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:gap},child:{text:"그림자 (shadow)",style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.darkDarkBlack,wordSpacing:titleWordSpacing}}},{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:gap/2},children:[{text:"색상",style:{fontSize:middleTitleSize,fontWeight:middleTitleWeight,color:colorChip.darkDarkBlack,flexGrow:0,flexShrink:0,paddingRight:middleTitlePaddingRight,width:originMiddleWidth,wordSpacing:titleWordSpacing}},valueCommandOut("shadow-color","#404040")]},{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:gap/2},children:[{text:"정도",style:{fontSize:middleTitleSize,fontWeight:middleTitleWeight,color:colorChip.darkDarkBlack,flexGrow:0,flexShrink:0,paddingRight:middleTitlePaddingRight,width:originMiddleWidth,wordSpacing:titleWordSpacing}},valueCommandOut("shadow-xy","0px 0px 0px 0px")]}]}),createAbstract({mother:cssBase,class:[transformValueGroupClassNameArr[2]],style:{display:"flex",flexDirection:"column",width:withOut(0)},children:[{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:gap},child:{text:"그라디언트 (gradient)",style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.darkDarkBlack,wordSpacing:titleWordSpacing}}},{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:gap/2},children:[{text:"시작 색상",style:{fontSize:middleTitleSize,fontWeight:middleTitleWeight,color:colorChip.darkDarkBlack,flexGrow:0,flexShrink:0,paddingRight:middleTitlePaddingRight,width:translateMiddleWidth,wordSpacing:titleWordSpacing}},valueCommandOut("gradient-from","#0082D2")]},{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",marginBottom:gap/2},children:[{text:"끝 색상",style:{fontSize:middleTitleSize,fontWeight:middleTitleWeight,color:colorChip.darkDarkBlack,flexGrow:0,flexShrink:0,paddingRight:middleTitlePaddingRight,width:translateMiddleWidth,wordSpacing:titleWordSpacing}},valueCommandOut("gradient-to","#00ABC9")]}]}),createAbstract({mother:whiteBase,style:{display:"flex",width:withOut(0),flexGrow:1,flexShrink:1,borderRadius:whiteInputBorderRadius,background:colorChip.white,justifyContent:"center",alignItems:"center",paddingTop:tongMargin/2,paddingBottom:tongMargin/2},child:{style:{display:"flex",width:withOut(tongMargin/2*2),height:withOut(tongMargin/2*2),borderRadius:whiteInputBorderRadius,background:colorChip.white,justifyContent:"center",alignItems:"center",border:"1px dashed "+colorChip.mint,boxSizing:"border-box",flexGrow:1,flexShrink:1,transition:"all 0.5s ease"},child:{previous:{style:{width:String(75)+"%",height:String(62)+"%",background:colorChip.transparent,display:"grid",gridTemplateColumns:"1fr",gap:1.5*gap,flexGrow:0,flexShrink:0,boxSizing:"border-box",position:"absolute",transformOrigin:"50% 50%",transform:"translate(-50%, -50%)",left:String(50)+"%",top:String(50)+"%"},children:[{style:{border:"1px dashed "+colorChip.mint,borderRadius:whiteInputBorderRadius,boxSizing:"border-box",width:withOut(0),flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",paddingRight:String(15)+"%",paddingLeft:String(15)+"%"},child:{text:"The procedural aspect of the matter has often clarified a more deliberate approach. For every instance,  It is not a question of why, but rather of when the particulates. yet unspoken.",style:{fontSize:titleSize*ratio0,fontWeight:300,fontColor:colorChip.mint,transition:"transform 0.5s ease",textAlign:"center",lineHeight:1.56}}},{style:{background:colorChip.rose,borderRadius:whiteInputBorderRadius,boxSizing:"border-box",width:String(100)+"%",flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",paddingRight:String(15)+"%",paddingLeft:String(15)+"%"},child:{text:"The procedural aspect of the matter has often clarified a more deliberate approach. For every instance,  It is not a question of why, but rather of when the particulates. yet unspoken.",style:{fontSize:titleSize*ratio0,fontWeight:400,fontColor:colorChip.white,transition:"transform 0.5s ease",textAlign:"center",lineHeight:1.56}}},{style:{border:"1px dashed "+colorChip.rose,borderRadius:whiteInputBorderRadius,boxSizing:"border-box",width:withOut(0),flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},child:{text:"background",style:{fontSize:titleSize*ratio1,fontWeight:300,fontColor:colorChip.rose,transition:"transform 0.5s ease"}}}]},class:["finalApplyFilterDomClassName"],style:{width:String(70)+"%",height:String(50)+"%",borderRadius:whiteInputBorderRadius,background:colorChip.gradientTrasparentMint,display:"flex",flexGrow:0,flexShrink:0,justifyContent:"center",boxSizing:"border-box",alignItems:"center",transition:"transform 0.5s ease"},child:{text:"contents",style:{fontSize:1.3*titleSize,fontWeight:400,fontColor:colorChip.white,transition:"transform 0.5s ease"}}}}})}catch(e){console.log(e),reject(e)}})};animationHelperPopup=animationName=>{const instance=this,{colorChip,svgMaker:localSvgMaker,binaryPath}=(this.back,PathAnimator),{withOut,percent,promptPopup,contextmenuPopup,transformCss,selectByQuery,setDomColor,markdownBlocks,linkToString,hangulToEnglish,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();return new Promise(async(resolve,reject)=>{try{const indent="  ",keyframeWords=[["keyframe 0%","keyframe_0"],["keyframe 33%","keyframe_33"],["keyframe 66%","keyframe_66"],["keyframe 100%","keyframe_100"]];let cancelBack,whiteBase,contentsPaddingBottom,whiteBaseRadius,tongMargin,tongMarginTop,boxWidth,whiteCloseEvent,topOuterMargin,cssBase,cssBase2,gap,cssBlockHeight,titleSize,titleWeight,titleMarginBottom,innerCssBoxBorderRadius,visualPaddingBottom,editorInnerMargin,fiveView,supportBaseWidth,supportButtonHeight,supportButtonSize,supportButtonWeight,supportButtonBorderRadius,forceBoxWidthBoo,titleWordSpacing,middleTitleSize,middleTitleWeight,middleTitlePaddingRight,translateMiddleWidth,originMiddleWidth,whiteInputHeight,whiteInputBorderRadius,valueSize,valueWeight,black,transformValueGroupClassNameArr,tongHeight,whiteTong;contentsPaddingBottom=mediaNumber(140,130,120,100,16),whiteBaseRadius=mediaNumber(15,15,15,15,3),tongMargin=mediaNumber(30,28,26,22,5),tongMarginTop=mediaNumber(26,24,20,18,5),boxWidth=mediaNumber(1400,1060,840,720,80),gap=mediaNumber(8,8,7,6,1.5),topOuterMargin=mediaNumber(70,70,64,60,16),window.innerHeight-2*topOuterMargin<900&&(topOuterMargin=mediaNumber(50,45,40,36,12),tongMargin=mediaNumber(24,24,22,20,5),tongMarginTop=mediaNumber(20,20,18,16,5),gap=mediaNumber(7,7,6,5,1.5)),tongHeight=mediaNumber(640,640,620,600,60),cssBlockHeight=(window.innerHeight-2*topOuterMargin-(tongMargin+tongMarginTop)-2*gap)/2,titleSize=mediaNumber(15,13.5,12.5,11,3),titleWeight=mediaNumber(800,800,800,800,800),titleMarginBottom=mediaNumber(5,4.5,4,3,1),innerCssBoxBorderRadius=mediaNumber(8,8,7,7,2),visualPaddingBottom=mediaNumber(200,180,160,140,40),editorInnerMargin=mediaNumber(16,16,14,12,1),titleWordSpacing=mediaNumber(-4,-4,-4,-3,-3),middleTitleSize=mediaNumber(13,12,11,10,3),middleTitleWeight=mediaNumber(600,600,600,600,600),middleTitlePaddingRight=mediaNumber(10,10,9,8,2),translateMiddleWidth=mediaNumber(66,66,66,64,2),originMiddleWidth=mediaNumber(56,56,56,54,4),whiteInputHeight=mediaNumber(26,26,25,24,2),whiteInputBorderRadius=mediaNumber(8,8,7,7,2),valueSize=mediaNumber(12,11,10.5,9,2.8),valueWeight=mediaNumber(500,500,500,500,500),supportBaseWidth=mediaNumber(132,132,128,128,11),supportButtonHeight=mediaNumber(32,32,31,31,2),supportButtonSize=mediaNumber(12,12,11,11,3),supportButtonWeight=mediaNumber(500,500,500,500,500),supportButtonBorderRadius=mediaNumber(5,5,5,4,1),fiveView=[],forceBoxWidthBoo=!1,forceBoxWidthBoo=window.innerWidth-2*topOuterMargin>boxWidth,black=colorChip.darkDarkBlack,transformValueGroupClassNameArr=["originValueGroupClassNameArr","translateValueGroupClassNameArr","scaleValueGroupClassNameArr","rotateValueGroupClassNameArr","skewValueGroupClassNameArr"],whiteCloseEvent=async e=>{const motherArr=[...document.querySelectorAll(".cssTransformPopupClassName")];if(motherArr.length>1){const[cancel,whiteBase]=motherArr.map(d=>d);cancel.style.animation="justfadeoutsmall 0.3s ease forwards",whiteBase.style.animation="fadedown 0.3s ease forwards",setQueue(async()=>{let i,thisKeyframe,thisExample,cancelMode;removeByClass("cssTransformPopupClassName"),cancelMode=!0,thisKeyframe="@keyframes "+animationName+" {\n",thisExample="",i=0;for(let v of fiveView){const thisRaw=v.state.doc.toString();let thisContents;if(thisContents="",thisRaw.replace(/\{([^\}]*)\}/gis,(match,p1)=>(thisContents=p1.trim(),match)),i<keyframeWords.length){let thisC;thisC="",thisC=thisContents.replace(/\n/gis,";").replace(/ \s+/gis," ").trim()+";",thisC=String(thisC.replace(/;;/gi,";").split(";").map(s=>s.trim()).filter(s=>""!==s).join(";")+";").trim(),""!==thisC&&";"!==thisC||(thisC="");const thisPositon=keyframeWords[i][0].split(" ")[1].trim();""!==thisC&&(cancelMode=!1,thisKeyframe+="0%"===thisPositon?indent+"from { "+thisC+" }\n":"100%"===thisPositon?indent+"to { "+thisC+" }\n":indent+thisPositon+" { "+thisC+" }\n")}else thisExample=thisContents;i++}cancelMode?resolve(""):(thisKeyframe=thisKeyframe.trim()+"\n}",resolve(thisKeyframe+"\n\n"+thisExample))},301)}},cancelBack=createAbstract({mother:totalContents,class:["cssTransformPopupClassName"],event:{click:whiteCloseEvent},style:{position:"fixed",top:0,left:0,width:withOut(0),height:withOut(0),opacity:0,animation:"justfadeinsmall 0.4s ease forwards",background:colorExtended.black,zIndex:150}}),whiteBase=createAbstract({mother:totalContents,class:["cssTransformPopupClassName"],style:{position:"fixed",width:forceBoxWidthBoo?boxWidth:withOut(2*topOuterMargin,"px"),height:tongHeight,top:withOut(50,tongHeight/2,"px"),left:forceBoxWidthBoo?withOut(50,boxWidth/2,"px"):pixelUnit(topOuterMargin),borderRadius:whiteBaseRadius,background:colorExtended.gray1,animation:"fadeuporiginal 0.5s ease forwards",zIndex:150,flexDirection:"column",overflow:"hidden"},child:{style:{display:"block",width:withOut(0),height:withOut(0)},child:{style:{display:"flex",flexDirection:"row",width:withOut(0),height:withOut(0),paddingLeft:tongMargin,paddingRight:tongMargin,paddingTop:tongMarginTop,paddingBottom:tongMargin,boxSizing:"border-box"},child:{style:{display:"flex",flexDirection:"column",width:withOut(0),height:withOut(0),boxSizing:"border-box",marginRight:1.5*gap,flexShrink:1,flexGrow:1}}}}}).children[0],whiteTong=whiteBase.children[0],whiteBase=whiteTong.children[0],instance.setCssSupportButtons(whiteTong,150),cssBase=createAbstract({mother:whiteBase,style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",rowGap:2*gap,columnGap:1.5*gap,flexGrow:1,flexShrink:1,marginBottom:1.5*gap,minHeight:0}});for(let i=0;i<keyframeWords.length;i++){const thisCssMother0=createAbstract({mother:cssBase,style:{display:"flex",flexDirection:"column",width:withOut(0),flexShrink:1,minHeight:0},children:[{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:gap*(2/3),minHeight:0,flexShrink:0},child:{text:keyframeWords[i][0],style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.darkDarkBlack,wordSpacing:titleWordSpacing}}},{style:{width:withOut(2*editorInnerMargin),background:colorChip.white,borderRadius:innerCssBoxBorderRadius,flexGrow:1,overflow:"scroll",padding:editorInnerMargin,minHeight:0,flexShrink:1},child:{attribute:{"four-index":String(i)},event:{dragenter$dragover$dragstart$dragleave:e=>{e.stopPropagation(),e.preventDefault()},drop:async event=>{event.preventDefault();const self=event.currentTarget,index=Number(self.mustAttribute("four-index")),view=fiveView[index],docString=view.state.doc.toString();let position,i0,i1,i2,targetCssStrings,totalCssString,newState,beforeString,afterString;try{position=view.posAtCoords({x:event.clientX,y:event.clientY}),null===position&&(position=docString.length-1);const lineStartPos=view.state.doc.lineAt(position).from,thisText=event.dataTransfer.getData("text/plain"),standard=thisText.split(":")[0].trim();if(beforeString=docString.slice(0,position),afterString=docString.slice(position),i0=beforeString.split("").findLastIndex(s=>"{"===s),i1=beforeString.split("").findLastIndex(s=>"}"===s),-1===i1)if(-1===i0){if(i0=docString.split("").findIndex(s=>"{"===s),-1===i0)throw new Error(thisText);if(afterString=docString.slice(i0),position=i0,i2=afterString.split("").findIndex(s=>"}"===s),-1===i2){targetCssStrings=docString.slice(i0+1),new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=docString.slice(0,i0+1)+targetCssStrings+"\n\n}";try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}else{targetCssStrings=docString.slice(i0+1,position+i2),new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=docString.slice(0,i0+1)+targetCssStrings+docString.slice(position+i2);try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}}else if(i2=afterString.split("").findIndex(s=>"}"===s),-1===i2){targetCssStrings=docString.slice(i0+1),new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=docString.slice(0,i0+1)+targetCssStrings+"\n\n}";try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}else{targetCssStrings=docString.slice(i0+1,position+i2),new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=docString.slice(0,i0+1)+targetCssStrings+docString.slice(position+i2);try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}else{if(-1===i0)throw new Error(thisText);if(i0<=i1&&(afterString=docString.slice(i0),position=i0),i2=afterString.split("").findIndex(s=>"}"===s),-1===i2){targetCssStrings=docString.slice(i0+1),new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=docString.slice(0,i0+1)+targetCssStrings+"\n\n}";try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}else{targetCssStrings=docString.slice(i0+1,position+i2),new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=docString.slice(0,i0+1)+targetCssStrings+docString.slice(position+i2);try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}}view.dispatch({selection:dist_EditorSelection.cursor(lineStartPos),scrollIntoView:!0}),view.focus()}catch(e){const thisText=e.message.trim(),standard=thisText.split(":")[0].trim();targetCssStrings=docString,new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=targetCssStrings;try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}}},style:{width:withOut(0),background:colorChip.white,paddingBottom:visualPaddingBottom,minHeight:0,flexShrink:1}}}]}).children[1].children[0],thisView0=await instance.editorInit("css-mini",thisCssMother0,[`${keyframeWords[i][1]} {`,`${indent}`,"}"].join("\n"),{numberView:!1,events:EditorView.domEventHandlers({contextmenu:(event,view)=>{}})});fiveView.push(thisView0)}cssBase2=createAbstract({mother:whiteBase,style:{display:"grid",gridTemplateColumns:"1fr",flexGrow:1,flexShrink:0}});const thisCssMother1=createAbstract({mother:cssBase2,style:{display:"flex",flexDirection:"column",width:withOut(0)},children:[{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:gap*(2/3),flexShrink:0},child:{text:"사용 예시",style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.darkDarkBlack,wordSpacing:titleWordSpacing}}},{style:{width:withOut(2*editorInnerMargin),background:colorChip.white,borderRadius:innerCssBoxBorderRadius,flexGrow:1,overflow:"scroll",padding:editorInnerMargin},child:{style:{width:withOut(0),background:colorChip.white}}}]}).children[1].children[0],thisView1=await instance.editorInit("css-mini",thisCssMother1,["sample {",`${indent}animation: ${animationName} 1s ease forwards;`,"}"].join("\n"),{events:EditorView.domEventHandlers({contextmenu:(event,view)=>{}})});fiveView.push(thisView1)}catch(e){console.log(e),reject(e)}})};buttonHelperPopup=targetClass=>{const instance=this,back=this.back,{colorChip,svgMaker:localSvgMaker,binaryPath}=PathAnimator,{withOut,percent,promptPopup,contextmenuPopup,transformCss,selectByQuery,setDomColor,markdownBlocks,linkToString,hangulToEnglish,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(),rem="rem";return new Promise(async(resolve,reject)=>{try{const indent="  ",buttonTargetTitles=["button","target off","target on"],thisButtonId="b_"+uniqueValue("short"),thisButtonId2="b_"+uniqueValue("short"),radioButtonName="r_"+uniqueValue("short"),buttonList=["button","toggle","radio"],toggleFileName="toggle_"+uniqueValue("short")+".svg";let cancelBack,whiteBase,contentsPaddingBottom,whiteBaseRadius,tongMargin,tongMarginTop,boxWidth,whiteCloseEvent,topOuterMargin,cssBase,gap,cssBlockHeight,titleSize,titleWeight,titleMarginBottom,innerCssBoxBorderRadius,visualPaddingBottom,editorInnerMargin,fiveView,supportBaseWidth,supportButtonHeight,supportButtonSize,supportButtonWeight,supportButtonBorderRadius,forceBoxWidthBoo,titleWordSpacing,middleTitleSize,middleTitleWeight,middleTitlePaddingRight,translateMiddleWidth,originMiddleWidth,whiteInputHeight,whiteInputBorderRadius,valueSize,valueWeight,black,tongHeight,whiteTong,htmlAndPreviewBase,buttonHeight,buttonInnerPadding,buttonFontSize,buttonFontWeight,buttonBorderRadius,toggleStyle,buttonStyle,buttonOffStringArr,buttonOnStringArr,buttonTextOffStringArr,buttonTextOnStringArr,buttonOffString,buttonOnString,thisKey,totalCss,blurAndUpdateEvent,htmlDomUpdateEvent,modeAreaHeight,modeButtonRight,modeButtonVisualTop,buttonTitleSize,thisMode,thisHtml,toggleStringArr,toggleString,radioStyle,radioOnStringArr,radioTextOffStringArr,radioTextOnStringArr,radioOnString,radioTextOnString,radioButtonStyle,radioButtonCircleStringArr,toggleFile;contentsPaddingBottom=mediaNumber(140,130,120,100,16),whiteBaseRadius=mediaNumber(15,15,15,15,3),tongMargin=mediaNumber(30,28,26,22,5),tongMarginTop=mediaNumber(26,24,20,18,5),boxWidth=mediaNumber(1400,1060,840,720,80),gap=mediaNumber(8,8,7,6,1.5),topOuterMargin=mediaNumber(70,70,64,60,16),window.innerHeight-2*topOuterMargin<900&&(topOuterMargin=mediaNumber(50,45,40,36,12),tongMargin=mediaNumber(24,24,22,20,5),tongMarginTop=mediaNumber(20,20,18,16,5),gap=mediaNumber(7,7,6,5,1.5)),tongHeight=mediaNumber(720,720,680,640,60),cssBlockHeight=(window.innerHeight-2*topOuterMargin-(tongMargin+tongMarginTop)-2*gap)/2,titleSize=mediaNumber(15,13.5,12.5,11,3),buttonTitleSize=mediaNumber(14,13,12.5,11,3),titleWeight=mediaNumber(800,800,800,800,800),titleMarginBottom=mediaNumber(5,4.5,4,3,1),innerCssBoxBorderRadius=mediaNumber(8,8,7,7,2),visualPaddingBottom=mediaNumber(200,180,160,140,40),editorInnerMargin=mediaNumber(16,16,14,12,1),titleWordSpacing=mediaNumber(-4,-4,-4,-3,-3),middleTitleSize=mediaNumber(13,12,11,10,3),middleTitleWeight=mediaNumber(600,600,600,600,600),middleTitlePaddingRight=mediaNumber(10,10,9,8,2),translateMiddleWidth=mediaNumber(66,66,66,64,2),originMiddleWidth=mediaNumber(56,56,56,54,4),whiteInputHeight=mediaNumber(26,26,25,24,2),whiteInputBorderRadius=mediaNumber(8,8,7,7,2),valueSize=mediaNumber(12,11,10.5,9,2.8),valueWeight=mediaNumber(500,500,500,500,500),supportBaseWidth=mediaNumber(132,132,128,128,11),supportButtonHeight=mediaNumber(32,32,31,31,2),supportButtonSize=mediaNumber(12,12,11,11,3),supportButtonWeight=mediaNumber(500,500,500,500,500),supportButtonBorderRadius=mediaNumber(5,5,5,4,1),buttonHeight=mediaNumber(2.1,2.1,2.1,2.1,2.1),buttonBorderRadius=mediaNumber(.5,.5,.5,.5,.5),buttonFontSize=mediaNumber(.94,.94,.94,.94,.94),buttonFontWeight=mediaNumber(700,700,700,700,700),buttonInnerPadding=mediaNumber(1,1,1,1,1),modeAreaHeight=mediaNumber(50,42,40,38,4),modeButtonRight=3,modeButtonVisualTop=1,thisMode="button",black=colorChip.darkDarkBlack,fiveView=[],forceBoxWidthBoo=!1,forceBoxWidthBoo=window.innerWidth-2*topOuterMargin>boxWidth,whiteCloseEvent=async e=>{const motherArr=[...document.querySelectorAll(".buttonHelperPopupClassName")];if(motherArr.length>1){const[cancel,whiteBase]=motherArr.map(d=>d);cancel.style.animation="justfadeoutsmall 0.3s ease forwards",whiteBase.style.animation="fadedown 0.3s ease forwards",setQueue(async()=>{let i,cssString,htmlString;removeByClass("buttonHelperPopupClassName"),cssString=[],htmlString="",i=0;for(let v of fiveView){const thisRaw=v.state.doc.toString();i<3?cssString.push(thisRaw.trim().replace(/input\s*\{[^\}]*\}/gis,"").trim()):htmlString=thisRaw.trim(),i++}resolve(JSON.stringify({html:htmlString,css:cssString}))},301)}},blurAndUpdateEvent=async e=>{try{const cssView=fiveView[0],htmlView=fiveView[fiveView.length-1],thisCss=cssView.state.doc.toString(),thisHtml=htmlView.state.doc.toString();let cssBlocks,parser,parsedDocument,body,initParseError,offDom,onDom,offText,onText;if(cssBlocks=[],thisCss.replace(/\s*([^\{\}]+)\s*\{([^\}]*)\}/gis,(match,p1,p2)=>{const matrix=p2.trim().replace(/;$/gi,"").split(";").map(s=>s.replace(/[\n\t]/gis,"").trim()).filter(s=>""!==s).map(s=>s.split(":").map(d=>d.trim())),obj={selector:p1.trim(),contents:matrix};return cssBlocks.push(objectDeepCopy(obj)),match}),"button"===thisMode){const buttonOff=document.querySelector(".buttonOffClassName"),buttonOn=document.querySelector(".buttonOnClassName"),buttonOffUpdatedCssMatrix=cssBlocks.find(d=>!/checked/gi.test(d.selector)&&/\.button_off$/gis.test(d.selector)).contents,buttonOnUpdatedCssMatrix=cssBlocks.find(d=>!/checked/gi.test(d.selector)&&/\.button_on$/gis.test(d.selector)).contents,buttonBaseUpdatedCssMatrix=cssBlocks.find(d=>/\.button_base$/gis.test(d.selector)).contents,buttonBase=[buttonOff.parentElement,buttonOn.parentElement];for(let[property,value]of buttonOffUpdatedCssMatrix)/display/gi.test(property)||(buttonOff.style[property]=value);for(let[property,value]of buttonOnUpdatedCssMatrix)/display/gi.test(property)||(buttonOn.style[property]=value);for(let[property,value]of buttonBaseUpdatedCssMatrix)for(let b of buttonBase)b.style[property]=value;offText="",onText="",parser=new DOMParser,parsedDocument=parser.parseFromString(thisHtml,"text/html"),body=parsedDocument.body,null!==body&&(initParseError=parsedDocument.querySelector("parsererror"),null===initParseError&&(offDom=body.querySelector(".button_off"),onDom=body.querySelector(".button_on"),null!==offDom&&null!==onDom&&(offText=offDom.innerText.trim(),onText=onDom.innerText.trim()))),""!==offText&&(buttonOff.textContent=offText),""!==onText&&(buttonOn.textContent=onText)}else if("toggle"===thisMode){const toggleDom=document.querySelector(".togglePreviewClassName"),toggleUpdatedCssMatrix=cssBlocks.find(d=>!/checked/gi.test(d.selector)&&/\.toggle_words$/gis.test(d.selector)).contents,triangleUpdatedCssMatrix=cssBlocks.find(d=>!/checked/gi.test(d.selector)&&/\.toggle_triangle$/gis.test(d.selector)).contents;cssBlocks.find(d=>/\.toggle_base$/gis.test(d.selector)).contents,toggleDom.parentElement;for(let[property,value]of toggleUpdatedCssMatrix)toggleDom.style[property]=value;for(let[property,value]of triangleUpdatedCssMatrix)toggleDom.previousElementSibling.style[property]=value;toggleDom.previousElementSibling.querySelector("path").setAttribute("fill",colorChip.white),offText="",parser=new DOMParser,parsedDocument=parser.parseFromString(thisHtml,"text/html"),body=parsedDocument.body,null!==body&&(initParseError=parsedDocument.querySelector("parsererror"),null===initParseError&&(offDom=body.querySelector(".toggle_words"),null!==offDom&&(offText=offDom.innerText.trim()))),""!==offText&&(toggleDom.textContent=offText)}else{const ratioOff=document.querySelector(".radioOffPreviewClassName"),ratioOn=document.querySelector(".radioOnPreviewClassName"),ratioWordsUpdatedCssMatrix=cssBlocks.find(d=>!/checked/gi.test(d.selector)&&/\.radio_words$/gis.test(d.selector)).contents,ratioButtonUpdatedCssMatrix=cssBlocks.find(d=>!/checked/gi.test(d.selector)&&/\.radio_button$/gis.test(d.selector)).contents;for(let[property,value]of ratioWordsUpdatedCssMatrix)ratioOff.style[property]=value,ratioOn.style[property]=value;for(let[property,value]of ratioButtonUpdatedCssMatrix)/background/gi.test(property)?(ratioOff.children[0].style[property]=value,ratioOn.children[0].style[property]=colorChip.mint):(ratioOff.children[0].style[property]=value,ratioOn.children[0].style[property]=value);offText="",onText="",parser=new DOMParser,parsedDocument=parser.parseFromString(thisHtml,"text/html"),body=parsedDocument.body,null!==body&&(initParseError=parsedDocument.querySelector("parsererror"),null===initParseError&&([onDom,offDom]=[...body.querySelectorAll(".radio_words")].map(d=>d),null!==offDom&&null!==onDom&&(offText=offDom.innerText.trim(),onText=onDom.innerText.trim()))),""!==offText&&(ratioOff.firstChild.textContent=offText),""!==onText&&(ratioOn.firstChild.textContent=onText)}}catch(err){console.log(err)}},htmlDomUpdateEvent=async(e,mode,value)=>{try{const htmlView=fiveView[fiveView.length-1],thisHtml=htmlView.state.doc.toString();let parser,parsedDocument,body,initParseError,offDom,onDom;if(parser=new DOMParser,parsedDocument=parser.parseFromString(thisHtml,"text/html"),body=parsedDocument.body,"button"===thisMode){const buttonOff=document.querySelector(".buttonOffClassName"),buttonOn=document.querySelector(".buttonOnClassName");if(null!==body&&(initParseError=parsedDocument.querySelector("parsererror"),null===initParseError&&(offDom=body.querySelector(".button_off"),onDom=body.querySelector(".button_on"),null!==offDom&&null!==onDom))){"off"===mode?(offDom.innerText=value.trim(),buttonOff.innerText=value.trim()):(onDom.innerText=value,buttonOn.innerText=value.trim());const updateState=htmlView.state.update({changes:{from:0,to:thisHtml.length,insert:body.innerHTML}});htmlView.dispatch(updateState)}}else if("toggle"===thisMode){const toggleDom=document.querySelector(".togglePreviewClassName");if(null!==body&&(initParseError=parsedDocument.querySelector("parsererror"),null===initParseError&&(offDom=body.querySelector(".toggle_words"),null!==offDom))){offDom.innerText=value.trim(),toggleDom.textContent=value.trim();const updateState=htmlView.state.update({changes:{from:0,to:thisHtml.length,insert:body.innerHTML}});htmlView.dispatch(updateState)}}else{const radioOff=document.querySelector(".radioOffPreviewClassName"),radioOn=document.querySelector(".radioOnPreviewClassName");null!==body&&(initParseError=parsedDocument.querySelector("parsererror"),null===initParseError&&([onDom,offDom]=[...body.querySelectorAll(".radio_words")].map(d=>d),null!==offDom&&null!==onDom&&("off"===mode?(offDom.innerText=value.trim(),radioOff.firstChild.textContent=value.trim()):(onDom.innerText=value,radioOn.firstChild.textContent=value.trim()),htmlView.dispatch(htmlView.state.update({changes:{from:0,to:thisHtml.length,insert:body.innerHTML}})))))}}catch(err){console.log(err)}},cancelBack=createAbstract({mother:totalContents,class:["buttonHelperPopupClassName"],event:{click:whiteCloseEvent},style:{position:"fixed",top:0,left:0,width:withOut(0),height:withOut(0),opacity:0,animation:"justfadeinsmall 0.4s ease forwards",background:colorExtended.black,zIndex:150}});const makeVisualWhitePopup=async(mode="button")=>{fiveView=[],thisMode=mode,buttonStyle={display:"inline-flex",position:"relative",boxSizing:"border-box",height:String(buttonHeight)+rem,borderRadius:String(buttonBorderRadius)+rem,paddingLeft:String(buttonInnerPadding)+rem,paddingRight:String(buttonInnerPadding)+rem,flexDirection:"row",justifyContent:"center",alignItems:"center",cursor:"pointer",fontFamily:"pretendard",fontSize:String(buttonFontSize)+rem,fontWeight:String(buttonFontWeight),zIndex:String(1)},toggleStyle=objectDeepCopy(buttonStyle),toggleStyle.justifyContent="start",toggleStyle.margin=String(0),toggleStyle.padding=String(0),toggleStyle.fontSize=String(1)+rem,delete toggleStyle.height,delete toggleStyle.cursor,delete toggleStyle.borderRadius,delete toggleStyle.paddingLeft,delete toggleStyle.paddingRight,radioStyle=objectDeepCopy(buttonStyle),radioStyle.display="flex",radioStyle.flexDirection="row-reverse",radioStyle.fontSize=String(1)+rem,radioStyle.fontWeight=String(400),radioStyle.justifyContent="start",radioStyle.margin=String(0),radioStyle.padding=String(0),delete radioStyle.height,delete radioStyle.borderRadius,delete radioStyle.paddingLeft,delete radioStyle.paddingRight,radioButtonStyle={display:"inline-flex",width:String(.45)+rem,height:String(.45)+rem,borderRadius:String(.45)+rem,marginLeft:String(.1)+rem,marginRight:String(.3)+rem,background:colorChip.gray3,flexGrow:String(0),flexShrink:String(0)},radioButtonCircleStringArr=[],buttonOffStringArr=[],buttonOnStringArr=[],buttonTextOffStringArr=[],buttonTextOnStringArr=[],toggleStringArr=[],radioOnStringArr=[],radioTextOffStringArr=[],radioTextOnStringArr=[],thisKey="";for(let k in buttonStyle){if(thisKey="",/[A-Z]/g.test(k)){const middleIndex=k.split("").findIndex(c=>/[A-Z]/g.test(c));thisKey=k.slice(0,middleIndex)+"-"+k.slice(middleIndex).toLowerCase()}else thisKey=k;"display"===thisKey?(buttonOffStringArr.push(thisKey.trim()+": "+buttonStyle[k].trim()+";"),buttonOnStringArr.push(thisKey.trim()+": none;")):(buttonOffStringArr.push(thisKey.trim()+": "+buttonStyle[k].trim()+";"),buttonOnStringArr.push(thisKey.trim()+": "+buttonStyle[k].trim()+";"))}for(let k in toggleStyle){if(thisKey="",/[A-Z]/g.test(k)){const middleIndex=k.split("").findIndex(c=>/[A-Z]/g.test(c));thisKey=k.slice(0,middleIndex)+"-"+k.slice(middleIndex).toLowerCase()}else thisKey=k;toggleStringArr.push(thisKey.trim()+": "+toggleStyle[k].trim()+";")}for(let k in radioStyle){if(thisKey="",/[A-Z]/g.test(k)){const middleIndex=k.split("").findIndex(c=>/[A-Z]/g.test(c));thisKey=k.slice(0,middleIndex)+"-"+k.slice(middleIndex).toLowerCase()}else thisKey=k;radioOnStringArr.push(thisKey.trim()+": "+radioStyle[k].trim()+";")}for(let k in radioButtonStyle){if(thisKey="",/[A-Z]/g.test(k)){const middleIndex=k.split("").findIndex(c=>/[A-Z]/g.test(c));thisKey=k.slice(0,middleIndex)+"-"+k.slice(middleIndex).toLowerCase()}else thisKey=k;radioTextOnStringArr.push(thisKey.trim()+": "+radioButtonStyle[k].trim()+";")}if(buttonOffStringArr.push("background: "+colorChip.gray2+";"),buttonOnStringArr.push("background: "+colorChip.mint+";"),buttonOffStringArr.push("color: "+colorChip.deactive+";"),buttonOnStringArr.push("color: "+colorChip.white+";"),buttonOffString=`#${thisButtonId} + label .button_off {\n`+buttonOffStringArr.map(s=>s.trim()).filter(s=>""!==s).map(s=>`${indent}${s}`).join("\n")+"\n}",buttonOnString=`#${thisButtonId} + label .button_on {\n`+buttonOnStringArr.map(s=>s.trim()).filter(s=>""!==s).map(s=>`${indent}${s}`).join("\n")+"\n}",toggleString=`#${thisButtonId} + label .toggle_words {\n`+toggleStringArr.map(s=>s.trim()).filter(s=>""!==s).map(s=>`${indent}${s}`).join("\n")+"\n}",radioOnString=`#${thisButtonId} + label .radio_words, #${thisButtonId2} + label .radio_words {\n`+radioOnStringArr.map(s=>s.trim()).filter(s=>""!==s).map(s=>`${indent}${s}`).join("\n")+"\n}",radioTextOnString=`#${thisButtonId} + label .radio_button, #${thisButtonId2} + label .radio_button {\n`+radioTextOnStringArr.map(s=>s.trim()).filter(s=>""!==s).map(s=>`${indent}${s}`).join("\n")+"\n}","toggle"===mode){const svgString=AbstractNode.svgMaker.toggleIcon(colorChip.white),svgBlob=new Blob([svgString],{type:"image/svg+xml"}),svgFile=new File([svgBlob],toggleFileName,{type:svgBlob.type,lastModified:Date.now()});toggleFile=svgFile;const thisMap=instance.currentMap,blobModel={_id:instance.epubBlobIdMaker(thisMap.projectId),date:new Date,projectId:thisMap.projectId,key:"blob",fileName:svgFile.name,absolute:instance.absoluteBase.image+"/"+svgFile.name,data:svgFile},{_id}=await back.frontCreate(instance.collectionBlob,blobModel);thisMap.tree.image.push(instance.valueParser("encode",_id,svgFile.name)),await back.frontUpdate(instance.collectionMap,[{_id:thisMap._id},thisMap]),instance.currentMap=thisMap}if(thisHtml="",totalCss=`input {\n${indent}display: none !important;\n}\n\n`,"button"===mode)totalCss+=`#${thisButtonId} + label .button_base {\n${indent}display: flex;\n${indent}flex-direction: row;\n${indent}justify-content: center;\n${indent}align-items: center;\n}\n\n`,totalCss+=buttonOffString+"\n\n"+buttonOnString+"\n\n",totalCss+=`#${thisButtonId}:checked + label .button_off {\n${indent}display: none;\n}\n\n`,totalCss+=`#${thisButtonId}:checked + label .button_on {\n${indent}display: ${buttonStyle.display};\n}\n\n`,thisHtml=[`<input type="checkbox" id="${thisButtonId}" />`,`<label for="${thisButtonId}">`,`${indent}<span class="button_base">`,`${indent}${indent}<span class="button_off">버튼 Off</span>`,`${indent}${indent}<span class="button_on">버튼 On</span>`,`${indent}</span>`,"</label>"].join("\n");else if("toggle"===mode)if(totalCss+=`#${thisButtonId} + label .toggle_base {\n${indent}display: flex;\n${indent}flex-direction: row;\n${indent}justify-content: start;\n${indent}align-items: center;\n}\n\n`,totalCss+=`#${thisButtonId} + label .toggle_triangle {\n${indent}display: inline-flex;\n${indent}mix-blend-mode: difference;\n${indent}height: 0.6rem;\n${indent}width: 0.6rem;\n${indent}margin-left: 0.1rem;\n${indent}margin-right: 0.3rem;\n${indent}transform-origin: 50% 50%;\n${indent}transition: all 0.3s ease;\n${indent}transform: rotate(0deg);\n${indent}flex-grow: 0;\n${indent}flex-shrink: 0;\n}\n\n`,totalCss+=toggleString+"\n\n",totalCss+=`#${thisButtonId}:checked + label .toggle_triangle {\n${indent}transform: rotate(90deg);\n}\n\n`,null===document.querySelector("."+instance.whitePreviewPopupClassName))thisHtml=[`<input type="checkbox" id="${thisButtonId}" />`,`<label for="${thisButtonId}">`,`${indent}<span class="toggle_base">`,`${indent}${indent}<img class="toggle_triangle" alt="토글 기호입니다." src="${String(instance.isInChapter?"../..":"..")}/Images/${toggleFileName}" />`,`${indent}${indent}<span class="toggle_words">토글 내용을 적어주세요!</span>`,`${indent}</span>`,"</label>"].join("\n");else{const url=URL.createObjectURL(toggleFile);thisHtml=[`<input type="checkbox" id="${thisButtonId}" />`,`<label for="${thisButtonId}">`,`${indent}<span class="toggle_base">`,`${indent}${indent}<img class="toggle_triangle" alt="토글 기호입니다." src="${url}" data-originalsrc="${String(instance.isInChapter?"../..":"..")}/Images/${toggleFileName}" />`,`${indent}${indent}<span class="toggle_words">토글 내용을 적어주세요!</span>`,`${indent}</span>`,"</label>"].join("\n")}else totalCss+=radioOnString+"\n\n",totalCss+=`${radioTextOnString}\n\n`,totalCss+=`#${thisButtonId}:checked + label .radio_button, #${thisButtonId2}:checked + label .radio_button {\n${indent}background: ${colorChip.mint};\n}\n\n`,totalCss+=`#${thisButtonId}:checked + label .radio_words, #${thisButtonId2}:checked + label .radio_words {\n${indent}color: ${colorChip.mint};\n}\n\n`,thisHtml=[`<input type="radio" id="${thisButtonId}" name="${radioButtonName}" />`,`<label for="${thisButtonId}">`,`${indent}<span class="radio_words">선택 사항의 첫 번째 항목입니다.<span class="radio_button"></span></span>`,"</label>",`<input type="radio" id="${thisButtonId2}" name="${radioButtonName}" />`,`<label for="${thisButtonId2}">`,`${indent}<span class="radio_words">선택 사항의 두 번째 항목입니다.<span class="radio_button"></span></span>`,"</label>"].join("\n");whiteBase=createAbstract({mother:totalContents,class:["buttonHelperPopupClassName"],style:{position:"fixed",width:forceBoxWidthBoo?boxWidth:withOut(2*topOuterMargin,"px"),height:withOut(String(100)+"vh",2*topOuterMargin),top:topOuterMargin,left:forceBoxWidthBoo?withOut(50,boxWidth/2,"px"):pixelUnit(topOuterMargin),borderRadius:whiteBaseRadius,background:colorExtended.gray1,animation:"fadeuporiginal 0.5s ease forwards",zIndex:150,flexDirection:"column",overflow:"hidden"},child:{style:{display:"block",width:withOut(0),height:withOut(modeAreaHeight),flexShrink:0,flexGrow:0},child:{style:{display:"flex",flexDirection:"row",width:withOut(0),height:withOut(0),paddingLeft:tongMargin,paddingRight:tongMargin,paddingTop:gap,paddingBottom:tongMargin,boxSizing:"border-box"},child:{style:{display:"flex",flexDirection:"column",width:withOut(0),height:withOut(0),boxSizing:"border-box",marginRight:1.5*gap,flexShrink:1,flexGrow:1}}},previous:{style:{display:"flex",height:modeAreaHeight,width:withOut(0),flexDirection:"row",flexShrink:0,flexGrow:0,boxSizing:"border-box",paddingLeft:tongMargin,paddingRight:tongMargin,paddingTop:tongMarginTop,justifyContent:"start",alignItems:"center"},children:[{style:{display:"inline-flex",flexDirection:"row",height:withOut(0),justifyContent:"start",alignItems:"center"},child:{text:"mode: ",style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.darkDarkBlack,wordSpacing:titleWordSpacing}}},...buttonList.map((s,i)=>({attribute:{value:s},event:{selectstart:e=>e.preventDefault,click:async e=>{const value=e.currentTarget.mustAttribute("value"),motherArr=[...document.querySelectorAll(".buttonHelperPopupClassName")];if(motherArr.length>1){const[,whiteBase]=motherArr.map(d=>d);whiteBase.style.animation="fadedown 0.3s ease forwards",setQueue(async()=>{whiteBase.remove(),await makeVisualWhitePopup(value)},301)}}},style:{display:"inline-flex",flexDirection:"row",height:withOut(0),justifyContent:"end",alignItems:"center",paddingLeft:buttonTitleSize+1,cursor:"pointer"},children:[{mode:"svg",source:AbstractNode.svgMaker.checkBox(i===buttonList.findIndex(a=>a===mode)?colorChip.mint:colorChip.deactive),style:{width:Math.ceil(titleSize/2)+1,marginRight:modeButtonRight,marginTop:modeButtonVisualTop}},{event:{selectstart:e=>e.preventDefault},text:s,style:{fontSize:buttonTitleSize,fontWeight:300,color:i===buttonList.findIndex(a=>a===mode)?colorChip.mint:colorChip.deactive,wordSpacing:titleWordSpacing}}]}))]}}}).children[1],whiteTong=whiteBase.children[0],whiteBase=whiteTong.children[0],instance.setCssSupportButtons(whiteTong,150),cssBase=createAbstract({mother:whiteBase,style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr",rowGap:2*gap,columnGap:1.5*gap,flexGrow:1,flexShrink:1,marginBottom:1.5*gap,minHeight:0}});for(let i=0;i<buttonTargetTitles.length;i++){const thisCssMother0=createAbstract({mother:cssBase,style:{display:"flex",flexDirection:"column",width:withOut(0),flexShrink:1,minHeight:0},children:[{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:gap*(2/3),minHeight:0,flexShrink:0},child:{text:buttonTargetTitles[i],style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.darkDarkBlack,wordSpacing:titleWordSpacing}}},{style:{width:withOut(2*editorInnerMargin),background:colorChip.white,borderRadius:innerCssBoxBorderRadius,flexGrow:1,overflow:"scroll",padding:editorInnerMargin,minHeight:0,flexShrink:1},child:{attribute:{"four-index":String(i)},event:{dragenter$dragover$dragstart$dragleave:e=>{e.stopPropagation(),e.preventDefault()},drop:async event=>{event.preventDefault();const self=event.currentTarget,index=Number(self.mustAttribute("four-index")),view=fiveView[index],docString=view.state.doc.toString();let position,i0,i1,i2,targetCssStrings,totalCssString,newState,beforeString,afterString;try{position=view.posAtCoords({x:event.clientX,y:event.clientY}),null===position&&(position=docString.length-1);const lineStartPos=view.state.doc.lineAt(position).from,thisText=event.dataTransfer.getData("text/plain"),standard=thisText.split(":")[0].trim();if(beforeString=docString.slice(0,position),afterString=docString.slice(position),i0=beforeString.split("").findLastIndex(s=>"{"===s),i1=beforeString.split("").findLastIndex(s=>"}"===s),-1===i1)if(-1===i0){if(i0=docString.split("").findIndex(s=>"{"===s),-1===i0)throw new Error(thisText);if(afterString=docString.slice(i0),position=i0,i2=afterString.split("").findIndex(s=>"}"===s),-1===i2){targetCssStrings=docString.slice(i0+1),new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=docString.slice(0,i0+1)+targetCssStrings+"\n\n}";try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}else{targetCssStrings=docString.slice(i0+1,position+i2),new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=docString.slice(0,i0+1)+targetCssStrings+docString.slice(position+i2);try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}}else if(i2=afterString.split("").findIndex(s=>"}"===s),-1===i2){targetCssStrings=docString.slice(i0+1),new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=docString.slice(0,i0+1)+targetCssStrings+"\n\n}";try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}else{targetCssStrings=docString.slice(i0+1,position+i2),new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=docString.slice(0,i0+1)+targetCssStrings+docString.slice(position+i2);try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}else{if(-1===i0)throw new Error(thisText);if(i0<=i1&&(afterString=docString.slice(i0),position=i0),i2=afterString.split("").findIndex(s=>"}"===s),-1===i2){targetCssStrings=docString.slice(i0+1),new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=docString.slice(0,i0+1)+targetCssStrings+"\n\n}";try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}else{targetCssStrings=docString.slice(i0+1,position+i2),new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=docString.slice(0,i0+1)+targetCssStrings+docString.slice(position+i2);try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}}view.dispatch({selection:dist_EditorSelection.cursor(lineStartPos),scrollIntoView:!0}),view.focus()}catch(e){const thisText=e.message.trim(),standard=thisText.split(":")[0].trim();targetCssStrings=docString,new RegExp(standard,"g").test(targetCssStrings)&&(targetCssStrings=targetCssStrings.split(";").filter(s=>!new RegExp(standard,"g").test(s)).join(";")),targetCssStrings=targetCssStrings+";\n;\n"+thisText+";\n";try{targetCssStrings=await PrettyCss.launching(targetCssStrings),targetCssStrings=targetCssStrings.replace(/['"]__temptemptempvalue__['"]/gis,'""')}catch{}totalCssString=targetCssStrings;try{totalCssString=await PrettyCss.launching(totalCssString)}catch{}newState=view.state.update({changes:{from:0,to:view.state.doc.length,insert:totalCssString}}),view.dispatch(newState)}}},style:{width:withOut(0),background:colorChip.white,paddingBottom:visualPaddingBottom,minHeight:0,flexShrink:1}}}]}).children[1].children[0];if(i<1){const thisView0=await instance.editorInit("css-mini",thisCssMother0,totalCss,{numberView:!0,events:EditorView.domEventHandlers({contextmenu:(event,view)=>{},blur:(event,view)=>{blurAndUpdateEvent(event)},keydown:(event,view)=>{setTimeout(()=>{blurAndUpdateEvent(event)},1)},click:(event,view)=>{blurAndUpdateEvent(event)}})});fiveView.push(thisView0)}else if(i===buttonTargetTitles.length-1)if("radio"===thisMode){const thisView0=await instance.editorInit("css-mini",thisCssMother0,[`#${thisButtonId}:checked + label + #${thisButtonId2} + label + .${targetClass} {`,`${indent}transition: all 0.3s ease;`,`${indent}`,"}","",`#${thisButtonId2}:checked + label + .${targetClass} {`,`${indent}transition: all 0.3s ease;`,`${indent}`,"}"].join("\n"),{numberView:!0,events:EditorView.domEventHandlers({contextmenu:(event,view)=>{}})});fiveView.push(thisView0)}else{const thisView0=await instance.editorInit("css-mini",thisCssMother0,[`#${thisButtonId}:checked + label + .${targetClass} {`,`${indent}transition: all 0.3s ease;`,`${indent}`,"}"].join("\n"),{numberView:!0,events:EditorView.domEventHandlers({contextmenu:(event,view)=>{}})});fiveView.push(thisView0)}else{const thisView0=await instance.editorInit("css-mini",thisCssMother0,[`.${targetClass} {`,`${indent}transition: all 0.3s ease;`,`${indent}`,"}"].join("\n"),{numberView:!0,events:EditorView.domEventHandlers({contextmenu:(event,view)=>{}})});fiveView.push(thisView0)}}htmlAndPreviewBase=createAbstract({mother:whiteBase,style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr",gap:1.5*gap,flexGrow:1,flexShrink:0}});const thisHtmlMother=createAbstract({mother:htmlAndPreviewBase,style:{display:"flex",flexDirection:"column"},children:[{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:gap*(2/3),flexShrink:0},child:{text:"Html",style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.darkDarkBlack,wordSpacing:titleWordSpacing}}},{style:{width:withOut(2*editorInnerMargin),background:colorChip.white,borderRadius:innerCssBoxBorderRadius,flexGrow:1,overflow:"scroll",padding:editorInnerMargin},child:{style:{width:withOut(0),background:colorChip.white}}}]}).children[1].children[0],htmlView1=await instance.editorInit("html-mini",thisHtmlMother,thisHtml,{events:EditorView.domEventHandlers({contextmenu:(event,view)=>{},blur:(event,view)=>{blurAndUpdateEvent(event)},keydown:(event,view)=>{setTimeout(()=>{blurAndUpdateEvent(event)},0)},click:(event,view)=>{blurAndUpdateEvent(event)}})});if(fiveView.push(htmlView1),"button"===mode){createAbstract({mother:htmlAndPreviewBase,style:{display:"flex",flexDirection:"column"},children:[{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:gap*(2/3),flexShrink:0},child:{text:"Off status",style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.darkDarkBlack,wordSpacing:titleWordSpacing}}},{style:{width:withOut(0),background:colorChip.transparent,border:"1px dashed "+colorChip.gray5,borderRadius:innerCssBoxBorderRadius,flexGrow:1,overflow:"hidden",padding:editorInnerMargin,boxSizing:"border-box",display:"grid",gridTemplateColumns:"1fr"},children:[{style:{display:"flex",justifyContent:"center",alignItems:"center",width:withOut(0),height:withOut(0),paddingTop:editorInnerMargin,paddingBottom:editorInnerMargin,background:colorChip.white,borderRadius:innerCssBoxBorderRadius,boxShadow:"0px 2px 14px -12px "+colorChip.shadow,boxSizing:"border-box"},child:{class:["buttonOffClassName"],event:{click:async e=>{const promptResult=await promptPopup("버튼 텍스트를 알려주세요!");null!==promptResult&&await htmlDomUpdateEvent(e,"off",promptResult)}},text:"버튼 Off",style:{...buttonStyle,background:colorChip.gray2,color:colorChip.deactive}}}]}]}),createAbstract({mother:htmlAndPreviewBase,style:{display:"flex",flexDirection:"column"},children:[{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:gap*(2/3),flexShrink:0},child:{text:"On status",style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.darkDarkBlack,wordSpacing:titleWordSpacing}}},{style:{width:withOut(0),background:colorChip.transparent,border:"1px dashed "+colorChip.gray5,borderRadius:innerCssBoxBorderRadius,flexGrow:1,overflow:"hidden",padding:editorInnerMargin,boxSizing:"border-box",display:"grid",gridTemplateColumns:"1fr"},children:[{style:{display:"flex",justifyContent:"center",alignItems:"center",width:withOut(0),height:withOut(0),background:colorChip.white,borderRadius:innerCssBoxBorderRadius,boxShadow:"0px 2px 14px -12px "+colorChip.shadow,boxSizing:"border-box"},child:{event:{click:async e=>{const promptResult=await promptPopup("버튼 텍스트를 알려주세요!");null!==promptResult&&await htmlDomUpdateEvent(e,"on",promptResult)}},class:["buttonOnClassName"],text:"버튼 On",style:{...buttonStyle,background:colorChip.mint,color:colorChip.white}}}]}]})}else if("toggle"===mode){createAbstract({mother:htmlAndPreviewBase,style:{display:"flex",flexDirection:"column"},children:[{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:gap*(2/3),flexShrink:0},child:{text:"Preview",style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.darkDarkBlack,wordSpacing:titleWordSpacing}}},{style:{width:cssCalc(String(200)+"%","+",1.5*gap),background:colorChip.transparent,border:"1px dashed "+colorChip.gray5,borderRadius:innerCssBoxBorderRadius,flexGrow:1,flexShrink:0,overflow:"hidden",padding:editorInnerMargin,boxSizing:"border-box",display:"grid",gridTemplateColumns:"1fr"},children:[{style:{display:"flex",justifyContent:"center",flexDirection:"row",alignItems:"center",width:withOut(0),height:withOut(0),paddingTop:editorInnerMargin,paddingBottom:editorInnerMargin,background:colorChip.white,borderRadius:innerCssBoxBorderRadius,boxShadow:"0px 2px 14px -12px "+colorChip.shadow,boxSizing:"border-box"},child:{class:["togglePreviewClassName"],event:{click:async e=>{const promptResult=await promptPopup("토글 문구를 알려주세요!");null!==promptResult&&await htmlDomUpdateEvent(e,"off",promptResult)}},text:"토글 내용을 적어주세요!",style:{...toggleStyle,color:black},previous:{mode:"svg",source:AbstractNode.svgMaker.toggleIcon(black),style:{display:"inline-flex",height:String(.6)+rem,marginLeft:String(.1)+rem,marginRight:String(.3)+rem,transformOrigin:"50% 50%",transition:"all 0.3s ease",transform:"rotate(0deg)",flexGrow:0,flexShrink:0}}}}]}]})}else{createAbstract({mother:htmlAndPreviewBase,style:{display:"flex",flexDirection:"column"},children:[{style:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"start",marginBottom:gap*(2/3),flexShrink:0},child:{text:"Preview",style:{fontSize:titleSize,fontWeight:titleWeight,color:colorChip.darkDarkBlack,wordSpacing:titleWordSpacing}}},{style:{width:cssCalc(String(200)+"%","+",1.5*gap),background:colorChip.transparent,border:"1px dashed "+colorChip.gray5,borderRadius:innerCssBoxBorderRadius,flexGrow:1,flexShrink:0,overflow:"hidden",padding:editorInnerMargin,boxSizing:"border-box",display:"grid",gridTemplateColumns:"1fr"},children:[{style:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",width:withOut(0),height:withOut(0),paddingTop:editorInnerMargin,paddingBottom:editorInnerMargin,background:colorChip.white,borderRadius:innerCssBoxBorderRadius,boxShadow:"0px 2px 14px -12px "+colorChip.shadow,boxSizing:"border-box"},children:[{class:["radioOnPreviewClassName"],event:{click:async e=>{const promptResult=await promptPopup("토글 문구를 알려주세요!");null!==promptResult&&await htmlDomUpdateEvent(e,"off",promptResult)}},text:"선택 사항의 첫 번째 항목입니다.",style:{...radioStyle,color:colorChip.mint},child:{style:{...radioButtonStyle,background:colorChip.mint}}},{class:["radioOffPreviewClassName"],event:{click:async e=>{const promptResult=await promptPopup("토글 문구를 알려주세요!");null!==promptResult&&await htmlDomUpdateEvent(e,"off",promptResult)}},text:"선택 사항의 두 번째 항목입니다.",style:{...radioStyle,color:black},child:{style:{...radioButtonStyle}}}]}]}]})}};await makeVisualWhitePopup("button")}catch(e){console.log(e),reject(e)}})};rawTextPopup=()=>{const instance=this,{colorChip,svgMaker:localSvgMaker,binaryPath}=Helper,{withOut,percent,promptPopup,markdownBlocks,equalJson,ajaxForm,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(),{standardWidth,totalContents,naviHeight}=this;return new Promise(async(resolve,reject)=>{try{const zIndex=104;let cancelBack,whiteBase,rawStringArray,whiteBaseRadius,tongMargin,tongMarginTop,linesCloseEvent,outerMargin,black,white,mouseDown,isDownDoing,titleBlockHeight,contentsArea,titleBlockMarginBottom,blockRender,buttonWidth,buttonHeight,buttonRadius,buttonSize,buttonWeight,buttonBetween,buttonVisualTop,completeEvent,blockPaddingTop,blockPaddingLeft,blockBorderRadius,blockBetween,blockContentsSize,blockContentsWeight,titleSize,titleWeight,thisView;rawStringArray=[],whiteBaseRadius=mediaNumber(12,12,10,9,2),tongMargin=mediaNumber(48,40,36,32,5.2),tongMarginTop=mediaNumber(38,32,27,25,5.2),outerMargin=mediaNumber(48,40,36,32,5.2),titleBlockHeight=mediaNumber(41,41,40,38,4),titleBlockMarginBottom=mediaNumber(15,15,15,15,1),buttonWidth=mediaNumber(54,54,52,50,5),buttonHeight=mediaNumber(29,29,26,25,2),buttonBetween=mediaNumber(3,3,2,2,1),buttonRadius=mediaNumber(4,4,4,4,4),buttonSize=mediaNumber(13.5,13.5,12.5,12,1),buttonWeight=mediaNumber(800,800,800,800,800),buttonVisualTop=mediaNumber(1.5,1.5,1,1,0),blockPaddingTop=mediaNumber(8,8,7,6,1),blockPaddingLeft=mediaNumber(15,15,14,13,3),blockBorderRadius=mediaNumber(8,8,8,7,8),blockBetween=mediaNumber(3,3,2,2,3),blockContentsSize=mediaNumber(15,15,14,13,15),blockContentsWeight=mediaNumber(400,400,400,400,400),titleSize=mediaNumber(24,24,23.5,23.5,26),titleWeight=mediaNumber(900,900,900,900,900),black=colorChip.darkDarkBlack,white=colorChip.white,mouseDown=!1,isDownDoing=!1,thisView={},blockRender=rawStringArray=>{},linesCloseEvent=e=>{const motherArr=[...document.querySelectorAll(".rawTextPopupClassName")];if(motherArr.length>1){const[cancel,whiteBase]=motherArr.map(d=>d);cancel.style.animation="justfadeoutsmall 0.5s ease forwards",whiteBase.style.animation="fadedown 0.5s ease forwards",setQueue(()=>{removeByClass("rawTextPopupClassName"),resolve("")},500)}},completeEvent=()=>e=>{const blockTargets=selectByClass("rawTextBlockClassName");let updatedTargets,thisText;updatedTargets=[],thisText="";for(let b of blockTargets)"on"!==b.getAttribute("toggle")&&(thisText=b.firstChild.textContent,thisText=thisText.replace(/  /gi," "),updatedTargets.push(thisText));const motherArr=[...document.querySelectorAll(".rawTextPopupClassName")];if(motherArr.length>1){const[cancel,whiteBase]=motherArr.map(d=>d);cancel.style.animation="justfadeoutsmall 0.5s ease forwards",whiteBase.style.animation="fadedown 0.5s ease forwards",setQueue(()=>{removeByClass("rawTextPopupClassName"),resolve(thisView.state.doc.toString())},500)}},cancelBack=createAbstract({mother:totalContents,class:["rawTextPopupClassName"],event:{click:linesCloseEvent},style:{position:"fixed",top:0,left:0,width:withOut(0),height:withOut(0),opacity:0,animation:"justfadeinsmall 0.4s ease forwards",background:colorExtended.black,zIndex}}),whiteBase=createAbstract({mother:totalContents,class:["rawTextPopupClassName"],event:{click:e=>e.stopPropagation()},style:{position:"fixed",width:standardWidth,height:withOut(2*outerMargin,ea),top:outerMargin,left:withOut(50,standardWidth/2,ea),borderRadius:whiteBaseRadius,background:colorExtended.white,animation:"fadeup 0.5s ease forwards",zIndex,flexDirection:"column",overflow:"hidden"},child:{event:{click:e=>e.stopPropagation()},style:{display:"block",width:withOut(0),height:withOut(0),overflow:"scroll"},child:{event:{click:e=>{e.stopPropagation()}},style:{display:"block",width:withOut(2*tongMargin),height:withOut(tongMarginTop),paddingLeft:tongMargin,paddingRight:tongMargin,paddingTop:tongMarginTop}}}}).children[0].children[0],createAbstract({mother:whiteBase,event:{selectstart:e=>e.preventDefault()},style:{diplay:"flex",justifyContent:"end",alignItems:"start",textAlign:"left",marginBottom:titleBlockMarginBottom,height:titleBlockHeight,flexDirection:"row-reverse"},children:[{style:{display:"inline-flex",height:withOut(buttonVisualTop),justifyContent:"center",alignItems:"center",flexDirection:"row"},children:[{event:{click:e=>{e.stopPropagation();const self=e.currentTarget;completeEvent().bind(self)(e)}},style:{width:buttonWidth,height:buttonHeight,borderRadius:buttonRadius,background:colorChip.darkBlack,display:"inline-flex",column:"row",justifyContent:"center",alignItems:"center"},child:{text:"완료",style:{fontFamily:"pretendard",fontSize:buttonSize,fontWeight:buttonWeight,color:white}}}]},{event:{selectstart:e=>e.preventDefault()},text:"원문을 작성해주세요!",style:{display:"inline-flex",fontFamily:"pretendard",fontSize:titleSize,fontWeight:titleWeight,color:black,textAlign:"left",flexGrow:1}}]}),contentsArea=createAbstract({mother:whiteBase,style:{display:"block",height:withOut(titleBlockMarginBottom+titleBlockHeight+tongMarginTop),overflow:"scroll",paddingBottom:tongMarginTop},child:{style:{display:"flex",flexColumn:"column",width:withOut(0)}}});const htmlView=await instance.editorInit("html-mini",contentsArea.children[0],"",{events:EditorView.domEventHandlers({contextmenu:(event,view)=>{}})});thisView=htmlView,whiteBase.addEventListener("click",async e=>{thisView.focus()}),thisView.focus()}catch(e){console.log(e),reject(e)}})};sixImageGenerate=async(self,imageInfo=[])=>{const instance=this,{colorChip,svgMaker:localSvgMaker,binaryPath}=(this.back,PathAnimator),{withOut,percent,promptPopup,contextmenuPopup,transformCss,currentCssList,colorPicker,setDebounce,setDomColor,selectByQuery,markdownBlocks,domCssDictionary,linkToString,hangulToEnglish,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight,shadowDomTargetClassName}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(),modeDictionary=instance.modeDictionary;try{const thisId=self.getAttribute("data-dropid"),cssEditorView=instance.cssView,currentCssText=cssEditorView.state.doc.toString(),targetShadow=instance.shadowDoms.find(d=>[...d.querySelector("."+shadowDomTargetClassName).shadowRoot.querySelectorAll(self.nodeName)].includes(self)),targetShadowOrder=Number(targetShadow.mustAttribute("order")),thisBaseId="r_"+uniqueValue("short"),mediaCssString=instance.responsiveMediaCss.meida.join("\n"),darkCssString=instance.responsiveMediaCss.dark.join("\n"),mainDivTongClassName=instance.imageResponseDivClassName,displayNoneBaseImgClassName=instance.imageResponsive,mediaClassNamesArray=instance.imageMediaClassNames,darkClassNamesArray=instance.imageDarkClassNames;let mediaMode,mediaTarget,mediaSize,thisMediaMode,mediaIndex,thisIndex,thisDarkPairIndex,finalDom;if(finalDom=null,!(imageInfo.length>0))throw new Error("empty image info");if(mediaMode=!1,instance.shadowDoms.length>1&&(mediaMode=targetShadowOrder<instance.shadowDoms.length-1),instance.shadowDoms.length-1===targetShadowOrder&&(mediaMode=/div/gi.test(self.nodeName.toLowerCase())&&self.children.length>=2&&/img/gi.test(self.children[0].nodeName.toLowerCase())),instance.isInDarkMode&&(mediaMode=!0),mediaTarget=targetShadow.mustAttribute("kind"),mediaSize=modeDictionary[mediaTarget],thisMediaMode=/모바일/gi.test(mediaSize.title)?"mobile":/데스크탑/gi.test(mediaSize.title)?"desktop":"tablet",mediaIndex="mobile"===thisMediaMode?0:"tablet"===thisMediaMode?1:2,instance.shadowDoms.forEach(d=>{d.querySelector("."+shadowDomTargetClassName).shadowRoot;const thisKind=d.mustAttribute("kind");thisIndex=/mobile/gi.test(thisKind)?0:/tablet/gi.test(thisKind)&&"bigTablet"!==thisKind?2:4,instance.isInDarkMode?(thisDarkPairIndex=thisIndex,thisIndex+=1):thisDarkPairIndex=thisIndex+1}),!new RegExp("."+mainDivTongClassName,"g").test(currentCssText)){const newCssState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:currentCssText+"\n\n"+mediaCssString+"\n\n"+darkCssString}});cssEditorView.dispatch(newCssState)}if(instance.shadowHistory((d,shadowIndex)=>{const shadow=d.querySelector("."+shadowDomTargetClassName).shadowRoot,thisSelf=shadow.querySelector('[data-dropid="'+thisId+'"]'),parent=thisSelf.parentNode,nextDom=thisSelf.nextElementSibling,thisKind=d.mustAttribute("kind");if(/img/gi.test(thisSelf.nodeName)){const styleTag=shadow.querySelector("style"),outputTag=shadow.querySelector("output");new RegExp("."+mainDivTongClassName,"g").test(styleTag.innerHTML)||(instance.isInDarkMode?styleTag.innerHTML=styleTag.innerHTML+"\n\n"+mediaCssString+"\n\n"+darkCssString.replace(/prefers-color-scheme\:\s*dark/gis,"min-width: 8px"):styleTag.innerHTML=styleTag.innerHTML+"\n\n"+mediaCssString,outputTag.innerHTML=outputTag.innerHTML+"\n\n"+darkCssString.replace(/prefers-color-scheme\:\s*dark/gis,"min-width: 8px")),styleTag.innerHTML=instance.mediaInPreview(thisKind,styleTag.innerHTML),outputTag.innerHTML=instance.mediaInPreview(thisKind,outputTag.innerHTML);const preAlt=null===thisSelf.getAttribute("alt")?"이미지 설명":String(thisSelf.getAttribute("alt")),targetMother=document.createElement("DIV");if(targetMother.classList.add(mainDivTongClassName),targetMother.id=thisBaseId,targetMother.setAttribute("data-dropid",String(thisSelf.getAttribute("data-dropid"))),targetMother.style.animation="",instance.isInDarkMode)for(let i=0;i<mediaClassNamesArray.length;i++)for(let j=0;j<darkClassNamesArray.length;j++)if(1===j){const target=document.createElement("IMG");target.classList.add(mediaClassNamesArray[i]+"_"+darkClassNamesArray[j]),target.classList.add(displayNoneBaseImgClassName),target.setAttribute("alt",preAlt),target.src=imageInfo[0].src,target.setAttribute("data-originalsrc",imageInfo[0].originalSrc),target.style.animation="",targetMother.appendChild(target)}else{const selfCopied=thisSelf.cloneNode(!0);selfCopied.classList.contains(mediaClassNamesArray[i]+"_"+darkClassNamesArray[j])||selfCopied.classList.add(mediaClassNamesArray[i]+"_"+darkClassNamesArray[j]),selfCopied.classList.contains(displayNoneBaseImgClassName)||selfCopied.classList.add(displayNoneBaseImgClassName);try{selfCopied.classList.remove("____shadow__doms__tempclassname__temp____")}catch{}selfCopied.setAttribute("alt",preAlt),selfCopied.removeAttribute("draggable"),selfCopied.removeAttribute("data-dropid"),selfCopied.style.animation="",targetMother.appendChild(selfCopied)}else for(let i=0;i<mediaClassNamesArray.length;i++)for(let j=0;j<darkClassNamesArray.length;j++)if(i===mediaIndex){const target=document.createElement("IMG");target.classList.add(mediaClassNamesArray[i]+"_"+darkClassNamesArray[j]),target.classList.add(displayNoneBaseImgClassName),target.setAttribute("alt",preAlt),target.src=imageInfo[0].src,target.setAttribute("data-originalsrc",imageInfo[0].originalSrc),target.style.animation="",targetMother.appendChild(target)}else{const selfCopied=thisSelf.cloneNode(!0);selfCopied.classList.contains(mediaClassNamesArray[i]+"_"+darkClassNamesArray[j])||selfCopied.classList.add(mediaClassNamesArray[i]+"_"+darkClassNamesArray[j]),selfCopied.classList.contains(displayNoneBaseImgClassName)||selfCopied.classList.add(displayNoneBaseImgClassName);try{selfCopied.classList.remove("____shadow__doms__tempclassname__temp____")}catch{}selfCopied.setAttribute("alt",preAlt),selfCopied.removeAttribute("draggable"),selfCopied.removeAttribute("data-dropid"),selfCopied.style.animation="",targetMother.appendChild(selfCopied)}instance.domToEventSet(targetMother,0,360,!1),null!==nextDom?parent.insertBefore(targetMother,nextDom):parent.appendChild(targetMother),thisSelf.remove(),targetShadow===d&&(finalDom=targetMother)}else if(/div/gi.test(thisSelf.nodeName))if(6===thisSelf.children.length&&/img/gi.test(thisSelf.children[0].nodeName)){const styleTag=shadow.querySelector("style"),outputTag=shadow.querySelector("output");new RegExp("."+mainDivTongClassName,"g").test(styleTag.innerHTML)||(instance.isInDarkMode?styleTag.innerHTML=styleTag.innerHTML+"\n\n"+mediaCssString+"\n\n"+darkCssString.replace(/prefers-color-scheme\:\s*dark/gis,"min-width: 8px"):styleTag.innerHTML=styleTag.innerHTML+"\n\n"+mediaCssString,outputTag.innerHTML=outputTag.innerHTML+"\n\n"+darkCssString.replace(/prefers-color-scheme\:\s*dark/gis,"min-width: 8px")),styleTag.innerHTML=instance.mediaInPreview(thisKind,styleTag.innerHTML),outputTag.innerHTML=instance.mediaInPreview(thisKind,outputTag.innerHTML);const targetImg=thisSelf.children[0],preAlt=null===targetImg.getAttribute("alt")?"이미지 설명":String(targetImg.getAttribute("alt"));thisSelf.style.animation="";const childrenListRaw=[...thisSelf.children].map(d=>d),childrenList=[childrenListRaw.find(d=>d.classList.contains(mediaClassNamesArray[0]+"_"+darkClassNamesArray[0])),childrenListRaw.find(d=>d.classList.contains(mediaClassNamesArray[0]+"_"+darkClassNamesArray[1])),childrenListRaw.find(d=>d.classList.contains(mediaClassNamesArray[1]+"_"+darkClassNamesArray[0])),childrenListRaw.find(d=>d.classList.contains(mediaClassNamesArray[1]+"_"+darkClassNamesArray[1])),childrenListRaw.find(d=>d.classList.contains(mediaClassNamesArray[2]+"_"+darkClassNamesArray[0])),childrenListRaw.find(d=>d.classList.contains(mediaClassNamesArray[2]+"_"+darkClassNamesArray[1]))],darkIndex=instance.isInDarkMode?1:0;for(let i=0;i<mediaClassNamesArray.length;i++)for(let j=0;j<darkClassNamesArray.length;j++)if(i===mediaIndex&&j===darkIndex){const target=childrenList[2*i+j];target.classList.contains(mediaClassNamesArray[i]+"_"+darkClassNamesArray[j])||target.classList.add(mediaClassNamesArray[i]+"_"+darkClassNamesArray[j]),target.classList.contains(displayNoneBaseImgClassName)||target.classList.add(displayNoneBaseImgClassName);try{target.classList.remove("____shadow__doms__tempclassname__temp____")}catch{}target.setAttribute("alt",preAlt),target.src=imageInfo[0].src,target.setAttribute("data-originalsrc",imageInfo[0].originalSrc),target.removeAttribute("draggable"),target.removeAttribute("data-dropid"),target.style.animation=""}else{const selfCopied=childrenList[2*i+j];selfCopied.classList.contains(mediaClassNamesArray[i]+"_"+darkClassNamesArray[j])||selfCopied.classList.add(mediaClassNamesArray[i]+"_"+darkClassNamesArray[j]),selfCopied.classList.contains(displayNoneBaseImgClassName)||selfCopied.classList.add(displayNoneBaseImgClassName);try{selfCopied.classList.remove("____shadow__doms__tempclassname__temp____")}catch{}selfCopied.setAttribute("alt",preAlt),selfCopied.removeAttribute("draggable"),selfCopied.removeAttribute("data-dropid"),selfCopied.style.animation=""}targetShadow===d&&(finalDom=thisSelf)}else if(thisSelf.children.length>=1&&thisSelf.children.length<6&&/img/gi.test(thisSelf.children[0].nodeName)){const styleTag=shadow.querySelector("style"),outputTag=shadow.querySelector("output");new RegExp("."+mainDivTongClassName,"g").test(styleTag.innerHTML)||(instance.isInDarkMode?styleTag.innerHTML=styleTag.innerHTML+"\n\n"+mediaCssString+"\n\n"+darkCssString.replace(/prefers-color-scheme\:\s*dark/gis,"min-width: 8px"):styleTag.innerHTML=styleTag.innerHTML+"\n\n"+mediaCssString,outputTag.innerHTML=outputTag.innerHTML+"\n\n"+darkCssString.replace(/prefers-color-scheme\:\s*dark/gis,"min-width: 8px")),styleTag.innerHTML=instance.mediaInPreview(thisKind,styleTag.innerHTML),outputTag.innerHTML=instance.mediaInPreview(thisKind,outputTag.innerHTML);const targetImg=thisSelf.children[0],preAlt=null===targetImg.getAttribute("alt")?"이미지 설명":String(targetImg.getAttribute("alt"));thisSelf.classList.contains(mainDivTongClassName)||(thisSelf.classList.add(mainDivTongClassName),thisSelf.id=thisBaseId),thisSelf.style.animation="";const childrenListRaw=[...thisSelf.children].map(d=>d),thisFinalTarget=childrenListRaw[childrenListRaw.length-1],targetLength=6-childrenListRaw.length,darkIndex=instance.isInDarkMode?1:0;for(let i=0;i<targetLength;i++){const selfCopied=thisFinalTarget.cloneNode(!0);try{selfCopied.classList.remove("____shadow__doms__tempclassname__temp____")}catch{}selfCopied.setAttribute("alt",preAlt),selfCopied.removeAttribute("draggable"),selfCopied.removeAttribute("data-dropid"),selfCopied.style.animation="",thisSelf.appendChild(selfCopied)}const childrenList=[...thisSelf.children].map(d=>d);for(let i=0;i<mediaClassNamesArray.length;i++)for(let j=0;j<darkClassNamesArray.length;j++){const ii=2*i+j;if(i===ii&&j===darkIndex){const target=childrenList[ii];target.classList.contains(mediaClassNamesArray[i]+"_"+darkClassNamesArray[j])||target.classList.add(mediaClassNamesArray[i]+"_"+darkClassNamesArray[j]),target.classList.contains(displayNoneBaseImgClassName)||target.classList.add(displayNoneBaseImgClassName);try{target.classList.remove("____shadow__doms__tempclassname__temp____")}catch{}target.setAttribute("alt",preAlt),target.src=imageInfo[0].src,target.setAttribute("data-originalsrc",imageInfo[0].originalSrc),target.removeAttribute("draggable"),target.removeAttribute("data-dropid"),target.style.animation=""}else{const selfCopied=childrenList[ii];selfCopied.classList.contains(mediaClassNamesArray[i]+"_"+darkClassNamesArray[j])||selfCopied.classList.add(mediaClassNamesArray[i]+"_"+darkClassNamesArray[j]),selfCopied.classList.contains(displayNoneBaseImgClassName)||selfCopied.classList.add(displayNoneBaseImgClassName);try{selfCopied.classList.remove("____shadow__doms__tempclassname__temp____")}catch{}selfCopied.setAttribute("alt",preAlt),selfCopied.removeAttribute("draggable"),selfCopied.removeAttribute("data-dropid"),selfCopied.style.animation=""}}targetShadow===d&&(finalDom=thisSelf)}else for(let info of imageInfo){const target=document.createElement("IMG");target.setAttribute("alt","이미지 설명"),target.src=info.src,target.setAttribute("data-dropid",info.dropId),target.setAttribute("data-originalsrc",info.originalSrc),target.style.animation="",instance.domToEventSet(target,0,360,!1),null!==nextDom?parent.insertBefore(target,nextDom):parent.appendChild(target),targetShadow===d&&(finalDom=target)}else for(let info of imageInfo){const target=document.createElement("IMG");target.setAttribute("alt","이미지 설명"),target.src=info.src,target.setAttribute("data-dropid",info.dropId),target.setAttribute("data-originalsrc",info.originalSrc),target.style.animation="",instance.domToEventSet(target,0,360,!1),null!==nextDom?parent.insertBefore(target,nextDom):parent.appendChild(target),targetShadow===d&&(finalDom=target)}}),null===finalDom)throw new Error("cannot create dom");return finalDom}catch(e){throw console.log(e),e}};driveConverting=async(storageMode=!1)=>{const instance=this,{baseTong,standardWidth,totalContents,naviHeight,iframePopupClassName,topBarHeight}=(this.back,this),{colorChip,svgMaker:localSvgMaker,binaryPath}=PathAnimator,{withOut,percent,pwaDetection,promptPopup,whiteCardEvent,markdownBlocks,linkToString,blankHref,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();try{let eventFunction,baseWidth,right,bottom,iconWidth,visual,buttonBetween;if("function"==typeof AbstractNode.events.whiteAsyncCloseEvent){const whiteCancelEvent=AbstractNode.events.whiteAsyncCloseEvent;await whiteCancelEvent(new Event("click"))}baseWidth=mediaNumber(55,55,52,48,12),right=mediaNumber(40,40,40,40,6),bottom=mediaNumber(41,41,41,41,6.4),iconWidth=mediaNumber(27,27,24,20,5.4),visual=mediaNumber(2.5,2.5,2,1.5,.5),buttonBetween=mediaNumber(10,10,8,7,1.3),eventFunction=whiteCardEvent(async scrollTong=>{scrollTong.style.width="100%",scrollTong.style.height="100%",scrollTong.style.paddingTop=String(0),scrollTong.style.paddingBottom=String(0),scrollTong.style.paddingRight=String(0),scrollTong.style.paddingLeft=String(0),instance.createDom({mother:scrollTong,mode:"iframe",attribute:{src:storageMode?"/reader/inner_storage":"/reader/inner_home"},style:{border:0,outline:0,background:colorChip.transparent,top:0,left:0,position:"absolute",width:withOut(0),height:withOut(0),overflow:"scroll"}})},!1,!0,!0,103,async e=>{await sleep(500)}),await eventFunction(new Event("click"))}catch(e){console.log(e)}};autoInspector=async(silentMode=!1)=>{const instance=this,voidElements=(this.back,this.voidElements),{colorChip,svgMaker:localSvgMaker,binaryPath}=PathAnimator,{withOut,percent,promptPopup,markdownBlocks,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();try{const htmlEditorView=instance.htmlView,cssEditorView=(htmlEditorView.state.selection,instance.cssView),currentCssText=cssEditorView.state.doc.toString(),currentHtmlText=htmlEditorView.state.doc.toString();let cXhtmlString,parser,parsedDocument,body,unwantedElements,blockElementsToCheck,walker,textNodesToWrap,currentNode,parent,p,textWalker,textNode,nodesToTrim,excludeTags,exclude,originalValue,trimmedValue,element,isEmpty,containsNonEmptyTextOrElement,childNode,item,paragraphs,fragment,processedHtml,blockTagsPattern,adjacentBlockRegex,finalParser,finalDoc,finalParseError,finalBodyString,bodyIndent,bodyIndex,currentHtmlTextArr,indent,headContents,finalResult,newState,newCssState,initParseError,errorTag,errorLine,errorFixString,errorFixStringArr,bodyContents,errorPass,errorParser,originHeadContents;if(/nav\.xhtml/g.test(instance.currentXhtmlId)||/toc\.ncx/g.test(instance.currentXhtmlId)||/content\.opf/g.test(instance.currentXhtmlId))return instance.saveDebounce(!0),await instance.saveCurrentState(),silentMode||instance.blackAlert("저장되었습니다!",async()=>{},!0).catch(e=>console.log(e)),"";if(cXhtmlString=currentHtmlText.replace(/&(?!#?\w+;)/g,"&amp;").replace(/></g,">\n\n<").replace(/<\/br>/g,"").replace(/<\/br>/gi,"").replace(/<br(?:(?!\/?>)[^>])*?>/gi,"<br />"),!/<html/gi.test(cXhtmlString))throw new Error("this is not html");if(!/<body/gi.test(cXhtmlString))throw new Error("this is not html");if(currentHtmlTextArr=cXhtmlString.split("\n"),bodyIndex=currentHtmlTextArr.findIndex(s=>/<\s*body\s*[^>]*>/gi.test(s)),bodyIndent="  ",headContents="",-1===bodyIndex)throw new Error("invalid html string");if(currentHtmlTextArr[bodyIndex].replace(/(\s*)</g,(match,p1)=>(bodyIndent=p1,match)),headContents=currentHtmlTextArr.slice(0,bodyIndex).join("\n"),bodyContents="",cXhtmlString.replace(/\s*<\s*body\s*[^>]*>(.*?)<\s*\/\s*body\s*>/gis,(match,p1)=>(bodyContents=p1,match)),indent="  ",originHeadContents=instance.idToHeadContents(instance.currentXhtmlId),""!==originHeadContents&&(headContents=originHeadContents,cXhtmlString=headContents+"\n<body>\n"+bodyContents+"\n</body></html>"),parser=new DOMParser,parsedDocument=parser.parseFromString(cXhtmlString,"application/xhtml+xml"),body=parsedDocument.body,!body){if(parsedDocument=parser.parseFromString(headContents+"\n<body>\n"+bodyContents+"\n</body></html>","application/xhtml+xml"),body=parsedDocument.body,!body)throw new Error("there is no body");cXhtmlString=headContents+"\n<body>\n"+bodyContents+"\n</body></html>"}if(initParseError=parsedDocument.querySelector("parsererror"),null!==initParseError){if(errorPass=!1,/Opening\s*and\s*ending\s*tag\s*mismatch\:\s*([a-zA-Z0-9_\-]+)\s*line\s*([0-9]+)/gi.test(String(initParseError.textContent))){if(errorTag="",errorLine=0,initParseError.textContent.replace(/Opening\s*and\s*ending\s*tag\s*mismatch\:\s*([a-zA-Z0-9_\-]+)\s*line\s*([0-9]+)/gi,(match,p1,p2)=>(errorTag=p1,errorLine=Number(p2),match)),errorFixStringArr=cXhtmlString.split("\n"),void 0!==errorFixStringArr[errorLine]&&(errorFixStringArr[errorLine]=errorFixStringArr[errorLine]+"\n</"+errorTag.toLowerCase()+">"),errorFixString=errorFixStringArr.join("\n"),parsedDocument=parser.parseFromString(errorFixString,"application/xhtml+xml"),initParseError=parsedDocument.querySelector("parsererror"),body=parsedDocument.body,!body)throw new Error("there is no body");if(null!==initParseError){if(""===bodyContents)throw new Error("xhtml error => "+initParseError.textContent);errorPass=!1}}else errorPass=!1;errorPass||(errorFixString=headContents+"\n"+bodyIndent+"\n<body>\n"+serialize(parseFragment(bodyContents))+"\n\n</body>\n</html>",errorFixString=errorFixString.replace(/\&lt;/gi,"").replace(/\&lte;/gi,"").replace(/\&gt;/gi,"").replace(/\&gte;/gi,""),errorParser=new DOMParser,parsedDocument=errorParser.parseFromString(errorFixString,"text/html"),initParseError=parsedDocument.querySelector("parsererror"),body=parsedDocument.body)}if(!body)throw new Error("there is no body");body.querySelectorAll("*").forEach(el=>{[...el.childNodes].forEach(child=>{(child.nodeType===Node.CDATA_SECTION_NODE||child.nodeType===Node.TEXT_NODE&&/^\[CDATA\[/.test(child.textContent||""))&&child.remove()})}),unwantedElements=body.querySelectorAll("iframe, script, style, template");for(let i=0;i<unwantedElements.length;i++)unwantedElements[i].remove();for(textWalker=parsedDocument.createTreeWalker(body,NodeFilter.SHOW_TEXT),nodesToTrim=[],excludeTags=["PRE","CODE","STYLE","SCRIPT","TEXTAREA","ARTICLE","ASIDE"];textNode=textWalker.nextNode();){for(parent=textNode.parentNode,exclude=!1;parent&&parent!==body;){if(parent.nodeType===Node.ELEMENT_NODE&&excludeTags.includes(parent.tagName.toUpperCase())){exclude=!0;break}parent=parent.parentNode}exclude||(originalValue=textNode.nodeValue||"",trimmedValue=originalValue.trim(),originalValue!==trimmedValue&&nodesToTrim.push({node:textNode,trimmedValue}))}blockElementsToCheck=body.querySelectorAll("p, div, li, th, td, section, aside, header, address");for(let i=0;i<blockElementsToCheck.length;i++){if(element=blockElementsToCheck[i],isEmpty=!element.hasChildNodes(),!isEmpty){containsNonEmptyTextOrElement=!1;for(let j=0;j<element.childNodes.length;j++){if(childNode=element.childNodes[j],childNode.nodeType===Node.ELEMENT_NODE){containsNonEmptyTextOrElement=!0;break}if(childNode.nodeType===Node.TEXT_NODE&&""!==childNode.textContent?.trim()){containsNonEmptyTextOrElement=!0;break}}containsNonEmptyTextOrElement||(isEmpty=!0)}isEmpty&&("P"===element.tagName?element.innerHTML="&#160;":"DIV"===element.tagName?element.innerHTML="<p>&#160;</p>":"LI"!==element.tagName&&"TH"!==element.tagName&&"TD"!==element.tagName||(element.innerHTML="<p>&#160;</p>"))}for(textNodesToWrap=[],walker=parsedDocument.createTreeWalker(body,NodeFilter.SHOW_TEXT);currentNode=walker.nextNode();)parent=currentNode.parentNode,parent&&parent.nodeType===Node.ELEMENT_NODE&&["BODY","DIV","LI","TH","TD"].includes(parent.nodeName.toUpperCase())&&currentNode.nodeValue&&(""!==currentNode.nodeValue.trim()?textNodesToWrap.push({parent,textNode:currentNode}):currentNode.parentNode?.removeChild(currentNode));if(body.children.length!==body.childNodes.length){const childrenList=[...body.children].map(b=>b),allNodes=[...body.childNodes].filter(n=>!childrenList.includes(n)&&"string"==typeof n.textContent&&""!==n.textContent.trim());for(let textNode of allNodes){const tArr=textNode.textContent.split("\n").map(s=>s.trim()).filter(s=>""!==s);for(let text of tArr){const tempPTag=parsedDocument.createElement("p");tempPTag.textContent=text,body.insertBefore(tempPTag,textNode)}textNode.remove()}}for(let i=0;i<textNodesToWrap.length;i++)if(item=textNodesToWrap[i],parent=item.parent,currentNode=item.textNode,currentNode.parentNode===parent)try{if(originalValue=currentNode.nodeValue||"",paragraphs=originalValue.split(/[\r\n]+/).map(p=>p.trim()).filter(p=>""!==p),paragraphs.length>0){fragment=parsedDocument.createDocumentFragment();for(let j=0;j<paragraphs.length;j++)p=parsedDocument.createElement("p"),p.textContent=paragraphs[j],fragment.appendChild(p);parent.replaceChild(fragment,currentNode)}}catch(wrapError){throw new Error("wrap fail")}const removeTargets=[...body.querySelectorAll(".____shadow__doms__tempclassname__temp____2")].map(d=>d);try{for(let t of removeTargets)t.remove()}catch{}const removeClassContainTargets=[...body.querySelectorAll(".____shadow__doms__tempclassname__temp____")].map(d=>d);try{for(let t of removeClassContainTargets)t.classList.remove("____shadow__doms__tempclassname__temp____")}catch{}if(processedHtml=body.innerHTML,voidElements.forEach(tag=>{const regex=new RegExp(`<(${tag})((?:\\s+[^>]+)?)\\s*>`,"gi");processedHtml=processedHtml.replace(regex,(match,tagName,attributes)=>match.endsWith("/>")?match:`<${tagName}${attributes=attributes||""} />`)}),blockTagsPattern="p|div|ul|ol|table|h[1-6]|blockquote|pre|section|article|aside|nav|header|footer|figure|li|tr|tbody|thead|tfoot|dl",adjacentBlockRegex=new RegExp(`(</(?:${blockTagsPattern})>)\\s*(<(?:${blockTagsPattern})(?:\\s|>))`,"gi"),processedHtml=processedHtml.replace(adjacentBlockRegex,"$1\n\n$2"),processedHtml=processedHtml.replace(/(<p\s*[^>]*>)\s*(<\/p>)/gi,(match,p1,p2)=>p1+"&#160;"+p2),finalParser=new DOMParser,finalDoc=finalParser.parseFromString(`<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Validation</title></head><body>${processedHtml}</body></html>`,"application/xhtml+xml"),finalParseError=finalDoc.querySelector("parsererror"),null!==finalParseError){if(errorFixString=serialize(parseFragment(headContents+"\n"+bodyIndent+"\n<body>\n"+processedHtml+"\n\n</body>\n</html>")),errorFixString=errorFixString.replace(/\&lt;/gi,"").replace(/\&lte;/gi,"").replace(/\&gt;/gi,"").replace(/\&gte;/gi,""),errorParser=new DOMParser,parsedDocument=errorParser.parseFromString(errorFixString,"text/html"),initParseError=parsedDocument.querySelector("parsererror"),null!==initParseError)throw new Error("xhtml error in inspect level : "+finalParseError.textContent);finalBodyString=parsedDocument.body.innerHTML.replace(/\s*xmlns(:\w+)?=['"][^'"]+['"]/gi,"").replace(/(<p\s*[^>]*>)\s*(<\/p>)/gi,(match,p1,p2)=>p1+"&#160;"+p2),finalResult=await PrettyHtml.launching(headContents+"<body>\n"+finalBodyString+"\n</body>\n</html>")}finalBodyString=finalDoc.body.innerHTML.replace(/\s*xmlns(:\w+)?=['"][^'"]+['"]/gi,"").replace(/(<p\s*[^>]*>)\s*(<\/p>)/gi,(match,p1,p2)=>p1+"&#160;"+p2),finalResult=await PrettyHtml.launching(headContents+"<body>\n"+finalBodyString+"\n</body>\n</html>"),/<body>[ ]*<\/body>/gi.test(finalResult)&&(finalResult=finalResult.replace(/(\s*)(<body>)[ ]*(<\/body>)/gi,(match,p1,p2,p3)=>p1+p2+"\n\n"+p1+p3)),/\-\-pseudo\-(opacity|padding\-bottom|margin\-bottom)\s*\:/gs.test(finalResult)&&(finalResult=finalResult.replace(/\-\-pseudo\-(opacity|padding\-bottom|margin\-bottom)\s*\:[^;]*;/gs,"").replace(/(style\=")([^"]+)(")/gis,(match,p1,p2,p3)=>p1+((p2.trim().replace(/;$/,"")+";").split(";").map(s=>s.trim()).filter(s=>""!==s).map(factor=>{const arr=factor.split(":").map(s=>s.trim());return arr[0]+": "+arr[1]}).join(";")+";")+p3).replace(/(style\=")(\s+)(")/gis,'style=""')),finalResult=finalResult.replace(/class\="" /g,"").replace(/style\="" /g,"").replace(/ class\="">/g,">").replace(/ style\="">/g,">").replace(/id\="" /g,"").replace(/ id\="">/g,">").replace(/[ \t\r\f\v]+<\/body>/g,match=>"\n"+match).replace(/([ \t\r\f\v]*)(<body[^>]*>[ \t\r\f\v]*)(\n[ \t\r\f\v]*)+/g,(match,p0,p1,p2)=>p0+p1+p2+"\n  "+p0).replace(/(<input[^>]+>)\s*\n(\s*\n)*([ \t\r\f\v]+)(<label)/gis,(match,p1,p2,p3,p4)=>p1+"\n"+p3+p4).replace(/(>)\s*(<\/span)/gis,(match,p1,p2)=>p1+""+p2).replace(/(\/span>)\n([ \t\r\f\v]*)\n([ \t\r\f\v]*)(<\/)/gis,(match,p1,p2,p3,p4)=>p1+"\n"+p3+p4).replace(/(<h)(5|6)([^>]*>\s*)([0-9]+)(\s+)(\S)/gis,(match,p1,p2,p3,p4,p5,p6)=>p1+p2+p3+p4+String("&#160;").repeat(5+p4.replace(/[^1]/gi,"").length)+p6),newState=htmlEditorView.state.update({changes:{from:0,to:htmlEditorView.state.doc.length,insert:finalResult}}),htmlEditorView.dispatch(newState);try{newCssState=cssEditorView.state.update({changes:{from:0,to:cssEditorView.state.doc.length,insert:await PrettyCss.launching(currentCssText)}}),cssEditorView.dispatch(newCssState)}catch{}return instance.saveDebounce(!0),await instance.saveCurrentState(),silentMode||instance.blackAlert("저장되었습니다!",async()=>{},!0).catch(e=>console.log(e)),finalResult}catch(e){return/this is not html/gi.test(e.message)?(instance.saveDebounce(),silentMode||instance.blackAlert("저장되었습니다!",async()=>{},!0).catch(e=>console.log(e))):(console.log(e),instance.blackAlert("코드의 구조가 잘못되었습니다! 올바르게 고쳐주세요.").catch(e=>console.log(e))),""}};basicEvents=async(resizeMode=!1)=>{await super.main(resizeMode);const instance=this,{totalContents,ea,loadingRun,media}=this,{equalJson,objectDeepCopy,sleep}=AbstractNode,whitePopupClassName=(media[4],instance.whitePreviewPopupClassName);try{this.messageEvent(),this.resizeEvent(),window.addEventListener("keydown",event=>{if("s"===event.key||"S"===event.key||"ㄴ"===event.key)(event.ctrlKey||event.metaKey)&&(event.preventDefault(),null!==document.querySelector(".cssPopupClassName")?(document.querySelector(".cssPopupClassName").click(),sleep(300).then(()=>instance.autoInspector()).catch(e=>console.log(e))):instance.autoInspector().catch(e=>console.log(e)));else if("e"===event.key||"E"===event.key||"ㄷ"===event.key)(event.ctrlKey||event.metaKey)&&(event.preventDefault(),instance.selectByClass(instance.whitePreviewPopupClassName).length>0?instance.whitePopupCloseEvent(event):(instance.saveDebounce(!0),instance.autoInspector(!0).then(()=>instance.previewPopup()).catch(e=>console.log(e))));else if("v"===event.key||"V"===event.key||"ㅍ"===event.key)(event.ctrlKey||event.metaKey)&&(instance.innerCopyStart||(setTimeout(()=>{instance.autoInspector().catch(e=>console.log(e)),instance.innerCopyStart=!1},500),instance.innerCopyStart=!1));else if("c"===event.key||"C"===event.key||"ㅊ"===event.key)(event.ctrlKey||event.metaKey)&&(instance.innerCopyStart=!0);else if(("z"===event.key||"Z"===event.key||"ㅋ"===event.key)&&null!==window.document.querySelector("."+whitePopupClassName)&&null===window.document.querySelector(".cssPopupClassName")&&(event.ctrlKey||event.metaKey)){event.preventDefault();const historyItem=window.localStorage.getItem("____localStorageHistoryToken__shadow__");let thisHistory,target;null!==historyItem&&(thisHistory=equalJson(historyItem),thisHistory.length>0&&(target=objectDeepCopy(thisHistory[0]),"string"==typeof target.html&&""!==target.html.trim()&&(instance.shadowDoms.forEach((d,i)=>{d.querySelector(".shadowDomTargetClassName").shadowRoot.innerHTML=target.html}),instance.shadowDoms.forEach((d,i)=>{const host=d.querySelector(".shadowDomTargetClassName"),thisWidth=([...host.shadowRoot.children].filter(d=>!/style/gi.test(d.nodeName)&&!/script/gi.test(d.nodeName)),host.getBoundingClientRect().width),finalWidth=.75*thisWidth<360?360:.75*thisWidth;instance.domToEventSet(d,thisWidth,finalWidth,!1)}),window.localStorage.setItem("____localStorageHistoryToken__shadow__",JSON.stringify(thisHistory.slice(1))),instance.reverseSave(),setTimeout(()=>{try{instance.reverseSave()}catch{}},500))))}}),window.addEventListener("message",e=>{"string"==typeof e.data.type&&"closeKeydown"===e.data.type&&instance.whitePopupCloseEvent(e)}),window.document.addEventListener("visibilitychange",()=>{instance.innerCopyStart=!1}),window.addEventListener("blur",()=>{instance.innerCopyStart=!1}),window.addEventListener("focus",()=>{instance.innerCopyStart=!1})}catch(e){console.log(e)}};blueLoading=(littleUp=!0)=>{const instance=this,{colorChip,svgMaker:localSvgMaker,binaryPath}=PathAnimator,{withOut,percent,promptPopup,markdownBlocks,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(),totalContents=document.querySelector("#totalcontents");return new Promise((resolve,reject)=>{try{let gradientBackground,baseWhiteBoxWidth,baseWhiteBoxRadius,whiteBoxIconRatio,whiteBoxIconVisualMarginTop,whiteBoxShadow,logoWidth,logoMarginTop,buttonHeight,buttonBorderRadius,buttonMarginTop,buttonPadding,buttonSize,children;document.body.style.transition="all 0s ease",document.body.style.height=String(100)+"vh",document.body.style.background=colorChip.gradientMint,baseWhiteBoxWidth=mediaNumber(240,240,220,200,42),baseWhiteBoxRadius=mediaNumber(50,50,48,45,9),whiteBoxShadow=mediaString("0px 10px 20px -15px "+colorChip.darkDarkShadow,"0px 10px 20px -15px "+colorChip.darkDarkShadow,"0px 10px 20px -15px "+colorChip.darkDarkShadow,"0px 10px 20px -15px "+colorChip.darkDarkShadow,"0px 10px 20px -15px "+colorChip.darkDarkShadow),whiteBoxIconRatio=.65,whiteBoxIconVisualMarginTop=mediaNumber(8,8,8,8,1),logoWidth=mediaNumber(180,180,160,150,31.2),logoMarginTop=mediaNumber(27,27,26,24,5.5),buttonHeight=mediaNumber(38,38,36,33,7.5),buttonBorderRadius=mediaNumber(38,38,38,38,8),buttonMarginTop=mediaNumber(44,44,42,38,8.1),buttonPadding=mediaNumber(20,20,19,17,4),buttonSize=mediaNumber(17,17,16,15,3.5),children=[{style:{position:"absolute",top:0,left:0,width:String(100)+"vw",height:String(100)+"vh",background:colorChip.gradientMint}},{style:{display:"flex",justifyContent:"center",alignItems:"center",width:baseWhiteBoxWidth,height:baseWhiteBoxWidth,borderRadius:baseWhiteBoxRadius,background:colorChip.gradientTrasparentWhite,boxShadow:whiteBoxShadow,opacity:0},child:{mode:"img",source:binaryPath+"/splash/icon.png",style:{width:baseWhiteBoxWidth*whiteBoxIconRatio,marginTop:whiteBoxIconVisualMarginTop}}},{mode:"img",source:binaryPath+"/splash/logo.png",style:{width:logoWidth,marginTop:logoMarginTop,opacity:0}}],littleUp&&children.push({style:{opacity:0,height:buttonHeight,borderRadius:buttonBorderRadius,border:"2px solid "+colorChip.white,marginTop:buttonMarginTop,display:"flex",justifyContent:"center",alignItems:"center",paddingLeft:buttonPadding,paddingRight:buttonPadding,cursor:"pointer"},child:{text:"설치하기",style:{fontSize:buttonSize,fontWeight:900,fontFamily:"pretendard",color:colorChip.white,opacity:0}}}),gradientBackground=createAbstract({mother:totalContents,style:{display:"flex",position:"fixed",top:0,left:0,width:String(100)+"vw",height:String(100)+"vh",justifyContent:"center",alignItems:"center",overflow:"hidden",flexDirection:"column",zIndex:99},child:{style:{display:"flex",position:"relative",top:0,left:0,width:String(100)+"vw",height:String(100)+"vh",justifyContent:"center",alignItems:"center",overflow:"hidden",flexDirection:"column"},children}}),setTimeout(()=>{gradientBackground.children[0].children[1].style.animation="fadeuporiginal 0.8s ease forwards",gradientBackground.children[0].children[2].style.animation="fadeuporiginal 0.8s ease forwards",setTimeout(async()=>{let safeNum,certificationWaitNumber;for(safeNum=0;!(instance.pageLoadingComplete||safeNum>20);)await sleep(500),safeNum++;if(!instance.pageLoadingComplete)for(certificationWaitNumber=0;!instance.pageLoadingComplete;)await sleep(1e3),safeNum++;gradientBackground.style.animation="justfadeoutoriginal 0.8s ease forwards",document.body.style.transition="",document.body.style.height="",document.body.style.background="",setTimeout(()=>{gradientBackground.remove()},801)},1001)},300),document.body.style.transition="",document.body.style.height="",document.body.style.background="",resolve(gradientBackground)}catch(e){console.log(e),reject(e)}})};whiteLoading=async()=>{const instance=this,{colorChip,svgMaker:localSvgMaker,binaryPath}=PathAnimator,{withOut,percent,promptPopup,markdownBlocks,linkToString,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting(),totalContents=document.querySelector("#totalcontents");return new Promise((resolve,reject)=>{try{document.body.style.transition="all 0s ease",document.body.style.height=String(100)+"vh";const whiteBackground=createAbstract({mother:totalContents,style:{display:"flex",position:"fixed",top:0,left:0,width:String(100)+"vw",height:String(100)+"vh",justifyContent:"center",alignItems:"center",overflow:"hidden",flexDirection:"column",zIndex:99,background:colorChip.white}}),loading=instance.whiteProgressLoading(null,!0,!1,100);setTimeout(async()=>{whiteBackground.style.animation="justfadeoutoriginal 0.8s ease forwards",document.body.style.transition="",document.body.style.height="",document.body.style.background="",await loading.softRemove(),setTimeout(()=>{whiteBackground.remove()},799)},600),document.body.style.transition="",document.body.style.height="",resolve(!0)}catch(e){console.log(e),reject(e)}})};splashPage=async()=>{const{colorChip,svgMaker:localSvgMaker,binaryPath}=PathAnimator,{withOut,percent,pwaDetection,promptPopup,markdownBlocks,linkToString,blankHref,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,ajaxJson,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();try{const totalContents=document.querySelector("#totalcontents");let gradientBackground,baseWhiteBoxWidth,baseWhiteBoxRadius,whiteBoxIconRatio,whiteBoxIconVisualMarginTop,whiteBoxShadow,logoWidth,logoMarginTop,buttonHeight,buttonBorderRadius,buttonMarginTop,buttonPadding,buttonSize,deferredPrompt;baseWhiteBoxWidth=mediaNumber(240,240,220,200,42),baseWhiteBoxRadius=mediaNumber(50,50,48,45,9),whiteBoxShadow=mediaString("0px 10px 20px -15px "+colorChip.darkDarkShadow,"0px 10px 20px -15px "+colorChip.darkDarkShadow,"0px 10px 20px -15px "+colorChip.darkDarkShadow,"0px 10px 20px -15px "+colorChip.darkDarkShadow,"0px 10px 20px -15px "+colorChip.darkDarkShadow),whiteBoxIconRatio=.65,whiteBoxIconVisualMarginTop=mediaNumber(8,8,8,8,1),logoWidth=mediaNumber(180,180,160,150,31.2),logoMarginTop=mediaNumber(27,27,26,24,5.5),buttonHeight=mediaNumber(38,38,36,33,7.5),buttonBorderRadius=mediaNumber(38,38,38,38,8),buttonMarginTop=mediaNumber(44,44,42,38,8.1),buttonPadding=mediaNumber(20,20,19,17,4),buttonSize=mediaNumber(17,17,16,15,3.5),deferredPrompt=null,window.addEventListener("beforeinstallprompt",event=>{deferredPrompt=event}),gradientBackground=createAbstract({mother:totalContents,style:{display:"flex",position:"relative",top:0,left:0,width:String(100)+"vw",height:String(100)+"vh",justifyContent:"center",alignItems:"center",overflow:"hidden",flexDirection:"column"},children:[{style:{position:"absolute",top:0,left:0,width:String(100)+"vw",height:String(100)+"vh",background:colorChip.gradientMint}},{style:{display:"flex",justifyContent:"center",alignItems:"center",width:baseWhiteBoxWidth,height:baseWhiteBoxWidth,borderRadius:baseWhiteBoxRadius,background:colorChip.gradientTrasparentWhite,boxShadow:whiteBoxShadow},child:{mode:"img",source:binaryPath+"/splash/icon.png",style:{width:baseWhiteBoxWidth*whiteBoxIconRatio,marginTop:whiteBoxIconVisualMarginTop}}},{mode:"img",source:binaryPath+"/splash/logo.png",style:{width:logoWidth,marginTop:logoMarginTop}},{event:{click:async e=>{if(pwaDetection()&&(window.location.href="/path/home"),null!==deferredPrompt){const result=await deferredPrompt.prompt();"string"==typeof result.outcome&&/accept/gi.test(result.outcome)&&setTimeout(()=>{window.location.href="/path/home"},3e3)}else{const ua=navigator.userAgent.toLowerCase(),isSafariBrowser=/safari/gi.test(ua),isChrome=/chrome/gi.test(ua)||/crios/gi.test(ua),isChromium=/chromium/gi.test(ua),isEdge=/edg/gi.test(ua)||/edgios/gi.test(ua),isFirefox=/firefox/gi.test(ua)||/fxios/gi.test(ua),isOpera=/opr/gi.test(ua)||/opera/gi.test(ua),isSamsungBrowser=/samsungbrowser/gi.test(ua),isAndroidWebView=/wv/gi.test(ua)&&/android/gi.test(ua),electronDownloadLink="https://github.com/sanrabbit123/builder/releases/download/v1.2.0/Abstract-Builder-1.2.0-arm64.dmg";isSafariBrowser&&!isChrome&&!isChromium&&!isEdge&&!isFirefox&&!isOpera&&!isSamsungBrowser&&!isAndroidWebView?navigator.vendor&&/apple\s*computer,\s*inc\./gi.test(navigator.vendor.toLowerCase())&&isSafariBrowser&&(/crios/gi.test(ua)||/fxios/gi.test(ua))?(window.alert("앱이 이미 설치되어 있습니다. 앱으로 실행시켜 주세요!"),setTimeout(()=>{window.location.href="/path/home"},500)):blankHref(electronDownloadLink):(window.alert("앱이 이미 설치되어 있습니다. 앱으로 실행시켜 주세요!"),setTimeout(()=>{window.location.href="/path/home"},500))}}},style:{height:buttonHeight,borderRadius:buttonBorderRadius,border:"2px solid "+colorChip.white,marginTop:buttonMarginTop,display:"flex",justifyContent:"center",alignItems:"center",paddingLeft:buttonPadding,paddingRight:buttonPadding,cursor:"pointer"},child:{text:pwaDetection()?"실행하기":"설치하기",style:{fontSize:buttonSize,fontWeight:900,fontFamily:"pretendard",color:colorChip.white}}}]}),pwaDetection()&&setInterval(()=>{null===deferredPrompt&&(window.location.href="/path/home")},3e3)}catch(e){console.log(e)}};shadowHistory=callback=>{const instance=this,{colorChip,svgMaker:localSvgMaker,binaryPath}=(this.back,PathAnimator),{withOut,percent,promptPopup,equalJson,contextmenuPopup,setDomColor,markdownBlocks,linkToString,hangulToEnglish,stringToLink,gradientCss,mediaEa,cacheImage,safeLoadImage,createAbstract,parsingPath,createImageGroup,sleep,capitalizeString,returnGet,cleanChildren,blackAlert,variableArray,pixelUnit,querySetting,createNode,objectDeepCopy,colorExtended,cssCalc,isMac,isIphone,svgMaker,dateToString,dateToHangul,stringToDate,autoHypenPhone,setQueue,uniqueValue,removeByClass,selectByClass,createDom,createSvg,mediaNumber,mediaString}=AbstractNode,{baseTong,standardWidth,totalContents,naviHeight}=this,{ea,media,mobile,desktop,big,small}=AbstractNode.initSetting();try{let thisHistory,thisHtml,ago,dropIdStatus,thisIsErrorSituation;thisHistory=[],thisHtml="",ago=new Date,thisIsErrorSituation=!1,dropIdStatus="";const historyItem=window.localStorage.getItem("____localStorageHistoryToken__shadow__");null===historyItem?(window.localStorage.setItem("____localStorageHistoryToken__shadow__",JSON.stringify([])),thisHistory=[]):(thisHistory=equalJson(historyItem),ago.setDate(ago.getDate()-1),thisHistory=thisHistory.filter(o=>o.date.valueOf()>ago.valueOf())),instance.shadowDoms.forEach((d,i)=>{if(0===i){const shadow=d.querySelector(".shadowDomTargetClassName").shadowRoot;thisHtml=shadow.innerHTML}}),thisHistory.unshift({date:new Date,html:thisHtml}),thisHistory.length>10&&(thisHistory=thisHistory.slice(0,10)),window.localStorage.setItem("____localStorageHistoryToken__shadow__",JSON.stringify(thisHistory)),instance.shadowDoms.forEach(callback),setQueue(()=>{dropIdStatus="",instance.shadowDoms.forEach((d,i)=>{const thisDropIdStatus=[...d.querySelector(".shadowDomTargetClassName").shadowRoot.children].map(d=>d).map(d=>d.getAttribute("data-dropid")).filter(s=>"string"==typeof s);""===dropIdStatus?(dropIdStatus=JSON.stringify(thisDropIdStatus),thisIsErrorSituation=!1):thisIsErrorSituation=dropIdStatus!==JSON.stringify(thisDropIdStatus)}),thisIsErrorSituation&&setQueue(()=>{instance.whitePopupCloseEvent(new Event("click")),setQueue(()=>{instance.previewPopup().catch(e=>console.log(e))},1e3)},0)},3e3)}catch(e){console.log(e),window.localStorage.removeItem("____localStorageHistoryToken__shadow__")}};async main(resizeMode=!1){await super.main(resizeMode);const instance=this,{returnGet,parsingPath,createNode,pwaDetection,certificationPopup,withOut,setQueue,scrollSetting,ajaxPromise,ajaxJson,querySetting,mediaNumber,mediaString,backgroundSse,selfHref}=AbstractNode,{totalContents,ea,loadingRun,media}=this;media[4];try{let innerMode;if(instance.pageLoadingComplete=!1,innerMode=!1,"inner"===parsingPath().at(-1)&&(innerMode=!0,instance.updateState("home")),innerMode)await instance.whiteLoading(),this.cssUpdate(),await this.baseMaker(),await this.basicEvents(),totalContents.style.height=String(100)+"vh",scrollSetting(),instance.onlinePolling().catch(e=>console.log(e));else if(await instance.blueLoading(!pwaDetection()),pwaDetection()){if(!await certificationPopup())throw new Error("invalid user");const loginResult=await instance.autoLogin();if(""===loginResult)throw new Error("invalid user 3");if(1!==(await ajaxJson({phone:loginResult},"/isValidPhone")).valid)throw new Error("invalid user 2");instance.user=await ajaxJson({phone:loginResult},"/getUser");this.cssUpdate(),await this.baseMaker(),await this.basicEvents(),totalContents.style.height=String(100)+"vh",scrollSetting(),instance.onlinePolling().catch(e=>console.log(e))}else await instance.splashPage();return instance.pageLoadingComplete=!0,!0}catch(e){return console.log(e),window.location.href=ADDRESS.ABSTRACTHOST,!1}}}export{PathAnimator};